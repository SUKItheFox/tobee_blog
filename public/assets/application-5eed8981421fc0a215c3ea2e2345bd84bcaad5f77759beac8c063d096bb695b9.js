function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inheritsLoose(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("navBar").style.top="-450px":document.getElementById("navBar").style.top=""}function scrollFunction(){document.body.scrollTop>20||document.documentElement.scrollTop>20?document.getElementById("myBtn").style.display="block":document.getElementById("myBtn").style.display="none"}function topFunction(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function getColorPickerHTML(e,t){var n="",r=tinyMCEPopup.dom;return(label=r.select("label[for="+t+"]")[0])&&(label.id=label.id||r.uniqueId()),n+='<a role="button" aria-labelledby="'+e+'_label" id="'+e+'_link" href="javascript:;" onclick="tinyMCEPopup.pickColor(event,\''+t+'\');" onmousedown="return false;" class="pickcolor">',n+='<span id="'+e+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;<span id="'+e+'_label" class="mceVoiceLabel mceIconOnly" style="display:none;">'+tinyMCEPopup.getLang("browse")+"</span></span></a>"}function updateColor(e,t){document.getElementById(e).style.backgroundColor=document.forms[0].elements[t].value}function setBrowserDisabled(e,t){var n=document.getElementById(e),r=document.getElementById(e+"_link");r&&(t?(r.setAttribute("realhref",r.getAttribute("href")),r.removeAttribute("href"),tinyMCEPopup.dom.addClass(n,"disabled")):(r.getAttribute("realhref")&&r.setAttribute("href",r.getAttribute("realhref")),tinyMCEPopup.dom.removeClass(n,"disabled")))}function getBrowserHTML(e,t,n,r){var o,i=r+"_"+n+"_browser_callback";return tinyMCEPopup.getParam(i,tinyMCEPopup.getParam("file_browser_callback"))?(o="",o+='<a id="'+e+'_link" href="javascript:openBrowser(\''+e+"','"+t+"', '"+n+"','"+i+'\');" onmousedown="return false;" class="browse">',o+='<span id="'+e+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;</span></a>'):""}function openBrowser(e,t,n,r){"mceButtonDisabled"!=document.getElementById(e).className&&tinyMCEPopup.openBrowser(t,n,r)}function selectByValue(e,t,n,r,o){if(e&&e.elements[t]){n||(n="");for(var i=e.elements[t],a=!1,u=0;u<i.options.length;u++){var c=i.options[u];c.value==n||o&&c.value.toLowerCase()==n.toLowerCase()?(c.selected=!0,a=!0):c.selected=!1}if(!a&&r&&""!=n){var c=new Option(n,n);c.selected=!0,i.options[i.options.length]=c,i.selectedIndex=i.options.length-1}return a}}function getSelectValue(e,t){var n=e.elements[t];return null==n||null==n.options||-1===n.selectedIndex?"":n.options[n.selectedIndex].value}function addSelectValue(e,t,n,r){var o=e.elements[t],i=new Option(n,r);o.options[o.options.length]=i}function addClassesToList(e,t){var n=document.getElementById(e),r=tinyMCEPopup.getParam("theme_advanced_styles",!1);if(r=tinyMCEPopup.getParam(t,r))for(var o=r.split(";"),i=0;i<o.length;i++)if(""!=o){var a,u;a=o[i].split("=")[0],u=o[i].split("=")[1],n.options[n.length]=new Option(a,u)}}function isVisible(e){var t=document.getElementById(e);return t&&"none"!=t.style.display}function convertRGBToHex(e){var t=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi"),n=e.replace(t,"$1,$2,$3").split(",");return 3==n.length?(r=parseInt(n[0]).toString(16),g=parseInt(n[1]).toString(16),b=parseInt(n[2]).toString(16),r=1==r.length?"0"+r:r,g=1==g.length?"0"+g:g,b=1==b.length?"0"+b:b,"#"+r+g+b):e}function convertHexToRGB(e){return-1!=e.indexOf("#")?(e=e.replace(new RegExp("[^0-9A-F]","gi"),""),r=parseInt(e.substring(0,2),16),g=parseInt(e.substring(2,4),16),b=parseInt(e.substring(4,6),16),"rgb("+r+","+g+","+b+")"):e}function trimSize(e){return e.replace(/([0-9\.]+)(px|%|in|cm|mm|em|ex|pt|pc)/i,"$1$2")}function getCSSSize(e){if(""==(e=trimSize(e)))return"";if(/^[0-9]+$/.test(e))e+="px";else if(!/^[0-9\.]+(px|%|in|cm|mm|em|ex|pt|pc)$/i.test(e))return"";return e}function getStyle(e,t,n){var r=tinyMCEPopup.dom.getAttrib(e,t);return""!=r?""+r:(void 0===n&&(n=t),tinyMCEPopup.dom.getStyle(e,n))}function MCTabs(){this.settings=[],this.onChange=tinyMCEPopup.editor.windowManager.createInstance("tinymce.util.Dispatcher")}(function(){var e=this;(function(){(function(){this.Rails={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:{selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",formEnableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]"}}).call(this)}).call(e);var t=e.Rails;(function(){(function(){var e,n;n=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,t.matches=function(e,t){return null!=t.exclude?n.call(e,t.selector)&&!n.call(e,t.exclude):n.call(e,t)},e="_ujsData",t.getData=function(t,n){var r;return null!=(r=t[e])?r[n]:void 0},t.setData=function(t,n,r){return null==t[e]&&(t[e]={}),t[e][n]=r},t.$=function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}).call(this),function(){var e,n,r;e=t.$,r=t.csrfToken=function(){var e;return(e=document.querySelector("meta[name=csrf-token]"))&&e.content},n=t.csrfParam=function(){var e;return(e=document.querySelector("meta[name=csrf-param]"))&&e.content},t.CSRFProtection=function(e){var t;if(null!=(t=r()))return e.setRequestHeader("X-CSRF-Token",t)},t.refreshCSRFTokens=function(){var t,o;if(o=r(),t=n(),null!=o&&null!=t)return e('form input[name="'+t+'"]').forEach(function(e){return e.value=o})}}.call(this),function(){var e,n,r;r=t.matches,e=window.CustomEvent,"function"!=typeof e&&(e=function(e,t){var n;return n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n},e.prototype=window.Event.prototype),n=t.fire=function(t,n,r){var o;return o=new e(n,{bubbles:!0,cancelable:!0,detail:r}),t.dispatchEvent(o),!o.defaultPrevented},t.stopEverything=function(e){return n(e.target,"ujs:everythingStopped"),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()},t.delegate=function(e,t,n,o){return e.addEventListener(n,function(e){var n;for(n=e.target;n instanceof Element&&!r(n,t);)n=n.parentNode;if(n instanceof Element&&!1===o.call(n,e))return e.preventDefault(),e.stopPropagation()})}}.call(this),function(){var e,n,r,o,i,a;n=t.CSRFProtection,o=t.fire,e={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},t.ajax=function(e){var t;return e=i(e),t=r(e,function(){var n;return n=a(t.response,t.getResponseHeader("Content-Type")),2===Math.floor(t.status/100)?"function"==typeof e.success&&e.success(n,t.statusText,t):"function"==typeof e.error&&e.error(n,t.statusText,t),"function"==typeof e.complete?e.complete(t,t.statusText):void 0}),"function"==typeof e.beforeSend&&e.beforeSend(t,e),t.readyState===XMLHttpRequest.OPENED?t.send(e.data):o(document,"ajaxStop")},i=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),"GET"===t.type&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),null==e[t.dataType]&&(t.dataType="*"),t.accept=e[t.dataType],"*"!==t.dataType&&(t.accept+=", */*; q=0.01"),t},r=function(e,t){var r;return r=new XMLHttpRequest,r.open(e.type,e.url,!0),r.setRequestHeader("Accept",e.accept),"string"==typeof e.data&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),n(r),r.withCredentials=!!e.withCredentials,r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)return t(r)},r},a=function(e,t){var n,r;if("string"==typeof e&&"string"==typeof t)if(t.match(/\bjson\b/))try{e=JSON.parse(e)}catch(e){}else if(t.match(/\b(?:java|ecma)script\b/))r=document.createElement("script"),r.text=e,document.head.appendChild(r).parentNode.removeChild(r);else if(t.match(/\b(xml|html|svg)\b/)){n=new DOMParser,t=t.replace(/;.+/,"");try{e=n.parseFromString(e,t)}catch(e){}}return e},t.href=function(e){return e.href},t.isCrossDomain=function(e){var t,n;t=document.createElement("a"),t.href=location.href,n=document.createElement("a");try{return n.href=e,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(e){return e,!0}}}.call(this),function(){var e,n;e=t.matches,n=function(e){return Array.prototype.slice.call(e)},t.serializeElement=function(t,r){var o,i;return o=[t],e(t,"form")&&(o=n(t.elements)),i=[],o.forEach(function(t){if(t.name)return e(t,"select")?n(t.options).forEach(function(e){if(e.selected)return i.push({name:t.name,value:e.value})}):t.checked||-1===["radio","checkbox","submit"].indexOf(t.type)?i.push({name:t.name,value:t.value}):void 0}),r&&i.push(r),i.map(function(e){return null!=e.name?encodeURIComponent(e.name)+"="+encodeURIComponent(e.value):e}).join("&")},t.formElements=function(t,r){return e(t,"form")?n(t.elements).filter(function(t){return e(t,r)}):n(t.querySelectorAll(r))}}.call(this),function(){var e,n,r;n=t.fire,r=t.stopEverything,t.handleConfirm=function(t){if(!e(this))return r(t)},e=function(e){var t,r,o;if(!(o=e.getAttribute("data-confirm")))return!0;if(t=!1,n(e,"confirm")){try{t=confirm(o)}catch(e){}r=n(e,"confirm:complete",[t])}return t&&r}}.call(this),function(){var e,n,r,o,i,a,u,c,s,l,f;s=t.matches,c=t.getData,l=t.setData,f=t.stopEverything,u=t.formElements,t.handleDisabledElement=function(e){var t;if(t=this,t.disabled)return f(e)},t.enableElement=function(e){var n;return n=e instanceof Event?e.target:e,s(n,t.linkDisableSelector)?a(n):s(n,t.buttonDisableSelector)||s(n,t.formEnableSelector)?o(n):s(n,t.formSubmitSelector)?i(n):void 0},t.disableElement=function(o){var i;return i=o instanceof Event?o.target:o,s(i,t.linkDisableSelector)?r(i):s(i,t.buttonDisableSelector)||s(i,t.formDisableSelector)?e(i):s(i,t.formSubmitSelector)?n(i):void 0},r=function(e){var t;return t=e.getAttribute("data-disable-with"),null!=t&&(l(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t),e.addEventListener("click",f),l(e,"ujs:disabled",!0)},a=function(e){var t;return t=c(e,"ujs:enable-with"),null!=t&&(e.innerHTML=t,l(e,"ujs:enable-with",null)),e.removeEventListener("click",f),l(e,"ujs:disabled",null)},n=function(n){return u(n,t.formDisableSelector).forEach(e)},e=function(e){var t;return t=e.getAttribute("data-disable-with"),null!=t&&(s(e,"button")?(l(e,"ujs:enable-with",e.innerHTML),e.innerHTML=t):(l(e,"ujs:enable-with",e.value),e.value=t)),e.disabled=!0,l(e,"ujs:disabled",!0)},i=function(e){return u(e,t.formEnableSelector).forEach(o)},o=function(e){var t;return t=c(e,"ujs:enable-with"),null!=t&&(s(e,"button")?e.innerHTML=t:e.value=t,l(e,"ujs:enable-with",null)),e.disabled=!1,l(e,"ujs:disabled",null)}}.call(this),function(){var e;e=t.stopEverything,t.handleMethod=function(n){var r,o,i,a,u,c,s;if(c=this,s=c.getAttribute("data-method"))return u=t.href(c),o=t.csrfToken(),r=t.csrfParam(),i=document.createElement("form"),a="<input name='_method' value='"+s+"' type='hidden' />",null==r||null==o||t.isCrossDomain(u)||(a+="<input name='"+r+"' value='"+o+"' type='hidden' />"),a+='<input type="submit" />',i.method="post",i.action=u,i.target=c.target,i.innerHTML=a,i.style.display="none",document.body.appendChild(i),i.querySelector('[type="submit"]').click(),e(n)}}.call(this),function(){var e,n,r,o,i,a,u,c,s,l=[].slice;a=t.matches,r=t.getData,c=t.setData,n=t.fire,s=t.stopEverything,e=t.ajax,o=t.isCrossDomain,u=t.serializeElement,i=function(e){var t;return null!=(t=e.getAttribute("data-remote"))&&"false"!==t},t.handleRemote=function(f){var d,p,m,g,h,v,y;return g=this,!i(g)||(n(g,"ajax:before")?(y=g.getAttribute("data-with-credentials"),m=g.getAttribute("data-type")||"script",a(g,t.formSubmitSelector)?(d=r(g,"ujs:submit-button"),h=r(g,"ujs:submit-button-formmethod")||g.method,v=r(g,"ujs:submit-button-formaction")||g.getAttribute("action")||location.href,"GET"===h.toUpperCase()&&(v=v.replace(/\?.*$/,"")),"multipart/form-data"===g.enctype?(p=new FormData(g),null!=d&&p.append(d.name,d.value)):p=u(g,d),c(g,"ujs:submit-button",null),c(g,"ujs:submit-button-formmethod",null),c(g,"ujs:submit-button-formaction",null)):a(g,t.buttonClickSelector)||a(g,t.inputChangeSelector)?(h=g.getAttribute("data-method"),v=g.getAttribute("data-url"),p=u(g,g.getAttribute("data-params"))):(h=g.getAttribute("data-method"),v=t.href(g),p=g.getAttribute("data-params")),e({type:h||"GET",url:v,data:p,dataType:m,beforeSend:function(e,t){return n(g,"ajax:beforeSend",[e,t])?n(g,"ajax:send",[e]):(n(g,"ajax:stopped"),e.abort())},success:function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],n(g,"ajax:success",e)},error:function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],n(g,"ajax:error",e)},complete:function(){var e;return e=1<=arguments.length?l.call(arguments,0):[],n(g,"ajax:complete",e)},crossDomain:o(v),withCredentials:null!=y&&"false"!==y}),s(f)):(n(g,"ajax:stopped"),!1))},t.formSubmitButtonClick=function(){var e,t;if(e=this,t=e.form)return e.name&&c(t,"ujs:submit-button",{name:e.name,value:e.value}),c(t,"ujs:formnovalidate-button",e.formNoValidate),c(t,"ujs:submit-button-formaction",e.getAttribute("formaction")),c(t,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},t.handleMetaClick=function(e){var t,n,r;if(n=this,r=(n.getAttribute("data-method")||"GET").toUpperCase(),t=n.getAttribute("data-params"),(e.metaKey||e.ctrlKey)&&"GET"===r&&!t)return e.stopImmediatePropagation()}}.call(this),function(){var e,n,r,o,i,a,u,c,s,l,f,d,p,m;a=t.fire,r=t.delegate,c=t.getData,e=t.$,m=t.refreshCSRFTokens,n=t.CSRFProtection,i=t.enableElement,o=t.disableElement,l=t.handleDisabledElement,s=t.handleConfirm,p=t.handleRemote,u=t.formSubmitButtonClick,f=t.handleMetaClick,d=t.handleMethod,"undefined"==typeof jQuery||null===jQuery||null==jQuery.ajax||jQuery.rails||(jQuery.rails=t,jQuery.ajaxPrefilter(function(e,t,r){if(!e.crossDomain)return n(r)})),t.start=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){return e(t.formEnableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return i(e)}),e(t.linkDisableSelector).forEach(function(e){if(c(e,"ujs:disabled"))return i(e)})}),r(document,t.linkDisableSelector,"ajax:complete",i),r(document,t.linkDisableSelector,"ajax:stopped",i),r(document,t.buttonDisableSelector,"ajax:complete",i),r(document,t.buttonDisableSelector,"ajax:stopped",i),r(document,t.linkClickSelector,"click",l),r(document,t.linkClickSelector,"click",s),r(document,t.linkClickSelector,"click",f),r(document,t.linkClickSelector,"click",o),r(document,t.linkClickSelector,"click",p),r(document,t.linkClickSelector,"click",d),r(document,t.buttonClickSelector,"click",l),r(document,t.buttonClickSelector,"click",s),r(document,t.buttonClickSelector,"click",o),r(document,t.buttonClickSelector,"click",p),r(document,t.inputChangeSelector,"change",l),r(document,t.inputChangeSelector,"change",s),r(document,t.inputChangeSelector,"change",p),r(document,t.formSubmitSelector,"submit",l),r(document,t.formSubmitSelector,"submit",s),r(document,t.formSubmitSelector,"submit",p),r(document,t.formSubmitSelector,"submit",function(e){return setTimeout(function(){return o(e)},13)}),r(document,t.formSubmitSelector,"ajax:send",o),r(document,t.formSubmitSelector,"ajax:complete",i),r(document,t.formInputClickSelector,"click",l),r(document,t.formInputClickSelector,"click",s),r(document,t.formInputClickSelector,"click",u),document.addEventListener("DOMContentLoaded",m),window._rails_loaded=!0},window.Rails===t&&a(document,"rails:attachBindings")&&t.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}).call(this);var bootstrap=function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}t=t&&t.hasOwnProperty("default")?t["default"]:t,n=n&&n.hasOwnProperty("default")?n["default"]:n;var a=function(){function e(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(){return{bindType:a.end,delegateType:a.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function r(){if(window.QUnit)return!1;var e=document.createElement("bootstrap");for(var t in c)if("undefined"!=typeof e.style[t])return{end:c[t]};return!1}function o(e){var n=this,r=!1;return t(this).one(s.TRANSITION_END,function(){r=!0}),setTimeout(function(){r||s.triggerTransitionEnd(n)},e),this}function i(){a=r(),t.fn.emulateTransitionEnd=o,s.supportsTransitionEnd()&&(t.event.special[s.TRANSITION_END]=n())}var a=!1,u=1e6,c={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(Math.random()*u)}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var n=e.getAttribute("data-target");n&&"#"!==n||(n=e.getAttribute("href")||"");try{return t(document).find(n).length>0?n:null}catch(e){return null}},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(t,n,r){for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=r[o],a=n[o],u=a&&s.isElement(a)?"element":e(a);if(!new RegExp(i).test(u))throw new Error(t.toUpperCase()+': Option "'+o+'" provided type "'+u+'" but expected type "'+i+'".')}}};return i(),s}(),u=o,c=i,s=function(){var e="alert",n="4.0.0-beta.2",r="bs.alert",o="."+r,i=".data-api",c=t.fn[e],s=150,l={DISMISS:'[data-dismiss="alert"]'},f={CLOSE:"close"+o,CLOSED:"closed"+o,CLICK_DATA_API:"click"+o+i},d={ALERT:"alert",FADE:"fade",SHOW:"show"},p=function(){function e(e){this._element=e}var o=e.prototype;return o.close=function(e){e=e||this._element;var t=this._getRootElement(e);this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},o.dispose=function(){t.removeData(this._element,r),this._element=null},o._getRootElement=function(e){var n=a.getSelectorFromElement(e),r=!1;return n&&(r=t(n)[0]),r||(r=t(e).closest("."+d.ALERT)[0]),r},o._triggerCloseEvent=function(e){var n=t.Event(f.CLOSE);return t(e).trigger(n),n},o._removeElement=function(e){var n=this;if(t(e).removeClass(d.SHOW),!a.supportsTransitionEnd()||!t(e).hasClass(d.FADE))return void this._destroyElement(e);t(e).one(a.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(s)},o._destroyElement=function(e){t(e).detach().trigger(f.CLOSED).remove()},e._jQueryInterface=function(n){return this.each(function(){var o=t(this),i=o.data(r);i||(i=new e(this),o.data(r,i)),"close"===n&&i[n](this)})},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},u(e,null,[{key:"VERSION",get:function(){return n}}]),e}();return t(document).on(f.CLICK_DATA_API,l.DISMISS,p._handleDismiss(new p)),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=c,p._jQueryInterface},p}(),l=function(){var e="button",n="4.0.0-beta.2",r="bs.button",o="."+r,i=".data-api",a=t.fn[e],c={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},s={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},l={CLICK_DATA_API:"click"+o+i,FOCUS_BLUR_DATA_API:"focus"+o+i+" blur"+o+i},f=function(){function e(e){this._element=e}var o=e.prototype;return o.toggle=function(){var e=!0,n=!0,r=t(this._element).closest(s.DATA_TOGGLE)[0];if(r){var o=t(this._element).find(s.INPUT)[0];if(o){if("radio"===o.type)if(o.checked&&t(this._element).hasClass(c.ACTIVE))e=!1;else{var i=t(r).find(s.ACTIVE)[0];i&&t(i).removeClass(c.ACTIVE)}if(e){if(o.hasAttribute("disabled")||r.hasAttribute("disabled")||o.classList.contains("disabled")||r.classList.contains("disabled"))return;o.checked=!t(this._element).hasClass(c.ACTIVE),t(o).trigger("change")}o.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!t(this._element).hasClass(c.ACTIVE)),e&&t(this._element).toggleClass(c.ACTIVE)},o.dispose=function(){t.removeData(this._element,r),this._element=null},e._jQueryInterface=function(n){return this.each(function(){var o=t(this).data(r);o||(o=new e(this),t(this).data(r,o)),"toggle"===n&&o[n]()})},u(e,null,[{key:"VERSION",get:function(){return n}}]),e}();return t(document).on(l.CLICK_DATA_API,s.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(c.BUTTON)||(n=t(n).closest(s.BUTTON)),f._jQueryInterface.call(t(n),"toggle")}).on(l.FOCUS_BLUR_DATA_API,s.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(s.BUTTON)[0];t(n).toggleClass(c.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=f._jQueryInterface,t.fn[e].Constructor=f,t.fn[e].noConflict=function(){return t.fn[e]=a,f._jQueryInterface},f}(),f=function(){var e="carousel",n="4.0.0-beta.2",r="bs.carousel",o="."+r,i=".data-api",c=t.fn[e],s=600,l=37,f=39,d=500,p={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},m={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},g={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},h={SLIDE:"slide"+o,SLID:"slid"+o,KEYDOWN:"keydown"+o,MOUSEENTER:"mouseenter"+o,MOUSELEAVE:"mouseleave"+o,TOUCHEND:"touchend"+o,LOAD_DATA_API:"load"+o+i,CLICK_DATA_API:"click"+o+i},v={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},y={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},b=function(){function i(e,n){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(n),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(y.INDICATORS)[0],this._addEventListeners()}var c=i.prototype;return c.next=function(){this._isSliding||this._slide(g.NEXT)},c.nextWhenVisible=function(){!document.hidden&&t(this._element).is(":visible")&&"hidden"!==t(this._element).css("visibility")&&this.next()},c.prev=function(){this._isSliding||this._slide(g.PREV)},c.pause=function(e){e||(this._isPaused=!0),t(this._element).find(y.NEXT_PREV)[0]&&a.supportsTransitionEnd()&&(a.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},c.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function(e){var n=this;this._activeElement=t(this._element).find(y.ACTIVE_ITEM)[0];var r=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void t(this._element).one(h.SLID,function(){return n.to(e)});if(r===e)return this.pause(),void this.cycle();var o=e>r?g.NEXT:g.PREV;this._slide(o,this._items[e])}},c.dispose=function(){t(this._element).off(o),t.removeData(this._element,r),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},c._getConfig=function(n){return n=t.extend({},p,n),a.typeCheckConfig(e,n,m),n},c._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(h.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&(t(this._element).on(h.MOUSEENTER,function(t){return e.pause(t)}).on(h.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&t(this._element).on(h.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},d+e._config.interval)}))},c._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case l:e.preventDefault(),this.prev();break;case f:e.preventDefault(),this.next();break;default:return}},c._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(y.ITEM)),this._items.indexOf(e)},c._getItemByDirection=function(e,t){var n=e===g.NEXT,r=e===g.PREV,o=this._getItemIndex(t),i=this._items.length-1;if((r&&0===o||n&&o===i)&&!this._config.wrap)return t;var a=e===g.PREV?-1:1,u=(o+a)%this._items.length;return-1===u?this._items[this._items.length-1]:this._items[u]},c._triggerSlideEvent=function(e,n){var r=this._getItemIndex(e),o=this._getItemIndex(t(this._element).find(y.ACTIVE_ITEM)[0]),i=t.Event(h.SLIDE,{relatedTarget:e,direction:n,from:o,to:r});return t(this._element).trigger(i),i},c._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(y.ACTIVE).removeClass(v.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(v.ACTIVE)}},c._slide=function(e,n){var r,o,i,u=this,c=t(this._element).find(y.ACTIVE_ITEM)[0],l=this._getItemIndex(c),f=n||c&&this._getItemByDirection(e,c),d=this._getItemIndex(f),p=Boolean(this._interval);if(e===g.NEXT?(r=v.LEFT,o=v.NEXT,i=g.LEFT):(r=v.RIGHT,o=v.PREV,i=g.RIGHT),f&&t(f).hasClass(v.ACTIVE))return void(this._isSliding=!1);if(!this._triggerSlideEvent(f,i).isDefaultPrevented()&&c&&f){this._isSliding=!0,p&&this.pause(),this._setActiveIndicatorElement(f);var m=t.Event(h.SLID,{relatedTarget:f,direction:i,from:l,to:d});a.supportsTransitionEnd()&&t(this._element).hasClass(v.SLIDE)?(t(f).addClass(o),a.reflow(f),t(c).addClass(r),t(f).addClass(r),t(c).one(a.TRANSITION_END,function(){t(f).removeClass(r+" "+o).addClass(v.ACTIVE),t(c).removeClass(v.ACTIVE+" "+o+" "+r),u._isSliding=!1,setTimeout(function(){return t(u._element).trigger(m)},0)}).emulateTransitionEnd(s)):(t(c).removeClass(v.ACTIVE),t(f).addClass(v.ACTIVE),this._isSliding=!1,t(this._element).trigger(m)),p&&this.cycle()}},i._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(r),o=t.extend({},p,t(this).data());"object"==typeof e&&t.extend(o,e);var a="string"==typeof e?e:o.slide;if(n||(n=new i(this,o),t(this).data(r,n)),"number"==typeof e)n.to(e);else if("string"==typeof a){if("undefined"==typeof n[a])throw new Error('No method named "'+a+'"');n[a]()}else o.interval&&(n.pause(),n.cycle())})},i._dataApiClickHandler=function(e){var n=a.getSelectorFromElement(this);if(n){var o=t(n)[0];if(o&&t(o).hasClass(v.CAROUSEL)){var u=t.extend({},t(o).data(),t(this).data()),c=this.getAttribute("data-slide-to");c&&(u.interval=!1),i._jQueryInterface.call(t(o),u),c&&t(o).data(r).to(c),e.preventDefault()}}},u(i,null,[{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return p}}]),i}();return t(document).on(h.CLICK_DATA_API,y.DATA_SLIDE,b._dataApiClickHandler),t(window).on(h.LOAD_DATA_API,function(){t(y.DATA_RIDE).each(function(){var e=t(this);b._jQueryInterface.call(e,e.data())})}),t.fn[e]=b._jQueryInterface,t.fn[e].Constructor=b,t.fn[e].noConflict=function(){return t.fn[e]=c,b._jQueryInterface},b}(),d=function(){var e="collapse",n="4.0.0-beta.2",r="bs.collapse",o="."+r,i=".data-api",c=t.fn[e],s=600,l={toggle:!0,parent:""},f={toggle:"boolean",parent:"(string|element)"},d={SHOW:"show"+o,SHOWN:"shown"+o,HIDE:"hide"+o,HIDDEN:"hidden"+o,CLICK_DATA_API:"click"+o+i},p={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},m={WIDTH:"width",HEIGHT:"height"},g={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},h=function(){function o(e,n){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(n),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var r=t(g.DATA_TOGGLE),o=0;o<r.length;o++){var i=r[o],u=a.getSelectorFromElement(i);null!==u&&t(u).filter(e).length>0&&this._triggerArray.push(i)}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=o.prototype;return i.toggle=function(){t(this._element).hasClass(p.SHOW)?this.hide():this.show()},i.show=function(){var e=this;if(!this._isTransitioning&&!t(this._element).hasClass(p.SHOW)){var n,i;if(this._parent&&(n=t.makeArray(t(this._parent).children().children(g.ACTIVES)),n.length||(n=null)),!(n&&(i=t(n).data(r))&&i._isTransitioning)){var u=t.Event(d.SHOW)
;if(t(this._element).trigger(u),!u.isDefaultPrevented()){n&&(o._jQueryInterface.call(t(n),"hide"),i||t(n).data(r,null));var c=this._getDimension();t(this._element).removeClass(p.COLLAPSE).addClass(p.COLLAPSING),this._element.style[c]=0,this._triggerArray.length&&t(this._triggerArray).removeClass(p.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var l=function(){t(e._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).addClass(p.SHOW),e._element.style[c]="",e.setTransitioning(!1),t(e._element).trigger(d.SHOWN)};if(!a.supportsTransitionEnd())return void l();var f=c[0].toUpperCase()+c.slice(1),m="scroll"+f;t(this._element).one(a.TRANSITION_END,l).emulateTransitionEnd(s),this._element.style[c]=this._element[m]+"px"}}}},i.hide=function(){var e=this;if(!this._isTransitioning&&t(this._element).hasClass(p.SHOW)){var n=t.Event(d.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var r=this._getDimension();if(this._element.style[r]=this._element.getBoundingClientRect()[r]+"px",a.reflow(this._element),t(this._element).addClass(p.COLLAPSING).removeClass(p.COLLAPSE).removeClass(p.SHOW),this._triggerArray.length)for(var o=0;o<this._triggerArray.length;o++){var i=this._triggerArray[o],u=a.getSelectorFromElement(i);if(null!==u){var c=t(u);c.hasClass(p.SHOW)||t(i).addClass(p.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var l=function(){e.setTransitioning(!1),t(e._element).removeClass(p.COLLAPSING).addClass(p.COLLAPSE).trigger(d.HIDDEN)};if(this._element.style[r]="",!a.supportsTransitionEnd())return void l();t(this._element).one(a.TRANSITION_END,l).emulateTransitionEnd(s)}}},i.setTransitioning=function(e){this._isTransitioning=e},i.dispose=function(){t.removeData(this._element,r),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(n){return n=t.extend({},l,n),n.toggle=Boolean(n.toggle),a.typeCheckConfig(e,n,f),n},i._getDimension=function(){return t(this._element).hasClass(m.WIDTH)?m.WIDTH:m.HEIGHT},i._getParent=function(){var e=this,n=null;a.isElement(this._config.parent)?(n=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(n=this._config.parent[0])):n=t(this._config.parent)[0];var r='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(r).each(function(t,n){e._addAriaAndCollapsedClass(o._getTargetFromElement(n),[n])}),n},i._addAriaAndCollapsedClass=function(e,n){if(e){var r=t(e).hasClass(p.SHOW);n.length&&t(n).toggleClass(p.COLLAPSED,!r).attr("aria-expanded",r)}},o._getTargetFromElement=function(e){var n=a.getSelectorFromElement(e);return n?t(n)[0]:null},o._jQueryInterface=function(e){return this.each(function(){var n=t(this),i=n.data(r),a=t.extend({},l,n.data(),"object"==typeof e&&e);if(!i&&a.toggle&&/show|hide/.test(e)&&(a.toggle=!1),i||(i=new o(this,a),n.data(r,i)),"string"==typeof e){if("undefined"==typeof i[e])throw new Error('No method named "'+e+'"');i[e]()}})},u(o,null,[{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return l}}]),o}();return t(document).on(d.CLICK_DATA_API,g.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var n=t(this),o=a.getSelectorFromElement(this);t(o).each(function(){var e=t(this),o=e.data(r),i=o?"toggle":n.data();h._jQueryInterface.call(e,i)})}),t.fn[e]=h._jQueryInterface,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=c,h._jQueryInterface},h}(),p=function(){if(void 0===n)throw new Error("Bootstrap dropdown require Popper.js (https://popper.js.org)");var e="dropdown",r="4.0.0-beta.2",o="bs.dropdown",i="."+o,c=".data-api",s=t.fn[e],l=27,f=32,d=9,p=38,m=40,g=3,h=new RegExp(p+"|"+m+"|"+l),v={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,CLICK:"click"+i,CLICK_DATA_API:"click"+i+c,KEYDOWN_DATA_API:"keydown"+i+c,KEYUP_DATA_API:"keyup"+i+c},y={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left"},b={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled)"},x={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end"},w={offset:0,flip:!0},C={offset:"(number|string|function)",flip:"boolean"},k=function(){function c(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var s=c.prototype;return s.toggle=function(){if(!this._element.disabled&&!t(this._element).hasClass(y.DISABLED)){var e=c._getParentFromElement(this._element),r=t(this._menu).hasClass(y.SHOW);if(c._clearMenus(),!r){var o={relatedTarget:this._element},i=t.Event(v.SHOW,o);if(t(e).trigger(i),!i.isDefaultPrevented()){var a=this._element;t(e).hasClass(y.DROPUP)&&(t(this._menu).hasClass(y.MENULEFT)||t(this._menu).hasClass(y.MENURIGHT))&&(a=e),this._popper=new n(a,this._menu,this._getPopperConfig()),"ontouchstart"in document.documentElement&&!t(e).closest(b.NAVBAR_NAV).length&&t("body").children().on("mouseover",null,t.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),t(this._menu).toggleClass(y.SHOW),t(e).toggleClass(y.SHOW).trigger(t.Event(v.SHOWN,o))}}}},s.dispose=function(){t.removeData(this._element,o),t(this._element).off(i),this._element=null,this._menu=null,null!==this._popper&&this._popper.destroy(),this._popper=null},s.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},s._addEventListeners=function(){var e=this;t(this._element).on(v.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},s._getConfig=function(n){return n=t.extend({},this.constructor.Default,t(this._element).data(),n),a.typeCheckConfig(e,n,this.constructor.DefaultType),n},s._getMenuElement=function(){if(!this._menu){var e=c._getParentFromElement(this._element);this._menu=t(e).find(b.MENU)[0]}return this._menu},s._getPlacement=function(){var e=t(this._element).parent(),n=x.BOTTOM;return e.hasClass(y.DROPUP)?(n=x.TOP,t(this._menu).hasClass(y.MENURIGHT)&&(n=x.TOPEND)):t(this._menu).hasClass(y.MENURIGHT)&&(n=x.BOTTOMEND),n},s._detectNavbar=function(){return t(this._element).closest(".navbar").length>0},s._getPopperConfig=function(){var e=this,n={};"function"==typeof this._config.offset?n.fn=function(n){return n.offsets=t.extend({},n.offsets,e._config.offset(n.offsets)||{}),n}:n.offset=this._config.offset;var r={placement:this._getPlacement(),modifiers:{offset:n,flip:{enabled:this._config.flip}}};return this._inNavbar&&(r.modifiers.applyStyle={enabled:!this._inNavbar}),r},c._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(o),r="object"==typeof e?e:null;if(n||(n=new c(this,r),t(this).data(o,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new Error('No method named "'+e+'"');n[e]()}})},c._clearMenus=function(e){if(!e||e.which!==g&&("keyup"!==e.type||e.which===d))for(var n=t.makeArray(t(b.DATA_TOGGLE)),r=0;r<n.length;r++){var i=c._getParentFromElement(n[r]),a=t(n[r]).data(o),u={relatedTarget:n[r]};if(a){var s=a._menu;if(t(i).hasClass(y.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===d)&&t.contains(i,e.target))){var l=t.Event(v.HIDE,u);t(i).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&t("body").children().off("mouseover",null,t.noop),n[r].setAttribute("aria-expanded","false"),t(s).removeClass(y.SHOW),t(i).removeClass(y.SHOW).trigger(t.Event(v.HIDDEN,u)))}}}},c._getParentFromElement=function(e){var n,r=a.getSelectorFromElement(e);return r&&(n=t(r)[0]),n||e.parentNode},c._dataApiKeydownHandler=function(e){if(!(!h.test(e.which)||/button/i.test(e.target.tagName)&&e.which===f||/input|textarea/i.test(e.target.tagName)||(e.preventDefault(),e.stopPropagation(),this.disabled||t(this).hasClass(y.DISABLED)))){var n=c._getParentFromElement(this),r=t(n).hasClass(y.SHOW);if(!r&&(e.which!==l||e.which!==f)||r&&(e.which===l||e.which===f)){if(e.which===l){var o=t(n).find(b.DATA_TOGGLE)[0];t(o).trigger("focus")}return void t(this).trigger("click")}var i=t(n).find(b.VISIBLE_ITEMS).get();if(i.length){var a=i.indexOf(e.target);e.which===p&&a>0&&a--,e.which===m&&a<i.length-1&&a++,a<0&&(a=0),i[a].focus()}}},u(c,null,[{key:"VERSION",get:function(){return r}},{key:"Default",get:function(){return w}},{key:"DefaultType",get:function(){return C}}]),c}();return t(document).on(v.KEYDOWN_DATA_API,b.DATA_TOGGLE,k._dataApiKeydownHandler).on(v.KEYDOWN_DATA_API,b.MENU,k._dataApiKeydownHandler).on(v.CLICK_DATA_API+" "+v.KEYUP_DATA_API,k._clearMenus).on(v.CLICK_DATA_API,b.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),k._jQueryInterface.call(t(this),"toggle")}).on(v.CLICK_DATA_API,b.FORM_CHILD,function(e){e.stopPropagation()}),t.fn[e]=k._jQueryInterface,t.fn[e].Constructor=k,t.fn[e].noConflict=function(){return t.fn[e]=s,k._jQueryInterface},k}(),m=function(){var e="modal",n="4.0.0-beta.2",r="bs.modal",o="."+r,i=".data-api",c=t.fn[e],s=300,l=150,f=27,d={backdrop:!0,keyboard:!0,focus:!0,show:!0},p={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},m={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,FOCUSIN:"focusin"+o,RESIZE:"resize"+o,CLICK_DISMISS:"click.dismiss"+o,KEYDOWN_DISMISS:"keydown.dismiss"+o,MOUSEUP_DISMISS:"mouseup.dismiss"+o,MOUSEDOWN_DISMISS:"mousedown.dismiss"+o,CLICK_DATA_API:"click"+o+i},g={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},h={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},v=function(){function i(e,n){this._config=this._getConfig(n),this._element=e,this._dialog=t(e).find(h.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var c=i.prototype;return c.toggle=function(e){return this._isShown?this.hide():this.show(e)},c.show=function(e){var n=this;if(!this._isTransitioning&&!this._isShown){a.supportsTransitionEnd()&&t(this._element).hasClass(g.FADE)&&(this._isTransitioning=!0);var r=t.Event(m.SHOW,{relatedTarget:e});t(this._element).trigger(r),this._isShown||r.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),t(document.body).addClass(g.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(m.CLICK_DISMISS,h.DATA_DISMISS,function(e){return n.hide(e)}),t(this._dialog).on(m.MOUSEDOWN_DISMISS,function(){t(n._element).one(m.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))}},c.hide=function(e){var n=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var r=t.Event(m.HIDE);if(t(this._element).trigger(r),this._isShown&&!r.isDefaultPrevented()){this._isShown=!1;var o=a.supportsTransitionEnd()&&t(this._element).hasClass(g.FADE);o&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),t(document).off(m.FOCUSIN),t(this._element).removeClass(g.SHOW),t(this._element).off(m.CLICK_DISMISS),t(this._dialog).off(m.MOUSEDOWN_DISMISS),o?t(this._element).one(a.TRANSITION_END,function(e){return n._hideModal(e)}).emulateTransitionEnd(s):this._hideModal()}}},c.dispose=function(){t.removeData(this._element,r),t(window,document,this._element,this._backdrop).off(o),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},c.handleUpdate=function(){this._adjustDialog()},c._getConfig=function(n){return n=t.extend({},d,n),a.typeCheckConfig(e,n,p),n},c._showElement=function(e){var n=this,r=a.supportsTransitionEnd()&&t(this._element).hasClass(g.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,r&&a.reflow(this._element),t(this._element).addClass(g.SHOW),this._config.focus&&this._enforceFocus();var o=t.Event(m.SHOWN,{relatedTarget:e}),i=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(o)};r?t(this._dialog).one(a.TRANSITION_END,i).emulateTransitionEnd(s):i()},c._enforceFocus=function(){var e=this;t(document).off(m.FOCUSIN).on(m.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})},c._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(m.KEYDOWN_DISMISS,function(t){t.which===f&&(t.preventDefault(),e.hide())}):this._isShown||t(this._element).off(m.KEYDOWN_DISMISS)},c._setResizeEvent=function(){var e=this;this._isShown?t(window).on(m.RESIZE,function(t){return e.handleUpdate(t)}):t(window).off(m.RESIZE)},c._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(g.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(m.HIDDEN)})},c._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},c._showBackdrop=function(e){var n=this,r=t(this._element).hasClass(g.FADE)?g.FADE:"";if(this._isShown&&this._config.backdrop){var o=a.supportsTransitionEnd()&&r;if(this._backdrop=document.createElement("div"),this._backdrop.className=g.BACKDROP,r&&t(this._backdrop).addClass(r),t(this._backdrop).appendTo(document.body),t(this._element).on(m.CLICK_DISMISS,function(e){if(n._ignoreBackdropClick)return void(n._ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),o&&a.reflow(this._backdrop),t(this._backdrop).addClass(g.SHOW),!e)return;if(!o)return void e();t(this._backdrop).one(a.TRANSITION_END,e).emulateTransitionEnd(l)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(g.SHOW);var i=function(){n._removeBackdrop(),e&&e()};a.supportsTransitionEnd()&&t(this._element).hasClass(g.FADE)?t(this._backdrop).one(a.TRANSITION_END,i).emulateTransitionEnd(l):i()}else e&&e()},c._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},c._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},c._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},c._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){t(h.FIXED_CONTENT).each(function(n,r){var o=t(r)[0].style.paddingRight,i=t(r).css("padding-right");t(r).data("padding-right",o).css("padding-right",parseFloat(i)+e._scrollbarWidth+"px")}),t(h.STICKY_CONTENT).each(function(n,r){var o=t(r)[0].style.marginRight,i=t(r).css("margin-right");t(r).data("margin-right",o).css("margin-right",parseFloat(i)-e._scrollbarWidth+"px")}),t(h.NAVBAR_TOGGLER).each(function(n,r){var o=t(r)[0].style.marginRight,i=t(r).css("margin-right");t(r).data("margin-right",o).css("margin-right",parseFloat(i)+e._scrollbarWidth+"px")});var n=document.body.style.paddingRight,r=t("body").css("padding-right");t("body").data("padding-right",n).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}},c._resetScrollbar=function(){t(h.FIXED_CONTENT).each(function(e,n){var r=t(n).data("padding-right");void 0!==r&&t(n).css("padding-right",r).removeData("padding-right")}),t(h.STICKY_CONTENT+", "+h.NAVBAR_TOGGLER).each(function(e,n){var r=t(n).data("margin-right");void 0!==r&&t(n).css("margin-right",r).removeData("margin-right")});var e=t("body").data("padding-right");void 0!==e&&t("body").css("padding-right",e).removeData("padding-right")},c._getScrollbarWidth=function(){var e=document.createElement("div");e.className=g.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},i._jQueryInterface=function(e,n){return this.each(function(){var o=t(this).data(r),a=t.extend({},i.Default,t(this).data(),"object"==typeof e&&e);if(o||(o=new i(this,a),t(this).data(r,o)),"string"==typeof e){if("undefined"==typeof o[e])throw new Error('No method named "'+e+'"');o[e](n)}else a.show&&o.show(n)})},u(i,null,[{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return d}}]),i}();return t(document).on(m.CLICK_DATA_API,h.DATA_TOGGLE,function(e){var n,o=this,i=a.getSelectorFromElement(this);i&&(n=t(i)[0]);var u=t(n).data(r)?"toggle":t.extend({},t(n).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var c=t(n).one(m.SHOW,function(e){e.isDefaultPrevented()||c.one(m.HIDDEN,function(){t(o).is(":visible")&&o.focus()})});v._jQueryInterface.call(t(n),u,this)}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=c,v._jQueryInterface},v}(),g=function(){if(void 0===n)throw new Error("Bootstrap tooltips require Popper.js (https://popper.js.org)");var e="tooltip",r="4.0.0-beta.2",o="bs.tooltip",i="."+o,c=t.fn[e],s=150,l="bs-tooltip",f=new RegExp("(^|\\s)"+l+"\\S+","g"),d={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)"},p={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},m={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip"},g={SHOW:"show",OUT:"out"},h={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,INSERTED:"inserted"+i,CLICK:"click"+i,FOCUSIN:"focusin"+i,FOCUSOUT:"focusout"+i,MOUSEENTER:"mouseenter"+i,MOUSELEAVE:"mouseleave"+i},v={FADE:"fade",SHOW:"show"},y={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},b={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},x=function(){function c(e,t){this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var x=c.prototype;return x.enable=function(){this._isEnabled=!0},x.disable=function(){this._isEnabled=!1},x.toggleEnabled=function(){this._isEnabled=!this._isEnabled},x.toggle=function(e){if(this._isEnabled)if(e){var n=this.constructor.DATA_KEY,r=t(e.currentTarget).data(n);r||(r=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,r)),r._activeTrigger.click=!r._activeTrigger.click,r._isWithActiveTrigger()?r._enter(null,r):r._leave(null,r)}else{if(t(this.getTipElement()).hasClass(v.SHOW))return void this._leave(null,this);this._enter(null,this)}},x.dispose=function(){clearTimeout(this._timeout),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},x.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var r=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){t(this.element).trigger(r);var o=t.contains(this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!o)return;var i=this.getTipElement(),u=a.getUID(this.constructor.NAME);i.setAttribute("id",u),this.element.setAttribute("aria-describedby",u),this.setContent(),this.config.animation&&t(i).addClass(v.FADE);var s="function"==typeof this.config.placement?this.config.placement.call(this,i,this.element):this.config.placement,l=this._getAttachment(s);this.addAttachmentClass(l);var f=!1===this.config.container?document.body:t(this.config.container);t(i).data(this.constructor.DATA_KEY,this),t.contains(this.element.ownerDocument.documentElement,this.tip)||t(i).appendTo(f),t(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,i,{placement:l,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:y.ARROW}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),t(i).addClass(v.SHOW),"ontouchstart"in document.documentElement&&t("body").children().on("mouseover",null,t.noop);var d=function(){e.config.animation&&e._fixTransition();var n=e._hoverState;e._hoverState=null,t(e.element).trigger(e.constructor.Event.SHOWN),n===g.OUT&&e._leave(null,e)};a.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE)?t(this.tip).one(a.TRANSITION_END,d).emulateTransitionEnd(c._TRANSITION_DURATION):d()}},x.hide=function(e){var n=this,r=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE),i=function(){n._hoverState!==g.SHOW&&r.parentNode&&r.parentNode.removeChild(r),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),e&&e()};t(this.element).trigger(o),o.isDefaultPrevented()||(t(r).removeClass(v.SHOW),"ontouchstart"in document.documentElement&&t("body").children().off("mouseover",null,t.noop),this._activeTrigger[b.CLICK]=!1,this._activeTrigger[b.FOCUS]=!1,this._activeTrigger[b.HOVER]=!1,a.supportsTransitionEnd()&&t(this.tip).hasClass(v.FADE)?t(r).one(a.TRANSITION_END,i).emulateTransitionEnd(s):i(),this._hoverState="")},x.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},x.isWithContent=function(){return Boolean(this.getTitle())},x.addAttachmentClass=function(e){t(this.getTipElement()).addClass(l+"-"+e)},x.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},x.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(y.TOOLTIP_INNER),this.getTitle()),e.removeClass(v.FADE+" "+v.SHOW)},x.setElementContent=function(e,n){var r=this.config.html;"object"==typeof n&&(n.nodeType||n.jquery)?r?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[r?"html":"text"](n)},x.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},x._getAttachment=function(e){return p[e.toUpperCase()]},x._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(n!==b.MANUAL){var r=n===b.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,o=n===b.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(r,e.config.selector,function(t){return e._enter(t)}).on(o,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},x._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},x._enter=function(e,n){var r=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(r),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(r,n)),e&&(n._activeTrigger["focusin"===e.type?b.FOCUS:b.HOVER]=!0),t(n.getTipElement()).hasClass(v.SHOW)||n._hoverState===g.SHOW?void(n._hoverState=g.SHOW):(clearTimeout(n._timeout),n._hoverState=g.SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g.SHOW&&n.show()},n.config.delay.show)):void n.show())},x._leave=function(e,n){var r=this.constructor.DATA_KEY;if(n=n||t(e.currentTarget).data(r),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(r,n)),e&&(n._activeTrigger["focusout"===e.type?b.FOCUS:b.HOVER]=!1),!n._isWithActiveTrigger()){if(clearTimeout(n._timeout),n._hoverState=g.OUT,!n.config.delay||!n.config.delay.hide)return void n.hide();n._timeout=setTimeout(function(){n._hoverState===g.OUT&&n.hide()},n.config.delay.hide)}},x._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},x._getConfig=function(n){return n=t.extend({},this.constructor.Default,t(this.element).data(),n),"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),"number"==typeof n.title&&(n.title=n.title.toString()),"number"==typeof n.content&&(n.content=n.content.toString()),a.typeCheckConfig(e,n,this.constructor.DefaultType),n},x._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},x._cleanTipClass=function(){var e=t(this.getTipElement()),n=e.attr("class").match(f);null!==n&&n.length>0&&e.removeClass(n.join(""))},x._handlePopperPlacementChange=function(e){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},x._fixTransition=function(){var e=this.getTipElement(),n=this.config.animation;null===e.getAttribute("x-placement")&&(t(e).removeClass(v.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},c._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(o),r="object"==typeof e&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new c(this,r),t(this).data(o,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new Error('No method named "'+e+'"');n[e]()}})},u(c,null,[{key:"VERSION",get:function(){return r}},{key:"Default",get:function(){return m}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return o}},{key:"Event",get:function(){return h}},{key:"EVENT_KEY",get:function(){return i}},{key:"DefaultType",get:function(){return d}}]),c}();return t.fn[e]=x._jQueryInterface,t.fn[e].Constructor=x,t.fn[e].noConflict=function(){return t.fn[e]=c,x._jQueryInterface},x}(),h=function(){var e="popover",n="4.0.0-beta.2",r="bs.popover",o="."+r,i=t.fn[e],a="bs-popover",s=new RegExp("(^|\\s)"+a+"\\S+","g"),l=t.extend({},g.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),f=t.extend({},g.DefaultType,{content:"(string|element|function)"}),d={FADE:"fade",SHOW:"show"},p={TITLE:".popover-header",CONTENT:".popover-body"},m={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,INSERTED:"inserted"+o,CLICK:"click"+o,FOCUSIN:"focusin"+o,FOCUSOUT:"focusout"+o,MOUSEENTER:"mouseenter"+o,MOUSELEAVE:"mouseleave"+o},h=function(i){function g(){return i.apply(this,arguments)||this}c(g,i);var h=g.prototype;return h.isWithContent=function(){return this.getTitle()||this._getContent()},h.addAttachmentClass=function(e){t(this.getTipElement()).addClass(a+"-"+e)},h.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0],this.tip},h.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(p.TITLE),this.getTitle()),this.setElementContent(e.find(p.CONTENT),this._getContent()),e.removeClass(d.FADE+" "+d.SHOW)},h._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},h._cleanTipClass=function(){var e=t(this.getTipElement()),n=e.attr("class").match(s);null!==n&&n.length>0&&e.removeClass(n.join(""))},g._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(r),o="object"==typeof e?e:null;if((n||!/destroy|hide/.test(e))&&(n||(n=new g(this,o),t(this).data(r,n)),"string"==typeof e)){if("undefined"==typeof n[e])throw new Error('No method named "'+e+'"');n[e]()}})},u(g,null,[{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return r}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return o}},{key:"DefaultType",get:function(){return f}}]),g}(g);return t.fn[e]=h._jQueryInterface,t.fn[e].Constructor=h,t.fn[e].noConflict=function(){return t.fn[e]=i,h._jQueryInterface},h}(),v=function(){var e="scrollspy",n="4.0.0-beta.2",r="bs.scrollspy",o="."+r,i=".data-api",c=t.fn[e],s={offset:10,method:"auto",target:""},l={offset:"number",method:"string",target:"(string|element)"},f={ACTIVATE:"activate"+o,SCROLL:"scroll"+o,LOAD_DATA_API:"load"+o+i},d={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},p={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},m={OFFSET:"offset",POSITION:"position"},g=function(){function i(e,n){var r=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(n),this._selector=this._config.target+" "+p.NAV_LINKS+","+this._config.target+" "+p.LIST_ITEMS+","+this._config.target+" "+p.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(f.SCROLL,function(e){return r._process(e)}),this.refresh(),this._process()}var c=i.prototype;return c.refresh=function(){var e=this,n=this._scrollElement!==this._scrollElement.window?m.POSITION:m.OFFSET,r="auto"===this._config.method?n:this._config.method,o=r===m.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var n,i=a.getSelectorFromElement(e);if(i&&(n=t(i)[0]),n){var u=n.getBoundingClientRect();if(u.width||u.height)return[t(n)[r]().top+o,i]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},c.dispose=function(){t.removeData(this._element,r),t(this._scrollElement).off(o),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},c._getConfig=function(n){if(n=t.extend({},s,n),"string"!=typeof n.target){var r=t(n.target).attr("id");r||(r=a.getUID(e),t(n.target).attr("id",r)),n.target="#"+r}return a.typeCheckConfig(e,n,l),n},c._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},c._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},c._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},c._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var r=this._targets[this._targets.length-1];return void(this._activeTarget!==r&&this._activate(r))}if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&e>=this._offsets[o]&&("undefined"==typeof this._offsets[o+1]||e<this._offsets[o+1])&&this._activate(this._targets[o])}},c._activate=function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var r=t(n.join(","));r.hasClass(d.DROPDOWN_ITEM)?(r.closest(p.DROPDOWN).find(p.DROPDOWN_TOGGLE).addClass(d.ACTIVE),r.addClass(d.ACTIVE)):(r.addClass(d.ACTIVE),
r.parents(p.NAV_LIST_GROUP).prev(p.NAV_LINKS+", "+p.LIST_ITEMS).addClass(d.ACTIVE),r.parents(p.NAV_LIST_GROUP).prev(p.NAV_ITEMS).children(p.NAV_LINKS).addClass(d.ACTIVE)),t(this._scrollElement).trigger(f.ACTIVATE,{relatedTarget:e})},c._clear=function(){t(this._selector).filter(p.ACTIVE).removeClass(d.ACTIVE)},i._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(r),o="object"==typeof e&&e;if(n||(n=new i(this,o),t(this).data(r,n)),"string"==typeof e){if("undefined"==typeof n[e])throw new Error('No method named "'+e+'"');n[e]()}})},u(i,null,[{key:"VERSION",get:function(){return n}},{key:"Default",get:function(){return s}}]),i}();return t(window).on(f.LOAD_DATA_API,function(){for(var e=t.makeArray(t(p.DATA_SPY)),n=e.length;n--;){var r=t(e[n]);g._jQueryInterface.call(r,r.data())}}),t.fn[e]=g._jQueryInterface,t.fn[e].Constructor=g,t.fn[e].noConflict=function(){return t.fn[e]=c,g._jQueryInterface},g}(),y=function(){var e="tab",n="4.0.0-beta.2",r="bs.tab",o="."+r,i=".data-api",c=t.fn[e],s=150,l={HIDE:"hide"+o,HIDDEN:"hidden"+o,SHOW:"show"+o,SHOWN:"shown"+o,CLICK_DATA_API:"click"+o+i},f={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},d={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},p=function(){function e(e){this._element=e}var o=e.prototype;return o.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(f.ACTIVE)||t(this._element).hasClass(f.DISABLED))){var n,r,o=t(this._element).closest(d.NAV_LIST_GROUP)[0],i=a.getSelectorFromElement(this._element);if(o){var u="UL"===o.nodeName?d.ACTIVE_UL:d.ACTIVE;r=t.makeArray(t(o).find(u)),r=r[r.length-1]}var c=t.Event(l.HIDE,{relatedTarget:this._element}),s=t.Event(l.SHOW,{relatedTarget:r});if(r&&t(r).trigger(c),t(this._element).trigger(s),!s.isDefaultPrevented()&&!c.isDefaultPrevented()){i&&(n=t(i)[0]),this._activate(this._element,o);var p=function(){var n=t.Event(l.HIDDEN,{relatedTarget:e._element}),o=t.Event(l.SHOWN,{relatedTarget:r});t(r).trigger(n),t(e._element).trigger(o)};n?this._activate(n,n.parentNode,p):p()}}},o.dispose=function(){t.removeData(this._element,r),this._element=null},o._activate=function(e,n,r){var o,i=this;o="UL"===n.nodeName?t(n).find(d.ACTIVE_UL):t(n).children(d.ACTIVE);var u=o[0],c=r&&a.supportsTransitionEnd()&&u&&t(u).hasClass(f.FADE),l=function(){return i._transitionComplete(e,u,c,r)};u&&c?t(u).one(a.TRANSITION_END,l).emulateTransitionEnd(s):l(),u&&t(u).removeClass(f.SHOW)},o._transitionComplete=function(e,n,r,o){if(n){t(n).removeClass(f.ACTIVE);var i=t(n.parentNode).find(d.DROPDOWN_ACTIVE_CHILD)[0];i&&t(i).removeClass(f.ACTIVE),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(t(e).addClass(f.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),r?(a.reflow(e),t(e).addClass(f.SHOW)):t(e).removeClass(f.FADE),e.parentNode&&t(e.parentNode).hasClass(f.DROPDOWN_MENU)){var u=t(e).closest(d.DROPDOWN)[0];u&&t(u).find(d.DROPDOWN_TOGGLE).addClass(f.ACTIVE),e.setAttribute("aria-expanded",!0)}o&&o()},e._jQueryInterface=function(n){return this.each(function(){var o=t(this),i=o.data(r);if(i||(i=new e(this),o.data(r,i)),"string"==typeof n){if("undefined"==typeof i[n])throw new Error('No method named "'+n+'"');i[n]()}})},u(e,null,[{key:"VERSION",get:function(){return n}}]),e}();return t(document).on(l.CLICK_DATA_API,d.DATA_TOGGLE,function(e){e.preventDefault(),p._jQueryInterface.call(t(this),"show")}),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=c,p._jQueryInterface},p}();return function(){if(void 0===t)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var e=t.fn.jquery.split(" ")[0].split("."),n=9;if(e[0]<2&&e[1]<n||1===e[0]&&e[1]===n&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),e.Util=a,e.Alert=s,e.Button=l,e.Carousel=f,e.Collapse=d,e.Dropdown=p,e.Modal=m,e.Popover=h,e.Scrollspy=v,e.Tab=y,e.Tooltip=g,e}({},$,Popper),Util=function(){function e(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function t(){return{bindType:i.end,delegateType:i.end,handle:function(e){return $(e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function n(){if(window.QUnit)return!1;var e=document.createElement("bootstrap");for(var t in u)if("undefined"!=typeof e.style[t])return{end:u[t]};return!1}function r(e){var t=this,n=!1;return $(this).one(c.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||c.triggerTransitionEnd(t)},e),this}function o(){i=n(),$.fn.emulateTransitionEnd=r,c.supportsTransitionEnd()&&($.event.special[c.TRANSITION_END]=t())}var i=!1,a=1e6,u={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(Math.random()*a)}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");t&&"#"!==t||(t=e.getAttribute("href")||"");try{return $(document).find(t).length>0?t:null}catch(e){return null}},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(e){$(e).trigger(i.end)},supportsTransitionEnd:function(){return Boolean(i)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(t,n,r){for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=r[o],a=n[o],u=a&&c.isElement(a)?"element":e(a);if(!new RegExp(i).test(u))throw new Error(t.toUpperCase()+': Option "'+o+'" provided type "'+u+'" but expected type "'+i+'".')}}};return o(),c}($),Alert=function(){var e="alert",t="4.0.0-beta.2",n="bs.alert",r="."+n,o=".data-api",i=$.fn[e],a=150,u={DISMISS:'[data-dismiss="alert"]'},c={CLOSE:"close"+r,CLOSED:"closed"+r,CLICK_DATA_API:"click"+r+o},s={ALERT:"alert",FADE:"fade",SHOW:"show"},l=function(){function e(e){this._element=e}var r=e.prototype;return r.close=function(e){e=e||this._element;var t=this._getRootElement(e);this._triggerCloseEvent(t).isDefaultPrevented()||this._removeElement(t)},r.dispose=function(){$.removeData(this._element,n),this._element=null},r._getRootElement=function(e){var t=Util.getSelectorFromElement(e),n=!1;return t&&(n=$(t)[0]),n||(n=$(e).closest("."+s.ALERT)[0]),n},r._triggerCloseEvent=function(e){var t=$.Event(c.CLOSE);return $(e).trigger(t),t},r._removeElement=function(e){var t=this;if($(e).removeClass(s.SHOW),!Util.supportsTransitionEnd()||!$(e).hasClass(s.FADE))return void this._destroyElement(e);$(e).one(Util.TRANSITION_END,function(n){return t._destroyElement(e,n)}).emulateTransitionEnd(a)},r._destroyElement=function(e){$(e).detach().trigger(c.CLOSED).remove()},e._jQueryInterface=function(t){return this.each(function(){var r=$(this),o=r.data(n);o||(o=new e(this),r.data(n,o)),"close"===t&&o[t](this)})},e._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},_createClass(e,null,[{key:"VERSION",get:function(){return t}}]),e}();return $(document).on(c.CLICK_DATA_API,u.DISMISS,l._handleDismiss(new l)),$.fn[e]=l._jQueryInterface,$.fn[e].Constructor=l,$.fn[e].noConflict=function(){return $.fn[e]=i,l._jQueryInterface},l}($),Dropdown=function(){if("undefined"==typeof Popper)throw new Error("Bootstrap dropdown require Popper.js (https://popper.js.org)");var e="dropdown",t="4.0.0-beta.2",n="bs.dropdown",r="."+n,o=".data-api",i=$.fn[e],a=27,u=32,c=9,s=38,l=40,f=3,d=new RegExp(s+"|"+l+"|"+a),p={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,CLICK:"click"+r,CLICK_DATA_API:"click"+r+o,KEYDOWN_DATA_API:"keydown"+r+o,KEYUP_DATA_API:"keyup"+r+o},m={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left"},g={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled)"},h={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end"},v={offset:0,flip:!0},y={offset:"(number|string|function)",flip:"boolean"},b=function(){function o(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var i=o.prototype;return i.toggle=function(){if(!this._element.disabled&&!$(this._element).hasClass(m.DISABLED)){var e=o._getParentFromElement(this._element),t=$(this._menu).hasClass(m.SHOW);if(o._clearMenus(),!t){var n={relatedTarget:this._element},r=$.Event(p.SHOW,n);if($(e).trigger(r),!r.isDefaultPrevented()){var i=this._element;$(e).hasClass(m.DROPUP)&&($(this._menu).hasClass(m.MENULEFT)||$(this._menu).hasClass(m.MENURIGHT))&&(i=e),this._popper=new Popper(i,this._menu,this._getPopperConfig()),"ontouchstart"in document.documentElement&&!$(e).closest(g.NAVBAR_NAV).length&&$("body").children().on("mouseover",null,$.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),$(this._menu).toggleClass(m.SHOW),$(e).toggleClass(m.SHOW).trigger($.Event(p.SHOWN,n))}}}},i.dispose=function(){$.removeData(this._element,n),$(this._element).off(r),this._element=null,this._menu=null,null!==this._popper&&this._popper.destroy(),this._popper=null},i.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},i._addEventListeners=function(){var e=this;$(this._element).on(p.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},i._getConfig=function(t){return t=$.extend({},this.constructor.Default,$(this._element).data(),t),Util.typeCheckConfig(e,t,this.constructor.DefaultType),t},i._getMenuElement=function(){if(!this._menu){var e=o._getParentFromElement(this._element);this._menu=$(e).find(g.MENU)[0]}return this._menu},i._getPlacement=function(){var e=$(this._element).parent(),t=h.BOTTOM;return e.hasClass(m.DROPUP)?(t=h.TOP,$(this._menu).hasClass(m.MENURIGHT)&&(t=h.TOPEND)):$(this._menu).hasClass(m.MENURIGHT)&&(t=h.BOTTOMEND),t},i._detectNavbar=function(){return $(this._element).closest(".navbar").length>0},i._getPopperConfig=function(){var e=this,t={};"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=$.extend({},t.offsets,e._config.offset(t.offsets)||{}),t}:t.offset=this._config.offset;var n={placement:this._getPlacement(),modifiers:{offset:t,flip:{enabled:this._config.flip}}};return this._inNavbar&&(n.modifiers.applyStyle={enabled:!this._inNavbar}),n},o._jQueryInterface=function(e){return this.each(function(){var t=$(this).data(n),r="object"==typeof e?e:null;if(t||(t=new o(this,r),$(this).data(n,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new Error('No method named "'+e+'"');t[e]()}})},o._clearMenus=function(e){if(!e||e.which!==f&&("keyup"!==e.type||e.which===c))for(var t=$.makeArray($(g.DATA_TOGGLE)),r=0;r<t.length;r++){var i=o._getParentFromElement(t[r]),a=$(t[r]).data(n),u={relatedTarget:t[r]};if(a){var s=a._menu;if($(i).hasClass(m.SHOW)&&!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===c)&&$.contains(i,e.target))){var l=$.Event(p.HIDE,u);$(i).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&$("body").children().off("mouseover",null,$.noop),t[r].setAttribute("aria-expanded","false"),$(s).removeClass(m.SHOW),$(i).removeClass(m.SHOW).trigger($.Event(p.HIDDEN,u)))}}}},o._getParentFromElement=function(e){var t,n=Util.getSelectorFromElement(e);return n&&(t=$(n)[0]),t||e.parentNode},o._dataApiKeydownHandler=function(e){if(!(!d.test(e.which)||/button/i.test(e.target.tagName)&&e.which===u||/input|textarea/i.test(e.target.tagName)||(e.preventDefault(),e.stopPropagation(),this.disabled||$(this).hasClass(m.DISABLED)))){var t=o._getParentFromElement(this),n=$(t).hasClass(m.SHOW);if(!n&&(e.which!==a||e.which!==u)||n&&(e.which===a||e.which===u)){if(e.which===a){var r=$(t).find(g.DATA_TOGGLE)[0];$(r).trigger("focus")}return void $(this).trigger("click")}var i=$(t).find(g.VISIBLE_ITEMS).get();if(i.length){var c=i.indexOf(e.target);e.which===s&&c>0&&c--,e.which===l&&c<i.length-1&&c++,c<0&&(c=0),i[c].focus()}}},_createClass(o,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return v}},{key:"DefaultType",get:function(){return y}}]),o}();return $(document).on(p.KEYDOWN_DATA_API,g.DATA_TOGGLE,b._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,g.MENU,b._dataApiKeydownHandler).on(p.CLICK_DATA_API+" "+p.KEYUP_DATA_API,b._clearMenus).on(p.CLICK_DATA_API,g.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),b._jQueryInterface.call($(this),"toggle")}).on(p.CLICK_DATA_API,g.FORM_CHILD,function(e){e.stopPropagation()}),$.fn[e]=b._jQueryInterface,$.fn[e].Constructor=b,$.fn[e].noConflict=function(){return $.fn[e]=i,b._jQueryInterface},b}($,Popper),Tab=function(){var e="tab",t="4.0.0-beta.2",n="bs.tab",r="."+n,o=".data-api",i=$.fn[e],a=150,u={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,CLICK_DATA_API:"click"+r+o},c={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},s={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},l=function(){function e(e){this._element=e}var r=e.prototype;return r.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&$(this._element).hasClass(c.ACTIVE)||$(this._element).hasClass(c.DISABLED))){var t,n,r=$(this._element).closest(s.NAV_LIST_GROUP)[0],o=Util.getSelectorFromElement(this._element);if(r){var i="UL"===r.nodeName?s.ACTIVE_UL:s.ACTIVE;n=$.makeArray($(r).find(i)),n=n[n.length-1]}var a=$.Event(u.HIDE,{relatedTarget:this._element}),l=$.Event(u.SHOW,{relatedTarget:n});if(n&&$(n).trigger(a),$(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){o&&(t=$(o)[0]),this._activate(this._element,r);var f=function(){var t=$.Event(u.HIDDEN,{relatedTarget:e._element}),r=$.Event(u.SHOWN,{relatedTarget:n});$(n).trigger(t),$(e._element).trigger(r)};t?this._activate(t,t.parentNode,f):f()}}},r.dispose=function(){$.removeData(this._element,n),this._element=null},r._activate=function(e,t,n){var r,o=this;r="UL"===t.nodeName?$(t).find(s.ACTIVE_UL):$(t).children(s.ACTIVE);var i=r[0],u=n&&Util.supportsTransitionEnd()&&i&&$(i).hasClass(c.FADE),l=function(){return o._transitionComplete(e,i,u,n)};i&&u?$(i).one(Util.TRANSITION_END,l).emulateTransitionEnd(a):l(),i&&$(i).removeClass(c.SHOW)},r._transitionComplete=function(e,t,n,r){if(t){$(t).removeClass(c.ACTIVE);var o=$(t.parentNode).find(s.DROPDOWN_ACTIVE_CHILD)[0];o&&$(o).removeClass(c.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}if($(e).addClass(c.ACTIVE),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),n?(Util.reflow(e),$(e).addClass(c.SHOW)):$(e).removeClass(c.FADE),e.parentNode&&$(e.parentNode).hasClass(c.DROPDOWN_MENU)){var i=$(e).closest(s.DROPDOWN)[0];i&&$(i).find(s.DROPDOWN_TOGGLE).addClass(c.ACTIVE),e.setAttribute("aria-expanded",!0)}r&&r()},e._jQueryInterface=function(t){return this.each(function(){var r=$(this),o=r.data(n);if(o||(o=new e(this),r.data(n,o)),"string"==typeof t){if("undefined"==typeof o[t])throw new Error('No method named "'+t+'"');o[t]()}})},_createClass(e,null,[{key:"VERSION",get:function(){return t}}]),e}();return $(document).on(u.CLICK_DATA_API,s.DATA_TOGGLE,function(e){e.preventDefault(),l._jQueryInterface.call($(this),"show")}),$.fn[e]=l._jQueryInterface,$.fn[e].Constructor=l,$.fn[e].noConflict=function(){return $.fn[e]=i,l._jQueryInterface},l}($),Modal=function(){var e="modal",t="4.0.0-beta.2",n="bs.modal",r="."+n,o=".data-api",i=$.fn[e],a=300,u=150,c=27,s={backdrop:!0,keyboard:!0,focus:!0,show:!0},l={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},f={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,FOCUSIN:"focusin"+r,RESIZE:"resize"+r,CLICK_DISMISS:"click.dismiss"+r,KEYDOWN_DISMISS:"keydown.dismiss"+r,MOUSEUP_DISMISS:"mouseup.dismiss"+r,MOUSEDOWN_DISMISS:"mousedown.dismiss"+r,CLICK_DATA_API:"click"+r+o},d={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},p={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"},m=function(){function o(e,t){this._config=this._getConfig(t),this._element=e,this._dialog=$(e).find(p.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var i=o.prototype;return i.toggle=function(e){return this._isShown?this.hide():this.show(e)},i.show=function(e){var t=this;if(!this._isTransitioning&&!this._isShown){Util.supportsTransitionEnd()&&$(this._element).hasClass(d.FADE)&&(this._isTransitioning=!0);var n=$.Event(f.SHOW,{relatedTarget:e});$(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),$(document.body).addClass(d.OPEN),this._setEscapeEvent(),this._setResizeEvent(),$(this._element).on(f.CLICK_DISMISS,p.DATA_DISMISS,function(e){return t.hide(e)}),$(this._dialog).on(f.MOUSEDOWN_DISMISS,function(){$(t._element).one(f.MOUSEUP_DISMISS,function(e){$(e.target).is(t._element)&&(t._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return t._showElement(e)}))}},i.hide=function(e){var t=this;if(e&&e.preventDefault(),!this._isTransitioning&&this._isShown){var n=$.Event(f.HIDE);if($(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var r=Util.supportsTransitionEnd()&&$(this._element).hasClass(d.FADE);r&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),$(document).off(f.FOCUSIN),$(this._element).removeClass(d.SHOW),$(this._element).off(f.CLICK_DISMISS),$(this._dialog).off(f.MOUSEDOWN_DISMISS),r?$(this._element).one(Util.TRANSITION_END,function(e){return t._hideModal(e)}).emulateTransitionEnd(a):this._hideModal()}}},i.dispose=function(){$.removeData(this._element,n),$(window,document,this._element,this._backdrop).off(r),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(t){return t=$.extend({},s,t),Util.typeCheckConfig(e,t,l),t},i._showElement=function(e){var t=this,n=Util.supportsTransitionEnd()&&$(this._element).hasClass(d.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,n&&Util.reflow(this._element),$(this._element).addClass(d.SHOW),this._config.focus&&this._enforceFocus();var r=$.Event(f.SHOWN,{relatedTarget:e}),o=function(){t._config.focus&&t._element.focus(),t._isTransitioning=!1,$(t._element).trigger(r)};n?$(this._dialog).one(Util.TRANSITION_END,o).emulateTransitionEnd(a):o()},i._enforceFocus=function(){var e=this;$(document).off(f.FOCUSIN).on(f.FOCUSIN,function(t){document===t.target||e._element===t.target||$(e._element).has(t.target).length||e._element.focus()})},i._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?$(this._element).on(f.KEYDOWN_DISMISS,function(t){t.which===c&&(t.preventDefault(),e.hide())}):this._isShown||$(this._element).off(f.KEYDOWN_DISMISS)},i._setResizeEvent=function(){var e=this;this._isShown?$(window).on(f.RESIZE,function(t){return e.handleUpdate(t)}):$(window).off(f.RESIZE)},i._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){$(document.body).removeClass(d.OPEN),e._resetAdjustments(),e._resetScrollbar(),$(e._element).trigger(f.HIDDEN)})},i._removeBackdrop=function(){this._backdrop&&($(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(e){var t=this,n=$(this._element).hasClass(d.FADE)?d.FADE:"";if(this._isShown&&this._config.backdrop){var r=Util.supportsTransitionEnd()&&n;if(this._backdrop=document.createElement("div"),this._backdrop.className=d.BACKDROP,n&&$(this._backdrop).addClass(n),$(this._backdrop).appendTo(document.body),$(this._element).on(f.CLICK_DISMISS,function(e){if(t._ignoreBackdropClick)return void(t._ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"===t._config.backdrop?t._element.focus():t.hide())}),r&&Util.reflow(this._backdrop),$(this._backdrop).addClass(d.SHOW),!e)return;if(!r)return void e();$(this._backdrop).one(Util.TRANSITION_END,e).emulateTransitionEnd(u)}else if(!this._isShown&&this._backdrop){$(this._backdrop).removeClass(d.SHOW);var o=function(){t._removeBackdrop(),e&&e()};Util.supportsTransitionEnd()&&$(this._element).hasClass(d.FADE)?$(this._backdrop).one(Util.TRANSITION_END,o).emulateTransitionEnd(u):o()}else e&&e()},i._adjustDialog=function(){var e=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&e&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!e&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var e=this;if(this._isBodyOverflowing){$(p.FIXED_CONTENT).each(function(t,n){var r=$(n)[0].style.paddingRight,o=$(n).css("padding-right");$(n).data("padding-right",r).css("padding-right",parseFloat(o)+e._scrollbarWidth+"px")}),$(p.STICKY_CONTENT).each(function(t,n){var r=$(n)[0].style.marginRight,o=$(n).css("margin-right");$(n).data("margin-right",r).css("margin-right",parseFloat(o)-e._scrollbarWidth+"px")}),$(p.NAVBAR_TOGGLER).each(function(t,n){var r=$(n)[0].style.marginRight,o=$(n).css("margin-right");$(n).data("margin-right",r).css("margin-right",parseFloat(o)+e._scrollbarWidth+"px")});var t=document.body.style.paddingRight,n=$("body").css("padding-right");$("body").data("padding-right",t).css("padding-right",parseFloat(n)+this._scrollbarWidth+"px")}},i._resetScrollbar=function(){$(p.FIXED_CONTENT).each(function(e,t){var n=$(t).data("padding-right");void 0!==n&&$(t).css("padding-right",n).removeData("padding-right")}),$(p.STICKY_CONTENT+", "+p.NAVBAR_TOGGLER).each(function(e,t){var n=$(t).data("margin-right");void 0!==n&&$(t).css("margin-right",n).removeData("margin-right")});var e=$("body").data("padding-right");void 0!==e&&$("body").css("padding-right",e).removeData("padding-right")},i._getScrollbarWidth=function(){var e=document.createElement("div");e.className=d.SCROLLBAR_MEASURER,document.body.appendChild(e);var t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t},o._jQueryInterface=function(e,t){return this.each(function(){var r=$(this).data(n),i=$.extend({},o.Default,$(this).data(),"object"==typeof e&&e);if(r||(r=new o(this,i),$(this).data(n,r)),"string"==typeof e){if("undefined"==typeof r[e])throw new Error('No method named "'+e+'"');r[e](t)}else i.show&&r.show(t)})},_createClass(o,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return s}}]),o}();return $(document).on(f.CLICK_DATA_API,p.DATA_TOGGLE,function(e){var t,r=this,o=Util.getSelectorFromElement(this);o&&(t=$(o)[0]);var i=$(t).data(n)?"toggle":$.extend({},$(t).data(),$(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var a=$(t).one(f.SHOW,function(e){e.isDefaultPrevented()||a.one(f.HIDDEN,function(){$(r).is(":visible")&&r.focus()})});m._jQueryInterface.call($(t),i,this)}),$.fn[e]=m._jQueryInterface,$.fn[e].Constructor=m,$.fn[e].noConflict=function(){return $.fn[e]=i,m._jQueryInterface},m}($),Tooltip=function(){if("undefined"==typeof Popper)throw new Error("Bootstrap tooltips require Popper.js (https://popper.js.org)");var e="tooltip",t="4.0.0-beta.2",n="bs.tooltip",r="."+n,o=$.fn[e],i=150,a="bs-tooltip",u=new RegExp("(^|\\s)"+a+"\\S+","g"),c={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)"},s={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},l={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip"},f={SHOW:"show",OUT:"out"},d={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},p={FADE:"fade",SHOW:"show"},m={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},g={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},h=function(){function o(e,t){this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(t),this.tip=null,this._setListeners()}var h=o.prototype;return h.enable=function(){this._isEnabled=!0},h.disable=function(){this._isEnabled=!1},h.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.toggle=function(e){if(this._isEnabled)if(e){var t=this.constructor.DATA_KEY,n=$(e.currentTarget).data(t);n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),$(e.currentTarget).data(t,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if($(this.getTipElement()).hasClass(p.SHOW))return void this._leave(null,this);this._enter(null,this)}},h.dispose=function(){clearTimeout(this._timeout),$.removeData(this.element,this.constructor.DATA_KEY),$(this.element).off(this.constructor.EVENT_KEY),$(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&$(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},h.show=function(){var e=this;if("none"===$(this.element).css("display"))throw new Error("Please use show on visible elements");var t=$.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){$(this.element).trigger(t);var n=$.contains(this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!n)return;var r=this.getTipElement(),i=Util.getUID(this.constructor.NAME);r.setAttribute("id",i),this.element.setAttribute("aria-describedby",i),this.setContent(),this.config.animation&&$(r).addClass(p.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,r,this.element):this.config.placement,u=this._getAttachment(a);this.addAttachmentClass(u);var c=!1===this.config.container?document.body:$(this.config.container);$(r).data(this.constructor.DATA_KEY,this),$.contains(this.element.ownerDocument.documentElement,this.tip)||$(r).appendTo(c),$(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new Popper(this.element,r,{placement:u,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:m.ARROW}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){e._handlePopperPlacementChange(t)}}),$(r).addClass(p.SHOW),"ontouchstart"in document.documentElement&&$("body").children().on("mouseover",null,$.noop);var s=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,$(e.element).trigger(e.constructor.Event.SHOWN),t===f.OUT&&e._leave(null,e)};Util.supportsTransitionEnd()&&$(this.tip).hasClass(p.FADE)?$(this.tip).one(Util.TRANSITION_END,s).emulateTransitionEnd(o._TRANSITION_DURATION):s()}},h.hide=function(e){var t=this,n=this.getTipElement(),r=$.Event(this.constructor.Event.HIDE),o=function(){t._hoverState!==f.SHOW&&n.parentNode&&n.parentNode.removeChild(n),t._cleanTipClass(),t.element.removeAttribute("aria-describedby"),$(t.element).trigger(t.constructor.Event.HIDDEN),null!==t._popper&&t._popper.destroy(),e&&e()};$(this.element).trigger(r),r.isDefaultPrevented()||($(n).removeClass(p.SHOW),"ontouchstart"in document.documentElement&&$("body").children().off("mouseover",null,$.noop),this._activeTrigger[g.CLICK]=!1,this._activeTrigger[g.FOCUS]=!1,this._activeTrigger[g.HOVER]=!1,Util.supportsTransitionEnd()&&$(this.tip).hasClass(p.FADE)?$(n).one(Util.TRANSITION_END,o).emulateTransitionEnd(i):o(),this._hoverState="")},h.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},h.isWithContent=function(){return Boolean(this.getTitle())},h.addAttachmentClass=function(e){$(this.getTipElement()).addClass(a+"-"+e)},h.getTipElement=function(){return this.tip=this.tip||$(this.config.template)[0],this.tip},h.setContent=function(){var e=$(this.getTipElement());this.setElementContent(e.find(m.TOOLTIP_INNER),this.getTitle()),e.removeClass(p.FADE+" "+p.SHOW)},h.setElementContent=function(e,t){var n=this.config.html;"object"==typeof t&&(t.nodeType||t.jquery)?n?$(t).parent().is(e)||e.empty().append(t):e.text($(t).text()):e[n?"html":"text"](t)},h.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},h._getAttachment=function(e){return s[e.toUpperCase()]},h._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)$(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(t!==g.MANUAL){var n=t===g.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,r=t===g.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;$(e.element).on(n,e.config.selector,function(t){return e._enter(t)}).on(r,e.config.selector,function(t){return e._leave(t)})}$(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=$.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h._enter=function(e,t){var n=this.constructor.DATA_KEY;return t=t||$(e.currentTarget).data(n),t||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),$(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusin"===e.type?g.FOCUS:g.HOVER]=!0),$(t.getTipElement()).hasClass(p.SHOW)||t._hoverState===f.SHOW?void(t._hoverState=f.SHOW):(clearTimeout(t._timeout),t._hoverState=f.SHOW,t.config.delay&&t.config.delay.show?void(t._timeout=setTimeout(function(){t._hoverState===f.SHOW&&t.show()},t.config.delay.show)):void t.show())},h._leave=function(e,t){var n=this.constructor.DATA_KEY;if(t=t||$(e.currentTarget).data(n),t||(t=new this.constructor(e.currentTarget,this._getDelegateConfig()),$(e.currentTarget).data(n,t)),e&&(t._activeTrigger["focusout"===e.type?g.FOCUS:g.HOVER]=!1),!t._isWithActiveTrigger()){if(clearTimeout(t._timeout),t._hoverState=f.OUT,!t.config.delay||!t.config.delay.hide)return void t.hide();t._timeout=setTimeout(function(){t._hoverState===f.OUT&&t.hide()},t.config.delay.hide)}},h._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},h._getConfig=function(t){return t=$.extend({},this.constructor.Default,$(this.element).data(),t),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),Util.typeCheckConfig(e,t,this.constructor.DefaultType),t},
h._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},h._cleanTipClass=function(){var e=$(this.getTipElement()),t=e.attr("class").match(u);null!==t&&t.length>0&&e.removeClass(t.join(""))},h._handlePopperPlacementChange=function(e){this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},h._fixTransition=function(){var e=this.getTipElement(),t=this.config.animation;null===e.getAttribute("x-placement")&&($(e).removeClass(p.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=t)},o._jQueryInterface=function(e){return this.each(function(){var t=$(this).data(n),r="object"==typeof e&&e;if((t||!/dispose|hide/.test(e))&&(t||(t=new o(this,r),$(this).data(n,t)),"string"==typeof e)){if("undefined"==typeof t[e])throw new Error('No method named "'+e+'"');t[e]()}})},_createClass(o,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return l}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return n}},{key:"Event",get:function(){return d}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return c}}]),o}();return $.fn[e]=h._jQueryInterface,$.fn[e].Constructor=h,$.fn[e].noConflict=function(){return $.fn[e]=o,h._jQueryInterface},h}($,Popper),Popover=function(){var e="popover",t="4.0.0-beta.2",n="bs.popover",r="."+n,o=$.fn[e],i="bs-popover",a=new RegExp("(^|\\s)"+i+"\\S+","g"),u=$.extend({},Tooltip.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),c=$.extend({},Tooltip.DefaultType,{content:"(string|element|function)"}),s={FADE:"fade",SHOW:"show"},l={TITLE:".popover-header",CONTENT:".popover-body"},f={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},d=function(o){function d(){return o.apply(this,arguments)||this}_inheritsLoose(d,o);var p=d.prototype;return p.isWithContent=function(){return this.getTitle()||this._getContent()},p.addAttachmentClass=function(e){$(this.getTipElement()).addClass(i+"-"+e)},p.getTipElement=function(){return this.tip=this.tip||$(this.config.template)[0],this.tip},p.setContent=function(){var e=$(this.getTipElement());this.setElementContent(e.find(l.TITLE),this.getTitle()),this.setElementContent(e.find(l.CONTENT),this._getContent()),e.removeClass(s.FADE+" "+s.SHOW)},p._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},p._cleanTipClass=function(){var e=$(this.getTipElement()),t=e.attr("class").match(a);null!==t&&t.length>0&&e.removeClass(t.join(""))},d._jQueryInterface=function(e){return this.each(function(){var t=$(this).data(n),r="object"==typeof e?e:null;if((t||!/destroy|hide/.test(e))&&(t||(t=new d(this,r),$(this).data(n,t)),"string"==typeof e)){if("undefined"==typeof t[e])throw new Error('No method named "'+e+'"');t[e]()}})},_createClass(d,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return u}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return n}},{key:"Event",get:function(){return f}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return c}}]),d}(Tooltip);return $.fn[e]=d._jQueryInterface,$.fn[e].Constructor=d,$.fn[e].noConflict=function(){return $.fn[e]=o,d._jQueryInterface},d}($),Carousel=function(){var e="carousel",t="4.0.0-beta.2",n="bs.carousel",r="."+n,o=".data-api",i=$.fn[e],a=600,u=37,c=39,s=500,l={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},f={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},d={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},p={SLIDE:"slide"+r,SLID:"slid"+r,KEYDOWN:"keydown"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r,TOUCHEND:"touchend"+r,LOAD_DATA_API:"load"+r+o,CLICK_DATA_API:"click"+r+o},m={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},g={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},h=function(){function o(e,t){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this._config=this._getConfig(t),this._element=$(e)[0],this._indicatorsElement=$(this._element).find(g.INDICATORS)[0],this._addEventListeners()}var i=o.prototype;return i.next=function(){this._isSliding||this._slide(d.NEXT)},i.nextWhenVisible=function(){!document.hidden&&$(this._element).is(":visible")&&"hidden"!==$(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide(d.PREV)},i.pause=function(e){e||(this._isPaused=!0),$(this._element).find(g.NEXT_PREV)[0]&&Util.supportsTransitionEnd()&&(Util.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(e){var t=this;this._activeElement=$(this._element).find(g.ACTIVE_ITEM)[0];var n=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void $(this._element).one(p.SLID,function(){return t.to(e)});if(n===e)return this.pause(),void this.cycle();var r=e>n?d.NEXT:d.PREV;this._slide(r,this._items[e])}},i.dispose=function(){$(this._element).off(r),$.removeData(this._element,n),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(t){return t=$.extend({},l,t),Util.typeCheckConfig(e,t,f),t},i._addEventListeners=function(){var e=this;this._config.keyboard&&$(this._element).on(p.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&($(this._element).on(p.MOUSEENTER,function(t){return e.pause(t)}).on(p.MOUSELEAVE,function(t){return e.cycle(t)}),"ontouchstart"in document.documentElement&&$(this._element).on(p.TOUCHEND,function(){e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},s+e._config.interval)}))},i._keydown=function(e){if(!/input|textarea/i.test(e.target.tagName))switch(e.which){case u:e.preventDefault(),this.prev();break;case c:e.preventDefault(),this.next();break;default:return}},i._getItemIndex=function(e){return this._items=$.makeArray($(e).parent().find(g.ITEM)),this._items.indexOf(e)},i._getItemByDirection=function(e,t){var n=e===d.NEXT,r=e===d.PREV,o=this._getItemIndex(t),i=this._items.length-1;if((r&&0===o||n&&o===i)&&!this._config.wrap)return t;var a=e===d.PREV?-1:1,u=(o+a)%this._items.length;return-1===u?this._items[this._items.length-1]:this._items[u]},i._triggerSlideEvent=function(e,t){var n=this._getItemIndex(e),r=this._getItemIndex($(this._element).find(g.ACTIVE_ITEM)[0]),o=$.Event(p.SLIDE,{relatedTarget:e,direction:t,from:r,to:n});return $(this._element).trigger(o),o},i._setActiveIndicatorElement=function(e){if(this._indicatorsElement){$(this._indicatorsElement).find(g.ACTIVE).removeClass(m.ACTIVE);var t=this._indicatorsElement.children[this._getItemIndex(e)];t&&$(t).addClass(m.ACTIVE)}},i._slide=function(e,t){var n,r,o,i=this,u=$(this._element).find(g.ACTIVE_ITEM)[0],c=this._getItemIndex(u),s=t||u&&this._getItemByDirection(e,u),l=this._getItemIndex(s),f=Boolean(this._interval);if(e===d.NEXT?(n=m.LEFT,r=m.NEXT,o=d.LEFT):(n=m.RIGHT,r=m.PREV,o=d.RIGHT),s&&$(s).hasClass(m.ACTIVE))return void(this._isSliding=!1);if(!this._triggerSlideEvent(s,o).isDefaultPrevented()&&u&&s){this._isSliding=!0,f&&this.pause(),this._setActiveIndicatorElement(s);var h=$.Event(p.SLID,{relatedTarget:s,direction:o,from:c,to:l});Util.supportsTransitionEnd()&&$(this._element).hasClass(m.SLIDE)?($(s).addClass(r),Util.reflow(s),$(u).addClass(n),$(s).addClass(n),$(u).one(Util.TRANSITION_END,function(){$(s).removeClass(n+" "+r).addClass(m.ACTIVE),$(u).removeClass(m.ACTIVE+" "+r+" "+n),i._isSliding=!1,setTimeout(function(){return $(i._element).trigger(h)},0)}).emulateTransitionEnd(a)):($(u).removeClass(m.ACTIVE),$(s).addClass(m.ACTIVE),this._isSliding=!1,$(this._element).trigger(h)),f&&this.cycle()}},o._jQueryInterface=function(e){return this.each(function(){var t=$(this).data(n),r=$.extend({},l,$(this).data());"object"==typeof e&&$.extend(r,e);var i="string"==typeof e?e:r.slide;if(t||(t=new o(this,r),$(this).data(n,t)),"number"==typeof e)t.to(e);else if("string"==typeof i){if("undefined"==typeof t[i])throw new Error('No method named "'+i+'"');t[i]()}else r.interval&&(t.pause(),t.cycle())})},o._dataApiClickHandler=function(e){var t=Util.getSelectorFromElement(this);if(t){var r=$(t)[0];if(r&&$(r).hasClass(m.CAROUSEL)){var i=$.extend({},$(r).data(),$(this).data()),a=this.getAttribute("data-slide-to");a&&(i.interval=!1),o._jQueryInterface.call($(r),i),a&&$(r).data(n).to(a),e.preventDefault()}}},_createClass(o,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return l}}]),o}();return $(document).on(p.CLICK_DATA_API,g.DATA_SLIDE,h._dataApiClickHandler),$(window).on(p.LOAD_DATA_API,function(){$(g.DATA_RIDE).each(function(){var e=$(this);h._jQueryInterface.call(e,e.data())})}),$.fn[e]=h._jQueryInterface,$.fn[e].Constructor=h,$.fn[e].noConflict=function(){return $.fn[e]=i,h._jQueryInterface},h}($),Button=function(){var e="button",t="4.0.0-beta.2",n="bs.button",r="."+n,o=".data-api",i=$.fn[e],a={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},u={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},c={CLICK_DATA_API:"click"+r+o,FOCUS_BLUR_DATA_API:"focus"+r+o+" blur"+r+o},s=function(){function e(e){this._element=e}var r=e.prototype;return r.toggle=function(){var e=!0,t=!0,n=$(this._element).closest(u.DATA_TOGGLE)[0];if(n){var r=$(this._element).find(u.INPUT)[0];if(r){if("radio"===r.type)if(r.checked&&$(this._element).hasClass(a.ACTIVE))e=!1;else{var o=$(n).find(u.ACTIVE)[0];o&&$(o).removeClass(a.ACTIVE)}if(e){if(r.hasAttribute("disabled")||n.hasAttribute("disabled")||r.classList.contains("disabled")||n.classList.contains("disabled"))return;r.checked=!$(this._element).hasClass(a.ACTIVE),$(r).trigger("change")}r.focus(),t=!1}}t&&this._element.setAttribute("aria-pressed",!$(this._element).hasClass(a.ACTIVE)),e&&$(this._element).toggleClass(a.ACTIVE)},r.dispose=function(){$.removeData(this._element,n),this._element=null},e._jQueryInterface=function(t){return this.each(function(){var r=$(this).data(n);r||(r=new e(this),$(this).data(n,r)),"toggle"===t&&r[t]()})},_createClass(e,null,[{key:"VERSION",get:function(){return t}}]),e}();return $(document).on(c.CLICK_DATA_API,u.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var t=e.target;$(t).hasClass(a.BUTTON)||(t=$(t).closest(u.BUTTON)),s._jQueryInterface.call($(t),"toggle")}).on(c.FOCUS_BLUR_DATA_API,u.DATA_TOGGLE_CARROT,function(e){var t=$(e.target).closest(u.BUTTON)[0];$(t).toggleClass(a.FOCUS,/^focus(in)?$/.test(e.type))}),$.fn[e]=s._jQueryInterface,$.fn[e].Constructor=s,$.fn[e].noConflict=function(){return $.fn[e]=i,s._jQueryInterface},s}($),ScrollSpy=function(){var e="scrollspy",t="4.0.0-beta.2",n="bs.scrollspy",r="."+n,o=".data-api",i=$.fn[e],a={offset:10,method:"auto",target:""},u={offset:"number",method:"string",target:"(string|element)"},c={ACTIVATE:"activate"+r,SCROLL:"scroll"+r,LOAD_DATA_API:"load"+r+o},s={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},l={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},f={OFFSET:"offset",POSITION:"position"},d=function(){function o(e,t){var n=this;this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(t),this._selector=this._config.target+" "+l.NAV_LINKS+","+this._config.target+" "+l.LIST_ITEMS+","+this._config.target+" "+l.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,$(this._scrollElement).on(c.SCROLL,function(e){return n._process(e)}),this.refresh(),this._process()}var i=o.prototype;return i.refresh=function(){var e=this,t=this._scrollElement!==this._scrollElement.window?f.POSITION:f.OFFSET,n="auto"===this._config.method?t:this._config.method,r=n===f.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),$.makeArray($(this._selector)).map(function(e){var t,o=Util.getSelectorFromElement(e);if(o&&(t=$(o)[0]),t){var i=t.getBoundingClientRect();if(i.width||i.height)return[$(t)[n]().top+r,o]}return null}).filter(function(e){return e}).sort(function(e,t){return e[0]-t[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},i.dispose=function(){$.removeData(this._element,n),$(this._scrollElement).off(r),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(t){if(t=$.extend({},a,t),"string"!=typeof t.target){var n=$(t.target).attr("id");n||(n=Util.getUID(e),$(t.target).attr("id",n)),t.target="#"+n}return Util.typeCheckConfig(e,t,u),t},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var e=this._getScrollTop()+this._config.offset,t=this._getScrollHeight(),n=this._config.offset+t-this._getOffsetHeight();if(this._scrollHeight!==t&&this.refresh(),e>=n){var r=this._targets[this._targets.length-1];return void(this._activeTarget!==r&&this._activate(r))}if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&e>=this._offsets[o]&&("undefined"==typeof this._offsets[o+1]||e<this._offsets[o+1])&&this._activate(this._targets[o])}},i._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",");t=t.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var n=$(t.join(","));n.hasClass(s.DROPDOWN_ITEM)?(n.closest(l.DROPDOWN).find(l.DROPDOWN_TOGGLE).addClass(s.ACTIVE),n.addClass(s.ACTIVE)):(n.addClass(s.ACTIVE),n.parents(l.NAV_LIST_GROUP).prev(l.NAV_LINKS+", "+l.LIST_ITEMS).addClass(s.ACTIVE),n.parents(l.NAV_LIST_GROUP).prev(l.NAV_ITEMS).children(l.NAV_LINKS).addClass(s.ACTIVE)),$(this._scrollElement).trigger(c.ACTIVATE,{relatedTarget:e})},i._clear=function(){$(this._selector).filter(l.ACTIVE).removeClass(s.ACTIVE)},o._jQueryInterface=function(e){return this.each(function(){var t=$(this).data(n),r="object"==typeof e&&e;if(t||(t=new o(this,r),$(this).data(n,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new Error('No method named "'+e+'"');t[e]()}})},_createClass(o,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return a}}]),o}();return $(window).on(c.LOAD_DATA_API,function(){for(var e=$.makeArray($(l.DATA_SPY)),t=e.length;t--;){var n=$(e[t]);d._jQueryInterface.call(n,n.data())}}),$.fn[e]=d._jQueryInterface,$.fn[e].Constructor=d,$.fn[e].noConflict=function(){return $.fn[e]=i,d._jQueryInterface},d}($),Collapse=function(){var e="collapse",t="4.0.0-beta.2",n="bs.collapse",r="."+n,o=".data-api",i=$.fn[e],a=600,u={toggle:!0,parent:""},c={toggle:"boolean",parent:"(string|element)"},s={SHOW:"show"+r,SHOWN:"shown"+r,HIDE:"hide"+r,HIDDEN:"hidden"+r,CLICK_DATA_API:"click"+r+o},l={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},f={WIDTH:"width",HEIGHT:"height"},d={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},p=function(){function r(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=$.makeArray($('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=$(d.DATA_TOGGLE),r=0;r<n.length;r++){var o=n[r],i=Util.getSelectorFromElement(o);null!==i&&$(i).filter(e).length>0&&this._triggerArray.push(o)}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var o=r.prototype;return o.toggle=function(){$(this._element).hasClass(l.SHOW)?this.hide():this.show()},o.show=function(){var e=this;if(!this._isTransitioning&&!$(this._element).hasClass(l.SHOW)){var t,o;if(this._parent&&(t=$.makeArray($(this._parent).children().children(d.ACTIVES)),t.length||(t=null)),!(t&&(o=$(t).data(n))&&o._isTransitioning)){var i=$.Event(s.SHOW);if($(this._element).trigger(i),!i.isDefaultPrevented()){t&&(r._jQueryInterface.call($(t),"hide"),o||$(t).data(n,null));var u=this._getDimension();$(this._element).removeClass(l.COLLAPSE).addClass(l.COLLAPSING),this._element.style[u]=0,this._triggerArray.length&&$(this._triggerArray).removeClass(l.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var c=function(){$(e._element).removeClass(l.COLLAPSING).addClass(l.COLLAPSE).addClass(l.SHOW),e._element.style[u]="",e.setTransitioning(!1),$(e._element).trigger(s.SHOWN)};if(!Util.supportsTransitionEnd())return void c();var f=u[0].toUpperCase()+u.slice(1),p="scroll"+f;$(this._element).one(Util.TRANSITION_END,c).emulateTransitionEnd(a),this._element.style[u]=this._element[p]+"px"}}}},o.hide=function(){var e=this;if(!this._isTransitioning&&$(this._element).hasClass(l.SHOW)){var t=$.Event(s.HIDE);if($(this._element).trigger(t),!t.isDefaultPrevented()){var n=this._getDimension();if(this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",Util.reflow(this._element),$(this._element).addClass(l.COLLAPSING).removeClass(l.COLLAPSE).removeClass(l.SHOW),this._triggerArray.length)for(var r=0;r<this._triggerArray.length;r++){var o=this._triggerArray[r],i=Util.getSelectorFromElement(o);if(null!==i){var u=$(i);u.hasClass(l.SHOW)||$(o).addClass(l.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var c=function(){e.setTransitioning(!1),$(e._element).removeClass(l.COLLAPSING).addClass(l.COLLAPSE).trigger(s.HIDDEN)};if(this._element.style[n]="",!Util.supportsTransitionEnd())return void c();$(this._element).one(Util.TRANSITION_END,c).emulateTransitionEnd(a)}}},o.setTransitioning=function(e){this._isTransitioning=e},o.dispose=function(){$.removeData(this._element,n),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},o._getConfig=function(t){return t=$.extend({},u,t),t.toggle=Boolean(t.toggle),Util.typeCheckConfig(e,t,c),t},o._getDimension=function(){return $(this._element).hasClass(f.WIDTH)?f.WIDTH:f.HEIGHT},o._getParent=function(){var e=this,t=null;Util.isElement(this._config.parent)?(t=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(t=this._config.parent[0])):t=$(this._config.parent)[0];var n='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return $(t).find(n).each(function(t,n){e._addAriaAndCollapsedClass(r._getTargetFromElement(n),[n])}),t},o._addAriaAndCollapsedClass=function(e,t){if(e){var n=$(e).hasClass(l.SHOW);t.length&&$(t).toggleClass(l.COLLAPSED,!n).attr("aria-expanded",n)}},r._getTargetFromElement=function(e){var t=Util.getSelectorFromElement(e);return t?$(t)[0]:null},r._jQueryInterface=function(e){return this.each(function(){var t=$(this),o=t.data(n),i=$.extend({},u,t.data(),"object"==typeof e&&e);if(!o&&i.toggle&&/show|hide/.test(e)&&(i.toggle=!1),o||(o=new r(this,i),t.data(n,o)),"string"==typeof e){if("undefined"==typeof o[e])throw new Error('No method named "'+e+'"');o[e]()}})},_createClass(r,null,[{key:"VERSION",get:function(){return t}},{key:"Default",get:function(){return u}}]),r}();return $(document).on(s.CLICK_DATA_API,d.DATA_TOGGLE,function(e){"A"===e.currentTarget.tagName&&e.preventDefault();var t=$(this),r=Util.getSelectorFromElement(this);$(r).each(function(){var e=$(this),r=e.data(n),o=r?"toggle":t.data();p._jQueryInterface.call(e,o)})}),$.fn[e]=p._jQueryInterface,$.fn[e].Constructor=p,$.fn[e].noConflict=function(){return $.fn[e]=i,p._jQueryInterface},p}($);!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=pe.type(e);return"function"!==n&&!pe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e,t,n){if(pe.isFunction(t))return pe.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return pe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ke.test(t))return pe.filter(t,e,n);t=pe.filter(t,e)}return pe.grep(e,function(e){return pe.inArray(e,t)>-1!==n})}function o(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function i(e){var t={};return pe.each(e.match(Ae)||[],function(e,n){t[n]=!0}),t}function a(){re.addEventListener?(re.removeEventListener("DOMContentLoaded",u),e.removeEventListener("load",u)):(re.detachEvent("onreadystatechange",u),e.detachEvent("onload",u))}function u(){(re.addEventListener||"load"===e.event.type||"complete"===re.readyState)&&(a(),pe.ready())}function c(e,t,n){if(n===undefined&&1===e.nodeType){var r="data-"+t.replace(Ie,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Pe.test(n)?pe.parseJSON(n):n)}catch(e){}pe.data(e,t,n)}else n=undefined}return n}function s(e){var t;for(t in e)if(("data"!==t||!pe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,n,r){if(Re(e)){var o,i,a=pe.expando,u=e.nodeType,c=u?pe.cache:e,s=u?e[a]:e[a]&&a;if(s&&c[s]&&(r||c[s].data)||n!==undefined||"string"!=typeof t)return s||(s=u?e[a]=ne.pop()||pe.guid++:a),c[s]||(c[s]=u?{}:{toJSON:pe.noop}),"object"!=typeof t&&"function"!=typeof t||(r?c[s]=pe.extend(c[s],t):c[s].data=pe.extend(c[s].data,t)),i=c[s],r||(i.data||(i.data={}),i=i.data),n!==undefined&&(i[pe.camelCase(t)]=n),"string"==typeof t?null==(o=i[t])&&(o=i[pe.camelCase(t)]):o=i,o}}function f(e,t,n){if(Re(e)){var r,o,i=e.nodeType,a=i?pe.cache:e,u=i?e[pe.expando]:pe.expando;if(a[u]){if(t&&(r=n?a[u]:a[u].data)){pe.isArray(t)?t=t.concat(pe.map(t,pe.camelCase)):t in r?t=[t]:(t=pe.camelCase(t),t=t in r?[t]:t.split(" ")),o=t.length;for(;o--;)delete r[t[o]];if(n?!s(r):!pe.isEmptyObject(r))return}(n||(delete a[u].data,s(a[u])))&&(i?pe.cleanData([e],!0):fe.deleteExpando||a!=a.window?delete a[u]:a[u]=undefined)}}}function d(e,t,n,r){var o,i=1,a=20,u=r?function(){return r.cur()}:function(){return pe.css(e,t,"")},c=u(),s=n&&n[3]||(pe.cssNumber[t]?"":"px"),l=(pe.cssNumber[t]||"px"!==s&&+c)&&Be.exec(pe.css(e,t));if(l&&l[3]!==s){s=s||l[3],n=n||[],l=+c||1;do{i=i||".5",l/=i,pe.style(e,t,l+s)}while(i!==(i=u()/c)&&1!==i&&--a)}return n&&(l=+l||+c||0,o=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=s,r.start=l,r.end=o)),o}function p(e){var t=qe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,r,o=0,i="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):undefined;if(!i)for(i=[],n=e.childNodes||e;null!=(r=n[o]);o++)!t||pe.nodeName(r,t)?i.push(r):pe.merge(i,m(r,t));return t===undefined||t&&pe.nodeName(e,t)?pe.merge([e],i):i}function g(e,t){for(var n,r=0;null!=(n=e[r]);r++)pe._data(n,"globalEval",!t||pe._data(t[r],"globalEval"))}function h(e){He.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t,n,r,o){for(var i,a,u,c,s,l,f,d=e.length,v=p(t),y=[],b=0;b<d;b++)if((a=e[b])||0===a)if("object"===pe.type(a))pe.merge(y,a.nodeType?[a]:a);else if(ze.test(a)){for(c=c||v.appendChild(t.createElement("div")),s=(Ue.exec(a)||["",""])[1].toLowerCase(),f=$e[s]||$e._default,c.innerHTML=f[1]+pe.htmlPrefilter(a)+f[2],i=f[0];i--;)c=c.lastChild;if(!fe.leadingWhitespace&&je.test(a)&&y.push(t.createTextNode(je.exec(a)[0])),!fe.tbody)for(a="table"!==s||Ve.test(a)?"<table>"!==f[1]||Ve.test(a)?0:c:c.firstChild,i=a&&a.childNodes.length;i--;)pe.nodeName(l=a.childNodes[i],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(pe.merge(y,c.childNodes),c.textContent="";c.firstChild;)c.removeChild(c.firstChild);c=v.lastChild}else y.push(t.createTextNode(a));for(c&&v.removeChild(c),fe.appendChecked||pe.grep(m(y,"input"),h),b=0;a=y[b++];)if(r&&pe.inArray(a,r)>-1)o&&o.push(a);else if(u=pe.contains(a.ownerDocument,a),c=m(v.appendChild(a),"script"),u&&g(c),n)for(i=0;a=c[i++];)We.test(a.type||"")&&n.push(a);return c=null,v}function y(){return!0}function b(){return!1}function x(){try{return re.activeElement}catch(e){}}function w(e,t,n,r,o,i){var a,u;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=undefined);for(u in t)w(e,u,n,r,t[u],i);return e}if(null==r&&null==o?(o=n,r=n=undefined):null==o&&("string"==typeof n?(o=r,r=undefined):(o=r,r=n,n=undefined)),!1===o)o=b;else if(!o)return e;return 1===i&&(a=o,o=function(e){return pe().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=pe.guid++)),e.each(function(){pe.event.add(this,t,o,r,n)})}function C(e,t){return pe.nodeName(e,"table")&&pe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function k(e){return e.type=(null!==pe.find.attr(e,"type"))+"/"+e.type,e}function T(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function S(e,t){if(1===t.nodeType&&pe.hasData(e)){var n,r,o,i=pe._data(e),a=pe._data(t,i),u=i.events;if(u){delete a.handle,a.events={};for(n in u)for(r=0,o=u[n].length;r<o;r++)pe.event.add(t,n,u[n][r])}a.data&&(a.data=pe.extend({},a.data))}}function E(e,t){var n,r,o;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!fe.noCloneEvent&&t[pe.expando]){o=pe._data(t);for(r in o.events)pe.removeEvent(t,r,o.handle);t.removeAttribute(pe.expando)}"script"===n&&t.text!==e.text?(k(t).text=e.text,T(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),fe.html5Clone&&e.innerHTML&&!pe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&He.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function _(e,t,n,r){t=ie.apply([],t);var o,i,a,u,c,s,l=0,f=e.length,d=f-1,p=t[0],g=pe.isFunction(p);if(g||f>1&&"string"==typeof p&&!fe.checkClone&&nt.test(p))return e.each(function(o){var i=e.eq(o);g&&(t[0]=p.call(this,o,i.html())),_(i,t,n,r)});if(f&&(s=v(t,e[0].ownerDocument,!1,e,r),o=s.firstChild,1===s.childNodes.length&&(s=o),o||r)){for(u=pe.map(m(s,"script"),k),a=u.length;l<f;l++)i=s,l!==d&&(i=pe.clone(i,!0,!0),a&&pe.merge(u,m(i,"script"))),n.call(e[l],i,l);if(a)for(c=u[u.length-1].ownerDocument,pe.map(u,T),l=0;l<a;l++)i=u[l],We.test(i.type||"")&&!pe._data(i,"globalEval")&&pe.contains(c,i)&&(i.src?pe._evalUrl&&pe._evalUrl(i.src):pe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(ot,"")));s=o=null}return e}function A(e,t,n){for(var r,o=t?pe.filter(t,e):e,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||pe.cleanData(m(r)),r.parentNode&&(n&&pe.contains(r.ownerDocument,r)&&g(m(r,"script")),r.parentNode.removeChild(r));return e}function N(e,t){var n=pe(t.createElement(e)).appendTo(t.body),r=pe.css(n[0],"display");return n.detach(),r}function D(e){var t=re,n=ct[e];return n||(n=N(e,t),"none"!==n&&n||(ut=(ut||pe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(ut[0].contentWindow||ut[0].contentDocument).document,t.write(),t.close(),n=N(e,t),ut.detach()),ct[e]=n),n}function R(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in kt)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ct.length;n--;)if((e=Ct[n]+t)in kt)return e}function I(e,t){for(var n,r,o,i=[],a=0,u=e.length;a<u;a++)r=e[a],r.style&&(i[a]=pe._data(r,"olddisplay"),n=r.style.display,t?(i[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Le(r)&&(i[a]=pe._data(r,"olddisplay",D(r.nodeName)))):(o=Le(r),(n&&"none"!==n||!o)&&pe._data(r,"olddisplay",o?n:pe.css(r,"display"))));for(a=0;a<u;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[a]||"":"none"));return e}function O(e,t,n){var r=bt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function B(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;i<4;i+=2)"margin"===n&&(a+=pe.css(e,n+Me[i],!0,o)),r?("content"===n&&(a-=pe.css(e,"padding"+Me[i],!0,o)),"margin"!==n&&(a-=pe.css(e,"border"+Me[i]+"Width",!0,o))):(a+=pe.css(e,"padding"+Me[i],!0,o),"padding"!==n&&(a+=pe.css(e,"border"+Me[i]+"Width",!0,o)));return a}function M(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=pt(e),a=fe.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,i);if(o<=0||null==o){if(o=mt(e,t,i),(o<0||null==o)&&(o=e.style[t]),lt.test(o))return o;r=a&&(fe.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+B(e,t,n||(a?"border":"content"),r,i)+"px"}function L(e,t,n,r,o){return new L.prototype.init(e,t,n,r,o)}function F(){return e.setTimeout(function(){Tt=undefined}),Tt=pe.now()}function H(e,t){var n,r={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)n=Me[o],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function U(e,t,n){for(var r,o=(q.tweeners[t]||[]).concat(q.tweeners["*"]),i=0,a=o.length;i<a;i++)if(r=o[i].call(n,t,e))return r}function W(e,t,n){var r,o,i,a,u,c,s,l=this,f={},d=e.style,p=e.nodeType&&Le(e),m=pe._data(e,"fxshow");n.queue||(u=pe._queueHooks(e,"fx"),null==u.unqueued&&(u.unqueued=0,c=u.empty.fire,u.empty.fire=function(){u.unqueued||c()}),u.unqueued++,l.always(function(){l.always(function(){u.unqueued--,pe.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],s=pe.css(e,"display"),"inline"===("none"===s?pe._data(e,"olddisplay")||D(e.nodeName):s)&&"none"===pe.css(e,"float")&&(fe.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",fe.shrinkWrapBlocks()||l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Et.exec(o)){if(delete t[r],i=i||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!m||m[r]===undefined)continue;p=!0}f[r]=m&&m[r]||pe.style(e,r)}else s=undefined;if(pe.isEmptyObject(f))"inline"===("none"===s?D(e.nodeName):s)&&(d.display=s);else{m?"hidden"in m&&(p=m.hidden):m=pe._data(e,"fxshow",{}),i&&(m.hidden=!p),p?pe(e).show():l.done(function(){pe(e).hide()}),l.done(function(){var t;pe._removeData(e,"fxshow");for(t in f)pe.style(e,t,f[t])});for(r in f)a=U(p?m[r]:0,r,l),r in m||(m[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function j(e,t){var n,r,o,i,a;for(n in e)if(r=pe.camelCase(n),o=t[r],i=e[n],pe.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),(a=pe.cssHooks[r])&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function q(e,t,n){var r,o,i=0,a=q.prefilters.length,u=pe.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=Tt||F(),n=Math.max(0,s.startTime+s.duration-t),r=n/s.duration||0,i=1-r,a=0,c=s.tweens.length;a<c;a++)s.tweens[a].run(i);return u.notifyWith(e,[s,i,n]),i<1&&c?n:(u.resolveWith(e,[s]),!1)},s=u.promise({elem:e,props:pe.extend({},t),opts:pe.extend(!0,{specialEasing:{},easing:pe.easing._default},n),originalProperties:t,originalOptions:n,startTime:Tt||F(),duration:n.duration,tweens:[],createTween:function(t,n){
var r=pe.Tween(e,s.opts,t,n,s.opts.specialEasing[t]||s.opts.easing);return s.tweens.push(r),r},stop:function(t){var n=0,r=t?s.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)s.tweens[n].run(1);return t?(u.notifyWith(e,[s,1,0]),u.resolveWith(e,[s,t])):u.rejectWith(e,[s,t]),this}}),l=s.props;for(j(l,s.opts.specialEasing);i<a;i++)if(r=q.prefilters[i].call(s,e,l,s.opts))return pe.isFunction(r.stop)&&(pe._queueHooks(s.elem,s.opts.queue).stop=pe.proxy(r.stop,r)),r;return pe.map(l,U,s),pe.isFunction(s.opts.start)&&s.opts.start.call(e,s),pe.fx.timer(pe.extend(c,{elem:e,anim:s,queue:s.opts.queue})),s.progress(s.opts.progress).done(s.opts.done,s.opts.complete).fail(s.opts.fail).always(s.opts.always)}function $(e){return pe.attr(e,"class")||""}function z(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(Ae)||[];if(pe.isFunction(n))for(;r=i[o++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function V(e,t,n,r){function o(u){var c;return i[u]=!0,pe.each(e[u]||[],function(e,u){var s=u(t,n,r);return"string"!=typeof s||a||i[s]?a?!(c=s):void 0:(t.dataTypes.unshift(s),o(s),!1)}),c}var i={},a=e===Qt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function K(e,t){var n,r,o=pe.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&pe.extend(!0,e,n),e}function G(e,t,n){for(var r,o,i,a,u=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),o===undefined&&(o=e.mimeType||t.getResponseHeader("Content-Type"));if(o)for(a in u)if(u[a]&&u[a].test(o)){c.unshift(a);break}if(c[0]in n)i=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){i=a;break}r||(r=a)}i=i||r}if(i)return i!==c[0]&&c.unshift(i),n[i]}function X(e,t,n,r){var o,i,a,u,c,s={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)s[a.toLowerCase()]=e.converters[a];for(i=l.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=l.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(a=s[c+" "+i]||s["* "+i]))for(o in s)if(u=o.split(" "),u[1]===i&&(a=s[c+" "+u[0]]||s["* "+u[0]])){!0===a?a=s[o]:!0!==s[o]&&(i=u[0],l.unshift(u[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}function Y(e){return e.style&&e.style.display||pe.css(e,"display")}function Q(e){if(!pe.contains(e.ownerDocument||re,e))return!0;for(;e&&1===e.nodeType;){if("none"===Y(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function J(e,t,n,r){var o;if(pe.isArray(t))pe.each(t,function(t,o){n||nn.test(e)?r(e,o):J(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,r)});else if(n||"object"!==pe.type(t))r(e,t);else for(o in t)J(e+"["+o+"]",t[o],n,r)}function Z(){try{return new e.XMLHttpRequest}catch(e){}}function ee(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function te(e){return pe.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ne=[],re=e.document,oe=ne.slice,ie=ne.concat,ae=ne.push,ue=ne.indexOf,ce={},se=ce.toString,le=ce.hasOwnProperty,fe={},de="1.12.4",pe=function(e,t){return new pe.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,he=/-([\da-z])/gi,ve=function(e,t){return t.toUpperCase()};pe.fn=pe.prototype={jquery:de,constructor:pe,selector:"",length:0,toArray:function(){return oe.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:oe.call(this)},pushStack:function(e){var t=pe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return pe.each(this,e)},map:function(e){return this.pushStack(pe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(oe.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ae,sort:ne.sort,splice:ne.splice},pe.extend=pe.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},u=1,c=arguments.length,s=!1;for("boolean"==typeof a&&(s=a,a=arguments[u]||{},u++),"object"==typeof a||pe.isFunction(a)||(a={}),u===c&&(a=this,u--);u<c;u++)if(null!=(o=arguments[u]))for(r in o)e=a[r],n=o[r],a!==n&&(s&&n&&(pe.isPlainObject(n)||(t=pe.isArray(n)))?(t?(t=!1,i=e&&pe.isArray(e)?e:[]):i=e&&pe.isPlainObject(e)?e:{},a[r]=pe.extend(s,i,n)):n!==undefined&&(a[r]=n));return a},pe.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===pe.type(e)},isArray:Array.isArray||function(e){return"array"===pe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!pe.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==pe.type(e)||e.nodeType||pe.isWindow(e))return!1;try{if(e.constructor&&!le.call(e,"constructor")&&!le.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(!fe.ownFirst)for(t in e)return le.call(e,t);for(t in e);return t===undefined||le.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ce[se.call(e)]||"object":typeof e},globalEval:function(t){t&&pe.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ge,"ms-").replace(he,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var r,o=0;if(n(e))for(r=e.length;o<r&&!1!==t.call(e[o],o,e[o]);o++);else for(o in e)if(!1===t.call(e[o],o,e[o]))break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?pe.merge(r,"string"==typeof e?[e]:e):ae.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(ue)return ue.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;)e[o++]=t[r++];if(n!==n)for(;t[r]!==undefined;)e[o++]=t[r++];return e.length=o,e},grep:function(e,t,n){for(var r=[],o=0,i=e.length,a=!n;o<i;o++)!t(e[o],o)!==a&&r.push(e[o]);return r},map:function(e,t,r){var o,i,a=0,u=[];if(n(e))for(o=e.length;a<o;a++)null!=(i=t(e[a],a,r))&&u.push(i);else for(a in e)null!=(i=t(e[a],a,r))&&u.push(i);return ie.apply([],u)},guid:1,proxy:function(e,t){var n,r,o;return"string"==typeof t&&(o=e[t],t=e,e=o),pe.isFunction(e)?(n=oe.call(arguments,2),r=function(){return e.apply(t||this,n.concat(oe.call(arguments)))},r.guid=e.guid=e.guid||pe.guid++,r):undefined},now:function(){return+new Date},support:fe}),"function"==typeof Symbol&&(pe.fn[Symbol.iterator]=ne[Symbol.iterator]),pe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ce["[object "+t+"]"]=t.toLowerCase()});var ye=function(e){function t(e,t,n,r){var o,i,a,u,c,s,f,p,m=t&&t.ownerDocument,g=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return n;if(!r&&((t?t.ownerDocument||t:U)!==P&&R(t),t=t||P,O)){if(11!==g&&(s=ve.exec(e)))if(o=s[1]){if(9===g){if(!(a=t.getElementById(o)))return n;if(a.id===o)return n.push(a),n}else if(m&&(a=m.getElementById(o))&&F(t,a)&&a.id===o)return n.push(a),n}else{if(s[2])return J.apply(n,t.getElementsByTagName(e)),n;if((o=s[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&!z[e+" "]&&(!B||!B.test(e))){if(1!==g)m=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((u=t.getAttribute("id"))?u=u.replace(be,"\\$&"):t.setAttribute("id",u=H),f=S(e),i=f.length,c=de.test(u)?"#"+u:"[id='"+u+"']";i--;)f[i]=c+" "+d(f[i]);p=f.join(","),m=ye.test(e)&&l(t.parentNode)||t}if(p)try{return J.apply(n,m.querySelectorAll(p)),n}catch(e){}finally{u===H&&t.removeAttribute("id")}}}return _(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[H]=!0,e}function o(e){var t=P.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=n.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||K)-(~e.sourceIndex||K);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function u(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=j++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var u,c,s,l=[W,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(s=t[H]||(t[H]={}),c=s[t.uniqueID]||(s[t.uniqueID]={}),(u=c[r])&&u[0]===W&&u[1]===i)return l[2]=u[2];if(c[r]=l,l[2]=e(t,n,a))return!0}}}function m(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var o=0,i=n.length;o<i;o++)t(e,n[o],r);return r}function h(e,t,n,r,o){for(var i,a=[],u=0,c=e.length,s=null!=t;u<c;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),s&&t.push(u)));return a}function v(e,t,n,o,i,a){return o&&!o[H]&&(o=v(o)),i&&!i[H]&&(i=v(i,a)),r(function(r,a,u,c){var s,l,f,d=[],p=[],m=a.length,v=r||g(t||"*",u.nodeType?[u]:u,[]),y=!e||!r&&t?v:h(v,d,e,u,c),b=n?i||(r?e:m||o)?[]:a:y;if(n&&n(y,b,u,c),o)for(s=h(b,p),o(s,[],u,c),l=s.length;l--;)(f=s[l])&&(b[p[l]]=!(y[p[l]]=f));if(r){if(i||e){if(i){for(s=[],l=b.length;l--;)(f=b[l])&&s.push(y[l]=f);i(null,b=[],s,c)}for(l=b.length;l--;)(f=b[l])&&(s=i?ee(r,f):d[l])>-1&&(r[s]=!(a[s]=f))}}else b=h(b===a?b.splice(m,b.length):b),i?i(null,a,b,c):J.apply(a,b)})}function y(e){for(var t,n,r,o=e.length,i=C.relative[e[0].type],a=i||C.relative[" "],u=i?1:0,c=p(function(e){return e===t},a,!0),s=p(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,r){var o=!i&&(r||n!==A)||((t=n).nodeType?c(e,n,r):s(e,n,r));return t=null,o}];u<o;u++)if(n=C.relative[e[u].type])l=[p(m(l),n)];else{if(n=C.filter[e[u].type].apply(null,e[u].matches),n[H]){for(r=++u;r<o&&!C.relative[e[r].type];r++);return v(u>1&&m(l),u>1&&d(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(ue,"$1"),n,u<r&&y(e.slice(u,r)),r<o&&y(e=e.slice(r)),r<o&&d(e))}l.push(n)}return m(l)}function b(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,u,c,s){var l,f,d,p=0,m="0",g=r&&[],v=[],y=A,b=r||i&&C.find.TAG("*",s),x=W+=null==y?1:Math.random()||.1,w=b.length;for(s&&(A=a===P||a||s);m!==w&&null!=(l=b[m]);m++){if(i&&l){for(f=0,a||l.ownerDocument===P||(R(l),u=!O);d=e[f++];)if(d(l,a||P,u)){c.push(l);break}s&&(W=x)}o&&((l=!d&&l)&&p--,r&&g.push(l))}if(p+=m,o&&m!==p){for(f=0;d=n[f++];)d(g,v,a,u);if(r){if(p>0)for(;m--;)g[m]||v[m]||(v[m]=Y.call(c));v=h(v)}J.apply(c,v),s&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(c)}return s&&(W=x,A=y),g};return o?r(a):a}var x,w,C,k,T,S,E,_,A,N,D,R,P,I,O,B,M,L,F,H="sizzle"+1*new Date,U=e.document,W=0,j=0,q=n(),$=n(),z=n(),V=function(e,t){return e===t&&(D=!0),0},K=1<<31,G={}.hasOwnProperty,X=[],Y=X.pop,Q=X.push,J=X.push,Z=X.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",ie=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),ue=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ce=new RegExp("^"+ne+"*,"+ne+"*"),se=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ie),de=new RegExp("^"+re+"$"),pe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ie),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){R()};try{J.apply(X=Z.call(U.childNodes),U.childNodes),X[U.childNodes.length].nodeType}catch(e){J={apply:X.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},R=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:U;return r!==P&&9===r.nodeType&&r.documentElement?(P=r,I=P.documentElement,O=!T(P),(n=P.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(P.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=he.test(P.getElementsByClassName),w.getById=o(function(e){return I.appendChild(e).id=H,!P.getElementsByName||!P.getElementsByName(H).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},C.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&O)return t.getElementsByClassName(e)},M=[],B=[],(w.qsa=he.test(P.querySelectorAll))&&(o(function(e){I.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&B.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||B.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||B.push("~="),e.querySelectorAll(":checked").length||B.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||B.push(".#.+[+~]")}),o(function(e){var t=P.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&B.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||B.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),B.push(",.*:")})),(w.matchesSelector=he.test(L=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&o(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),M.push("!=",ie)}),B=B.length&&new RegExp(B.join("|")),M=M.length&&new RegExp(M.join("|")),t=he.test(I.compareDocumentPosition),F=t||he.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===P||e.ownerDocument===U&&F(U,e)?-1:t===P||t.ownerDocument===U&&F(U,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,r=0,o=e.parentNode,i=t.parentNode,u=[e],c=[t];if(!o||!i)return e===P?-1:t===P?1:o?-1:i?1:N?ee(N,e)-ee(N,t):0;if(o===i)return a(e,t);for(n=e;n=n.parentNode;)u.unshift(n);for(n=t;n=n.parentNode;)c.unshift(n);for(;u[r]===c[r];)r++;return r?a(u[r],c[r]):u[r]===U?-1:c[r]===U?1:0},P):P},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==P&&R(e),n=n.replace(le,"='$1']"),w.matchesSelector&&O&&!z[n+" "]&&(!M||!M.test(n))&&(!B||!B.test(n)))try{var r=L.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&R(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&R(e);var n=C.attrHandle[t.toLowerCase()],r=n&&G.call(C.attrHandle,t.toLowerCase())?n(e,t,!O):undefined;return r!==undefined?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(D=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(V),D){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return N=null,e},k=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(ae," ")+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var s,l,f,d,p,m,g=i!==a?"nextSibling":"previousSibling",h=t.parentNode,v=u&&t.nodeName.toLowerCase(),y=!c&&!u,b=!1;if(h){if(i){for(;g;){for(d=t;d=d[g];)if(u?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?h.firstChild:h.lastChild],a&&y){for(d=h,f=d[H]||(d[H]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),s=l[e]||[],p=s[0]===W&&s[1],b=p&&s[2],d=p&&h.childNodes[p];d=++p&&d&&d[g]||(b=p=0)||m.pop();)if(1===d.nodeType&&++b&&d===t){l[e]=[W,p,b];break}}else if(y&&(d=t,f=d[H]||(d[H]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),s=l[e]||[],p=s[0]===W&&s[1],b=p),!1===b)for(;(d=++p&&d&&d[g]||(b=p=0)||m.pop())&&((u?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&(f=d[H]||(d[H]={}),l=f[d.uniqueID]||(f[d.uniqueID]={}),l[e]=[W,b]),d!==t)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var o,i=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[H]?i(n):i.length>1?(o=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=ee(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=E(e.replace(ue,"$1"));return o[H]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),u=e.length;u--;)(i=a[u])&&(e[u]=!(t[u]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(xe,we),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(xe,we).toLowerCase(),function(t){var n;do{if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=u(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=c(x);return f.prototype=C.filters=C.pseudos,C.setFilters=new f,S=t.tokenize=function(e,n){var r,o,i,a,u,c,s,l=$[e+" "];if(l)return n?0:l.slice(0);for(u=e,c=[],s=C.preFilter;u;){r&&!(o=ce.exec(u))||(o&&(u=u.slice(o[0].length)||u),c.push(i=[])),r=!1,(o=se.exec(u))&&(r=o.shift(),i.push({value:r,type:o[0].replace(ue," ")}),u=u.slice(r.length));for(a in C.filter)!(o=pe[a].exec(u))||s[a]&&!(o=s[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),u=u.slice(r.length));if(!r)break}return n?u.length:u?t.error(e):$(e,c).slice(0)},E=t.compile=function(e,t){var n,r=[],o=[],i=z[e+" "];if(!i){for(t||(t=S(e)),n=t.length;n--;)i=y(t[n]),i[H]?r.push(i):o.push(i);i=z(e,b(o,r)),i.selector=e}return i},_=t.select=function(e,t,n,r){var o,i,a,u,c,s="function"==typeof e&&e,f=!r&&S(e=s.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&w.getById&&9===t.nodeType&&O&&C.relative[i[1].type]){if(!(t=(C.find.ID(a.matches[0].replace(xe,we),t)||[])[0]))return n;s&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=pe.needsContext.test(e)?0:i.length;o--&&(a=i[o],!C.relative[u=a.type]);)if((c=C.find[u])&&(r=c(a.matches[0].replace(xe,we),ye.test(i[0].type)&&l(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&d(i)))return J.apply(n,r),n;break}}return(s||E(e,f))(r,t,!O,n,!t||ye.test(e)&&l(t.parentNode)||t),n},w.sortStable=H.split("").sort(V).join("")===H,w.detectDuplicates=!!D,R(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(P.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(te,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);pe.find=ye,pe.expr=ye.selectors,pe.expr[":"]=pe.expr.pseudos,pe.uniqueSort=pe.unique=ye.uniqueSort,pe.text=ye.getText,pe.isXMLDoc=ye.isXML,pe.contains=ye.contains;var be=function(e,t,n){for(var r=[],o=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&pe(e).is(n))break;r.push(e)}return r},xe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},we=pe.expr.match.needsContext,Ce=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ke=/^.[^:#\[\.,]*$/;pe.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?pe.find.matchesSelector(r,e)?[r]:[]:pe.find.matches(e,pe.grep(t,function(e){return 1===e.nodeType}))},pe.fn.extend({find:function(e){var t,n=[],r=this,o=r.length;if("string"!=typeof e)return this.pushStack(pe(e).filter(function(){for(t=0;t<o;t++)if(pe.contains(r[t],this))return!0}));for(t=0;t<o;t++)pe.find(e,r[t],n);return n=this.pushStack(o>1?pe.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&we.test(e)?pe(e):e||[],!1).length}});var Te,Se=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(pe.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||Te,"string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Se.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof pe?t[0]:t,pe.merge(this,pe.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:re,!0)),Ce.test(r[1])&&pe.isPlainObject(t))for(r in t)pe.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}if((o=re.getElementById(r[2]))&&o.parentNode){if(o.id!==r[2])return Te.find(e);this.length=1,this[0]=o}return this.context=re,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):pe.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(pe):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),pe.makeArray(e,this))}).prototype=pe.fn,Te=pe(re);var Ee=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};pe.fn.extend({has:function(e){var t,n=pe(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(pe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=we.test(e)||"string"!=typeof e?pe(e,t||this.context):0;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&pe.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?pe.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?pe.inArray(this[0],pe(e)):pe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(pe.uniqueSort(pe.merge(this.get(),pe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),pe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return be(e,"parentNode")},parentsUntil:function(e,t,n){return be(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return be(e,"nextSibling")},prevAll:function(e){return be(e,"previousSibling")},nextUntil:function(e,t,n){return be(e,"nextSibling",n)},prevUntil:function(e,t,n){return be(e,"previousSibling",n)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return pe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:pe.merge([],e.childNodes)}},function(e,t){pe.fn[e]=function(n,r){var o=pe.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=pe.filter(r,o)),this.length>1&&(_e[e]||(o=pe.uniqueSort(o)),Ee.test(e)&&(o=o.reverse())),this.pushStack(o)}});var Ae=/\S+/g;pe.Callbacks=function(e){e="string"==typeof e?i(e):pe.extend({},e);var t,n,r,o,a=[],u=[],c=-1,s=function(){for(o=e.once,r=t=!0;u.length;c=-1)for(n=u.shift();++c<a.length;)!1===a[c].apply(n[0],n[1])&&e.stopOnFalse&&(c=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(c=a.length-1,u.push(n)),function t(n){pe.each(n,function(n,r){pe.isFunction(r)?e.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==pe.type(r)&&t(r)})}(arguments),n&&!t&&s()),this},remove:function(){return pe.each(arguments,function(e,t){for(var n;(n=pe.inArray(t,a,n))>-1;)a.splice(n,1),n<=c&&c--}),this},has:function(e){return e?pe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=u=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=!0,n||l.disable(),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],u.push(n),t||s()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},pe.extend({Deferred:function(e){var t=[["resolve","done",pe.Callbacks("once memory"),"resolved"],["reject","fail",pe.Callbacks("once memory"),"rejected"],["notify","progress",pe.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return pe.Deferred(function(n){pe.each(t,function(t,i){var a=pe.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&pe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?pe.extend(e,r):r}},o={};return r.pipe=r.then,pe.each(t,function(e,i){var a=i[2],u=i[3];r[i[1]]=a.add,u&&a.add(function(){n=u},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=oe.call(arguments),a=i.length,u=1!==a||e&&pe.isFunction(e.promise)?a:0,c=1===u?e:pe.Deferred(),s=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?oe.call(arguments):o,r===t?c.notifyWith(n,r):--u||c.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)i[o]&&pe.isFunction(i[o].promise)?i[o].promise().progress(s(o,n,t)).done(s(o,r,i)).fail(c.reject):--u;return u||c.resolveWith(r,i),c.promise()}});var Ne;pe.fn.ready=function(e){return pe.ready.promise().done(e),this},pe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?pe.readyWait++:pe.ready(!0)},ready:function(e){(!0===e?--pe.readyWait:pe.isReady)||(pe.isReady=!0,!0!==e&&--pe.readyWait>0||(Ne.resolveWith(re,[pe]),pe.fn.triggerHandler&&(pe(re).triggerHandler("ready"),pe(re).off("ready"))))}}),pe.ready.promise=function(t){if(!Ne)if(Ne=pe.Deferred(),"complete"===re.readyState||"loading"!==re.readyState&&!re.documentElement.doScroll)e.setTimeout(pe.ready);else if(re.addEventListener)re.addEventListener("DOMContentLoaded",u),e.addEventListener("load",u);else{re.attachEvent("onreadystatechange",u),e.attachEvent("onload",u);var n=!1;try{
n=null==e.frameElement&&re.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!pe.isReady){try{n.doScroll("left")}catch(n){return e.setTimeout(t,50)}a(),pe.ready()}}()}return Ne.promise(t)},pe.ready.promise();var De;for(De in pe(fe))break;fe.ownFirst="0"===De,fe.inlineBlockNeedsLayout=!1,pe(function(){var e,t,n,r;(n=re.getElementsByTagName("body")[0])&&n.style&&(t=re.createElement("div"),r=re.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",fe.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=re.createElement("div");fe.deleteExpando=!0;try{delete e.test}catch(e){fe.deleteExpando=!1}e=null}();var Re=function(e){var t=pe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},Pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ie=/([A-Z])/g;pe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?pe.cache[e[pe.expando]]:e[pe.expando])&&!s(e)},data:function(e,t,n){return l(e,t,n)},removeData:function(e,t){return f(e,t)},_data:function(e,t,n){return l(e,t,n,!0)},_removeData:function(e,t){return f(e,t,!0)}}),pe.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(e===undefined){if(this.length&&(o=pe.data(i),1===i.nodeType&&!pe._data(i,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=pe.camelCase(r.slice(5)),c(i,r,o[r])));pe._data(i,"parsedAttrs",!0)}return o}return"object"==typeof e?this.each(function(){pe.data(this,e)}):arguments.length>1?this.each(function(){pe.data(this,e,t)}):i?c(i,e,pe.data(i,e)):undefined},removeData:function(e){return this.each(function(){pe.removeData(this,e)})}}),pe.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=pe._data(e,t),n&&(!r||pe.isArray(n)?r=pe._data(e,t,pe.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=pe.queue(e,t),r=n.length,o=n.shift(),i=pe._queueHooks(e,t),a=function(){pe.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return pe._data(e,n)||pe._data(e,n,{empty:pe.Callbacks("once memory").add(function(){pe._removeData(e,t+"queue"),pe._removeData(e,n)})})}}),pe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?pe.queue(this[0],e):t===undefined?this:this.each(function(){var n=pe.queue(this,e,t);pe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&pe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){pe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=pe.Deferred(),i=this,a=this.length,u=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";a--;)(n=pe._data(i[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(u));return u(),o.promise(t)}}),function(){var e;fe.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return(n=re.getElementsByTagName("body")[0])&&n.style?(t=re.createElement("div"),r=re.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(re.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Be=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Me=["Top","Right","Bottom","Left"],Le=function(e,t){return e=t||e,"none"===pe.css(e,"display")||!pe.contains(e.ownerDocument,e)},Fe=function(e,t,n,r,o,i,a){var u=0,c=e.length,s=null==n;if("object"===pe.type(n)){o=!0;for(u in n)Fe(e,t,u,n[u],!0,i,a)}else if(r!==undefined&&(o=!0,pe.isFunction(r)||(a=!0),s&&(a?(t.call(e,r),t=null):(s=t,t=function(e,t,n){return s.call(pe(e),n)})),t))for(;u<c;u++)t(e[u],n,a?r:r.call(e[u],u,t(e[u],n)));return o?e:s?t.call(e):c?t(e[0],n):i},He=/^(?:checkbox|radio)$/i,Ue=/<([\w:-]+)/,We=/^$|\/(?:java|ecma)script/i,je=/^\s+/,qe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=re.createElement("div"),t=re.createDocumentFragment(),n=re.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",fe.leadingWhitespace=3===e.firstChild.nodeType,fe.tbody=!e.getElementsByTagName("tbody").length,fe.htmlSerialize=!!e.getElementsByTagName("link").length,fe.html5Clone="<:nav></:nav>"!==re.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),fe.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",fe.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=re.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),fe.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,fe.noCloneEvent=!!e.addEventListener,e[pe.expando]=1,fe.attributes=!e.getAttribute(pe.expando)}();var $e={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:fe.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};$e.optgroup=$e.option,$e.tbody=$e.tfoot=$e.colgroup=$e.caption=$e.thead,$e.th=$e.td;var ze=/<|&#?\w+;/,Ve=/<tbody/i;!function(){var t,n,r=re.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(fe[t]=n in e)||(r.setAttribute(n,"t"),fe[t]=!1===r.attributes[n].expando);r=null}();var Ke=/^(?:input|select|textarea)$/i,Ge=/^key/,Xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ye=/^(?:focusinfocus|focusoutblur)$/,Qe=/^([^.]*)(?:\.(.+)|)/;pe.event={global:{},add:function(e,t,n,r,o){var i,a,u,c,s,l,f,d,p,m,g,h=pe._data(e);if(h){for(n.handler&&(c=n,n=c.handler,o=c.selector),n.guid||(n.guid=pe.guid++),(a=h.events)||(a=h.events={}),(l=h.handle)||(l=h.handle=function(e){return void 0===pe||e&&pe.event.triggered===e.type?undefined:pe.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(Ae)||[""],u=t.length;u--;)i=Qe.exec(t[u])||[],p=g=i[1],m=(i[2]||"").split(".").sort(),p&&(s=pe.event.special[p]||{},p=(o?s.delegateType:s.bindType)||p,s=pe.event.special[p]||{},f=pe.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&pe.expr.match.needsContext.test(o),namespace:m.join(".")},c),(d=a[p])||(d=a[p]=[],d.delegateCount=0,s.setup&&!1!==s.setup.call(e,r,m,l)||(e.addEventListener?e.addEventListener(p,l,!1):e.attachEvent&&e.attachEvent("on"+p,l))),s.add&&(s.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,f):d.push(f),pe.event.global[p]=!0);e=null}},remove:function(e,t,n,r,o){var i,a,u,c,s,l,f,d,p,m,g,h=pe.hasData(e)&&pe._data(e);if(h&&(l=h.events)){for(t=(t||"").match(Ae)||[""],s=t.length;s--;)if(u=Qe.exec(t[s])||[],p=g=u[1],m=(u[2]||"").split(".").sort(),p){for(f=pe.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,d=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),c=i=d.length;i--;)a=d[i],!o&&g!==a.origType||n&&n.guid!==a.guid||u&&!u.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(d.splice(i,1),a.selector&&d.delegateCount--,f.remove&&f.remove.call(e,a));c&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,m,h.handle)||pe.removeEvent(e,p,h.handle),delete l[p])}else for(p in l)pe.event.remove(e,p+t[s],n,r,!0);pe.isEmptyObject(l)&&(delete h.handle,pe._removeData(e,"events"))}},trigger:function(t,n,r,o){var i,a,u,c,s,l,f,d=[r||re],p=le.call(t,"type")?t.type:t,m=le.call(t,"namespace")?t.namespace.split("."):[];if(u=l=r=r||re,3!==r.nodeType&&8!==r.nodeType&&!Ye.test(p+pe.event.triggered)&&(p.indexOf(".")>-1&&(m=p.split("."),p=m.shift(),m.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[pe.expando]?t:new pe.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=null==n?[t]:pe.makeArray(n,[t]),s=pe.event.special[p]||{},o||!s.trigger||!1!==s.trigger.apply(r,n))){if(!o&&!s.noBubble&&!pe.isWindow(r)){for(c=s.delegateType||p,Ye.test(c+p)||(u=u.parentNode);u;u=u.parentNode)d.push(u),l=u;l===(r.ownerDocument||re)&&d.push(l.defaultView||l.parentWindow||e)}for(f=0;(u=d[f++])&&!t.isPropagationStopped();)t.type=f>1?c:s.bindType||p,i=(pe._data(u,"events")||{})[t.type]&&pe._data(u,"handle"),i&&i.apply(u,n),(i=a&&u[a])&&i.apply&&Re(u)&&(t.result=i.apply(u,n),!1===t.result&&t.preventDefault());if(t.type=p,!o&&!t.isDefaultPrevented()&&(!s._default||!1===s._default.apply(d.pop(),n))&&Re(r)&&a&&r[p]&&!pe.isWindow(r)){l=r[a],l&&(r[a]=null),pe.event.triggered=p;try{r[p]()}catch(e){}pe.event.triggered=undefined,l&&(r[a]=l)}return t.result}},dispatch:function(e){e=pe.event.fix(e);var t,n,r,o,i,a=[],u=oe.call(arguments),c=(pe._data(this,"events")||{})[e.type]||[],s=pe.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!s.preDispatch||!1!==s.preDispatch.call(this,e)){for(a=pe.event.handlers.call(this,e,c),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(i.namespace)||(e.handleObj=i,e.data=i.data,(r=((pe.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u))!==undefined&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return s.postDispatch&&s.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(!0!==c.disabled||"click"!==e.type)){for(r=[],n=0;n<u;n++)i=t[n],o=i.selector+" ",r[o]===undefined&&(r[o]=i.needsContext?pe(o,this).index(c)>-1:pe.find(o,this,null,[c]).length),r[o]&&r.push(i);r.length&&a.push({elem:c,handlers:r})}return u<t.length&&a.push({elem:this,handlers:t.slice(u)}),a},fix:function(e){if(e[pe.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=Xe.test(o)?this.mouseHooks:Ge.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new pe.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=i.srcElement||re),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,i):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||re,o=r.documentElement,n=r.body,e.pageX=t.clientX+(o&&o.scrollLeft||n&&n.scrollLeft||0)-(o&&o.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(o&&o.scrollTop||n&&n.scrollTop||0)-(o&&o.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||i===undefined||(e.which=1&i?1:2&i?3:4&i?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==x()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===x()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(pe.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return pe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var r=pe.extend(new pe.Event,n,{type:e,isSimulated:!0});pe.event.trigger(r,null,t),r.isDefaultPrevented()&&n.preventDefault()}},pe.removeEvent=re.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var r="on"+t;e.detachEvent&&("undefined"==typeof e[r]&&(e[r]=null),e.detachEvent(r,n))},pe.Event=function(e,t){if(!(this instanceof pe.Event))return new pe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?y:b):this.type=e,t&&pe.extend(this,t),this.timeStamp=e&&e.timeStamp||pe.now(),this[pe.expando]=!0},pe.Event.prototype={constructor:pe.Event,isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=y,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=y,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=y,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},pe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){pe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===r||pe.contains(r,o))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),fe.submit||(pe.event.special.submit={setup:function(){if(pe.nodeName(this,"form"))return!1;pe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=pe.nodeName(t,"input")||pe.nodeName(t,"button")?pe.prop(t,"form"):undefined;n&&!pe._data(n,"submit")&&(pe.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),pe._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&pe.event.simulate("submit",this.parentNode,e))},teardown:function(){if(pe.nodeName(this,"form"))return!1;pe.event.remove(this,"._submit")}}),fe.change||(pe.event.special.change={setup:function(){if(Ke.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(pe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),pe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),pe.event.simulate("change",this,e)})),!1;pe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ke.test(t.nodeName)&&!pe._data(t,"change")&&(pe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||pe.event.simulate("change",this.parentNode,e)}),pe._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return pe.event.remove(this,"._change"),!Ke.test(this.nodeName)}}),fe.focusin||pe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){pe.event.simulate(t,e.target,pe.event.fix(e))};pe.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=pe._data(r,t);o||r.addEventListener(e,n,!0),pe._data(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=pe._data(r,t)-1;o?pe._data(r,t,o):(r.removeEventListener(e,n,!0),pe._removeData(r,t))}}}),pe.fn.extend({on:function(e,t,n,r){return w(this,e,t,n,r)},one:function(e,t,n,r){return w(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,pe(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=b),this.each(function(){pe.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){pe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return pe.event.trigger(e,t,n,!0)}});var Je=/ jQuery\d+="(?:null|\d+)"/g,Ze=new RegExp("<(?:"+qe+")[\\s/>]","i"),et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,tt=/<script|<style|<link/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,ot=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,it=p(re),at=it.appendChild(re.createElement("div"));pe.extend({htmlPrefilter:function(e){return e.replace(et,"<$1></$2>")},clone:function(e,t,n){var r,o,i,a,u,c=pe.contains(e.ownerDocument,e);if(fe.html5Clone||pe.isXMLDoc(e)||!Ze.test("<"+e.nodeName+">")?i=e.cloneNode(!0):(at.innerHTML=e.outerHTML,at.removeChild(i=at.firstChild)),!(fe.noCloneEvent&&fe.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||pe.isXMLDoc(e)))for(r=m(i),u=m(e),a=0;null!=(o=u[a]);++a)r[a]&&E(o,r[a]);if(t)if(n)for(u=u||m(e),r=r||m(i),a=0;null!=(o=u[a]);a++)S(o,r[a]);else S(e,i);return r=m(i,"script"),r.length>0&&g(r,!c&&m(e,"script")),r=u=o=null,i},cleanData:function(e,t){for(var n,r,o,i,a=0,u=pe.expando,c=pe.cache,s=fe.attributes,l=pe.event.special;null!=(n=e[a]);a++)if((t||Re(n))&&(o=n[u],i=o&&c[o])){if(i.events)for(r in i.events)l[r]?pe.event.remove(n,r):pe.removeEvent(n,r,i.handle);c[o]&&(delete c[o],s||"undefined"==typeof n.removeAttribute?n[u]=undefined:n.removeAttribute(u),ne.push(o))}}}),pe.fn.extend({domManip:_,detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return Fe(this,function(e){return e===undefined?pe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||re).createTextNode(e))},null,e,arguments.length)},append:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){C(this,e).appendChild(e)}})},prepend:function(){return _(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=C(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return _(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&pe.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&pe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return pe.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return 1===t.nodeType?t.innerHTML.replace(Je,""):undefined;if("string"==typeof e&&!tt.test(e)&&(fe.htmlSerialize||!Ze.test(e))&&(fe.leadingWhitespace||!je.test(e))&&!$e[(Ue.exec(e)||["",""])[1].toLowerCase()]){e=pe.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(pe.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return _(this,arguments,function(t){var n=this.parentNode;pe.inArray(this,e)<0&&(pe.cleanData(m(this)),n&&n.replaceChild(t,this))},e)}}),pe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){pe.fn[e]=function(e){for(var n,r=0,o=[],i=pe(e),a=i.length-1;r<=a;r++)n=r===a?this:this.clone(!0),pe(i[r])[t](n),ae.apply(o,n.get());return this.pushStack(o)}});var ut,ct={HTML:"block",BODY:"block"},st=/^margin/,lt=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),ft=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=n.apply(e,r||[]);for(i in t)e.style[i]=a[i];return o},dt=re.documentElement;!function(){function t(){var t,l,f=re.documentElement;f.appendChild(c),s.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=o=u=!1,r=a=!0,e.getComputedStyle&&(l=e.getComputedStyle(s),n="1%"!==(l||{}).top,u="2px"===(l||{}).marginLeft,o="4px"===(l||{width:"4px"}).width,s.style.marginRight="50%",r="4px"===(l||{marginRight:"4px"}).marginRight,t=s.appendChild(re.createElement("div")),t.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",s.style.width="1px",a=!parseFloat((e.getComputedStyle(t)||{}).marginRight),s.removeChild(t)),s.style.display="none",i=0===s.getClientRects().length,i&&(s.style.display="",s.innerHTML="<table><tr><td></td><td>t</td></tr></table>",s.childNodes[0].style.borderCollapse="separate",t=s.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",(i=0===t[0].offsetHeight)&&(t[0].style.display="",t[1].style.display="none",i=0===t[0].offsetHeight)),f.removeChild(c)}var n,r,o,i,a,u,c=re.createElement("div"),s=re.createElement("div");s.style&&(s.style.cssText="float:left;opacity:.5",fe.opacity="0.5"===s.style.opacity,fe.cssFloat=!!s.style.cssFloat,s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",fe.clearCloneStyle="content-box"===s.style.backgroundClip,c=re.createElement("div"),c.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.innerHTML="",c.appendChild(s),fe.boxSizing=""===s.style.boxSizing||""===s.style.MozBoxSizing||""===s.style.WebkitBoxSizing,pe.extend(fe,{reliableHiddenOffsets:function(){return null==n&&t(),i},boxSizingReliable:function(){return null==n&&t(),o},pixelMarginRight:function(){return null==n&&t(),r},pixelPosition:function(){return null==n&&t(),n},reliableMarginRight:function(){return null==n&&t(),a},reliableMarginLeft:function(){return null==n&&t(),u}}))}();var pt,mt,gt=/^(top|right|bottom|left)$/;e.getComputedStyle?(pt=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},mt=function(e,t,n){var r,o,i,a,u=e.style;return n=n||pt(e),a=n?n.getPropertyValue(t)||n[t]:undefined,""!==a&&a!==undefined||pe.contains(e.ownerDocument,e)||(a=pe.style(e,t)),n&&!fe.pixelMarginRight()&&lt.test(a)&&st.test(t)&&(r=u.width,o=u.minWidth,i=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=o,u.maxWidth=i),a===undefined?a:a+""}):dt.currentStyle&&(pt=function(e){return e.currentStyle},mt=function(e,t,n){var r,o,i,a,u=e.style;return n=n||pt(e),a=n?n[t]:undefined,null==a&&u&&u[t]&&(a=u[t]),lt.test(a)&&!gt.test(t)&&(r=u.left,o=e.runtimeStyle,i=o&&o.left,i&&(o.left=e.currentStyle.left),u.left="fontSize"===t?"1em":a,a=u.pixelLeft+"px",u.left=r,i&&(o.left=i)),a===undefined?a:a+""||"auto"});var ht=/alpha\([^)]*\)/i,vt=/opacity\s*=\s*([^)]*)/i,yt=/^(none|table(?!-c[ea]).+)/,bt=new RegExp("^("+Oe+")(.*)$","i"),xt={position:"absolute",visibility:"hidden",display:"block"},wt={letterSpacing:"0",fontWeight:"400"},Ct=["Webkit","O","Moz","ms"],kt=re.createElement("div").style;pe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=mt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":fe.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,u=pe.camelCase(t),c=e.style;if(t=pe.cssProps[u]||(pe.cssProps[u]=P(u)||u),a=pe.cssHooks[t]||pe.cssHooks[u],n===undefined)return a&&"get"in a&&(o=a.get(e,!1,r))!==undefined?o:c[t];if(i=typeof n,"string"===i&&(o=Be.exec(n))&&o[1]&&(n=d(e,t,o),i="number"),null!=n&&n===n&&("number"===i&&(n+=o&&o[3]||(pe.cssNumber[u]?"":"px")),fe.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),!(a&&"set"in a&&(n=a.set(e,n,r))===undefined)))try{c[t]=n}catch(e){}}},css:function(e,t,n,r){var o,i,a,u=pe.camelCase(t);return t=pe.cssProps[u]||(pe.cssProps[u]=P(u)||u),a=pe.cssHooks[t]||pe.cssHooks[u],a&&"get"in a&&(i=a.get(e,!0,n)),i===undefined&&(i=mt(e,t,r)),"normal"===i&&t in wt&&(i=wt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),pe.each(["height","width"],function(e,t){pe.cssHooks[t]={get:function(e,n,r){if(n)return yt.test(pe.css(e,"display"))&&0===e.offsetWidth?ft(e,xt,function(){return M(e,t,r)}):M(e,t,r)},set:function(e,n,r){var o=r&&pt(e);return O(e,n,r?B(e,t,r,fe.boxSizing&&"border-box"===pe.css(e,"boxSizing",!1,o),o):0)}}}),fe.opacity||(pe.cssHooks.opacity={get:function(e,t){return vt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,o=pe.isNumeric(t)?"alpha(opacity="+100*t+")":"",i=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===pe.trim(i.replace(ht,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=ht.test(i)?i.replace(ht,o):i+" "+o)}}),pe.cssHooks.marginRight=R(fe.reliableMarginRight,function(e,t){if(t)return ft(e,{display:"inline-block"},mt,[e,"marginRight"])}),pe.cssHooks.marginLeft=R(fe.reliableMarginLeft,function(e,t){if(t)return(parseFloat(mt(e,"marginLeft"))||(pe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-ft(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),pe.each({margin:"",padding:"",border:"Width"},function(e,t){pe.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[e+Me[r]+t]=i[r]||i[r-2]||i[0];return o}},st.test(e)||(pe.cssHooks[e+t].set=O)}),pe.fn.extend({css:function(e,t){return Fe(this,function(e,t,n){var r,o,i={},a=0;if(pe.isArray(t)){for(r=pt(e),o=t.length;a<o;a++)i[t[a]]=pe.css(e,t[a],!1,r);return i}return n!==undefined?pe.style(e,t,n):pe.css(e,t)},e,t,arguments.length>1)},show:function(){return I(this,!0)},hide:function(){return I(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Le(this)?pe(this).show():pe(this).hide()})}}),pe.Tween=L,L.prototype={constructor:L,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||pe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(pe.cssNumber[n]?"":"px")},cur:function(){var e=L.propHooks[this.prop];return e&&e.get?e.get(this):L.propHooks._default.get(this)},run:function(e){var t,n=L.propHooks[this.prop];return this.options.duration?this.pos=t=pe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=pe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){pe.fx.step[e.prop]?pe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[pe.cssProps[e.prop]]&&!pe.cssHooks[e.prop]?e.elem[e.prop]=e.now:pe.style(e.elem,e.prop,e.now+e.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},pe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},pe.fx=L.prototype.init,pe.fx.step={};var Tt,St,Et=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;pe.Animation=pe.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return d(n.elem,e,Be.exec(t),n),n}]},tweener:function(e,t){pe.isFunction(e)?(t=e,e=["*"]):e=e.match(Ae);for(var n,r=0,o=e.length;r<o;r++)n=e[r],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[W],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),pe.speed=function(e,t,n){var r=e&&"object"==typeof e?pe.extend({},e):{complete:n||!n&&t||pe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!pe.isFunction(t)&&t};return r.duration=pe.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in pe.fx.speeds?pe.fx.speeds[r.duration]:pe.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){pe.isFunction(r.old)&&r.old.call(this),r.queue&&pe.dequeue(this,r.queue)},r},pe.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=pe.isEmptyObject(e),i=pe.speed(t,n,r),a=function(){var t=q(this,pe.extend({},e),i);(o||pe._data(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=undefined),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=pe.timers,a=pe._data(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&_t.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));!t&&n||pe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=pe._data(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=pe.timers,a=r?r.length:0;for(n.finish=!0,pe.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),pe.each(["toggle","show","hide"],function(e,t){var n=pe.fn[t];pe.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,r,o)}}),pe.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){pe.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),pe.timers=[],pe.fx.tick=function(){var e,t=pe.timers,n=0;for(Tt=pe.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||pe.fx.stop(),Tt=undefined},pe.fx.timer=function(e){pe.timers.push(e),e()?pe.fx.start():pe.timers.pop()},pe.fx.interval=13,pe.fx.start=function(){St||(St=e.setInterval(pe.fx.tick,pe.fx.interval))},pe.fx.stop=function(){e.clearInterval(St),St=null},pe.fx.speeds={slow:600,fast:200,_default:400},pe.fn.delay=function(t,n){return t=pe.fx?pe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var o=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(o)}})},function(){var e,t=re.createElement("input"),n=re.createElement("div"),r=re.createElement("select"),o=r.appendChild(re.createElement("option"));n=re.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",fe.getSetAttribute="t"!==n.className,fe.style=/top/.test(e.getAttribute("style")),fe.hrefNormalized="/a"===e.getAttribute("href"),fe.checkOn=!!t.value,fe.optSelected=o.selected,fe.enctype=!!re.createElement("form").enctype,r.disabled=!0,fe.optDisabled=!o.disabled,t=re.createElement("input"),t.setAttribute("value",""),fe.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),fe.radioValue="t"===t.value}();var At=/\r/g,Nt=/[\x20\t\r\n\f]+/g;pe.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=pe.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,pe(this).val()):e,null==o?o="":"number"==typeof o?o+="":pe.isArray(o)&&(o=pe.map(o,function(e){return null==e?"":e+""})),(t=pe.valHooks[this.type]||pe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,o,"value")!==undefined||(this.value=o))});if(o)return(t=pe.valHooks[o.type]||pe.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&(n=t.get(o,"value"))!==undefined?n:(n=o.value,"string"==typeof n?n.replace(At,""):null==n?"":n)}}}),pe.extend({valHooks:{option:{get:function(e){var t=pe.find.attr(e,"value");return null!=t?t:pe.trim(pe.text(e)).replace(Nt," ")}},select:{get:function(e){
for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type||o<0,a=i?null:[],u=i?o+1:r.length,c=o<0?u:i?o:0;c<u;c++)if(n=r[c],(n.selected||c===o)&&(fe.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!pe.nodeName(n.parentNode,"optgroup"))){if(t=pe(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=pe.makeArray(t),a=o.length;a--;)if(r=o[a],pe.inArray(pe.valHooks.option.get(r),i)>-1)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),o}}}}),pe.each(["radio","checkbox"],function(){pe.valHooks[this]={set:function(e,t){if(pe.isArray(t))return e.checked=pe.inArray(pe(e).val(),t)>-1}},fe.checkOn||(pe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Dt,Rt,Pt=pe.expr.attrHandle,It=/^(?:checked|selected)$/i,Ot=fe.getSetAttribute,Bt=fe.input;pe.fn.extend({attr:function(e,t){return Fe(this,pe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){pe.removeAttr(this,e)})}}),pe.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return"undefined"==typeof e.getAttribute?pe.prop(e,t,n):(1===i&&pe.isXMLDoc(e)||(t=t.toLowerCase(),o=pe.attrHooks[t]||(pe.expr.match.bool.test(t)?Rt:Dt)),n!==undefined?null===n?void pe.removeAttr(e,t):o&&"set"in o&&(r=o.set(e,n,t))!==undefined?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=pe.find.attr(e,t),null==r?undefined:r))},attrHooks:{type:{set:function(e,t){if(!fe.radioValue&&"radio"===t&&pe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,o=0,i=t&&t.match(Ae);if(i&&1===e.nodeType)for(;n=i[o++];)r=pe.propFix[n]||n,pe.expr.match.bool.test(n)?Bt&&Ot||!It.test(n)?e[r]=!1:e[pe.camelCase("default-"+n)]=e[r]=!1:pe.attr(e,n,""),e.removeAttribute(Ot?n:r)}}),Rt={set:function(e,t,n){return!1===t?pe.removeAttr(e,n):Bt&&Ot||!It.test(n)?e.setAttribute(!Ot&&pe.propFix[n]||n,n):e[pe.camelCase("default-"+n)]=e[n]=!0,n}},pe.each(pe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Pt[t]||pe.find.attr;Bt&&Ot||!It.test(t)?Pt[t]=function(e,t,r){var o,i;return r||(i=Pt[t],Pt[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,Pt[t]=i),o}:Pt[t]=function(e,t,n){if(!n)return e[pe.camelCase("default-"+t)]?t.toLowerCase():null}}),Bt&&Ot||(pe.attrHooks.value={set:function(e,t,n){if(!pe.nodeName(e,"input"))return Dt&&Dt.set(e,t,n);e.defaultValue=t}}),Ot||(Dt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},Pt.id=Pt.name=Pt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},pe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:Dt.set},pe.attrHooks.contenteditable={set:function(e,t,n){Dt.set(e,""!==t&&t,n)}},pe.each(["width","height"],function(e,t){pe.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),fe.style||(pe.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var Mt=/^(?:input|select|textarea|button|object)$/i,Lt=/^(?:a|area)$/i;pe.fn.extend({prop:function(e,t){return Fe(this,pe.prop,e,t,arguments.length>1)},removeProp:function(e){return e=pe.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(e){}})}}),pe.extend({prop:function(e,t,n){var r,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&pe.isXMLDoc(e)||(t=pe.propFix[t]||t,o=pe.propHooks[t]),n!==undefined?o&&"set"in o&&(r=o.set(e,n,t))!==undefined?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=pe.find.attr(e,"tabindex");return t?parseInt(t,10):Mt.test(e.nodeName)||Lt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),fe.hrefNormalized||pe.each(["href","src"],function(e,t){pe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),fe.optSelected||(pe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),pe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pe.propFix[this.toLowerCase()]=this}),fe.enctype||(pe.propFix.enctype="encoding");var Ft=/[\t\r\n\f]/g;pe.fn.extend({addClass:function(e){var t,n,r,o,i,a,u,c=0;if(pe.isFunction(e))return this.each(function(t){pe(this).addClass(e.call(this,t,$(this)))});if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[c++];)if(o=$(n),r=1===n.nodeType&&(" "+o+" ").replace(Ft," ")){for(a=0;i=t[a++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");u=pe.trim(r),o!==u&&pe.attr(n,"class",u)}return this},removeClass:function(e){var t,n,r,o,i,a,u,c=0;if(pe.isFunction(e))return this.each(function(t){pe(this).removeClass(e.call(this,t,$(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ae)||[];n=this[c++];)if(o=$(n),r=1===n.nodeType&&(" "+o+" ").replace(Ft," ")){for(a=0;i=t[a++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");u=pe.trim(r),o!==u&&pe.attr(n,"class",u)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):pe.isFunction(e)?this.each(function(n){pe(this).toggleClass(e.call(this,n,$(this),t),t)}):this.each(function(){var t,r,o,i;if("string"===n)for(r=0,o=pe(this),i=e.match(Ae)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else e!==undefined&&"boolean"!==n||(t=$(this),t&&pe._data(this,"__className__",t),pe.attr(this,"class",t||!1===e?"":pe._data(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+$(n)+" ").replace(Ft," ").indexOf(t)>-1)return!0;return!1}}),pe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){pe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),pe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Ht=e.location,Ut=pe.now(),Wt=/\?/,jt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;pe.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,o=pe.trim(t+"");return o&&!pe.trim(o.replace(jt,function(e,t,o,i){return n&&t&&(r=0),0===r?e:(n=o||t,r+=!i-!o,"")}))?Function("return "+o)():pe.error("Invalid JSON: "+t)},pe.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new e.DOMParser,n=r.parseFromString(t,"text/xml")):(n=new e.ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(e){n=undefined}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||pe.error("Invalid XML: "+t),n};var qt=/#.*$/,$t=/([?&])_=[^&]*/,zt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Vt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Gt=/^\/\//,Xt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Yt={},Qt={},Jt="*/".concat("*"),Zt=Ht.href,en=Xt.exec(Zt.toLowerCase())||[];pe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Zt,type:"GET",isLocal:Vt.test(en[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":pe.parseJSON,"text xml":pe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?K(K(e,pe.ajaxSettings),t):K(pe.ajaxSettings,e)},ajaxPrefilter:z(Yt),ajaxTransport:z(Qt),ajax:function(t,n){function r(t,n,r,o){var i,f,y,b,w,k=n;2!==x&&(x=2,c&&e.clearTimeout(c),l=undefined,u=o||"",C.readyState=t>0?4:0,i=t>=200&&t<300||304===t,r&&(b=G(d,C,r)),b=X(d,b,C,i),i?(d.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(pe.lastModified[a]=w),(w=C.getResponseHeader("etag"))&&(pe.etag[a]=w)),204===t||"HEAD"===d.type?k="nocontent":304===t?k="notmodified":(k=b.state,f=b.data,y=b.error,i=!y)):(y=k,!t&&k||(k="error",t<0&&(t=0))),C.status=t,C.statusText=(n||k)+"",i?g.resolveWith(p,[f,k,C]):g.rejectWith(p,[C,k,y]),C.statusCode(v),v=undefined,s&&m.trigger(i?"ajaxSuccess":"ajaxError",[C,d,i?f:y]),h.fireWith(p,[C,k]),s&&(m.trigger("ajaxComplete",[C,d]),--pe.active||pe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=undefined),n=n||{};var o,i,a,u,c,s,l,f,d=pe.ajaxSetup({},n),p=d.context||d,m=d.context&&(p.nodeType||p.jquery)?pe(p):pe.event,g=pe.Deferred(),h=pe.Callbacks("once memory"),v=d.statusCode||{},y={},b={},x=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!f)for(f={};t=zt.exec(u);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?u:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=b[n]=b[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(x<2)for(t in e)v[t]=[v[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return l&&l.abort(t),r(0,t),this}};if(g.promise(C).complete=h.add,C.success=C.done,C.error=C.fail,d.url=((t||d.url||Zt)+"").replace(qt,"").replace(Gt,en[1]+"//"),d.type=n.method||n.type||d.method||d.type,d.dataTypes=pe.trim(d.dataType||"*").toLowerCase().match(Ae)||[""],null==d.crossDomain&&(o=Xt.exec(d.url.toLowerCase()),d.crossDomain=!(!o||o[1]===en[1]&&o[2]===en[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(en[3]||("http:"===en[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=pe.param(d.data,d.traditional)),V(Yt,d,n,C),2===x)return C;s=pe.event&&d.global,s&&0==pe.active++&&pe.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Kt.test(d.type),a=d.url,d.hasContent||(d.data&&(a=d.url+=(Wt.test(a)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=$t.test(a)?a.replace($t,"$1_="+Ut++):a+(Wt.test(a)?"&":"?")+"_="+Ut++)),d.ifModified&&(pe.lastModified[a]&&C.setRequestHeader("If-Modified-Since",pe.lastModified[a]),pe.etag[a]&&C.setRequestHeader("If-None-Match",pe.etag[a])),(d.data&&d.hasContent&&!1!==d.contentType||n.contentType)&&C.setRequestHeader("Content-Type",d.contentType),C.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Jt+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)C.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(!1===d.beforeSend.call(p,C,d)||2===x))return C.abort();w="abort";for(i in{success:1,error:1,complete:1})C[i](d[i]);if(l=V(Qt,d,n,C)){if(C.readyState=1,s&&m.trigger("ajaxSend",[C,d]),2===x)return C;d.async&&d.timeout>0&&(c=e.setTimeout(function(){C.abort("timeout")},d.timeout));try{x=1,l.send(y,r)}catch(e){if(!(x<2))throw e;r(-1,e)}}else r(-1,"No Transport");return C},getJSON:function(e,t,n){return pe.get(e,t,n,"json")},getScript:function(e,t){return pe.get(e,undefined,t,"script")}}),pe.each(["get","post"],function(e,t){pe[t]=function(e,n,r,o){return pe.isFunction(n)&&(o=o||r,r=n,n=undefined),pe.ajax(pe.extend({url:e,type:t,dataType:o,data:n,success:r},pe.isPlainObject(e)&&e))}}),pe._evalUrl=function(e){return pe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},pe.fn.extend({wrapAll:function(e){if(pe.isFunction(e))return this.each(function(t){pe(this).wrapAll(e.call(this,t))});if(this[0]){var t=pe(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return pe.isFunction(e)?this.each(function(t){pe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=pe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=pe.isFunction(e);return this.each(function(n){pe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){pe.nodeName(this,"body")||pe(this).replaceWith(this.childNodes)}).end()}}),pe.expr.filters.hidden=function(e){return fe.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:Q(e)},pe.expr.filters.visible=function(e){return!pe.expr.filters.hidden(e)};var tn=/%20/g,nn=/\[\]$/,rn=/\r?\n/g,on=/^(?:submit|button|image|reset|file)$/i,an=/^(?:input|select|textarea|keygen)/i;pe.param=function(e,t){var n,r=[],o=function(e,t){t=pe.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=pe.ajaxSettings&&pe.ajaxSettings.traditional),pe.isArray(e)||e.jquery&&!pe.isPlainObject(e))pe.each(e,function(){o(this.name,this.value)});else for(n in e)J(n,e[n],t,o);return r.join("&").replace(tn,"+")},pe.fn.extend({serialize:function(){return pe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=pe.prop(this,"elements");return e?pe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!pe(this).is(":disabled")&&an.test(this.nodeName)&&!on.test(e)&&(this.checked||!He.test(e))}).map(function(e,t){var n=pe(this).val();return null==n?null:pe.isArray(n)?pe.map(n,function(e){return{name:t.name,value:e.replace(rn,"\r\n")}}):{name:t.name,value:n.replace(rn,"\r\n")}}).get()}}),pe.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return this.isLocal?ee():re.documentMode>8?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||ee()}:Z;var un=0,cn={},sn=pe.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in cn)cn[e](undefined,!0)}),fe.cors=!!sn&&"withCredentials"in sn,sn=fe.ajax=!!sn,sn&&pe.ajaxTransport(function(t){if(!t.crossDomain||fe.cors){var n;return{send:function(r,o){var i,a=t.xhr(),u=++un;if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(i in t.xhrFields)a[i]=t.xhrFields[i];t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(i in r)r[i]!==undefined&&a.setRequestHeader(i,r[i]+"");a.send(t.hasContent&&t.data||null),n=function(e,r){var i,c,s;if(n&&(r||4===a.readyState))if(delete cn[u],n=undefined,a.onreadystatechange=pe.noop,r)4!==a.readyState&&a.abort();else{s={},i=a.status,"string"==typeof a.responseText&&(s.text=a.responseText);try{c=a.statusText}catch(e){c=""}i||!t.isLocal||t.crossDomain?1223===i&&(i=204):i=s.text?200:404}s&&o(i,c,s,a.getAllResponseHeaders())},t.async?4===a.readyState?e.setTimeout(n):a.onreadystatechange=cn[u]=n:n()},abort:function(){n&&n(undefined,!0)}}}}),pe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return pe.globalEval(e),e}}}),pe.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),pe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=re.head||pe("head")[0]||re.documentElement;return{send:function(r,o){t=re.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||o(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var ln=[],fn=/(=)\?(?=&|$)|\?\?/;pe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ln.pop()||pe.expando+"_"+Ut++;return this[e]=!0,e}}),pe.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,a,u=!1!==t.jsonp&&(fn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&fn.test(t.data)&&"data");if(u||"jsonp"===t.dataTypes[0])return o=t.jsonpCallback=pe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(fn,"$1"+o):!1!==t.jsonp&&(t.url+=(Wt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||pe.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always(function(){i===undefined?pe(e).removeProp(o):e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,ln.push(o)),a&&pe.isFunction(i)&&i(a[0]),a=i=undefined}),"script"}),pe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||re;var r=Ce.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=v([e],t,o),o&&o.length&&pe(o).remove(),pe.merge([],r.childNodes))};var dn=pe.fn.load;pe.fn.load=function(e,t,n){if("string"!=typeof e&&dn)return dn.apply(this,arguments);var r,o,i,a=this,u=e.indexOf(" ");return u>-1&&(r=pe.trim(e.slice(u,e.length)),e=e.slice(0,u)),pe.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(o="POST"),a.length>0&&pe.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?pe("<div>").append(pe.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,i||[e.responseText,t,e])})}),this},pe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){pe.fn[t]=function(e){return this.on(t,e)}}),pe.expr.filters.animated=function(e){return pe.grep(pe.timers,function(t){return e===t.elem}).length},pe.offset={setOffset:function(e,t,n){var r,o,i,a,u,c,s,l=pe.css(e,"position"),f=pe(e),d={};"static"===l&&(e.style.position="relative"),u=f.offset(),i=pe.css(e,"top"),c=pe.css(e,"left"),s=("absolute"===l||"fixed"===l)&&pe.inArray("auto",[i,c])>-1,s?(r=f.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(c)||0),pe.isFunction(t)&&(t=t.call(e,n,pe.extend({},u))),null!=t.top&&(d.top=t.top-u.top+a),null!=t.left&&(d.left=t.left-u.left+o),"using"in t?t.using.call(e,d):f.css(d)}},pe.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){pe.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},o=this[0],i=o&&o.ownerDocument;if(i)return t=i.documentElement,pe.contains(t,o)?("undefined"!=typeof o.getBoundingClientRect&&(r=o.getBoundingClientRect()),n=te(i),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===pe.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),pe.nodeName(e[0],"html")||(n=e.offset()),n.top+=pe.css(e[0],"borderTopWidth",!0),n.left+=pe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-pe.css(r,"marginTop",!0),left:t.left-n.left-pe.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!pe.nodeName(e,"html")&&"static"===pe.css(e,"position");)e=e.offsetParent;return e||dt})}}),pe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);pe.fn[e]=function(r){return Fe(this,function(e,r,o){var i=te(e);if(o===undefined)return i?t in i?i[t]:i.document.documentElement[r]:e[r];i?i.scrollTo(n?pe(i).scrollLeft():o,n?o:pe(i).scrollTop()):e[r]=o},e,r,arguments.length,null)}}),pe.each(["top","left"],function(e,t){pe.cssHooks[t]=R(fe.pixelPosition,function(e,n){if(n)return n=mt(e,t),lt.test(n)?pe(e).position()[t]+"px":n})}),pe.each({Height:"height",Width:"width"},function(e,t){pe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){pe.fn[r]=function(r,o){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===o?"margin":"border");return Fe(this,function(t,n,r){var o;return pe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):r===undefined?pe.css(t,n,a):pe.style(t,n,r,a)},t,i?r:undefined,i,null)}})}),pe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),pe.fn.size=function(){return this.length},pe.fn.andSelf=pe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return pe});var pn=e.jQuery,mn=e.$;return pe.noConflict=function(t){return e.$===pe&&(e.$=mn),t&&e.jQuery===pe&&(e.jQuery=pn),pe},t||(e.jQuery=e.$=pe),pe}),function(e,t){"use strict";e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return e("meta[name=csrf-token]").attr("content")},csrfParam:function(){return e("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=n.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){e('form input[name="'+n.csrfParam()+'"]').val(n.csrfToken())},fire:function(t,n,r){var o=e.Event(n);return t.trigger(o,r),!1!==o.result},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==t&&!1!==e.data("remote")},handleRemote:function(r){var o,i,a,u,c,s;if(n.fire(r,"ajax:before")){if(u=r.data("with-credentials")||null,c=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,r.is("form")){o=r.data("ujs:submit-button-formmethod")||r.attr("method"),i=r.data("ujs:submit-button-formaction")||r.attr("action"),a=e(r[0]).serializeArray();var l=r.data("ujs:submit-button");l&&(a.push(l),r.data("ujs:submit-button",null)),r.data("ujs:submit-button-formmethod",null),r.data("ujs:submit-button-formaction",null)}else r.is(n.inputChangeSelector)?(o=r.data("method"),i=r.data("url"),a=r.serialize(),r.data("params")&&(a=a+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(o=r.data("method")||"get",i=r.data("url"),a=r.serialize(),r.data("params")&&(a=a+"&"+r.data("params"))):(o=r.data("method"),i=n.href(r),a=r.data("params")||null);return s={type:o||"GET",data:a,dataType:c,beforeSend:function(e,o){if(o.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+o.accepts.script),!n.fire(r,"ajax:beforeSend",[e,o]))return!1;r.trigger("ajax:send",e)},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(i)},u&&(s.xhrFields={withCredentials:u}),i&&(s.url=i),n.ajax(s)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(e){return!0}},handleMethod:function(r){var o=n.href(r),i=r.data("method"),a=r.attr("target"),u=n.csrfToken(),c=n.csrfParam(),s=e('<form method="post" action="'+o+'"></form>'),l='<input name="_method" value="'+i+'" type="hidden" />';c===t||u===t||n.isCrossDomain(o)||(l+='<input name="'+c+'" value="'+u+'" type="hidden" />'),a&&s.attr("target",a),s.hide().append(l).appendTo("body"),s.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,r;n=e.is("button")?"html":"val",r=e.data("disable-with"),r!==t&&(e.data("ujs:enable-with",e[n]()),e[n](r)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var n=e.is("button")?"html":"val";e.data("ujs:enable-with")!==t&&(e[n](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,r=e.data("confirm"),o=!1;if(!r)return!0;if(n.fire(e,"confirm")){try{o=n.confirm(r)}catch(e){(console.error||console.log).call(console,e.stack||e)}t=n.fire(e,"confirm:complete",[o])}return o&&t},blankInputs:function(t,n,r){var o,i,a,u,c=e(),s=n||"input,textarea",l=t.find(s),f={};return l.each(function(){o=e(this),o.is("input[type=radio]")?(u=o.attr("name"),f[u]||(0===t.find('input[type=radio]:checked[name="'+u+'"]').length&&(a=t.find('input[type=radio][name="'+u+'"]'),c=c.add(a)),f[u]=u)):(i=o.is("input[type=checkbox],input[type=radio]")?o.is(":checked"):!!o.val())===r&&(c=c.add(o))}),!!c.length&&c},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var r=e.data("disable-with");r!==t&&(e.data("ujs:enable-with",e.html()),e.html(r)),e.bind("click.railsDisable",function(e){return n.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),e(window).on("pageshow.rails",function(){e(e.rails.enableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableFormElement(t)}),e(e.rails.linkDisableSelector).each(function(){var t=e(this);t.data("ujs:disabled")&&e.rails.enableElement(t)})}),r.on("ajax:complete",n.linkDisableSelector,function(){n.enableElement(e(this))}),r.on("ajax:complete",n.buttonDisableSelector,function(){n.enableFormElement(e(this))}),r.on("click.rails",n.linkClickSelector,function(t){var r=e(this),o=r.data("method"),i=r.data("params"),a=t.metaKey||t.ctrlKey;if(!n.allowAction(r))return n.stopEverything(t);if(!a&&r.is(n.linkDisableSelector)&&n.disableElement(r),n.isRemote(r)){if(a&&(!o||"GET"===o)&&!i)return!0;var u=n.handleRemote(r);return!1===u?n.enableElement(r):u.fail(function(){n.enableElement(r)}),!1}return o?(n.handleMethod(r),!1):void 0}),r.on("click.rails",n.buttonClickSelector,function(t){var r=e(this);if(!n.allowAction(r)||!n.isRemote(r))return n.stopEverything(t);r.is(n.buttonDisableSelector)&&n.disableFormElement(r);var o=n.handleRemote(r);return!1===o?n.enableFormElement(r):o.fail(function(){n.enableFormElement(r)}),!1}),r.on("change.rails",n.inputChangeSelector,function(t){var r=e(this);return n.allowAction(r)&&n.isRemote(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.on("submit.rails",n.formSubmitSelector,function(r){var o,i,a=e(this),u=n.isRemote(a);if(!n.allowAction(a))return n.stopEverything(r);if(a.attr("novalidate")===t)if(a.data("ujs:formnovalidate-button")===t){if((o=n.blankInputs(a,n.requiredInputSelector,!1))&&n.fire(a,"ajax:aborted:required",[o]))return n.stopEverything(r)}else a.data("ujs:formnovalidate-button",t);if(u){if(i=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var c=n.fire(a,"ajax:aborted:file",[i]);return c||setTimeout(function(){n.enableFormElements(a)},13),c}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),r.on("click.rails",n.formInputClickSelector,function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var o=r.attr("name"),i=o?{name:o,value:r.val()}:null,a=r.closest("form");0===a.length&&(a=e("#"+r.attr("form"))),a.data("ujs:submit-button",i),a.data("ujs:formnovalidate-button",r.attr("formnovalidate")),a.data("ujs:submit-button-formaction",r.attr("formaction")),a.data("ujs:submit-button-formmethod",r.attr("formmethod"))}),r.on("ajax:send.rails",n.formSubmitSelector,function(t){this===t.target&&n.disableFormElements(e(this))}),r.on("ajax:complete.rails",n.formSubmitSelector,function(t){this===t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),document.addEventListener("click",function(e){var t,n;if(n=e.target,matches.call(n,"a[data-confirm], button[data-confirm], input[data-confirm]")){if(t=n.getAttribute("data-confirm"),!confirm(t))return e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault(),!1}else;},!1);var CSRF={token:function(){var e=document.querySelector('meta[name="csrf-token"]');return e&&e.getAttribute("content")},param:function(){var e=document.querySelector('meta[name="csrf-param"]');return e&&e.getAttribute("content")}},sameOrigin=function(e){var t,n=document.createElement("a");return n.href=e,t=n.href.split("/",3).join("/"),0===window.location.href.indexOf(t)};window.CSRF=CSRF,document.addEventListener("ajax:before",function(e){var t=CSRF.token(),n=e.detail;t&&n.setRequestHeader("X-CSRF-Token",t)}),document.addEventListener("submit",function(e){var t=CSRF.token(),n=CSRF.param(),r=e.target;if(matches.call(r,"form")){if(matches.call(r,"form[data-remote]"))return!0;if(!r.method||"GET"==r.method.toUpperCase())return!0;if(!sameOrigin(r.action))return!0;if(n&&t&&!r.querySelector("input[name="+n+"]")){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",n),o.setAttribute("value",t),r.appendChild(o)}return!0}}),document.addEventListener("click",function(e){var t,n;3!=e.which&&(n=e.target,"submit"===n.getAttribute("type")&&null!==n.form.querySelector(":invalid")||matches.call(n,"a[data-disable-with], button[data-disable-with], input[data-disable-with]")&&(t=n.getAttribute("data-disable-with"),n.value?n.value=t:n.innerHTML=t,setTimeout(function(){n.setAttribute("disabled","disabled")},0)))},!1),document.addEventListener("submit",function(e){var t=e.target;if(matches.call(t,"form[data-remote]")){var n=t.action,r=(t.method||t.getAttribute("data-method")||"POST").toUpperCase(),o=new FormData(t);if(CSRF.param()&&CSRF.token()&&(o[CSRF.param()]=CSRF.token()),!LiteAjax.ajax({url:n,method:r,data:o,target:t}))return!0;e.preventDefault()}});var LiteAjax=function(){var LiteAjax={};return LiteAjax.options={method:"GET",url:window.location.href},LiteAjax.ajax=function(url,options){"object"==typeof url&&(options=url,url=undefined),options=options||{},options.accepts||(options.accepts="text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"),url=url||options.url||location.href||"";var data=options.data,target=options.target||document,xhr=new XMLHttpRequest;xhr.addEventListener("load",function(){var responseType=xhr.getResponseHeader("content-type");"text/javascript; charset=utf-8"===responseType&&eval(xhr.response);var event=new CustomEvent("ajax:complete",{detail:xhr,bubbles:!0});target.dispatchEvent(event)}),"function"==typeof options.success&&xhr.addEventListener("load",function(){xhr.status>=200&&xhr.status<300&&options.success(xhr)}),"function"==typeof options.error&&(xhr.addEventListener("load",function(){(xhr.status<200||xhr.status>=300)&&options.error(xhr)}),xhr.addEventListener("error",function(){options.error(xhr)})),xhr.open(options.method||"GET",url),xhr.setRequestHeader("X-Requested-With","XmlHttpRequest"),
xhr.setRequestHeader("Accept","*/*;q=0.5, "+options.accepts),options.json&&(xhr.setRequestHeader("Content-type","application/json"),data=JSON.stringify(data));var beforeSend=new CustomEvent("ajax:before",{detail:xhr,bubbles:!0});return target.dispatchEvent(beforeSend),xhr.send(data),xhr},LiteAjax}();document.addEventListener("click",function(e){function t(e){var t,n,r;if("GET"==e.method)return!1;t=document.createElement("form"),t.method="POST",t.action=e.url,t.style.display="none";for(r in e.data)Object.prototype.hasOwnProperty.call(e.data,r)&&(n=document.createElement("input"),n.setAttribute("type","hidden"),n.setAttribute("name",r),n.setAttribute("value",e.data[r]),t.appendChild(n));return"POST"!=e.method&&(n=document.createElement("input"),n.setAttribute("type","hidden"),n.setAttribute("name","_method"),n.setAttribute("value",e.method),t.appendChild(n)),document.body.appendChild(t),t.submit(),!0}function n(e){return LiteAjax.ajax(e),!0}var r,o,i,a;if(0===e.button&&(r=e.target,matches.call(r,"a[data-method]"))){if(o=r.getAttribute("href"),i=r.getAttribute("data-method").toUpperCase(),a={},CSRF.param()&&CSRF.token()&&(a[CSRF.param()]=CSRF.token()),!(matches.call(r,"a[data-remote]")?n:t)({url:o,method:i,data:a,target:r}))return!0;e.preventDefault()}},!1);var matches=function(e){return e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector}(document.documentElement),CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};CustomEvent.prototype=window.CustomEvent.prototype,window.CustomEvent=CustomEvent,function(){(function(){(function(){this.Turbolinks={supported:function(){return null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener}(),visit:function(t,n){return e.controller.visit(t,n)},clearCache:function(){return e.controller.clearCache()}}}).call(this)}).call(this);var e=this.Turbolinks;(function(){(function(){var t,n,r=[].slice;e.copyObject=function(e){var t,n,r;n={};for(t in e)r=e[t],n[t]=r;return n},e.closest=function(e,n){return t.call(e,n)},t=function(){var e,t;return e=document.documentElement,null!=(t=e.closest)?t:function(e){var t;for(t=this;t;){if(t.nodeType===Node.ELEMENT_NODE&&n.call(t,e))return t;t=t.parentNode}}}(),e.defer=function(e){return setTimeout(e,1)},e.throttle=function(e){var t;return t=null,function(){var n;return n=1<=arguments.length?r.call(arguments,0):[],null!=t?t:t=requestAnimationFrame(function(r){return function(){return t=null,e.apply(r,n)}}(this))}},e.dispatch=function(e,t){var n,r,o,i,a;return i=null!=t?t:{},a=i.target,n=i.cancelable,r=i.data,o=document.createEvent("Events"),o.initEvent(e,!0,!0===n),o.data=null!=r?r:{},(null!=a?a:document).dispatchEvent(o),o},e.match=function(e,t){return n.call(e,t)},n=function(){var e,t,n,r;return e=document.documentElement,null!=(t=null!=(n=null!=(r=e.matchesSelector)?r:e.webkitMatchesSelector)?n:e.msMatchesSelector)?t:e.mozMatchesSelector}(),e.uuid=function(){var e,t,n;for(n="",e=t=1;36>=t;e=++t)n+=9===e||14===e||19===e||24===e?"-":15===e?"4":20===e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){e.Location=function(){function e(e){var t,n;null==e&&(e=""),n=document.createElement("a"),n.href=e.toString(),this.absoluteURL=n.href,t=n.hash.length,2>t?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-t),this.anchor=n.hash.slice(1))}var t,n,r,o;return e.wrap=function(e){return e instanceof this?e:new this(e)},e.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},e.prototype.getPath=function(){var e,t;return null!=(e=null!=(t=this.absoluteURL.match(/\/\/[^\/]*(\/[^?;]*)/))?t[1]:void 0)?e:"/"},e.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},e.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},e.prototype.getExtension=function(){var e,t;return null!=(e=null!=(t=this.getLastPathComponent().match(/\.[^.]*$/))?t[0]:void 0)?e:""},e.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},e.prototype.isPrefixedBy=function(e){var t;return t=n(e),this.isEqualTo(e)||o(this.absoluteURL,t)},e.prototype.isEqualTo=function(e){return this.absoluteURL===(null!=e?e.absoluteURL:void 0)},e.prototype.toCacheKey=function(){return this.requestURL},e.prototype.toJSON=function(){return this.absoluteURL},e.prototype.toString=function(){return this.absoluteURL},e.prototype.valueOf=function(){return this.absoluteURL},n=function(e){return t(e.getOrigin()+e.getPath())},t=function(e){return r(e,"/")?e:e+"/"},o=function(e,t){return e.slice(0,t.length)===t},r=function(e,t){return e.slice(-t.length)===t},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.HttpRequest=function(){function n(n,r,o){this.delegate=n,this.requestCanceled=t(this.requestCanceled,this),this.requestTimedOut=t(this.requestTimedOut,this),this.requestFailed=t(this.requestFailed,this),this.requestLoaded=t(this.requestLoaded,this),this.requestProgressed=t(this.requestProgressed,this),this.url=e.Location.wrap(r).requestURL,this.referrer=e.Location.wrap(o).absoluteURL,this.createXHR()}return n.NETWORK_FAILURE=0,n.TIMEOUT_FAILURE=-1,n.timeout=60,n.prototype.send=function(){var e;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(e=this.delegate).requestStarted?e.requestStarted():void 0):void 0},n.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},n.prototype.requestProgressed=function(e){return e.lengthComputable?this.setProgress(e.loaded/e.total):void 0},n.prototype.requestLoaded=function(){return this.endRequest(function(e){return function(){var t;return 200<=(t=e.xhr.status)&&300>t?e.delegate.requestCompletedWithResponse(e.xhr.responseText,e.xhr.getResponseHeader("Turbolinks-Location")):(e.failed=!0,e.delegate.requestFailedWithStatusCode(e.xhr.status,e.xhr.responseText))}}(this))},n.prototype.requestFailed=function(){return this.endRequest(function(e){return function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.NETWORK_FAILURE)}}(this))},n.prototype.requestTimedOut=function(){return this.endRequest(function(e){return function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.TIMEOUT_FAILURE)}}(this))},n.prototype.requestCanceled=function(){return this.endRequest()},n.prototype.notifyApplicationBeforeRequestStart=function(){return e.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},n.prototype.notifyApplicationAfterRequestEnd=function(){return e.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},n.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},n.prototype.endRequest=function(e){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=e&&e.call(this),this.destroy()):void 0},n.prototype.setProgress=function(e){var t;return this.progress=e,"function"==typeof(t=this.delegate).requestProgressed?t.requestProgressed(this.progress):void 0},n.prototype.destroy=function(){var e;return this.setProgress(1),"function"==typeof(e=this.delegate).requestFinished&&e.requestFinished(),this.delegate=null,this.xhr=null},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.ProgressBar=function(){function e(){this.trickle=t(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var n;return n=300,e.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+n+"ms ease-out, opacity "+n/2+"ms "+n/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement(function(e){return function(){return e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}}(this))):void 0},e.prototype.setValue=function(e){return this.value=e,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(e){return this.progressElement.style.opacity=0,setTimeout(e,1.5*n)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,n)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame(function(e){return function(){return e.progressElement.style.width=10+90*e.value+"%"}}(this))},e.prototype.createStylesheetElement=function(){var e;return e=document.createElement("style"),e.type="text/css",e.textContent=this.constructor.defaultCSS,e},e.prototype.createProgressElement=function(){var e;return e=document.createElement("div"),e.className="turbolinks-progress-bar",e},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.BrowserAdapter=function(){function n(n){this.controller=n,this.showProgressBar=t(this.showProgressBar,this),this.progressBar=new e.ProgressBar}var r,o,i,a;return a=e.HttpRequest,r=a.NETWORK_FAILURE,i=a.TIMEOUT_FAILURE,o=500,n.prototype.visitProposedToLocationWithAction=function(e,t){return this.controller.startVisitToLocationWithAction(e,t)},n.prototype.visitStarted=function(e){return e.issueRequest(),e.changeHistory(),e.loadCachedSnapshot()},n.prototype.visitRequestStarted=function(e){return this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!==e.action?this.showProgressBarAfterDelay():this.showProgressBar()},n.prototype.visitRequestProgressed=function(e){return this.progressBar.setValue(e.progress)},n.prototype.visitRequestCompleted=function(e){return e.loadResponse()},n.prototype.visitRequestFailedWithStatusCode=function(e,t){switch(t){case r:case i:return this.reload();default:return e.loadResponse()}},n.prototype.visitRequestFinished=function(){return this.hideProgressBar()},n.prototype.visitCompleted=function(e){return e.followRedirect()},n.prototype.pageInvalidated=function(){return this.reload()},n.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,o)},n.prototype.showProgressBar=function(){return this.progressBar.show()},n.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},n.prototype.reload=function(){return window.location.reload()},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.History=function(){function n(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},n.prototype.push=function(t,n){return t=e.Location.wrap(t),this.update("push",t,n)},n.prototype.replace=function(t,n){return t=e.Location.wrap(t),this.update("replace",t,n)},n.prototype.onPopState=function(t){var n,r,o,i;return this.shouldHandlePopState()&&(i=null!=(r=t.state)?r.turbolinks:void 0)?(n=e.Location.wrap(window.location),o=i.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(n,o)):void 0},n.prototype.onPageLoad=function(){return e.defer(function(e){return function(){return e.pageLoaded=!0}}(this))},n.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},n.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},n.prototype.update=function(e,t,n){var r;return r={turbolinks:{restorationIdentifier:n}},history[e+"State"](r,null,t)},n}()}.call(this),function(){e.Snapshot=function(){function t(e){var t,n;n=e.head,t=e.body,this.head=null!=n?n:document.createElement("head"),this.body=null!=t?t:document.createElement("body")}return t.wrap=function(e){return e instanceof this?e:this.fromHTML(e)},t.fromHTML=function(e){var t;return t=document.createElement("html"),t.innerHTML=e,this.fromElement(t)},t.fromElement=function(e){return new this({head:e.querySelector("head"),body:e.querySelector("body")})},t.prototype.clone=function(){return new t({head:this.head.cloneNode(!0),body:this.body.cloneNode(!0)})},t.prototype.getRootLocation=function(){var t,n;return n=null!=(t=this.getSetting("root"))?t:"/",new e.Location(n)},t.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},t.prototype.hasAnchor=function(e){try{return null!=this.body.querySelector("[id='"+e+"']")}catch(e){}},t.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},t.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},t.prototype.getSetting=function(e){var t,n;return n=this.head.querySelectorAll("meta[name='turbolinks-"+e+"']"),t=n[n.length-1],null!=t?t.getAttribute("content"):void 0},t}()}.call(this),function(){var t=[].slice;e.Renderer=function(){function e(){}var n;return e.render=function(){var e,n,r,o;return r=arguments[0],n=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],o=function(e,t,n){n.prototype=e.prototype;var r=new n,o=e.apply(r,t);return Object(o)===o?o:r}(this,e,function(){}),o.delegate=r,o.render(n),o},e.prototype.renderView=function(e){return this.delegate.viewWillRender(this.newBody),e(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(e){var t;return"false"===e.getAttribute("data-turbolinks-eval")?e:(t=document.createElement("script"),t.textContent=e.textContent,n(t,e),t)},n=function(e,t){var n,r,o,i,a,u,c;for(i=t.attributes,u=[],n=0,r=i.length;r>n;n++)a=i[n],o=a.name,c=a.value,u.push(e.setAttribute(o,c));return u},e}()}.call(this),function(){e.HeadDetails=function(){function e(e){var t,n,i,a,u,c,s;for(this.element=e,this.elements={},s=this.element.childNodes,a=0,c=s.length;c>a;a++)i=s[a],i.nodeType===Node.ELEMENT_NODE&&(u=i.outerHTML,n=null!=(t=this.elements)[u]?t[u]:t[u]={type:o(i),tracked:r(i),elements:[]},n.elements.push(i))}var t,n,r,o;return e.prototype.hasElementWithKey=function(e){return e in this.elements},e.prototype.getTrackedElementSignature=function(){var e,t;return function(){var n,r;n=this.elements,r=[];for(e in n)(t=n[e].tracked)&&r.push(e);return r}.call(this).join("")},e.prototype.getScriptElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("script",e)},e.prototype.getStylesheetElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)},e.prototype.getElementsMatchingTypeNotInDetails=function(e,t){var n,r,o,i,a,u;o=this.elements,a=[];for(r in o)i=o[r],u=i.type,n=i.elements,u!==e||t.hasElementWithKey(r)||a.push(n[0]);return a},e.prototype.getProvisionalElements=function(){var e,t,n,r,o,i,a;n=[],r=this.elements;for(t in r)o=r[t],a=o.type,i=o.tracked,e=o.elements,null!=a||i?e.length>1&&n.push.apply(n,e.slice(1)):n.push.apply(n,e);return n},o=function(e){return t(e)?"script":n(e)?"stylesheet":void 0},r=function(e){return"reload"===e.getAttribute("data-turbolinks-track")},t=function(e){return"script"===e.tagName.toLowerCase()},n=function(e){var t;return"style"===(t=e.tagName.toLowerCase())||"link"===t&&"stylesheet"===e.getAttribute("rel")},e}()}.call(this),function(){var t=function(e,t){function r(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;e.SnapshotRenderer=function(n){function r(t,n){this.currentSnapshot=t,this.newSnapshot=n,this.currentHeadDetails=new e.HeadDetails(this.currentSnapshot.head),this.newHeadDetails=new e.HeadDetails(this.newSnapshot.head),this.newBody=this.newSnapshot.body}return t(r,n),r.prototype.render=function(e){return this.trackedElementsAreIdentical()?(this.mergeHead(),this.renderView(function(t){return function(){return t.replaceBody(),t.focusFirstAutofocusableElement(),e()}}(this))):this.invalidateView()},r.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},r.prototype.replaceBody=function(){return this.activateBodyScriptElements(),this.importBodyPermanentElements(),this.assignNewBody()},r.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},r.prototype.copyNewHeadStylesheetElements=function(){var e,t,n,r,o;for(r=this.getNewHeadStylesheetElements(),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(document.head.appendChild(e));return o},r.prototype.copyNewHeadScriptElements=function(){var e,t,n,r,o;for(r=this.getNewHeadScriptElements(),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(document.head.appendChild(this.createScriptElement(e)));return o},r.prototype.removeCurrentHeadProvisionalElements=function(){var e,t,n,r,o;for(r=this.getCurrentHeadProvisionalElements(),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(document.head.removeChild(e));return o},r.prototype.copyNewHeadProvisionalElements=function(){var e,t,n,r,o;for(r=this.getNewHeadProvisionalElements(),o=[],t=0,n=r.length;n>t;t++)e=r[t],o.push(document.head.appendChild(e));return o},r.prototype.importBodyPermanentElements=function(){var e,t,n,r,o,i;for(r=this.getNewBodyPermanentElements(),i=[],t=0,n=r.length;n>t;t++)o=r[t],(e=this.findCurrentBodyPermanentElement(o))?i.push(o.parentNode.replaceChild(e,o)):i.push(void 0);return i},r.prototype.activateBodyScriptElements=function(){var e,t,n,r,o,i;for(r=this.getNewBodyScriptElements(),i=[],t=0,n=r.length;n>t;t++)o=r[t],e=this.createScriptElement(o),i.push(o.parentNode.replaceChild(e,o));return i},r.prototype.assignNewBody=function(){return document.body=this.newBody},r.prototype.focusFirstAutofocusableElement=function(){var e;return null!=(e=this.findFirstAutofocusableElement())?e.focus():void 0},r.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},r.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},r.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},r.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},r.prototype.getNewBodyPermanentElements=function(){return this.newBody.querySelectorAll("[id][data-turbolinks-permanent]")},r.prototype.findCurrentBodyPermanentElement=function(e){return document.body.querySelector("#"+e.id+"[data-turbolinks-permanent]")},r.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},r.prototype.findFirstAutofocusableElement=function(){return document.body.querySelector("[autofocus]")},r}(e.Renderer)}.call(this),function(){var t=function(e,t){function r(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},n={}.hasOwnProperty;e.ErrorRenderer=function(e){function n(e){this.html=e}return t(n,e),n.prototype.render=function(e){return this.renderView(function(t){return function(){return t.replaceDocumentHTML(),t.activateBodyScriptElements(),e()}}(this))},n.prototype.replaceDocumentHTML=function(){return document.documentElement.innerHTML=this.html},n.prototype.activateBodyScriptElements=function(){var e,t,n,r,o,i;for(r=this.getScriptElements(),i=[],t=0,n=r.length;n>t;t++)o=r[t],e=this.createScriptElement(o),i.push(o.parentNode.replaceChild(e,o));return i},n.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},n}(e.Renderer)}.call(this),function(){e.View=function(){function t(e){this.delegate=e,this.element=document.documentElement}return t.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},t.prototype.getSnapshot=function(){return e.Snapshot.fromElement(this.element)},t.prototype.render=function(e,t){var n,r,o;return o=e.snapshot,n=e.error,r=e.isPreview,this.markAsPreview(r),null!=o?this.renderSnapshot(o,t):this.renderError(n,t)},t.prototype.markAsPreview=function(e){return e?this.element.setAttribute("data-turbolinks-preview",""):this.element.removeAttribute("data-turbolinks-preview")},t.prototype.renderSnapshot=function(t,n){return e.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),e.Snapshot.wrap(t))},t.prototype.renderError=function(t,n){return e.ErrorRenderer.render(this.delegate,n,t)},t}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.ScrollManager=function(){function n(n){this.delegate=n,this.onScroll=t(this.onScroll,this),this.onScroll=e.throttle(this.onScroll)}return n.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},n.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},n.prototype.scrollToElement=function(e){return e.scrollIntoView()},n.prototype.scrollToPosition=function(e){var t,n;return t=e.x,n=e.y,window.scrollTo(t,n)},n.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},n.prototype.updatePosition=function(e){var t;return this.position=e,null!=(t=this.delegate)?t.scrollPositionChanged(this.position):void 0},n}()}.call(this),function(){e.SnapshotCache=function(){function t(e){this.size=e,this.keys=[],this.snapshots={}}var n;return t.prototype.has=function(e){return n(e)in this.snapshots},t.prototype.get=function(e){var t;if(this.has(e))return t=this.read(e),this.touch(e),t},t.prototype.put=function(e,t){return this.write(e,t),this.touch(e),t},t.prototype.read=function(e){var t;return t=n(e),this.snapshots[t]},t.prototype.write=function(e,t){var r;return r=n(e),this.snapshots[r]=t},t.prototype.touch=function(e){var t,r;return r=n(e),t=this.keys.indexOf(r),t>-1&&this.keys.splice(t,1),this.keys.unshift(r),this.trim()},t.prototype.trim=function(){var e,t,n,r,o;for(r=this.keys.splice(this.size),o=[],e=0,n=r.length;n>e;e++)t=r[e],o.push(delete this.snapshots[t]);return o},n=function(t){return e.Location.wrap(t).toCacheKey()},t}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.Visit=function(){function n(n,r,o){this.controller=n,this.action=o,this.performScroll=t(this.performScroll,this),this.identifier=e.uuid(),this.location=e.Location.wrap(r),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var r;return n.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},n.prototype.cancel=function(){var e;return"started"===this.state?(null!=(e=this.request)&&e.cancel(),this.cancelRender(),this.state="canceled"):void 0},n.prototype.complete=function(){var e;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(e=this.adapter).visitCompleted&&e.visitCompleted(this),this.controller.visitCompleted(this)):void 0},n.prototype.fail=function(){var e;return"started"===this.state?(this.state="failed","function"==typeof(e=this.adapter).visitFailed?e.visitFailed(this):void 0):void 0},n.prototype.changeHistory=function(){var e,t;return this.historyChanged?void 0:(e=this.location.isEqualTo(this.referrer)?"replace":this.action,t=r(e),this.controller[t](this.location,this.restorationIdentifier),this.historyChanged=!0)},n.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new e.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},n.prototype.getCachedSnapshot=function(){var e;return!(e=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!e.hasAnchor(this.location.anchor)||"restore"!==this.action&&!e.isPreviewable()?void 0:e},n.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},n.prototype.loadCachedSnapshot=function(){var e,t;return(t=this.getCachedSnapshot())?(e=this.shouldIssueRequest(),this.render(function(){var n;return this.cacheSnapshot(),this.controller.render({snapshot:t,isPreview:e},this.performScroll),"function"==typeof(n=this.adapter).visitRendered&&n.visitRendered(this),e?void 0:this.complete()})):void 0},n.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var e,t;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.complete())}):void 0},n.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},n.prototype.requestStarted=function(){var e;return this.recordTimingMetric("requestStart"),"function"==typeof(e=this.adapter).visitRequestStarted?e.visitRequestStarted(this):void 0},n.prototype.requestProgressed=function(e){var t;return this.progress=e,"function"==typeof(t=this.adapter).visitRequestProgressed?t.visitRequestProgressed(this):void 0},n.prototype.requestCompletedWithResponse=function(t,n){return this.response=t,null!=n&&(this.redirectedToLocation=e.Location.wrap(n)),this.adapter.visitRequestCompleted(this)},n.prototype.requestFailedWithStatusCode=function(e,t){return this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)},n.prototype.requestFinished=function(){var e;return this.recordTimingMetric("requestEnd"),"function"==typeof(e=this.adapter).visitRequestFinished?e.visitRequestFinished(this):void 0},n.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},n.prototype.scrollToRestoredPosition=function(){var e,t;return e=null!=(t=this.restorationData)?t.scrollPosition:void 0,null!=e?(this.controller.scrollToPosition(e),!0):void 0},n.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},n.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},n.prototype.recordTimingMetric=function(e){var t;return null!=(t=this.timingMetrics)[e]?t[e]:t[e]=(new Date).getTime()},n.prototype.getTimingMetrics=function(){return e.copyObject(this.timingMetrics)},r=function(e){switch(e){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},n.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},n.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},n.prototype.render=function(e){return this.cancelRender(),this.frame=requestAnimationFrame(function(t){return function(){return t.frame=null,e.call(t)}}(this))},n.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},n}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};e.Controller=function(){function n(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new e.History(this),this.view=new e.View(this),this.scrollManager=new e.ScrollManager(this),this.restorationData={},this.clearCache()}return n.prototype.start=function(){return e.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},n.prototype.disable=function(){return this.enabled=!1},n.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},n.prototype.clearCache=function(){return this.cache=new e.SnapshotCache(10)},n.prototype.visit=function(t,n){var r,o;return null==n&&(n={}),t=e.Location.wrap(t),this.applicationAllowsVisitingLocation(t)?this.locationIsVisitable(t)?(r=null!=(o=n.action)?o:"advance",this.adapter.visitProposedToLocationWithAction(t,r)):window.location=t:void 0},n.prototype.startVisitToLocationWithAction=function(t,n,r){var o;return e.supported?(o=this.getRestorationDataForIdentifier(r),this.startVisit(t,n,{restorationData:o})):window.location=t},n.prototype.startHistory=function(){return this.location=e.Location.wrap(window.location),this.restorationIdentifier=e.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.stopHistory=function(){return this.history.stop()},n.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(t,n){return this.restorationIdentifier=n,this.location=e.Location.wrap(t),this.history.push(this.location,this.restorationIdentifier)},n.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(t,n){return this.restorationIdentifier=n,this.location=e.Location.wrap(t),this.history.replace(this.location,this.restorationIdentifier)},n.prototype.historyPoppedToLocationWithRestorationIdentifier=function(t,n){var r;return this.restorationIdentifier=n,this.enabled?(r=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(t,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:r,historyChanged:!0}),this.location=e.Location.wrap(t)):this.adapter.pageInvalidated()},n.prototype.getCachedSnapshotForLocation=function(e){var t;return t=this.cache.get(e),t?t.clone():void 0},n.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},n.prototype.cacheSnapshot=function(){var e;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),e=this.view.getSnapshot(),this.cache.put(this.lastRenderedLocation,e.clone())):void 0},n.prototype.scrollToAnchor=function(e){var t;return(t=document.getElementById(e))?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})},n.prototype.scrollToElement=function(e){return this.scrollManager.scrollToElement(e)},n.prototype.scrollToPosition=function(e){return this.scrollManager.scrollToPosition(e)},n.prototype.scrollPositionChanged=function(e){var t;return t=this.getCurrentRestorationData(),t.scrollPosition=e},n.prototype.render=function(e,t){return this.view.render(e,t)},n.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},
n.prototype.viewWillRender=function(e){return this.notifyApplicationBeforeRender(e)},n.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},n.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},n.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},n.prototype.clickBubbled=function(e){var t,n,r;return this.enabled&&this.clickEventIsSignificant(e)&&(n=this.getVisitableLinkForNode(e.target))&&(r=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,r)?(e.preventDefault(),t=this.getActionForLink(n),this.visit(r,{action:t})):void 0},n.prototype.applicationAllowsFollowingLinkToLocation=function(e,t){var n;return n=this.notifyApplicationAfterClickingLinkToLocation(e,t),!n.defaultPrevented},n.prototype.applicationAllowsVisitingLocation=function(e){var t;return t=this.notifyApplicationBeforeVisitingLocation(e),!t.defaultPrevented},n.prototype.notifyApplicationAfterClickingLinkToLocation=function(t,n){return e.dispatch("turbolinks:click",{target:t,data:{url:n.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationBeforeVisitingLocation=function(t){return e.dispatch("turbolinks:before-visit",{data:{url:t.absoluteURL},cancelable:!0})},n.prototype.notifyApplicationAfterVisitingLocation=function(t){return e.dispatch("turbolinks:visit",{data:{url:t.absoluteURL}})},n.prototype.notifyApplicationBeforeCachingSnapshot=function(){return e.dispatch("turbolinks:before-cache")},n.prototype.notifyApplicationBeforeRender=function(t){return e.dispatch("turbolinks:before-render",{data:{newBody:t}})},n.prototype.notifyApplicationAfterRender=function(){return e.dispatch("turbolinks:render")},n.prototype.notifyApplicationAfterPageLoad=function(t){return null==t&&(t={}),e.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:t}})},n.prototype.startVisit=function(e,t,n){var r;return null!=(r=this.currentVisit)&&r.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)},n.prototype.createVisit=function(t,n,r){var o,i,a,u,c;return i=null!=r?r:{},u=i.restorationIdentifier,a=i.restorationData,o=i.historyChanged,c=new e.Visit(this,t,n),c.restorationIdentifier=null!=u?u:e.uuid(),c.restorationData=e.copyObject(a),c.historyChanged=o,c.referrer=this.location,c},n.prototype.visitCompleted=function(e){return this.notifyApplicationAfterPageLoad(e.getTimingMetrics())},n.prototype.clickEventIsSignificant=function(e){return!(e.defaultPrevented||e.target.isContentEditable||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},n.prototype.getVisitableLinkForNode=function(t){return this.nodeIsVisitable(t)?e.closest(t,"a[href]:not([target]):not([download])"):void 0},n.prototype.getVisitableLocationForLink=function(t){var n;return n=new e.Location(t.getAttribute("href")),this.locationIsVisitable(n)?n:void 0},n.prototype.getActionForLink=function(e){var t;return null!=(t=e.getAttribute("data-turbolinks-action"))?t:"advance"},n.prototype.nodeIsVisitable=function(t){var n;return!(n=e.closest(t,"[data-turbolinks]"))||"false"!==n.getAttribute("data-turbolinks")},n.prototype.locationIsVisitable=function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()},n.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},n.prototype.getRestorationDataForIdentifier=function(e){var t;return null!=(t=this.restorationData)[e]?t[e]:t[e]={}},n}()}.call(this),function(){var t,n,r;e.start=function(){return n()?(null==e.controller&&(e.controller=t()),e.controller.start()):void 0},n=function(){return null==window.Turbolinks&&(window.Turbolinks=e),r()},t=function(){var t;return t=new e.Controller,t.adapter=new e.BrowserAdapter(t),t},(r=function(){return window.Turbolinks===e})()&&e.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(e)}.call(this),function(){var e=this;(function(){(function(){var e=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var n;return null==e&&(e=null!=(n=this.getConfig("url"))?n:this.INTERNAL.default_mount_path),new t.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return t=document.head.querySelector("meta[name='action-cable-"+e+"']"),null!=t?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?(t=document.createElement("a"),t.href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var t,n;if(t=1<=arguments.length?e.call(arguments,0):[],this.debugging)return t.push(Date.now()),(n=this.logger).log.apply(n,["[ActionCable]"].concat(e.call(t)))}}}).call(this)}).call(e);var t=e.ActionCable;(function(){(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};t.ConnectionMonitor=function(){function n(t){this.connection=t,this.visibilityDidChange=e(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,o,i;return n.pollInterval={min:3,max:30},n.staleThreshold=6,n.prototype.start=function(){if(!this.isRunning())return this.startedAt=o(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},n.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=o(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),t.log("ConnectionMonitor stopped")},n.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},n.prototype.recordPing=function(){return this.pingedAt=o()},n.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,t.log("ConnectionMonitor recorded connect")},n.prototype.recordDisconnect=function(){return this.disconnectedAt=o(),t.log("ConnectionMonitor recorded disconnect")},n.prototype.startPolling=function(){return this.stopPolling(),this.poll()},n.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},n.prototype.poll=function(){return this.pollTimeout=setTimeout(function(e){return function(){return e.reconnectIfStale(),e.poll()}}(this),this.getPollInterval())},n.prototype.getPollInterval=function(){var e,t,n,o;return o=this.constructor.pollInterval,n=o.min,t=o.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(e,n,t))},n.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return t.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+i(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?t.log("ConnectionMonitor skipping reopening recent disconnect"):(t.log("ConnectionMonitor reopening"),this.connection.reopen())},n.prototype.connectionIsStale=function(){var e;return i(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},n.prototype.disconnectedRecently=function(){return this.disconnectedAt&&i(this.disconnectedAt)<this.constructor.staleThreshold},n.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout(function(e){return function(){if(e.connectionIsStale()||!e.connection.isOpen())return t.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}}(this),200)},o=function(){return(new Date).getTime()},i=function(e){return(o()-e)/1e3},r=function(e,t,n){return Math.max(t,Math.min(n,e))},n}()}).call(this),function(){var e,n,r,o,i,a=[].slice,u=function(e,t){return function(){return e.apply(t,arguments)}},c=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};o=t.INTERNAL,n=o.message_types,r=o.protocols,i=2<=r.length?a.call(r,0,e=r.length-1):(e=0,[]),r[e++],t.Connection=function(){function e(e){this.consumer=e,this.open=u(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new t.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(t.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(t.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+r),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new t.WebSocket(this.consumer.url,r),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t,n;if(t=(null!=e?e:{allowReconnect:!0}).allowReconnect,t||this.monitor.stop(),this.isActive())return null!=(n=this.webSocket)?n.close():void 0},e.prototype.reopen=function(){var e;if(t.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(n){return e=n,t.log("Failed to reopen WebSocket",e)}finally{t.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),c.call(i,e)>=0},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?a.call(arguments,0):[],e=this.getState(),c.call(t,e)>=0},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,r,o,i;if(this.isProtocolSupported())switch(o=JSON.parse(e.data),t=o.identifier,r=o.message,i=o.type,i){case n.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case n.ping:return this.monitor.recordPing();case n.confirmation:return this.subscriptions.notify(t,"connected");case n.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",r)}},open:function(){if(t.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return t.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(t.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return t.log("WebSocket onerror event")}},e}()}.call(this),function(){var e=[].slice;t.Subscriptions=function(){function n(e){this.consumer=e,this.subscriptions=[]}return n.prototype.create=function(e,n){var r,o,i;return r=e,o="object"==typeof r?r:{channel:r},i=new t.Subscription(this.consumer,o,n),this.add(i)},n.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},n.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},n.prototype.reject=function(e){var t,n,r,o,i;for(r=this.findAll(e),o=[],t=0,n=r.length;t<n;t++)i=r[t],this.forget(i),this.notify(i,"rejected"),o.push(i);return o},n.prototype.forget=function(e){var t;return this.subscriptions=function(){var n,r,o,i;for(o=this.subscriptions,i=[],n=0,r=o.length;n<r;n++)(t=o[n])!==e&&i.push(t);return i}.call(this),e},n.prototype.findAll=function(e){var t,n,r,o,i;for(r=this.subscriptions,o=[],t=0,n=r.length;t<n;t++)i=r[t],i.identifier===e&&o.push(i);return o},n.prototype.reload=function(){var e,t,n,r,o;for(n=this.subscriptions,r=[],e=0,t=n.length;e<t;e++)o=n[e],r.push(this.sendCommand(o,"subscribe"));return r},n.prototype.notifyAll=function(){var t,n,r,o,i,a,u;for(n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],i=this.subscriptions,a=[],r=0,o=i.length;r<o;r++)u=i[r],a.push(this.notify.apply(this,[u,n].concat(e.call(t))));return a},n.prototype.notify=function(){var t,n,r,o,i,a,u;for(a=arguments[0],n=arguments[1],t=3<=arguments.length?e.call(arguments,2):[],u="string"==typeof a?this.findAll(a):[a],i=[],r=0,o=u.length;r<o;r++)a=u[r],i.push("function"==typeof a[n]?a[n].apply(a,t):void 0);return i},n.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},n}()}.call(this),function(){t.Subscription=function(){function e(e,n,r){this.consumer=e,null==n&&(n={}),this.identifier=JSON.stringify(n),t(this,r)}var t;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},t=function(e,t){var n,r;if(null!=t)for(n in t)r=t[n],e[n]=r;return e},e}()}.call(this),function(){t.Consumer=function(){function e(e){this.url=e,this.subscriptions=new t.Subscriptions(this),this.connection=new t.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd&&define(t)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){}.call(this),function(){}.call(this),$(document).on("scroll",function(){$(document).scrollTop()>=30?($(".style_image").css("margin-top","-130px"),$(".style_image").css("left","17px"),$(".style_image").css("width","80%")):($(".style_image").css("margin-top",""),$(".style_image").css("left",""),$(".style_image").css("width",""))}),$("#logo img").css({cursor:"pointer"}).on("click",function(){var e=($(this).text(),"img");$(this).text(e),$(this).next("#navBar").toggle()}),$(document).on("scroll",function(){$(document).scrollTop()>=130?$("#navBar").fadeOut():$("#navBar").fadeIn()}),window.onscroll=function(){scrollFunction()},function(){}.call(this),function(){}.call(this),clic=0,jQuery("#category_menu").click(function(){return 0==clic?(jQuery("#menu-secondary").css({opacity:1,margin:"10px 0"}),jQuery("").css("display","block"),clic=1):(jQuery("#menu-secondary").css({opacity:0,margin:"-400px 0"}),jQuery("").css("display","none"),clic=0),!1}),window.onscroll=function(){scrollFunction()},function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.advlist.core.Actions",[],function(){return{applyListFormat:function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})}}}),i("tinymce.plugins.advlist.api.Commands",["tinymce.plugins.advlist.core.Actions"],function(e){return{register:function(t){t.addCommand("ApplyUnorderedListStyle",function(n,r){e.applyListFormat(t,"UL",r["list-style-type"])}),t.addCommand("ApplyOrderedListStyle",function(n,r){e.applyListFormat(t,"OL",r["list-style-type"])})}}}),i("tinymce.plugins.advlist.api.Settings",[],function(){return{getNumberStyles:function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},getBulletStyles:function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]}}}),i("tinymce.plugins.advlist.core.ListUtils",[],function(){var e=function(e,t){return e.$.contains(e.getBody(),t)};return{isListNode:function(t){return function(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)&&e(t,n)}},getSelectedStyleType:function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""}}}),i("tinymce.plugins.advlist.ui.ListStyles",["tinymce.core.util.Tools"],function(e){var t=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})};return{toMenuItems:function(n){return e.map(n,function(e){return{text:t(e),data:"default"===e?"":e}})}}}),i("tinymce.plugins.advlist.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.advlist.api.Settings","tinymce.plugins.advlist.core.Actions","tinymce.plugins.advlist.core.ListUtils","tinymce.plugins.advlist.ui.ListStyles"],function(e,t,n,r,o){var i=function(t,n){return function(o){var i=o.control;t.on("NodeChange",function(o){var a=e.grep(o.parents,r.isListNode(t));i.active(a.length>0&&a[0].nodeName===n)})}},a=function(e){return function(t){var n=r.getSelectedStyleType(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}},u=function(e,t,r,u,c,s){e.addButton(t,{type:"splitbutton",tooltip:r,menu:o.toMenuItems(s),onPostRender:i(e,c),onshow:a(e),onselect:function(t){n.applyListFormat(e,c,t.control.settings.data)},onclick:function(){e.execCommand(u)}})},c=function(e,t,n,r,o){e.addButton(t,{type:"button",tooltip:n,onPostRender:i(e,o),onclick:function(){e.execCommand(r)}})},s=function(e,t,n,r,o,i){i.length>0?u(e,t,n,r,o,i):c(e,t,n,r,o,i)};return{register:function(e){s(e,"numlist","Numbered list","InsertOrderedList","OL",t.getNumberStyles(e)),s(e,"bullist","Bullet list","InsertUnorderedList","UL",t.getBulletStyles(e))}}}),i("tinymce.plugins.advlist.Plugin",["tinymce.core.PluginManager","tinymce.core.util.Tools","tinymce.plugins.advlist.api.Commands","tinymce.plugins.advlist.ui.Buttons"],function(e,t,n,r){return e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"lists")&&(r.register(e),n.register(e))}),function(){}}),r("tinymce.plugins.advlist.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("2",["5"],function(e){return e("tinymce.util.Tools")}),i("6",[],function(){return{applyListFormat:function(e,t,n){var r="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(r,!1,!1===n?null:{"list-style-type":n})}}}),i("3",["6"],function(e){return{register:function(t){t.addCommand("ApplyUnorderedListStyle",function(n,r){e.applyListFormat(t,"UL",r["list-style-type"])}),t.addCommand("ApplyOrderedListStyle",function(n,r){e.applyListFormat(t,"OL",r["list-style-type"])})}}}),i("7",[],function(){return{getNumberStyles:function(e){var t=e.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return t?t.split(/[ ,]/):[]},getBulletStyles:function(e){var t=e.getParam("advlist_bullet_styles","default,circle,disc,square");return t?t.split(/[ ,]/):[]}}}),i("8",[],function(){var e=function(e,t){return e.$.contains(e.getBody(),t)};return{isListNode:function(t){return function(n){return n&&/^(OL|UL|DL)$/.test(n.nodeName)&&e(t,n)}},getSelectedStyleType:function(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul");return e.dom.getStyle(t,"listStyleType")||""}}}),i("9",["2"],function(e){var t=function(e){return e.replace(/\-/g," ").replace(/\b\w/g,function(e){return e.toUpperCase()})};return{toMenuItems:function(n){return e.map(n,function(e){return{text:t(e),data:"default"===e?"":e}})}}}),i("4",["2","7","6","8","9"],function(e,t,n,r,o){var i=function(t,n){return function(o){var i=o.control;t.on("NodeChange",function(o){var a=e.grep(o.parents,r.isListNode(t));i.active(a.length>0&&a[0].nodeName===n)})}},a=function(e){return function(t){var n=r.getSelectedStyleType(e);t.control.items().each(function(e){e.active(e.settings.data===n)})}},u=function(e,t,r,u,c,s){e.addButton(t,{type:"splitbutton",tooltip:r,menu:o.toMenuItems(s),onPostRender:i(e,c),onshow:a(e),onselect:function(t){n.applyListFormat(e,c,t.control.settings.data)},onclick:function(){e.execCommand(u)}})},c=function(e,t,n,r,o){e.addButton(t,{type:"button",tooltip:n,onPostRender:i(e,o),onclick:function(){e.execCommand(r)}})},s=function(e,t,n,r,o,i){i.length>0?u(e,t,n,r,o,i):c(e,t,n,r,o,i)};return{register:function(e){s(e,"numlist","Numbered list","InsertOrderedList","OL",t.getNumberStyles(e)),s(e,"bullist","Bullet list","InsertUnorderedList","UL",t.getBulletStyles(e))}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("advlist",function(e){(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"lists")&&(r.register(e),n.register(e))}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.anchor.core.Anchor",[],function(){return{isValidId:function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},getId:function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},insert:function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}}}),i("tinymce.plugins.anchor.ui.Dialog",["tinymce.plugins.anchor.core.Anchor"],function(e){var t=function(t,n){return e.isValidId(n)?(e.insert(t,n),!1):(t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)};return{open:function(n){var r=e.getId(n);n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:r},onsubmit:function(e){var r=e.data.id;t(n,r)&&e.preventDefault()}})}}}),i("tinymce.plugins.anchor.api.Commands",["tinymce.plugins.anchor.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mceAnchor",function(){e.open(t)})}}}),i("tinymce.plugins.anchor.core.FilterContent",[],function(){var e=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},t=function(t){return function(n){for(var r=0;r<n.length;r++)e(n[r])&&n[r].attr("contenteditable",t)}};return{setup:function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",t("false")),e.serializer.addNodeFilter("a",t(null))})}}}),i("tinymce.plugins.anchor.ui.Buttons",[],function(){return{register:function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}}}),i("tinymce.plugins.anchor.Plugin",["tinymce.core.PluginManager","tinymce.plugins.anchor.api.Commands","tinymce.plugins.anchor.core.FilterContent","tinymce.plugins.anchor.ui.Buttons"],function(e,t,n,r){return e.add("anchor",function(e){n.setup(e),t.register(e),r.register(e)}),function(){}}),r("tinymce.plugins.anchor.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("7",[],function(){return{isValidId:function(e){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(e)},getId:function(e){var t=e.selection.getNode();return"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:""},insert:function(e,t){var n=e.selection.getNode();"A"===n.tagName&&""===e.dom.getAttrib(n,"href")?(n.removeAttribute("name"),n.id=t):(e.focus(),e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:t})))}}}),i("6",["7"],function(e){var t=function(t,n){return e.isValidId(n)?(e.insert(t,n),!1):(t.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)};return{open:function(n){var r=e.getId(n);n.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:r},onsubmit:function(e){var r=e.data.id;t(n,r)&&e.preventDefault()}})}}}),i("2",["6"],function(e){return{register:function(t){t.addCommand("mceAnchor",function(){e.open(t)})}}}),i("3",[],function(){var e=function(e){return!e.attr("href")&&(e.attr("id")||e.attr("name"))&&!e.firstChild},t=function(t){return function(n){for(var r=0;r<n.length;r++)e(n[r])&&n[r].attr("contenteditable",t)}};return{setup:function(e){e.on("PreInit",function(){e.parser.addNodeFilter("a",t("false")),e.serializer.addNodeFilter("a",t(null))})}}}),i("4",[],function(){return{register:function(e){e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("anchor",function(e){n.setup(e),t.register(e),r.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.autolink.api.Settings",[],function(){return{getAutoLinkPattern:function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(e){return e.getParam("default_link_target","")}}}),i("tinymce.plugins.autolink.core.Keys",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.api.Settings"],function(e,t,n){var r=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},o=function(e){l(e,-1,"(",!0)},i=function(e){l(e,0,"",!0)},a=function(e){l(e,-1,"",!1)},u=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},c=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,u(t,n)):e.setStartBefore(t)},s=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,u(t,n)):e.setEndAfter(t)},l=function(e,t,o){var i,a,u,l,f,d,p,m,g,h,v=n.getAutoLinkPattern(e),y=n.getDefaultLinkTarget(e);if("A"!==e.selection.getNode().tagName){if(i=e.selection.getRng(!0).cloneRange(),i.startOffset<5){if(!(m=i.endContainer.previousSibling)){if(!i.endContainer.firstChild||!i.endContainer.firstChild.nextSibling)return;m=i.endContainer.firstChild.nextSibling}if(g=m.length,c(i,m,g),s(i,m,g),i.endOffset<5)return;a=i.endOffset,l=m}else{if(l=i.endContainer,3!==l.nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(c(i,l,0),s(i,l,l.nodeValue.length))}a=1===i.endOffset?2:i.endOffset-1-t}u=a;do{c(i,l,a>=2?a-2:0),s(i,l,a>=1?a-1:0),a-=1,h=i.toString()}while(" "!==h&&""!==h&&160!==h.charCodeAt(0)&&a-2>=0&&h!==o);r(i.toString(),o)?(c(i,l,a),s(i,l,u),a+=1):0===i.startOffset?(c(i,l,0),s(i,l,u)):(c(i,l,a),s(i,l,u)),d=i.toString(),"."===d.charAt(d.length-1)&&s(i,l,u-1),d=i.toString().trim(),(p=d.match(v))&&("www."===p[1]?p[1]="http://www.":/@$/.test(p[1])&&!/^mailto:/.test(p[1])&&(p[1]="mailto:"+p[1]),f=e.selection.getBookmark(),e.selection.setRng(i),e.execCommand("createlink",!1,p[1]+p[2]),y&&e.dom.setAttrib(e.selection.getNode(),"target",y),e.selection.moveToBookmark(f),e.nodeChanged())}};return{setup:function(t){var n;if(t.on("keydown",function(e){if(13===e.keyCode)return a(t)}),e.ie)return void t.on("focus",function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}});t.on("keypress",function(e){if(41===e.keyCode)return o(t)}),t.on("keyup",function(e){if(32===e.keyCode)return i(t)})}}}),i("tinymce.plugins.autolink.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.autolink.core.Keys"],function(e,t,n){return t.add("autolink",function(e){n.setup(e)}),function(){}}),r("tinymce.plugins.autolink.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){
if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.Env")}),i("2",["4"],function(e){return e("tinymce.PluginManager")}),i("5",[],function(){return{getAutoLinkPattern:function(e){return e.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},getDefaultLinkTarget:function(e){return e.getParam("default_link_target","")}}}),i("3",["1","2","5"],function(e,t,n){var r=function(e,t){return e===t||" "===e||160===e.charCodeAt(0)},o=function(e){l(e,-1,"(",!0)},i=function(e){l(e,0,"",!0)},a=function(e){l(e,-1,"",!1)},u=function(e,t){if(t<0&&(t=0),3===e.nodeType){var n=e.data.length;t>n&&(t=n)}return t},c=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setStart(t,u(t,n)):e.setStartBefore(t)},s=function(e,t,n){1!==t.nodeType||t.hasChildNodes()?e.setEnd(t,u(t,n)):e.setEndAfter(t)},l=function(e,t,o){var i,a,u,l,f,d,p,m,g,h,v=n.getAutoLinkPattern(e),y=n.getDefaultLinkTarget(e);if("A"!==e.selection.getNode().tagName){if(i=e.selection.getRng(!0).cloneRange(),i.startOffset<5){if(!(m=i.endContainer.previousSibling)){if(!i.endContainer.firstChild||!i.endContainer.firstChild.nextSibling)return;m=i.endContainer.firstChild.nextSibling}if(g=m.length,c(i,m,g),s(i,m,g),i.endOffset<5)return;a=i.endOffset,l=m}else{if(l=i.endContainer,3!==l.nodeType&&l.firstChild){for(;3!==l.nodeType&&l.firstChild;)l=l.firstChild;3===l.nodeType&&(c(i,l,0),s(i,l,l.nodeValue.length))}a=1===i.endOffset?2:i.endOffset-1-t}u=a;do{c(i,l,a>=2?a-2:0),s(i,l,a>=1?a-1:0),a-=1,h=i.toString()}while(" "!==h&&""!==h&&160!==h.charCodeAt(0)&&a-2>=0&&h!==o);r(i.toString(),o)?(c(i,l,a),s(i,l,u),a+=1):0===i.startOffset?(c(i,l,0),s(i,l,u)):(c(i,l,a),s(i,l,u)),d=i.toString(),"."===d.charAt(d.length-1)&&s(i,l,u-1),d=i.toString().trim(),(p=d.match(v))&&("www."===p[1]?p[1]="http://www.":/@$/.test(p[1])&&!/^mailto:/.test(p[1])&&(p[1]="mailto:"+p[1]),f=e.selection.getBookmark(),e.selection.setRng(i),e.execCommand("createlink",!1,p[1]+p[2]),y&&e.dom.setAttrib(e.selection.getNode(),"target",y),e.selection.moveToBookmark(f),e.nodeChanged())}};return{setup:function(t){var n;return t.on("keydown",function(e){if(13===e.keyCode)return a(t)}),e.ie?void t.on("focus",function(){if(!n){n=!0;try{t.execCommand("AutoUrlDetect",!1,!0)}catch(e){}}}):(t.on("keypress",function(e){if(41===e.keyCode)return o(t)}),void t.on("keyup",function(e){if(32===e.keyCode)return i(t)}))}}}),i("0",["1","2","3"],function(e,t,n){return t.add("autolink",function(e){n.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.plugins.autoresize.api.Settings",[],function(){return{getAutoResizeMinHeight:function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},getAutoResizeMaxHeight:function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},getAutoResizeOverflowPadding:function(e){return e.getParam("autoresize_overflow_padding",1)},getAutoResizeBottomMargin:function(e){return e.getParam("autoresize_bottom_margin",50)},shouldAutoResizeOnInit:function(e){return e.getParam("autoresize_on_init",!0)}}}),i("tinymce.plugins.autoresize.core.Resize",["tinymce.core.Env","tinymce.core.util.Delay","tinymce.plugins.autoresize.api.Settings"],function(e,t,n){var r=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},o=function(e,n,r,i,u){t.setEditorTimeout(e,function(){a(e,n),r--?o(e,n,r,i,u):u&&u()},i)},i=function(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},a=function(t,o){var u,c,s,l,f,d,p,m,g,h,v,y=t.dom;if(c=t.getDoc()){if(r(t))return void i(t,!0);s=c.body,l=n.getAutoResizeMinHeight(t),d=y.getStyle(s,"margin-top",!0),p=y.getStyle(s,"margin-bottom",!0),m=y.getStyle(s,"padding-top",!0),g=y.getStyle(s,"padding-bottom",!0),h=y.getStyle(s,"border-top-width",!0),v=y.getStyle(s,"border-bottom-width",!0),f=s.offsetHeight+parseInt(d,10)+parseInt(p,10)+parseInt(m,10)+parseInt(g,10)+parseInt(h,10)+parseInt(v,10),(isNaN(f)||f<=0)&&(f=e.ie?s.scrollHeight:e.webkit&&0===s.clientHeight?0:s.offsetHeight),f>n.getAutoResizeMinHeight(t)&&(l=f);var b=n.getAutoResizeMaxHeight(t);b&&f>b?(l=b,i(t,!0)):i(t,!1),l!==o.get()&&(u=l-o.get(),y.setStyle(t.iframeElement,"height",l+"px"),o.set(l),e.webKit&&u<0&&a(t))}};return{setup:function(e,t){e.on("init",function(){var t,r,o=e.dom;t=n.getAutoResizeOverflowPadding(e),r=n.getAutoResizeBottomMargin(e),!1!==t&&o.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==r&&o.setStyles(e.getBody(),{paddingBottom:r})}),e.on("nodechange setcontent keyup FullscreenStateChanged",function(){a(e,t)}),n.shouldAutoResizeOnInit(e)&&e.on("init",function(){o(e,t,20,100,function(){o(e,t,5,1e3)})})},resize:a}}),i("tinymce.plugins.autoresize.api.Commands",["tinymce.plugins.autoresize.core.Resize"],function(e){return{register:function(t,n){t.addCommand("mceAutoResize",function(){e.resize(t,n)})}}}),i("tinymce.plugins.autoresize.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.autoresize.api.Commands","tinymce.plugins.autoresize.core.Resize"],function(e,t,n,r){return t.add("autoresize",function(t){if(!t.inline){var o=e(0);n.register(t,o),r.setup(t,o)}}),function(){}}),r("tinymce.plugins.autoresize.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("5",tinymce.util.Tools.resolve),i("2",["5"],function(e){return e("tinymce.PluginManager")}),i("6",["5"],function(e){return e("tinymce.Env")}),i("7",["5"],function(e){return e("tinymce.util.Delay")}),i("8",[],function(){return{getAutoResizeMinHeight:function(e){return parseInt(e.getParam("autoresize_min_height",e.getElement().offsetHeight),10)},getAutoResizeMaxHeight:function(e){return parseInt(e.getParam("autoresize_max_height",0),10)},getAutoResizeOverflowPadding:function(e){return e.getParam("autoresize_overflow_padding",1)},getAutoResizeBottomMargin:function(e){return e.getParam("autoresize_bottom_margin",50)},shouldAutoResizeOnInit:function(e){return e.getParam("autoresize_on_init",!0)}}}),i("4",["6","7","8"],function(e,t,n){var r=function(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()},o=function(e,n,r,i,u){t.setEditorTimeout(e,function(){a(e,n),r--?o(e,n,r,i,u):u&&u()},i)},i=function(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},a=function(t,o){var u,c,s,l,f,d,p,m,g,h,v,y=t.dom;if(c=t.getDoc()){if(r(t))return void i(t,!0);s=c.body,l=n.getAutoResizeMinHeight(t),d=y.getStyle(s,"margin-top",!0),p=y.getStyle(s,"margin-bottom",!0),m=y.getStyle(s,"padding-top",!0),g=y.getStyle(s,"padding-bottom",!0),h=y.getStyle(s,"border-top-width",!0),v=y.getStyle(s,"border-bottom-width",!0),f=s.offsetHeight+parseInt(d,10)+parseInt(p,10)+parseInt(m,10)+parseInt(g,10)+parseInt(h,10)+parseInt(v,10),(isNaN(f)||f<=0)&&(f=e.ie?s.scrollHeight:e.webkit&&0===s.clientHeight?0:s.offsetHeight),f>n.getAutoResizeMinHeight(t)&&(l=f);var b=n.getAutoResizeMaxHeight(t);b&&f>b?(l=b,i(t,!0)):i(t,!1),l!==o.get()&&(u=l-o.get(),y.setStyle(t.iframeElement,"height",l+"px"),o.set(l),e.webKit&&u<0&&a(t))}};return{setup:function(e,t){e.on("init",function(){var t,r,o=e.dom;t=n.getAutoResizeOverflowPadding(e),r=n.getAutoResizeBottomMargin(e),!1!==t&&o.setStyles(e.getBody(),{paddingLeft:t,paddingRight:t}),!1!==r&&o.setStyles(e.getBody(),{paddingBottom:r})}),e.on("nodechange setcontent keyup FullscreenStateChanged",function(){a(e,t)}),n.shouldAutoResizeOnInit(e)&&e.on("init",function(){o(e,t,20,100,function(){o(e,t,5,1e3)})})},resize:a}}),i("3",["4"],function(e){return{register:function(t,n){t.addCommand("mceAutoResize",function(){e.resize(t,n)})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return t.add("autoresize",function(t){if(!t.inline){var o=e(0);n.register(t,o),r.setup(t,o)}}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("global!setInterval",setInterval),i("tinymce.core.util.LocalStorage",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.LocalStorage")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.autosave.api.Events",[],function(){return{fireRestoreDraft:function(e){return e.fire("RestoreDraft")},fireStoreDraft:function(e){return e.fire("StoreDraft")},fireRemoveDraft:function(e){return e.fire("RemoveDraft")}}}),a("global!document",document),i("tinymce.plugins.autosave.core.Time",[],function(){return{parse:function(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}}}),i("tinymce.plugins.autosave.api.Settings",["global!document","tinymce.plugins.autosave.core.Time"],function(e,t){return{shouldAskBeforeUnload:function(e){return e.getParam("autosave_ask_before_unload",!0)},getAutoSavePrefix:function(t){var n=t.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return n=n.replace(/\{path\}/g,e.location.pathname),n=n.replace(/\{query\}/g,e.location.search),n=n.replace(/\{hash\}/g,e.location.hash),n=n.replace(/\{id\}/g,t.id)},shouldRestoreWhenEmpty:function(e){return e.getParam("autosave_restore_when_empty",!1)},getAutoSaveInterval:function(e){return t.parse(e.settings.autosave_interval,"30s")},getAutoSaveRetention:function(e){return t.parse(e.settings.autosave_retention,"20m")}}}),i("tinymce.plugins.autosave.core.Storage",["global!setInterval","tinymce.core.util.LocalStorage","tinymce.core.util.Tools","tinymce.plugins.autosave.api.Events","tinymce.plugins.autosave.api.Settings"],function(e,t,n,r,o){var i=function(e,t){var r=e.settings.forced_root_block;return""===(t=n.trim(void 0===t?e.getBody().innerHTML:t))||new RegExp("^<"+r+"[^>]*>((\xa0|&nbsp;|[ \t]|<br[^>]*>)+?|)</"+r+">|<br>$","i").test(t)},a=function(e){var n=parseInt(t.getItem(o.getAutoSavePrefix(e)+"time"),10)||0;return!((new Date).getTime()-n>o.getAutoSaveRetention(e))||(u(e,!1),!1)},u=function(e,n){var i=o.getAutoSavePrefix(e);t.removeItem(i+"draft"),t.removeItem(i+"time"),!1!==n&&r.fireRemoveDraft(e)},c=function(e){var n=o.getAutoSavePrefix(e);!i(e)&&e.isDirty()&&(t.setItem(n+"draft",e.getContent({format:"raw",no_events:!0})),t.setItem(n+"time",(new Date).getTime()),r.fireStoreDraft(e))},s=function(e){var n=o.getAutoSavePrefix(e);a(e)&&(e.setContent(t.getItem(n+"draft"),{format:"raw"}),r.fireRestoreDraft(e))};return{isEmpty:i,hasDraft:a,removeDraft:u,storeDraft:c,restoreDraft:s,startStoreDraft:function(t,n){var r=o.getAutoSaveInterval(t);n.get()||(e(function(){t.removed||c(t)},r),n.set(!0))},restoreLastDraft:function(e){e.undoManager.transact(function(){s(e),u(e)}),e.focus()}}}),i("tinymce.plugins.autosave.api.Api",["tinymce.plugins.autosave.core.Storage"],function(e){var t=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[t].concat(n))}};return{get:function(n){return{hasDraft:t(e.hasDraft,n),storeDraft:t(e.storeDraft,n),restoreDraft:t(e.restoreDraft,n),removeDraft:t(e.removeDraft,n),isEmpty:t(e.isEmpty,n)}}}}),a("global!window",window),i("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),i("tinymce.plugins.autosave.core.BeforeUnload",["global!window","tinymce.core.EditorManager","tinymce.core.util.Tools","tinymce.plugins.autosave.api.Settings"],function(e,t,n,r){return t._beforeUnloadHandler=function(){var e;return n.each(t.get(),function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&r.shouldAskBeforeUnload(t)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e},{setup:function(){e.onbeforeunload=t._beforeUnloadHandler}}}),i("tinymce.plugins.autosave.ui.Buttons",["tinymce.plugins.autosave.core.Storage"],function(e){var t=function(t,n){return function(r){var o=r.control;o.disabled(!e.hasDraft(t)),t.on("StoreDraft RestoreDraft RemoveDraft",function(){o.disabled(!e.hasDraft(t))}),e.startStoreDraft(t,n)}};return{register:function(n,r){n.addButton("restoredraft",{title:"Restore last draft",onclick:function(){e.restoreLastDraft(n)},onPostRender:t(n,r)}),n.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){e.restoreLastDraft(n)},onPostRender:t(n,r),context:"file"})}}}),i("tinymce.plugins.autosave.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.autosave.api.Api","tinymce.plugins.autosave.core.BeforeUnload","tinymce.plugins.autosave.ui.Buttons"],function(e,t,n,r,o){return t.add("autosave",function(t){var i=e(!1);return r.setup(t),o.register(t,i),n.get(t)}),function(){}}),r("tinymce.plugins.autosave.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),a("c",setInterval),i("d",["6"],function(e){return e("tinymce.util.LocalStorage")}),i("a",["6"],function(e){return e("tinymce.util.Tools")}),i("e",[],function(){return{fireRestoreDraft:function(e){return e.fire("RestoreDraft")},fireStoreDraft:function(e){return e.fire("StoreDraft")},fireRemoveDraft:function(e){return e.fire("RemoveDraft")}}}),a("f",document),i("g",[],function(){return{parse:function(e,t){var n={s:1e3,m:6e4};return e=/^(\d+)([ms]?)$/.exec(""+(e||t)),(e[2]?n[e[2]]:1)*parseInt(e,10)}}}),i("b",["f","g"],function(e,t){var n=function(e){return e.getParam("autosave_ask_before_unload",!0)},r=function(t){var n=t.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return n=n.replace(/\{path\}/g,e.location.pathname),n=n.replace(/\{query\}/g,e.location.search),n=n.replace(/\{hash\}/g,e.location.hash),n=n.replace(/\{id\}/g,t.id)};return{shouldAskBeforeUnload:n,getAutoSavePrefix:r,shouldRestoreWhenEmpty:function(e){return e.getParam("autosave_restore_when_empty",!1)},getAutoSaveInterval:function(e){return t.parse(e.settings.autosave_interval,"30s")},getAutoSaveRetention:function(e){return t.parse(e.settings.autosave_retention,"20m")}}}),i("7",["c","d","a","e","b"],function(e,t,n,r,o){var i=function(e,t){var r=e.settings.forced_root_block;return""===(t=n.trim(void 0===t?e.getBody().innerHTML:t))||new RegExp("^<"+r+"[^>]*>((\xa0|&nbsp;|[ \t]|<br[^>]*>)+?|)</"+r+">|<br>$","i").test(t)},a=function(e){var n=parseInt(t.getItem(o.getAutoSavePrefix(e)+"time"),10)||0;return!((new Date).getTime()-n>o.getAutoSaveRetention(e)&&(u(e,!1),1))},u=function(e,n){var i=o.getAutoSavePrefix(e);t.removeItem(i+"draft"),t.removeItem(i+"time"),!1!==n&&r.fireRemoveDraft(e)},c=function(e){var n=o.getAutoSavePrefix(e);!i(e)&&e.isDirty()&&(t.setItem(n+"draft",e.getContent({format:"raw",no_events:!0})),t.setItem(n+"time",(new Date).getTime()),r.fireStoreDraft(e))},s=function(e){var n=o.getAutoSavePrefix(e);a(e)&&(e.setContent(t.getItem(n+"draft"),{format:"raw"}),r.fireRestoreDraft(e))};return{isEmpty:i,hasDraft:a,removeDraft:u,storeDraft:c,restoreDraft:s,startStoreDraft:function(t,n){var r=o.getAutoSaveInterval(t);n.get()||(e(function(){t.removed||c(t)},r),n.set(!0))},restoreLastDraft:function(e){e.undoManager.transact(function(){s(e),u(e)}),e.focus()}}}),i("3",["7"],function(e){var t=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[t].concat(n))}};return{get:function(n){return{hasDraft:t(e.hasDraft,n),storeDraft:t(e.storeDraft,n),restoreDraft:t(e.restoreDraft,n),removeDraft:t(e.removeDraft,n),isEmpty:t(e.isEmpty,n)}}}}),a("8",window),i("9",["6"],function(e){return e("tinymce.EditorManager")}),i("4",["8","9","a","b"],function(e,t,n,r){return t._beforeUnloadHandler=function(){var e;return n.each(t.get(),function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&r.shouldAskBeforeUnload(t)&&(e=t.translate("You have unsaved changes are you sure you want to navigate away?"))}),e},{setup:function(){e.onbeforeunload=t._beforeUnloadHandler}}}),i("5",["7"],function(e){var t=function(t,n){return function(r){var o=r.control;o.disabled(!e.hasDraft(t)),t.on("StoreDraft RestoreDraft RemoveDraft",function(){o.disabled(!e.hasDraft(t))}),e.startStoreDraft(t,n)}};return{register:function(n,r){n.addButton("restoredraft",{title:"Restore last draft",onclick:function(){e.restoreLastDraft(n)},onPostRender:t(n,r)}),n.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){e.restoreLastDraft(n)},onPostRender:t(n,r),context:"file"})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("autosave",function(t){var i=e(!1);return r.setup(t),o.register(t,i),n.get(t)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.bbcode.core.Convert",["tinymce.core.util.Tools"],function(e){return{html2bbcode:function(t){t=e.trim(t);var n=function(e,n){t=t.replace(e,n)};return n(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),n(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),n(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),n(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),n(/<font>(.*?)<\/font>/gi,"$1"),n(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),n(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),n(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),n(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),n(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),n(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),n(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),n(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),n(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),n(/<\/(strong|b)>/gi,"[/b]"),n(/<(strong|b)>/gi,"[b]"),n(/<\/(em|i)>/gi,"[/i]"),n(/<(em|i)>/gi,"[i]"),n(/<\/u>/gi,"[/u]"),n(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),n(/<u>/gi,"[u]"),n(/<blockquote[^>]*>/gi,"[quote]"),n(/<\/blockquote>/gi,"[/quote]"),n(/<br \/>/gi,"\n"),n(/<br\/>/gi,"\n"),n(/<br>/gi,"\n"),n(/<p>/gi,""),n(/<\/p>/gi,"\n"),n(/&nbsp;|\u00a0/gi," "),n(/&quot;/gi,'"'),n(/&lt;/gi,"<"),n(/&gt;/gi,">"),n(/&amp;/gi,"&"),t},bbcode2html:function(t){t=e.trim(t);var n=function(e,n){t=t.replace(e,n)};return n(/\n/gi,"<br />"),n(/\[b\]/gi,"<strong>"),n(/\[\/b\]/gi,"</strong>"),n(/\[i\]/gi,"<em>"),n(/\[\/i\]/gi,"</em>"),n(/\[u\]/gi,"<u>"),n(/\[\/u\]/gi,"</u>"),n(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),n(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),n(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),n(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),n(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),n(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),t}}}),i("tinymce.plugins.bbcode.Plugin",["tinymce.core.PluginManager","tinymce.plugins.bbcode.core.Convert"],function(e,t){return e.add("bbcode",function(){return{init:function(e){e.on("beforeSetContent",function(e){e.content=t.bbcode2html(e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t.bbcode2html(e.content)),e.get&&(e.content=t.html2bbcode(e.content))})}}}),function(){}}),r("tinymce.plugins.bbcode.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),i("4",["3"],function(e){return e("tinymce.util.Tools")}),i("2",["4"],function(e){var t=function(t){t=e.trim(t);var n=function(e,n){t=t.replace(e,n)};return n(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),n(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),n(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),n(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),n(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),n(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),n(/<font>(.*?)<\/font>/gi,"$1"),n(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),n(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),n(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),n(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),n(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),n(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),n(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),n(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),n(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),n(/<\/(strong|b)>/gi,"[/b]"),n(/<(strong|b)>/gi,"[b]"),n(/<\/(em|i)>/gi,"[/i]"),n(/<(em|i)>/gi,"[i]"),n(/<\/u>/gi,"[/u]"),n(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),n(/<u>/gi,"[u]"),n(/<blockquote[^>]*>/gi,"[quote]"),n(/<\/blockquote>/gi,"[/quote]"),n(/<br \/>/gi,"\n"),n(/<br\/>/gi,"\n"),n(/<br>/gi,"\n"),n(/<p>/gi,""),n(/<\/p>/gi,"\n"),n(/&nbsp;|\u00a0/gi," "),n(/&quot;/gi,'"'),n(/&lt;/gi,"<"),n(/&gt;/gi,">"),n(/&amp;/gi,"&"),t},n=function(t){t=e.trim(t);var n=function(e,n){t=t.replace(e,n)};return n(/\n/gi,"<br />"),n(/\[b\]/gi,"<strong>"),n(/\[\/b\]/gi,"</strong>"),n(/\[i\]/gi,"<em>"),n(/\[\/i\]/gi,"</em>"),n(/\[u\]/gi,"<u>"),n(/\[\/u\]/gi,"</u>"),n(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),n(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),n(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),n(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),n(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),n(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),t};return{html2bbcode:t,bbcode2html:n}}),i("0",["1","2"],function(e,t){return e.add("bbcode",function(){return{init:function(e){e.on("beforeSetContent",function(e){e.content=t.bbcode2html(e.content)}),e.on("postProcess",function(e){e.set&&(e.content=t.bbcode2html(e.content)),e.get&&(e.content=t.html2bbcode(e.content))})}}}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.charmap.api.Events",[],function(){return{fireInsertCustomChar:function(e,t){return e.fire("insertCustomChar",{chr:t})}}}),i("tinymce.plugins.charmap.core.Actions",["tinymce.plugins.charmap.api.Events"],function(e){return{insertChar:function(t,n){var r=e.fireInsertCustomChar(t,n).chr;t.execCommand("mceInsertContent",!1,r)}}}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.charmap.api.Settings",[],function(){return{getCharMap:function(e){return e.settings.charmap},getCharMapAppend:function(e){return e.settings.charmap_append}}}),i("tinymce.plugins.charmap.core.CharMap",["tinymce.core.util.Tools","tinymce.plugins.charmap.api.Settings"],function(e,t){var n=e.isArray,r=function(){
return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},o=function(t){return e.grep(t,function(e){return n(e)&&2===e.length})},i=function(e){return n(e)?[].concat(o(e)):"function"==typeof e?e():[]},a=function(e,n){var r=t.getCharMap(e);r&&(n=i(r));var o=t.getCharMapAppend(e);return o?[].concat(n).concat(i(o)):n};return{getCharMap:function(e){return a(e,r())}}}),i("tinymce.plugins.charmap.api.Api",["tinymce.plugins.charmap.core.Actions","tinymce.plugins.charmap.core.CharMap"],function(e,t){return{get:function(n){return{getCharMap:function(){return t.getCharMap(n)},insertChar:function(t){e.insertChar(n,t)}}}}}),i("tinymce.plugins.charmap.ui.GridHtml",[],function(){return{getHtml:function(e){var t,n,r,o=Math.min(e.length,25),i=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(t+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<e.length){var u=e[a],c=u?String.fromCharCode(parseInt(u[0],10)):"&nbsp;";t+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button" data-chr="'+c+'">'+c+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"}}}),i("tinymce.plugins.charmap.ui.Dialog",["tinymce.plugins.charmap.core.Actions","tinymce.plugins.charmap.core.CharMap","tinymce.plugins.charmap.ui.GridHtml"],function(e,t,n){var r=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}};return{open:function(o){var i,a={type:"container",html:n.getHtml(t.getCharMap(o)),onclick:function(t){var n=t.target;if(/^(TD|DIV)$/.test(n.nodeName)){var a=r(n).firstChild;a&&a.hasAttribute("data-chr")&&(e.insertChar(o,a.getAttribute("data-chr")),t.ctrlKey||i.close())}},onmouseover:function(e){var t=r(e.target);t&&t.firstChild?(i.find("#preview").text(t.firstChild.firstChild.data),i.find("#previewTitle").text(t.title)):(i.find("#preview").text(" "),i.find("#previewTitle").text(" "))}};i=o.windowManager.open({title:"Special character",spacing:10,padding:10,items:[a,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){i.close()}}]})}}}),i("tinymce.plugins.charmap.api.Commands",["tinymce.plugins.charmap.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mceShowCharmap",function(){e.open(t)})}}}),i("tinymce.plugins.charmap.ui.Buttons",[],function(){return{register:function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})}}}),i("tinymce.plugins.charmap.Plugin",["tinymce.core.PluginManager","tinymce.plugins.charmap.api.Api","tinymce.plugins.charmap.api.Commands","tinymce.plugins.charmap.ui.Buttons"],function(e,t,n,r){return e.add("charmap",function(e){return n.register(e),r.register(e),t.get(e)}),function(){}}),r("tinymce.plugins.charmap.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("9",[],function(){return{fireInsertCustomChar:function(e,t){return e.fire("insertCustomChar",{chr:t})}}}),i("6",["9"],function(e){return{insertChar:function(t,n){var r=e.fireInsertCustomChar(t,n).chr;t.execCommand("mceInsertContent",!1,r)}}}),i("a",["5"],function(e){return e("tinymce.util.Tools")}),i("b",[],function(){return{getCharMap:function(e){return e.settings.charmap},getCharMapAppend:function(e){return e.settings.charmap_append}}}),i("7",["a","b"],function(e,t){var n=e.isArray,r=function(){return[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]]},o=function(t){return e.grep(t,function(e){return n(e)&&2===e.length})},i=function(e){return n(e)?[].concat(o(e)):"function"==typeof e?e():[]},a=function(e,n){var r=t.getCharMap(e);r&&(n=i(r));var o=t.getCharMapAppend(e);return o?[].concat(n).concat(i(o)):n};return{getCharMap:function(e){return a(e,r())}}}),i("2",["6","7"],function(e,t){return{get:function(n){return{getCharMap:function(){return t.getCharMap(n)},insertChar:function(t){e.insertChar(n,t)}}}}}),i("c",[],function(){return{getHtml:function(e){var t,n,r,o=Math.min(e.length,25),i=Math.ceil(e.length/o);for(t='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',r=0;r<i;r++){for(t+="<tr>",n=0;n<o;n++){var a=r*o+n;if(a<e.length){var u=e[a],c=u?String.fromCharCode(parseInt(u[0],10)):"&nbsp;";t+='<td title="'+u[1]+'"><div tabindex="-1" title="'+u[1]+'" role="button" data-chr="'+c+'">'+c+"</div></td>"}else t+="<td />"}t+="</tr>"}return t+="</tbody></table>"}}}),i("8",["6","7","c"],function(e,t,n){var r=function(e){for(;e;){if("TD"===e.nodeName)return e;e=e.parentNode}};return{open:function(o){var i,a={type:"container",html:n.getHtml(t.getCharMap(o)),onclick:function(t){var n=t.target;if(/^(TD|DIV)$/.test(n.nodeName)){var a=r(n).firstChild;a&&a.hasAttribute("data-chr")&&(e.insertChar(o,a.getAttribute("data-chr")),t.ctrlKey||i.close())}},onmouseover:function(e){var t=r(e.target);t&&t.firstChild?(i.find("#preview").text(t.firstChild.firstChild.data),i.find("#previewTitle").text(t.title)):(i.find("#preview").text(" "),i.find("#previewTitle").text(" "))}};i=o.windowManager.open({title:"Special character",spacing:10,padding:10,items:[a,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){i.close()}}]})}}}),i("3",["8"],function(e){return{register:function(t){t.addCommand("mceShowCharmap",function(){e.open(t)})}}}),i("4",[],function(){return{register:function(e){e.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),e.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("charmap",function(e){return n.register(e),r.register(e),t.get(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.code.api.Settings",["tinymce.core.dom.DOMUtils"],function(e){return{getMinWidth:function(e){return e.getParam("code_dialog_width",600)},getMinHeight:function(t){return t.getParam("code_dialog_height",Math.min(e.DOM.getViewPort().h-200,500))}}}),i("tinymce.plugins.code.core.Content",[],function(){return{setContent:function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},getContent:function(e){return e.getContent({source_view:!0})}}}),i("tinymce.plugins.code.ui.Dialog",["tinymce.plugins.code.api.Settings","tinymce.plugins.code.core.Content"],function(e,t){return{open:function(n){var r=e.getMinWidth(n),o=e.getMinHeight(n);n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:r,minHeight:o,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){t.setContent(n,e.data.code)}}).find("#code").value(t.getContent(n))}}}),i("tinymce.plugins.code.api.Commands",["tinymce.plugins.code.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mceCodeEditor",function(){e.open(t)})}}}),i("tinymce.plugins.code.ui.Buttons",["tinymce.plugins.code.ui.Dialog"],function(e){return{register:function(t){t.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){e.open(t)}}),t.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){e.open(t)}})}}}),i("tinymce.plugins.code.Plugin",["tinymce.core.PluginManager","tinymce.plugins.code.api.Commands","tinymce.plugins.code.ui.Buttons"],function(e,t,n){return e.add("code",function(e){return t.register(e),n.register(e),{}}),function(){}}),r("tinymce.plugins.code.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("8",["4"],function(e){return e("tinymce.dom.DOMUtils")}),i("6",["8"],function(e){return{getMinWidth:function(e){return e.getParam("code_dialog_width",600)},getMinHeight:function(t){return t.getParam("code_dialog_height",Math.min(e.DOM.getViewPort().h-200,500))}}}),i("7",[],function(){return{setContent:function(e,t){e.focus(),e.undoManager.transact(function(){e.setContent(t)}),e.selection.setCursorLocation(),e.nodeChanged()},getContent:function(e){return e.getContent({source_view:!0})}}}),i("5",["6","7"],function(e,t){return{open:function(n){var r=e.getMinWidth(n),o=e.getMinHeight(n);n.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:r,minHeight:o,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){t.setContent(n,e.data.code)}}).find("#code").value(t.getContent(n))}}}),i("2",["5"],function(e){return{register:function(t){t.addCommand("mceCodeEditor",function(){e.open(t)})}}}),i("3",["5"],function(e){return{register:function(t){t.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){e.open(t)}}),t.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){e.open(t)}})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("code",function(e){return t.register(e),n.register(e),{}}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.codesample.api.Settings",["tinymce.core.dom.DOMUtils"],function(e){return{getContentCss:function(e){return e.settings.codesample_content_css},getLanguages:function(e){return e.settings.codesample_languages},getDialogMinWidth:function(t){return Math.min(e.DOM.getViewPort().w,t.getParam("codesample_dialog_width",800))},getDialogMinHeight:function(t){return Math.min(e.DOM.getViewPort().w,t.getParam("codesample_dialog_height",650))}}}),i("tinymce.plugins.codesample.core.Prism",[],function(){var e={},t=void 0!==e?e:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=t.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var o in t)r[o]=t[o];return r},insertBefore:function(e,t,r,o){o=o||n.languages;var i=o[e];if(2==arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i}var u={};for(var c in i)if(i.hasOwnProperty(c)){if(c==t)for(var a in r)r.hasOwnProperty(a)&&(u[a]=r[a]);u[c]=i[c]}return n.languages.DFS(n.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=u)}),o[e]=u},DFS:function(e,t,r){for(var o in e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],r||o),"Object"===n.util.type(e[o])?n.languages.DFS(e[o],t):"Array"===n.util.type(e[o])&&n.languages.DFS(e[o],t,o))}},plugins:{},highlightAll:function(e,t){for(var r,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;r=o[i++];)n.highlightElement(r,!0===e,t)},highlightElement:function(r,o,i){for(var a,u,c=r;c&&!e.test(c.className);)c=c.parentNode;c&&(a=(c.className.match(e)||[,""])[1],u=n.languages[a]),r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,c=r.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var s=r.textContent,l={element:r,language:a,grammar:u,code:s};if(!s||!u)return void n.hooks.run("complete",l);if(n.hooks.run("before-highlight",l),o&&t.Worker){var f=new Worker(n.filename);f.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},f.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(r),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},highlight:function(e,t,o){var i=n.tokenize(e,t);return r.stringify(n.util.encode(i),o)},tokenize:function(e,t){var r=n.Token,o=[e],i=t.rest;if(i){for(var a in i)t[a]=i[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var u=t[a];u="Array"===n.util.type(u)?u:[u];for(var c=0;c<u.length;++c){var s=u[c],l=s.inside,f=!!s.lookbehind,d=0,p=s.alias;s=s.pattern||s;for(var m=0;m<o.length;m++){var g=o[m];if(o.length>e.length)break e;if(!(g instanceof r)){s.lastIndex=0;var h=s.exec(g);if(h){f&&(d=h[1].length);var v=h.index-1+d,h=h[0].slice(d),y=h.length,b=v+y,x=g.slice(0,v+1),w=g.slice(b+1),C=[m,1];x&&C.push(x);var k=new r(a,l?n.tokenize(h,l):h,p);C.push(k),w&&C.push(w),Array.prototype.splice.apply(o,C)}}}}}return o},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var o,i=0;o=r[i++];)o(t)}}},r=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(r.stringify=function(e,t,o){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var i={type:e.type,content:r.stringify(e.content,t,o),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:o};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}n.hooks.run("wrap",i);var u="";for(var c in i.attributes)u+=(u?" ":"")+c+'="'+(i.attributes[c]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+u+">"+i.content+"</"+i.tag+">"},!t.document)return t.addEventListener?(t.addEventListener("message",function(e){var r=JSON.parse(e.data),o=r.language,i=r.code,a=r.immediateClose;t.postMessage(n.highlight(i,n.languages[o],o)),a&&t.close()},!1),t.Prism):t.Prism}();return"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof global&&(global.Prism=n),n.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},n.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),n.languages.xml=n.languages.markup,n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},n.languages.css.atrule.inside.rest=n.util.clone(n.languages.css),n.languages.markup&&(n.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:n.languages.markup.tag.inside},rest:n.languages.css},alias:"language-css"}}),n.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:n.languages.css}},alias:"language-css"}},n.languages.markup.tag)),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{
keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),n.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),n.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}}}),n.languages.markup&&n.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:n.languages.markup.tag.inside},rest:n.languages.javascript},alias:"language-javascript"}}),n.languages.js=n.languages.javascript,n.languages.c=n.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),n.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete n.languages.c["class-name"],delete n.languages.c["boolean"],n.languages.csharp=n.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),n.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),n.languages.cpp=n.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,"boolean":/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),n.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),n.languages.java=n.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),n.languages.php=n.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),n.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),n.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),n.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),n.languages.markup&&(n.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"}))}),n.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),n.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t,r=0;t=e.tokenStack[r];r++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(r+1)+"}}}",n.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),n.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),n.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:n.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,"function":{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,"boolean":/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(n),n}),i("tinymce.plugins.codesample.util.Utils",[],function(){function e(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}return{isCodeSample:e,trimArg:t}}),i("tinymce.plugins.codesample.core.CodeSample",["tinymce.core.dom.DOMUtils","tinymce.plugins.codesample.core.Prism","tinymce.plugins.codesample.util.Utils"],function(e,t,n){var r=function(e){var t=e.selection.getNode();return n.isCodeSample(t)?t:null};return{getSelectedCodeSample:r,insertCodeSample:function(n,o,i){n.undoManager.transact(function(){var a=r(n);i=e.DOM.encode(i),a?(n.dom.setAttrib(a,"class","language-"+o),a.innerHTML=i,t.highlightElement(a),n.selection.select(a)):(n.insertContent('<pre id="__new" class="language-'+o+'">'+i+"</pre>"),n.selection.select(n.$("#__new").removeAttr("id")[0]))})},getCurrentCode:function(e){var t=r(e);return t?t.textContent:""}}}),i("tinymce.plugins.codesample.core.Languages",["tinymce.plugins.codesample.api.Settings","tinymce.plugins.codesample.core.CodeSample"],function(e,t){return{getLanguages:function(t){var n=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],r=e.getLanguages(t);return r||n},getCurrentLanguage:function(e){var n,r=t.getSelectedCodeSample(e);return r?(n=r.className.match(/language-(\w+)/),n?n[1]:""):""}}}),i("tinymce.plugins.codesample.ui.Dialog",["tinymce.plugins.codesample.api.Settings","tinymce.plugins.codesample.core.CodeSample","tinymce.plugins.codesample.core.Languages"],function(e,t,n){return{open:function(r){var o=e.getDialogMinWidth(r),i=e.getDialogMinHeight(r),a=n.getCurrentLanguage(r),u=n.getLanguages(r),c=t.getCurrentCode(r);r.windowManager.open({title:"Insert/Edit code sample",minWidth:o,minHeight:i,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:a,values:u},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:c,autofocus:!0}],onSubmit:function(e){t.insertCodeSample(r,e.data.language,e.data.code)}})}}}),i("tinymce.plugins.codesample.api.Commands",["tinymce.plugins.codesample.ui.Dialog","tinymce.plugins.codesample.util.Utils"],function(e,t){return{register:function(n){n.addCommand("codesample",function(){var r=n.selection.getNode();n.selection.isCollapsed()||t.isCodeSample(r)?e.open(n):n.formatter.toggle("code")})}}}),i("tinymce.plugins.codesample.core.FilterContent",["tinymce.plugins.codesample.core.Prism","tinymce.plugins.codesample.util.Utils"],function(e,t){return{setup:function(n){var r=n.$;n.on("PreProcess",function(e){r("pre[contenteditable=false]",e.node).filter(t.trimArg(t.isCodeSample)).each(function(e,t){var n=r(t),o=t.textContent;n.attr("class",r.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(r("<code></code>").each(function(){this.textContent=o}))})}),n.on("SetContent",function(){var o=r("pre").filter(t.trimArg(t.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});o.length&&n.undoManager.transact(function(){o.each(function(t,o){r(o).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),o.contentEditable=!1,o.innerHTML=n.dom.encode(o.textContent),e.highlightElement(o),o.className=r.trim(o.className)})})})}}}),i("tinymce.plugins.codesample.core.LoadCss",["tinymce.plugins.codesample.api.Settings"],function(e){return{loadCss:function(t,n,r,o){var i,a=e.getContentCss(t);t.inline&&r.get()||!t.inline&&o.get()||(t.inline?r.set(!0):o.set(!0),!1!==a&&(i=t.dom.create("link",{rel:"stylesheet",href:a||n+"/css/prism.css"}),t.getDoc().getElementsByTagName("head")[0].appendChild(i)))}}}),i("tinymce.plugins.codesample.ui.Buttons",[],function(){return{register:function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})}}}),i("tinymce.plugins.codesample.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.codesample.api.Commands","tinymce.plugins.codesample.core.FilterContent","tinymce.plugins.codesample.core.LoadCss","tinymce.plugins.codesample.ui.Buttons"],function(e,t,n,r,o,i){var a=e(!1);return t.add("codesample",function(t,u){var c=e(!1);r.setup(t),i.register(t),n.register(t),t.on("init",function(){o.loadCss(t,u,a,c)})}),function(){}}),r("tinymce.plugins.codesample.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("7",tinymce.util.Tools.resolve),i("2",["7"],function(e){return e("tinymce.PluginManager")}),i("c",["7"],function(e){return e("tinymce.dom.DOMUtils")}),i("b",["c"],function(e){return{getContentCss:function(e){return e.settings.codesample_content_css},getLanguages:function(e){return e.settings.codesample_languages},getDialogMinWidth:function(t){return Math.min(e.DOM.getViewPort().w,t.getParam("codesample_dialog_width",800))},getDialogMinHeight:function(t){return Math.min(e.DOM.getViewPort().w,t.getParam("codesample_dialog_height",650))}}}),i("a",[],function(){var e={},t=void 0!==e?e:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},n=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,n=t.Prism={util:{encode:function(e){return e instanceof r?new r(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){switch(n.util.type(e)){case"Object":var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=n.util.clone(e[r]));return t;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var r=n.util.clone(n.languages[e]);for(var o in t)r[o]=t[o];return r},insertBefore:function(e,t,r,o){o=o||n.languages;var i=o[e];if(2==arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a]);return i}var u={};for(var c in i)if(i.hasOwnProperty(c)){if(c==t)for(var a in r)r.hasOwnProperty(a)&&(u[a]=r[a]);u[c]=i[c]}return n.languages.DFS(n.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=u)}),o[e]=u},DFS:function(e,t,r){for(var o in e)e.hasOwnProperty(o)&&(t.call(e,o,e[o],r||o),"Object"===n.util.type(e[o])?n.languages.DFS(e[o],t):"Array"===n.util.type(e[o])&&n.languages.DFS(e[o],t,o))}},plugins:{},highlightAll:function(e,t){for(var r,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;r=o[i++];)n.highlightElement(r,!0===e,t)},highlightElement:function(r,o,i){for(var a,u,c=r;c&&!e.test(c.className);)c=c.parentNode;c&&(a=(c.className.match(e)||[,""])[1],u=n.languages[a]),r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+a,c=r.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var s=r.textContent,l={element:r,language:a,grammar:u,code:s};if(!s||!u)return void n.hooks.run("complete",l);if(n.hooks.run("before-highlight",l),o&&t.Worker){var f=new Worker(n.filename);f.onmessage=function(e){l.highlightedCode=e.data,n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(l.element),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},f.postMessage(JSON.stringify({language:l.language,code:l.code,immediateClose:!0}))}else l.highlightedCode=n.highlight(l.code,l.grammar,l.language),n.hooks.run("before-insert",l),l.element.innerHTML=l.highlightedCode,i&&i.call(r),n.hooks.run("after-highlight",l),n.hooks.run("complete",l)},highlight:function(e,t,o){var i=n.tokenize(e,t);return r.stringify(n.util.encode(i),o)},tokenize:function(e,t){var r=n.Token,o=[e],i=t.rest;if(i){for(var a in i)t[a]=i[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var u=t[a];u="Array"===n.util.type(u)?u:[u];for(var c=0;c<u.length;++c){var s=u[c],l=s.inside,f=!!s.lookbehind,d=0,p=s.alias;s=s.pattern||s;for(var m=0;m<o.length;m++){var g=o[m];if(o.length>e.length)break e;if(!(g instanceof r)){s.lastIndex=0;var h=s.exec(g);if(h){f&&(d=h[1].length);var v=h.index-1+d,h=h[0].slice(d),y=h.length,b=v+y,x=g.slice(0,v+1),w=g.slice(b+1),C=[m,1];x&&C.push(x);var k=new r(a,l?n.tokenize(h,l):h,p);C.push(k),w&&C.push(w),Array.prototype.splice.apply(o,C)}}}}}return o},hooks:{all:{},add:function(e,t){var r=n.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=n.hooks.all[e];if(r&&r.length)for(var o,i=0;o=r[i++];)o(t)}}},r=n.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(r.stringify=function(e,t,o){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return r.stringify(n,t,e)}).join("");var i={type:e.type,content:r.stringify(e.content,t,o),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:o};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var a="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,a)}n.hooks.run("wrap",i);var u="";for(var c in i.attributes)u+=(u?" ":"")+c+'="'+(i.attributes[c]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+u+">"+i.content+"</"+i.tag+">"},!t.document)return t.addEventListener?(t.addEventListener("message",function(e){var r=JSON.parse(e.data),o=r.language,i=r.code,a=r.immediateClose;t.postMessage(n.highlight(i,n.languages[o],o)),a&&t.close()},!1),t.Prism):t.Prism}();return"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof global&&(global.Prism=n),n.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?[^\s>\/=.]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},n.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),n.languages.xml=n.languages.markup,n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},n.languages.css.atrule.inside.rest=n.util.clone(n.languages.css),n.languages.markup&&(n.languages.insertBefore("markup","tag",{style:{pattern:/<style[\w\W]*?>[\w\W]*?<\/style>/i,inside:{tag:{pattern:/<style[\w\W]*?>|<\/style>/i,inside:n.languages.markup.tag.inside},rest:n.languages.css},alias:"language-css"}}),n.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:n.languages.css}},alias:"language-css"}},n.languages.markup.tag)),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),n.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}}),n.languages.insertBefore("javascript","class-name",{"template-string":{pattern:/`(?:\\`|\\?[^`])*`/,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}}}),n.languages.markup&&n.languages.insertBefore("markup","tag",{script:{pattern:/<script[\w\W]*?>[\w\W]*?<\/script>/i,inside:{tag:{pattern:/<script[\w\W]*?>|<\/script>/i,inside:n.languages.markup.tag.inside},rest:n.languages.javascript},alias:"language-javascript"}}),n.languages.js=n.languages.javascript,n.languages.c=n.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),n.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0}}}}),delete n.languages.c["class-name"],delete n.languages.c["boolean"],n.languages.csharp=n.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+)\b/i}),n.languages.insertBefore("csharp","keyword",{preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0}}),n.languages.cpp=n.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,"boolean":/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),n.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),n.languages.java=n.languages.extend("clike",{keyword:/\b(abstract|continue|for|new|switch|assert|default|goto|package|synchronized|boolean|do|if|private|this|break|double|implements|protected|throw|byte|else|import|public|throws|case|enum|instanceof|return|transient|catch|extends|int|short|try|char|final|interface|static|void|class|finally|long|strictfp|volatile|const|float|native|super|while)\b/,number:/\b0b[01]+\b|\b0x[\da-f]*\.?[\da-fp\-]+\b|\b\d*\.?\d+(?:e[+-]?\d+)?[df]?\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|!=?|<<?=?|>>?>?=?|==?|&[&=]?|\|[|=]?|\*=?|\/=?|%=?|\^=?|[?:~])/m,lookbehind:!0}}),n.languages.php=n.languages.extend("clike",{keyword:/\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|private|protected|parent|throw|null|echo|print|trait|namespace|final|yield|goto|instanceof|finally|try|catch)\b/i,constant:/\b[A-Z0-9_]{2,}\b/,comment:{pattern:/(^|[^\\])(?:\/\*[\w\W]*?\*\/|\/\/.*)/,lookbehind:!0}}),n.languages.insertBefore("php","class-name",{"shell-comment":{pattern:/(^|[^\\])#.*/,lookbehind:!0,alias:"comment"}}),n.languages.insertBefore("php","keyword",{delimiter:/\?>|<\?(?:php)?/i,variable:/\$\w+\b/i,"package":{pattern:/(\\|namespace\s+|use\s+)[\w\\]+/,lookbehind:!0,inside:{punctuation:/\\/}}}),n.languages.insertBefore("php","operator",{property:{pattern:/(->)[\w]+/,lookbehind:!0}}),n.languages.markup&&(n.hooks.add("before-highlight",function(e){"php"===e.language&&(e.tokenStack=[],e.backupCode=e.code,e.code=e.code.replace(/(?:<\?php|<\?)[\w\W]*?(?:\?>)/gi,function(t){return e.tokenStack.push(t),"{{{PHP"+e.tokenStack.length+"}}}"}))}),n.hooks.add("before-insert",function(e){"php"===e.language&&(e.code=e.backupCode,delete e.backupCode)}),n.hooks.add("after-highlight",function(e){if("php"===e.language){for(var t,r=0;t=e.tokenStack[r];r++)e.highlightedCode=e.highlightedCode.replace("{{{PHP"+(r+1)+"}}}",n.highlight(t,e.grammar,"php").replace(/\$/g,"$$$$"));e.element.innerHTML=e.highlightedCode}}),n.hooks.add("wrap",function(e){"php"===e.language&&"markup"===e.type&&(e.content=e.content.replace(/(\{\{\{PHP[0-9]+\}\}\})/g,'<span class="token php">$1</span>'))}),n.languages.insertBefore("php","comment",{markup:{pattern:/<[^?]\/?(.*?)>/,inside:n.languages.markup},php:/\{\{\{PHP[0-9]+\}\}\}/})),n.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:/"""[\s\S]+?"""|'''[\s\S]+?'''|("|')(?:\\?.)*?\1/,"function":{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,"boolean":/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},function(e){e.languages.ruby=e.languages.extend("clike",{comment:/#(?!\{[^\r\n]*?\}).*/,keyword:/\b(alias|and|BEGIN|begin|break|case|class|def|define_method|defined|do|each|else|elsif|END|end|ensure|false|for|if|in|module|new|next|nil|not|or|raise|redo|require|rescue|retry|return|self|super|then|throw|true|undef|unless|until|when|while|yield)\b/});var t={pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"tag"},rest:e.util.clone(e.languages.ruby)}};e.languages.insertBefore("ruby","keyword",{regex:[{pattern:/%r([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\((?:[^()\\]|\\[\s\S])*\)[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}[gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r\[(?:[^\[\]\\]|\\[\s\S])*\][gim]{0,3}/,inside:{interpolation:t}},{pattern:/%r<(?:[^<>\\]|\\[\s\S])*>[gim]{0,3}/,inside:{interpolation:t}},{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0}],variable:/[@$]+[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/,symbol:/:[a-zA-Z_][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.insertBefore("ruby","number",{builtin:/\b(Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Stat|File|Fixnum|Fload|Hash|Integer|IO|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|String|Struct|TMS|Symbol|ThreadGroup|Thread|Time|TrueClass)\b/,constant:/\b[A-Z][a-zA-Z_0-9]*(?:[?!]|\b)/}),e.languages.ruby.string=[{pattern:/%[qQiIwWxs]?([^a-zA-Z0-9\s\{\(\[<])(?:[^\\]|\\[\s\S])*?\1/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\((?:[^()\\]|\\[\s\S])*\)/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\{(?:[^#{}\\]|#(?:\{[^}]+\})?|\\[\s\S])*\}/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?\[(?:[^\[\]\\]|\\[\s\S])*\]/,inside:{interpolation:t}},{pattern:/%[qQiIwWxs]?<(?:[^<>\\]|\\[\s\S])*>/,inside:{interpolation:t}},{pattern:/("|')(#\{[^}]+\}|\\(?:\r?\n|\r)|\\?.)*?\1/,inside:{interpolation:t}}]}(n),n}),i("9",[],function(){function e(e){return e&&"PRE"===e.nodeName&&-1!==e.className.indexOf("language-")}function t(e){return function(t,n){return e(n)}}return{isCodeSample:e,trimArg:t}}),i("d",["c","a","9"],function(e,t,n){var r=function(e){var t=e.selection.getNode();return n.isCodeSample(t)?t:null};return{getSelectedCodeSample:r,insertCodeSample:function(n,o,i){n.undoManager.transact(function(){var a=r(n);i=e.DOM.encode(i),a?(n.dom.setAttrib(a,"class","language-"+o),a.innerHTML=i,t.highlightElement(a),n.selection.select(a)):(n.insertContent('<pre id="__new" class="language-'+o+'">'+i+"</pre>"),n.selection.select(n.$("#__new").removeAttr("id")[0]))})},getCurrentCode:function(e){var t=r(e);return t?t.textContent:""}}}),i("e",["b","d"],function(e,t){var n=function(t){var n=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],r=e.getLanguages(t);return r||n},r=function(e){var n,r=t.getSelectedCodeSample(e);return r?(n=r.className.match(/language-(\w+)/),n?n[1]:""):""};return{getLanguages:n,getCurrentLanguage:r}}),i("8",["b","d","e"],function(e,t,n){return{open:function(r){var o=e.getDialogMinWidth(r),i=e.getDialogMinHeight(r),a=n.getCurrentLanguage(r),u=n.getLanguages(r),c=t.getCurrentCode(r);r.windowManager.open({title:"Insert/Edit code sample",minWidth:o,minHeight:i,layout:"flex",direction:"column",align:"stretch",body:[{type:"listbox",name:"language",label:"Language",maxWidth:200,value:a,values:u},{type:"textbox",name:"code",multiline:!0,spellcheck:!1,ariaLabel:"Code view",flex:1,style:"direction: ltr; text-align: left",classes:"monospace",value:c,autofocus:!0}],onSubmit:function(e){
t.insertCodeSample(r,e.data.language,e.data.code)}})}}}),i("3",["8","9"],function(e,t){return{register:function(n){n.addCommand("codesample",function(){var r=n.selection.getNode();n.selection.isCollapsed()||t.isCodeSample(r)?e.open(n):n.formatter.toggle("code")})}}}),i("4",["a","9"],function(e,t){return{setup:function(n){var r=n.$;n.on("PreProcess",function(e){r("pre[contenteditable=false]",e.node).filter(t.trimArg(t.isCodeSample)).each(function(e,t){var n=r(t),o=t.textContent;n.attr("class",r.trim(n.attr("class"))),n.removeAttr("contentEditable"),n.empty().append(r("<code></code>").each(function(){this.textContent=o}))})}),n.on("SetContent",function(){var o=r("pre").filter(t.trimArg(t.isCodeSample)).filter(function(e,t){return"false"!==t.contentEditable});o.length&&n.undoManager.transact(function(){o.each(function(t,o){r(o).find("br").each(function(e,t){t.parentNode.replaceChild(n.getDoc().createTextNode("\n"),t)}),o.contentEditable=!1,o.innerHTML=n.dom.encode(o.textContent),e.highlightElement(o),o.className=r.trim(o.className)})})})}}}),i("5",["b"],function(e){return{loadCss:function(t,n,r,o){var i,a=e.getContentCss(t);t.inline&&r.get()||!t.inline&&o.get()||(t.inline?r.set(!0):o.set(!0),!1!==a&&(i=t.dom.create("link",{rel:"stylesheet",href:a||n+"/css/prism.css"}),t.getDoc().getElementsByTagName("head")[0].appendChild(i)))}}}),i("6",[],function(){return{register:function(e){e.addButton("codesample",{cmd:"codesample",title:"Insert/Edit code sample"}),e.addMenuItem("codesample",{cmd:"codesample",text:"Code sample",icon:"codesample"})}}}),i("0",["1","2","3","4","5","6"],function(e,t,n,r,o,i){var a=e(!1);return t.add("codesample",function(t,u){var c=e(!1);r.setup(t),i.register(t),n.register(t),t.on("init",function(){o.loadCss(t,u,a,c)})}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Color",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Color")}),i("tinymce.plugins.colorpicker.ui.Dialog",["tinymce.core.util.Color"],function(e){var t=function(e,t){e.find("#preview")[0].getEl().style.background=t},n=function(n,r){var o=new e(r),i=o.toRgb();n.fromJSON({r:i.r,g:i.g,b:i.b,hex:o.toHex().substr(1)}),t(n,o.toHex())};return{open:function(e,r,o){var i=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();i&&(i.find("#r").value(e.r),i.find("#g").value(e.g),i.find("#b").value(e.b),i.find("#hex").value(this.value().substr(1)),t(i,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,r=i.find("colorpicker")[0];if(e=this.name(),t=this.value(),"hex"===e)return t="#"+t,n(i,t),void r.value(t);t={r:i.find("#r").value(),g:i.find("#g").value(),b:i.find("#b").value()},r.value(t),n(i,t)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){r("#"+i.toJSON().hex)}});n(i,o)}}}),i("tinymce.plugins.colorpicker.Plugin",["tinymce.core.PluginManager","tinymce.plugins.colorpicker.ui.Dialog"],function(e,t){return e.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(n,r){t.open(e,n,r)})}),function(){}}),r("tinymce.plugins.colorpicker.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),i("4",["3"],function(e){return e("tinymce.util.Color")}),i("2",["4"],function(e){var t=function(e,t){e.find("#preview")[0].getEl().style.background=t},n=function(n,r){var o=new e(r),i=o.toRgb();n.fromJSON({r:i.r,g:i.g,b:i.b,hex:o.toHex().substr(1)}),t(n,o.toHex())};return{open:function(e,r,o){var i=e.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:o,onchange:function(){var e=this.rgb();i&&(i.find("#r").value(e.r),i.find("#g").value(e.g),i.find("#b").value(e.b),i.find("#hex").value(this.value().substr(1)),t(i,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var e,t,r=i.find("colorpicker")[0];return e=this.name(),t=this.value(),"hex"===e?(t="#"+t,n(i,t),void r.value(t)):(t={r:i.find("#r").value(),g:i.find("#g").value(),b:i.find("#b").value()},r.value(t),void n(i,t))}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){r("#"+i.toJSON().hex)}});n(i,o)}}}),i("0",["1","2"],function(e,t){return e.add("colorpicker",function(e){e.settings.color_picker_callback||(e.settings.color_picker_callback=function(n,r){t.open(e,n,r)})}),function(){}}),r("0")()}(),function(e){function t(){}function n(e){!i&&window&&window.console&&(i=!0,console.log("Deprecated TinyMCE API call: "+e))}function r(e,r,o,i){e=e||this;var a=[];if(!r)return void(this.add=this.addToTop=this.remove=this.dispatch=t);this.add=function(t,u,c){function s(n){var a=[];if("string"==typeof o&&(o=o.split(" ")),o&&"function"!=typeof o)for(var c=0;c<o.length;c++)a.push(n[o[c]]);("function"!=typeof o||(a=o(r,n,e)))&&(o||(a=[n]),a.unshift(i||e),!1===t.apply(u||i||e,a)&&n.stopImmediatePropagation())}n("<target>.on"+r+".add(..)"),e.on(r,s,c);var l={original:t,patched:s};return a.push(l),s},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(t){return a.forEach(function(n,o){if(n.original===t)return a.splice(o,1),e.off(r,n.patched)}),e.off(r,t)},this.dispatch=function(){return e.fire(r),!0}}function o(o){function i(t){var n=o.settings.language||"en",r=[n,t].join("."),i=e.i18n.translate(r);return r!==i?i:e.i18n.translate(t)}function a(t,n){e.each(t.split(" "),function(e){o["on"+e]=new r(o,e,n)})}function u(e,t,n){return[t.level,n]}function c(e){return function(t,n){if(!n.selection&&!e||n.selection==e)return[n]}}function s(){function t(){return s()}var r={};return n("editor.controlManager.*"),e.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),function(e){r[e]=t}),r}if(!o.controlManager){o.controlManager={buttons:{},setDisabled:function(e,t){n("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive:function(e,t){n("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:new r,onPostRender:new r,add:function(e){return e},createButton:s,createColorSplitButton:s,createControl:s,createDropMenu:s,createListBox:s,createMenuButton:s,createSeparator:s,createSplitButton:s,createToolbar:s,createToolbarGroup:s,destroy:t,get:t,setControlType:s},a("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),a("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),a("BeforeExecCommand ExecCommand","command ui value args"),a("PreProcess PostProcess LoadContent SaveContent Change"),a("BeforeSetContent BeforeGetContent SetContent GetContent",c(!1)),a("SetProgressState","state time"),a("VisualAid","element hasVisual"),a("Undo Redo",u),a("NodeChange",function(e,t){return[o.controlManager,t.element,o.selection.isCollapsed(),t]});var l=o.addButton;o.addButton=function(e,t){function n(){if(o.controlManager.buttons[e]=this,r)return r.apply(this,arguments)}var r;for(var a in t)"onpostrender"===a.toLowerCase()&&(r=t[a],t.onPostRender=n);return r||(t.onPostRender=n),t.title&&(t.title=i(t.title)),l.call(this,e,t)},o.on("init",function(){var e=o.undoManager,t=o.selection;e.onUndo=new r(o,"Undo",u,null,e),e.onRedo=new r(o,"Redo",u,null,e),e.onBeforeAdd=new r(o,"BeforeAddUndo",null,e),e.onAdd=new r(o,"AddUndo",null,e),t.onBeforeGetContent=new r(o,"BeforeGetContent",c(!0),t),t.onGetContent=new r(o,"GetContent",c(!0),t),t.onBeforeSetContent=new r(o,"BeforeSetContent",c(!0),t),t.onSetContent=new r(o,"SetContent",c(!0),t)}),o.on("BeforeRenderUI",function(){var t=o.windowManager;t.onOpen=new r,t.onClose=new r,t.createInstance=function(t,r,o,i,a,u){return n("windowManager.createInstance(..)"),new(e.resolve(t))(r,o,i,a,u)}})}}var i;e.util.Dispatcher=r,e.onBeforeUnload=new r(e,"BeforeUnload"),e.onAddEditor=new r(e,"AddEditor","editor"),e.onRemoveEditor=new r(e,"RemoveEditor","editor"),e.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},e.on("SetupEditor",o),e.PluginManager.add("compat3x",o),e.addI18n=function(t,n){var r=e.util.I18n,o=e.each;if("string"==typeof t&&-1===t.indexOf("."))return void r.add(t,n);e.is(t,"string")?o(n,function(e,n){r.data[t+"."+n]=e}):o(t,function(e,t){o(e,function(e,n){o(e,function(e,o){"common"===n?r.data[t+"."+o]=e:r.data[t+"."+n+"."+o]=e})})})}}(tinymce),function(e){function t(){}function n(e){!i&&window&&window.console&&(i=!0,console.log("Deprecated TinyMCE API call: "+e))}function r(e,r,o,i){e=e||this;var a=[];return r?(this.add=function(t,u,c){function s(n){var a=[];if("string"==typeof o&&(o=o.split(" ")),o&&"function"!=typeof o)for(var c=0;c<o.length;c++)a.push(n[o[c]]);("function"!=typeof o||(a=o(r,n,e)))&&(o||(a=[n]),a.unshift(i||e),!1===t.apply(u||i||e,a)&&n.stopImmediatePropagation())}n("<target>.on"+r+".add(..)"),e.on(r,s,c);var l={original:t,patched:s};return a.push(l),s},this.addToTop=function(e,t){this.add(e,t,!0)},this.remove=function(t){return a.forEach(function(n,o){if(n.original===t)return a.splice(o,1),e.off(r,n.patched)}),e.off(r,t)},void(this.dispatch=function(){return e.fire(r),!0})):void(this.add=this.addToTop=this.remove=this.dispatch=t)}function o(o){function i(t){var n=o.settings.language||"en",r=[n,t].join("."),i=e.i18n.translate(r);return r!==i?i:e.i18n.translate(t)}function a(t,n){e.each(t.split(" "),function(e){o["on"+e]=new r(o,e,n)})}function u(e,t,n){return[t.level,n]}function c(e){return function(t,n){if(!n.selection&&!e||n.selection==e)return[n]}}function s(){function t(){return s()}var r={};return n("editor.controlManager.*"),e.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),function(e){r[e]=t}),r}if(!o.controlManager){o.controlManager={buttons:{},setDisabled:function(e,t){n("controlManager.setDisabled(..)"),this.buttons[e]&&this.buttons[e].disabled(t)},setActive:function(e,t){n("controlManager.setActive(..)"),this.buttons[e]&&this.buttons[e].active(t)},onAdd:new r,onPostRender:new r,add:function(e){return e},createButton:s,createColorSplitButton:s,createControl:s,createDropMenu:s,createListBox:s,createMenuButton:s,createSeparator:s,createSplitButton:s,createToolbar:s,createToolbarGroup:s,destroy:t,get:t,setControlType:s},a("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),a("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),a("BeforeExecCommand ExecCommand","command ui value args"),a("PreProcess PostProcess LoadContent SaveContent Change"),a("BeforeSetContent BeforeGetContent SetContent GetContent",c(!1)),a("SetProgressState","state time"),a("VisualAid","element hasVisual"),a("Undo Redo",u),a("NodeChange",function(e,t){return[o.controlManager,t.element,o.selection.isCollapsed(),t]});var l=o.addButton;o.addButton=function(e,t){function n(){if(o.controlManager.buttons[e]=this,r)return r.apply(this,arguments)}var r;for(var a in t)"onpostrender"===a.toLowerCase()&&(r=t[a],t.onPostRender=n);return r||(t.onPostRender=n),t.title&&(t.title=i(t.title)),l.call(this,e,t)},o.on("init",function(){var e=o.undoManager,t=o.selection;e.onUndo=new r(o,"Undo",u,null,e),e.onRedo=new r(o,"Redo",u,null,e),e.onBeforeAdd=new r(o,"BeforeAddUndo",null,e),e.onAdd=new r(o,"AddUndo",null,e),t.onBeforeGetContent=new r(o,"BeforeGetContent",c(!0),t),t.onGetContent=new r(o,"GetContent",c(!0),t),t.onBeforeSetContent=new r(o,"BeforeSetContent",c(!0),t),t.onSetContent=new r(o,"SetContent",c(!0),t)}),o.on("BeforeRenderUI",function(){var t=o.windowManager;t.onOpen=new r,t.onClose=new r,t.createInstance=function(t,r,o,i,a,u){return n("windowManager.createInstance(..)"),new(e.resolve(t))(r,o,i,a,u)}})}}var i;e.util.Dispatcher=r,e.onBeforeUnload=new r(e,"BeforeUnload"),e.onAddEditor=new r(e,"AddEditor","editor"),e.onRemoveEditor=new r(e,"RemoveEditor","editor"),e.util.Cookie={get:t,getHash:t,remove:t,set:t,setHash:t},e.on("SetupEditor",o),e.PluginManager.add("compat3x",o),e.addI18n=function(t,n){var r=e.util.I18n,o=e.each;return"string"==typeof t&&-1===t.indexOf(".")?void r.add(t,n):void(e.is(t,"string")?o(n,function(e,n){r.data[t+"."+n]=e}):o(t,function(e,t){o(e,function(e,n){o(e,function(e,o){"common"===n?r.data[t+"."+o]=e:r.data[t+"."+n+"."+o]=e})})}))}}(tinymce);var tinymce,tinyMCE,tinyMCEPopup={init:function(){var e,t,n,r=this;e=r.getWin(),tinymce=tinyMCE=e.tinymce,r.editor=tinymce.EditorManager.activeEditor,r.params=r.editor.windowManager.getParams(),n=r.editor.windowManager.windows[r.editor.windowManager.windows.length-1],r.features=n.features,r.uiWindow=n,t=r.editor.settings,!1!==t.popup_css&&(t.popup_css?t.popup_css=r.editor.documentBaseURI.toAbsolute(t.popup_css):t.popup_css=r.editor.baseURI.toAbsolute("plugins/compat3x/css/dialog.css")),t.popup_css_add&&(t.popup_css+=","+r.editor.documentBaseURI.toAbsolute(t.popup_css_add)),r.dom=r.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:!0,proxy:tinyMCEPopup._eventProxy}),r.dom.bind(window,"ready",r._onDOMLoaded,r),!1!==r.features.popup_css&&r.dom.loadCSS(r.features.popup_css||r.editor.settings.popup_css),r.listeners=[],r.onInit={add:function(e,t){r.listeners.push({func:e,scope:t})}},r.isWindow=!r.getWindowArg("mce_inline"),r.id=r.getWindowArg("mce_window_id")},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(e,t){var n=this.params[e];return tinymce.is(n)?n:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,r){return r=r||{},r.skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,r)},resizeToInnerSize:function(){},executeOnLoad:function(evil){this.onInit.add(function(){eval(evil)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var e=tinyMCEPopup;!e.isWindow&&tinymce.isIE&&e.editor.selection.moveToBookmark(e.editor.windowManager.bookmark)},requireLangPack:function(){var e,t=this,n=t.getWindowArg("plugin_url")||t.getWindowArg("theme_url"),r=t.editor.settings;!1!==r.language&&(e=r.language||"en"),n&&e&&!1!==t.features.translate_i18n&&!1!==r.language_load&&(n+="/langs/"+e+"_dlg.js",tinymce.ScriptLoader.isDone(n)||(document.write('<script type="text/javascript" src="'+n+'"></script>'),tinymce.ScriptLoader.markDone(n)))},pickColor:function(e,t){var n=document.getElementById(t),r=this.editor.settings.color_picker_callback;r&&r.call(this.editor,function(e){n.value=e;try{n.onchange()}catch(e){}},n.value)},openBrowser:function(e,t){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){function e(){t.editor.windowManager.close(window),tinymce=tinyMCE=t.editor=t.params=t.dom=t.dom.doc=null}var t=this;tinymce.isOpera?t.getWin().setTimeout(e,0):e()},_restoreSelection:function(){var e=window.event.srcElement;"INPUT"!=e.nodeName||"submit"!=e.type&&"button"!=e.type||tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var e,t,n=tinyMCEPopup,r=document.title;if(!1!==n.features.translate_i18n){var o={update:"Ok",insert:"Ok",cancel:"Cancel",not_set:"--",class_name:"Class name",browse:"Browse"},i=(tinymce.settings?tinymce.settings:n.editor.settings).language||"en";for(var a in o)tinymce.i18n.data[i+"."+a]=tinymce.i18n.translate(o[a]);e=document.body.innerHTML,tinymce.isIE&&(e=e.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=n.editor.getParam("directionality",""),(t=n.editor.translate(e))&&t!=e&&(document.body.innerHTML=t),(t=n.editor.translate(r))&&t!=r&&(document.title=r=t)}n.editor.getParam("browser_preferred_colors",!1)&&n.isWindow||n.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.Env.ie&&(tinymce.Env.ie<11?(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),n.dom.add(n.dom.select("head")[0],"base",{target:"_self"})):document.addEventListener("mouseup",tinyMCEPopup._restoreSelection,!1)),n.restoreSelection(),n.resizeToInnerSize(),n.isWindow?window.focus():n.editor.windowManager.setTitle(window,r),tinymce.isIE||n.isWindow||n.dom.bind(document,"focus",function(){n.editor.windowManager.focus(n.id)}),tinymce.each(n.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(n.listeners,function(e){e.func.call(e.scope,n.editor)}),n.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(e){tinymce.each(e.elements,function(e){if(n.dom.hasClass(e,"mceFocus")&&!e.disabled)return e.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler,"textContent"in document?n.uiWindow.getEl("head").firstChild.textContent=document.title:n.uiWindow.getEl("head").firstChild.innerText=document.title},_accessHandler:function(e){if(e=e||window.event,13==e.keyCode||32==e.keyCode){var t=e.target||e.srcElement;return t.onchange&&t.onchange(),tinymce.dom.Event.cancel(e)}},_closeWinKeyHandler:function(e){e=e||window.event,27==e.keyCode&&tinyMCEPopup.close()},_eventProxy:function(e){return function(t){tinyMCEPopup.dom.events.callNativeHandler(e,t)}}};tinyMCEPopup.init(),tinymce.util.Dispatcher=function(e){this.scope=e||this,this.listeners=[],this.add=function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},this.addToTop=function(e,t){var n=this,r={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[r].concat(n.listeners):n.listeners.unshift(r),e},this.remove=function(e){var t=this.listeners,n=null;return tinymce.each(t,function(r,o){if(e==r.cb)return n=r,t.splice(o,1),!1}),n},this.dispatch=function(){var e,t,n,r=this,o=arguments,i=r.listeners;for(r.inDispatch=!0,t=0;t<i.length&&(n=i[t],!1!==(e=n.cb.apply(n.scope,o.length>0?o:[n.scope])));t++);return r.inDispatch=!1,e}};var TinyMCE_EditableSelects={editSelectElm:null,init:function(){var e,t,n=document.getElementsByTagName("select");document;for(e=0;e<n.length;e++)-1!=n[e].className.indexOf("mceEditableSelect")&&(t=new Option(tinyMCEPopup.editor.translate("value"),"__mce_add_custom__"),t.className="mceAddSelectValue",n[e].options[n[e].options.length]=t,n[e].onchange=TinyMCE_EditableSelects.onChangeEditableSelect)},onChangeEditableSelect:function(e){var t,n=document,r=window.event?window.event.srcElement:e.target;"__mce_add_custom__"==r.options[r.selectedIndex].value&&(t=n.createElement("input"),t.id=r.id+"_custom",t.name=r.name+"_custom",t.type="text",t.style.width=r.offsetWidth+"px",r.parentNode.insertBefore(t,r),r.style.display="none",t.focus(),t.onblur=TinyMCE_EditableSelects.onBlurEditableSelectInput,t.onkeydown=TinyMCE_EditableSelects.onKeyDown,TinyMCE_EditableSelects.editSelectElm=r)},onBlurEditableSelectInput:function(){var e=TinyMCE_EditableSelects.editSelectElm;e&&(""!=e.previousSibling.value?(addSelectValue(document.forms[0],e.id,e.previousSibling.value,e.previousSibling.value),selectByValue(document.forms[0],e.id,e.previousSibling.value)):selectByValue(document.forms[0],e.id,""),e.style.display="inline",e.parentNode.removeChild(e.previousSibling),TinyMCE_EditableSelects.editSelectElm=null)},onKeyDown:function(e){e=e||window.event,13==e.keyCode&&TinyMCE_EditableSelects.onBlurEditableSelectInput()}},themeBaseURL=tinyMCEPopup.editor.baseURI.toAbsolute("themes/"+tinyMCEPopup.getParam("theme"));MCTabs.prototype.init=function(e){this.settings=e},MCTabs.prototype.getParam=function(e,t){var n=null;return n="undefined"==typeof this.settings[e]?t:this.settings[e],"true"==n||"false"==n?"true"==n:n},MCTabs.prototype.showTab=function(e){e.className="current",e.setAttribute("aria-selected",!0),e.setAttribute("aria-expanded",!0),e.tabIndex=0},MCTabs.prototype.hideTab=function(e){e.className="",e.setAttribute("aria-selected",!1),e.setAttribute("aria-expanded",!1),e.tabIndex=-1},MCTabs.prototype.showPanel=function(e){e.className="current",e.setAttribute("aria-hidden",!1)},MCTabs.prototype.hidePanel=function(e){e.className="panel",e.setAttribute("aria-hidden",!0)},MCTabs.prototype.getPanelForTab=function(e){return tinyMCEPopup.dom.getAttrib(e,"aria-controls")},MCTabs.prototype.displayTab=function(e,t,n){var r,o,i,a,u,c,s=this;if(i=document.getElementById(e),t===undefined&&(t=s.getPanelForTab(i)),r=document.getElementById(t),o=r?r.parentNode:null,a=i?i.parentNode:null,s.getParam("selection_class","current"),i&&a){for(u=a.childNodes,c=0;c<u.length;c++)"LI"==u[c].nodeName&&s.hideTab(u[c]);s.showTab(i)}if(r&&o){for(u=o.childNodes,c=0;c<u.length;c++)"DIV"==u[c].nodeName&&s.hidePanel(u[c]);n||i.focus(),s.showPanel(r)}},MCTabs.prototype.getAnchor=function(){var e,t=document.location.href;return-1!=(e=t.lastIndexOf("#"))?t.substring(e+1):""};var mcTabs=new MCTabs;tinyMCEPopup.onInit.add(function(){var e=tinyMCEPopup.getWin().tinymce,t=tinyMCEPopup.dom,n=e.each;n(t.select("div.tabs"),function(r){t.setAttrib(r,"role","tablist");var o=tinyMCEPopup.dom.select("li",r),i=function(e){mcTabs.displayTab(e,mcTabs.getPanelForTab(e)),mcTabs.onChange.dispatch(e)};n(o,function(e){t.setAttrib(e,"role","tab"),t.bind(e,"click",function(){i(e.id)})}),t.bind(t.getRoot(),"keydown",function(t){9===t.keyCode&&t.ctrlKey&&!t.altKey&&e.dom.Event.cancel(t)}),n(t.select("a",r),function(e){t.setAttrib(e,"tabindex","-1")})})});var Validator={isEmail:function(e){return this.test(e,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(e){return this.test(e,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(e){return this.test(e,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(e){return this.test(e,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(e){var t,n;if("SELECT"==e.nodeName&&e.selectedIndex<1)return!0;if("checkbox"==e.type&&!e.checked)return!0;if("radio"==e.type){for(n=0,t=e.form.elements;n<t.length;n++)if("radio"==t[n].type&&t[n].name==e.name&&t[n].checked)return!1;return!0}return new RegExp("^\\s*$").test(1==e.nodeType?e.value:e)},isNumber:function(e,t){return!(isNaN(1==e.nodeType?e.value:e)||t&&this.test(e,"^-?[0-9]*\\.[0-9]*$"))},test:function(e,t){return""==(e=1==e.nodeType?e.value:e)||new RegExp(t).test(e)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(e){var t;for(t in e)this.settings[t]=e[t]},validate:function(e){var t,n,r=this.settings,o=0;for(n=this.tags(e,"label"),t=0;t<n.length;t++)this.removeClass(n[t],r.invalid_cls),n[t].setAttribute("aria-invalid",!1);return o+=this.validateElms(e,"input"),o+=this.validateElms(e,"select"),3==(o+=this.validateElms(e,"textarea"))},invalidate:function(e){this.mark(e.form,e)},getErrorMessages:function(e){var t,n,r,o,i=this.settings,a=[],u=tinyMCEPopup.editor;for(t=this.tags(e,"label"),n=0;n<t.length;n++)this.hasClass(t[n],i.invalid_cls)&&(r=document.getElementById(t[n].getAttribute("for")),o={field:t[n].textContent},this.hasClass(r,i.min_cls,!0)?(message=u.getLang("invalid_data_min"),o.min=this.getNum(r,i.min_cls)):this.hasClass(r,i.number_cls)?message=u.getLang("invalid_data_number"):this.hasClass(r,i.size_cls)?message=u.getLang("invalid_data_size"):message=u.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(e,t){return o[t]||"{#"+t+"}"}),a.push(message));return a},reset:function(e){var t,n,r,o=["label","input","select","textarea"],i=this.settings;if(null!=e)for(t=0;t<o.length;t++)for(r=this.tags(e.form?e.form:e,o[t]),n=0;n<r.length;n++)this.removeClass(r[n],i.invalid_cls),r[n].setAttribute("aria-invalid",!1)},validateElms:function(e,t){var n,r,o,i,a=this.settings,u=!0,c=Validator;for(n=this.tags(e,t),r=0;r<n.length;r++)o=n[r],this.removeClass(o,a.invalid_cls),this.hasClass(o,a.required_cls)&&c.isEmpty(o)&&(u=this.mark(e,o)),this.hasClass(o,a.number_cls)&&!c.isNumber(o)&&(u=this.mark(e,o)),this.hasClass(o,a.int_cls)&&!c.isNumber(o,!0)&&(u=this.mark(e,o)),this.hasClass(o,a.url_cls)&&!c.isAbsUrl(o)&&(u=this.mark(e,o)),this.hasClass(o,a.email_cls)&&!c.isEmail(o)&&(u=this.mark(e,o)),this.hasClass(o,a.size_cls)&&!c.isSize(o)&&(u=this.mark(e,o)),this.hasClass(o,a.id_cls)&&!c.isId(o)&&(u=this.mark(e,o)),this.hasClass(o,a.min_cls,!0)&&(i=this.getNum(o,a.min_cls),(isNaN(i)||parseInt(o.value)<parseInt(i))&&(u=this.mark(e,o))),this.hasClass(o,a.max_cls,!0)&&(i=this.getNum(o,a.max_cls),(isNaN(i)||parseInt(o.value)>parseInt(i))&&(u=this.mark(e,o)));return u},hasClass:function(e,t,n){return new RegExp("\\b"+t+(n?"[0-9]+":"")+"\\b","g").test(e.className)},getNum:function(e,t){return t=e.className.match(new RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t=t.replace(/[^0-9]/g,"")},addClass:function(e,t,n){var r=this.removeClass(e,t);e.className=n?t+(""!==r?" "+r:""):(""!==r?r+" ":"")+t},removeClass:function(e,t){return t=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),e.className=" "!==t?t:""},tags:function(e,t){return e.getElementsByTagName(t)},mark:function(e,t){var n=this.settings;return this.addClass(t,n.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(e,t,n.invalid_cls),!1},markLabels:function(e,t,n){var r,o;for(r=this.tags(e,"label"),o=0;o<r.length;o++)r[o].getAttribute("for")!=t.id&&r[o].htmlFor!=t.id||this.addClass(r[o],n);return null}};!function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.contextmenu.api.Api",[],function(){return{get:function(e){return{isContextMenuVisible:function(){return e.get()}}}}}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.plugins.contextmenu.api.Settings",[],function(){return{shouldNeverUseNative:function(e){return e.settings.contextmenu_never_use_native},getContextMenu:function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}}}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{
pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("tinymce.plugins.contextmenu.core.RangePoint",["ephox.katamari.api.Arr"],function(e){var t=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t(o,n,r)},!1)}}}),i("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.contextmenu.ui.ContextMenu",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.plugins.contextmenu.api.Settings"],function(e,t,n){var r=function(r,o){var i,a,u=[];a=n.getContextMenu(r),t.each(a.split(/[ ,]/),function(e){var t=r.menuItems[e];"|"===e&&(t={text:e}),t&&(t.shortcut="",u.push(t))});for(var c=0;c<u.length;c++)"|"===u[c].text&&(0!==c&&c!==u.length-1||u.splice(c,1));return i=e.create("menu",{items:u,context:"contextmenu",classes:"contextmenu"}).renderTo(),i.on("hide",function(e){e.control===this&&o.set(!1)}),r.on("remove",function(){i.remove(),i=null}),i};return{show:function(e,t,n,o,i){null===i.get()?i.set(r(e,o)):i.get().show(),i.get().moveTo(t,n),o.set(!0)}}}),i("tinymce.plugins.contextmenu.core.Bind",["tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.plugins.contextmenu.api.Settings","tinymce.plugins.contextmenu.core.RangePoint","tinymce.plugins.contextmenu.ui.ContextMenu"],function(e,t,n,r,o){var i=function(e,t){return t.ctrlKey&&!n.shouldNeverUseNative(e)},a=function(){return t.mac&&t.webkit},u=function(e){return e&&"IMG"===e.nodeName},c=function(e,t){return u(e.target)&&!1===r.isXYWithinRange(e.clientX,e.clientY,t)};return{setup:function(t,n,r){t.on("mousedown",function(e){a()&&2===e.button&&!i(t,e)&&t.selection.isCollapsed()&&t.once("contextmenu",function(e){u(e.target)||t.selection.placeCaretAt(e.clientX,e.clientY)})}),t.on("contextmenu",function(a){var u=a.pageX,s=a.pageY;if(!t.inline){var l=e.DOM.getPos(t.getContentAreaContainer());u=l.x+a.clientX,s=l.y+a.clientY}i(t,a)||(c(a,t.selection.getRng())&&t.selection.select(a.target),a.preventDefault(),o.show(t,u,s,n,r))})}}}),i("tinymce.plugins.contextmenu.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.contextmenu.api.Api","tinymce.plugins.contextmenu.core.Bind"],function(e,t,n,r){return t.add("contextmenu",function(t){var o=e(null),i=e(!1);return r.setup(t,i,o),n.get(i)}),function(){}}),r("tinymce.plugins.contextmenu.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("5",tinymce.util.Tools.resolve),i("2",["5"],function(e){return e("tinymce.PluginManager")}),i("3",[],function(){return{get:function(e){return{isContextMenuVisible:function(){return e.get()}}}}}),i("6",["5"],function(e){return e("tinymce.dom.DOMUtils")}),i("7",["5"],function(e){return e("tinymce.Env")}),i("8",[],function(){return{shouldNeverUseNative:function(e){return e.settings.contextmenu_never_use_native},getContextMenu:function(e){return e.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}}}),a("f",Array),a("g",Error),i("i",["f","g"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("j",Object),i("e",["i","j"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),a("h",String),i("b",["e","f","g","h"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("9",["b"],function(e){var t=function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom};return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t(o,n,r)},!1)}}}),i("c",["5"],function(e){return e("tinymce.ui.Factory")}),i("d",["5"],function(e){return e("tinymce.util.Tools")}),i("a",["c","d","8"],function(e,t,n){var r=function(r,o){var i,a,u=[];a=n.getContextMenu(r),t.each(a.split(/[ ,]/),function(e){var t=r.menuItems[e];"|"===e&&(t={text:e}),t&&(t.shortcut="",u.push(t))});for(var c=0;c<u.length;c++)"|"===u[c].text&&(0!==c&&c!==u.length-1||u.splice(c,1));return i=e.create("menu",{items:u,context:"contextmenu",classes:"contextmenu"}).renderTo(),i.on("hide",function(e){e.control===this&&o.set(!1)}),r.on("remove",function(){i.remove(),i=null}),i};return{show:function(e,t,n,o,i){null===i.get()?i.set(r(e,o)):i.get().show(),i.get().moveTo(t,n),o.set(!0)}}}),i("4",["6","7","8","9","a"],function(e,t,n,r,o){var i=function(e,t){return t.ctrlKey&&!n.shouldNeverUseNative(e)},a=function(){return t.mac&&t.webkit},u=function(e){return e&&"IMG"===e.nodeName},c=function(e,t){return u(e.target)&&!1===r.isXYWithinRange(e.clientX,e.clientY,t)};return{setup:function(t,n,r){t.on("mousedown",function(e){a()&&2===e.button&&!i(t,e)&&t.selection.isCollapsed()&&t.once("contextmenu",function(e){u(e.target)||t.selection.placeCaretAt(e.clientX,e.clientY)})}),t.on("contextmenu",function(a){var u=a.pageX,s=a.pageY;if(!t.inline){var l=e.DOM.getPos(t.getContentAreaContainer());u=l.x+a.clientX,s=l.y+a.clientY}i(t,a)||(c(a,t.selection.getRng())&&t.selection.select(a.target),a.preventDefault(),o.show(t,u,s,n,r))})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return t.add("contextmenu",function(t){var o=e(null),i=e(!1);return r.setup(t,i,o),n.get(i)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.directionality.core.Direction",["tinymce.core.util.Tools"],function(e){return{setDir:function(t,n){var r,o=t.dom,i=t.selection.getSelectedBlocks();i.length&&(r=o.getAttrib(i[0],"dir"),e.each(i,function(e){o.getParent(e.parentNode,'*[dir="'+n+'"]',o.getRoot())||o.setAttrib(e,"dir",r!==n?n:null)}),t.nodeChanged())}}}),i("tinymce.plugins.directionality.api.Commands",["tinymce.plugins.directionality.core.Direction"],function(e){return{register:function(t){t.addCommand("mceDirectionLTR",function(){e.setDir(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){e.setDir(t,"rtl")})}}}),i("tinymce.plugins.directionality.ui.Buttons",["tinymce.core.util.Tools"],function(e){var t=function(t){var n=[];return e.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(e){n.push(e+"[dir="+t+"]")}),n.join(",")};return{register:function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:t("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:t("rtl")})}}}),i("tinymce.plugins.directionality.Plugin",["tinymce.core.PluginManager","tinymce.plugins.directionality.api.Commands","tinymce.plugins.directionality.ui.Buttons"],function(e,t,n){return e.add("directionality",function(e){t.register(e),n.register(e)}),function(){}}),r("tinymce.plugins.directionality.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("6",["4"],function(e){return e("tinymce.util.Tools")}),i("5",["6"],function(e){return{setDir:function(t,n){var r,o=t.dom,i=t.selection.getSelectedBlocks();i.length&&(r=o.getAttrib(i[0],"dir"),e.each(i,function(e){o.getParent(e.parentNode,'*[dir="'+n+'"]',o.getRoot())||o.setAttrib(e,"dir",r!==n?n:null)}),t.nodeChanged())}}}),i("2",["5"],function(e){return{register:function(t){t.addCommand("mceDirectionLTR",function(){e.setDir(t,"ltr")}),t.addCommand("mceDirectionRTL",function(){e.setDir(t,"rtl")})}}}),i("3",["6"],function(e){var t=function(t){var n=[];return e.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(e){n.push(e+"[dir="+t+"]")}),n.join(",")};return{register:function(e){e.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:t("ltr")}),e.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:t("rtl")})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("directionality",function(e){t.register(e),n.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.emoticons.ui.PanelHtml",["tinymce.core.util.Tools"],function(e){var t=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];return{getHtml:function(n){var r;return r='<table role="list" class="mce-grid">',e.each(t,function(t){r+="<tr>",e.each(t,function(e){var t=n+"/img/smiley-"+e+".gif";r+='<td><a href="#" data-mce-url="'+t+'" data-mce-alt="'+e+'" tabindex="-1" role="option" aria-label="'+e+'"><img src="'+t+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),r+="</tr>"}),r+="</table>"}}}),i("tinymce.plugins.emoticons.ui.Buttons",["tinymce.plugins.emoticons.ui.PanelHtml"],function(e){var t=function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))};return{register:function(n,r){var o=e.getHtml(r);n.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:o,onclick:function(e){var r=n.dom.getParent(e.target,"a");r&&(t(n,r.getAttribute("data-mce-url"),r.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})}}}),i("tinymce.plugins.emoticons.Plugin",["tinymce.core.PluginManager","tinymce.plugins.emoticons.ui.Buttons"],function(e,t){return e.add("emoticons",function(e,n){t.register(e,n)}),function(){}}),r("tinymce.plugins.emoticons.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),i("5",["3"],function(e){return e("tinymce.util.Tools")}),i("4",["5"],function(e){var t=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]];return{getHtml:function(n){var r;return r='<table role="list" class="mce-grid">',e.each(t,function(t){r+="<tr>",e.each(t,function(e){var t=n+"/img/smiley-"+e+".gif";r+='<td><a href="#" data-mce-url="'+t+'" data-mce-alt="'+e+'" tabindex="-1" role="option" aria-label="'+e+'"><img src="'+t+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),r+="</tr>"}),r+="</table>"}}}),i("2",["4"],function(e){var t=function(e,t,n){e.insertContent(e.dom.createHTML("img",{src:t,alt:n}))};return{register:function(n,r){var o=e.getHtml(r);n.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:o,onclick:function(e){var r=n.dom.getParent(e.target,"a");r&&(t(n,r.getAttribute("data-mce-url"),r.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})}}}),i("0",["1","2"],function(e,t){return e.add("emoticons",function(e,n){t.register(e,n)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),i("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),i("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),i("tinymce.plugins.fullpage.api.Settings",[],function(){return{shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}}}),i("tinymce.plugins.fullpage.core.Parser",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.fullpage.api.Settings"],function(e,t,n,r,o){var i=function(t){return new e({validate:!1,root_name:"#document"}).parse(t)};return{parseHeader:i,htmlToData:function(e,t){function n(e,t){return e.attr(t)||""}var a,u,c=i(t),s={};return s.fontface=o.getDefaultFontFamily(e),s.fontsize=o.getDefaultFontSize(e),a=c.firstChild,7===a.type&&(s.xml_pi=!0,(u=/encoding="([^"]+)"/.exec(a.value))&&(s.docencoding=u[1])),a=c.getAll("#doctype")[0],a&&(s.doctype="<!DOCTYPE"+a.value+">"),a=c.getAll("title")[0],a&&a.firstChild&&(s.title=a.firstChild.value),r.each(c.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?s[n.toLowerCase()]=e.attr("content"):"Content-Type"===r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(s.docencoding=t[1])}),a=c.getAll("html")[0],a&&(s.langcode=n(a,"lang")||n(a,"xml:lang")),s.stylesheets=[],r.each(c.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&s.stylesheets.push(e.attr("href"))}),a=c.getAll("body")[0],a&&(s.langdir=n(a,"dir"),s.style=n(a,"style"),s.visited_color=n(a,"vlink"),s.link_color=n(a,"link"),s.active_color=n(a,"alink")),s},dataToHtml:function(e,o,a){function u(e,t,n){e.attr(t,n||undefined)}function c(e){l.firstChild?l.insert(e,l.firstChild):l.append(e)}var s,l,f,d,p,m=e.dom;s=i(a),l=s.getAll("head")[0],l||(d=s.getAll("html")[0],l=new t("head",1),d.firstChild?d.insert(l,d.firstChild,!0):d.append(l)),d=s.firstChild,o.xml_pi?(p='version="1.0"',o.docencoding&&(p+=' encoding="'+o.docencoding+'"'),7!==d.type&&(d=new t("xml",7),s.insert(d,s.firstChild,!0)),d.value=p):d&&7===d.type&&d.remove(),d=s.getAll("#doctype")[0],o.doctype?(d||(d=new t("#doctype",10),o.xml_pi?s.insert(d,s.firstChild):c(d)),d.value=o.doctype.substring(9,o.doctype.length-1)):d&&d.remove(),d=null,r.each(s.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(d=e)}),o.docencoding?(d||(d=new t("meta",1),d.attr("http-equiv","Content-Type"),d.shortEnded=!0,c(d)),d.attr("content","text/html; charset="+o.docencoding)):d&&d.remove(),d=s.getAll("title")[0],o.title?(d?d.empty():(d=new t("title",1),c(d)),d.append(new t("#text",3)).value=o.title):d&&d.remove(),r.each("keywords,description,author,copyright,robots".split(","),function(e){var n,r,i=s.getAll("meta"),a=o[e];for(n=0;n<i.length;n++)if(r=i[n],r.attr("name")===e)return void(a?r.attr("content",a):r.remove());a&&(d=new t("meta",1),d.attr("name",e),d.attr("content",a),d.shortEnded=!0,c(d))});var g={};return r.each(s.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(g[e.attr("href")]=e)}),r.each(o.stylesheets,function(e){g[e]||(d=new t("link",1),d.attr({rel:"stylesheet",text:"text/css",href:e}),d.shortEnded=!0,c(d)),delete g[e]}),r.each(g,function(e){e.remove()}),d=s.getAll("body")[0],d&&(u(d,"dir",o.langdir),u(d,"style",o.style),u(d,"vlink",o.visited_color),u(d,"link",o.link_color),u(d,"alink",o.active_color),m.setAttribs(e.getBody(),{style:o.style,dir:o.dir,vLink:o.visited_color,link:o.link_color,aLink:o.active_color})),d=s.getAll("html")[0],d&&(u(d,"lang",o.langcode),u(d,"xml:lang",o.langcode)),l.firstChild||l.remove(),f=new n({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(s),f.substring(0,f.indexOf("</body>"))}}}),i("tinymce.plugins.fullpage.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.fullpage.core.Parser"],function(e,t){return{open:function(n,r){var o=t.htmlToData(n,r.get());n.windowManager.open({title:"Document properties",data:o,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(i){var a=t.dataToHtml(n,e.extend(o,i.data),r.get());r.set(a)}})}}}),i("tinymce.plugins.fullpage.api.Commands",["tinymce.plugins.fullpage.ui.Dialog"],function(e){return{register:function(t,n){t.addCommand("mceFullPageProperties",function(){e.open(t,n)})}}}),i("tinymce.plugins.fullpage.core.Protect",["tinymce.core.util.Tools"],function(e){return{protectHtml:function(t,n){return e.each(t,function(e){n=n.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})}),n},unprotectHtml:function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})}}}),i("tinymce.plugins.fullpage.core.FilterContent",["tinymce.core.util.Tools","tinymce.plugins.fullpage.api.Settings","tinymce.plugins.fullpage.core.Parser","tinymce.plugins.fullpage.core.Protect"],function(e,t,n,r){var o=e.each,i=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},a=function(a,c,s,l){var f,d,p,m,g,h="",v=a.dom;if(!(l.selection||(p=r.protectHtml(a.settings.protect,l.content),"raw"===l.format&&c.get()||l.source_view&&t.shouldHideInSourceView(a)))){0!==p.length||l.source_view||(p=e.trim(c.get())+"\n"+e.trim(p)+"\n"+e.trim(s.get())),p=p.replace(/<(\/?)BODY/gi,"<$1body"),f=p.indexOf("<body"),-1!==f?(f=p.indexOf(">",f),c.set(i(p.substring(0,f+1))),d=p.indexOf("</body",f),-1===d&&(d=p.length),l.content=e.trim(p.substring(f+1,d)),s.set(i(p.substring(d)))):(c.set(u(a)),s.set("\n</body>\n</html>")),m=n.parseHeader(c.get()),o(m.getAll("style"),function(e){e.firstChild&&(h+=e.firstChild.value)}),g=m.getAll("body")[0],g&&v.setAttribs(a.getBody(),{style:g.attr("style")||"",dir:g.attr("dir")||"",vLink:g.attr("vlink")||"",link:g.attr("link")||"",aLink:g.attr("alink")||""}),v.remove("fullpage_styles");var y=a.getDoc().getElementsByTagName("head")[0];h&&(v.add(y,"style",{id:"fullpage_styles"},h),g=v.get("fullpage_styles"),g.styleSheet&&(g.styleSheet.cssText=h));var b={};e.each(y.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(b[e.href]=e)}),e.each(m.getAll("link"),function(e){var t=e.attr("href");if(!t)return!0;b[t]||"stylesheet"!==e.attr("rel")||v.add(y,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),delete b[t]}),e.each(b,function(e){e.parentNode.removeChild(e)})}},u=function(e){var n,r="",o="";if(t.getDefaultXmlPi(e)){var i=t.getDefaultEncoding(e);r+='<?xml version="1.0" encoding="'+(i||"ISO-8859-1")+'" ?>\n'}return r+=t.getDefaultDocType(e),r+="\n<html>\n<head>\n",(n=t.getDefaultTitle(e))&&(r+="<title>"+n+"</title>\n"),(n=t.getDefaultEncoding(e))&&(r+='<meta http-equiv="Content-Type" content="text/html; charset='+n+'" />\n'),(n=t.getDefaultFontFamily(e))&&(o+="font-family: "+n+";"),(n=t.getDefaultFontSize(e))&&(o+="font-size: "+n+";"),(n=t.getDefaultTextColor(e))&&(o+="color: "+n+";"),r+="</head>\n<body"+(o?' style="'+o+'"':"")+">\n"},c=function(n,o,i,a){a.selection||a.source_view&&t.shouldHideInSourceView(n)||(a.content=r.unprotectHtml(e.trim(o)+"\n"+e.trim(a.content)+"\n"+e.trim(i)))};return{setup:function(e,t,n){e.on("BeforeSetContent",function(r){a(e,t,n,r)}),e.on("GetContent",function(r){c(e,t.get(),n.get(),r)})}}}),i("tinymce.plugins.fullpage.ui.Buttons",[],function(){return{register:function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})}}}),i("tinymce.plugins.fullpage.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.fullpage.api.Commands","tinymce.plugins.fullpage.core.FilterContent","tinymce.plugins.fullpage.ui.Buttons"],function(e,t,n,r,o){return t.add("fullpage",function(t){var i=e(""),a=e("");n.register(t,i),o.register(t),r.setup(t,i,a)}),function(){}}),r("tinymce.plugins.fullpage.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),i("8",["6"],function(e){return e("tinymce.util.Tools")}),i("c",["6"],function(e){return e("tinymce.html.DomParser")}),i("d",["6"],function(e){return e("tinymce.html.Node")}),i("e",["6"],function(e){return e("tinymce.html.Serializer")}),i("9",[],function(){return{shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}}}),i("a",["c","d","e","8","9"],function(e,t,n,r,o){var i=function(t){return new e({validate:!1,root_name:"#document"}).parse(t)};return{parseHeader:i,htmlToData:function(e,t){
function n(e,t){return e.attr(t)||""}var a,u,c=i(t),s={};return s.fontface=o.getDefaultFontFamily(e),s.fontsize=o.getDefaultFontSize(e),a=c.firstChild,7===a.type&&(s.xml_pi=!0,(u=/encoding="([^"]+)"/.exec(a.value))&&(s.docencoding=u[1])),a=c.getAll("#doctype")[0],a&&(s.doctype="<!DOCTYPE"+a.value+">"),a=c.getAll("title")[0],a&&a.firstChild&&(s.title=a.firstChild.value),r.each(c.getAll("meta"),function(e){var t,n=e.attr("name"),r=e.attr("http-equiv");n?s[n.toLowerCase()]=e.attr("content"):"Content-Type"===r&&(t=/charset\s*=\s*(.*)\s*/gi.exec(e.attr("content")))&&(s.docencoding=t[1])}),a=c.getAll("html")[0],a&&(s.langcode=n(a,"lang")||n(a,"xml:lang")),s.stylesheets=[],r.each(c.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&s.stylesheets.push(e.attr("href"))}),a=c.getAll("body")[0],a&&(s.langdir=n(a,"dir"),s.style=n(a,"style"),s.visited_color=n(a,"vlink"),s.link_color=n(a,"link"),s.active_color=n(a,"alink")),s},dataToHtml:function(e,o,a){function u(e,t,n){e.attr(t,n||void 0)}function c(e){l.firstChild?l.insert(e,l.firstChild):l.append(e)}var s,l,f,d,p,m=e.dom;s=i(a),l=s.getAll("head")[0],l||(d=s.getAll("html")[0],l=new t("head",1),d.firstChild?d.insert(l,d.firstChild,!0):d.append(l)),d=s.firstChild,o.xml_pi?(p='version="1.0"',o.docencoding&&(p+=' encoding="'+o.docencoding+'"'),7!==d.type&&(d=new t("xml",7),s.insert(d,s.firstChild,!0)),d.value=p):d&&7===d.type&&d.remove(),d=s.getAll("#doctype")[0],o.doctype?(d||(d=new t("#doctype",10),o.xml_pi?s.insert(d,s.firstChild):c(d)),d.value=o.doctype.substring(9,o.doctype.length-1)):d&&d.remove(),d=null,r.each(s.getAll("meta"),function(e){"Content-Type"===e.attr("http-equiv")&&(d=e)}),o.docencoding?(d||(d=new t("meta",1),d.attr("http-equiv","Content-Type"),d.shortEnded=!0,c(d)),d.attr("content","text/html; charset="+o.docencoding)):d&&d.remove(),d=s.getAll("title")[0],o.title?(d?d.empty():(d=new t("title",1),c(d)),d.append(new t("#text",3)).value=o.title):d&&d.remove(),r.each("keywords,description,author,copyright,robots".split(","),function(e){var n,r,i=s.getAll("meta"),a=o[e];for(n=0;n<i.length;n++)if(r=i[n],r.attr("name")===e)return void(a?r.attr("content",a):r.remove());a&&(d=new t("meta",1),d.attr("name",e),d.attr("content",a),d.shortEnded=!0,c(d))});var g={};return r.each(s.getAll("link"),function(e){"stylesheet"===e.attr("rel")&&(g[e.attr("href")]=e)}),r.each(o.stylesheets,function(e){g[e]||(d=new t("link",1),d.attr({rel:"stylesheet",text:"text/css",href:e}),d.shortEnded=!0,c(d)),delete g[e]}),r.each(g,function(e){e.remove()}),d=s.getAll("body")[0],d&&(u(d,"dir",o.langdir),u(d,"style",o.style),u(d,"vlink",o.visited_color),u(d,"link",o.link_color),u(d,"alink",o.active_color),m.setAttribs(e.getBody(),{style:o.style,dir:o.dir,vLink:o.visited_color,link:o.link_color,aLink:o.active_color})),d=s.getAll("html")[0],d&&(u(d,"lang",o.langcode),u(d,"xml:lang",o.langcode)),l.firstChild||l.remove(),f=new n({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(s),f.substring(0,f.indexOf("</body>"))}}}),i("7",["8","a"],function(e,t){return{open:function(n,r){var o=t.htmlToData(n,r.get());n.windowManager.open({title:"Document properties",data:o,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(i){var a=t.dataToHtml(n,e.extend(o,i.data),r.get());r.set(a)}})}}}),i("3",["7"],function(e){return{register:function(t,n){t.addCommand("mceFullPageProperties",function(){e.open(t,n)})}}}),i("b",["8"],function(e){return{protectHtml:function(t,n){return e.each(t,function(e){n=n.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})}),n},unprotectHtml:function(e){return e.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(e,t){return unescape(t)})}}}),i("4",["8","9","a","b"],function(e,t,n,r){var o=e.each,i=function(e){return e.replace(/<\/?[A-Z]+/g,function(e){return e.toLowerCase()})},a=function(a,c,s,l){var f,d,p,m,g,h="",v=a.dom;if(!(l.selection||(p=r.protectHtml(a.settings.protect,l.content),"raw"===l.format&&c.get()||l.source_view&&t.shouldHideInSourceView(a)))){0!==p.length||l.source_view||(p=e.trim(c.get())+"\n"+e.trim(p)+"\n"+e.trim(s.get())),p=p.replace(/<(\/?)BODY/gi,"<$1body"),f=p.indexOf("<body"),-1!==f?(f=p.indexOf(">",f),c.set(i(p.substring(0,f+1))),d=p.indexOf("</body",f),-1===d&&(d=p.length),l.content=e.trim(p.substring(f+1,d)),s.set(i(p.substring(d)))):(c.set(u(a)),s.set("\n</body>\n</html>")),m=n.parseHeader(c.get()),o(m.getAll("style"),function(e){e.firstChild&&(h+=e.firstChild.value)}),g=m.getAll("body")[0],g&&v.setAttribs(a.getBody(),{style:g.attr("style")||"",dir:g.attr("dir")||"",vLink:g.attr("vlink")||"",link:g.attr("link")||"",aLink:g.attr("alink")||""}),v.remove("fullpage_styles");var y=a.getDoc().getElementsByTagName("head")[0];h&&(v.add(y,"style",{id:"fullpage_styles"},h),g=v.get("fullpage_styles"),g.styleSheet&&(g.styleSheet.cssText=h));var b={};e.each(y.getElementsByTagName("link"),function(e){"stylesheet"===e.rel&&e.getAttribute("data-mce-fullpage")&&(b[e.href]=e)}),e.each(m.getAll("link"),function(e){var t=e.attr("href");return!t||(b[t]||"stylesheet"!==e.attr("rel")||v.add(y,"link",{rel:"stylesheet",text:"text/css",href:t,"data-mce-fullpage":"1"}),void delete b[t])}),e.each(b,function(e){e.parentNode.removeChild(e)})}},u=function(e){var n,r="",o="";if(t.getDefaultXmlPi(e)){var i=t.getDefaultEncoding(e);r+='<?xml version="1.0" encoding="'+(i||"ISO-8859-1")+'" ?>\n'}return r+=t.getDefaultDocType(e),r+="\n<html>\n<head>\n",(n=t.getDefaultTitle(e))&&(r+="<title>"+n+"</title>\n"),(n=t.getDefaultEncoding(e))&&(r+='<meta http-equiv="Content-Type" content="text/html; charset='+n+'" />\n'),(n=t.getDefaultFontFamily(e))&&(o+="font-family: "+n+";"),(n=t.getDefaultFontSize(e))&&(o+="font-size: "+n+";"),(n=t.getDefaultTextColor(e))&&(o+="color: "+n+";"),r+="</head>\n<body"+(o?' style="'+o+'"':"")+">\n"},c=function(n,o,i,a){a.selection||a.source_view&&t.shouldHideInSourceView(n)||(a.content=r.unprotectHtml(e.trim(o)+"\n"+e.trim(a.content)+"\n"+e.trim(i)))};return{setup:function(e,t,n){e.on("BeforeSetContent",function(r){a(e,t,n,r)}),e.on("GetContent",function(r){c(e,t.get(),n.get(),r)})}}}),i("5",[],function(){return{register:function(e){e.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),e.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("fullpage",function(t){var i=e(""),a=e("");n.register(t,i),o.register(t),r.setup(t,i,a)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.fullscreen.api.Api",[],function(){return{get:function(e){return{isFullscreen:function(){return null!==e.get()}}}}}),a("global!document",document),a("global!window",window),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.fullscreen.api.Events",[],function(){return{fireFullscreenStateChanged:function(e,t){e.fire("FullscreenStateChanged",{state:t})}}}),i("tinymce.plugins.fullscreen.core.Actions",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.plugins.fullscreen.api.Events"],function(e,t,n,r){var o=n.DOM,i=function(){var n,r,o=t,i=e,a=i.body;return a.offsetWidth&&(n=a.offsetWidth,r=a.offsetHeight),o.innerWidth&&o.innerHeight&&(n=o.innerWidth,r=o.innerHeight),{w:n,h:r}},a=function(){var e=o.getViewPort();return{x:e.x,y:e.y}},u=function(e){t.scrollTo(e.x,e.y)};return{toggleFullscreen:function(n,c){var s,l,f,d,p=e.body,m=e.documentElement,g=c.get(),h=function(){o.setStyle(f,"height",i().h-(l.clientHeight-f.clientHeight))},v=function(){o.unbind(t,"resize",h)};if(l=n.getContainer(),s=l.style,f=n.getContentAreaContainer().firstChild,d=f.style,g)d.width=g.iframeWidth,d.height=g.iframeHeight,g.containerWidth&&(s.width=g.containerWidth),g.containerHeight&&(s.height=g.containerHeight),o.removeClass(p,"mce-fullscreen"),o.removeClass(m,"mce-fullscreen"),o.removeClass(l,"mce-fullscreen"),u(g.scrollPos),o.unbind(t,"resize",g.resizeHandler),n.off("remove",g.removeHandler),c.set(null),r.fireFullscreenStateChanged(n,!1);else{var y={scrollPos:a(),containerWidth:s.width,containerHeight:s.height,iframeWidth:d.width,iframeHeight:d.height,resizeHandler:h,removeHandler:v};d.width=d.height="100%",s.width=s.height="",o.addClass(p,"mce-fullscreen"),o.addClass(m,"mce-fullscreen"),o.addClass(l,"mce-fullscreen"),o.bind(t,"resize",h),n.on("remove",v),h(),c.set(y),r.fireFullscreenStateChanged(n,!0)}}}}),i("tinymce.plugins.fullscreen.api.Commands",["tinymce.plugins.fullscreen.core.Actions"],function(e){return{register:function(t,n){t.addCommand("mceFullScreen",function(){e.toggleFullscreen(t,n)})}}}),i("tinymce.plugins.fullscreen.ui.Buttons",[],function(){var e=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};return{register:function(t){t.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:e(t),context:"view"}),t.addButton("fullscreen",{tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:e(t)})}}}),i("tinymce.plugins.fullscreen.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.fullscreen.api.Api","tinymce.plugins.fullscreen.api.Commands","tinymce.plugins.fullscreen.ui.Buttons"],function(e,t,n,r,o){return t.add("fullscreen",function(t){var i=e(null);return r.register(t,i),o.register(t),t.addShortcut("Ctrl+Shift+F","","mceFullScreen"),n.get(i)}),function(){}}),r("tinymce.plugins.fullscreen.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),i("3",[],function(){return{get:function(e){return{isFullscreen:function(){return null!==e.get()}}}}}),a("8",document),a("9",window),i("a",["6"],function(e){return e("tinymce.dom.DOMUtils")}),i("b",[],function(){return{fireFullscreenStateChanged:function(e,t){e.fire("FullscreenStateChanged",{state:t})}}}),i("7",["8","9","a","b"],function(e,t,n,r){var o=n.DOM,i=function(){var n,r,o=t,i=e,a=i.body;return a.offsetWidth&&(n=a.offsetWidth,r=a.offsetHeight),o.innerWidth&&o.innerHeight&&(n=o.innerWidth,r=o.innerHeight),{w:n,h:r}},a=function(){var e=o.getViewPort();return{x:e.x,y:e.y}},u=function(e){t.scrollTo(e.x,e.y)};return{toggleFullscreen:function(n,c){var s,l,f,d,p=e.body,m=e.documentElement,g=c.get(),h=function(){o.setStyle(f,"height",i().h-(l.clientHeight-f.clientHeight))},v=function(){o.unbind(t,"resize",h)};if(l=n.getContainer(),s=l.style,f=n.getContentAreaContainer().firstChild,d=f.style,g)d.width=g.iframeWidth,d.height=g.iframeHeight,g.containerWidth&&(s.width=g.containerWidth),g.containerHeight&&(s.height=g.containerHeight),o.removeClass(p,"mce-fullscreen"),o.removeClass(m,"mce-fullscreen"),o.removeClass(l,"mce-fullscreen"),u(g.scrollPos),o.unbind(t,"resize",g.resizeHandler),n.off("remove",g.removeHandler),c.set(null),r.fireFullscreenStateChanged(n,!1);else{var y={scrollPos:a(),containerWidth:s.width,containerHeight:s.height,iframeWidth:d.width,iframeHeight:d.height,resizeHandler:h,removeHandler:v};d.width=d.height="100%",s.width=s.height="",o.addClass(p,"mce-fullscreen"),o.addClass(m,"mce-fullscreen"),o.addClass(l,"mce-fullscreen"),o.bind(t,"resize",h),n.on("remove",v),h(),c.set(y),r.fireFullscreenStateChanged(n,!0)}}}}),i("4",["7"],function(e){return{register:function(t,n){t.addCommand("mceFullScreen",function(){e.toggleFullscreen(t,n)})}}}),i("5",[],function(){var e=function(e){return function(t){var n=t.control;e.on("FullscreenStateChanged",function(e){n.active(e.state)})}};return{register:function(t){t.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:e(t),context:"view"}),t.addButton("fullscreen",{tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:e(t)})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("fullscreen",function(t){var i=e(null);return r.register(t,i),o.register(t),t.addShortcut("Ctrl+Shift+F","","mceFullScreen"),n.get(i)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.plugins.help.data.KeyboardShortcuts",["tinymce.core.Env"],function(e){var t=e.mac?"\u2318":"Ctrl",n=e.mac?"Ctrl + Alt":"Shift + Alt";return{shortcuts:[{shortcut:t+" + B",action:"Bold"},{shortcut:t+" + I",action:"Italic"},{shortcut:t+" + U",action:"Underline"},{shortcut:t+" + A",action:"Select all"},{shortcut:t+" + Y or "+t+" + Shift + Z",action:"Redo"},{shortcut:t+" + Z",action:"Undo"},{shortcut:n+" + 1",action:"Header 1"},{shortcut:n+" + 2",action:"Header 2"},{shortcut:n+" + 3",action:"Header 3"},{shortcut:n+" + 4",action:"Header 4"},{shortcut:n+" + 5",action:"Header 5"},{shortcut:n+" + 6",action:"Header 6"},{shortcut:n+" + 7",action:"Paragraph"},{shortcut:n+" + 8",action:"Div"},{shortcut:n+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + Shift + P > Ctrl + Shift + P",action:"Focus to contextual toolbar"},{shortcut:t+" + K",action:"Insert link (if link plugin activated)"},{shortcut:t+" + S",action:"Save (if save plugin activated)"},{shortcut:t+" + F",action:"Find (if searchreplace plugin activated)"}]}}),i("tinymce.plugins.help.ui.KeyboardShortcutsTab",["ephox.katamari.api.Arr","tinymce.core.util.I18n","tinymce.plugins.help.data.KeyboardShortcuts"],function(e,t,n){return{makeTab:function(){var r=function(e){return'aria-label="Action: '+e.action+", Shortcut: "+e.shortcut.replace(/Ctrl/g,"Control")+'"'},o=e.map(n.shortcuts,function(e){return'<tr data-mce-tabstop="1" tabindex="-1" '+r(e)+"><td>"+t.translate(e.action)+"</td><td>"+e.shortcut+"</td></tr>"}).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+t.translate("Action")+"</th><th>"+t.translate("Shortcut")+"</th></thead>"+o+"</table></div>"}]}}}}),i("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return e===undefined?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},u=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},c=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var u=o[i],c=t[u];if(r(c,u,t))return e.some(c)}return e.none()},s=function(e){return u(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:u,tupleMap:i,find:c,keys:n,values:s,size:function(e){return s(e).length}}}),i("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),i("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),i("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t){var n=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},o=function(t,n){return l(t,n)?e.removeFromStart(t,n.length):t},i=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return l(t,n)?t:e.addToStart(t,n)},u=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},c=function(e,t){return-1!==e.indexOf(t)},s=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},l=function(e,t){return n(e,t,0)},f=function(e,t){return n(e,t,e.length-t.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:i,ensureLeading:a,ensureTrailing:u,endsWith:f,contains:c,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:s}}),i("tinymce.plugins.help.data.PluginUrls",[],function(){return{urls:[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}]}}),i("tinymce.plugins.help.ui.PluginsTab",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Strings","tinymce.core.EditorManager","tinymce.core.util.I18n","tinymce.plugins.help.data.PluginUrls"],function(e,t,n,r,o,i,a){var u=t.curry(r.supplant,'<a href="${url}" target="_blank" rel="noopener">${name}</a>'),c=function(t,n){return e.find(a.urls,function(e){return e.key===n}).fold(function(){var e=t.plugins[n].getMetadata;return"function"==typeof e?u(e()):n},function(e){return u({name:e.name,url:"https://www.tinymce.com/docs/plugins/"+e.key})})},s=function(r){var o=n.keys(r.plugins);return r.settings.forced_plugins===undefined?o:e.filter(o,t.not(t.curry(e.contains,r.settings.forced_plugins)))},l=function(t){var n=s(t),r=e.map(n,function(e){return"<li>"+c(t,e)+"</li>"}),o=r.length,a=r.join("");return"<p><b>"+i.translate(["Plugins installed ({0}):",o])+"</b></p><ul>"+a+"</ul>"},f=function(e){return{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+l(e)+"</div>",flex:1}},d=function(){return{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+i.translate("Premium plugins:")+'</b></p><ul><li>PowerPaste</li><li>Spell Checker Pro</li><li>Accessibility Checker</li><li>Advanced Code Editor</li><li>Enhanced Media Embed</li><li>Link Checker</li></ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+i.translate("Learn more...")+"</a></p></div>",flex:1}};return{makeTab:function(e){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[f(e),d()]}}}}),i("tinymce.plugins.help.ui.ButtonsRow",["tinymce.core.EditorManager","tinymce.core.util.I18n"],function(e,t){var n=function(e,t){return 0===e.indexOf("@")?"X.X.X":e+"."+t};return{makeRow:function(){var r=n(e.majorVersion,e.minorVersion),o='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+r+"</a>";return[{type:"label",html:t.translate(["You are using {0}",o])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]}}}),i("tinymce.plugins.help.ui.Dialog",["tinymce.core.EditorManager","tinymce.plugins.help.ui.KeyboardShortcutsTab","tinymce.plugins.help.ui.PluginsTab","tinymce.plugins.help.ui.ButtonsRow"],function(e,t,n,r){return{open:function(e,o){return function(){e.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[t.makeTab(),n.makeTab(e,o)],buttons:r.makeRow(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+o+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}}}}),i("tinymce.plugins.help.api.Commands",["tinymce.plugins.help.ui.Dialog"],function(e){return{register:function(t,n){t.addCommand("mceHelp",e.open(t,n))}}}),i("tinymce.plugins.help.ui.Buttons",["tinymce.plugins.help.ui.Dialog"],function(e){return{register:function(t,n){t.addButton("help",{icon:"help",onclick:e.open(t,n)}),t.addMenuItem("Help",{text:"Help",icon:"help",context:"help",onclick:e.open(t,n)})}}}),i("tinymce.plugins.help.Plugin",["tinymce.core.PluginManager","tinymce.plugins.help.api.Commands","tinymce.plugins.help.ui.Buttons","tinymce.plugins.help.ui.Dialog"],function(e,t,n){return e.add("help",function(e,r){n.register(e,r),t.register(e,r),e.shortcuts.add("Alt+0","Open help dialog","mceHelp")}),function(){}}),r("tinymce.plugins.help.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("6",["5"],function(e){return e("tinymce.EditorManager")}),a("i",Array),a("j",Error),i("d",["i","j"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("m",Object),i("h",["d","m"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},
equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),a("k",String),i("a",["h","i","j","k"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("b",["5"],function(e){return e("tinymce.util.I18n")}),i("l",["5"],function(e){return e("tinymce.Env")}),i("c",["l"],function(e){var t=e.mac?"\u2318":"Ctrl",n=e.mac?"Ctrl + Alt":"Shift + Alt";return{shortcuts:[{shortcut:t+" + B",action:"Bold"},{shortcut:t+" + I",action:"Italic"},{shortcut:t+" + U",action:"Underline"},{shortcut:t+" + A",action:"Select all"},{shortcut:t+" + Y or "+t+" + Shift + Z",action:"Redo"},{shortcut:t+" + Z",action:"Undo"},{shortcut:n+" + 1",action:"Header 1"},{shortcut:n+" + 2",action:"Header 2"},{shortcut:n+" + 3",action:"Header 3"},{shortcut:n+" + 4",action:"Header 4"},{shortcut:n+" + 5",action:"Header 5"},{shortcut:n+" + 6",action:"Header 6"},{shortcut:n+" + 7",action:"Paragraph"},{shortcut:n+" + 8",action:"Div"},{shortcut:n+" + 9",action:"Address"},{shortcut:"Alt + F9",action:"Focus to menubar"},{shortcut:"Alt + F10",action:"Focus to toolbar"},{shortcut:"Alt + F11",action:"Focus to element path"},{shortcut:"Ctrl + Shift + P > Ctrl + Shift + P",action:"Focus to contextual toolbar"},{shortcut:t+" + K",action:"Insert link (if link plugin activated)"},{shortcut:t+" + S",action:"Save (if save plugin activated)"},{shortcut:t+" + F",action:"Find (if searchreplace plugin activated)"}]}}),i("7",["a","b","c"],function(e,t,n){return{makeTab:function(){var r=function(e){return'aria-label="Action: '+e.action+", Shortcut: "+e.shortcut.replace(/Ctrl/g,"Control")+'"'},o=e.map(n.shortcuts,function(e){return'<tr data-mce-tabstop="1" tabindex="-1" '+r(e)+"><td>"+t.translate(e.action)+"</td><td>"+e.shortcut+"</td></tr>"}).join("");return{title:"Handy Shortcuts",type:"container",style:"overflow-y: auto; overflow-x: hidden; max-height: 250px",items:[{type:"container",html:'<div><table class="mce-table-striped"><thead><th>'+t.translate("Action")+"</th><th>"+t.translate("Shortcut")+"</th></thead>"+o+"</table></div>"}]}}}}),i("e",["h","m"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return void 0===e?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},u=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},c=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var u=o[i],c=t[u];if(r(c,u,t))return e.some(c)}return e.none()},s=function(e){return u(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:u,tupleMap:i,find:c,keys:n,values:s,size:function(e){return s(e).length}}}),i("n",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),i("o",["h","j"],function(e){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),i("f",["n","o","j"],function(e,t){var n=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},o=function(t,n){return l(t,n)?e.removeFromStart(t,n.length):t},i=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return l(t,n)?t:e.addToStart(t,n)},u=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},c=function(e,t){return-1!==e.indexOf(t)},s=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},l=function(e,t){return n(e,t,0)},f=function(e,t){return n(e,t,e.length-t.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:i,ensureLeading:a,ensureTrailing:u,endsWith:f,contains:c,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:s}}),i("g",[],function(){return{urls:[{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"bbcode",name:"BBCode"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"compat3x",name:"3.x Compatibility"},{key:"contextmenu",name:"Context Menu"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullpage",name:"Full Page"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"hr",name:"Horizontal Rule"},{key:"image",name:"Image"},{key:"imagetools",name:"Image Tools"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"legacyoutput",name:"Legacy Output"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"noneditable",name:"Noneditable"},{key:"pagebreak",name:"Page Break"},{key:"paste",name:"Paste"},{key:"preview",name:"Preview"},{key:"print",name:"Print"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"spellchecker",name:"Spell Checker"},{key:"tabfocus",name:"Tab Focus"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"textpattern",name:"Text Pattern"},{key:"toc",name:"Table of Contents"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"}]}}),i("8",["a","d","e","f","6","b","g"],function(e,t,n,r,o,i,a){var u=t.curry(r.supplant,'<a href="${url}" target="_blank" rel="noopener">${name}</a>'),c=function(t,n){return e.find(a.urls,function(e){return e.key===n}).fold(function(){var e=t.plugins[n].getMetadata;return"function"==typeof e?u(e()):n},function(e){return u({name:e.name,url:"https://www.tinymce.com/docs/plugins/"+e.key})})},s=function(r){var o=n.keys(r.plugins);return void 0===r.settings.forced_plugins?o:e.filter(o,t.not(t.curry(e.contains,r.settings.forced_plugins)))},l=function(t){var n=s(t),r=e.map(n,function(e){return"<li>"+c(t,e)+"</li>"}),o=r.length,a=r.join("");return"<p><b>"+i.translate(["Plugins installed ({0}):",o])+"</b></p><ul>"+a+"</ul>"},f=function(e){return{type:"container",html:'<div style="overflow-y: auto; overflow-x: hidden; max-height: 230px; height: 230px;" data-mce-tabstop="1" tabindex="-1">'+l(e)+"</div>",flex:1}},d=function(){return{type:"container",html:'<div style="padding: 10px; background: #e3e7f4; height: 100%;" data-mce-tabstop="1" tabindex="-1"><p><b>'+i.translate("Premium plugins:")+'</b></p><ul><li>PowerPaste</li><li>Spell Checker Pro</li><li>Accessibility Checker</li><li>Advanced Code Editor</li><li>Enhanced Media Embed</li><li>Link Checker</li></ul><br /><p style="float: right;"><a href="https://www.tinymce.com/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">'+i.translate("Learn more...")+"</a></p></div>",flex:1}};return{makeTab:function(e){return{title:"Plugins",type:"container",style:"overflow-y: auto; overflow-x: hidden;",layout:"flex",padding:10,spacing:10,items:[f(e),d()]}}}}),i("9",["6","b"],function(e,t){var n=function(e,t){return 0===e.indexOf("@")?"X.X.X":e+"."+t};return{makeRow:function(){var r=n(e.majorVersion,e.minorVersion),o='<a href="https://www.tinymce.com/docs/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" target="_blank">TinyMCE '+r+"</a>";return[{type:"label",html:t.translate(["You are using {0}",o])},{type:"spacer",flex:1},{text:"Close",onclick:function(){this.parent().parent().close()}}]}}}),i("4",["6","7","8","9"],function(e,t,n,r){return{open:function(e,o){return function(){e.windowManager.open({title:"Help",bodyType:"tabpanel",layout:"flex",body:[t.makeTab(),n.makeTab(e,o)],buttons:r.makeRow(),onPostRender:function(){this.getEl("title").innerHTML='<img src="'+o+'/img/logo.png" alt="TinyMCE Logo" style="display: inline-block; width: 200px; height: 50px">'}})}}}}),i("2",["4"],function(e){return{register:function(t,n){t.addCommand("mceHelp",e.open(t,n))}}}),i("3",["4"],function(e){return{register:function(t,n){t.addButton("help",{icon:"help",onclick:e.open(t,n)}),t.addMenuItem("Help",{text:"Help",icon:"help",context:"help",onclick:e.open(t,n)})}}}),i("0",["1","2","3","4"],function(e,t,n){return e.add("help",function(e,r){n.register(e,r),t.register(e,r),e.shortcuts.add("Alt+0","Open help dialog","mceHelp")}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.hr.api.Commands",[],function(){return{register:function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})}}}),i("tinymce.plugins.hr.ui.Buttons",[],function(){return{register:function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}}}),i("tinymce.plugins.hr.Plugin",["tinymce.core.PluginManager","tinymce.plugins.hr.api.Commands","tinymce.plugins.hr.ui.Buttons"],function(e,t,n){return e.add("hr",function(e){t.register(e),n.register(e)}),function(){}}),r("tinymce.plugins.hr.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("2",[],function(){return{register:function(e){e.addCommand("InsertHorizontalRule",function(){e.execCommand("mceInsertContent",!1,"<hr />")})}}}),i("3",[],function(){return{register:function(e){e.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),e.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("hr",function(e){t.register(e),n.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=n!==undefined?n:e,o=0;o<t.length&&r!==undefined&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return e[t]!==undefined&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=n!==undefined?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(r===undefined)throw e+" not available on this browser";return r}}}),i("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),a("global!document",document),a("global!Math",Math),a("global!RegExp",RegExp),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),i("tinymce.core.util.JSON",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.JSON")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),i("tinymce.plugins.image.api.Settings",[],function(){return{hasDimensions:function(e){return e.getParam("image_dimensions",!0)},hasAdvTab:function(e){return e.getParam("image_advtab",!1)},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return e.getParam("image_description",!0)},hasImageTitle:function(e){return e.getParam("image_title",!1)},hasImageCaption:function(e){return e.getParam("image_caption",!1)},getImageList:function(e){return e.getParam("image_list",!1)}}}),i("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),a("global!window",window),i("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),i("tinymce.plugins.image.core.Uploader",["ephox.sand.api.XMLHttpRequest","global!document","global!window","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r,o){var i=function(){},a=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t};return function(t){var u=function(r,o,i,u){var c,s;c=new e,c.open("POST",t.url),c.withCredentials=t.credentials,c.upload.onprogress=function(e){u(e.loaded/e.total*100)},c.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e;return c.status<200||c.status>=300?void i("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?void o(a(t.basePath,e.location)):void i("Invalid JSON: "+c.responseText)},s=new n.FormData,s.append("file",r.blob(),r.filename()),c.send(s)},c=function(e,t){return new r(function(n,r){try{t(e,n,r,i)}catch(e){r(e.message)}})},s=function(e){return e===u},l=function(e){return!t.url&&s(t.handler)?r.reject("Upload url missng from the settings."):c(e,t.handler)};return t=o.extend({credentials:!1,handler:u},t),{upload:l}}}),i("tinymce.plugins.image.core.Utils",["tinymce.core.util.Tools","global!Math","global!document"],function(e,t,n){return{getImageSize:function(e,r){function o(e,t){i.parentNode&&i.parentNode.removeChild(i),r({width:e,height:t})}var i=n.createElement("img");i.onload=function(){o(t.max(i.width,i.clientWidth),t.max(i.height,i.clientHeight))},i.onerror=function(){o()};var a=i.style;a.visibility="hidden",a.position="fixed",a.bottom=a.left=0,a.width=a.height="auto",n.body.appendChild(i),i.src=e},buildListItems:function(t,n,r){function o(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n(t)),r.push(t)}),r}return o(t,r||[])},removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}}}),i("tinymce.plugins.image.ui.Dialog",["ephox.sand.api.URL","global!document","global!Math","global!RegExp","tinymce.core.Env","tinymce.core.ui.Factory","tinymce.core.util.JSON","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.image.api.Settings","tinymce.plugins.image.core.Uploader","tinymce.plugins.image.core.Utils"],function(e,t,n,r,o,i,a,u,c,s,l,f){return function(t){function o(e){var n=s.getImageList(t);"string"==typeof n?c.send({url:n,success:function(t){e(a.parse(t))}}):"function"==typeof n?n(e):e(n)}function d(o){function a(){var n=i.get("Throbber"),r=new n(b.getEl()),o=this.value(),a=new l({url:A.images_upload_url,basePath:A.images_upload_base_path,credentials:A.images_upload_credentials,handler:A.images_upload_handler}),u=t.editorUpload.blobCache.create({blob:o,name:o.name?o.name.replace(/\.[^\.]+$/,""):null,base64:"data:image/fake;base64,="}),c=function(){r.hide(),e.revokeObjectURL(u.blobUri())};return r.show(),a.upload(u).then(function(e){var t=b.find("#src");return t.value(e),b.find("tabpanel")[0].activateTab(0),t.fire("change"),c(),e},function(e){t.windowManager.alert(e),c()})}function c(e){return t.schema.getTextBlockElements()[e.nodeName]}function d(){var e,t,r,o;e=b.find("#width")[0],t=b.find("#height")[0],e&&t&&(r=e.value(),o=t.value(),b.find("#constrain")[0].checked()&&C&&k&&r&&o&&(C!==r?(o=n.round(r/C*o),isNaN(o)||t.value(o)):(r=n.round(o/k*r),isNaN(r)||e.value(r))),C=r,k=o)}function p(){if(s.hasAdvTab(t)){var e=b.toJSON(),n=_.parseStyle(e.style);n=f.mergeMargins(n),e.vspace&&(n["margin-top"]=n["margin-bottom"]=f.addPixelSuffix(e.vspace)),e.hspace&&(n["margin-left"]=n["margin-right"]=f.addPixelSuffix(e.hspace)),e.border&&(n["border-width"]=f.addPixelSuffix(e.border)),b.find("#style").value(_.serializeStyle(_.parseStyle(_.serializeStyle(n))))}}function m(){if(s.hasAdvTab(t)){var e=b.toJSON(),n=_.parseStyle(e.style);b.find("#vspace").value(""),b.find("#hspace").value(""),n=f.mergeMargins(n),(n["margin-top"]&&n["margin-bottom"]||n["margin-right"]&&n["margin-left"])&&(n["margin-top"]===n["margin-bottom"]?b.find("#vspace").value(f.removePixelSuffix(n["margin-top"])):b.find("#vspace").value(""),n["margin-right"]===n["margin-left"]?b.find("#hspace").value(f.removePixelSuffix(n["margin-right"])):b.find("#hspace").value("")),n["border-width"]&&b.find("#border").value(f.removePixelSuffix(n["border-width"])),b.find("#style").value(_.serializeStyle(_.parseStyle(_.serializeStyle(n))))}}function g(e){function n(){e.onload=e.onerror=null,t.selection&&(t.selection.select(e),t.nodeChanged())}e.onload=function(){E.width||E.height||!N||_.setAttribs(e,{width:e.clientWidth,height:e.clientHeight}),n()},e.onerror=n}function h(){var e,n;p(),d(),E=u.extend(E,b.toJSON()),E.alt||(E.alt=""),E.title||(E.title=""),""===E.width&&(E.width=null),""===E.height&&(E.height=null),E.style||(E.style=null),E={src:E.src,alt:E.alt,title:E.title,width:E.width,height:E.height,style:E.style,caption:E.caption,"class":E["class"]},t.undoManager.transact(function(){if(E.src){if(""===E.title&&(E.title=null),x?_.setAttribs(x,E):(E.id="__mcenew",t.focus(),t.selection.setContent(_.createHTML("img",E)),x=_.get("__mcenew"),_.setAttrib(x,"id",null)),t.editorUpload.uploadImagesAuto(),!1===E.caption&&_.is(x.parentNode,"figure.image")&&(e=x.parentNode,_.setAttrib(x,"contenteditable",null),_.insertAfter(x,e),_.remove(e),t.selection.select(x),t.nodeChanged()),!0!==E.caption)g(x);else if(!_.is(x.parentNode,"figure.image")){n=x,x=x.cloneNode(!0),x.contentEditable=!0,e=_.create("figure",{"class":"image"}),e.appendChild(x),e.appendChild(_.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable=!1;var r=_.getParent(n,c);r?_.split(r,n,e):_.replace(e,n),t.selection.select(e)}}else if(x){var o=_.is(x.parentNode,"figure.image")?x.parentNode:x;_.remove(o),t.focus(),t.nodeChanged(),_.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}})}function v(e){var n,o,i,a=e.meta||{};T&&T.value(t.convertURL(this.value(),"src")),u.each(a,function(e,t){b.find("#"+t).value(e)}),a.width||a.height||(n=t.convertURL(this.value(),"src"),o=s.getPrependUrl(t),i=new r("^(?:[a-z]+:)?//","i"),o&&!i.test(n)&&n.substring(0,o.length)!==o&&(n=o+n),this.value(n),f.getImageSize(t.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&N&&(C=e.width,k=e.height,b.find("#width").value(C),b.find("#height").value(k))}))}function y(e){e.meta=b.toJSON()}var b,x,w,C,k,T,S,E={},_=t.dom,A=t.settings,N=s.hasDimensions(t);x=t.selection.getNode(),w=_.getParent(x,"figure.image"),w&&(x=_.select("img",w)[0]),x&&("IMG"!==x.nodeName||x.getAttribute("data-mce-object")||x.getAttribute("data-mce-placeholder"))&&(x=null),x&&(C=_.getAttrib(x,"width"),k=_.getAttrib(x,"height"),E={src:_.getAttrib(x,"src"),alt:_.getAttrib(x,"alt"),title:_.getAttrib(x,"title"),"class":_.getAttrib(x,"class"),width:C,height:k,caption:!!w}),o&&(T={type:"listbox",label:"Image list",values:f.buildListItems(o,function(e){e.value=t.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:E.src&&t.convertURL(E.src,"src"),onselect:function(e){var t=b.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),b.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){T=this}}),s.getClassList(t)&&(S={name:"class",type:"listbox",label:"Class",values:f.buildListItems(s.getClassList(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})});var D=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:v,onbeforecall:y},T];if(s.hasDescription(t)&&D.push({name:"alt",type:"textbox",label:"Image description"}),s.hasImageTitle(t)&&D.push({name:"title",type:"textbox",label:"Image Title"}),N&&D.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:d,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:d,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),D.push(S),s.hasImageCaption(t)&&D.push({name:"caption",type:"checkbox",label:"Caption"}),s.hasAdvTab(t)||t.settings.images_upload_url){var R=[{title:"General",type:"form",items:D}];if(s.hasAdvTab(t)&&(x&&(x.style.marginLeft&&x.style.marginRight&&x.style.marginLeft===x.style.marginRight&&(E.hspace=f.removePixelSuffix(x.style.marginLeft)),x.style.marginTop&&x.style.marginBottom&&x.style.marginTop===x.style.marginBottom&&(E.vspace=f.removePixelSuffix(x.style.marginTop)),x.style.borderWidth&&(E.border=f.removePixelSuffix(x.style.borderWidth)),E.style=t.dom.serializeStyle(t.dom.parseStyle(t.dom.getAttrib(x,"style")))),R.push({title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:m},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:p},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]})),t.settings.images_upload_url){var P=".jpg,.jpeg,.png,.gif",I={title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:P,onchange:a},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:P,height:100,onchange:a}]};R.push(I)}b=t.windowManager.open({title:"Insert/edit image",data:E,bodyType:"tabpanel",body:R,onSubmit:h})}else b=t.windowManager.open({title:"Insert/edit image",data:E,body:D,onSubmit:h})}function p(){o(d)}return{open:p}}}),i("tinymce.plugins.image.api.Commands",["tinymce.plugins.image.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mceImage",e(t).open)}}}),i("tinymce.plugins.image.core.FilterContent",["tinymce.core.util.Tools"],function(e){var t=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},n=function(n){return function(r){for(var o,i=r.length,a=function(e){e.attr("contenteditable",n?"true":null)};i--;)o=r[i],t(o)&&(o.attr("contenteditable",n?"false":null),e.each(o.getAll("figcaption"),a),e.each(o.getAll("img"),a))}};return{setup:function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",n(!0)),e.serializer.addNodeFilter("figure",n(!1))})}}}),i("tinymce.plugins.image.ui.Buttons",["tinymce.plugins.image.ui.Dialog"],function(e){return{register:function(t){t.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:e(t).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),t.addMenuItem("image",{icon:"image",text:"Image",onclick:e(t).open,context:"insert",prependToContext:!0})}}}),i("tinymce.plugins.image.Plugin",["tinymce.core.PluginManager","tinymce.plugins.image.api.Commands","tinymce.plugins.image.core.FilterContent","tinymce.plugins.image.ui.Buttons"],function(e,t,n,r){return e.add("image",function(e){n.setup(e),r.register(e),t.register(e)}),function(){}}),r("tinymce.plugins.image.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("o",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("n",["o"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=void 0!==n?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("j",["n"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(void 0===r)throw e+" not available on this browser";return r}}}),i("8",["j"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),a("9",document),a("a",Math),a("b",RegExp),i("c",["5"],function(e){return e("tinymce.Env")}),i("d",["5"],function(e){return e("tinymce.ui.Factory")}),i("e",["5"],function(e){return e("tinymce.util.JSON")}),i("7",["5"],function(e){return e("tinymce.util.Tools")}),i("f",["5"],function(e){return e("tinymce.util.XHR")}),i("g",[],function(){return{hasDimensions:function(e){return e.getParam("image_dimensions",!0)},hasAdvTab:function(e){return e.getParam("image_advtab",!1)},getPrependUrl:function(e){return e.getParam("image_prepend_url","")},getClassList:function(e){return e.getParam("image_class_list")},hasDescription:function(e){return e.getParam("image_description",!0)},hasImageTitle:function(e){return e.getParam("image_title",!1)},hasImageCaption:function(e){return e.getParam("image_caption",!1)},getImageList:function(e){return e.getParam("image_list",!1)}}}),i("k",["j"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),a("l",window),i("m",["5"],function(e){return e("tinymce.util.Promise")}),i("h",["k","9","l","m","7"],function(e,t,n,r,o){var i=function(){},a=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}
;return function(t){var u=function(r,o,i,u){var c,s;c=new e,c.open("POST",t.url),c.withCredentials=t.credentials,c.upload.onprogress=function(e){u(e.loaded/e.total*100)},c.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e;return c.status<200||c.status>=300?void i("HTTP Error: "+c.status):(e=JSON.parse(c.responseText),e&&"string"==typeof e.location?void o(a(t.basePath,e.location)):void i("Invalid JSON: "+c.responseText))},s=new n.FormData,s.append("file",r.blob(),r.filename()),c.send(s)},c=function(e,t){return new r(function(n,r){try{t(e,n,r,i)}catch(e){r(e.message)}})},s=function(e){return e===u},l=function(e){return!t.url&&s(t.handler)?r.reject("Upload url missng from the settings."):c(e,t.handler)};return t=o.extend({credentials:!1,handler:u},t),{upload:l}}}),i("i",["7","a","9"],function(e,t,n){var r=function(e,r){function o(e,t){i.parentNode&&i.parentNode.removeChild(i),r({width:e,height:t})}var i=n.createElement("img");i.onload=function(){o(t.max(i.width,i.clientWidth),t.max(i.height,i.clientHeight))},i.onerror=function(){o()};var a=i.style;a.visibility="hidden",a.position="fixed",a.bottom=a.left=0,a.width=a.height="auto",n.body.appendChild(i),i.src=e},o=function(t,n,r){function o(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n(t)),r.push(t)}),r}return o(t,r||[])};return{getImageSize:r,buildListItems:o,removePixelSuffix:function(e){return e&&(e=e.replace(/px$/,"")),e},addPixelSuffix:function(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},mergeMargins:function(e){if(e.margin){var t=e.margin.split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}}}),i("6",["8","9","a","b","c","d","e","7","f","g","h","i"],function(e,t,n,r,o,i,a,u,c,s,l,f){return function(t){function o(e){var n=s.getImageList(t);"string"==typeof n?c.send({url:n,success:function(t){e(a.parse(t))}}):"function"==typeof n?n(e):e(n)}function d(o){function a(){var n=i.get("Throbber"),r=new n(b.getEl()),o=this.value(),a=new l({url:A.images_upload_url,basePath:A.images_upload_base_path,credentials:A.images_upload_credentials,handler:A.images_upload_handler}),u=t.editorUpload.blobCache.create({blob:o,name:o.name?o.name.replace(/\.[^\.]+$/,""):null,base64:"data:image/fake;base64,="}),c=function(){r.hide(),e.revokeObjectURL(u.blobUri())};return r.show(),a.upload(u).then(function(e){var t=b.find("#src");return t.value(e),b.find("tabpanel")[0].activateTab(0),t.fire("change"),c(),e},function(e){t.windowManager.alert(e),c()})}function c(e){return t.schema.getTextBlockElements()[e.nodeName]}function d(){var e,t,r,o;e=b.find("#width")[0],t=b.find("#height")[0],e&&t&&(r=e.value(),o=t.value(),b.find("#constrain")[0].checked()&&C&&k&&r&&o&&(C!==r?(o=n.round(r/C*o),isNaN(o)||t.value(o)):(r=n.round(o/k*r),isNaN(r)||e.value(r))),C=r,k=o)}function p(){if(s.hasAdvTab(t)){var e=b.toJSON(),n=_.parseStyle(e.style);n=f.mergeMargins(n),e.vspace&&(n["margin-top"]=n["margin-bottom"]=f.addPixelSuffix(e.vspace)),e.hspace&&(n["margin-left"]=n["margin-right"]=f.addPixelSuffix(e.hspace)),e.border&&(n["border-width"]=f.addPixelSuffix(e.border)),b.find("#style").value(_.serializeStyle(_.parseStyle(_.serializeStyle(n))))}}function m(){if(s.hasAdvTab(t)){var e=b.toJSON(),n=_.parseStyle(e.style);b.find("#vspace").value(""),b.find("#hspace").value(""),n=f.mergeMargins(n),(n["margin-top"]&&n["margin-bottom"]||n["margin-right"]&&n["margin-left"])&&(n["margin-top"]===n["margin-bottom"]?b.find("#vspace").value(f.removePixelSuffix(n["margin-top"])):b.find("#vspace").value(""),n["margin-right"]===n["margin-left"]?b.find("#hspace").value(f.removePixelSuffix(n["margin-right"])):b.find("#hspace").value("")),n["border-width"]&&b.find("#border").value(f.removePixelSuffix(n["border-width"])),b.find("#style").value(_.serializeStyle(_.parseStyle(_.serializeStyle(n))))}}function g(e){function n(){e.onload=e.onerror=null,t.selection&&(t.selection.select(e),t.nodeChanged())}e.onload=function(){E.width||E.height||!N||_.setAttribs(e,{width:e.clientWidth,height:e.clientHeight}),n()},e.onerror=n}function h(){var e,n;p(),d(),E=u.extend(E,b.toJSON()),E.alt||(E.alt=""),E.title||(E.title=""),""===E.width&&(E.width=null),""===E.height&&(E.height=null),E.style||(E.style=null),E={src:E.src,alt:E.alt,title:E.title,width:E.width,height:E.height,style:E.style,caption:E.caption,"class":E["class"]},t.undoManager.transact(function(){if(E.src){if(""===E.title&&(E.title=null),x?_.setAttribs(x,E):(E.id="__mcenew",t.focus(),t.selection.setContent(_.createHTML("img",E)),x=_.get("__mcenew"),_.setAttrib(x,"id",null)),t.editorUpload.uploadImagesAuto(),!1===E.caption&&_.is(x.parentNode,"figure.image")&&(e=x.parentNode,_.setAttrib(x,"contenteditable",null),_.insertAfter(x,e),_.remove(e),t.selection.select(x),t.nodeChanged()),!0!==E.caption)g(x);else if(!_.is(x.parentNode,"figure.image")){n=x,x=x.cloneNode(!0),x.contentEditable=!0,e=_.create("figure",{"class":"image"}),e.appendChild(x),e.appendChild(_.create("figcaption",{contentEditable:!0},"Caption")),e.contentEditable=!1;var r=_.getParent(n,c);r?_.split(r,n,e):_.replace(e,n),t.selection.select(e)}}else if(x){var o=_.is(x.parentNode,"figure.image")?x.parentNode:x;_.remove(o),t.focus(),t.nodeChanged(),_.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}})}function v(e){var n,o,i,a=e.meta||{};T&&T.value(t.convertURL(this.value(),"src")),u.each(a,function(e,t){b.find("#"+t).value(e)}),a.width||a.height||(n=t.convertURL(this.value(),"src"),o=s.getPrependUrl(t),i=new r("^(?:[a-z]+:)?//","i"),o&&!i.test(n)&&n.substring(0,o.length)!==o&&(n=o+n),this.value(n),f.getImageSize(t.documentBaseURI.toAbsolute(this.value()),function(e){e.width&&e.height&&N&&(C=e.width,k=e.height,b.find("#width").value(C),b.find("#height").value(k))}))}function y(e){e.meta=b.toJSON()}var b,x,w,C,k,T,S,E={},_=t.dom,A=t.settings,N=s.hasDimensions(t);x=t.selection.getNode(),w=_.getParent(x,"figure.image"),w&&(x=_.select("img",w)[0]),x&&("IMG"!==x.nodeName||x.getAttribute("data-mce-object")||x.getAttribute("data-mce-placeholder"))&&(x=null),x&&(C=_.getAttrib(x,"width"),k=_.getAttrib(x,"height"),E={src:_.getAttrib(x,"src"),alt:_.getAttrib(x,"alt"),title:_.getAttrib(x,"title"),"class":_.getAttrib(x,"class"),width:C,height:k,caption:!!w}),o&&(T={type:"listbox",label:"Image list",values:f.buildListItems(o,function(e){e.value=t.convertURL(e.value||e.url,"src")},[{text:"None",value:""}]),value:E.src&&t.convertURL(E.src,"src"),onselect:function(e){var t=b.find("#alt");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),b.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){T=this}}),s.getClassList(t)&&(S={name:"class",type:"listbox",label:"Class",values:f.buildListItems(s.getClassList(t),function(e){e.value&&(e.textStyle=function(){return t.formatter.getCssText({inline:"img",classes:[e.value]})})})});var D=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:v,onbeforecall:y},T];if(s.hasDescription(t)&&D.push({name:"alt",type:"textbox",label:"Image description"}),s.hasImageTitle(t)&&D.push({name:"title",type:"textbox",label:"Image Title"}),N&&D.push({type:"container",label:"Dimensions",layout:"flex",direction:"row",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:3,onchange:d,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:3,onchange:d,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}),D.push(S),s.hasImageCaption(t)&&D.push({name:"caption",type:"checkbox",label:"Caption"}),s.hasAdvTab(t)||t.settings.images_upload_url){var R=[{title:"General",type:"form",items:D}];if(s.hasAdvTab(t)&&(x&&(x.style.marginLeft&&x.style.marginRight&&x.style.marginLeft===x.style.marginRight&&(E.hspace=f.removePixelSuffix(x.style.marginLeft)),x.style.marginTop&&x.style.marginBottom&&x.style.marginTop===x.style.marginBottom&&(E.vspace=f.removePixelSuffix(x.style.marginTop)),x.style.borderWidth&&(E.border=f.removePixelSuffix(x.style.borderWidth)),E.style=t.dom.serializeStyle(t.dom.parseStyle(t.dom.getAttrib(x,"style")))),R.push({title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:m},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,alignH:["left","right"],defaults:{type:"textbox",maxWidth:50,onchange:p},items:[{label:"Vertical space",name:"vspace"},{label:"Horizontal space",name:"hspace"},{label:"Border",name:"border"}]}]})),t.settings.images_upload_url){var P=".jpg,.jpeg,.png,.gif",I={title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:P,onchange:a},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:P,height:100,onchange:a}]};R.push(I)}b=t.windowManager.open({title:"Insert/edit image",data:E,bodyType:"tabpanel",body:R,onSubmit:h})}else b=t.windowManager.open({title:"Insert/edit image",data:E,body:D,onSubmit:h})}function p(){o(d)}return{open:p}}}),i("2",["6"],function(e){return{register:function(t){t.addCommand("mceImage",e(t).open)}}}),i("3",["7"],function(e){var t=function(e){var t=e.attr("class");return t&&/\bimage\b/.test(t)},n=function(n){return function(r){for(var o,i=r.length,a=function(e){e.attr("contenteditable",n?"true":null)};i--;)o=r[i],t(o)&&(o.attr("contenteditable",n?"false":null),e.each(o.getAll("figcaption"),a),e.each(o.getAll("img"),a))}};return{setup:function(e){e.on("preInit",function(){e.parser.addNodeFilter("figure",n(!0)),e.serializer.addNodeFilter("figure",n(!1))})}}}),i("4",["6"],function(e){return{register:function(t){t.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:e(t).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),t.addMenuItem("image",{icon:"image",text:"Image",onclick:e(t).open,context:"insert",prependToContext:!0})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("image",function(e){n.setup(e),r.register(e),t.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("ephox.imagetools.util.Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(r,this),e(o,this))}function n(e){var t=this;if(null===this._state)return void this._deferreds.push(e);c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,i.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var c=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var o=this;return new t(function(t,i){n.call(o,new a(e,r,t,i))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},t}),i("ephox.imagetools.util.Canvas",[],function(){function e(e,t){return o(document.createElement("canvas"),e,t)}function t(t){var r,o;return r=e(t.width,t.height),o=n(r),o.drawImage(t,0,0),r}function n(e){return e.getContext("2d")}function r(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function o(e,t,n){return e.width=t,e.height=n,e}return{create:e,clone:t,resize:o,get2dContext:n,get3dContext:r}}),i("ephox.imagetools.util.Mime",[],function(){function e(e){var t=document.createElement("a");return t.href=e,t.pathname}function t(t){var n,r,o,i;return 0===t.indexOf("data:")?(t=t.split(","),i=/data:([^;]+)/.exec(t[0]),i?i[1]:""):(o={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"},n=e(t).split("."),r=n[n.length-1],r&&(r=r.toLowerCase()),o[r])}return{guessMimeType:t}}),i("ephox.imagetools.util.ImageSize",[],function(){function e(e){return e.naturalWidth||e.width}function t(e){return e.naturalHeight||e.height}return{getWidth:e,getHeight:t}}),i("ephox.imagetools.util.Conversions",["ephox.imagetools.util.Promise","ephox.imagetools.util.Canvas","ephox.imagetools.util.Mime","ephox.imagetools.util.ImageSize"],function(e,t,n,r){function o(t){return new e(function(e){function n(){t.removeEventListener("load",n),e(t)}t.complete?e(t):t.addEventListener("load",n)})}function i(e){return o(e).then(function(e){var n,o;return o=t.create(r.getWidth(e),r.getHeight(e)),n=t.get2dContext(o),n.drawImage(e,0,0),o})}function a(e){return o(e).then(function(e){var t=e.src;return 0===t.indexOf("blob:")?c(t):0===t.indexOf("data:")?l(t):i(e).then(function(e){return l(e.toDataURL(n.guessMimeType(t)))})})}function u(t){return new e(function(e){function n(){r.removeEventListener("load",n),e(r)}var r=new Image;r.addEventListener("load",n),r.src=URL.createObjectURL(t),r.complete&&n()})}function c(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function s(e){var t,n,r,o,i,a;if(e=e.split(","),o=/data:([^;]+)/.exec(e[0]),o&&(i=o[1]),t=atob(e[1]),window.WebKitBlobBuilder){for(a=new WebKitBlobBuilder,n=new ArrayBuffer(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return a.append(n),a.getBlob(i)}for(n=new Uint8Array(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:i})}function l(t){return new e(function(e){e(s(t))})}function f(e){return 0===e.indexOf("blob:")?c(e):0===e.indexOf("data:")?l(e):null}function d(t,n,r){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new e(function(e){t.toBlob(function(t){e(t)},n,r)}):l(t.toDataURL(n,r))}function p(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}function m(e){return p(e).then(function(e){return e.split(",")[1]})}function g(e){URL.revokeObjectURL(e.src)}return{blobToImage:u,imageToBlob:a,blobToDataUri:p,blobToBase64:m,imageToCanvas:i,canvasToBlob:d,revokeImageUrl:g,uriToBlob:f,dataUriToBlobSync:s}}),i("ephox.imagetools.util.ImageResult",["ephox.imagetools.util.Promise","ephox.imagetools.util.Conversions","ephox.imagetools.util.Mime","ephox.imagetools.util.Canvas"],function(e,t,n,r){function o(e,n){function o(){return n}function i(r,o){return t.canvasToBlob(e,r||n,o)}function a(t,r){return e.toDataURL(t||n,r)}function u(e,t){return a(e,t).split(",")[1]}function c(){return r.clone(e)}return{getType:o,toBlob:i,toDataURL:a,toBase64:u,toCanvas:c}}function i(e){return t.blobToImage(e).then(function(e){var n=t.imageToCanvas(e);return t.revokeImageUrl(e),n}).then(function(t){return o(t,e.type)})}function a(t,n){return new e(function(e){e(o(t,n))})}function u(e){var r=n.guessMimeType(e.src);return t.imageToCanvas(e).then(function(e){return o(e,r)})}return{fromBlob:i,fromCanvas:a,fromImage:u}}),i("ephox.imagetools.api.BlobConversions",["ephox.imagetools.util.Conversions","ephox.imagetools.util.ImageResult"],function(e,t){return{blobToImage:function(t){return e.blobToImage(t)},imageToBlob:function(t){return e.imageToBlob(t)},blobToDataUri:function(t){return e.blobToDataUri(t)},blobToBase64:function(t){return e.blobToBase64(t)},blobToImageResult:function(e){return t.fromBlob(e)},dataUriToImageResult:function(n){return e.uriToBlob(n).then(t.fromBlob)},imageToImageResult:function(e){return t.fromImage(e)},imageResultToBlob:function(e,t,n){return e.toBlob(t,n)},imageResultToBlobSync:function(t,n,r){return e.dataUriToBlobSync(t.toDataURL(n,r))}}}),i("ephox.imagetools.transformations.ColorMatrix",[],function(){function e(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function t(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function n(e,t){var n,r,o,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];u[r+5*n]=i}}return u}function r(t,n){return n=e(n,0,1),t.map(function(t,r){return r%6==0?t=1-(1-t)*n:t*=n,e(t,0,1)})}function o(t,r){var o;return r=e(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o=0===o?f[r]:f[Math.floor(r)]*(1-o)+f[Math.floor(r)+1]*o,o=127*o+127),n(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])}function i(t,r){var o,i,a,u;return r=e(r,-1,1),o=1+(r>0?3*r:r),i=.3086,a=.6094,u=.082,n(t,[i*(1-o)+o,a*(1-o),u*(1-o),0,0,i*(1-o),a*(1-o)+o,u*(1-o),0,0,i*(1-o),a*(1-o),u*(1-o)+o,0,0,0,0,0,1,0,0,0,0,0,1])}function a(t,r){var o,i,a,u,c;return r=e(r,-180,180)/180*Math.PI,o=Math.cos(r),i=Math.sin(r),a=.213,u=.715,c=.072,n(t,[a+o*(1-a)+i*-a,u+o*-u+i*-u,c+o*-c+i*(1-c),0,0,a+o*-a+.143*i,u+o*(1-u)+.14*i,c+o*-c+-.283*i,0,0,a+o*-a+i*-(1-a),u+o*-u+i*u,c+o*(1-c)+i*c,0,0,0,0,0,1,0,0,0,0,0,1])}function u(t,r){return r=e(255*r,-255,255),n(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])}function c(t,r,o,i){return r=e(r,0,2),o=e(o,0,2),i=e(i,0,2),n(t,[r,0,0,0,0,0,o,0,0,0,0,0,i,0,0,0,0,0,1,0,0,0,0,0,1])}function s(t,o){return o=e(o,0,1),n(t,r([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],o))}function l(t,o){return o=e(o,0,1),n(t,r([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],o))}var f=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:t,adjust:r,multiply:n,adjustContrast:o,adjustBrightness:u,adjustSaturation:i,adjustHue:a,adjustColors:c,adjustSepia:s,adjustGrayscale:l}}),i("ephox.imagetools.transformations.Filters",["ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageResult","ephox.imagetools.transformations.ColorMatrix"],function(e,t,n){function r(n,r){function o(e,t){var n,r,o,i,a,u=e.data,c=t[0],s=t[1],l=t[2],f=t[3],d=t[4],p=t[5],m=t[6],g=t[7],h=t[8],v=t[9],y=t[10],b=t[11],x=t[12],w=t[13],C=t[14],k=t[15],T=t[16],S=t[17],E=t[18],_=t[19];for(a=0;a<u.length;a+=4)n=u[a],r=u[a+1],o=u[a+2],i=u[a+3],u[a]=n*c+r*s+o*l+i*f+d,u[a+1]=n*p+r*m+o*g+i*h+v,u[a+2]=n*y+r*b+o*x+i*w+C,u[a+3]=n*k+r*T+o*S+i*E+_;return e}var i,a=n.toCanvas(),u=e.get2dContext(a);return i=o(u.getImageData(0,0,a.width,a.height),r),u.putImageData(i,0,0),t.fromCanvas(a,n.getType())}function o(n,r){function o(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x;for(a=Math.round(Math.sqrt(n.length)),u=Math.floor(a/2),o=e.data,i=t.data,b=e.width,x=e.height,s=0;s<x;s++)for(c=0;c<b;c++){for(l=f=d=0,m=0;m<a;m++)for(p=0;p<a;p++)g=r(c+p-u,0,b-1),h=r(s+m-u,0,x-1),v=4*(h*b+g),y=n[m*a+p],l+=o[v]*y,f+=o[v+1]*y,d+=o[v+2]*y;v=4*(s*b+c),i[v]=r(l,0,255),i[v+1]=r(f,0,255),i[v+2]=r(d,0,255)}return t}var i,a,u=n.toCanvas(),c=e.get2dContext(u);return i=c.getImageData(0,0,u.width,u.height),a=c.getImageData(0,0,u.width,u.height),a=o(i,a,r),c.putImageData(a,0,0),t.fromCanvas(u,n.getType())}function i(n){return function(r,o){function i(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}var a,u,c=r.toCanvas(),s=e.get2dContext(c),l=new Array(256);for(u=0;u<l.length;u++)l[u]=n(u,o);return a=i(s.getImageData(0,0,c.width,c.height),l),s.putImageData(a,0,0),t.fromCanvas(c,r.getType())}}function a(e){return function(t,o){return r(t,e(n.identity(),o))}}function u(e){return function(t){return r(t,e)}}function c(e){return function(t){return o(t,e)}}return{invert:u([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:a(n.adjustBrightness),hue:a(n.adjustHue),saturate:a(n.adjustSaturation),contrast:a(n.adjustContrast),grayscale:a(n.adjustGrayscale),sepia:a(n.adjustSepia),colorize:function(e,t,o,i){return r(e,n.adjustColors(n.identity(),t,o,i))},sharpen:c([0,-1,0,-1,5,-1,0,-1,0]),emboss:c([-2,-1,0,-1,1,1,0,1,2]),gamma:i(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:i(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:r,convoluteFilter:o}}),i("ephox.imagetools.transformations.ImageResizerCanvas",["ephox.imagetools.util.Promise","ephox.imagetools.util.Conversions","ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageSize"],function(e,t,n,r){function o(e,t,n){var a=r.getWidth(e),u=r.getHeight(e),c=t/a,s=n/u,l=!1;(c<.5||c>2)&&(c=c<.5?.5:2,l=!0),(s<.5||s>2)&&(s=s<.5?.5:2,l=!0);var f=i(e,c,s);return l?f.then(function(e){return o(e,t,n)}):f}function i(t,o,i){return new e(function(e){var a=r.getWidth(t),u=r.getHeight(t),c=Math.floor(a*o),s=Math.floor(u*i),l=n.create(c,s);n.get2dContext(l).drawImage(t,0,0,a,u,0,0,c,s),e(l)})}return{scale:o}}),i("ephox.imagetools.transformations.ImageTools",["ephox.imagetools.util.Canvas","ephox.imagetools.util.ImageResult","ephox.imagetools.transformations.ImageResizerCanvas"],function(e,t,n){function r(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i),u=0,c=0;return r=r<0?360+r:r,90!=r&&270!=r||e.resize(i,i.height,i.width),90!=r&&180!=r||(u=i.width),270!=r&&180!=r||(c=i.height),a.translate(u,c),a.rotate(r*Math.PI/180),a.drawImage(o,0,0),t.fromCanvas(i,n.getType())}function o(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i);return"v"==r?(a.scale(1,-1),a.drawImage(o,0,-i.height)):(a.scale(-1,1),a.drawImage(o,-i.width,0)),t.fromCanvas(i,n.getType())}function i(n,r,o,i,a){var u=n.toCanvas(),c=e.create(i,a);return e.get2dContext(c).drawImage(u,-r,-o),t.fromCanvas(c,n.getType())}function a(e,r,o){return n.scale(e.toCanvas(),r,o).then(function(n){return t.fromCanvas(n,e.getType())})}return{rotate:r,flip:o,crop:i,resize:a}}),i("ephox.imagetools.api.ImageTransformations",["ephox.imagetools.transformations.Filters","ephox.imagetools.transformations.ImageTools"],function(e,t){var n=function(t){return e.invert(t)},r=function(t){return e.sharpen(t)},o=function(t){return e.emboss(t)},i=function(t,n){return e.gamma(t,n)},a=function(t,n){return e.exposure(t,n)},u=function(t,n,r,o){return e.colorize(t,n,r,o)};return{invert:n,sharpen:r,emboss:o,brightness:function(t,n){return e.brightness(t,n)},hue:function(t,n){return e.hue(t,n)},saturate:function(t,n){return e.saturate(t,n)},contrast:function(t,n){return e.contrast(t,n)},grayscale:function(t,n){return e.grayscale(t,n)},sepia:function(t,n){return e.sepia(t,n)},colorize:u,gamma:i,exposure:a,flip:function(e,n){return t.flip(e,n)},crop:function(e,n,r,o,i){return t.crop(e,n,r,o,i)},resize:function(e,n,r){return t.resize(e,n,r)},rotate:function(e,n){return t.rotate(e,n)}}}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=n!==undefined?n:e,o=0;o<t.length&&r!==undefined&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return e[t]!==undefined&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=n!==undefined?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(r===undefined)throw e+" not available on this browser";return r}}}),i("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),a("global!clearTimeout",clearTimeout),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),i("tinymce.core.util.URI",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.URI")}),i("tinymce.plugins.imagetools.api.Settings",[],function(){return{getToolbarItems:function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")},getProxyUrl:function(e){return e.getParam("imagetools_proxy")}}}),i("tinymce.plugins.imagetools.core.ImageSize",[],function(){function e(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function t(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function n(e){return{w:e.naturalWidth,h:e.naturalHeight}}return{getImageSize:e,setImageSize:t,getNaturalImageSize:n}}),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){
return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("FileReader"))}}),i("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),i("tinymce.plugins.imagetools.core.Utils",["ephox.sand.api.FileReader","ephox.sand.api.XMLHttpRequest","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r){var o=function(e){return null!==e&&e!==undefined},i=function(e,t){var n;return n=t.reduce(function(e,t){return o(e)?e[t]:undefined},e),o(n)?n:null},a=function(e,o){return new n(function(n){var i;i=new t,i.onreadystatechange=function(){4===i.readyState&&n({status:i.status,blob:this.response})},i.open("GET",e,!0),r.each(o,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})};return{traverse:i,readBlob:function(t){return new n(function(n){var r=new e;r.onload=function(e){var t=e.target;n(t.result)},r.readAsText(t)})},requestUrlAsBlob:a,parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}}}),i("tinymce.plugins.imagetools.core.Errors",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","tinymce.core.util.Promise","tinymce.plugins.imagetools.core.Utils"],function(e,t,n,r){var o=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],i=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],a=function(e){return 400===e||403===e||500===e},u=function(n){return"ImageProxy HTTP error: "+e.find(o,function(e){return n===e.code}).fold(t.constant("Unknown ImageProxy error"),function(e){return e.message})},c=function(e){var t=u(e);return n.reject(t)},s=function(n){return e.find(i,function(e){return e.type===n}).fold(t.constant("Unknown service error"),function(e){return e.message})},l=function(e){var t=r.parseJson(e),n=r.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?s(n):"Invalid JSON in service error message")},f=function(e,t){return r.readBlob(t).then(function(e){var t=l(e);return n.reject(t)})};return{handleServiceErrorResponse:function(e,t){return a(e)?f(e,t):c(e)},handleHttpError:c,getHttpErrorMsg:u,getServiceErrorMsg:s}}),i("tinymce.plugins.imagetools.core.Proxy",["tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.core.Errors","tinymce.plugins.imagetools.core.Utils"],function(e,t,n,r){function o(t){return r.requestUrlAsBlob(t,{}).then(function(t){return t.status<200||t.status>=300?n.handleHttpError(t.status):e.resolve(t.blob)})}var i=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},a=function(t,o){return r.requestUrlAsBlob(i(t,o),{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":o}).then(function(t){return t.status<200||t.status>=300?n.handleServiceErrorResponse(t.status,t.blob):e.resolve(t.blob)})};return{getUrl:function(e,t){return t?a(e,t):o(e)}}}),a("global!Math",Math),a("global!setTimeout",setTimeout),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),i("tinymce.plugins.imagetools.core.UndoStack",[],function(){return function(){function e(e){var t;return t=i.splice(++a),i.push(e),{state:e,removed:t}}function t(){if(r())return i[--a]}function n(){if(o())return i[++a]}function r(){return a>0}function o(){return-1!==a&&a<i.length-1}var i=[],a=-1;return{data:i,add:e,undo:t,redo:n,canUndo:r,canRedo:o}}}),a("global!document",document),a("global!Image",Image),i("tinymce.core.geom.Rect",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.geom.Rect")}),i("tinymce.plugins.imagetools.core.LoadImage",["tinymce.core.util.Promise"],function(e){return{loadImage:function(t){return new e(function(e){var n=function(){t.removeEventListener("load",n),e(t)};t.complete?e(t):t.addEventListener("load",n)})}}}),i("tinymce.core.dom.DomQuery",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DomQuery")}),i("tinymce.core.util.Observable",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Observable")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.plugins.imagetools.ui.CropRect",["tinymce.core.dom.DomQuery","tinymce.core.geom.Rect","tinymce.core.ui.Factory","tinymce.core.util.Observable","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i){var a=0;return function(u,c,s,l,f){function d(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function p(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(){return p(s,u)}function g(e,n,r,o){var i,a,c,l,f;i=n.x,a=n.y,c=n.w,l=n.h,i+=r*e.deltaX,a+=o*e.deltaY,c+=r*e.deltaW,l+=o*e.deltaH,c<20&&(c=20),l<20&&(l=20),f=u=t.clamp({x:i,y:a,w:c,h:l},s,"move"===e.name),f=p(s,f),T.fire("updateRect",{rect:f}),w(f)}function h(){function t(e){var t;return new(n.get("DragHelper"))(N,{document:l.ownerDocument,handle:N+"-"+e.name,start:function(){t=u},drag:function(n){g(e,t,n.deltaX,n.deltaY)}})}e('<div id="'+N+'" class="'+A+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(l),o.each(_,function(t){e("#"+N,l).append('<div id="'+N+"-"+t+'"class="'+A+'croprect-block" style="display: none" data-mce-bogus="all">')}),o.each(S,function(t){e("#"+N,l).append('<div id="'+N+"-"+t.name+'" class="'+A+"croprect-handle "+A+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false">')}),E=o.map(S,t),y(u),e(l).on("focusin focusout",function(t){e(t.target).attr("aria-grabbed","focus"===t.type)}),e(l).on("keydown",function(e){function t(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),g(n,r,o,i)}var n;switch(o.each(S,function(t){if(e.target.id===N+"-"+t.name)return n=t,!1}),e.keyCode){case i.LEFT:t(e,n,u,-10,0);break;case i.RIGHT:t(e,n,u,10,0);break;case i.UP:t(e,n,u,0,-10);break;case i.DOWN:t(e,n,u,0,10);break;case i.ENTER:case i.SPACEBAR:e.preventDefault(),f()}})}function v(t){var n;n=o.map(S,function(e){return"#"+N+"-"+e.name}).concat(o.map(_,function(e){return"#"+N+"-"+e})).join(","),t?e(n,l).show():e(n,l).hide()}function y(t){function n(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),e("#"+N+"-"+t,l).css({left:n.x,top:n.y,width:n.w,height:n.h})}o.each(S,function(n){e("#"+N+"-"+n.name,l).css({left:t.w*n.xMul+t.x,top:t.h*n.yMul+t.y})}),n("top",{x:c.x,y:c.y,w:c.w,h:t.y-c.y}),n("right",{x:t.x+t.w,y:t.y,w:c.w-t.x-t.w+c.x,h:t.h}),n("bottom",{x:c.x,y:t.y+t.h,w:c.w,h:c.h-t.y-t.h+c.y}),n("left",{x:c.x,y:t.y,w:t.x-c.x,h:t.h}),n("move",t)}function b(e){u=e,y(u)}function x(e){c=e,y(u)}function w(e){b(d(s,e))}function C(e){s=e,y(u)}function k(){o.each(E,function(e){e.destroy()}),E=[]}var T,S,E,_,A="mce-",N=A+"crid-"+a++;return S=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],_=["top","right","bottom","left"],h(l),T=o.extend({toggleVisibility:v,setClampRect:C,setRect:b,getInnerRect:m,setInnerRect:w,setViewPortRect:x,destroy:k},r)}}),i("tinymce.plugins.imagetools.ui.ImagePanel",["global!document","global!Image","tinymce.core.geom.Rect","tinymce.core.ui.Factory","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.core.LoadImage","tinymce.plugins.imagetools.ui.CropRect"],function(e,t,n,r,o,i,a,u){return{create:function(o){return new(r.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(r){var o=this,i=new t;i.src=r,a.loadImage(i).then(function(){var t,r,a=o.state.get("viewRect");if(r=o.$el.find("img"),r[0])r.replaceWith(i);else{var u=e.createElement("div");u.className="mce-imagepanel-bg",o.getEl().appendChild(u),o.getEl().appendChild(i)}t={x:0,y:0,w:i.naturalWidth,h:i.naturalHeight},o.state.set("viewRect",t),o.state.set("rect",n.inflate(t,-20,-20)),a&&a.w===t.w&&a.h===t.h||o.zoomFit(),o.repaintImage(),o.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i,a,u=this;a=10,e=u.$el.find("img"),t=u.getEl().clientWidth,n=u.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,i=Math.min((t-a)/r,(n-a)/o),i>=1&&(i=1),u.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,u,c,s,l;l=this.getEl(),c=this.zoom(),s=this.state.get("rect"),a=this.$el.find("img"),u=this.$el.find(".mce-imagepanel-bg"),o=l.offsetWidth,i=l.offsetHeight,n=a[0].naturalWidth*c,r=a[0].naturalHeight*c,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),u.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:s.x*c+e,y:s.y*c+t,w:s.w*c,h:s.h*c}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){function e(e){t.cropRect=new u(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}}))(o)}}}),i("tinymce.plugins.imagetools.ui.Dialog",["ephox.imagetools.api.BlobConversions","ephox.imagetools.api.ImageTransformations","ephox.sand.api.URL","global!Math","global!setTimeout","tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.plugins.imagetools.core.UndoStack","tinymce.plugins.imagetools.ui.ImagePanel"],function(e,t,n,r,o,i,a,u,c,s,l){function f(e){return{blob:e,url:n.createObjectURL(e)}}function d(e){e&&n.revokeObjectURL(e.url)}function p(e){c.each(e,d)}function m(n,u,m,g){function h(e){var t,n,o,i;t=U.find("#w")[0],n=U.find("#h")[0],o=parseInt(t.value(),10),i=parseInt(n.value(),10),U.find("#constrain")[0].checked()&&se&&le&&o&&i&&("w"===e.control.settings.name?(i=r.round(o*fe),n.value(i)):(o=r.round(i*de),t.value(o))),se=o,le=i}function v(e){return r.round(100*e)+"%"}function y(){U.find("#undo").disabled(!pe.canUndo()),U.find("#redo").disabled(!pe.canRedo()),U.statusbar.find("#save").disabled(!pe.canUndo())}function b(){U.find("#undo").disabled(!0),U.find("#redo").disabled(!0)}function x(e){e&&K.imageSrc(e.url)}function w(e){return function(){var t=c.grep(ce,function(t){return t.settings.name!==e});c.each(t,function(e){e.hide()}),e.show(),e.focus()}}function C(e){q=f(e),x(q)}function k(e){u=f(e),x(u),p(pe.add(u).removed),y()}function T(){var n=K.selection();e.blobToImageResult(u.blob).then(function(e){t.crop(e,n.x,n.y,n.w,n.h).then(me).then(function(e){k(e),_()})})}function S(t){var n=[].slice.call(arguments,1);return function(){var r=q||u;e.blobToImageResult(r.blob).then(function(e){t.apply(this,[e].concat(n)).then(me).then(C)})}}function E(t){var n=[].slice.call(arguments,1);return function(){e.blobToImageResult(u.blob).then(function(e){t.apply(this,[e].concat(n)).then(me).then(k)})}}function _(){x(u),d(q),w(W)(),y()}function A(e,t){q?t():o(function(){e-- >0?A(e,t):n.windowManager.alert("Error: failed to apply image operation.")},10)}function N(){q?(k(q.blob),_()):A(100,N)}function D(){var e=K.zoom();e<2&&(e+=.1),K.zoom(e)}function R(){var e=K.zoom();e>.1&&(e-=.1),K.zoom(e)}function P(){u=pe.undo(),x(u),y()}function I(){u=pe.redo(),x(u),y()}function O(){m(u.blob),U.close()}function B(e){return a.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function M(t,n){return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){b(),e.blobToImageResult(u.blob).then(function(e){return n(e)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})})}function L(t,n,r,o,i){function a(t){e.blobToImageResult(u.blob).then(function(e){return n(e,t)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})}return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){a(e.value)},minValue:o,maxValue:i,value:r,previewFilter:v},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){this.find("slider").value(r),b()})}function F(t,n){function r(){var t,r,o;t=U.find("#r")[0].value(),r=U.find("#g")[0].value(),o=U.find("#b")[0].value(),e.blobToImageResult(u.blob).then(function(e){return n(e,t,r,o)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})}return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){U.find("#r,#g,#b").value(1),b()})}function H(e){!0===e.control.value()&&(fe=le/se,de=se/le)}var U,W,j,q,$,z,V,K,G,X,Y,Q,J,Z,ee,te,ne,re,oe,ie,ae,ue,ce,se,le,fe,de,pe=new s,me=function(e){return e.toBlob()};$=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:T}]).hide().on("show hide",function(e){K.toggleCropRect("show"===e.type)}).on("show",b),z=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:h},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:h},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:H},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",function(e){var n=parseInt(U.find("#w").value(),10),r=parseInt(U.find("#h").value(),10);e.preventDefault(),E(t.resize,n,r)(),_()}).on("show",b),V=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:S(t.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:S(t.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:S(t.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:S(t.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",b),Y=M("Invert",t.invert),oe=M("Sharpen",t.sharpen),ie=M("Emboss",t.emboss),Q=L("Brightness",t.brightness,0,-1,1),J=L("Hue",t.hue,180,0,360),Z=L("Saturate",t.saturate,0,-1,1),ee=L("Contrast",t.contrast,0,-1,1),te=L("Grayscale",t.grayscale,0,0,1),ne=L("Sepia",t.sepia,0,0,1),re=F("Colorize",t.colorize),ae=L("Gamma",t.gamma,0,-1,1),ue=L("Exposure",t.exposure,1,0,2),j=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:w(J)},{text:"saturate",icon:"saturate",onclick:w(Z)},{text:"sepia",icon:"sepia",onclick:w(ne)},{text:"emboss",icon:"emboss",onclick:w(ie)},{text:"exposure",icon:"exposure",onclick:w(ue)},{type:"spacer",flex:1}]).hide(),W=B([{tooltip:"Crop",icon:"crop",onclick:w($)},{tooltip:"Resize",icon:"resize2",onclick:w(z)},{tooltip:"Orientation",icon:"orientation",onclick:w(V)},{tooltip:"Brightness",icon:"sun",onclick:w(Q)},{tooltip:"Sharpen",icon:"sharpen",onclick:w(oe)},{tooltip:"Contrast",icon:"contrast",onclick:w(ee)},{tooltip:"Color levels",icon:"drop",onclick:w(re)},{tooltip:"Gamma",icon:"gamma",onclick:w(ae)},{tooltip:"Invert",icon:"invert",onclick:w(Y)}]),K=l.create({flex:1,imageSrc:u.url}),G=a.create("Container",{layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:P},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:I},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:D},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:R}]}),X=a.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[G,K]}),ce=[W,$,z,V,j,Y,Q,J,Z,ee,te,ne,re,oe,ie,ae,ue],U=n.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:r.min(i.DOM.getViewPort().w,800),minHeight:r.min(i.DOM.getViewPort().h,650),title:"Edit image",items:ce.concat([X]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:O},{text:"Cancel",onclick:"close"}]}),U.on("close",function(){g(),p(pe.data),pe=null,q=null}),pe.add(u),y(),K.on("load",function(){se=K.imageSize().w,le=K.imageSize().h,fe=le/se,de=se/le,U.find("#w").value(se),U.find("#h").value(le)}),K.on("crop",T)}function g(e,t){return new u(function(n,r){return t.toBlob().then(function(t){m(e,f(t),n,r)})})}return{edit:g}}),i("tinymce.plugins.imagetools.core.Actions",["ephox.imagetools.api.BlobConversions","ephox.imagetools.api.ImageTransformations","ephox.katamari.api.Fun","ephox.sand.api.URL","global!clearTimeout","tinymce.core.util.Delay","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.plugins.imagetools.api.Settings","tinymce.plugins.imagetools.core.ImageSize","tinymce.plugins.imagetools.core.Proxy","tinymce.plugins.imagetools.ui.Dialog"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=0,m=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(b(e,t)||x(e,t)||e.settings.imagetools_proxy)},g=function(e,t){e.notificationManager.open({text:t,type:"error"})},h=function(e){return e.selection.getNode()},v=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null},y=function(){return"imagetools"+p++},b=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new c(n).host===e.documentBaseURI.host},x=function(e,t){return-1!==u.inArray(e.settings.imagetools_cors_hosts,new c(t.src).host)},w=function(e){return e.settings.api_key||e.settings.imagetools_api_key},C=function(t,n){var r,o=n.src;return x(t,n)?f.getUrl(n.src,null):b(t,n)?e.imageToBlob(n):(o=s.getProxyUrl(t),o+=(-1===o.indexOf("?")?"?":"&")+"url="+encodeURIComponent(n.src),r=w(t),f.getUrl(o,r))},k=function(e){var t;return t=e.editorUpload.blobCache.getByUri(h(e).src),t?a.resolve(t.blob()):C(e,h(e))},T=function(e,t){var n=i.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},e.settings.images_upload_timeout||3e4);t.set(n)},S=function(e){o(e.get())},E=function(e,t,n,r){return t.toBlob().then(function(o){var i,a,u,c,s;return u=e.editorUpload.blobCache,s=h(e),i=s.src,e.settings.images_reuse_filename&&(c=u.getByUri(i),c?(i=c.uri(),a=c.name()):a=v(e,i)),c=u.create({id:y(),blob:o,base64:t.toBase64(),uri:i,name:a}),u.add(c),e.undoManager.transact(function(){function t(){e.$(s).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(S(r),T(e,r))}e.$(s).on("load",t),e.$(s).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})},_=function(t,r,o){return function(){return t._scanForImages().then(n.curry(k,t)).then(e.blobToImageResult).then(o).then(function(e){return E(t,e,!1,r)},function(e){g(t,e)})}};return{rotate:function(e,n,r){return function(){return _(e,n,function(n){var o=l.getImageSize(h(e));return o&&l.setImageSize(h(e),{w:o.h,h:o.w}),t.rotate(n,r)})()}},flip:function(e,n,r){return function(){return _(e,n,function(e){return t.flip(e,r)})()}},editImageDialog:function(t,o){return function(){var i=h(t),u=l.getNaturalImageSize(i),c=function(t){return new a(function(n){e.blobToImage(t).then(function(e){var o=l.getNaturalImageSize(e);u.w===o.w&&u.h===o.h||l.getImageSize(i)&&l.setImageSize(i,o),r.revokeObjectURL(e.src),n(t)})})},s=function(t,n){return d.edit(t,n).then(c).then(e.blobToImageResult).then(function(e){return E(t,e,!0,o)},function(){})};k(t).then(e.blobToImageResult).then(n.curry(s,t),function(e){g(t,e)})}},isEditableImage:m,cancelTimedUpload:S}}),i("tinymce.plugins.imagetools.api.Commands",["tinymce.core.util.Tools","tinymce.plugins.imagetools.core.Actions"],function(e,t){return{register:function(n,r){e.each({mceImageRotateLeft:t.rotate(n,r,-90),mceImageRotateRight:t.rotate(n,r,90),mceImageFlipVertical:t.flip(n,r,"v"),mceImageFlipHorizontal:t.flip(n,r,"h"),mceEditImage:t.editImageDialog(n,r)},function(e,t){n.addCommand(t,e)})}}}),i("tinymce.plugins.imagetools.core.UploadSelectedImage",["tinymce.plugins.imagetools.core.Actions"],function(e){return{setup:function(t,n,r){t.on("NodeChange",function(o){var i=r.get();i&&i.src!==o.element.src&&(e.cancelTimedUpload(n),t.editorUpload.uploadImagesAuto(),r.set(null)),e.isEditableImage(t,o.element)&&r.set(o.element)})}}}),i("tinymce.plugins.imagetools.ui.Buttons",[],function(){return{register:function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}}}),i("tinymce.plugins.imagetools.ui.ContextToolbar",["ephox.katamari.api.Fun","tinymce.plugins.imagetools.api.Settings","tinymce.plugins.imagetools.core.Actions"],function(e,t,n){return{register:function(r){r.addContextToolbar(e.curry(n.isEditableImage,r),t.getToolbarItems(r))}}}),i("tinymce.plugins.imagetools.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.imagetools.api.Commands","tinymce.plugins.imagetools.core.UploadSelectedImage","tinymce.plugins.imagetools.ui.Buttons","tinymce.plugins.imagetools.ui.ContextToolbar"],function(e,t,n,r,o,i){return t.add("imagetools",function(t){var a=e(0),u=e(null);n.register(t,a),o.register(t),i.register(t),r.setup(t,a,u)}),function(){}}),r("tinymce.plugins.imagetools.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("7",tinymce.util.Tools.resolve),i("2",["7"],function(e){return e("tinymce.PluginManager")}),i("8",["7"],function(e){return e("tinymce.util.Tools")}),i("11",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(r,this),e(o,this))}function n(e){var t=this;return null===this._state?void this._deferreds.push(e):void c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,i.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var c=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var o=this;return new t(function(t,i){n.call(o,new a(e,r,t,i))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},t}),i("12",[],function(){function e(e,t){return o(document.createElement("canvas"),e,t)}function t(t){var r,o;return r=e(t.width,t.height),o=n(r),o.drawImage(t,0,0),r}function n(e){return e.getContext("2d")}function r(e){var t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){}return t||(t=null),t}function o(e,t,n){return e.width=t,e.height=n,e}return{create:e,clone:t,resize:o,get2dContext:n,get3dContext:r}}),i("13",[],function(){function e(e){var t=document.createElement("a");return t.href=e,t.pathname}function t(t){var n,r,o,i;return 0===t.indexOf("data:")?(t=t.split(","),i=/data:([^;]+)/.exec(t[0]),i?i[1]:""):(o={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"},n=e(t).split("."),r=n[n.length-1],r&&(r=r.toLowerCase()),o[r])}return{guessMimeType:t}}),i("14",[],function(){function e(e){return e.naturalWidth||e.width}function t(e){return e.naturalHeight||e.height}return{getWidth:e,getHeight:t}}),i("o",["11","12","13","14"],function(e,t,n,r){function o(t){return new e(function(e){function n(){t.removeEventListener("load",n),e(t)}t.complete?e(t):t.addEventListener("load",n)})}function i(e){return o(e).then(function(e){var n,o;return o=t.create(r.getWidth(e),r.getHeight(e)),n=t.get2dContext(o),n.drawImage(e,0,0),o})}function a(e){return o(e).then(function(e){var t=e.src;return 0===t.indexOf("blob:")?c(t):0===t.indexOf("data:")?l(t):i(e).then(function(e){return l(e.toDataURL(n.guessMimeType(t)))})})}function u(t){return new e(function(e){function n(){r.removeEventListener("load",n),e(r)}var r=new Image;r.addEventListener("load",n),r.src=URL.createObjectURL(t),r.complete&&n()})}function c(t){return new e(function(e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(){200==this.status&&e(this.response)},n.send()})}function s(e){var t,n,r,o,i,a;if(e=e.split(","),o=/data:([^;]+)/.exec(e[0]),o&&(i=o[1]),t=atob(e[1]),window.WebKitBlobBuilder){for(a=new WebKitBlobBuilder,n=new ArrayBuffer(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return a.append(n),a.getBlob(i)}for(n=new Uint8Array(t.length),r=0;r<n.length;r++)n[r]=t.charCodeAt(r);return new Blob([n],{type:i})}function l(t){return new e(function(e){e(s(t))})}function f(e){return 0===e.indexOf("blob:")?c(e):0===e.indexOf("data:")?l(e):null}function d(t,n,r){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new e(function(e){t.toBlob(function(t){e(t)},n,r)}):l(t.toDataURL(n,r))}function p(t){return new e(function(e){var n=new FileReader;n.onloadend=function(){e(n.result)},n.readAsDataURL(t)})}function m(e){return p(e).then(function(e){return e.split(",")[1]})}function g(e){URL.revokeObjectURL(e.src)}return{blobToImage:u,imageToBlob:a,blobToDataUri:p,blobToBase64:m,imageToCanvas:i,canvasToBlob:d,revokeImageUrl:g,uriToBlob:f,dataUriToBlobSync:s}}),i("p",["11","o","13","12"],function(e,t,n,r){function o(e,n){function o(){return n}function i(r,o){return t.canvasToBlob(e,r||n,o)}function a(t,r){return e.toDataURL(t||n,r)}function u(e,t){return a(e,t).split(",")[1]}function c(){return r.clone(e)}return{getType:o,toBlob:i,toDataURL:a,toBase64:u,toCanvas:c}}function i(e){return t.blobToImage(e).then(function(e){var n=t.imageToCanvas(e);return t.revokeImageUrl(e),n}).then(function(t){return o(t,e.type)})}function a(t,n){return new e(function(e){e(o(t,n))})}function u(e){var r=n.guessMimeType(e.src);return t.imageToCanvas(e).then(function(e){return o(e,r)})}return{fromBlob:i,fromCanvas:a,fromImage:u}}),i("c",["o","p"],function(e,t){return{blobToImage:function(t){return e.blobToImage(t)},imageToBlob:function(t){return e.imageToBlob(t)},blobToDataUri:function(t){return e.blobToDataUri(t)},blobToBase64:function(t){return e.blobToBase64(t)},blobToImageResult:function(e){return t.fromBlob(e)},dataUriToImageResult:function(n){return e.uriToBlob(n).then(t.fromBlob)},imageToImageResult:function(e){return t.fromImage(e)},imageResultToBlob:function(e,t,n){return e.toBlob(t,n)},imageResultToBlobSync:function(t,n,r){return e.dataUriToBlobSync(t.toDataURL(n,r))}}}),i("15",[],function(){function e(e,t,n){return e=parseFloat(e),e>n?e=n:e<t&&(e=t),e}function t(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}function n(e,t){var n,r,o,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(r=0;r<5;r++)a[r]=t[r+5*n];for(r=0;r<5;r++){for(i=0,o=0;o<5;o++)i+=e[r+5*o]*a[o];u[r+5*n]=i}}return u}function r(t,n){return n=e(n,0,1),t.map(function(t,r){return r%6==0?t=1-(1-t)*n:t*=n,e(t,0,1)})}function o(t,r){var o;return r=e(r,-1,1),r*=100,r<0?o=127+r/100*127:(o=r%1,o=0===o?f[r]:f[Math.floor(r)]*(1-o)+f[Math.floor(r)+1]*o,o=127*o+127),n(t,[o/127,0,0,0,.5*(127-o),0,o/127,0,0,.5*(127-o),0,0,o/127,0,.5*(127-o),0,0,0,1,0,0,0,0,0,1])}function i(t,r){var o,i,a,u;return r=e(r,-1,1),o=1+(r>0?3*r:r),i=.3086,a=.6094,u=.082,n(t,[i*(1-o)+o,a*(1-o),u*(1-o),0,0,i*(1-o),a*(1-o)+o,u*(1-o),0,0,i*(1-o),a*(1-o),u*(1-o)+o,0,0,0,0,0,1,0,0,0,0,0,1])}function a(t,r){var o,i,a,u,c;return r=e(r,-180,180)/180*Math.PI,o=Math.cos(r),i=Math.sin(r),a=.213,u=.715,c=.072,n(t,[a+o*(1-a)+i*-a,u+o*-u+i*-u,c+o*-c+i*(1-c),0,0,a+o*-a+.143*i,u+o*(1-u)+.14*i,c+o*-c+-.283*i,0,0,a+o*-a+i*-(1-a),u+o*-u+i*u,c+o*(1-c)+i*c,0,0,0,0,0,1,0,0,0,0,0,1])}function u(t,r){return r=e(255*r,-255,255),n(t,[1,0,0,0,r,0,1,0,0,r,0,0,1,0,r,0,0,0,1,0,0,0,0,0,1])}function c(t,r,o,i){return r=e(r,0,2),o=e(o,0,2),i=e(i,0,2),n(t,[r,0,0,0,0,0,o,0,0,0,0,0,i,0,0,0,0,0,1,0,0,0,0,0,1])}function s(t,o){return o=e(o,0,1),n(t,r([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],o))}function l(t,o){return o=e(o,0,1),n(t,r([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],o))}var f=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:t,adjust:r,multiply:n,adjustContrast:o,adjustBrightness:u,adjustSaturation:i,adjustHue:a,adjustColors:c,adjustSepia:s,adjustGrayscale:l}}),
i("q",["12","p","15"],function(e,t,n){function r(n,r){function o(e,t){var n,r,o,i,a,u=e.data,c=t[0],s=t[1],l=t[2],f=t[3],d=t[4],p=t[5],m=t[6],g=t[7],h=t[8],v=t[9],y=t[10],b=t[11],x=t[12],w=t[13],C=t[14],k=t[15],T=t[16],S=t[17],E=t[18],_=t[19];for(a=0;a<u.length;a+=4)n=u[a],r=u[a+1],o=u[a+2],i=u[a+3],u[a]=n*c+r*s+o*l+i*f+d,u[a+1]=n*p+r*m+o*g+i*h+v,u[a+2]=n*y+r*b+o*x+i*w+C,u[a+3]=n*k+r*T+o*S+i*E+_;return e}var i,a=n.toCanvas(),u=e.get2dContext(a);return i=o(u.getImageData(0,0,a.width,a.height),r),u.putImageData(i,0,0),t.fromCanvas(a,n.getType())}function o(n,r){function o(e,t,n){function r(e,t,n){return e>n?e=n:e<t&&(e=t),e}var o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x;for(a=Math.round(Math.sqrt(n.length)),u=Math.floor(a/2),o=e.data,i=t.data,b=e.width,x=e.height,s=0;s<x;s++)for(c=0;c<b;c++){for(l=f=d=0,m=0;m<a;m++)for(p=0;p<a;p++)g=r(c+p-u,0,b-1),h=r(s+m-u,0,x-1),v=4*(h*b+g),y=n[m*a+p],l+=o[v]*y,f+=o[v+1]*y,d+=o[v+2]*y;v=4*(s*b+c),i[v]=r(l,0,255),i[v+1]=r(f,0,255),i[v+2]=r(d,0,255)}return t}var i,a,u=n.toCanvas(),c=e.get2dContext(u);return i=c.getImageData(0,0,u.width,u.height),a=c.getImageData(0,0,u.width,u.height),a=o(i,a,r),c.putImageData(a,0,0),t.fromCanvas(u,n.getType())}function i(n){return function(r,o){function i(e,t){var n,r=e.data;for(n=0;n<r.length;n+=4)r[n]=t[r[n]],r[n+1]=t[r[n+1]],r[n+2]=t[r[n+2]];return e}var a,u,c=r.toCanvas(),s=e.get2dContext(c),l=new Array(256);for(u=0;u<l.length;u++)l[u]=n(u,o);return a=i(s.getImageData(0,0,c.width,c.height),l),s.putImageData(a,0,0),t.fromCanvas(c,r.getType())}}function a(e){return function(t,o){return r(t,e(n.identity(),o))}}function u(e){return function(t){return r(t,e)}}function c(e){return function(t){return o(t,e)}}return{invert:u([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:a(n.adjustBrightness),hue:a(n.adjustHue),saturate:a(n.adjustSaturation),contrast:a(n.adjustContrast),grayscale:a(n.adjustGrayscale),sepia:a(n.adjustSepia),colorize:function(e,t,o,i){return r(e,n.adjustColors(n.identity(),t,o,i))},sharpen:c([0,-1,0,-1,5,-1,0,-1,0]),emboss:c([-2,-1,0,-1,1,1,0,1,2]),gamma:i(function(e,t){return 255*Math.pow(e/255,1-t)}),exposure:i(function(e,t){return 255*(1-Math.exp(-e/255*t))}),colorFilter:r,convoluteFilter:o}}),i("16",["11","o","12","14"],function(e,t,n,r){function o(e,t,n){var a=r.getWidth(e),u=r.getHeight(e),c=t/a,s=n/u,l=!1;(c<.5||c>2)&&(c=c<.5?.5:2,l=!0),(s<.5||s>2)&&(s=s<.5?.5:2,l=!0);var f=i(e,c,s);return l?f.then(function(e){return o(e,t,n)}):f}function i(t,o,i){return new e(function(e){var a=r.getWidth(t),u=r.getHeight(t),c=Math.floor(a*o),s=Math.floor(u*i),l=n.create(c,s);n.get2dContext(l).drawImage(t,0,0,a,u,0,0,c,s),e(l)})}return{scale:o}}),i("r",["12","p","16"],function(e,t,n){function r(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i),u=0,c=0;return r=r<0?360+r:r,90!=r&&270!=r||e.resize(i,i.height,i.width),90!=r&&180!=r||(u=i.width),270!=r&&180!=r||(c=i.height),a.translate(u,c),a.rotate(r*Math.PI/180),a.drawImage(o,0,0),t.fromCanvas(i,n.getType())}function o(n,r){var o=n.toCanvas(),i=e.create(o.width,o.height),a=e.get2dContext(i);return"v"==r?(a.scale(1,-1),a.drawImage(o,0,-i.height)):(a.scale(-1,1),a.drawImage(o,-i.width,0)),t.fromCanvas(i,n.getType())}function i(n,r,o,i,a){var u=n.toCanvas(),c=e.create(i,a);return e.get2dContext(c).drawImage(u,-r,-o),t.fromCanvas(c,n.getType())}function a(e,r,o){return n.scale(e.toCanvas(),r,o).then(function(n){return t.fromCanvas(n,e.getType())})}return{rotate:r,flip:o,crop:i,resize:a}}),i("d",["q","r"],function(e,t){var n=function(t){return e.invert(t)},r=function(t){return e.sharpen(t)},o=function(t){return e.emboss(t)},i=function(t,n){return e.gamma(t,n)},a=function(t,n){return e.exposure(t,n)},u=function(t,n,r,o){return e.colorize(t,n,r,o)};return{invert:n,sharpen:r,emboss:o,brightness:function(t,n){return e.brightness(t,n)},hue:function(t,n){return e.hue(t,n)},saturate:function(t,n){return e.saturate(t,n)},contrast:function(t,n){return e.contrast(t,n)},grayscale:function(t,n){return e.grayscale(t,n)},sepia:function(t,n){return e.sepia(t,n)},colorize:u,gamma:i,exposure:a,flip:function(e,n){return t.flip(e,n)},crop:function(e,n,r,o,i){return t.crop(e,n,r,o,i)},resize:function(e,n,r){return t.resize(e,n,r)},rotate:function(e,n){return t.rotate(e,n)}}}),a("e",Array),a("f",Error),i("a",["e","f"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("1g",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("17",["1g"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=void 0!==n?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("s",["17"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(void 0===r)throw e+" not available on this browser";return r}}}),i("g",["s"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),a("h",clearTimeout),i("i",["7"],function(e){return e("tinymce.util.Delay")}),i("j",["7"],function(e){return e("tinymce.util.Promise")}),i("k",["7"],function(e){return e("tinymce.util.URI")}),i("b",[],function(){return{getToolbarItems:function(e){return e.getParam("imagetools_toolbar","rotateleft rotateright | flipv fliph | crop editimage imageoptions")},getProxyUrl:function(e){return e.getParam("imagetools_proxy")}}}),i("l",[],function(){function e(e){function t(e){return/^[0-9\.]+px$/.test(e)}var n,r;return n=e.style.width,r=e.style.height,n||r?t(n)&&t(r)?{w:parseInt(n,10),h:parseInt(r,10)}:null:(n=e.width,r=e.height,n&&r?{w:parseInt(n,10),h:parseInt(r,10)}:null)}function t(e,t){var n,r;t&&(n=e.style.width,r=e.style.height,(n||r)&&(e.style.width=t.w+"px",e.style.height=t.h+"px",e.removeAttribute("data-mce-style")),n=e.width,r=e.height,(n||r)&&(e.setAttribute("width",t.w),e.setAttribute("height",t.h)))}function n(e){return{w:e.naturalWidth,h:e.naturalHeight}}return{getImageSize:e,setImageSize:t,getNaturalImageSize:n}}),a("1m",Object),i("1h",["a","1m"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),a("1i",String),i("18",["1h","e","f","1i"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("19",["s"],function(e){return function(){return new(e.getOrDie("FileReader"))}}),i("1a",["s"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),i("u",["19","1a","j","8"],function(e,t,n,r){var o=function(e){return null!==e&&void 0!==e},i=function(e,t){var n;return n=t.reduce(function(e,t){return o(e)?e[t]:void 0},e),o(n)?n:null},a=function(e,o){return new n(function(n){var i;i=new t,i.onreadystatechange=function(){4===i.readyState&&n({status:i.status,blob:this.response})},i.open("GET",e,!0),r.each(o,function(e,t){i.setRequestHeader(t,e)}),i.responseType="blob",i.send()})};return{traverse:i,readBlob:function(t){return new n(function(n){var r=new e;r.onload=function(e){var t=e.target;n(t.result)},r.readAsText(t)})},requestUrlAsBlob:a,parseJson:function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}}}),i("t",["18","a","j","u"],function(e,t,n,r){var o=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],i=[{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],a=function(e){return 400===e||403===e||500===e},u=function(n){return"ImageProxy HTTP error: "+e.find(o,function(e){return n===e.code}).fold(t.constant("Unknown ImageProxy error"),function(e){return e.message})},c=function(e){var t=u(e);return n.reject(t)},s=function(n){return e.find(i,function(e){return e.type===n}).fold(t.constant("Unknown service error"),function(e){return e.message})},l=function(e){var t=r.parseJson(e),n=r.traverse(t,["error","type"]);return"ImageProxy Service error: "+(n?s(n):"Invalid JSON in service error message")},f=function(e,t){return r.readBlob(t).then(function(e){var t=l(e);return n.reject(t)})};return{handleServiceErrorResponse:function(e,t){return a(e)?f(e,t):c(e)},handleHttpError:c,getHttpErrorMsg:u,getServiceErrorMsg:s}}),i("m",["j","8","t","u"],function(e,t,n,r){function o(t){return r.requestUrlAsBlob(t,{}).then(function(t){return t.status<200||t.status>=300?n.handleHttpError(t.status):e.resolve(t.blob)})}var i=function(e,t){var n=-1===e.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(e)||!t?e:e+n+"apiKey="+encodeURIComponent(t)},a=function(t,o){return r.requestUrlAsBlob(i(t,o),{"Content-Type":"application/json;charset=UTF-8","tiny-api-key":o}).then(function(t){return t.status<200||t.status>=300?n.handleServiceErrorResponse(t.status,t.blob):e.resolve(t.blob)})};return{getUrl:function(e,t){return t?a(e,t):o(e)}}}),a("v",Math),a("w",setTimeout),i("x",["7"],function(e){return e("tinymce.dom.DOMUtils")}),i("y",["7"],function(e){return e("tinymce.ui.Factory")}),i("z",[],function(){return function(){function e(e){var t;return t=i.splice(++a),i.push(e),{state:e,removed:t}}function t(){if(r())return i[--a]}function n(){if(o())return i[++a]}function r(){return a>0}function o(){return-1!==a&&a<i.length-1}var i=[],a=-1;return{data:i,add:e,undo:t,redo:n,canUndo:r,canRedo:o}}}),a("1b",document),a("1c",Image),i("1d",["7"],function(e){return e("tinymce.geom.Rect")}),i("1e",["j"],function(e){return{loadImage:function(t){return new e(function(e){var n=function(){t.removeEventListener("load",n),e(t)};t.complete?e(t):t.addEventListener("load",n)})}}}),i("1j",["7"],function(e){return e("tinymce.dom.DomQuery")}),i("1k",["7"],function(e){return e("tinymce.util.Observable")}),i("1l",["7"],function(e){return e("tinymce.util.VK")}),i("1f",["1j","1d","y","1k","8","1l"],function(e,t,n,r,o,i){var a=0;return function(u,c,s,l,f){function d(e,t){return{x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}}function p(e,t){return{x:t.x-e.x,y:t.y-e.y,w:t.w,h:t.h}}function m(){return p(s,u)}function g(e,n,r,o){var i,a,c,l,f;i=n.x,a=n.y,c=n.w,l=n.h,i+=r*e.deltaX,a+=o*e.deltaY,c+=r*e.deltaW,l+=o*e.deltaH,c<20&&(c=20),l<20&&(l=20),f=u=t.clamp({x:i,y:a,w:c,h:l},s,"move"===e.name),f=p(s,f),T.fire("updateRect",{rect:f}),w(f)}function h(){function t(e){var t;return new(n.get("DragHelper"))(N,{document:l.ownerDocument,handle:N+"-"+e.name,start:function(){t=u},drag:function(n){g(e,t,n.deltaX,n.deltaY)}})}e('<div id="'+N+'" class="'+A+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(l),o.each(_,function(t){e("#"+N,l).append('<div id="'+N+"-"+t+'"class="'+A+'croprect-block" style="display: none" data-mce-bogus="all">')}),o.each(S,function(t){e("#"+N,l).append('<div id="'+N+"-"+t.name+'" class="'+A+"croprect-handle "+A+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false">')}),E=o.map(S,t),y(u),e(l).on("focusin focusout",function(t){e(t.target).attr("aria-grabbed","focus"===t.type)}),e(l).on("keydown",function(e){function t(e,t,r,o,i){e.stopPropagation(),e.preventDefault(),g(n,r,o,i)}var n;switch(o.each(S,function(t){if(e.target.id===N+"-"+t.name)return n=t,!1}),e.keyCode){case i.LEFT:t(e,n,u,-10,0);break;case i.RIGHT:t(e,n,u,10,0);break;case i.UP:t(e,n,u,0,-10);break;case i.DOWN:t(e,n,u,0,10);break;case i.ENTER:case i.SPACEBAR:e.preventDefault(),f()}})}function v(t){var n;n=o.map(S,function(e){return"#"+N+"-"+e.name}).concat(o.map(_,function(e){return"#"+N+"-"+e})).join(","),t?e(n,l).show():e(n,l).hide()}function y(t){function n(t,n){n.h<0&&(n.h=0),n.w<0&&(n.w=0),e("#"+N+"-"+t,l).css({left:n.x,top:n.y,width:n.w,height:n.h})}o.each(S,function(n){e("#"+N+"-"+n.name,l).css({left:t.w*n.xMul+t.x,top:t.h*n.yMul+t.y})}),n("top",{x:c.x,y:c.y,w:c.w,h:t.y-c.y}),n("right",{x:t.x+t.w,y:t.y,w:c.w-t.x-t.w+c.x,h:t.h}),n("bottom",{x:c.x,y:t.y+t.h,w:c.w,h:c.h-t.y-t.h+c.y}),n("left",{x:c.x,y:t.y,w:t.x-c.x,h:t.h}),n("move",t)}function b(e){u=e,y(u)}function x(e){c=e,y(u)}function w(e){b(d(s,e))}function C(e){s=e,y(u)}function k(){o.each(E,function(e){e.destroy()}),E=[]}var T,S,E,_,A="mce-",N=A+"crid-"+a++;return S=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],_=["top","right","bottom","left"],h(l),T=o.extend({toggleVisibility:v,setClampRect:C,setRect:b,getInnerRect:m,setInnerRect:w,setViewPortRect:x,destroy:k},r)}}),i("10",["1b","1c","1d","y","j","8","1e","1f"],function(e,t,n,r,o,i,a,u){return{create:function(o){return new(r.get("Control").extend({Defaults:{classes:"imagepanel"},selection:function(e){return arguments.length?(this.state.set("rect",e),this):this.state.get("rect")},imageSize:function(){var e=this.state.get("viewRect");return{w:e.w,h:e.h}},toggleCropRect:function(e){this.state.set("cropEnabled",e)},imageSrc:function(r){var o=this,i=new t;i.src=r,a.loadImage(i).then(function(){var t,r,a=o.state.get("viewRect");if(r=o.$el.find("img"),r[0])r.replaceWith(i);else{var u=e.createElement("div");u.className="mce-imagepanel-bg",o.getEl().appendChild(u),o.getEl().appendChild(i)}t={x:0,y:0,w:i.naturalWidth,h:i.naturalHeight},o.state.set("viewRect",t),o.state.set("rect",n.inflate(t,-20,-20)),a&&a.w===t.w&&a.h===t.h||o.zoomFit(),o.repaintImage(),o.fire("load")})},zoom:function(e){return arguments.length?(this.state.set("zoom",e),this):this.state.get("zoom")},postRender:function(){return this.imageSrc(this.settings.imageSrc),this._super()},zoomFit:function(){var e,t,n,r,o,i,a,u=this;a=10,e=u.$el.find("img"),t=u.getEl().clientWidth,n=u.getEl().clientHeight,r=e[0].naturalWidth,o=e[0].naturalHeight,i=Math.min((t-a)/r,(n-a)/o),i>=1&&(i=1),u.zoom(i)},repaintImage:function(){var e,t,n,r,o,i,a,u,c,s,l;l=this.getEl(),c=this.zoom(),s=this.state.get("rect"),a=this.$el.find("img"),u=this.$el.find(".mce-imagepanel-bg"),o=l.offsetWidth,i=l.offsetHeight,n=a[0].naturalWidth*c,r=a[0].naturalHeight*c,e=Math.max(0,o/2-n/2),t=Math.max(0,i/2-r/2),a.css({left:e,top:t,width:n,height:r}),u.css({left:e,top:t,width:n,height:r}),this.cropRect&&(this.cropRect.setRect({x:s.x*c+e,y:s.y*c+t,w:s.w*c,h:s.h*c}),this.cropRect.setClampRect({x:e,y:t,w:n,h:r}),this.cropRect.setViewPortRect({x:0,y:0,w:o,h:i}))},bindStates:function(){function e(e){t.cropRect=new u(e,t.state.get("viewRect"),t.state.get("viewRect"),t.getEl(),function(){t.fire("crop")}),t.cropRect.on("updateRect",function(e){var n=e.rect,r=t.zoom();n={x:Math.round(n.x/r),y:Math.round(n.y/r),w:Math.round(n.w/r),h:Math.round(n.h/r)},t.state.set("rect",n)}),t.on("remove",t.cropRect.destroy)}var t=this;t.state.on("change:cropEnabled",function(e){t.cropRect.toggleVisibility(e.value),t.repaintImage()}),t.state.on("change:zoom",function(){t.repaintImage()}),t.state.on("change:rect",function(n){var r=n.value;t.cropRect||e(r),t.cropRect.setRect(r)})}}))(o)}}}),i("n",["c","d","g","v","w","x","y","j","8","z","10"],function(e,t,n,r,o,i,a,u,c,s,l){function f(e){return{blob:e,url:n.createObjectURL(e)}}function d(e){e&&n.revokeObjectURL(e.url)}function p(e){c.each(e,d)}function m(n,u,m,g){function h(e){var t,n,o,i;t=U.find("#w")[0],n=U.find("#h")[0],o=parseInt(t.value(),10),i=parseInt(n.value(),10),U.find("#constrain")[0].checked()&&se&&le&&o&&i&&("w"===e.control.settings.name?(i=r.round(o*fe),n.value(i)):(o=r.round(i*de),t.value(o))),se=o,le=i}function v(e){return r.round(100*e)+"%"}function y(){U.find("#undo").disabled(!pe.canUndo()),U.find("#redo").disabled(!pe.canRedo()),U.statusbar.find("#save").disabled(!pe.canUndo())}function b(){U.find("#undo").disabled(!0),U.find("#redo").disabled(!0)}function x(e){e&&K.imageSrc(e.url)}function w(e){return function(){var t=c.grep(ce,function(t){return t.settings.name!==e});c.each(t,function(e){e.hide()}),e.show(),e.focus()}}function C(e){q=f(e),x(q)}function k(e){u=f(e),x(u),p(pe.add(u).removed),y()}function T(){var n=K.selection();e.blobToImageResult(u.blob).then(function(e){t.crop(e,n.x,n.y,n.w,n.h).then(me).then(function(e){k(e),_()})})}function S(t){var n=[].slice.call(arguments,1);return function(){var r=q||u;e.blobToImageResult(r.blob).then(function(e){t.apply(this,[e].concat(n)).then(me).then(C)})}}function E(t){var n=[].slice.call(arguments,1);return function(){e.blobToImageResult(u.blob).then(function(e){t.apply(this,[e].concat(n)).then(me).then(k)})}}function _(){x(u),d(q),w(W)(),y()}function A(e,t){q?t():o(function(){e-- >0?A(e,t):n.windowManager.alert("Error: failed to apply image operation.")},10)}function N(){q?(k(q.blob),_()):A(100,N)}function D(){var e=K.zoom();e<2&&(e+=.1),K.zoom(e)}function R(){var e=K.zoom();e>.1&&(e-=.1),K.zoom(e)}function P(){u=pe.undo(),x(u),y()}function I(){u=pe.redo(),x(u),y()}function O(){m(u.blob),U.close()}function B(e){return a.create("Form",{layout:"flex",direction:"row",labelGap:5,border:"0 0 1 0",align:"center",pack:"center",padding:"0 10 0 10",spacing:5,flex:0,minHeight:60,defaults:{classes:"imagetool",type:"button"},items:e})}function M(t,n){return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){b(),e.blobToImageResult(u.blob).then(function(e){return n(e)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})})}function L(t,n,r,o,i){function a(t){e.blobToImageResult(u.blob).then(function(e){return n(e,t)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})}return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"slider",flex:1,ondragend:function(e){a(e.value)},minValue:o,maxValue:i,value:r,previewFilter:v},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){this.find("slider").value(r),b()})}function F(t,n){function r(){var t,r,o;t=U.find("#r")[0].value(),r=U.find("#g")[0].value(),o=U.find("#b")[0].value(),e.blobToImageResult(u.blob).then(function(e){return n(e,t,r,o)}).then(me).then(function(e){var t=f(e);x(t),d(q),q=t})}return B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"slider",label:"R",name:"r",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"slider",label:"G",name:"g",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"slider",label:"B",name:"b",minValue:0,value:1,maxValue:2,ondragend:r,previewFilter:v},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",function(){U.find("#r,#g,#b").value(1),b()})}function H(e){!0===e.control.value()&&(fe=le/se,de=se/le)}var U,W,j,q,$,z,V,K,G,X,Y,Q,J,Z,ee,te,ne,re,oe,ie,ae,ue,ce,se,le,fe,de,pe=new s,me=function(e){return e.toBlob()};$=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:T}]).hide().on("show hide",function(e){K.toggleCropRect("show"===e.type)}).on("show",b),z=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{type:"textbox",name:"w",label:"Width",size:4,onkeyup:h},{type:"textbox",name:"h",label:"Height",size:4,onkeyup:h},{type:"checkbox",name:"constrain",text:"Constrain proportions",checked:!0,onchange:H},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:"submit"}]).hide().on("submit",function(e){var n=parseInt(U.find("#w").value(),10),r=parseInt(U.find("#h").value(),10);e.preventDefault(),E(t.resize,n,r)(),_()}).on("show",b),V=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{icon:"fliph",tooltip:"Flip horizontally",onclick:S(t.flip,"h")},{icon:"flipv",tooltip:"Flip vertically",onclick:S(t.flip,"v")},{icon:"rotateleft",tooltip:"Rotate counterclockwise",onclick:S(t.rotate,-90)},{icon:"rotateright",tooltip:"Rotate clockwise",onclick:S(t.rotate,90)},{type:"spacer",flex:1},{text:"Apply",subtype:"primary",onclick:N}]).hide().on("show",b),Y=M("Invert",t.invert),oe=M("Sharpen",t.sharpen),ie=M("Emboss",t.emboss),Q=L("Brightness",t.brightness,0,-1,1),J=L("Hue",t.hue,180,0,360),Z=L("Saturate",t.saturate,0,-1,1),ee=L("Contrast",t.contrast,0,-1,1),te=L("Grayscale",t.grayscale,0,0,1),ne=L("Sepia",t.sepia,0,0,1),re=F("Colorize",t.colorize),ae=L("Gamma",t.gamma,0,-1,1),ue=L("Exposure",t.exposure,1,0,2),j=B([{text:"Back",onclick:_},{type:"spacer",flex:1},{text:"hue",icon:"hue",onclick:w(J)},{text:"saturate",icon:"saturate",onclick:w(Z)},{text:"sepia",icon:"sepia",onclick:w(ne)},{text:"emboss",icon:"emboss",onclick:w(ie)},{text:"exposure",icon:"exposure",onclick:w(ue)},{type:"spacer",flex:1}]).hide(),W=B([{tooltip:"Crop",icon:"crop",onclick:w($)},{tooltip:"Resize",icon:"resize2",onclick:w(z)},{tooltip:"Orientation",icon:"orientation",onclick:w(V)},{tooltip:"Brightness",icon:"sun",onclick:w(Q)},{tooltip:"Sharpen",icon:"sharpen",onclick:w(oe)},{tooltip:"Contrast",icon:"contrast",onclick:w(ee)},{tooltip:"Color levels",icon:"drop",onclick:w(re)},{tooltip:"Gamma",icon:"gamma",onclick:w(ae)},{tooltip:"Invert",icon:"invert",onclick:w(Y)}]),K=l.create({flex:1,imageSrc:u.url}),G=a.create("Container",{layout:"flex",direction:"column",border:"0 1 0 0",padding:5,spacing:5,items:[{type:"button",icon:"undo",tooltip:"Undo",name:"undo",onclick:P},{type:"button",icon:"redo",tooltip:"Redo",name:"redo",onclick:I},{type:"button",icon:"zoomin",tooltip:"Zoom in",onclick:D},{type:"button",icon:"zoomout",tooltip:"Zoom out",onclick:R}]}),X=a.create("Container",{type:"container",layout:"flex",direction:"row",align:"stretch",flex:1,items:[G,K]}),ce=[W,$,z,V,j,Y,Q,J,Z,ee,te,ne,re,oe,ie,ae,ue],U=n.windowManager.open({layout:"flex",direction:"column",align:"stretch",minWidth:r.min(i.DOM.getViewPort().w,800),minHeight:r.min(i.DOM.getViewPort().h,650),title:"Edit image",items:ce.concat([X]),buttons:[{text:"Save",name:"save",subtype:"primary",onclick:O},{text:"Cancel",onclick:"close"}]}),U.on("close",function(){g(),p(pe.data),pe=null,q=null}),pe.add(u),y(),K.on("load",function(){se=K.imageSize().w,le=K.imageSize().h,fe=le/se,de=se/le,U.find("#w").value(se),U.find("#h").value(le)}),K.on("crop",T)}function g(e,t){return new u(function(n,r){return t.toBlob().then(function(t){m(e,f(t),n,r)})})}return{edit:g}}),i("9",["c","d","a","g","h","i","j","8","k","b","l","m","n"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=0,m=function(e,t){return e.dom.is(t,"img:not([data-mce-object],[data-mce-placeholder])")&&(b(e,t)||x(e,t)||e.settings.imagetools_proxy)},g=function(e,t){e.notificationManager.open({text:t,type:"error"})},h=function(e){return e.selection.getNode()},v=function(e,t){var n=t.match(/\/([^\/\?]+)?\.(?:jpeg|jpg|png|gif)(?:\?|$)/i);return n?e.dom.encode(n[1]):null},y=function(){return"imagetools"+p++},b=function(e,t){var n=t.src;return 0===n.indexOf("data:")||0===n.indexOf("blob:")||new c(n).host===e.documentBaseURI.host},x=function(e,t){return-1!==u.inArray(e.settings.imagetools_cors_hosts,new c(t.src).host)},w=function(e){return e.settings.api_key||e.settings.imagetools_api_key},C=function(t,n){var r,o=n.src;return x(t,n)?f.getUrl(n.src,null):b(t,n)?e.imageToBlob(n):(o=s.getProxyUrl(t),o+=(-1===o.indexOf("?")?"?":"&")+"url="+encodeURIComponent(n.src),r=w(t),f.getUrl(o,r))},k=function(e){var t;return t=e.editorUpload.blobCache.getByUri(h(e).src),t?a.resolve(t.blob()):C(e,h(e))},T=function(e,t){var n=i.setEditorTimeout(e,function(){e.editorUpload.uploadImagesAuto()},e.settings.images_upload_timeout||3e4);t.set(n)},S=function(e){o(e.get())},E=function(e,t,n,r){return t.toBlob().then(function(o){var i,a,u,c,s;return u=e.editorUpload.blobCache,s=h(e),i=s.src,e.settings.images_reuse_filename&&(c=u.getByUri(i),c?(i=c.uri(),a=c.name()):a=v(e,i)),c=u.create({id:y(),blob:o,base64:t.toBase64(),uri:i,name:a}),u.add(c),e.undoManager.transact(function(){function t(){e.$(s).off("load",t),e.nodeChanged(),n?e.editorUpload.uploadImagesAuto():(S(r),T(e,r))}e.$(s).on("load",t),e.$(s).attr({src:c.blobUri()}).removeAttr("data-mce-src")}),c})},_=function(t,r,o){return function(){return t._scanForImages().then(n.curry(k,t)).then(e.blobToImageResult).then(o).then(function(e){return E(t,e,!1,r)},function(e){g(t,e)})}};return{rotate:function(e,n,r){return function(){return _(e,n,function(n){var o=l.getImageSize(h(e));return o&&l.setImageSize(h(e),{w:o.h,h:o.w}),t.rotate(n,r)})()}},flip:function(e,n,r){return function(){return _(e,n,function(e){return t.flip(e,r)})()}},editImageDialog:function(t,o){return function(){var i=h(t),u=l.getNaturalImageSize(i),c=function(t){return new a(function(n){e.blobToImage(t).then(function(e){var o=l.getNaturalImageSize(e);u.w===o.w&&u.h===o.h||l.getImageSize(i)&&l.setImageSize(i,o),r.revokeObjectURL(e.src),n(t)})})},s=function(t,n){return d.edit(t,n).then(c).then(e.blobToImageResult).then(function(e){return E(t,e,!0,o)},function(){})};k(t).then(e.blobToImageResult).then(n.curry(s,t),function(e){g(t,e)})}},isEditableImage:m,cancelTimedUpload:S}}),i("3",["8","9"],function(e,t){return{register:function(n,r){e.each({mceImageRotateLeft:t.rotate(n,r,-90),mceImageRotateRight:t.rotate(n,r,90),mceImageFlipVertical:t.flip(n,r,"v"),mceImageFlipHorizontal:t.flip(n,r,"h"),mceEditImage:t.editImageDialog(n,r)},function(e,t){n.addCommand(t,e)})}}}),i("4",["9"],function(e){return{setup:function(t,n,r){t.on("NodeChange",function(o){var i=r.get();i&&i.src!==o.element.src&&(e.cancelTimedUpload(n),t.editorUpload.uploadImagesAuto(),r.set(null)),e.isEditableImage(t,o.element)&&r.set(o.element)})}}}),i("5",[],function(){return{register:function(e){e.addButton("rotateleft",{title:"Rotate counterclockwise",cmd:"mceImageRotateLeft"}),e.addButton("rotateright",{title:"Rotate clockwise",cmd:"mceImageRotateRight"}),e.addButton("flipv",{title:"Flip vertically",cmd:"mceImageFlipVertical"}),e.addButton("fliph",{title:"Flip horizontally",cmd:"mceImageFlipHorizontal"}),e.addButton("editimage",{title:"Edit image",cmd:"mceEditImage"}),e.addButton("imageoptions",{title:"Image options",icon:"options",cmd:"mceImage"})}}}),i("6",["a","b","9"],function(e,t,n){return{register:function(r){r.addContextToolbar(e.curry(n.isEditableImage,r),t.getToolbarItems(r))}}}),i("0",["1","2","3","4","5","6"],function(e,t,n,r,o,i){return t.add("imagetools",function(t){var a=e(0),u=e(null);n.register(t,a),o.register(t),i.register(t),r.setup(t,a,u)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.importcss.api.Settings",[],function(){return{shouldMergeClasses:function(e){return e.getParam("importcss_merge_classes")},shouldImportExclusive:function(e){return e.getParam("importcss_exclusive")},getSelectorConverter:function(e){return e.getParam("importcss_selector_converter")},getSelectorFilter:function(e){return e.getParam("importcss_selector_filter")},getCssGroups:function(e){return e.getParam("importcss_groups")},shouldAppend:function(e){return e.getParam("importcss_append")},getFileFilter:function(e){return e.getParam("importcss_file_filter")}}}),
i("tinymce.plugins.importcss.core.ImportCss",["tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.importcss.api.Settings"],function(e,t,n,r,o){var i=function(e){var t=n.cacheSuffix;return"string"==typeof e&&(e=e.replace("?"+t,"").replace("&"+t,"")),e},a=function(e,n){var r=e.settings,o=!1!==r.skin&&(r.skin||"lightgray");return!!o&&n===(r.skin_url?e.documentBaseURI.toAbsolute(r.skin_url):t.baseURL+"/skins/"+o)+"/content"+(e.inline?".inline":"")+".min.css"},u=function(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},c=function(e,t,n){function o(t,c){var s,l=t.href;if((l=i(l))&&n(l,c)&&!a(e,l)){r.each(t.imports,function(e){o(e,!0)});try{s=t.cssRules||t.rules}catch(e){}r.each(s,function(e){e.styleSheet?o(e.styleSheet,!0):e.selectorText&&r.each(e.selectorText.split(","),function(e){u.push(r.trim(e))})})}}var u=[],c={};r.each(e.contentCSS,function(e){c[e]=!0}),n||(n=function(e,t){return t||c[e]});try{r.each(t.styleSheets,function(e){o(e)})}catch(e){}return u},s=function(e,t){var n,i=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(i){var a=i[1],u=i[2].substr(1).split(".").join(" "),c=r.makeMap("a,img");return i[1]?(n={title:t},e.schema.getTextBlockElements()[a]?n.block=a:e.schema.getBlockElements()[a]||c[a.toLowerCase()]?n.selector=a:n.inline=a):i[2]&&(n={inline:"span",title:t.substr(1),classes:u}),!1!==o.shouldMergeClasses(e)?n.classes=u:n.attributes={"class":u},n}},l=function(e,t){return r.grep(e,function(e){return!e.filter||e.filter(t)})},f=function(e){return r.map(e,function(e){return r.extend({},e,{original:e,selectors:{},filter:u(e.filter),item:{text:e.title,menu:[]}})})},d=function(e,t){return null===t||!1!==o.shouldImportExclusive(e)},p=function(e,t,n,r){return!(d(e,n)?t in r:t in n.selectors)},m=function(e,t,n,r){d(e,n)?r[t]=!0:n.selectors[t]=!0},g=function(e,t,n,r){var i;return i=r&&r.selector_converter?r.selector_converter:o.getSelectorConverter(e)?o.getSelectorConverter(e):function(){return s(e,n,r)},i.call(t,n,r)};return{defaultConvertSelectorToFormat:s,setup:function(t){t.on("renderFormatsMenu",function(n){var i={},a=u(o.getSelectorFilter(t)),s=n.control,d=f(o.getCssGroups(t)),h=function(n,o){if(p(t,n,o,i)){m(t,n,o,i);var a=g(t,t.plugins.importcss,n,o);if(a){var u=a.name||e.DOM.uniqueId();return t.formatter.register(u,a),r.extend({},s.settings.itemDefaults,{text:a.title,format:u})}}return null};o.shouldAppend(t)||s.items().remove(),r.each(c(t,n.doc||t.getDoc(),u(o.getFileFilter(t))),function(e){if(-1===e.indexOf(".mce-")&&(!a||a(e))){var t=l(d,e);if(t.length>0)r.each(t,function(t){var n=h(e,t);n&&t.item.menu.push(n)});else{var n=h(e,null);n&&s.add(n)}}}),r.each(d,function(e){e.item.menu.length>0&&s.add(e.item)}),n.control.renderNew()})}}}),i("tinymce.plugins.importcss.api.Api",["tinymce.plugins.importcss.core.ImportCss"],function(e){return{get:function(t){return{convertSelectorToFormat:function(n){return e.defaultConvertSelectorToFormat(t,n)}}}}}),i("tinymce.plugins.importcss.Plugin",["tinymce.core.PluginManager","tinymce.plugins.importcss.api.Api","tinymce.plugins.importcss.core.ImportCss"],function(e,t,n){return e.add("importcss",function(e){return n.setup(e),t.get(e)}),function(){}}),r("tinymce.plugins.importcss.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("5",["4"],function(e){return e("tinymce.dom.DOMUtils")}),i("6",["4"],function(e){return e("tinymce.EditorManager")}),i("7",["4"],function(e){return e("tinymce.Env")}),i("8",["4"],function(e){return e("tinymce.util.Tools")}),i("9",[],function(){return{shouldMergeClasses:function(e){return e.getParam("importcss_merge_classes")},shouldImportExclusive:function(e){return e.getParam("importcss_exclusive")},getSelectorConverter:function(e){return e.getParam("importcss_selector_converter")},getSelectorFilter:function(e){return e.getParam("importcss_selector_filter")},getCssGroups:function(e){return e.getParam("importcss_groups")},shouldAppend:function(e){return e.getParam("importcss_append")},getFileFilter:function(e){return e.getParam("importcss_file_filter")}}}),i("3",["5","6","7","8","9"],function(e,t,n,r,o){var i=function(e){var t=n.cacheSuffix;return"string"==typeof e&&(e=e.replace("?"+t,"").replace("&"+t,"")),e},a=function(e,n){var r=e.settings,o=!1!==r.skin&&(r.skin||"lightgray");return!!o&&n===(r.skin_url?e.documentBaseURI.toAbsolute(r.skin_url):t.baseURL+"/skins/"+o)+"/content"+(e.inline?".inline":"")+".min.css"},u=function(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},c=function(e,t,n){function o(t,c){var s,l=t.href;if((l=i(l))&&n(l,c)&&!a(e,l)){r.each(t.imports,function(e){o(e,!0)});try{s=t.cssRules||t.rules}catch(e){}r.each(s,function(e){e.styleSheet?o(e.styleSheet,!0):e.selectorText&&r.each(e.selectorText.split(","),function(e){u.push(r.trim(e))})})}}var u=[],c={};r.each(e.contentCSS,function(e){c[e]=!0}),n||(n=function(e,t){return t||c[e]});try{r.each(t.styleSheets,function(e){o(e)})}catch(e){}return u},s=function(e,t){var n,i=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(i){var a=i[1],u=i[2].substr(1).split(".").join(" "),c=r.makeMap("a,img");return i[1]?(n={title:t},e.schema.getTextBlockElements()[a]?n.block=a:e.schema.getBlockElements()[a]||c[a.toLowerCase()]?n.selector=a:n.inline=a):i[2]&&(n={inline:"span",title:t.substr(1),classes:u}),!1!==o.shouldMergeClasses(e)?n.classes=u:n.attributes={"class":u},n}},l=function(e,t){return r.grep(e,function(e){return!e.filter||e.filter(t)})},f=function(e){return r.map(e,function(e){return r.extend({},e,{original:e,selectors:{},filter:u(e.filter),item:{text:e.title,menu:[]}})})},d=function(e,t){return null===t||!1!==o.shouldImportExclusive(e)},p=function(e,t,n,r){return!(d(e,n)?t in r:t in n.selectors)},m=function(e,t,n,r){d(e,n)?r[t]=!0:n.selectors[t]=!0},g=function(e,t,n,r){var i;return i=r&&r.selector_converter?r.selector_converter:o.getSelectorConverter(e)?o.getSelectorConverter(e):function(){return s(e,n,r)},i.call(t,n,r)};return{defaultConvertSelectorToFormat:s,setup:function(t){t.on("renderFormatsMenu",function(n){var i={},a=u(o.getSelectorFilter(t)),s=n.control,d=f(o.getCssGroups(t)),h=function(n,o){if(p(t,n,o,i)){m(t,n,o,i);var a=g(t,t.plugins.importcss,n,o);if(a){var u=a.name||e.DOM.uniqueId();return t.formatter.register(u,a),r.extend({},s.settings.itemDefaults,{text:a.title,format:u})}}return null};o.shouldAppend(t)||s.items().remove(),r.each(c(t,n.doc||t.getDoc(),u(o.getFileFilter(t))),function(e){if(-1===e.indexOf(".mce-")&&(!a||a(e))){var t=l(d,e);if(t.length>0)r.each(t,function(t){var n=h(e,t);n&&t.item.menu.push(n)});else{var n=h(e,null);n&&s.add(n)}}}),r.each(d,function(e){e.item.menu.length>0&&s.add(e.item)}),n.control.renderNew()})}}}),i("2",["3"],function(e){return{get:function(t){return{convertSelectorToFormat:function(n){return e.defaultConvertSelectorToFormat(t,n)}}}}}),i("0",["1","2","3"],function(e,t,n){return e.add("importcss",function(e){return n.setup(e),t.get(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.fullpage.api.Settings",[],function(){return{shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}}}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.insertdatetime.api.Settings",[],function(){var e=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},t=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},n=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])};return{getDateFormat:e,getTimeFormat:t,getFormats:n,getDefaultDateTime:function(e){var r=n(e);return r.length>0?r[0]:t(e)},shouldInsertTimeElement:function(e){return e.getParam("insertdatetime_element",!1)}}}),i("tinymce.plugins.insertdatetime.core.Actions",["tinymce.core.util.Tools","tinymce.plugins.insertdatetime.api.Settings"],function(e,t){var n="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" "),a=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},u=function(e,t,u){return u=u||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+u.getFullYear()),t=t.replace("%y",""+u.getYear()),t=t.replace("%m",a(u.getMonth()+1,2)),t=t.replace("%d",a(u.getDate(),2)),t=t.replace("%H",""+a(u.getHours(),2)),t=t.replace("%M",""+a(u.getMinutes(),2)),t=t.replace("%S",""+a(u.getSeconds(),2)),t=t.replace("%I",""+((u.getHours()+11)%12+1)),t=t.replace("%p",u.getHours()<12?"AM":"PM"),t=t.replace("%B",""+e.translate(i[u.getMonth()])),t=t.replace("%b",""+e.translate(o[u.getMonth()])),t=t.replace("%A",""+e.translate(r[u.getDay()])),t=t.replace("%a",""+e.translate(n[u.getDay()])),t=t.replace("%%","%")},c=function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)};return{insertDateTime:function(e,n){if(t.shouldInsertTimeElement(e)){var r,o=u(e,n);r=/%[HMSIp]/.test(n)?u(e,"%Y-%m-%dT%H:%M"):u(e,"%Y-%m-%d");var i=e.dom.getParent(e.selection.getStart(),"time");i?c(e,i,r,o):e.insertContent('<time datetime="'+r+'">'+o+"</time>")}else e.insertContent(u(e,n))},getDateTime:u}}),i("tinymce.plugins.insertdatetime.api.Commands",["tinymce.plugins.fullpage.api.Settings","tinymce.plugins.insertdatetime.core.Actions"],function(e,t){return{register:function(n){n.addCommand("mceInsertDate",function(){t.insertDateTime(n,e.getDateFormat())}),n.addCommand("mceInsertTime",function(){t.insertDateTime(n,e.getTimeFormat())})}}}),i("tinymce.plugins.insertdatetime.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.insertdatetime.api.Settings","tinymce.plugins.insertdatetime.core.Actions"],function(e,t,n){var r=function(r,o){var i=t.getFormats(r);return e.map(i,function(e){return{text:n.getDateTime(r,e),onclick:function(){o.set(e),n.insertDateTime(r,e)}}})};return{register:function(e,o){var i=r(e,o);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:i,onclick:function(){var r=o.get();n.insertDateTime(e,r||t.getDefaultDateTime(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:i,context:"insert"})}}}),i("tinymce.plugins.insertdatetime.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.insertdatetime.api.Commands","tinymce.plugins.insertdatetime.ui.Buttons"],function(e,t,n,r){return t.add("insertdatetime",function(t){var o=e(null);n.register(t),r.register(t,o)}),function(){}}),r("tinymce.plugins.insertdatetime.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("5",tinymce.util.Tools.resolve),i("2",["5"],function(e){return e("tinymce.PluginManager")}),i("6",[],function(){return{shouldHideInSourceView:function(e){return e.getParam("fullpage_hide_in_source_view")},getDefaultXmlPi:function(e){return e.getParam("fullpage_default_xml_pi")},getDefaultEncoding:function(e){return e.getParam("fullpage_default_encoding")},getDefaultFontFamily:function(e){return e.getParam("fullpage_default_font_family")},getDefaultFontSize:function(e){return e.getParam("fullpage_default_font_size")},getDefaultTextColor:function(e){return e.getParam("fullpage_default_text_color")},getDefaultTitle:function(e){return e.getParam("fullpage_default_title")},getDefaultDocType:function(e){return e.getParam("fullpage_default_doctype","<!DOCTYPE html>")}}}),i("8",["5"],function(e){return e("tinymce.util.Tools")}),i("9",[],function(){var e=function(e){return e.getParam("insertdatetime_dateformat",e.translate("%Y-%m-%d"))},t=function(e){return e.getParam("insertdatetime_timeformat",e.translate("%H:%M:%S"))},n=function(e){return e.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])};return{getDateFormat:e,getTimeFormat:t,getFormats:n,getDefaultDateTime:function(e){var r=n(e);return r.length>0?r[0]:t(e)},shouldInsertTimeElement:function(e){return e.getParam("insertdatetime_element",!1)}}}),i("7",["8","9"],function(e,t){var n="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),r="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),o="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),i="January February March April May June July August September October November December".split(" "),a=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e},u=function(e,t,u){return u=u||new Date,t=t.replace("%D","%m/%d/%Y"),t=t.replace("%r","%I:%M:%S %p"),t=t.replace("%Y",""+u.getFullYear()),t=t.replace("%y",""+u.getYear()),t=t.replace("%m",a(u.getMonth()+1,2)),t=t.replace("%d",a(u.getDate(),2)),t=t.replace("%H",""+a(u.getHours(),2)),t=t.replace("%M",""+a(u.getMinutes(),2)),t=t.replace("%S",""+a(u.getSeconds(),2)),t=t.replace("%I",""+((u.getHours()+11)%12+1)),t=t.replace("%p",u.getHours()<12?"AM":"PM"),t=t.replace("%B",""+e.translate(i[u.getMonth()])),t=t.replace("%b",""+e.translate(o[u.getMonth()])),t=t.replace("%A",""+e.translate(r[u.getDay()])),t=t.replace("%a",""+e.translate(n[u.getDay()])),t=t.replace("%%","%")},c=function(e,t,n,r){var o=e.dom.create("time",{datetime:n},r);t.parentNode.insertBefore(o,t),e.dom.remove(t),e.selection.select(o,!0),e.selection.collapse(!1)};return{insertDateTime:function(e,n){if(t.shouldInsertTimeElement(e)){var r,o=u(e,n);r=/%[HMSIp]/.test(n)?u(e,"%Y-%m-%dT%H:%M"):u(e,"%Y-%m-%d");var i=e.dom.getParent(e.selection.getStart(),"time");i?c(e,i,r,o):e.insertContent('<time datetime="'+r+'">'+o+"</time>")}else e.insertContent(u(e,n))},getDateTime:u}}),i("3",["6","7"],function(e,t){return{register:function(n){n.addCommand("mceInsertDate",function(){t.insertDateTime(n,e.getDateFormat())}),n.addCommand("mceInsertTime",function(){t.insertDateTime(n,e.getTimeFormat())})}}}),i("4",["8","9","7"],function(e,t,n){var r=function(r,o){var i=t.getFormats(r);return e.map(i,function(e){return{text:n.getDateTime(r,e),onclick:function(){o.set(e),n.insertDateTime(r,e)}}})};return{register:function(e,o){var i=r(e,o);e.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:i,onclick:function(){var r=o.get();n.insertDateTime(e,r||t.getDefaultDateTime(e))}}),e.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:i,context:"insert"})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return t.add("insertdatetime",function(t){var o=e(null);n.register(t),r.register(t,o)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.legacyoutput.core.Formats",["tinymce.core.util.Tools"],function(e){var t=function(t){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),o=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){o.addValidElements(e+"[*]")}),o.getElementRule("font")||o.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=o.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})};return{setup:function(e){e.settings.inline_styles=!1,e.on("init",function(){t(e)})}}}),i("tinymce.plugins.legacyoutput.ui.Buttons",[],function(){return{register:function(e){e.addButton("fontsizeselect",function(){var t=[],n="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",r=e.settings.fontsizeFormats||n;return e.$.each(r.split(" "),function(e,n){var r=n,o=n,i=n.split("=");i.length>1&&(r=i[0],o=i[1]),t.push({text:r,value:o})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.size):t.value("")})},onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addButton("fontselect",function(){function t(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var n="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=t(e.settings.font_formats||n);return e.$.each(o,function(e,t){r.push({text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.face):t.value("")})},onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})}}}),i("tinymce.plugins.legacyoutput.Plugin",["tinymce.core.PluginManager","tinymce.plugins.legacyoutput.core.Formats","tinymce.plugins.legacyoutput.ui.Buttons"],function(e,t,n){return e.add("legacyoutput",function(e){t.setup(e),n.register(e)}),function(){}}),r("tinymce.plugins.legacyoutput.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("5",["4"],function(e){return e("tinymce.util.Tools")}),i("2",["5"],function(e){var t=function(t){var n="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",r=e.explode(t.settings.font_size_style_values),o=t.schema;t.formatter.register({alignleft:{selector:n,attributes:{align:"left"}},aligncenter:{selector:n,attributes:{align:"center"}},alignright:{selector:n,attributes:{align:"right"}},alignjustify:{selector:n,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(t){return e.inArray(r,t.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),e.each("b,i,u,strike".split(","),function(e){o.addValidElements(e+"[*]")}),o.getElementRule("font")||o.addValidElements("font[face|size|color|style]"),e.each(n.split(","),function(e){var t=o.getElementRule(e);t&&(t.attributes.align||(t.attributes.align={},t.attributesOrder.push("align")))})};return{setup:function(e){e.settings.inline_styles=!1,e.on("init",function(){t(e)})}}}),i("3",[],function(){return{register:function(e){e.addButton("fontsizeselect",function(){var t=[],n="8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7",r=e.settings.fontsizeFormats||n;return e.$.each(r.split(" "),function(e,n){var r=n,o=n,i=n.split("=");i.length>1&&(r=i[0],o=i[1]),t.push({text:r,value:o})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:t,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.size):t.value("")})},onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addButton("fontselect",function(){function t(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}var n="Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",r=[],o=t(e.settings.font_formats||n);return e.$.each(o,function(e,t){r.push({text:{raw:t[0]},value:t[1],textStyle:-1===t[1].indexOf("dings")?"font-family:"+t[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:r,fixedWidth:!0,onPostRender:function(){var t=this;e.on("NodeChange",function(){var n;n=e.dom.getParent(e.selection.getNode(),"font"),n?t.value(n.face):t.value("")})},onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("legacyoutput",function(e){t.setup(e),n.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.plugins.link.api.Settings",[],function(){var e=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},t=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},n=function(e){return e.link_list},r=function(e){return"string"==typeof e.default_link_target},o=function(e){return e.default_link_target},i=function(e){return e.target_list},a=function(e,t){e.settings.target_list=t},u=function(e){return!1!==i(e)},c=function(e){return e.rel_list},s=function(e){return c(e)!==undefined},l=function(e){return e.link_class_list};return{assumeExternalTargets:e,hasContextToolbar:t,getLinkList:n,hasDefaultLinkTarget:r,getDefaultLinkTarget:o,getTargetList:i,setTargetList:a,shouldShowTargetList:u,getRelList:c,hasRelList:s,getLinkClassList:l,hasLinkClassList:function(e){return l(e)!==undefined},shouldShowLinkTitle:function(e){return!1!==e.link_title},allowUnsafeLinkTarget:function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target}}}),a("global!document",document),a("global!window",window),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.plugins.link.core.OpenUrl",["global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env"],function(e,t,n,r){var o=function(t,n){e.body.appendChild(t),t.dispatchEvent(n),e.body.removeChild(t)};return{open:function(i){if(!r.ie||r.ie>10){var a=e.createElement("a");a.target="_blank",a.href=i,a.rel="noreferrer noopener";var u=e.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o(a,u)}else{var c=t.open("","_blank");if(c){c.opener=null;var s=c.document;s.open(),s.write('<meta http-equiv="refresh" content="0; url='+n.DOM.encode(i)+'">'),s.close()}}}}}),a("global!RegExp",RegExp),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.link.core.Utils",["global!RegExp","tinymce.core.util.Tools","tinymce.plugins.link.api.Settings"],function(e,t,n){var r=function(e,n){var r=["noopener"],o=e?e.split(/\s+/):[],i=function(e){return t.trim(e.sort().join(" "))},a=function(e){return e=u(e),e.length?e.concat(r):r},u=function(e){return e.filter(function(e){return-1===t.inArray(r,e)})};return o=n?a(o):u(o),o.length?i(o):null},o=function(e){return e.replace(/\uFEFF/g,"")},i=function(e,t){return t=t||e.selection.getStart(),l(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},a=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return o(n)},u=function(e){return e&&"A"===e.nodeName&&e.href},c=function(e){return t.grep(e,u).length>0},s=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},l=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},f=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},d=function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))};return{link:function(e,t){return function(o){e.undoManager.transact(function(){var a=e.selection.getNode(),u=i(e,a),c={href:o.href,target:o.target?o.target:null,rel:o.rel?o.rel:null,"class":o["class"]?o["class"]:null,title:o.title?o.title:null};n.hasRelList(e.settings)||!1!==n.allowUnsafeLinkTarget(e.settings)||(c.rel=r(c.rel,"_blank"===c.target)),o.href===t.href&&(t.attach(),t={}),u?(e.focus(),o.hasOwnProperty("text")&&("innerText"in u?u.innerText=o.text:u.textContent=o.text),e.dom.setAttribs(u,c),e.selection.select(u),e.undoManager.add()):l(a)?d(e,a,c):o.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",c,e.dom.encode(o.text))):e.execCommand("mceInsertLink",!1,c)})}},unlink:function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();l(t)?f(e,t):e.execCommand("unlink")})}},isLink:u,hasLinks:c,isOnlyTextSelected:s,getAnchorElement:i,getAnchorText:a,toggleTargetRules:r}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),
i("tinymce.plugins.link.ui.Dialog",["tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.Utils"],function(e,t,n,r,o){var i={},a=function(e,t){var o=r.getLinkList(e.settings);"string"==typeof o?n.send({url:o,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof o?o(function(n){t(e,n)}):t(e,o)},u=function(e,n,r){var o=function(e,r){return r=r||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r};return o(e,r||[])},c=function(t,n,r){var o=t.selection.getRng();e.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(e){t.selection.setRng(o),r(e)})})},s=function(e,n){var a,s,l,f,d,p,m,g,h,v,y,b={},x=e.selection,w=e.dom,C=function(e){var t=l.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),l.find("#href").value(e.control.value())},k=function(n){var r=[];if(t.each(e.dom.select("a:not([href])"),function(e){var t=e.name||e.id;t&&r.push({text:t,value:"#"+t,selected:-1!==n.indexOf("#"+t)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:C}},T=function(){s||!f||b.text||this.parent().parent().find("#text")[0].value(this.value())},S=function(n){var r=n.meta||{};p&&p.value(e.convertURL(this.value(),"href")),t.each(n.meta,function(e,t){var n=l.find("#"+t);"text"===t?0===s.length&&(n.value(e),b.text=e):n.value(e)}),r.attach&&(i={href:this.value(),attach:r.attach}),r.text||T.call(this)},E=function(e){e.meta=l.toJSON()};f=o.isOnlyTextSelected(x.getContent()),a=o.getAnchorElement(e),b.text=s=o.getAnchorText(e.selection,a),b.href=a?w.getAttrib(a,"href"):"",a?b.target=w.getAttrib(a,"target"):r.hasDefaultLinkTarget(e.settings)&&(b.target=r.getDefaultLinkTarget(e.settings)),(y=w.getAttrib(a,"rel"))&&(b.rel=y),(y=w.getAttrib(a,"class"))&&(b["class"]=y),(y=w.getAttrib(a,"title"))&&(b.title=y),f&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){b.text=this.value()}}),n&&(p={type:"listbox",label:"Link list",values:u(n,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:C,value:e.convertURL(b.href,"href"),onPostRender:function(){p=this}}),r.shouldShowTargetList(e.settings)&&(r.getTargetList(e.settings)===undefined&&r.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),g={name:"target",type:"listbox",label:"Target",values:u(r.getTargetList(e.settings))}),r.hasRelList(e.settings)&&(m={name:"rel",type:"listbox",label:"Rel",values:u(r.getRelList(e.settings),function(t){!1===r.allowUnsafeLinkTarget(e.settings)&&(t.value=o.toggleTargetRules(t.value,"_blank"===b.target))})}),r.hasLinkClassList(e.settings)&&(h={name:"class",type:"listbox",label:"Class",values:u(r.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),r.shouldShowLinkTitle(e.settings)&&(v={name:"title",type:"textbox",label:"Title",value:b.title}),l=e.windowManager.open({title:"Insert link",data:b,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:S,onkeyup:T,onbeforecall:E},d,v,k(b.href),p,m,g,h],onSubmit:function(n){var a=r.assumeExternalTargets(e.settings),u=o.link(e,i),l=o.unlink(e),d=t.extend({},b,n.data),p=d.href;return p?(f&&d.text!==s||delete d.text,p.indexOf("@")>0&&-1===p.indexOf("//")&&-1===p.indexOf("mailto:")?void c(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(d.href="mailto:"+p),u(d)}):!0===a&&!/^\w+:/i.test(p)||!1===a&&/^\s*www[\.|\d\.]/i.test(p)?void c(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(d.href="http://"+p),u(d)}):void u(d)):void l()}})};return{open:function(e){a(e,s)}}}),i("tinymce.plugins.link.core.Actions",["tinymce.core.util.VK","tinymce.plugins.link.api.Settings","tinymce.plugins.link.core.OpenUrl","tinymce.plugins.link.core.Utils","tinymce.plugins.link.ui.Dialog"],function(e,t,n,r,o){var i=function(e,t){return e.dom.getParent(t,"a[href]")},a=function(e){return i(e,e.selection.getStart())},u=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},c=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},s=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},l=function(e,t){if(t){var r=u(t);if(/^#/.test(r)){var o=e.$(r);o.length&&e.selection.scrollIntoView(o[0],!0)}else n.open(t.href)}};return{openDialog:function(e){return function(){o.open(e)}},gotoSelectedLink:function(e){return function(){l(e,a(e))}},leftClickedOnAHref:function(e){return function(n){var o,i,a;return!!(t.hasContextToolbar(e.settings)&&!c(e)&&r.isLink(n)&&(o=e.selection,i=o.getRng(),a=i.startContainer,3===a.nodeType&&o.isCollapsed()&&i.startOffset>0&&i.startOffset<a.data.length))}},setupGotoLinks:function(t){t.on("click",function(n){var r=i(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),l(t,r))}),t.on("keydown",function(e){var n=a(t);n&&13===e.keyCode&&s(e)&&(e.preventDefault(),l(t,n))})},toggleActiveState:function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!r.getAnchorElement(e,n.element))})}},toggleViewLinkState:function(e){return function(){var t=this,n=function(e){r.hasLinks(e.parents)?t.show():t.hide()};r.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}}}}),i("tinymce.plugins.link.api.Commands",["tinymce.plugins.link.core.Actions"],function(e){return{register:function(t){t.addCommand("mceLink",e.openDialog(t))}}}),i("tinymce.plugins.link.core.Keyboard",["tinymce.plugins.link.core.Actions"],function(e){return{setup:function(t){t.addShortcut("Meta+K","",e.openDialog(t))}}}),i("tinymce.plugins.link.ui.Controls",["tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Utils"],function(e,t){return{setupButtons:function(n){n.addButton("link",{icon:"link",tooltip:"Insert/edit link",onclick:e.openDialog(n),onpostrender:e.toggleActiveState(n)}),n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:t.unlink(n),onpostrender:e.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:e.gotoSelectedLink(n)})},setupMenuItems:function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:e.gotoSelectedLink(t),onPostRender:e.toggleViewLinkState(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:e.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(t){t.addContextToolbar&&t.addContextToolbar(e.leftClickedOnAHref(t),"openlink | link unlink")}}}),i("tinymce.plugins.link.Plugin",["tinymce.core.PluginManager","tinymce.plugins.link.api.Commands","tinymce.plugins.link.core.Actions","tinymce.plugins.link.core.Keyboard","tinymce.plugins.link.ui.Controls"],function(e,t,n,r,o){return e.add("link",function(e){o.setupButtons(e),o.setupMenuItems(e),o.setupContextToolbars(e),n.setupGotoLinks(e),t.register(e),r.setup(e)}),function(){}}),r("tinymce.plugins.link.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("6",tinymce.util.Tools.resolve),i("1",["6"],function(e){return e("tinymce.PluginManager")}),i("7",["6"],function(e){return e("tinymce.util.VK")}),i("8",[],function(){var e=function(e){return"boolean"==typeof e.link_assume_external_targets&&e.link_assume_external_targets},t=function(e){return"boolean"==typeof e.link_context_toolbar&&e.link_context_toolbar},n=function(e){return e.link_list},r=function(e){return"string"==typeof e.default_link_target},o=function(e){return e.default_link_target},i=function(e){return e.target_list},a=function(e,t){e.settings.target_list=t},u=function(e){return!1!==i(e)},c=function(e){return e.rel_list},s=function(e){return void 0!==c(e)},l=function(e){return e.link_class_list};return{assumeExternalTargets:e,hasContextToolbar:t,getLinkList:n,hasDefaultLinkTarget:r,getDefaultLinkTarget:o,getTargetList:i,setTargetList:a,shouldShowTargetList:u,getRelList:c,hasRelList:s,getLinkClassList:l,hasLinkClassList:function(e){return void 0!==l(e)},shouldShowLinkTitle:function(e){return!1!==e.link_title},allowUnsafeLinkTarget:function(e){return"boolean"==typeof e.allow_unsafe_link_target&&e.allow_unsafe_link_target}}}),a("c",document),a("d",window),i("e",["6"],function(e){return e("tinymce.dom.DOMUtils")}),i("f",["6"],function(e){return e("tinymce.Env")}),i("9",["c","d","e","f"],function(e,t,n,r){var o=function(t,n){e.body.appendChild(t),t.dispatchEvent(n),e.body.removeChild(t)};return{open:function(i){if(!r.ie||r.ie>10){var a=e.createElement("a");a.target="_blank",a.href=i,a.rel="noreferrer noopener";var u=e.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,null),o(a,u)}else{var c=t.open("","_blank");if(c){c.opener=null;var s=c.document;s.open(),s.write('<meta http-equiv="refresh" content="0; url='+n.DOM.encode(i)+'">'),s.close()}}}}}),a("g",RegExp),i("h",["6"],function(e){return e("tinymce.util.Tools")}),i("a",["g","h","8"],function(e,t,n){var r=function(e,n){var r=["noopener"],o=e?e.split(/\s+/):[],i=function(e){return t.trim(e.sort().join(" "))},a=function(e){return e=u(e),e.length?e.concat(r):r},u=function(e){return e.filter(function(e){return-1===t.inArray(r,e)})};return o=n?a(o):u(o),o.length?i(o):null},o=function(e){return e.replace(/\uFEFF/g,"")},i=function(e,t){return t=t||e.selection.getStart(),l(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")},a=function(e,t){var n=t?t.innerText||t.textContent:e.getContent({format:"text"});return o(n)},u=function(e){return e&&"A"===e.nodeName&&e.href},c=function(e){return t.grep(e,u).length>0},s=function(e){return!(/</.test(e)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(e)||-1===e.indexOf("href=")))},l=function(e){return e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},f=function(e,t){var n,r;(r=e.dom.select("img",t)[0])&&(n=e.dom.getParents(r,"a[href]",t)[0])&&(n.parentNode.insertBefore(r,n),e.dom.remove(n))},d=function(e,t,n){var r,o;(o=e.dom.select("img",t)[0])&&(r=e.dom.create("a",n),o.parentNode.insertBefore(r,o),r.appendChild(o))};return{link:function(e,t){return function(o){e.undoManager.transact(function(){var a=e.selection.getNode(),u=i(e,a),c={href:o.href,target:o.target?o.target:null,rel:o.rel?o.rel:null,"class":o["class"]?o["class"]:null,title:o.title?o.title:null};n.hasRelList(e.settings)||!1!==n.allowUnsafeLinkTarget(e.settings)||(c.rel=r(c.rel,"_blank"===c.target)),o.href===t.href&&(t.attach(),t={}),u?(e.focus(),o.hasOwnProperty("text")&&("innerText"in u?u.innerText=o.text:u.textContent=o.text),e.dom.setAttribs(u,c),e.selection.select(u),e.undoManager.add()):l(a)?d(e,a,c):o.hasOwnProperty("text")?e.insertContent(e.dom.createHTML("a",c,e.dom.encode(o.text))):e.execCommand("mceInsertLink",!1,c)})}},unlink:function(e){return function(){e.undoManager.transact(function(){var t=e.selection.getNode();l(t)?f(e,t):e.execCommand("unlink")})}},isLink:u,hasLinks:c,isOnlyTextSelected:s,getAnchorElement:i,getAnchorText:a,toggleTargetRules:r}}),i("i",["6"],function(e){return e("tinymce.util.Delay")}),i("j",["6"],function(e){return e("tinymce.util.XHR")}),i("b",["i","h","j","8","a"],function(e,t,n,r,o){var i={},a=function(e,t){var o=r.getLinkList(e.settings);"string"==typeof o?n.send({url:o,success:function(n){t(e,JSON.parse(n))}}):"function"==typeof o?o(function(n){t(e,n)}):t(e,o)},u=function(e,n,r){var o=function(e,r){return r=r||[],t.each(e,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r};return o(e,r||[])},c=function(t,n,r){var o=t.selection.getRng();e.setEditorTimeout(t,function(){t.windowManager.confirm(n,function(e){t.selection.setRng(o),r(e)})})},s=function(e,n){var a,s,l,f,d,p,m,g,h,v,y,b={},x=e.selection,w=e.dom,C=function(e){var t=l.find("#text");(!t.value()||e.lastControl&&t.value()===e.lastControl.text())&&t.value(e.control.text()),l.find("#href").value(e.control.value())},k=function(n){var r=[];if(t.each(e.dom.select("a:not([href])"),function(e){var t=e.name||e.id;t&&r.push({text:t,value:"#"+t,selected:-1!==n.indexOf("#"+t)})}),r.length)return r.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:r,onselect:C}},T=function(){s||!f||b.text||this.parent().parent().find("#text")[0].value(this.value())},S=function(n){var r=n.meta||{};p&&p.value(e.convertURL(this.value(),"href")),t.each(n.meta,function(e,t){var n=l.find("#"+t);"text"===t?0===s.length&&(n.value(e),b.text=e):n.value(e)}),r.attach&&(i={href:this.value(),attach:r.attach}),r.text||T.call(this)},E=function(e){e.meta=l.toJSON()};f=o.isOnlyTextSelected(x.getContent()),a=o.getAnchorElement(e),b.text=s=o.getAnchorText(e.selection,a),b.href=a?w.getAttrib(a,"href"):"",a?b.target=w.getAttrib(a,"target"):r.hasDefaultLinkTarget(e.settings)&&(b.target=r.getDefaultLinkTarget(e.settings)),(y=w.getAttrib(a,"rel"))&&(b.rel=y),(y=w.getAttrib(a,"class"))&&(b["class"]=y),(y=w.getAttrib(a,"title"))&&(b.title=y),f&&(d={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){b.text=this.value()}}),n&&(p={type:"listbox",label:"Link list",values:u(n,function(t){t.value=e.convertURL(t.value||t.url,"href")},[{text:"None",value:""}]),onselect:C,value:e.convertURL(b.href,"href"),onPostRender:function(){p=this}}),r.shouldShowTargetList(e.settings)&&(void 0===r.getTargetList(e.settings)&&r.setTargetList(e,[{text:"None",value:""},{text:"New window",value:"_blank"}]),g={name:"target",type:"listbox",label:"Target",values:u(r.getTargetList(e.settings))}),r.hasRelList(e.settings)&&(m={name:"rel",type:"listbox",label:"Rel",values:u(r.getRelList(e.settings),function(t){!1===r.allowUnsafeLinkTarget(e.settings)&&(t.value=o.toggleTargetRules(t.value,"_blank"===b.target))})}),r.hasLinkClassList(e.settings)&&(h={name:"class",type:"listbox",label:"Class",values:u(r.getLinkClassList(e.settings),function(t){t.value&&(t.textStyle=function(){return e.formatter.getCssText({inline:"a",classes:[t.value]})})})}),r.shouldShowLinkTitle(e.settings)&&(v={name:"title",type:"textbox",label:"Title",value:b.title}),l=e.windowManager.open({title:"Insert link",data:b,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:S,onkeyup:T,onbeforecall:E},d,v,k(b.href),p,m,g,h],onSubmit:function(n){var a=r.assumeExternalTargets(e.settings),u=o.link(e,i),l=o.unlink(e),d=t.extend({},b,n.data),p=d.href;return p?(f&&d.text!==s||delete d.text,p.indexOf("@")>0&&-1===p.indexOf("//")&&-1===p.indexOf("mailto:")?void c(e,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(e){e&&(d.href="mailto:"+p),u(d)}):!0===a&&!/^\w+:/i.test(p)||!1===a&&/^\s*www[\.|\d\.]/i.test(p)?void c(e,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(e){e&&(d.href="http://"+p),u(d)}):void u(d)):void l()}})};return{open:function(e){a(e,s)}}}),i("3",["7","8","9","a","b"],function(e,t,n,r,o){var i=function(e,t){return e.dom.getParent(t,"a[href]")},a=function(e){return i(e,e.selection.getStart())},u=function(e){var t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},c=function(e){var t=e.plugins.contextmenu;return!!t&&t.isContextMenuVisible()},s=function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey},l=function(e,t){if(t){var r=u(t);if(/^#/.test(r)){var o=e.$(r);o.length&&e.selection.scrollIntoView(o[0],!0)}else n.open(t.href)}};return{openDialog:function(e){return function(){o.open(e)}},gotoSelectedLink:function(e){return function(){l(e,a(e))}},leftClickedOnAHref:function(e){return function(n){var o,i,a;return!!(t.hasContextToolbar(e.settings)&&!c(e)&&r.isLink(n)&&(o=e.selection,i=o.getRng(),a=i.startContainer,3===a.nodeType&&o.isCollapsed()&&i.startOffset>0&&i.startOffset<a.data.length))}},setupGotoLinks:function(t){t.on("click",function(n){var r=i(t,n.target);r&&e.metaKeyPressed(n)&&(n.preventDefault(),l(t,r))}),t.on("keydown",function(e){var n=a(t);n&&13===e.keyCode&&s(e)&&(e.preventDefault(),l(t,n))})},toggleActiveState:function(e){return function(){var t=this;e.on("nodechange",function(n){t.active(!e.readonly&&!!r.getAnchorElement(e,n.element))})}},toggleViewLinkState:function(e){return function(){var t=this,n=function(e){r.hasLinks(e.parents)?t.show():t.hide()};r.hasLinks(e.dom.getParents(e.selection.getStart()))||t.hide(),e.on("nodechange",n),t.on("remove",function(){e.off("nodechange",n)})}}}}),i("2",["3"],function(e){return{register:function(t){t.addCommand("mceLink",e.openDialog(t))}}}),i("4",["3"],function(e){return{setup:function(t){t.addShortcut("Meta+K","",e.openDialog(t))}}}),i("5",["3","a"],function(e,t){return{setupButtons:function(n){n.addButton("link",{icon:"link",tooltip:"Insert/edit link",onclick:e.openDialog(n),onpostrender:e.toggleActiveState(n)}),n.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onclick:t.unlink(n),onpostrender:e.toggleActiveState(n)}),n.addContextToolbar&&n.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:e.gotoSelectedLink(n)})},setupMenuItems:function(t){t.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:e.gotoSelectedLink(t),onPostRender:e.toggleViewLinkState(t),prependToContext:!0}),t.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:e.openDialog(t),stateSelector:"a[href]",context:"insert",prependToContext:!0})},setupContextToolbars:function(t){t.addContextToolbar&&t.addContextToolbar(e.leftClickedOnAHref(t),"openlink | link unlink")}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return e.add("link",function(e){o.setupButtons(e),o.setupMenuItems(e),o.setupContextToolbars(e),n.setupGotoLinks(e),t.register(e),r.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),i("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.core.dom.BookmarkManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.BookmarkManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.lists.core.NodeType",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBlock:function(e,t){return e&&e.nodeName in t},isBogusBr:function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),i("tinymce.plugins.lists.core.Range",["tinymce.core.dom.RangeUtils","tinymce.plugins.lists.core.NodeType"],function(e,t){var n=function(n,r){var o=e.getNode(n,r);return t.isListItemNode(n)&&t.isTextNode(o)?{container:o,offset:r>=n.childNodes.length?o.data.length:0}:{container:n,offset:r}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var o=n(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t}}}),i("tinymce.plugins.lists.core.Bookmark",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Range"],function(e,t,n){var r=e.DOM;return{createBookmark:function(e){var t={},n=function(n){var o,i,a;i=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],1===i.nodeType&&(o=r.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(a=Math.min(a,i.childNodes.length-1),n?i.insertBefore(o,i.childNodes[a]):r.insertAfter(o,i.childNodes[a])):i.appendChild(o),i=o,a=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=a};return n(!0),e.collapsed||n(),t},resolveBookmark:function(e){function t(t){var n,o,i,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(o=a(n),n=n.parentNode,r.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o)}t(!0),t();var o=r.createRng();return o.setStart(e.startContainer,e.startOffset),e.endContainer&&o.setEnd(e.endContainer,e.endOffset),n.normalizeRange(o)}}}),i("tinymce.plugins.lists.core.NormalizeLists",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=e.DOM,o=function(e,t){var o,i=t.parentNode;"LI"===i.nodeName&&i.firstChild===t&&(o=i.previousSibling,o&&"LI"===o.nodeName?(o.appendChild(t),n.isEmpty(e,i)&&r.remove(i)):r.setStyle(i,"listStyleType","none")),n.isListNode(i)&&(o=i.previousSibling)&&"LI"===o.nodeName&&o.appendChild(t)};return{normalizeList:o,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){o(e,t)})}}}),i("tinymce.core.dom.DomQuery",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DomQuery")}),i("tinymce.plugins.lists.core.Selection",["tinymce.core.dom.DomQuery","tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=function(e){return e.dom.getParent(e.selection.getStart(!0),"OL,UL,DL")},o=function(e,t){return e&&1===t.length&&t[0]===e},i=function(e){return t.grep(e.querySelectorAll("ol,ul,dl"),function(e){return n.isListNode(e)})},a=function(n,r){var o=t.map(r,function(e){var t=n.dom.getParent(e,"li,dd,dt",n.getBody());return t||e});return e.unique(o)};return{getParentList:r,getSelectedSubLists:function(e){var a=r(e),u=e.selection.getSelectedBlocks();return o(a,u)?i(a):t.grep(u,function(e){return n.isListNode(e)&&a!==e})},getSelectedListItems:function(e){var r=e.selection.getSelectedBlocks();return t.grep(a(e,r),function(e){return n.isListItemNode(e)})}}}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.plugins.lists.core.TextBlock",["tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.plugins.lists.core.NodeType"],function(e,t,n){var r=e.DOM;return{createNewTextBlock:function(e,o,i){var a,u,c,s=r.createFragment(),l=e.schema.getBlockElements();if(e.settings.forced_root_block&&(i=i||e.settings.forced_root_block),i&&(u=r.create(i),u.tagName===e.settings.forced_root_block&&r.setAttribs(u,e.settings.forced_root_block_attrs),n.isBlock(o.firstChild,l)||s.appendChild(u)),o)for(;a=o.firstChild;){var f=a.nodeName;c||"SPAN"===f&&"bookmark"===a.getAttribute("data-mce-type")||(c=!0),n.isBlock(a,l)?(s.appendChild(a),u=null):i?(u||(u=r.create(i),s.appendChild(u)),u.appendChild(a)):s.appendChild(a)}return e.settings.forced_root_block?c||t.ie&&!(t.ie>10)||u.appendChild(r.create("br",{"data-mce-bogus":"1"})):s.appendChild(r.create("br")),s}}}),i("tinymce.plugins.lists.core.SplitList",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.TextBlock","tinymce.core.util.Tools"],function(e,t,n,r){var o=e.DOM;return{splitList:function(e,i,a,u){var c,s,l,f,d=function(e){r.each(l,function(t){e.parentNode.insertBefore(t,a.parentNode)}),o.remove(e)};for(l=o.select('span[data-mce-type="bookmark"]',i),u=u||n.createNewTextBlock(e,a),c=o.createRng(),c.setStartAfter(a),c.setEndAfter(i),s=c.extractContents(),f=s.firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&e.dom.isEmpty(f)){o.remove(f);break}e.dom.isEmpty(s)||o.insertAfter(s,i),o.insertAfter(u,i),t.isEmpty(e.dom,a.parentNode)&&d(a.parentNode),o.remove(a),t.isEmpty(e.dom,i)&&o.remove(i)}}}),i("tinymce.plugins.lists.actions.Outdent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList","tinymce.plugins.lists.core.TextBlock"],function(e,t,n,r,o,i,a){var u=e.DOM,c=function(e,t){n.isEmpty(e,t)&&u.remove(t)},s=function(e,t){var o,s=t.parentNode,l=s.parentNode;return!(s!==e.getBody()&&("DD"===t.nodeName?(u.rename(t,"DT"),0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===l.nodeName?(u.insertAfter(t,l),c(e.dom,l),u.remove(s)):n.isListNode(l)?u.remove(s,!0):(l.insertBefore(a.createNewTextBlock(e,t),s),u.remove(s)),0):n.isFirstChild(t)?("LI"===l.nodeName?(u.insertAfter(t,l),t.appendChild(s),c(e.dom,l)):n.isListNode(l)?l.insertBefore(t,s):(l.insertBefore(a.createNewTextBlock(e,t),s),u.remove(t)),0):n.isLastChild(t)?("LI"===l.nodeName?u.insertAfter(t,l):n.isListNode(l)?u.insertAfter(t,s):(u.insertAfter(a.createNewTextBlock(e,t),s),u.remove(t)),0):("LI"===l.nodeName?(s=l,o=a.createNewTextBlock(e,t,"LI")):o=n.isListNode(l)?a.createNewTextBlock(e,t,"LI"):a.createNewTextBlock(e,t),i.splitList(e,s,t,o),r.normalizeLists(e.dom,s.parentNode),0)))};return{outdent:s,outdentSelection:function(e){var n=o.getSelectedListItems(e);if(n.length){var r,i,a=t.createBookmark(e.selection.getRng(!0)),u=e.getBody();for(r=n.length;r--;)for(var c=n[r].parentNode;c&&c!==u;){for(i=n.length;i--;)if(n[i]===c){n.splice(r,1);break}c=c.parentNode}for(r=0;r<n.length&&(s(e,n[r])||0!==r);r++);return e.selection.setRng(t.resolveBookmark(a)),e.nodeChanged(),!0}}}}),i("tinymce.plugins.lists.actions.ToggleList",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Selection","tinymce.plugins.lists.core.SplitList"],function(e,t,n,r,o,i,a,u){var c=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},s=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},l=function(e,n,r){s(n,r["list-attributes"]),t.each(e.select("li",n),function(e){s(e,r["list-item-attributes"])})},f=function(e,t,n){c(e,t,n),l(e,t,n)},d=function(e,t,n){var r,i,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r);r.parentNode!==a;){if(o.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},p=function(n,r){for(var i,a=[],u=n.getBody(),c=n.dom,s=d(n,r,!0),l=d(n,r,!1),f=[],p=s;p&&(f.push(p),p!==l);p=p.nextSibling);return t.each(f,function(t){if(o.isTextBlock(n,t))return a.push(t),void(i=null);if(c.isBlock(t)||o.isBr(t))return o.isBr(t)&&c.remove(t),void(i=null);var r=t.nextSibling;if(e.isBookmarkNode(t)&&(o.isTextBlock(n,r)||!r&&t.parentNode===u))return void(i=null);i||(i=c.create("p"),t.parentNode.insertBefore(i,t),a.push(i)),i.appendChild(t)}),a},m=function(e,n,i){var a,u=e.selection.getRng(!0),c="LI",s=e.dom;i=i||{},"false"!==s.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(c="DT"),a=r.createBookmark(u),t.each(p(e,u),function(t){var r,a,u=function(e){var t=s.getStyle(e,"list-style-type"),n=i?i["list-style-type"]:"";return n=null===n?"":n,t===n};a=t.previousSibling,a&&o.isListNode(a)&&a.nodeName===n&&u(a)?(r=a,t=s.rename(t,c),a.appendChild(t)):(r=s.create(n),t.parentNode.insertBefore(r,t),r.appendChild(t),t=s.rename(t,c)),f(s,r,i),x(e.dom,r)}),e.selection.setRng(r.resolveBookmark(a)))},g=function(e){var c=r.createBookmark(e.selection.getRng(!0)),s=e.getBody(),l=a.getSelectedListItems(e),f=t.grep(l,function(t){return e.dom.isEmpty(t)});l=t.grep(l,function(t){return!e.dom.isEmpty(t)}),t.each(f,function(t){if(o.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(l,function(t){var n,r;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==s;n=n.parentNode)o.isListNode(n)&&(r=n);u.splitList(e,r,t),i.normalizeLists(e.dom,r.parentNode)}}),e.selection.setRng(r.resolveBookmark(c))},h=function(e,t){return e&&t&&o.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},y=function(e,t){return e.className===t.className},b=function(e,t,n){return h(t,n)&&v(e,t,n)&&y(t,n)},x=function(e,t){var n,r;if(n=t.nextSibling,b(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},w=function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);f(e,o,r)}else f(e,t,r)},C=function(e,n,o,i,a){if(n.nodeName!==i||k(a)){var u=r.createBookmark(e.selection.getRng(!0));t.each([n].concat(o),function(t){w(e.dom,t,i,a)}),e.selection.setRng(r.resolveBookmark(u))}else g(e,i)},k=function(e){return"list-style-type"in e},T=function(e,t,n,o){if(t!==e.getBody())if(t)if(t.nodeName!==n||k(o)){var i=r.createBookmark(e.selection.getRng(!0));f(e.dom,t,o),x(e.dom,e.dom.rename(t,n)),e.selection.setRng(r.resolveBookmark(i))}else g(e,n);else m(e,n,o)};return{toggleList:function(e,t,n){var r=a.getParentList(e),o=a.getSelectedSubLists(e);n=n||{},r&&o.length>0?C(e,r,o,t,n):T(e,r,t,n)},removeList:g,mergeWithAdjacentLists:x}}),i("tinymce.plugins.lists.core.Delete",["tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.util.VK","tinymce.plugins.lists.actions.ToggleList","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.NormalizeLists","tinymce.plugins.lists.core.Range","tinymce.plugins.lists.core.Selection"],function(e,t,n,r,o,i,a,u,c){var s=function(n,r,o){var a,u,c=r.startContainer,s=r.startOffset;if(3===c.nodeType&&(o?s<c.data.length:s>0))return c;for(a=n.schema.getNonEmptyElements(),1===c.nodeType&&(c=e.getNode(c,s)),u=new t(c,n.getBody()),o&&i.isBogusBr(n.dom,c)&&u.next();c=u[o?"next":"prev2"]();){if("LI"===c.nodeName&&!c.hasChildNodes())return c;if(a[c.nodeName])return c;if(3===c.nodeType&&c.data.length>0)return c}},l=function(e,t){var n=t.childNodes;return 1===n.length&&!i.isListNode(n[0])&&e.isBlock(n[0])},f=function(e,t){l(e,t)&&e.remove(t.firstChild,!0)},d=function(e,t,n){var r,o;if(o=l(e,n)?n.firstChild:n,f(e,t),!i.isEmpty(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},p=function(e,t,n){var r,o,a=t.parentNode;i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)&&(i.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&i.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&i.isBr(r)&&t.hasChildNodes()&&e.remove(r),
i.isEmpty(e,n,!0)&&e.$(n).empty(),d(e,t,n),o&&n.appendChild(o),e.remove(t),i.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a))},m=function(e,t,n){e.dom.$(n).empty(),p(e.dom,t,n),e.selection.setCursorLocation(n)},g=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))m(e,n,r);else{var a=o.createBookmark(t);p(i,n,r),e.selection.setRng(o.resolveBookmark(a))}},h=function(e,t,n,r){var i=o.createBookmark(t);p(e.dom,n,r),e.selection.setRng(o.resolveBookmark(i))},v=function(e,t){var n,o,a,c=e.dom,l=e.selection,f=c.getParent(l.getStart(),"LI");if(f){if((n=f.parentNode)===e.getBody()&&i.isEmpty(c,n))return!0;if(o=u.normalizeRange(l.getRng(!0)),(a=c.getParent(s(e,o,t),"LI"))&&a!==f)return t?g(e,o,a,f):h(e,o,f,a),!0;if(!a&&!t&&r.removeList(e,n.nodeName))return!0}return!1},y=function(e,t){var n=e.getParent(t.parentNode,e.isBlock);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},b=function(e,t){var n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock);if(o&&n.isEmpty(o)){var i=u.normalizeRange(e.selection.getRng(!0)),a=n.getParent(s(e,i,t),"LI");if(a)return e.undoManager.transact(function(){y(n,o),r.mergeWithAdjacentLists(n,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)}),!0}return!1},x=function(e,t){return v(e,t)||b(e,t)},w=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||c.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),a.normalizeLists(e.dom,e.getBody())}),!0)},C=function(e,t){return e.selection.isCollapsed()?x(e,t):w(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?C(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&C(e,!0)&&t.preventDefault()})},backspaceDelete:C}}),i("tinymce.plugins.lists.api.Api",["tinymce.plugins.lists.core.Delete"],function(e){return{get:function(t){return{backspaceDelete:function(n){e.backspaceDelete(t,n)}}}}}),i("tinymce.plugins.lists.actions.Indent",["tinymce.core.dom.DOMUtils","tinymce.plugins.lists.core.Bookmark","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n,r){var o=e.DOM,i=function(e,t){var r;if(n.isListNode(e)){for(;r=e.firstChild;)t.appendChild(r);o.remove(e)}},a=function(e){var t,r,a;return"DT"===e.nodeName?(o.rename(e,"DD"),!0):(t=e.previousSibling)&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling)&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName||(r=o.create(e.parentNode.nodeName),a=o.getStyle(e.parentNode,"listStyleType"),a&&o.setStyle(r,"listStyleType",a),t.appendChild(r),r.appendChild(e),i(e.lastChild,r),0))};return{indentSelection:function(e){var n=r.getSelectedListItems(e);if(n.length){for(var o=t.createBookmark(e.selection.getRng(!0)),i=0;i<n.length&&(a(n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(o)),e.nodeChanged(),!0}}}}),i("tinymce.plugins.lists.api.Commands",["tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.actions.ToggleList"],function(e,t,n){var r=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}};return{register:function(o){o.on("BeforeExecCommand",function(n){var r,i=n.command.toLowerCase();if("indent"===i?e.indentSelection(o)&&(r=!0):"outdent"===i&&t.outdentSelection(o)&&(r=!0),r)return o.fire("ExecCommand",{command:n.command}),n.preventDefault(),!0}),o.addCommand("InsertUnorderedList",function(e,t){n.toggleList(o,"UL",t)}),o.addCommand("InsertOrderedList",function(e,t){n.toggleList(o,"OL",t)}),o.addCommand("InsertDefinitionList",function(e,t){n.toggleList(o,"DL",t)}),o.addQueryStateHandler("InsertUnorderedList",r(o,"UL")),o.addQueryStateHandler("InsertOrderedList",r(o,"OL")),o.addQueryStateHandler("InsertDefinitionList",r(o,"DL"))}}}),i("tinymce.plugins.lists.api.Settings",[],function(){return{shouldIndentOnTab:function(e){return e.getParam("lists_indent_on_tab",!0)}}}),i("tinymce.plugins.lists.core.Keyboard",["tinymce.core.util.VK","tinymce.plugins.lists.actions.Indent","tinymce.plugins.lists.actions.Outdent","tinymce.plugins.lists.api.Settings","tinymce.plugins.lists.core.Delete"],function(e,t,n,r,o){var i=function(r){r.on("keydown",function(o){o.keyCode!==e.TAB||e.metaKeyPressed(o)||r.dom.getParent(r.selection.getStart(),"LI,DT,DD")&&(o.preventDefault(),o.shiftKey?n.outdentSelection(r):t.indentSelection(r))})};return{setup:function(e){r.shouldIndentOnTab(e)&&i(e),o.setup(e)}}}),i("tinymce.plugins.lists.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.lists.core.NodeType","tinymce.plugins.lists.core.Selection"],function(e,t,n){var r=function(n,r){return function(o){var i=o.control;n.on("NodeChange",function(n){var o=e.grep(n.parents,t.isListNode);i.active(o.length>0&&o[0].nodeName===r)})}},o=function(e){return function(r){var o=r.control;e.on("nodechange",function(){var r=n.getSelectedListItems(e),i=r.length>0&&t.isFirstChild(r[0]);o.disabled(i)})}};return{register:function(t){(function(t,n){var r=t.settings.plugins?t.settings.plugins:"";return-1!==e.inArray(r.split(/[ ,]/),n)})(t,"advlist")||(t.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:r(t,"OL")}),t.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:r(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:o(t)})}}}),i("tinymce.plugins.lists.Plugin",["tinymce.core.PluginManager","tinymce.plugins.lists.api.Api","tinymce.plugins.lists.api.Commands","tinymce.plugins.lists.core.Keyboard","tinymce.plugins.lists.ui.Buttons"],function(e,t,n,r,o){return e.add("lists",function(e){return r.setup(e),o.register(e),n.register(e),t.get(e)}),function(){}}),r("tinymce.plugins.lists.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("6",tinymce.util.Tools.resolve),i("1",["6"],function(e){return e("tinymce.PluginManager")}),i("g",["6"],function(e){return e("tinymce.dom.RangeUtils")}),i("h",["6"],function(e){return e("tinymce.dom.TreeWalker")}),i("b",["6"],function(e){return e("tinymce.util.VK")}),i("i",["6"],function(e){return e("tinymce.dom.BookmarkManager")}),i("d",["6"],function(e){return e("tinymce.util.Tools")}),i("j",["6"],function(e){return e("tinymce.dom.DOMUtils")}),i("e",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBlock:function(e,t){return e&&e.nodeName in t},isBogusBr:function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),i("p",["g","e"],function(e,t){var n=function(n,r){var o=e.getNode(n,r);return t.isListItemNode(n)&&t.isTextNode(o)?{container:o,offset:r>=n.childNodes.length?o.data.length:0}:{container:n,offset:r}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var o=n(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t}}}),i("k",["j","e","p"],function(e,t,n){var r=e.DOM,o=function(e){var t={},n=function(n){var o,i,a;i=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],1===i.nodeType&&(o=r.create("span",{"data-mce-type":"bookmark"}),i.hasChildNodes()?(a=Math.min(a,i.childNodes.length-1),n?i.insertBefore(o,i.childNodes[a]):r.insertAfter(o,i.childNodes[a])):i.appendChild(o),i=o,a=0),t[n?"startContainer":"endContainer"]=i,t[n?"startOffset":"endOffset"]=a};return n(!0),e.collapsed||n(),t},i=function(e){function t(t){var n,o,i,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=i=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(o=a(n),n=n.parentNode,r.remove(i)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o)}t(!0),t();var o=r.createRng();return o.setStart(e.startContainer,e.startOffset),e.endContainer&&o.setEnd(e.endContainer,e.endOffset),n.normalizeRange(o)};return{createBookmark:o,resolveBookmark:i}}),i("l",["j","d","e"],function(e,t,n){var r=e.DOM,o=function(e,t){var o,i=t.parentNode;"LI"===i.nodeName&&i.firstChild===t&&(o=i.previousSibling,o&&"LI"===o.nodeName?(o.appendChild(t),n.isEmpty(e,i)&&r.remove(i)):r.setStyle(i,"listStyleType","none")),n.isListNode(i)&&(o=i.previousSibling)&&"LI"===o.nodeName&&o.appendChild(t)};return{normalizeList:o,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){o(e,t)})}}}),i("m",["6"],function(e){return e("tinymce.dom.DomQuery")}),i("f",["m","d","e"],function(e,t,n){var r=function(e){return e.dom.getParent(e.selection.getStart(!0),"OL,UL,DL")},o=function(e,t){return e&&1===t.length&&t[0]===e},i=function(e){return t.grep(e.querySelectorAll("ol,ul,dl"),function(e){return n.isListNode(e)})},a=function(n,r){var o=t.map(r,function(e){var t=n.dom.getParent(e,"li,dd,dt",n.getBody());return t||e});return e.unique(o)};return{getParentList:r,getSelectedSubLists:function(e){var a=r(e),u=e.selection.getSelectedBlocks();return o(a,u)?i(a):t.grep(u,function(e){return n.isListNode(e)&&a!==e})},getSelectedListItems:function(e){var r=e.selection.getSelectedBlocks();return t.grep(a(e,r),function(e){return n.isListItemNode(e)})}}}),i("q",["6"],function(e){return e("tinymce.Env")}),i("o",["j","q","e"],function(e,t,n){var r=e.DOM;return{createNewTextBlock:function(e,o,i){var a,u,c,s=r.createFragment(),l=e.schema.getBlockElements();if(e.settings.forced_root_block&&(i=i||e.settings.forced_root_block),i&&(u=r.create(i),u.tagName===e.settings.forced_root_block&&r.setAttribs(u,e.settings.forced_root_block_attrs),n.isBlock(o.firstChild,l)||s.appendChild(u)),o)for(;a=o.firstChild;){var f=a.nodeName;c||"SPAN"===f&&"bookmark"===a.getAttribute("data-mce-type")||(c=!0),n.isBlock(a,l)?(s.appendChild(a),u=null):i?(u||(u=r.create(i),s.appendChild(u)),u.appendChild(a)):s.appendChild(a)}return e.settings.forced_root_block?c||t.ie&&!(t.ie>10)||u.appendChild(r.create("br",{"data-mce-bogus":"1"})):s.appendChild(r.create("br")),s}}}),i("n",["j","e","o","d"],function(e,t,n,r){var o=e.DOM;return{splitList:function(e,i,a,u){var c,s,l,f,d=function(e){r.each(l,function(t){e.parentNode.insertBefore(t,a.parentNode)}),o.remove(e)};for(l=o.select('span[data-mce-type="bookmark"]',i),u=u||n.createNewTextBlock(e,a),c=o.createRng(),c.setStartAfter(a),c.setEndAfter(i),s=c.extractContents(),f=s.firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&e.dom.isEmpty(f)){o.remove(f);break}e.dom.isEmpty(s)||o.insertAfter(s,i),o.insertAfter(u,i),t.isEmpty(e.dom,a.parentNode)&&d(a.parentNode),o.remove(a),t.isEmpty(e.dom,i)&&o.remove(i)}}}),i("9",["j","k","e","l","f","n","o"],function(e,t,n,r,o,i,a){var u=e.DOM,c=function(e,t){n.isEmpty(e,t)&&u.remove(t)},s=function(e,t){var o,s=t.parentNode,l=s.parentNode;return!(s!==e.getBody()&&("DD"===t.nodeName?(u.rename(t,"DT"),0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===l.nodeName?(u.insertAfter(t,l),c(e.dom,l),u.remove(s)):n.isListNode(l)?u.remove(s,!0):(l.insertBefore(a.createNewTextBlock(e,t),s),u.remove(s)),0):n.isFirstChild(t)?("LI"===l.nodeName?(u.insertAfter(t,l),t.appendChild(s),c(e.dom,l)):n.isListNode(l)?l.insertBefore(t,s):(l.insertBefore(a.createNewTextBlock(e,t),s),u.remove(t)),0):n.isLastChild(t)?("LI"===l.nodeName?u.insertAfter(t,l):n.isListNode(l)?u.insertAfter(t,s):(u.insertAfter(a.createNewTextBlock(e,t),s),u.remove(t)),0):("LI"===l.nodeName?(s=l,o=a.createNewTextBlock(e,t,"LI")):o=n.isListNode(l)?a.createNewTextBlock(e,t,"LI"):a.createNewTextBlock(e,t),i.splitList(e,s,t,o),r.normalizeLists(e.dom,s.parentNode),0)))};return{outdent:s,outdentSelection:function(e){var n=o.getSelectedListItems(e);if(n.length){var r,i,a=t.createBookmark(e.selection.getRng(!0)),u=e.getBody();for(r=n.length;r--;)for(var c=n[r].parentNode;c&&c!==u;){for(i=n.length;i--;)if(n[i]===c){n.splice(r,1);break}c=c.parentNode}for(r=0;r<n.length&&(s(e,n[r])||0!==r);r++);return e.selection.setRng(t.resolveBookmark(a)),e.nodeChanged(),!0}}}}),i("a",["i","d","9","k","e","l","f","n"],function(e,t,n,r,o,i,a,u){var c=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},s=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},l=function(e,n,r){s(n,r["list-attributes"]),t.each(e.select("li",n),function(e){s(e,r["list-item-attributes"])})},f=function(e,t,n){c(e,t,n),l(e,t,n)},d=function(e,t,n){var r,i,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(i,r.childNodes.length-1)]||r);r.parentNode!==a;){if(o.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},p=function(n,r){for(var i,a=[],u=n.getBody(),c=n.dom,s=d(n,r,!0),l=d(n,r,!1),f=[],p=s;p&&(f.push(p),p!==l);p=p.nextSibling);return t.each(f,function(t){if(o.isTextBlock(n,t))return a.push(t),void(i=null);if(c.isBlock(t)||o.isBr(t))return o.isBr(t)&&c.remove(t),void(i=null);var r=t.nextSibling;return e.isBookmarkNode(t)&&(o.isTextBlock(n,r)||!r&&t.parentNode===u)?void(i=null):(i||(i=c.create("p"),t.parentNode.insertBefore(i,t),a.push(i)),void i.appendChild(t))}),a},m=function(e,n,i){var a,u=e.selection.getRng(!0),c="LI",s=e.dom;i=i||{},"false"!==s.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(c="DT"),a=r.createBookmark(u),t.each(p(e,u),function(t){var r,a,u=function(e){var t=s.getStyle(e,"list-style-type"),n=i?i["list-style-type"]:"";return n=null===n?"":n,t===n};a=t.previousSibling,a&&o.isListNode(a)&&a.nodeName===n&&u(a)?(r=a,t=s.rename(t,c),a.appendChild(t)):(r=s.create(n),t.parentNode.insertBefore(r,t),r.appendChild(t),t=s.rename(t,c)),f(s,r,i),x(e.dom,r)}),e.selection.setRng(r.resolveBookmark(a)))},g=function(e){var c=r.createBookmark(e.selection.getRng(!0)),s=e.getBody(),l=a.getSelectedListItems(e),f=t.grep(l,function(t){return e.dom.isEmpty(t)});l=t.grep(l,function(t){return!e.dom.isEmpty(t)}),t.each(f,function(t){if(o.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(l,function(t){var n,r;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==s;n=n.parentNode)o.isListNode(n)&&(r=n);u.splitList(e,r,t),i.normalizeLists(e.dom,r.parentNode)}}),e.selection.setRng(r.resolveBookmark(c))},h=function(e,t){return e&&t&&o.isListNode(e)&&e.nodeName===t.nodeName},v=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},y=function(e,t){return e.className===t.className},b=function(e,t,n){return h(t,n)&&v(e,t,n)&&y(t,n)},x=function(e,t){var n,r;if(n=t.nextSibling,b(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,b(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}},w=function(e,t,n,r){if(t.nodeName!==n){var o=e.rename(t,n);f(e,o,r)}else f(e,t,r)},C=function(e,n,o,i,a){if(n.nodeName!==i||k(a)){var u=r.createBookmark(e.selection.getRng(!0));t.each([n].concat(o),function(t){w(e.dom,t,i,a)}),e.selection.setRng(r.resolveBookmark(u))}else g(e,i)},k=function(e){return"list-style-type"in e},T=function(e,t,n,o){if(t!==e.getBody())if(t)if(t.nodeName!==n||k(o)){var i=r.createBookmark(e.selection.getRng(!0));f(e.dom,t,o),x(e.dom,e.dom.rename(t,n)),e.selection.setRng(r.resolveBookmark(i))}else g(e,n);else m(e,n,o)};return{toggleList:function(e,t,n){var r=a.getParentList(e),o=a.getSelectedSubLists(e);n=n||{},r&&o.length>0?C(e,r,o,t,n):T(e,r,t,n)},removeList:g,mergeWithAdjacentLists:x}}),i("7",["g","h","b","a","k","e","l","p","f"],function(e,t,n,r,o,i,a,u,c){var s=function(n,r,o){var a,u,c=r.startContainer,s=r.startOffset;if(3===c.nodeType&&(o?s<c.data.length:s>0))return c;for(a=n.schema.getNonEmptyElements(),1===c.nodeType&&(c=e.getNode(c,s)),u=new t(c,n.getBody()),o&&i.isBogusBr(n.dom,c)&&u.next();c=u[o?"next":"prev2"]();){if("LI"===c.nodeName&&!c.hasChildNodes())return c;if(a[c.nodeName])return c;if(3===c.nodeType&&c.data.length>0)return c}},l=function(e,t){var n=t.childNodes;return 1===n.length&&!i.isListNode(n[0])&&e.isBlock(n[0])},f=function(e,t){l(e,t)&&e.remove(t.firstChild,!0)},d=function(e,t,n){var r,o;if(o=l(e,n)?n.firstChild:n,f(e,t),!i.isEmpty(e,t,!0))for(;r=t.firstChild;)o.appendChild(r)},p=function(e,t,n){var r,o,a=t.parentNode;i.isChildOfBody(e,t)&&i.isChildOfBody(e,n)&&(i.isListNode(n.lastChild)&&(o=n.lastChild),a===n.lastChild&&i.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&i.isBr(r)&&t.hasChildNodes()&&e.remove(r),i.isEmpty(e,n,!0)&&e.$(n).empty(),d(e,t,n),o&&n.appendChild(o),e.remove(t),i.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a))},m=function(e,t,n){e.dom.$(n).empty(),p(e.dom,t,n),e.selection.setCursorLocation(n)},g=function(e,t,n,r){var i=e.dom;if(i.isEmpty(r))m(e,n,r);else{var a=o.createBookmark(t);p(i,n,r),e.selection.setRng(o.resolveBookmark(a))}},h=function(e,t,n,r){var i=o.createBookmark(t);p(e.dom,n,r),e.selection.setRng(o.resolveBookmark(i))},v=function(e,t){var n,o,a,c=e.dom,l=e.selection,f=c.getParent(l.getStart(),"LI");if(f){if((n=f.parentNode)===e.getBody()&&i.isEmpty(c,n))return!0;if(o=u.normalizeRange(l.getRng(!0)),(a=c.getParent(s(e,o,t),"LI"))&&a!==f)return t?g(e,o,a,f):h(e,o,f,a),!0;if(!a&&!t&&r.removeList(e,n.nodeName))return!0}return!1},y=function(e,t){var n=e.getParent(t.parentNode,e.isBlock);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)},b=function(e,t){var n=e.dom,o=n.getParent(e.selection.getStart(),n.isBlock);if(o&&n.isEmpty(o)){var i=u.normalizeRange(e.selection.getRng(!0)),a=n.getParent(s(e,i,t),"LI");if(a)return e.undoManager.transact(function(){y(n,o),r.mergeWithAdjacentLists(n,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)}),!0}return!1},x=function(e,t){return v(e,t)||b(e,t)},w=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||c.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),a.normalizeLists(e.dom,e.getBody())}),!0)},C=function(e,t){return e.selection.isCollapsed()?x(e,t):w(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?C(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&C(e,!0)&&t.preventDefault()})},backspaceDelete:C}}),i("2",["7"],function(e){return{get:function(t){return{backspaceDelete:function(n){e.backspaceDelete(t,n)}}}}}),i("8",["j","k","e","f"],function(e,t,n,r){var o=e.DOM,i=function(e,t){var r;if(n.isListNode(e)){for(;r=e.firstChild;)t.appendChild(r);o.remove(e)}},a=function(e){var t,r,a;return"DT"===e.nodeName?(o.rename(e,"DD"),!0):(t=e.previousSibling,t&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),i(e.lastChild,t.lastChild),!0):(t=e.nextSibling,t&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName||(r=o.create(e.parentNode.nodeName),a=o.getStyle(e.parentNode,"listStyleType"),a&&o.setStyle(r,"listStyleType",a),t.appendChild(r),r.appendChild(e),i(e.lastChild,r),0))))};return{indentSelection:function(e){var n=r.getSelectedListItems(e);if(n.length){for(var o=t.createBookmark(e.selection.getRng(!0)),i=0;i<n.length&&(a(n[i])||0!==i);i++);return e.selection.setRng(t.resolveBookmark(o)),e.nodeChanged(),!0}}}}),i("3",["8","9","a"],function(e,t,n){var r=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}};return{register:function(o){o.on("BeforeExecCommand",function(n){var r,i=n.command.toLowerCase();if("indent"===i?e.indentSelection(o)&&(r=!0):"outdent"===i&&t.outdentSelection(o)&&(r=!0),r)return o.fire("ExecCommand",{command:n.command}),n.preventDefault(),!0}),o.addCommand("InsertUnorderedList",function(e,t){n.toggleList(o,"UL",t)}),o.addCommand("InsertOrderedList",function(e,t){n.toggleList(o,"OL",t)}),o.addCommand("InsertDefinitionList",function(e,t){n.toggleList(o,"DL",t)}),o.addQueryStateHandler("InsertUnorderedList",r(o,"UL")),o.addQueryStateHandler("InsertOrderedList",r(o,"OL")),o.addQueryStateHandler("InsertDefinitionList",r(o,"DL"))}}}),i("c",[],function(){return{shouldIndentOnTab:function(e){return e.getParam("lists_indent_on_tab",!0)}}}),i("4",["b","8","9","c","7"],function(e,t,n,r,o){var i=function(r){r.on("keydown",function(o){o.keyCode!==e.TAB||e.metaKeyPressed(o)||r.dom.getParent(r.selection.getStart(),"LI,DT,DD")&&(o.preventDefault(),o.shiftKey?n.outdentSelection(r):t.indentSelection(r))})};return{setup:function(e){r.shouldIndentOnTab(e)&&i(e),o.setup(e)}}}),i("5",["d","e","f"],function(e,t,n){var r=function(n,r){return function(o){var i=o.control;n.on("NodeChange",function(n){var o=e.grep(n.parents,t.isListNode);i.active(o.length>0&&o[0].nodeName===r)})}},o=function(e){return function(r){var o=r.control;e.on("nodechange",function(){var r=n.getSelectedListItems(e),i=r.length>0&&t.isFirstChild(r[0]);o.disabled(i)})}};return{register:function(t){(function(t,n){var r=t.settings.plugins?t.settings.plugins:"";return-1!==e.inArray(r.split(/[ ,]/),n)})(t,"advlist")||(t.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:r(t,"OL")}),t.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:r(t,"UL")})),t.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:o(t)})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return e.add("lists",function(e){return r.setup(e),o.register(e),n.register(e),t.get(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.media.api.Settings",[],function(){return{getScripts:function(e){return e.getParam("media_scripts")},getAudioTemplateCallback:function(e){return e.getParam("audio_template_callback")},getVideoTemplateCallback:function(e){return e.getParam("video_template_callback")},hasLiveEmbeds:function(e){return e.getParam("media_live_embeds",!0)},shouldFilterHtml:function(e){return e.getParam("media_filter_html",!0)},getUrlResolver:function(e){return e.getParam("media_url_resolver")},hasAltSource:function(e){return e.getParam("media_alt_source",!0)},hasPoster:function(e){return e.getParam("media_poster",!0)},hasDimensions:function(e){return e.getParam("media_dimensions",!0)}}}),i("tinymce.core.html.SaxParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.SaxParser")}),i("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.media.core.VideoScript",[],function(){return{getVideoScriptMatch:function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}}}),i("tinymce.plugins.media.core.Size",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},r=function(e){return function(n,r){n&&(n.style[e]=t(r))}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:r("maxWidth"),setMaxHeight:r("maxHeight")}}),i("tinymce.plugins.media.core.HtmlToData",["tinymce.core.util.Tools","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.VideoScript","tinymce.plugins.media.core.Size"],function(e,t,n,r,o,i){var a=r.DOM,u=function(e){return a.getAttrib(e,"data-ephox-embed-iri")},c=function(e){var t=a.createFragment(e);return""!==u(t.firstChild)},s=function(n,r){var i={};return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,r){if(i.source1||"param"!==t||(i.source1=r.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(i.type||(i.type=t),i=e.extend(r.map,i)),"script"===t){var a=o.getVideoScriptMatch(n,r.map.src);if(!a)return;i={type:"script",source1:r.map.src,width:a.width,height:a.height}}"source"===t&&(i.source1?i.source2||(i.source2=r.map.src):i.source1=r.map.src),"img"!==t||i.poster||(i.poster=r.map.src)}}).parse(r),i.source1=i.source1||i.src||i.data,i.source2=i.source2||"",i.poster=i.poster||"",i},l=function(e){var t=a.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:u(n),source2:"",poster:"",width:i.getMaxWidth(n),height:i.getMaxHeight(n)}};return{htmlToData:function(e,t){return c(t)?l(t):s(e,t)}}}),i("tinymce.core.util.Promise",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Promise")}),i("tinymce.plugins.media.core.Mime",[],function(){return{guess:function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r||""}}}),i("tinymce.core.html.Writer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Writer")}),i("tinymce.plugins.media.core.UpdateHtml",["tinymce.core.html.Writer","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.dom.DOMUtils","tinymce.plugins.media.core.Size"],function(e,t,n,r,o){var i=r.DOM,a=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)i=e[r],i.name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},u=function(n){var r=new e;return new t(r).parse(n),r.getContent()},c=function(r,o,i){var u,c=new e,s=0;return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){c.comment(e)},cdata:function(e){c.cdata(e)},text:function(e,t){c.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":o.height!==undefined&&o.width!==undefined&&a(t,{width:o.width,height:o.height})}if(i)switch(e){case"video":a(t,{poster:o.poster,src:""}),o.source2&&a(t,{src:""});break;case"iframe":a(t,{src:o.source1});break;case"source":if(++s<=2&&(a(t,{src:o["source"+s],type:o["source"+s+"mime"]}),!o["source"+s]))return;break;case"img":if(!o.poster)return;u=!0}c.start(e,t,n)},end:function(e){if("video"===e&&i)for(var t=1;t<=2;t++)if(o["source"+t]){var n=[];n.map={},s<t&&(a(n,{src:o["source"+t],type:o["source"+t+"mime"]}),c.start("source",n,!0))}if(o.poster&&"object"===e&&i&&!u){var r=[];r.map={},a(r,{src:o.poster,width:o.width,height:o.height}),c.start("img",r,!0)}c.end(e)}},new n({})).parse(r),c.getContent()},s=function(e){var t=i.createFragment(e);return""!==i.getAttrib(t.firstChild,"data-ephox-embed-iri")},l=function(e,t){var n=i.createFragment(e),r=n.firstChild;return o.setMaxWidth(r,t.width),o.setMaxHeight(r,t.height),u(r.outerHTML)};return{updateHtml:function(e,t,n){return s(e)?l(e,t):c(e,t,n)}}}),i("tinymce.plugins.media.core.UrlPatterns",[],function(){return{urlPatterns:[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}]}}),i("tinymce.plugins.media.core.DataToHtml",["tinymce.core.util.Tools","tinymce.plugins.media.api.Settings","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.Mime","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.core.UrlPatterns","tinymce.plugins.media.core.VideoScript"],function(e,t,n,r,o,i,a){var u=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},c=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},s=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},l=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},f=function(e){return'<script src="'+e.source1+'"></script>'};return{dataToHtml:function(d,p){var m=e.extend({},p);if(!m.source1&&(e.extend(m,n.htmlToData(t.getScripts(d),m.embed)),!m.source1))return"";if(m.source2||(m.source2=""),m.poster||(m.poster=""),m.source1=d.convertURL(m.source1,"source"),m.source2=d.convertURL(m.source2,"source"),m.source1mime=r.guess(m.source1),m.source2mime=r.guess(m.source2),m.poster=d.convertURL(m.poster,"poster"),e.each(i.urlPatterns,function(e){var t,n,r=e.regex.exec(m.source1);if(r){for(n=e.url,t=0;r[t];t++)n=n.replace("$"+t,function(){return r[t]});m.source1=n,m.type=e.type,m.allowFullscreen=e.allowFullscreen,m.width=m.width||e.w,m.height=m.height||e.h}}),m.embed)return o.updateHtml(m.embed,m,!0);var g=a.getVideoScriptMatch(t.getScripts(d),m.source1);g&&(m.type="script",m.width=g.width,m.height=g.height);var h=t.getAudioTemplateCallback(d),v=t.getVideoTemplateCallback(d);return m.width=m.width||300,m.height=m.height||150,e.each(m,function(e,t){m[t]=d.dom.encode(e)}),"iframe"===m.type?u(m):"application/x-shockwave-flash"===m.source1mime?c(m):-1!==m.source1mime.indexOf("audio")?s(m,h):"script"===m.type?f(m):l(m,v)}}}),i("tinymce.plugins.media.core.Service",["tinymce.core.util.Promise","tinymce.plugins.media.api.Settings","tinymce.plugins.media.core.DataToHtml"],function(e,t,n){var r={},o=function(t,n,o){return new e(function(e,i){var a=function(o){return o.html&&(r[t.source1]=o),e({url:t.source1,html:o.html?o.html:n(t)})
};r[t.source1]?a(r[t.source1]):o({url:t.source1},a,i)})},i=function(t,n){return new e(function(e){e({html:n(t),url:t.source1})})},a=function(e){return function(t){return n.dataToHtml(e,t)}};return{getEmbedHtml:function(e,n){var r=t.getUrlResolver(e);return r?o(n,a(e),r):i(n,a(e))},isCached:function(e){return r.hasOwnProperty(e)}}}),i("tinymce.plugins.media.ui.SizeManager",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},n=function(t,n,r){var o=t.state.get("oldVal"),i=n.state.get("oldVal"),a=t.value(),u=n.value();r&&o&&i&&a&&u&&(a!==o?(u=Math.round(a/o*u),isNaN(u)||n.value(u)):(a=Math.round(u/i*a),isNaN(a)||t.value(a))),e(t,n)},r=function(n){t(n,e)},o=function(e){t(e,n)};return{createUi:function(e){var t=function(){e(function(e){o(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:r,updateSize:o}}),i("tinymce.plugins.media.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.media.api.Settings","tinymce.plugins.media.core.HtmlToData","tinymce.plugins.media.core.Service","tinymce.plugins.media.core.Size","tinymce.plugins.media.core.UpdateHtml","tinymce.plugins.media.ui.SizeManager"],function(e,t,n,r,o,i,a,u){var c=e.ie&&e.ie<=8?"onChange":"onInput",s=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},l=function(e){var t=e.selection.getNode(),o=t.getAttribute("data-ephox-embed-iri");return o?{source1:o,"data-ephox-embed-iri":o,width:i.getMaxWidth(t),height:i.getMaxHeight(t)}:t.getAttribute("data-mce-object")?r.htmlToData(n.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},f=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},d=function(e,o){return function(i){var a=i.html,c=e.find("#embed")[0],s=t.extend(r.htmlToData(n.getScripts(o),a),{source1:i.url});e.fromJSON(s),c&&(c.value(a),u.updateSize(e))}},p=function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;r>=0;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])},m=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),p(e,n),e.nodeChanged()},g=function(e,t){var n=e.toJSON();n.embed=a.updateHtml(n.embed,n),n.embed&&o.isCached(n.source1)?m(t,n.embed):o.getEmbedHtml(t,n).then(function(e){m(t,e.html)})["catch"](s(t))},h=function(e,n){t.each(n,function(t,n){e.find("#"+n).value(t)})};return{showDialog:function(e){var i,p,m=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){o.getEmbedHtml(e,i.toJSON()).then(d(i,e))["catch"](s(e))},1)},onchange:function(t){o.getEmbedHtml(e,i.toJSON()).then(d(i,e))["catch"](s(e)),h(i,t.meta)},onbeforecall:function(e){e.meta=i.toJSON()}}],v=[],y=function(e){e(i),p=i.toJSON(),i.find("#embed").value(a.updateHtml(p.embed,p))};if(n.hasAltSource(e)&&v.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),n.hasPoster(e)&&v.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),n.hasDimensions(e)){var b=u.createUi(y);m.push(b)}p=l(e);var x={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:f(e),multiline:!0,rows:5,label:"Source"},w=function(){p=t.extend({},r.htmlToData(n.getScripts(e),this.value())),this.parent().parent().fromJSON(p)};x[c]=w,i=e.windowManager.open({title:"Insert/edit media",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},x]},{title:"Advanced",type:"form",items:v}],onSubmit:function(){u.updateSize(i),g(i,e)}}),u.syncSize(i)}}}),i("tinymce.plugins.media.api.Api",["tinymce.plugins.media.ui.Dialog"],function(e){return{get:function(t){return{showDialog:function(){e.showDialog(t)}}}}}),i("tinymce.plugins.media.api.Commands",["tinymce.plugins.media.ui.Dialog"],function(e){return{register:function(t){var n=function(){e.showDialog(t)};t.addCommand("mceMedia",n)}}}),i("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),i("tinymce.plugins.media.core.Sanitize",["tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.html.Writer","tinymce.core.util.Tools","tinymce.plugins.media.api.Settings"],function(e,t,n,r,o){return{sanitize:function(r,i){if(!1===o.shouldFilterHtml(r))return i;var a,u=new n;return new e({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){u.comment(e)},cdata:function(e){u.cdata(e)},text:function(e,t){u.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e){for(var o=0;o<t.length;o++){if(0===t[o].name.indexOf("on"))return;"style"===t[o].name&&(t[o].value=r.dom.serializeStyle(r.dom.parseStyle(t[o].value),e))}u.start(e,t,n),a=!1}},end:function(e){a||u.end(e)}},new t({})).parse(i),u.getContent()}}}),i("tinymce.plugins.media.core.Nodes",["tinymce.core.Env","tinymce.core.html.Node","tinymce.plugins.media.api.Settings","tinymce.plugins.media.core.Sanitize","tinymce.plugins.media.core.VideoScript"],function(e,t,n,r,o){var i=function(n,r){var o,i=r.name;return o=new t("img",1),o.shortEnded=!0,u(n,r,o),o.attr({width:r.attr("width")||"300",height:r.attr("height")||("audio"===i?"30":"150"),style:r.attr("style"),src:e.transparentSrc,"data-mce-object":i,"class":"mce-object mce-object-"+i}),o},a=function(e,n){var r,o,i,a=n.name;return r=new t("span",1),r.attr({contentEditable:"false",style:n.attr("style"),"data-mce-object":a,"class":"mce-preview-object mce-object-"+a}),u(e,n,r),o=new t(a,1),o.attr({src:n.attr("src"),allowfullscreen:n.attr("allowfullscreen"),width:n.attr("width")||"300",height:n.attr("height")||("audio"===a?"30":"150"),frameborder:"0"}),i=new t("span",1),i.attr("class","mce-shim"),r.append(o),r.append(i),r},u=function(e,t,n){var o,i,a,u,c;for(a=t.attributes,u=a.length;u--;)o=a[u].name,i=a[u].value,"width"!==o&&"height"!==o&&"style"!==o&&("data"!==o&&"src"!==o||(i=e.convertURL(i,o)),n.attr("data-mce-p-"+o,i));(c=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(r.sanitize(e,c))),n.firstChild=null)},c=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1};return{createPreviewIframeNode:a,createPlaceholderNode:i,placeHolderConverter:function(t){return function(r){for(var u,s,l=r.length;l--;)u=r[l],u.parent&&(u.parent.attr("data-mce-object")||("script"!==u.name||(s=o.getVideoScriptMatch(n.getScripts(t),u.attr("src"))))&&(s&&(s.width&&u.attr("width",s.width.toString()),s.height&&u.attr("height",s.height.toString())),"iframe"===u.name&&n.hasLiveEmbeds(t)&&e.ceFalse?c(u)||u.replace(a(t,u)):c(u)||u.replace(i(t,u))))}}}}),i("tinymce.plugins.media.core.FilterContent",["tinymce.core.html.Node","tinymce.core.util.Tools","tinymce.plugins.media.core.Nodes","tinymce.plugins.media.core.Sanitize"],function(e,t,n,r){return{setup:function(o){o.on("preInit",function(){var i=o.schema.getSpecialElements();t.each("video audio iframe object".split(" "),function(e){i[e]=new RegExp("</"+e+"[^>]*>","gi")});var a=o.schema.getBoolAttrs();t.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){a[e]={}}),o.parser.addNodeFilter("iframe,video,audio,object,embed,script",n.placeHolderConverter(o)),o.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var i,a,u,c,s,l,f,d,p=t.length;p--;)if(i=t[p],i.parent){for(f=i.attr(n),a=new e(f,1),"audio"!==f&&"script"!==f&&(d=i.attr("class"),d&&-1!==d.indexOf("mce-preview-object")?a.attr({width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}):a.attr({width:i.attr("width"),height:i.attr("height")})),a.attr({style:i.attr("style")}),c=i.attributes,u=c.length;u--;){var m=c[u].name;0===m.indexOf("data-mce-p-")&&a.attr(m.substr(11),c[u].value)}"script"===f&&a.attr("type","text/javascript"),s=i.attr("data-mce-html"),s&&(l=new e("#text",3),l.raw=!0,l.value=r.sanitize(o,unescape(s)),a.append(l)),i.replace(a)}})}),o.on("setContent",function(){o.$("span.mce-preview-object").each(function(e,t){var n=o.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})})}}}),i("tinymce.plugins.media.core.ResolveName",[],function(){return{setup:function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})}}}),i("tinymce.plugins.media.core.Selection",["tinymce.plugins.media.core.UpdateHtml"],function(e){return{setup:function(t){t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(t){var n,r=t.target;r.getAttribute("data-mce-object")&&(n=r.getAttribute("data-mce-html"))&&(n=unescape(n),r.setAttribute("data-mce-html",escape(e.updateHtml(n,{width:t.width,height:t.height}))))})}}}),i("tinymce.plugins.media.ui.Buttons",[],function(){return{register:function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})}}}),i("tinymce.plugins.media.Plugin",["tinymce.core.PluginManager","tinymce.plugins.media.api.Api","tinymce.plugins.media.api.Commands","tinymce.plugins.media.core.FilterContent","tinymce.plugins.media.core.ResolveName","tinymce.plugins.media.core.Selection","tinymce.plugins.media.ui.Buttons"],function(e,t,n,r,o,i,a){return e.add("media",function(e){return n.register(e),a.register(e),o.setup(e),r.setup(e),i.setup(e),t.get(e)}),function(){}}),r("tinymce.plugins.media.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("8",tinymce.util.Tools.resolve),i("1",["8"],function(e){return e("tinymce.PluginManager")}),i("f",["8"],function(e){return e("tinymce.Env")}),i("b",["8"],function(e){return e("tinymce.util.Tools")}),i("g",[],function(){return{getScripts:function(e){return e.getParam("media_scripts")},getAudioTemplateCallback:function(e){return e.getParam("audio_template_callback")},getVideoTemplateCallback:function(e){return e.getParam("video_template_callback")},hasLiveEmbeds:function(e){return e.getParam("media_live_embeds",!0)},shouldFilterHtml:function(e){return e.getParam("media_filter_html",!0)},getUrlResolver:function(e){return e.getParam("media_url_resolver")},hasAltSource:function(e){return e.getParam("media_alt_source",!0)},hasPoster:function(e){return e.getParam("media_poster",!0)},hasDimensions:function(e){return e.getParam("media_dimensions",!0)}}}),i("l",["8"],function(e){return e("tinymce.html.SaxParser")}),i("m",["8"],function(e){return e("tinymce.html.Schema")}),i("n",["8"],function(e){return e("tinymce.dom.DOMUtils")}),i("p",[],function(){return{getVideoScriptMatch:function(e,t){if(e)for(var n=0;n<e.length;n++)if(-1!==t.indexOf(e[n].filter))return e[n]}}}),i("j",[],function(){var e=function(e){return e.replace(/px$/,"")},t=function(e){return/^[0-9.]+$/.test(e)?e+"px":e},n=function(t){return function(n){return n?e(n.style[t]):""}},r=function(e){return function(n,r){n&&(n.style[e]=t(r))}};return{getMaxWidth:n("maxWidth"),getMaxHeight:n("maxHeight"),setMaxWidth:r("maxWidth"),setMaxHeight:r("maxHeight")}}),i("h",["b","l","m","n","p","j"],function(e,t,n,r,o,i){var a=r.DOM,u=function(e){return a.getAttrib(e,"data-ephox-embed-iri")},c=function(e){var t=a.createFragment(e);return""!==u(t.firstChild)},s=function(n,r){var i={};return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(t,r){if(i.source1||"param"!==t||(i.source1=r.map.movie),"iframe"!==t&&"object"!==t&&"embed"!==t&&"video"!==t&&"audio"!==t||(i.type||(i.type=t),i=e.extend(r.map,i)),"script"===t){var a=o.getVideoScriptMatch(n,r.map.src);if(!a)return;i={type:"script",source1:r.map.src,width:a.width,height:a.height}}"source"===t&&(i.source1?i.source2||(i.source2=r.map.src):i.source1=r.map.src),"img"!==t||i.poster||(i.poster=r.map.src)}}).parse(r),i.source1=i.source1||i.src||i.data,i.source2=i.source2||"",i.poster=i.poster||"",i},l=function(e){var t=a.createFragment(e),n=t.firstChild;return{type:"ephox-embed-iri",source1:u(n),source2:"",poster:"",width:i.getMaxWidth(n),height:i.getMaxHeight(n)}};return{htmlToData:function(e,t){return c(t)?l(t):s(e,t)}}}),i("q",["8"],function(e){return e("tinymce.util.Promise")}),i("s",[],function(){return{guess:function(e){var t={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n=e.toLowerCase().split(".").pop(),r=t[n];return r||""}}}),i("k",["8"],function(e){return e("tinymce.html.Writer")}),i("e",["k","l","m","n","j"],function(e,t,n,r,o){var i=r.DOM,a=function(e,t){var n,r,o,i;for(n in t)if(o=""+t[n],e.map[n])for(r=e.length;r--;)i=e[r],i.name===n&&(o?(e.map[n]=o,i.value=o):(delete e.map[n],e.splice(r,1)));else o&&(e.push({name:n,value:o}),e.map[n]=o)},u=function(n){var r=new e;return new t(r).parse(n),r.getContent()},c=function(r,o,i){var u,c=new e,s=0;return new t({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(e){c.comment(e)},cdata:function(e){c.cdata(e)},text:function(e,t){c.text(e,t)},start:function(e,t,n){switch(e){case"video":case"object":case"embed":case"img":case"iframe":void 0!==o.height&&void 0!==o.width&&a(t,{width:o.width,height:o.height})}if(i)switch(e){case"video":a(t,{poster:o.poster,src:""}),o.source2&&a(t,{src:""});break;case"iframe":a(t,{src:o.source1});break;case"source":if(++s<=2&&(a(t,{src:o["source"+s],type:o["source"+s+"mime"]}),!o["source"+s]))return;break;case"img":if(!o.poster)return;u=!0}c.start(e,t,n)},end:function(e){if("video"===e&&i)for(var t=1;t<=2;t++)if(o["source"+t]){var n=[];n.map={},s<t&&(a(n,{src:o["source"+t],type:o["source"+t+"mime"]}),c.start("source",n,!0))}if(o.poster&&"object"===e&&i&&!u){var r=[];r.map={},a(r,{src:o.poster,width:o.width,height:o.height}),c.start("img",r,!0)}c.end(e)}},new n({})).parse(r),c.getContent()},s=function(e){var t=i.createFragment(e);return""!==i.getAttrib(t.firstChild,"data-ephox-embed-iri")},l=function(e,t){var n=i.createFragment(e),r=n.firstChild;return o.setMaxWidth(r,t.width),o.setMaxHeight(r,t.height),u(r.outerHTML)};return{updateHtml:function(e,t,n){return s(e)?l(e,t):c(e,t,n)}}}),i("t",[],function(){return{urlPatterns:[{regex:/youtu\.be\/([\w\-.]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)/,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\-_]+(?:\?.+)?)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowfullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowfullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}]}}),i("r",["b","g","h","s","e","t","p"],function(e,t,n,r,o,i,a){var u=function(e){var t=e.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source1+'" width="'+e.width+'" height="'+e.height+'"'+t+"></iframe>"},c=function(e){var t='<object data="'+e.source1+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+="</object>"},s=function(e,t){return t?t(e):'<audio controls="controls" src="'+e.source1+'">'+(e.source2?'\n<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</audio>"},l=function(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source1+'"'+(e.source1mime?' type="'+e.source1mime+'"':"")+" />\n"+(e.source2?'<source src="'+e.source2+'"'+(e.source2mime?' type="'+e.source2mime+'"':"")+" />\n":"")+"</video>"},f=function(e){return'<script src="'+e.source1+'"></script>'};return{dataToHtml:function(d,p){var m=e.extend({},p);if(!m.source1&&(e.extend(m,n.htmlToData(t.getScripts(d),m.embed)),!m.source1))return"";if(m.source2||(m.source2=""),m.poster||(m.poster=""),m.source1=d.convertURL(m.source1,"source"),m.source2=d.convertURL(m.source2,"source"),m.source1mime=r.guess(m.source1),m.source2mime=r.guess(m.source2),m.poster=d.convertURL(m.poster,"poster"),e.each(i.urlPatterns,function(e){var t,n,r=e.regex.exec(m.source1);if(r){for(n=e.url,t=0;r[t];t++)n=n.replace("$"+t,function(){return r[t]});m.source1=n,m.type=e.type,m.allowFullscreen=e.allowFullscreen,m.width=m.width||e.w,m.height=m.height||e.h}}),m.embed)return o.updateHtml(m.embed,m,!0);var g=a.getVideoScriptMatch(t.getScripts(d),m.source1);g&&(m.type="script",m.width=g.width,m.height=g.height);var h=t.getAudioTemplateCallback(d),v=t.getVideoTemplateCallback(d);return m.width=m.width||300,m.height=m.height||150,e.each(m,function(e,t){m[t]=d.dom.encode(e)}),"iframe"===m.type?u(m):"application/x-shockwave-flash"===m.source1mime?c(m):-1!==m.source1mime.indexOf("audio")?s(m,h):"script"===m.type?f(m):l(m,v)}}}),i("i",["q","g","r"],function(e,t,n){var r={},o=function(t,n,o){return new e(function(e,i){var a=function(o){return o.html&&(r[t.source1]=o),e({url:t.source1,html:o.html?o.html:n(t)})};r[t.source1]?a(r[t.source1]):o({url:t.source1},a,i)})},i=function(t,n){return new e(function(e){e({html:n(t),url:t.source1})})},a=function(e){return function(t){return n.dataToHtml(e,t)}};return{getEmbedHtml:function(e,n){var r=t.getUrlResolver(e);return r?o(n,a(e),r):i(n,a(e))},isCached:function(e){return r.hasOwnProperty(e)}}}),i("o",[],function(){var e=function(e,t){e.state.set("oldVal",e.value()),t.state.set("oldVal",t.value())},t=function(e,t){var n=e.find("#width")[0],r=e.find("#height")[0],o=e.find("#constrain")[0];n&&r&&o&&t(n,r,o.checked())},n=function(t,n,r){var o=t.state.get("oldVal"),i=n.state.get("oldVal"),a=t.value(),u=n.value();r&&o&&i&&a&&u&&(a!==o?(u=Math.round(a/o*u),isNaN(u)||n.value(u)):(a=Math.round(u/i*a),isNaN(a)||t.value(a))),e(t,n)},r=function(n){t(n,e)},o=function(e){t(e,n)};return{createUi:function(e){var t=function(){e(function(e){o(e)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:t,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},syncSize:r,updateSize:o}}),i("9",["f","b","g","h","i","j","e","o"],function(e,t,n,r,o,i,a,u){var c=e.ie&&e.ie<=8?"onChange":"onInput",s=function(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},l=function(e){var t=e.selection.getNode(),o=t.getAttribute("data-ephox-embed-iri");return o?{source1:o,"data-ephox-embed-iri":o,width:i.getMaxWidth(t),height:i.getMaxHeight(t)}:t.getAttribute("data-mce-object")?r.htmlToData(n.getScripts(e),e.serializer.serialize(t,{selection:!0})):{}},f=function(e){var t=e.selection.getNode();if(t.getAttribute("data-mce-object")||t.getAttribute("data-ephox-embed-iri"))return e.selection.getContent()},d=function(e,o){return function(i){var a=i.html,c=e.find("#embed")[0],s=t.extend(r.htmlToData(n.getScripts(o),a),{source1:i.url});e.fromJSON(s),c&&(c.value(a),u.updateSize(e))}},p=function(e,t){var n,r,o=e.dom.select("img[data-mce-object]");for(n=0;n<t.length;n++)for(r=o.length-1;r>=0;r--)t[n]===o[r]&&o.splice(r,1);e.selection.select(o[0])},m=function(e,t){var n=e.dom.select("img[data-mce-object]");e.insertContent(t),p(e,n),e.nodeChanged()},g=function(e,t){var n=e.toJSON();n.embed=a.updateHtml(n.embed,n),n.embed&&o.isCached(n.source1)?m(t,n.embed):o.getEmbedHtml(t,n).then(function(e){m(t,e.html)})["catch"](s(t))},h=function(e,n){t.each(n,function(t,n){e.find("#"+n).value(t)})};return{showDialog:function(e){var i,p,m=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){o.getEmbedHtml(e,i.toJSON()).then(d(i,e))["catch"](s(e))},1)},onchange:function(t){o.getEmbedHtml(e,i.toJSON()).then(d(i,e))["catch"](s(e)),h(i,t.meta)},onbeforecall:function(e){e.meta=i.toJSON()}}],v=[],y=function(e){e(i),p=i.toJSON(),i.find("#embed").value(a.updateHtml(p.embed,p))};if(n.hasAltSource(e)&&v.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),n.hasPoster(e)&&v.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),n.hasDimensions(e)){var b=u.createUi(y);m.push(b)}p=l(e);var x={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:f(e),multiline:!0,rows:5,label:"Source"},w=function(){p=t.extend({},r.htmlToData(n.getScripts(e),this.value())),this.parent().parent().fromJSON(p)};x[c]=w,i=e.windowManager.open({title:"Insert/edit media",data:p,bodyType:"tabpanel",body:[{title:"General",type:"form",items:m},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},x]},{title:"Advanced",type:"form",items:v}],onSubmit:function(){u.updateSize(i),g(i,e)}}),u.syncSize(i)}}}),i("2",["9"],function(e){return{get:function(t){return{showDialog:function(){e.showDialog(t)}}}}}),i("3",["9"],function(e){return{register:function(t){var n=function(){e.showDialog(t)};t.addCommand("mceMedia",n)}}}),i("a",["8"],function(e){return e("tinymce.html.Node")}),i("d",["l","m","k","b","g"],function(e,t,n,r,o){return{sanitize:function(r,i){if(!1===o.shouldFilterHtml(r))return i;var a,u=new n;return new e({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(e){u.comment(e)},cdata:function(e){u.cdata(e)},text:function(e,t){u.text(e,t)},start:function(e,t,n){if(a=!0,"script"!==e&&"noscript"!==e){for(var o=0;o<t.length;o++){if(0===t[o].name.indexOf("on"))return;"style"===t[o].name&&(t[o].value=r.dom.serializeStyle(r.dom.parseStyle(t[o].value),e))}u.start(e,t,n),a=!1}},end:function(e){a||u.end(e)}},new t({})).parse(i),u.getContent()}}}),i("c",["f","a","g","d","p"],function(e,t,n,r,o){var i=function(n,r){var o,i=r.name;return o=new t("img",1),o.shortEnded=!0,u(n,r,o),o.attr({width:r.attr("width")||"300",height:r.attr("height")||("audio"===i?"30":"150"),style:r.attr("style"),src:e.transparentSrc,"data-mce-object":i,"class":"mce-object mce-object-"+i}),o},a=function(e,n){var r,o,i,a=n.name;return r=new t("span",1),r.attr({contentEditable:"false",style:n.attr("style"),"data-mce-object":a,"class":"mce-preview-object mce-object-"+a}),u(e,n,r),o=new t(a,1),o.attr({src:n.attr("src"),allowfullscreen:n.attr("allowfullscreen"),width:n.attr("width")||"300",height:n.attr("height")||("audio"===a?"30":"150"),frameborder:"0"}),i=new t("span",1),i.attr("class","mce-shim"),r.append(o),r.append(i),r},u=function(e,t,n){var o,i,a,u,c;for(a=t.attributes,u=a.length;u--;)o=a[u].name,i=a[u].value,"width"!==o&&"height"!==o&&"style"!==o&&("data"!==o&&"src"!==o||(i=e.convertURL(i,o)),n.attr("data-mce-p-"+o,i));(c=t.firstChild&&t.firstChild.value)&&(n.attr("data-mce-html",escape(r.sanitize(e,c))),n.firstChild=null)},c=function(e){for(;e=e.parent;)if(e.attr("data-ephox-embed-iri"))return!0;return!1};return{createPreviewIframeNode:a,createPlaceholderNode:i,placeHolderConverter:function(t){return function(r){for(var u,s,l=r.length;l--;)u=r[l],u.parent&&(u.parent.attr("data-mce-object")||("script"!==u.name||(s=o.getVideoScriptMatch(n.getScripts(t),u.attr("src"))))&&(s&&(s.width&&u.attr("width",s.width.toString()),s.height&&u.attr("height",s.height.toString())),"iframe"===u.name&&n.hasLiveEmbeds(t)&&e.ceFalse?c(u)||u.replace(a(t,u)):c(u)||u.replace(i(t,u))))}}}}),i("4",["a","b","c","d"],function(e,t,n,r){return{setup:function(o){o.on("preInit",function(){var i=o.schema.getSpecialElements();t.each("video audio iframe object".split(" "),function(e){i[e]=new RegExp("</"+e+"[^>]*>","gi")});var a=o.schema.getBoolAttrs();t.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(e){a[e]={}}),o.parser.addNodeFilter("iframe,video,audio,object,embed,script",n.placeHolderConverter(o)),o.serializer.addAttributeFilter("data-mce-object",function(t,n){for(var i,a,u,c,s,l,f,d,p=t.length;p--;)if(i=t[p],i.parent){for(f=i.attr(n),a=new e(f,1),"audio"!==f&&"script"!==f&&(d=i.attr("class"),d&&-1!==d.indexOf("mce-preview-object")?a.attr({width:i.firstChild.attr("width"),height:i.firstChild.attr("height")}):a.attr({width:i.attr("width"),height:i.attr("height")})),a.attr({style:i.attr("style")}),c=i.attributes,u=c.length;u--;){var m=c[u].name;0===m.indexOf("data-mce-p-")&&a.attr(m.substr(11),c[u].value)}"script"===f&&a.attr("type","text/javascript"),s=i.attr("data-mce-html"),s&&(l=new e("#text",3),l.raw=!0,l.value=r.sanitize(o,unescape(s)),a.append(l)),i.replace(a)}})}),o.on("setContent",function(){o.$("span.mce-preview-object").each(function(e,t){var n=o.$(t);0===n.find("span.mce-shim",t).length&&n.append('<span class="mce-shim"></span>')})})}}}),i("5",[],function(){return{setup:function(e){e.on("ResolveName",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)})}}}),i("6",["e"],function(e){return{setup:function(t){t.on("click keyup",function(){var e=t.selection.getNode();e&&t.dom.hasClass(e,"mce-preview-object")&&t.dom.getAttrib(e,"data-mce-selected")&&e.setAttribute("data-mce-selected","2")}),t.on("ObjectSelected",function(e){var t=e.target.getAttribute("data-mce-object");"audio"!==t&&"script"!==t||e.preventDefault()}),t.on("objectResized",function(t){var n,r=t.target;r.getAttribute("data-mce-object")&&(n=r.getAttribute("data-mce-html"))&&(n=unescape(n),r.setAttribute("data-mce-html",escape(e.updateHtml(n,{width:t.width,height:t.height}))))})}}}),i("7",[],function(){return{register:function(e){e.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),e.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})}}}),i("0",["1","2","3","4","5","6","7"],function(e,t,n,r,o,i,a){return e.add("media",function(e){return n.register(e),a.register(e),o.setup(e),r.setup(e),i.setup(e),t.get(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.nonbreaking.core.Actions",[],function(){var e=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},t=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()};return{insertNbsp:function(n,r){var o=t(n)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";n.insertContent(e(o,r)),n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}}}),i("tinymce.plugins.nonbreaking.api.Commands",["tinymce.plugins.nonbreaking.core.Actions"],function(e){return{register:function(t){t.addCommand("mceNonBreaking",function(){e.insertNbsp(t,1)})}}}),i("tinymce.plugins.nonbreaking.api.Settings",[],function(){return{getKeyboardSpaces:function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof tabs?!0===t?3:0:t}}}),i("tinymce.plugins.nonbreaking.core.Keyboard",["tinymce.plugins.nonbreaking.api.Settings","tinymce.plugins.nonbreaking.core.Actions"],function(e,t){return{setup:function(n){var r=e.getKeyboardSpaces(n);r>0&&n.on("keydown",function(e){if(9===e.keyCode){if(e.shiftKey)return;e.preventDefault(),t.insertNbsp(n,r)}})}}}),i("tinymce.plugins.nonbreaking.ui.Buttons",[],function(){return{register:function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})}}}),i("tinymce.plugins.nonbreaking.Plugin",["tinymce.core.PluginManager","tinymce.plugins.nonbreaking.api.Commands","tinymce.plugins.nonbreaking.core.Keyboard","tinymce.plugins.nonbreaking.ui.Buttons"],function(e,t,n,r){return e.add("nonbreaking",function(e){t.register(e),r.register(e),n.setup(e)}),function(){}}),r("tinymce.plugins.nonbreaking.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),i("6",[],function(){var e=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},t=function(e){return!!e.plugins.visualchars&&e.plugins.visualchars.isEnabled()};return{insertNbsp:function(n,r){var o=t(n)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";n.insertContent(e(o,r)),n.dom.setAttrib(n.dom.select("span.mce-nbsp"),"data-mce-bogus","1")}}}),i("2",["6"],function(e){return{register:function(t){t.addCommand("mceNonBreaking",function(){e.insertNbsp(t,1)})}}}),i("7",[],function(){return{getKeyboardSpaces:function(e){var t=e.getParam("nonbreaking_force_tab",0);return"boolean"==typeof tabs?!0===t?3:0:t}}}),i("3",["7","6"],function(e,t){return{setup:function(n){var r=e.getKeyboardSpaces(n);r>0&&n.on("keydown",function(e){if(9===e.keyCode){if(e.shiftKey)return;e.preventDefault(),t.insertNbsp(n,r)}})}}}),i("4",[],function(){return{register:function(e){e.addButton("nonbreaking",{title:"Nonbreaking space",
cmd:"mceNonBreaking"}),e.addMenuItem("nonbreaking",{text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("nonbreaking",function(e){t.register(e),r.register(e),n.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.noneditable.api.Settings",[],function(){return{getNonEditableClass:function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},getEditableClass:function(e){return e.getParam("noneditable_editable_class","mceEditable")},getNonEditableRegExps:function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t}}}),i("tinymce.plugins.noneditable.core.FilterContent",["tinymce.core.util.Tools","tinymce.plugins.noneditable.api.Settings"],function(e,t){var n=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},r=function(e,t,n){return function(r){var o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){var u=t.lastIndexOf("<",i);if(-1!==u&&-1!==t.substring(u,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"}},o=function(e,n,o){var i=n.length,a=o.content;if("raw"!==o.format){for(;i--;)a=a.replace(n[i],r(e,a,t.getNonEditableClass(e)));o.content=a}};return{setup:function(r){var i,a,u="contenteditable";i=" "+e.trim(t.getEditableClass(r))+" ",a=" "+e.trim(t.getNonEditableClass(r))+" ";var c=n(i),s=n(a),l=t.getNonEditableRegExps(r);r.on("PreInit",function(){l.length>0&&r.on("BeforeSetContent",function(e){o(r,l,e)}),r.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],c(t)?t.attr(u,"true"):s(t)&&t.attr(u,"false")}),r.serializer.addAttributeFilter(u,function(e){for(var t,n=e.length;n--;)t=e[n],(c(t)||s(t))&&(l.length>0&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(u,null))})})}}}),i("tinymce.plugins.noneditable.Plugin",["tinymce.core.PluginManager","tinymce.plugins.noneditable.core.FilterContent"],function(e,t){return e.add("noneditable",function(e){t.setup(e)}),function(){}}),r("tinymce.plugins.noneditable.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),i("4",["3"],function(e){return e("tinymce.util.Tools")}),i("5",[],function(){return{getNonEditableClass:function(e){return e.getParam("noneditable_noneditable_class","mceNonEditable")},getEditableClass:function(e){return e.getParam("noneditable_editable_class","mceEditable")},getNonEditableRegExps:function(e){var t=e.getParam("noneditable_regexp",[]);return t&&t.constructor===RegExp?[t]:t}}}),i("2",["4","5"],function(e,t){var n=function(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},r=function(e,t,n){return function(r){var o=arguments,i=o[o.length-2],a=i>0?t.charAt(i-1):"";if('"'===a)return r;if(">"===a){var u=t.lastIndexOf("<",i);if(-1!==u&&-1!==t.substring(u,i).indexOf('contenteditable="false"'))return r}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode("string"==typeof o[1]?o[1]:o[0])+"</span>"}},o=function(e,n,o){var i=n.length,a=o.content;if("raw"!==o.format){for(;i--;)a=a.replace(n[i],r(e,a,t.getNonEditableClass(e)));o.content=a}};return{setup:function(r){var i,a,u="contenteditable";i=" "+e.trim(t.getEditableClass(r))+" ",a=" "+e.trim(t.getNonEditableClass(r))+" ";var c=n(i),s=n(a),l=t.getNonEditableRegExps(r);r.on("PreInit",function(){l.length>0&&r.on("BeforeSetContent",function(e){o(r,l,e)}),r.parser.addAttributeFilter("class",function(e){for(var t,n=e.length;n--;)t=e[n],c(t)?t.attr(u,"true"):s(t)&&t.attr(u,"false")}),r.serializer.addAttributeFilter(u,function(e){for(var t,n=e.length;n--;)t=e[n],(c(t)||s(t))&&(l.length>0&&t.attr("data-mce-content")?(t.name="#text",t.type=3,t.raw=!0,t.value=t.attr("data-mce-content")):t.attr(u,null))})})}}}),i("0",["1","2"],function(e,t){return e.add("noneditable",function(e){t.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.pagebreak.api.Settings",[],function(){return{getSeparatorHtml:function(e){return e.getParam("pagebreak_separator","<!-- pagebreak -->")},shouldSplitBlock:function(e){return e.getParam("pagebreak_split_block",!1)}}}),i("tinymce.plugins.pagebreak.core.FilterContent",["tinymce.core.Env","tinymce.plugins.pagebreak.api.Settings"],function(e,t){var n=function(){return"mce-pagebreak"},r=function(){return'<img src="'+e.transparentSrc+'" class="'+n()+'" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(e){var n=t.getSeparatorHtml(e),o=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(o,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var o,i,a=r.length;a--;)if(o=r[a],(i=o.attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var u=o.parent;if(e.schema.getBlockElements()[u.name]&&t.shouldSplitBlock(e)){u.type=3,u.value=n,u.raw=!0,o.remove();continue}o.type=3,o.value=n,o.raw=!0}})})},getPlaceholderHtml:r,getPageBreakClass:n}}),i("tinymce.plugins.pagebreak.api.Commands",["tinymce.plugins.pagebreak.core.FilterContent"],function(e){return{register:function(t){t.addCommand("mcePageBreak",function(){t.settings.pagebreak_split_block?t.insertContent("<p>"+e.getPlaceholderHtml()+"</p>"):t.insertContent(e.getPlaceholderHtml())})}}}),i("tinymce.plugins.pagebreak.core.ResolveName",["tinymce.plugins.pagebreak.core.FilterContent"],function(e){return{setup:function(t){t.on("ResolveName",function(n){"IMG"===n.target.nodeName&&t.dom.hasClass(n.target,e.getPageBreakClass())&&(n.name="pagebreak")})}}}),i("tinymce.plugins.pagebreak.ui.Buttons",[],function(){return{register:function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}}),i("tinymce.plugins.pagebreak.Plugin",["tinymce.core.Env","tinymce.core.PluginManager","tinymce.plugins.pagebreak.api.Commands","tinymce.plugins.pagebreak.core.FilterContent","tinymce.plugins.pagebreak.core.ResolveName","tinymce.plugins.pagebreak.ui.Buttons"],function(e,t,n,r,o,i){return t.add("pagebreak",function(e){n.register(e),i.register(e),r.setup(e),o.setup(e)}),function(){}}),r("tinymce.plugins.pagebreak.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("7",tinymce.util.Tools.resolve),i("1",["7"],function(e){return e("tinymce.Env")}),i("2",["7"],function(e){return e("tinymce.PluginManager")}),i("8",[],function(){return{getSeparatorHtml:function(e){return e.getParam("pagebreak_separator","<!-- pagebreak -->")},shouldSplitBlock:function(e){return e.getParam("pagebreak_split_block",!1)}}}),i("4",["1","8"],function(e,t){var n=function(){return"mce-pagebreak"},r=function(){return'<img src="'+e.transparentSrc+'" class="'+n()+'" data-mce-resize="false" data-mce-placeholder />'};return{setup:function(e){var n=t.getSeparatorHtml(e),o=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi");e.on("BeforeSetContent",function(e){e.content=e.content.replace(o,r())}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(r){for(var o,i,a=r.length;a--;)if(o=r[a],(i=o.attr("class"))&&-1!==i.indexOf("mce-pagebreak")){var u=o.parent;if(e.schema.getBlockElements()[u.name]&&t.shouldSplitBlock(e)){u.type=3,u.value=n,u.raw=!0,o.remove();continue}o.type=3,o.value=n,o.raw=!0}})})},getPlaceholderHtml:r,getPageBreakClass:n}}),i("3",["4"],function(e){return{register:function(t){t.addCommand("mcePageBreak",function(){t.settings.pagebreak_split_block?t.insertContent("<p>"+e.getPlaceholderHtml()+"</p>"):t.insertContent(e.getPlaceholderHtml())})}}}),i("5",["4"],function(e){return{setup:function(t){t.on("ResolveName",function(n){"IMG"===n.target.nodeName&&t.dom.hasClass(n.target,e.getPageBreakClass())&&(n.name="pagebreak")})}}}),i("6",[],function(){return{register:function(e){e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})}}}),i("0",["1","2","3","4","5","6"],function(e,t,n,r,o,i){return t.add("pagebreak",function(e){n.register(e),i.register(e),r.setup(e),o.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("global!window",window),i("tinymce.plugins.paste.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!t.get("powerpaste"))&&("undefined"!=typeof e.console&&e.console.log&&e.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)}}}),i("tinymce.plugins.paste.api.Api",[],function(){return{get:function(e,t){return{clipboard:e,quirks:t}}}}),i("tinymce.plugins.paste.api.Events",[],function(){return{firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}}}),i("tinymce.plugins.paste.api.Settings",[],function(){return{shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}}}),i("tinymce.plugins.paste.core.Actions",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e,n){return!1===n.get()&&t.shouldPlainTextInform(e)},r=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})};return{togglePlainTextPaste:function(t,o,i){"text"===o.pasteFormat?(o.pasteFormat="html",e.firePastePlainTextToggle(t,!1)):(o.pasteFormat="text",e.firePastePlainTextToggle(t,!0),n(t,i)&&(r(t,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),i.set(!0))),t.focus()}}}),i("tinymce.plugins.paste.api.Commands",["tinymce.plugins.paste.core.Actions"],function(e){return{register:function(t,n,r){t.addCommand("mceTogglePlainTextPaste",function(){e.togglePlainTextPaste(t,n,r)}),t.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})}}}),a("global!Image",Image),a("global!navigator",navigator),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.plugins.paste.core.InternalHtml",[],function(){var e="x-tinymce/html",t="<!-- "+e+" -->";return{mark:function(e){return t+e},unmark:function(e){return e.replace(t,"")},isMarked:function(e){return-1!==e.indexOf(t)},internalHtmlMime:function(){return e}}}),i("tinymce.core.html.Entities",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Entities")}),i("tinymce.plugins.paste.core.Newlines",["tinymce.core.util.Tools","tinymce.core.html.Entities"],function(e,t){var n=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},r=function(e){return e.replace(/\r?\n/g,"<br>")},o=function(e,n){var r,o=[],i="<"+e;if("object"==typeof n){for(r in n)n.hasOwnProperty(r)&&o.push(r+'="'+t.encodeAllRaw(n[r])+'"');o.length&&(i+=" "+o.join(" "))}return i+">"},i=function(t,n,r){var i=t.split(/\n\n/),a=o(n,r),u="</"+n+">",c=e.map(i,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return a+e+u};return 1===c.length?c[0]:e.map(c,s).join("")};return{isPlainText:n,convert:function(e,t,n){return t?i(e,t,n):r(e)},toBRs:r,toBlockElements:i}}),i("tinymce.plugins.paste.core.PasteBin",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){return function(n){var r,o="%MCEPASTEBIN%",i=function(){function e(e){var t,n,o,i=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1===i.nodeType){for(o=i.childNodes[r.startOffset];o&&3===o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"===o.tagName&&(n=u.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(n,o),e=u.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),u.remove(n)),t.length?t[0]:void 0}}var i,a,u=n.dom,c=n.getBody(),s=n.dom.getViewPort(n.getWin()),l=s.y,f=20;if(r=n.selection.getRng(),n.inline&&(a=n.selection.getScrollContainer())&&a.scrollTop>0&&(l=a.scrollTop),r.getClientRects){var d=e(r);if(d)f=l+(d.top-u.getPos(c).y);else{f=l;var p=r.startContainer;p&&(3===p.nodeType&&p.parentNode!==c&&(p=p.parentNode),1===p.nodeType&&(f=u.getPos(p,a||c).y))}}i=n.dom.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+f+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},o),(t.ie||t.gecko)&&u.setStyle(i,"left","rtl"===u.getStyle(c,"direction",!0)?65535:-65535),u.bind(i,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),i.focus(),n.selection.select(i,!0)},a=function(){if(u()){for(var e;e=n.dom.get("mcepastebin");)n.dom.remove(e),n.dom.unbind(e);r&&n.selection.setRng(r)}r=null},u=function(){return n.dom.get("mcepastebin")},c=function(){var t,r,o,i,a,u=function(e,t){e.appendChild(t),n.dom.remove(t,!0)};for(r=e.grep(n.getBody().childNodes,function(e){return"mcepastebin"===e.id}),t=r.shift(),e.each(r,function(e){u(t,e)}),i=n.dom.select("div[id=mcepastebin]",t),o=i.length-1;o>=0;o--)a=n.dom.create("div"),t.insertBefore(a,i[o]),u(a,i[o]);return t?t.innerHTML:""},s=function(){return r},l=function(e){return e===o},f=function(e){return e&&"mcepastebin"===e.id};return{create:i,remove:a,getEl:u,getHtml:c,getLastRng:s,isDefault:function(){var e=u();return f(e)&&l(e.innerHTML)},isDefaultContent:l}}}),i("tinymce.core.html.DomParser",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.DomParser")}),i("tinymce.core.html.Node",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Node")}),i("tinymce.core.html.Schema",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Schema")}),i("tinymce.core.html.Serializer",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.html.Serializer")}),i("tinymce.plugins.paste.core.Utils",["global!navigator","tinymce.core.html.DomParser","tinymce.core.html.Schema","tinymce.core.util.Tools"],function(e,t,n,r){function o(e,t){return r.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function i(e){function i(e){var t=e.name,n=e;if("br"===t)return void(c+="\n");if(s[t]&&(c+=" "),l[t])return void(c+=" ");if(3===e.type&&(c+=e.value),!e.shortEnded&&(e=e.firstChild))do{i(e)}while(e=e.next);f[t]&&n.next&&(c+="\n","p"===t&&(c+="\n"))}var a=new n,u=new t({},a),c="",s=a.getShortEndedElements(),l=r.makeMap("script noscript style textarea video audio iframe object"," "),f=a.getBlockElements();return e=o(e,[/<!\[[^\]]+\]>/g]),i(u.parse(e)),c}function a(e){function t(e,t,n){return t||n?"\xa0":" "}return e=o(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function u(e){var t=0;return function(){return e+t++}}return{filter:o,innerText:i,trimHtml:a,createIdGenerator:u,isMsEdge:function(){return-1!==e.userAgent.indexOf(" Edge/")}}}),i("tinymce.plugins.paste.core.WordFilter",["tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i,a){function u(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function c(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),o.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function s(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function l(e){function n(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=n(e)}while(e=e.next);return t}function r(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!r(e,t))return!1}while(e=e.next);return!0}function o(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{o(e)}while(e=e.next)}function i(e,n,i){var c=e._listLevel||l;c!==l&&(c<l?a&&(a=a.parent.parent):(u=a,a=null)),a&&a.name===n?a.append(e):(u=u||a,a=new t(n,1),i>1&&a.attr("start",""+i),e.wrap(a)),e.name="li",c>l&&u&&u.lastChild.append(a),l=c,o(e),r(e,/^\u00a0+/),r(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),r(e,/^\u00a0+/)}for(var a,u,l=1,f=[],d=e.firstChild;void 0!==d&&null!==d;)if(f.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==e;)d=d.walk();for(var p=0;p<f.length;p++)if(e=f[p],"p"===e.name&&e.firstChild){var m=n(e);if(s(m)){i(e,"ul");continue}if(c(m)){var g=/([0-9]+)\./.exec(m),h=1;g&&(h=parseInt(g[1],10)),i(e,"ol",h);continue}if(e._listLevel){i(e,"ul",1);continue}a=null}else u=a,a=null}function f(e,n,r,a){var u,c={},s=e.dom.parseStyle(a);return o.each(s,function(t,o){switch(o){case"mso-list":u=/\w+ \w+([0-9]+)/i.exec(a),u&&(r._listLevel=parseInt(u[1],10)),/Ignore/i.test(t)&&r.firstChild&&(r._listIgnore=!0,r.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(c[o]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void r.remove()}if(0===o.indexOf("mso-comment"))return void r.remove();0!==o.indexOf("mso-")&&("all"===i.getRetainStyleProps(e)||n&&n[o])&&(c[o]=t)}),/(bold)/i.test(c["font-weight"])&&(delete c["font-weight"],r.wrap(new t("b",1))),/(italic)/i.test(c["font-style"])&&(delete c["font-style"],r.wrap(new t("i",1))),(c=e.dom.serializeStyle(c,r.name))||null}var d=function(t,u){var c,s;c=i.getRetainStyleProps(t),c&&(s=o.makeMap(c.split(/[, ]/))),u=a.filter(u,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var d=i.getWordValidElements(t),p=new n({valid_elements:d,valid_children:"-li[p]"});o.each(p.elements,function(e){e.attributes["class"]||(e.attributes["class"]={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var m=new e({},p);m.addAttributeFilter("style",function(e){for(var n,r=e.length;r--;)n=e[r],n.attr("style",f(t,s,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),m.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),m.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),m.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(t=e[o],n=t.attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var g=m.parse(u);return i.shouldConvertWordFakeLists(t)&&l(g),u=new r({validate:t.settings.validate},p).serialize(g)};return{preProcess:function(e,t){return i.shouldUseDefaultFilters(e)?d(e,t):t},isWordContent:u}}),i("tinymce.plugins.paste.core.ProcessFilters",["tinymce.plugins.paste.api.Events","tinymce.plugins.paste.core.WordFilter"],function(e,t){var n=function(e,t){return{content:e,cancelled:t}},r=function(t,r,o,i){var a=t.dom.create("div",{style:"display:none"},r),u=e.firePastePostProcess(t,a,o,i);return n(u.node.innerHTML,u.isDefaultPrevented())},o=function(t,o,i,a){var u=e.firePastePreProcess(t,o,i,a);return t.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?r(t,u.content,i,a):n(u.content,u.isDefaultPrevented())};return{process:function(e,n,r){var i=t.isWordContent(n),a=i?t.preProcess(e,n):n;return o(e,a,r,i)}}}),i("tinymce.plugins.paste.core.SmartPaste",["tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings"],function(e,t){var n=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},r=function(e){return n(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},i=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},a=function(e,t,r){return!(!1!==e.selection.isCollapsed()||!n(t))&&i(e,t,r)},u=function(e,t,n){return!!r(t)&&o(e,t,n)},c=function(e,n){return e.insertContent(n,{merge:t.shouldMergeFormats(e),paste:!0}),!0},s=function(t,n){e.each([a,u,c],function(e){return!0!==e(t,n,c)})};return{isImageUrl:r,isAbsoluteUrl:n,insertContent:function(e,n){!1===t.isSmartPasteEnabled(e)?c(e,n):s(e,n)}}}),i("tinymce.plugins.paste.core.Clipboard",["global!Image","global!navigator","global!window","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.paste.api.Events","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Newlines","tinymce.plugins.paste.core.PasteBin","tinymce.plugins.paste.core.ProcessFilters","tinymce.plugins.paste.core.SmartPaste","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){return function(g){function h(e,t){var n=t||s.isMarked(e),r=d.process(g,s.unmark(e),n);!1===r.cancelled&&p.insertContent(g,r.content)}function v(e){e=g.dom.encode(e).replace(/\r\n/g,"\n"),e=l.convert(e,g.settings.forced_root_block,g.settings.forced_root_block_attrs),h(e,!1)}function y(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf(O)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t}function b(e){var t=y(e.clipboardData||g.getDoc().dataTransfer);return m.isMsEdge()?i.extend(t,{"text/html":""}):t}function x(e){return _(e,"text/html")||_(e,"text/plain")}function w(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null}function C(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function k(e){var t=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?g.dom.encode(t[1]):null}function T(t,n,r){t&&(g.selection.setRng(t),t=null);var o=n.result,i=w(o),a=B(),u=g.settings.images_reuse_filename&&r.name?k(r.name):a,c=new e;if(c.src=o,C(g.settings,c)){var s,l,f=g.editorUpload.blobCache;l=f.findFirst(function(e){return e.base64()===i}),l?s=l:(s=f.create(a,r,i,u),f.add(s)),h('<img src="'+s.blobUri()+'">',!1)}else h('<img src="'+o+'">',!1)}function S(e,t){function r(r){var o,i,a,u=!1;if(r)for(o=0;o<r.length;o++)if(i=r[o],/^image\/(jpeg|png|gif|bmp)$/.test(i.type)){var c=i.getAsFile?i.getAsFile():i;a=new n.FileReader,a.onload=T.bind(null,t,a,c),a.readAsDataURL(c),e.preventDefault(),u=!0}return u}var o=e.clipboardData||e.dataTransfer;if(g.settings.paste_data_images&&o)return r(o.items)||r(o.files)}function E(e){var n=e.clipboardData;return-1!==t.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}function _(e,t){return t in e&&e[t].length>0}function A(e){return a.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode}function N(){function e(e,t,n,r){var o,i;if(_(e,"text/html")?o=e["text/html"]:(o=I.getHtml(),r=r||s.isMarked(o),I.isDefaultContent(o)&&(n=!0)),o=m.trimHtml(o),I.remove(),i=!1===r&&l.isPlainText(o),o.length&&!i||(n=!0),n&&(o=_(e,"text/plain")&&i?e["text/plain"]:m.innerText(o)),I.isDefaultContent(o))return void(t||g.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."));n?v(o):h(o,r)}g.on("keydown",function(e){function n(e){A(e)&&!e.isDefaultPrevented()&&I.remove()}if(A(e)&&!e.isDefaultPrevented()){if((D=e.shiftKey&&86===e.keyCode)&&r.webkit&&-1!==t.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),P=(new Date).getTime(),r.ie&&D)return e.preventDefault(),void u.firePaste(g,!0);I.remove(),I.create(),g.once("keyup",n),g.once("paste",function(){g.off("keyup",n)})}});var n=function(){return I.getLastRng()||g.selection.getRng()};g.on("paste",function(t){var i=(new Date).getTime(),a=b(t),u=(new Date).getTime()-i,c=(new Date).getTime()-P-u<1e3,l="text"===R.pasteFormat||D,f=_(a,s.internalHtmlMime());return D=!1,t.isDefaultPrevented()||E(t)?void I.remove():!x(a)&&S(t,n())?void I.remove():(c||t.preventDefault(),!r.ie||c&&!t.ieFake||_(a,"text/html")||(I.create(),g.dom.bind(I.getEl(),"paste",function(e){e.stopPropagation()}),g.getDoc().execCommand("Paste",!1,null),a["text/html"]=I.getHtml()),void(_(a,"text/html")?(t.preventDefault(),f||(f=s.isMarked(a["text/html"])),e(a,c,l,f)):o.setEditorTimeout(g,function(){e(a,c,l,f)},0)))})}var D,R=this,P=0,I=new f(g),O="data:text/mce-internal,",B=m.createIdGenerator("mceclip");R.pasteFormat=c.isPasteAsTextEnabled(g)?"text":"html",R.pasteHtml=h,R.pasteText=v,R.pasteImageData=S,R.getDataTransferItems=y,R.hasHtmlOrText=x,R.hasContentType=_,g.on("preInit",function(){N(),g.parser.addNodeFilter("img",function(e,t,n){function o(e){return e.data&&!0===e.data.paste}function i(e){e.attr("data-mce-object")||s===r.transparentSrc||e.remove()}function a(e){return 0===e.indexOf("webkit-fake-url")}function u(e){return 0===e.indexOf("data:")}if(!g.settings.paste_data_images&&o(n))for(var c=e.length;c--;){var s=e[c].attributes.map.src;s&&(a(s)?i(e[c]):!g.settings.allow_html_data_urls&&u(s)&&i(e[c]))}})})}}),a("global!setTimeout",setTimeout),i("tinymce.plugins.paste.core.CutCopy",["global!setTimeout","tinymce.core.Env","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r){
var o=function(){},i=function(e){return!1===t.iOS&&e!==undefined&&"function"==typeof e.setData&&!0!==r.isMsEdge()},a=function(e,t,r){if(!i(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(n.internalHtmlMime(),t),!0}catch(e){return!1}},u=function(e,t,n,r){a(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},c=function(t){return function(r,o){var i=n.mark(r),a=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=t.dom.create("div",{contenteditable:"true"},i);t.dom.setStyles(a,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(u),t.dom.add(t.getBody(),a);var c=t.selection.getRng();u.focus();var s=t.dom.createRng();s.selectNodeContents(u),t.selection.setRng(s),e(function(){a.parentNode.removeChild(a),t.selection.setRng(c),o()},0)}},s=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},l=function(t){return function(n){!1===t.selection.isCollapsed()&&u(n,s(t),c(t),function(){e(function(){t.execCommand("Delete")},0)})}},f=function(e){return function(t){!1===e.selection.isCollapsed()&&u(t,s(e),c(e),o)}};return{register:function(e){e.on("cut",l(e)),e.on("copy",f(e))}}}),i("tinymce.core.dom.RangeUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.RangeUtils")}),i("tinymce.plugins.paste.core.DragDrop",["tinymce.core.dom.RangeUtils","tinymce.core.util.Delay","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.InternalHtml","tinymce.plugins.paste.core.Utils"],function(e,t,n,r,o){var i=function(t,n){return e.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())},a=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},u=function(e,t){e.focus(),e.selection.setRng(t)};return{setup:function(e,c,s){n.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),n.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(l){var f,d;if(d=i(e,l),!l.isDefaultPrevented()&&!s.get()){f=c.getDataTransferItems(l.dataTransfer);var p=c.hasContentType(f,r.internalHtmlMime());if((c.hasHtmlOrText(f)&&!a(f)||!c.pasteImageData(l,d))&&d&&n.shouldFilterDrop(e)){var m=f["mce-internal"]||f["text/html"]||f["text/plain"];m&&(l.preventDefault(),t.setEditorTimeout(e,function(){e.undoManager.transact(function(){f["mce-internal"]&&e.execCommand("Delete"),u(e,d),m=o.trimHtml(m),f["text/html"]?c.pasteHtml(m,p):c.pasteText(m)})}))}}}),e.on("dragstart",function(){s.set(!0)}),e.on("dragover dragend",function(t){n.shouldPasteDataImages(e)&&!1===s.get()&&(t.preventDefault(),u(e,i(e,t))),"dragend"===t.type&&s.set(!1)})}}}),i("tinymce.plugins.paste.core.PrePostProcess",["tinymce.plugins.paste.api.Settings"],function(e){return{setup:function(t){var n=t.plugins.paste,r=e.getPreProcess(t);r&&t.on("PastePreProcess",function(e){r.call(n,n,e)});var o=e.getPostProcess(t);o&&t.on("PastePostProcess",function(e){o.call(n,n,e)})}}}),i("tinymce.plugins.paste.core.Quirks",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.paste.api.Settings","tinymce.plugins.paste.core.Utils","tinymce.plugins.paste.core.WordFilter"],function(e,t,n,r,o){function i(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function a(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function u(e,n){if(!o.isWordContent(n))return n;var i=[];t.each(e.schema.getBlockElements(),function(e,t){i.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return n=r.filter(n,[[a,"$1"]]),n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function c(e,t,r,o){if(o||r)return t;var i=n.getWebkitStyles(e);if(!1===n.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i&&(i=i.split(/[, ]/)),i){var a=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=a.parseStyle(a.decode(n),"span"),c={};if("none"===i)return t+r;for(var s=0;s<i.length;s++){var l=o[i[s]],f=a.getStyle(u,i[s],!0);/color/.test(i[s])&&(l=a.toHex(l),f=a.toHex(f)),f!==l&&(c[i[s]]=l)}return c=a.serializeStyle(c,"span"),c?t+' style="'+c+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function s(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}return{setup:function(t){e.webkit&&i(t,c),e.ie&&(i(t,u),a(t,s))}}}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("tinymce.plugins.paste.ui.Buttons",["ephox.katamari.api.Fun"],function(e){var t=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat),e.on("PastePlainTextToggle",function(e){r.active(e.state)})};return{register:function(n,r){var o=e.curry(t,n,r);n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:o}),n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:r.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:o})}}}),i("tinymce.plugins.paste.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.paste.alien.DetectProPlugin","tinymce.plugins.paste.api.Api","tinymce.plugins.paste.api.Commands","tinymce.plugins.paste.core.Clipboard","tinymce.plugins.paste.core.CutCopy","tinymce.plugins.paste.core.DragDrop","tinymce.plugins.paste.core.PrePostProcess","tinymce.plugins.paste.core.Quirks","tinymce.plugins.paste.ui.Buttons"],function(e,t,n,r,o,i,a,u,c,s,l){var f=e(!1);return t.add("paste",function(t){if(!1===n.hasProPlugin(t)){var d=new i(t),p=s.setup(t),m=e(!1);return l.register(t,d),o.register(t,d,f),c.setup(t),a.register(t),u.setup(t,d,m),r.get(d,p)}}),function(){}}),r("tinymce.plugins.paste.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("c",tinymce.util.Tools.resolve),i("2",["c"],function(e){return e("tinymce.PluginManager")}),a("d",window),i("3",["d","2"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(n.settings.plugins)||!t.get("powerpaste")||("undefined"!=typeof e.console&&e.console.log&&e.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))}}}),i("4",[],function(){return{get:function(e,t){return{clipboard:e,quirks:t}}}}),i("l",[],function(){return{firePastePreProcess:function(e,t,n,r){return e.fire("PastePreProcess",{content:t,internal:n,wordContent:r})},firePastePostProcess:function(e,t,n,r){return e.fire("PastePostProcess",{node:t,internal:n,wordContent:r})},firePastePlainTextToggle:function(e,t){return e.fire("PastePlainTextToggle",{state:t})},firePaste:function(e,t){return e.fire("paste",{ieFake:t})}}}),i("m",[],function(){return{shouldPlainTextInform:function(e){return e.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(e){return e.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(e){return e.getParam("paste_data_images",!1)},shouldFilterDrop:function(e){return e.getParam("paste_filter_drop",!0)},getPreProcess:function(e){return e.getParam("paste_preprocess")},getPostProcess:function(e){return e.getParam("paste_postprocess")},getWebkitStyles:function(e){return e.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(e){return e.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(e){return e.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(e){return e.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(e){return e.getParam("paste_as_text",!1)},getRetainStyleProps:function(e){return e.getParam("paste_retain_style_properties")},getWordValidElements:function(e){return e.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(e){return e.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(e){return e.getParam("paste_enable_default_filters",!0)}}}),i("e",["l","m"],function(e,t){var n=function(e,n){return!1===n.get()&&t.shouldPlainTextInform(e)},r=function(e,t){e.notificationManager.open({text:e.translate(t),type:"info"})};return{togglePlainTextPaste:function(t,o,i){"text"===o.pasteFormat?(o.pasteFormat="html",e.firePastePlainTextToggle(t,!1)):(o.pasteFormat="text",e.firePastePlainTextToggle(t,!0),n(t,i)&&(r(t,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),i.set(!0))),t.focus()}}}),i("5",["e"],function(e){return{register:function(t,n,r){t.addCommand("mceTogglePlainTextPaste",function(){e.togglePlainTextPaste(t,n,r)}),t.addCommand("mceInsertClipboardContent",function(e,t){t.content&&n.pasteHtml(t.content,t.internal),t.text&&n.pasteText(t.text)})}}}),a("f",Image),a("g",navigator),i("h",["c"],function(e){return e("tinymce.Env")}),i("i",["c"],function(e){return e("tinymce.util.Delay")}),i("j",["c"],function(e){return e("tinymce.util.Tools")}),i("k",["c"],function(e){return e("tinymce.util.VK")}),i("n",[],function(){var e="x-tinymce/html",t="<!-- "+e+" -->";return{mark:function(e){return t+e},unmark:function(e){return e.replace(t,"")},isMarked:function(e){return-1!==e.indexOf(t)},internalHtmlMime:function(){return e}}}),i("x",["c"],function(e){return e("tinymce.html.Entities")}),i("o",["j","x"],function(e,t){var n=function(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)},r=function(e){return e.replace(/\r?\n/g,"<br>")},o=function(e,n){var r,o=[],i="<"+e;if("object"==typeof n){for(r in n)n.hasOwnProperty(r)&&o.push(r+'="'+t.encodeAllRaw(n[r])+'"');o.length&&(i+=" "+o.join(" "))}return i+">"},i=function(t,n,r){var i=t.split(/\n\n/),a=o(n,r),u="</"+n+">",c=e.map(i,function(e){return e.split(/\n/).join("<br />")}),s=function(e){return a+e+u};return 1===c.length?c[0]:e.map(c,s).join("")};return{isPlainText:n,convert:function(e,t,n){return t?i(e,t,n):r(e)},toBRs:r,toBlockElements:i}}),i("p",["j","h"],function(e,t){return function(n){var r,o="%MCEPASTEBIN%",i=function(){function e(e){var t,n,o,i=e.startContainer;if(t=e.getClientRects(),t.length)return t[0];if(e.collapsed&&1===i.nodeType){for(o=i.childNodes[r.startOffset];o&&3===o.nodeType&&!o.data.length;)o=o.nextSibling;if(o)return"BR"===o.tagName&&(n=u.doc.createTextNode("\ufeff"),o.parentNode.insertBefore(n,o),e=u.createRng(),e.setStartBefore(n),e.setEndAfter(n),t=e.getClientRects(),u.remove(n)),t.length?t[0]:void 0}}var i,a,u=n.dom,c=n.getBody(),s=n.dom.getViewPort(n.getWin()),l=s.y,f=20;if(r=n.selection.getRng(),n.inline&&(a=n.selection.getScrollContainer())&&a.scrollTop>0&&(l=a.scrollTop),r.getClientRects){var d=e(r);if(d)f=l+(d.top-u.getPos(c).y);else{f=l;var p=r.startContainer;p&&(3===p.nodeType&&p.parentNode!==c&&(p=p.parentNode),1===p.nodeType&&(f=u.getPos(p,a||c).y))}}i=n.dom.add(n.getBody(),"div",{id:"mcepastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: absolute; top: "+f+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"},o),(t.ie||t.gecko)&&u.setStyle(i,"left","rtl"===u.getStyle(c,"direction",!0)?65535:-65535),u.bind(i,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),i.focus(),n.selection.select(i,!0)},a=function(){if(u()){for(var e;e=n.dom.get("mcepastebin");)n.dom.remove(e),n.dom.unbind(e);r&&n.selection.setRng(r)}r=null},u=function(){return n.dom.get("mcepastebin")},c=function(){var t,r,o,i,a,u=function(e,t){e.appendChild(t),n.dom.remove(t,!0)};for(r=e.grep(n.getBody().childNodes,function(e){return"mcepastebin"===e.id}),t=r.shift(),e.each(r,function(e){u(t,e)}),i=n.dom.select("div[id=mcepastebin]",t),o=i.length-1;o>=0;o--)a=n.dom.create("div"),t.insertBefore(a,i[o]),u(a,i[o]);return t?t.innerHTML:""},s=function(){return r},l=function(e){return e===o},f=function(e){return e&&"mcepastebin"===e.id};return{create:i,remove:a,getEl:u,getHtml:c,getLastRng:s,isDefault:function(){var e=u();return f(e)&&l(e.innerHTML)},isDefaultContent:l}}}),i("y",["c"],function(e){return e("tinymce.html.DomParser")}),i("z",["c"],function(e){return e("tinymce.html.Node")}),i("10",["c"],function(e){return e("tinymce.html.Schema")}),i("11",["c"],function(e){return e("tinymce.html.Serializer")}),i("s",["g","y","10","j"],function(e,t,n,r){function o(e,t){return r.each(t,function(t){e=t.constructor===RegExp?e.replace(t,""):e.replace(t[0],t[1])}),e}function i(e){function i(e){var t=e.name,n=e;if("br"===t)return void(c+="\n");if(s[t]&&(c+=" "),l[t])return void(c+=" ");if(3===e.type&&(c+=e.value),!e.shortEnded&&(e=e.firstChild))do{i(e)}while(e=e.next);f[t]&&n.next&&(c+="\n","p"===t&&(c+="\n"))}var a=new n,u=new t({},a),c="",s=a.getShortEndedElements(),l=r.makeMap("script noscript style textarea video audio iframe object"," "),f=a.getBlockElements();return e=o(e,[/<!\[[^\]]+\]>/g]),i(u.parse(e)),c}function a(e){function t(e,t,n){return t||n?"\xa0":" "}return e=o(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,t],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function u(e){var t=0;return function(){return e+t++}}return{filter:o,innerText:i,trimHtml:a,createIdGenerator:u,isMsEdge:function(){return-1!==e.userAgent.indexOf(" Edge/")}}}),i("v",["y","z","10","11","j","m","s"],function(e,t,n,r,o,i,a){function u(e){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(e)||/class="OutlineElement/.test(e)||/id="?docs\-internal\-guid\-/.test(e)}function c(e){var t,n;return n=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],e=e.replace(/^[\u00a0 ]+/,""),o.each(n,function(n){if(n.test(e))return t=!0,!1}),t}function s(e){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(e)}function l(e){function n(e){var t="";if(3===e.type)return e.value;if(e=e.firstChild)do{t+=n(e)}while(e=e.next);return t}function r(e,t){if(3===e.type&&t.test(e.value))return e.value=e.value.replace(t,""),!1;if(e=e.firstChild)do{if(!r(e,t))return!1}while(e=e.next);return!0}function o(e){if(e._listIgnore)return void e.remove();if(e=e.firstChild)do{o(e)}while(e=e.next)}function i(e,n,i){var c=e._listLevel||l;c!==l&&(c<l?a&&(a=a.parent.parent):(u=a,a=null)),a&&a.name===n?a.append(e):(u=u||a,a=new t(n,1),i>1&&a.attr("start",""+i),e.wrap(a)),e.name="li",c>l&&u&&u.lastChild.append(a),l=c,o(e),r(e,/^\u00a0+/),r(e,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),r(e,/^\u00a0+/)}for(var a,u,l=1,f=[],d=e.firstChild;void 0!==d&&null!==d;)if(f.push(d),null!==(d=d.walk()))for(;void 0!==d&&d.parent!==e;)d=d.walk();for(var p=0;p<f.length;p++)if(e=f[p],"p"===e.name&&e.firstChild){var m=n(e);if(s(m)){i(e,"ul");continue}if(c(m)){var g=/([0-9]+)\./.exec(m),h=1;g&&(h=parseInt(g[1],10)),i(e,"ol",h);continue}if(e._listLevel){i(e,"ul",1);continue}a=null}else u=a,a=null}function f(e,n,r,a){var u,c={},s=e.dom.parseStyle(a);return o.each(s,function(t,o){switch(o){case"mso-list":u=/\w+ \w+([0-9]+)/i.exec(a),u&&(r._listLevel=parseInt(u[1],10)),/Ignore/i.test(t)&&r.firstChild&&(r._listIgnore=!0,r.firstChild._listIgnore=!0);break;case"horiz-align":o="text-align";break;case"vert-align":o="vertical-align";break;case"font-color":case"mso-foreground":o="color";break;case"mso-background":case"mso-highlight":o="background";break;case"font-weight":case"font-style":return void("normal"!==t&&(c[o]=t));case"mso-element":if(/^(comment|comment-list)$/i.test(t))return void r.remove()}return 0===o.indexOf("mso-comment")?void r.remove():void(0!==o.indexOf("mso-")&&("all"===i.getRetainStyleProps(e)||n&&n[o])&&(c[o]=t))}),/(bold)/i.test(c["font-weight"])&&(delete c["font-weight"],r.wrap(new t("b",1))),/(italic)/i.test(c["font-style"])&&(delete c["font-style"],r.wrap(new t("i",1))),(c=e.dom.serializeStyle(c,r.name))||null}var d=function(t,u){var c,s;c=i.getRetainStyleProps(t),c&&(s=o.makeMap(c.split(/[, ]/))),u=a.filter(u,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(e,t){return t.length>0?t.replace(/./," ").slice(Math.floor(t.length/2)).split("").join("\xa0"):""}]]);var d=i.getWordValidElements(t),p=new n({valid_elements:d,valid_children:"-li[p]"});o.each(p.elements,function(e){e.attributes["class"]||(e.attributes["class"]={},e.attributesOrder.push("class")),e.attributes.style||(e.attributes.style={},e.attributesOrder.push("style"))});var m=new e({},p);m.addAttributeFilter("style",function(e){for(var n,r=e.length;r--;)n=e[r],n.attr("style",f(t,s,n,n.attr("style"))),"span"===n.name&&n.parent&&!n.attributes.length&&n.unwrap()}),m.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(n)&&t.remove(),t.attr("class",null)}),m.addNodeFilter("del",function(e){for(var t=e.length;t--;)e[t].remove()}),m.addNodeFilter("a",function(e){for(var t,n,r,o=e.length;o--;)if(t=e[o],n=t.attr("href"),r=t.attr("name"),n&&-1!==n.indexOf("#_msocom_"))t.remove();else if(n&&0===n.indexOf("file://")&&(n=n.split("#")[1])&&(n="#"+n),n||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){t.unwrap();continue}t.attr({href:n,name:r})}else t.unwrap()});var g=m.parse(u);return i.shouldConvertWordFakeLists(t)&&l(g),u=new r({validate:t.settings.validate},p).serialize(g)};return{preProcess:function(e,t){return i.shouldUseDefaultFilters(e)?d(e,t):t},isWordContent:u}}),i("q",["l","v"],function(e,t){var n=function(e,t){return{content:e,cancelled:t}},r=function(t,r,o,i){var a=t.dom.create("div",{style:"display:none"},r),u=e.firePastePostProcess(t,a,o,i);return n(u.node.innerHTML,u.isDefaultPrevented())},o=function(t,o,i,a){var u=e.firePastePreProcess(t,o,i,a);return t.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?r(t,u.content,i,a):n(u.content,u.isDefaultPrevented())};return{process:function(e,n,r){var i=t.isWordContent(n),a=i?t.preProcess(e,n):n;return o(e,a,r,i)}}}),i("r",["j","m"],function(e,t){var n=function(e){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(e)},r=function(e){return n(e)&&/.(gif|jpe?g|png)$/.test(e)},o=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.insertContent('<img src="'+t+'">')}),!0},i=function(e,t,n){return e.undoManager.extra(function(){n(e,t)},function(){e.execCommand("mceInsertLink",!1,t)}),!0},a=function(e,t,r){return!(!1!==e.selection.isCollapsed()||!n(t))&&i(e,t,r)},u=function(e,t,n){return!!r(t)&&o(e,t,n)},c=function(e,n){return e.insertContent(n,{merge:t.shouldMergeFormats(e),paste:!0}),!0},s=function(t,n){e.each([a,u,c],function(e){return!0!==e(t,n,c)})};return{isImageUrl:r,isAbsoluteUrl:n,insertContent:function(e,n){!1===t.isSmartPasteEnabled(e)?c(e,n):s(e,n)}}}),i("6",["f","g","d","h","i","j","k","l","m","n","o","p","q","r","s"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){return function(g){function h(e,t){var n=t||s.isMarked(e),r=d.process(g,s.unmark(e),n);!1===r.cancelled&&p.insertContent(g,r.content)}function v(e){e=g.dom.encode(e).replace(/\r\n/g,"\n"),e=l.convert(e,g.settings.forced_root_block,g.settings.forced_root_block_attrs),h(e,!1)}function y(e){var t={};if(e){if(e.getData){var n=e.getData("Text");n&&n.length>0&&-1===n.indexOf(O)&&(t["text/plain"]=n)}if(e.types)for(var r=0;r<e.types.length;r++){var o=e.types[r];try{t[o]=e.getData(o)}catch(e){t[o]=""}}}return t}function b(e){var t=y(e.clipboardData||g.getDoc().dataTransfer);return m.isMsEdge()?i.extend(t,{"text/html":""}):t}function x(e){return _(e,"text/html")||_(e,"text/plain")}function w(e){var t;return t=e.indexOf(","),-1!==t?e.substr(t+1):null}function C(e,t){return!e.images_dataimg_filter||e.images_dataimg_filter(t)}function k(e){var t=e.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return t?g.dom.encode(t[1]):null}function T(t,n,r){t&&(g.selection.setRng(t),t=null);var o=n.result,i=w(o),a=B(),u=g.settings.images_reuse_filename&&r.name?k(r.name):a,c=new e;if(c.src=o,C(g.settings,c)){var s,l,f=g.editorUpload.blobCache;l=f.findFirst(function(e){return e.base64()===i}),l?s=l:(s=f.create(a,r,i,u),f.add(s)),h('<img src="'+s.blobUri()+'">',!1)}else h('<img src="'+o+'">',!1)}function S(e,t){function r(r){var o,i,a,u=!1;if(r)for(o=0;o<r.length;o++)if(i=r[o],/^image\/(jpeg|png|gif|bmp)$/.test(i.type)){var c=i.getAsFile?i.getAsFile():i;a=new n.FileReader,a.onload=T.bind(null,t,a,c),a.readAsDataURL(c),e.preventDefault(),u=!0}return u}var o=e.clipboardData||e.dataTransfer;if(g.settings.paste_data_images&&o)return r(o.items)||r(o.files)}function E(e){var n=e.clipboardData;return-1!==t.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}function _(e,t){return t in e&&e[t].length>0}function A(e){return a.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode}function N(){function e(e,t,n,r){var o,i;return _(e,"text/html")?o=e["text/html"]:(o=I.getHtml(),r=r||s.isMarked(o),I.isDefaultContent(o)&&(n=!0)),o=m.trimHtml(o),I.remove(),i=!1===r&&l.isPlainText(o),o.length&&!i||(n=!0),n&&(o=_(e,"text/plain")&&i?e["text/plain"]:m.innerText(o)),I.isDefaultContent(o)?void(t||g.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.")):void(n?v(o):h(o,r))}g.on("keydown",function(e){function n(e){A(e)&&!e.isDefaultPrevented()&&I.remove()}if(A(e)&&!e.isDefaultPrevented()){if((D=e.shiftKey&&86===e.keyCode)&&r.webkit&&-1!==t.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),P=(new Date).getTime(),r.ie&&D)return e.preventDefault(),void u.firePaste(g,!0);I.remove(),I.create(),g.once("keyup",n),g.once("paste",function(){g.off("keyup",n)})}});var n=function(){return I.getLastRng()||g.selection.getRng()};g.on("paste",function(t){var i=(new Date).getTime(),a=b(t),u=(new Date).getTime()-i,c=(new Date).getTime()-P-u<1e3,l="text"===R.pasteFormat||D,f=_(a,s.internalHtmlMime());return D=!1,t.isDefaultPrevented()||E(t)?void I.remove():!x(a)&&S(t,n())?void I.remove():(c||t.preventDefault(),!r.ie||c&&!t.ieFake||_(a,"text/html")||(I.create(),g.dom.bind(I.getEl(),"paste",function(e){e.stopPropagation()}),g.getDoc().execCommand("Paste",!1,null),a["text/html"]=I.getHtml()),void(_(a,"text/html")?(t.preventDefault(),f||(f=s.isMarked(a["text/html"])),e(a,c,l,f)):o.setEditorTimeout(g,function(){e(a,c,l,f)},0)))})}var D,R=this,P=0,I=new f(g),O="data:text/mce-internal,",B=m.createIdGenerator("mceclip");R.pasteFormat=c.isPasteAsTextEnabled(g)?"text":"html",R.pasteHtml=h,R.pasteText=v,R.pasteImageData=S,R.getDataTransferItems=y,R.hasHtmlOrText=x,R.hasContentType=_,g.on("preInit",function(){N(),g.parser.addNodeFilter("img",function(e,t,n){function o(e){return e.data&&!0===e.data.paste}function i(e){e.attr("data-mce-object")||s===r.transparentSrc||e.remove()}function a(e){return 0===e.indexOf("webkit-fake-url")}function u(e){return 0===e.indexOf("data:")}if(!g.settings.paste_data_images&&o(n))for(var c=e.length;c--;){var s=e[c].attributes.map.src;s&&(a(s)?i(e[c]):!g.settings.allow_html_data_urls&&u(s)&&i(e[c]))}})})}}),a("t",setTimeout),i("7",["t","h","n","s"],function(e,t,n,r){var o=function(){},i=function(e){return!1===t.iOS&&void 0!==e&&"function"==typeof e.setData&&!0!==r.isMsEdge()},a=function(e,t,r){if(!i(e))return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",r),e.setData(n.internalHtmlMime(),t),!0}catch(e){return!1}},u=function(e,t,n,r){a(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):n(t.html,r)},c=function(t){return function(r,o){var i=n.mark(r),a=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=t.dom.create("div",{contenteditable:"true"},i);t.dom.setStyles(a,{position:"fixed",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(u),t.dom.add(t.getBody(),a);var c=t.selection.getRng();u.focus();var s=t.dom.createRng();s.selectNodeContents(u),t.selection.setRng(s),e(function(){a.parentNode.removeChild(a),t.selection.setRng(c),o()},0)}},s=function(e){return{html:e.selection.getContent({contextual:!0}),text:e.selection.getContent({format:"text"})}},l=function(t){return function(n){!1===t.selection.isCollapsed()&&u(n,s(t),c(t),function(){e(function(){t.execCommand("Delete")},0)})}},f=function(e){return function(t){!1===e.selection.isCollapsed()&&u(t,s(e),c(e),o)}};return{register:function(e){e.on("cut",l(e)),e.on("copy",f(e))}}}),i("u",["c"],function(e){return e("tinymce.dom.RangeUtils")}),i("8",["u","i","m","n","s"],function(e,t,n,r,o){var i=function(t,n){return e.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())},a=function(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")},u=function(e,t){e.focus(),e.selection.setRng(t)};return{setup:function(e,c,s){n.shouldBlockDrop(e)&&e.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),n.shouldPasteDataImages(e)||e.on("drop",function(e){var t=e.dataTransfer;t&&t.files&&t.files.length>0&&e.preventDefault()}),e.on("drop",function(l){var f,d;if(d=i(e,l),!l.isDefaultPrevented()&&!s.get()){f=c.getDataTransferItems(l.dataTransfer);var p=c.hasContentType(f,r.internalHtmlMime());if((c.hasHtmlOrText(f)&&!a(f)||!c.pasteImageData(l,d))&&d&&n.shouldFilterDrop(e)){var m=f["mce-internal"]||f["text/html"]||f["text/plain"];m&&(l.preventDefault(),t.setEditorTimeout(e,function(){e.undoManager.transact(function(){f["mce-internal"]&&e.execCommand("Delete"),u(e,d),m=o.trimHtml(m),f["text/html"]?c.pasteHtml(m,p):c.pasteText(m)})}))}}}),e.on("dragstart",function(){s.set(!0)}),e.on("dragover dragend",function(t){n.shouldPasteDataImages(e)&&!1===s.get()&&(t.preventDefault(),u(e,i(e,t))),"dragend"===t.type&&s.set(!1)})}}}),i("9",["m"],function(e){return{setup:function(t){var n=t.plugins.paste,r=e.getPreProcess(t);r&&t.on("PastePreProcess",function(e){r.call(n,n,e)});var o=e.getPostProcess(t);o&&t.on("PastePostProcess",function(e){o.call(n,n,e)})}}}),i("a",["h","j","m","s","v"],function(e,t,n,r,o){function i(e,t){e.on("PastePreProcess",function(n){n.content=t(e,n.content,n.internal,n.wordContent)})}function a(e,t){e.on("PastePostProcess",function(n){t(e,n.node)})}function u(e,n){if(!o.isWordContent(n))return n;var i=[];t.each(e.schema.getBlockElements(),function(e,t){i.push(t)});var a=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+i.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return n=r.filter(n,[[a,"$1"]]),n=r.filter(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function c(e,t,r,o){if(o||r)return t;var i=n.getWebkitStyles(e);if(!1===n.shouldRemoveWebKitStyles(e)||"all"===i)return t;if(i&&(i=i.split(/[, ]/)),i){var a=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(e,t,n,r){var o=a.parseStyle(a.decode(n),"span"),c={};if("none"===i)return t+r;for(var s=0;s<i.length;s++){var l=o[i[s]],f=a.getStyle(u,i[s],!0);/color/.test(i[s])&&(l=a.toHex(l),f=a.toHex(f)),f!==l&&(c[i[s]]=l)}return c=a.serializeStyle(c,"span"),c?t+' style="'+c+'"'+r:t+r})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(e,t,n,r){return t+' style="'+n+'"'+r})}function s(e,t){e.$("a",t).find("font,u").each(function(t,n){e.dom.remove(n,!0)})}return{setup:function(t){e.webkit&&i(t,c),e.ie&&(i(t,u),a(t,s))}}}),a("12",Array),a("13",Error),i("w",["12","13"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("b",["w"],function(e){var t=function(e,t,n){var r=n.control;r.active("text"===t.pasteFormat),e.on("PastePlainTextToggle",function(e){r.active(e.state)})};return{register:function(n,r){var o=e.curry(t,n,r);n.addButton("pastetext",{icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:o}),n.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:r.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:o})}}}),i("0",["1","2","3","4","5","6","7","8","9","a","b"],function(e,t,n,r,o,i,a,u,c,s,l){var f=e(!1);return t.add("paste",function(t){if(!1===n.hasProPlugin(t)){var d=new i(t),p=s.setup(t),m=e(!1);return l.register(t,d),o.register(t,d,f),c.setup(t),a.register(t),u.setup(t,d,m),r.get(d,p)}}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.preview.api.Settings",[],function(){return{getPreviewDialogWidth:function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},getPreviewDialogHeight:function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},getContentStyle:function(e){return e.getParam("content_style","")}}}),i("tinymce.plugins.preview.ui.IframeContent",["tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings"],function(e,t){var n=function(n){var r="",o=n.dom.encode,i=t.getContentStyle(n);r+='<base href="'+o(n.documentBaseURI.getURI())+'">',i&&(r+='<style type="text/css">'+i+"</style>"),
e.each(n.contentCSS,function(e){r+='<link type="text/css" rel="stylesheet" href="'+o(n.documentBaseURI.toAbsolute(e))+'">'});var a=n.settings.body_id||"tinymce";-1!==a.indexOf("=")&&(a=n.getParam("body_id","","hash"),a=a[n.id]||a);var u=n.settings.body_class||"";-1!==u.indexOf("=")&&(u=n.getParam("body_class","","hash"),u=u[n.id]||"");var c=n.settings.directionality?' dir="'+n.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+r+'</head><body id="'+o(a)+'" class="mce-content-body '+o(u)+'"'+o(c)+">"+n.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> </body></html>'};return{getPreviewHtml:n,injectIframeContent:function(e,t,r){var o=n(e);if(r)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(o);else{var i=t.contentWindow.document;i.open(),i.write(o),i.close()}}}}),i("tinymce.plugins.preview.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings","tinymce.plugins.preview.ui.IframeContent"],function(e,t,n,r){return{open:function(t){var o=!e.ie,i='<iframe src="javascript:\'\'" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",a=n.getPreviewDialogWidth(t),u=n.getPreviewDialogHeight(t);t.windowManager.open({title:"Preview",width:a,height:u,html:i,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){var n=e.control.getEl("body").firstChild;r.injectIframeContent(t,n,o)}})}}}),i("tinymce.plugins.preview.api.Commands",["tinymce.plugins.preview.ui.Dialog"],function(e){return{register:function(t){t.addCommand("mcePreview",function(){e.open(t)})}}}),i("tinymce.plugins.preview.ui.Buttons",[],function(){return{register:function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}}),i("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.plugins.preview.api.Commands","tinymce.plugins.preview.ui.Buttons"],function(e,t,n){return e.add("preview",function(e){t.register(e),n.register(e)}),function(){}}),r("tinymce.plugins.preview.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("6",["4"],function(e){return e("tinymce.Env")}),i("7",["4"],function(e){return e("tinymce.util.Tools")}),i("8",[],function(){return{getPreviewDialogWidth:function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},getPreviewDialogHeight:function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},getContentStyle:function(e){return e.getParam("content_style","")}}}),i("9",["7","8"],function(e,t){var n=function(n){var r="",o=n.dom.encode,i=t.getContentStyle(n);r+='<base href="'+o(n.documentBaseURI.getURI())+'">',i&&(r+='<style type="text/css">'+i+"</style>"),e.each(n.contentCSS,function(e){r+='<link type="text/css" rel="stylesheet" href="'+o(n.documentBaseURI.toAbsolute(e))+'">'});var a=n.settings.body_id||"tinymce";-1!==a.indexOf("=")&&(a=n.getParam("body_id","","hash"),a=a[n.id]||a);var u=n.settings.body_class||"";-1!==u.indexOf("=")&&(u=n.getParam("body_class","","hash"),u=u[n.id]||"");var c=n.settings.directionality?' dir="'+n.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+r+'</head><body id="'+o(a)+'" class="mce-content-body '+o(u)+'"'+o(c)+">"+n.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> </body></html>'};return{getPreviewHtml:n,injectIframeContent:function(e,t,r){var o=n(e);if(r)t.src="data:text/html;charset=utf-8,"+encodeURIComponent(o);else{var i=t.contentWindow.document;i.open(),i.write(o),i.close()}}}}),i("5",["6","7","8","9"],function(e,t,n,r){return{open:function(t){var o=!e.ie,i='<iframe src="javascript:\'\'" frameborder="0"'+(o?' sandbox="allow-scripts"':"")+"></iframe>",a=n.getPreviewDialogWidth(t),u=n.getPreviewDialogHeight(t);t.windowManager.open({title:"Preview",width:a,height:u,html:i,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){var n=e.control.getEl("body").firstChild;r.injectIframeContent(t,n,o)}})}}}),i("2",["5"],function(e){return{register:function(t){t.addCommand("mcePreview",function(){e.open(t)})}}}),i("3",[],function(){return{register:function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("preview",function(e){t.register(e),n.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.print.api.Commands",[],function(){return{register:function(e){e.addCommand("mcePrint",function(){e.getWin().print()})}}}),i("tinymce.plugins.print.ui.Buttons",[],function(){return{register:function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})}}}),i("tinymce.plugins.print.Plugin",["tinymce.core.PluginManager","tinymce.plugins.print.api.Commands","tinymce.plugins.print.ui.Buttons"],function(e,t,n){return e.add("print",function(e){t.register(e),n.register(e),e.addShortcut("Meta+P","","mcePrint")}),function(){}}),r("tinymce.plugins.print.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("2",[],function(){return{register:function(e){e.addCommand("mcePrint",function(){e.getWin().print()})}}}),i("3",[],function(){return{register:function(e){e.addButton("print",{title:"Print",cmd:"mcePrint"}),e.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("print",function(e){t.register(e),n.register(e),e.addShortcut("Meta+P","","mcePrint")}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.save.api.Settings",[],function(){return{enableWhenDirty:function(e){return e.getParam("save_enablewhendirty",!0)},hasOnSaveCallback:function(e){return!!e.getParam("save_onsavecallback")},hasOnCancelCallback:function(e){return!!e.getParam("save_oncancelcallback")}}}),i("tinymce.plugins.save.core.Actions",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.save.api.Settings"],function(e,t,n){var r=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})};return{save:function(t){var o;if(o=e.DOM.getParent(t.id,"form"),!n.enableWhenDirty(t)||t.isDirty()){if(t.save(),n.hasOnSaveCallback(t))return t.execCallback("save_onsavecallback",t),void t.nodeChanged();o?(t.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"==typeof o.submit?o.submit():r(t,"Error: Form submit field collision.")),t.nodeChanged()):r(t,"Error: No form element found.")}},cancel:function(e){var r=t.trim(e.startContent);if(n.hasOnCancelCallback(e))return void e.execCallback("save_oncancelcallback",e);e.setContent(r),e.undoManager.clear(),e.nodeChanged()}}}),i("tinymce.plugins.save.api.Commands",["tinymce.plugins.save.core.Actions"],function(e){return{register:function(t){t.addCommand("mceSave",function(){e.save(t)}),t.addCommand("mceCancel",function(){e.cancel(t)})}}}),i("tinymce.plugins.save.ui.Buttons",["tinymce.plugins.save.api.Settings"],function(e){var t=function(t){return function(n){var r=n.control;t.on("nodeChange dirty",function(){r.disabled(e.enableWhenDirty(t)&&!t.isDirty())})}};return{register:function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:t(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:t(e)}),e.addShortcut("Meta+S","","mceSave")}}}),i("tinymce.plugins.save.Plugin",["tinymce.core.PluginManager","tinymce.plugins.save.api.Commands","tinymce.plugins.save.ui.Buttons"],function(e,t,n){return e.add("save",function(e){n.register(e),t.register(e)}),function(){}}),r("tinymce.plugins.save.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("7",["4"],function(e){return e("tinymce.dom.DOMUtils")}),i("8",["4"],function(e){return e("tinymce.util.Tools")}),i("6",[],function(){return{enableWhenDirty:function(e){return e.getParam("save_enablewhendirty",!0)},hasOnSaveCallback:function(e){return!!e.getParam("save_onsavecallback")},hasOnCancelCallback:function(e){return!!e.getParam("save_oncancelcallback")}}}),i("5",["7","8","6"],function(e,t,n){var r=function(e,t){e.notificationManager.open({text:e.translate(t),type:"error"})};return{save:function(t){var o;if(o=e.DOM.getParent(t.id,"form"),!n.enableWhenDirty(t)||t.isDirty())return t.save(),n.hasOnSaveCallback(t)?(t.execCallback("save_onsavecallback",t),void t.nodeChanged()):void(o?(t.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"==typeof o.submit?o.submit():r(t,"Error: Form submit field collision.")),t.nodeChanged()):r(t,"Error: No form element found."))},cancel:function(e){var r=t.trim(e.startContent);return n.hasOnCancelCallback(e)?void e.execCallback("save_oncancelcallback",e):(e.setContent(r),e.undoManager.clear(),void e.nodeChanged())}}}),i("2",["5"],function(e){return{register:function(t){t.addCommand("mceSave",function(){e.save(t)}),t.addCommand("mceCancel",function(){e.cancel(t)})}}}),i("3",["6"],function(e){var t=function(t){return function(n){var r=n.control;t.on("nodeChange dirty",function(){r.disabled(e.enableWhenDirty(t)&&!t.isDirty())})}};return{register:function(e){e.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:t(e)}),e.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:t(e)}),e.addShortcut("Meta+S","","mceSave")}}}),i("0",["1","2","3"],function(e,t,n){return e.add("save",function(e){n.register(e),t.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.searchreplace.core.FindReplaceText",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function t(t,n,r,o,i){function a(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function u(t){var n;if(3===t.nodeType)return t.data;if(m[t.nodeName]&&!p[t.nodeName])return"";if(n="",e(t))return"\n";if((p[t.nodeName]||g[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=u(t)}while(t=t.nextSibling);return n}function c(t,n,r){var o,i,a,u,c=[],s=0,l=t,f=n.shift(),d=0;e:for(;;){if((p[l.nodeName]||g[l.nodeName]||e(l))&&s++,3===l.nodeType&&(!i&&l.length+s>=f[1]?(i=l,u=f[1]-s):o&&c.push(l),!o&&l.length+s>f[0]&&(o=l,a=f[0]-s),s+=l.length),o&&i){if(l=r({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:u,innerNodes:c,match:f[2],matchIndex:d}),s-=i.length-u,o=null,i=null,c=[],f=n.shift(),d++,!f)break}else if(m[l.nodeName]&&!p[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!e(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===t)break e;l=l.parentNode}}}function s(e){var t;if("function"!=typeof e){var n=e.nodeType?e:d.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(d.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex;if(i===a){var c=i;o=c.parentNode,e.startNodeIndex>0&&(n=d.createTextNode(c.data.substring(0,e.startNodeIndex)),o.insertBefore(n,c));var s=t(e.match[0],u);return o.insertBefore(s,c),e.endNodeIndex<c.length&&(r=d.createTextNode(c.data.substring(e.endNodeIndex)),o.insertBefore(r,c)),c.parentNode.removeChild(c),s}n=d.createTextNode(i.data.substring(0,e.startNodeIndex)),r=d.createTextNode(a.data.substring(e.endNodeIndex));for(var l=t(i.data.substring(e.startNodeIndex),u),f=[],p=0,m=e.innerNodes.length;p<m;++p){var g=e.innerNodes[p],h=t(g.data,u);g.parentNode.replaceChild(h,g),f.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),u);return o=i.parentNode,o.insertBefore(n,i),o.insertBefore(l,i),o.removeChild(i),o=a.parentNode,o.insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}var l,f,d,p,m,g,h=[],v=0;if(d=n.ownerDocument,p=i.getBlockElements(),m=i.getWhiteSpaceElements(),g=i.getShortEndedElements(),f=u(n)){if(t.global)for(;l=t.exec(f);)h.push(a(l,o));else l=f.match(t),h.push(a(l,o));return h.length&&(v=h.length,c(n,h,s(r))),v}}return{findAndReplaceDOMText:t}}),i("tinymce.plugins.searchreplace.core.Actions",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.FindReplaceText"],function(e,t){var n=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},r=function(e,n,r){var o,i;return i=e.dom.create("span",{"data-mce-bogus":1}),i.className="mce-match-marker",o=e.getBody(),p(e,n,!1),t.findAndReplaceDOMText(r,o,i,!1,e.schema)},o=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},i=function(t,r){var o,i=[];if(o=e.toArray(t.getBody().getElementsByTagName("span")),o.length)for(var a=0;a<o.length;a++){var u=n(o[a]);null!==u&&u.length&&(u===r.toString()&&i.push(o[a]))}return i},a=function(e,t,n){var r=t.get(),o=e.dom;n=!1!==n,n?r++:r--,o.removeClass(i(e,t.get()),"mce-match-marker-selected");var a=i(e,r);return a.length?(o.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),r):-1},u=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},c=function(e,t,n,o,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=n.replace(/\s/g,"\\s"),n=i?"\\b"+n+"\\b":n;var u=r(e,t,new RegExp(n,o?"g":"gi"));return u&&(t.set(-1),t.set(a(e,t,!0))),u},s=function(e,t){var n=a(e,t,!0);-1!==n&&t.set(n)},l=function(e,t){var n=a(e,t,!1);-1!==n&&t.set(n)},f=function(e){var t=n(e);return null!==t&&t.length>0},d=function(t,r,i,a,c){var d,p,h,v,y,b,x=r.get();for(a=!1!==a,h=t.getBody(),p=e.grep(e.toArray(h.getElementsByTagName("span")),f),d=0;d<p.length;d++){var w=n(p[d]);if(v=y=parseInt(w,10),c||v===r.get()){for(i.length?(p[d].firstChild.nodeValue=i,o(p[d])):u(t.dom,p[d]);p[++d];){if((v=parseInt(n(p[d]),10))!==y){d--;break}u(t.dom,p[d])}a&&x--}else y>r.get()&&p[d].setAttribute("data-mce-index",y-1)}return t.undoManager.add(),r.set(x),a?(b=m(t,r),s(t,r)):(b=g(t,r),l(t,r)),!c&&b},p=function(t,r,i){var a,u,c,s;for(u=e.toArray(t.getBody().getElementsByTagName("span")),a=0;a<u.length;a++){var l=n(u[a]);null!==l&&l.length&&(l===r.get().toString()&&(c||(c=u[a].firstChild),s=u[a].firstChild),o(u[a]))}if(c&&s){var f=t.dom.createRng();return f.setStart(c,0),f.setEnd(s,s.data.length),!1!==i&&t.selection.setRng(f),f}},m=function(e,t){return i(e,t.get()+1).length>0},g=function(e,t){return i(e,t.get()-1).length>0};return{done:p,find:c,next:s,prev:l,replace:d,hasNext:m,hasPrev:g}}),i("tinymce.plugins.searchreplace.api.Api",["tinymce.plugins.searchreplace.core.Actions"],function(e){return{get:function(t,n){return{done:function(r){return e.done(t,n,r)},find:function(r,o,i){return e.find(t,n,r,o,i)},next:function(){return e.next(t,n)},prev:function(){return e.prev(t,n)},replace:function(r,o,i){return e.replace(t,n,r,o,i)}}}}}),i("tinymce.plugins.searchreplace.ui.Dialog",["tinymce.core.util.Tools","tinymce.plugins.searchreplace.core.Actions"],function(e,t){return{open:function(n,r){function o(){c.statusbar.find("#next").disabled(!1===t.hasNext(n,r)),c.statusbar.find("#prev").disabled(!1===t.hasPrev(n,r))}function i(){n.windowManager.alert("Could not find the specified string.",function(){c.find("#find")[0].focus()})}var a,u={};a=e.trim(n.selection.getContent({format:"text"}));var c=n.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){n.focus(),t.done(n,r)},onSubmit:function(e){var a,s,l,f;return e.preventDefault(),s=c.find("#case").checked(),f=c.find("#words").checked(),l=c.find("#find").value(),l.length?u.text===l&&u.caseState===s&&u.wholeWord===f?t.hasNext(n,r)?(t.next(n,r),void o()):void i():(a=t.find(n,r,l,s,f),a||i(),c.statusbar.items().slice(1).disabled(0===a),o(),void(u={text:l,caseState:s,wholeWord:f})):(t.done(n,r,!1),void c.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){c.submit()}},{text:"Replace",disabled:!0,onclick:function(){t.replace(n,r,c.find("#replace").value())||(c.statusbar.items().slice(1).disabled(!0),r.set(-1),u={})}},{text:"Replace all",disabled:!0,onclick:function(){t.replace(n,r,c.find("#replace").value(),!0,!0),c.statusbar.items().slice(1).disabled(!0),u={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){t.prev(n,r),o()}},{text:"Next",name:"next",disabled:!0,onclick:function(){t.next(n,r),o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:a},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}}}),i("tinymce.plugins.searchreplace.api.Commands",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){return{register:function(t,n){t.addCommand("SearchReplace",function(){e.open(t,n)})}}}),i("tinymce.plugins.searchreplace.ui.Buttons",["tinymce.plugins.searchreplace.ui.Dialog"],function(e){var t=function(t,n){return function(){e.open(t,n)}};return{register:function(e,n){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:t(e,n),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:t(e,n)}),e.shortcuts.add("Meta+F","",t(e,n))}}}),i("tinymce.plugins.searchreplace.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.searchreplace.api.Api","tinymce.plugins.searchreplace.api.Commands","tinymce.plugins.searchreplace.ui.Buttons"],function(e,t,n,r,o){return t.add("searchreplace",function(t){var i=e(-1);return r.register(t,i),o.register(t,i),n.get(t,i)}),function(){}}),r("tinymce.plugins.searchreplace.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),i("9",["6"],function(e){return e("tinymce.util.Tools")}),i("a",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}function t(t,n,r,o,i){function a(e,t){if(t=t||0,!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var n=e.index;if(t>0){var r=e[t];if(!r)throw"Invalid capture group";n+=e[0].indexOf(r),e[0]=r}return[n,n+e[0].length,[e[0]]]}function u(t){var n;if(3===t.nodeType)return t.data;if(m[t.nodeName]&&!p[t.nodeName])return"";if(n="",e(t))return"\n";if((p[t.nodeName]||g[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=u(t)}while(t=t.nextSibling);return n}function c(t,n,r){var o,i,a,u,c=[],s=0,l=t,f=n.shift(),d=0;e:for(;;){if((p[l.nodeName]||g[l.nodeName]||e(l))&&s++,3===l.nodeType&&(!i&&l.length+s>=f[1]?(i=l,u=f[1]-s):o&&c.push(l),!o&&l.length+s>f[0]&&(o=l,a=f[0]-s),s+=l.length),o&&i){if(l=r({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:u,innerNodes:c,match:f[2],matchIndex:d}),s-=i.length-u,o=null,i=null,c=[],f=n.shift(),d++,!f)break}else if(m[l.nodeName]&&!p[l.nodeName]||!l.firstChild){if(l.nextSibling){l=l.nextSibling;continue}}else if(!e(l)){l=l.firstChild;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if(l.parentNode===t)break e;l=l.parentNode}}}function s(e){var t;if("function"!=typeof e){var n=e.nodeType?e:d.createElement(e);t=function(e,t){var r=n.cloneNode(!1);return r.setAttribute("data-mce-index",t),e&&r.appendChild(d.createTextNode(e)),r}}else t=e;return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex;if(i===a){var c=i;o=c.parentNode,e.startNodeIndex>0&&(n=d.createTextNode(c.data.substring(0,e.startNodeIndex)),o.insertBefore(n,c));var s=t(e.match[0],u);return o.insertBefore(s,c),e.endNodeIndex<c.length&&(r=d.createTextNode(c.data.substring(e.endNodeIndex)),o.insertBefore(r,c)),c.parentNode.removeChild(c),s}n=d.createTextNode(i.data.substring(0,e.startNodeIndex)),r=d.createTextNode(a.data.substring(e.endNodeIndex));for(var l=t(i.data.substring(e.startNodeIndex),u),f=[],p=0,m=e.innerNodes.length;p<m;++p){var g=e.innerNodes[p],h=t(g.data,u);g.parentNode.replaceChild(h,g),f.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),u);return o=i.parentNode,o.insertBefore(n,i),o.insertBefore(l,i),o.removeChild(i),o=a.parentNode,o.insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}var l,f,d,p,m,g,h=[],v=0;if(d=n.ownerDocument,p=i.getBlockElements(),m=i.getWhiteSpaceElements(),g=i.getShortEndedElements(),f=u(n)){if(t.global)for(;l=t.exec(f);)h.push(a(l,o));else l=f.match(t),h.push(a(l,o));return h.length&&(v=h.length,c(n,h,s(r))),v}}return{findAndReplaceDOMText:t}}),i("7",["9","a"],function(e,t){var n=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},r=function(e,n,r){var o,i;return i=e.dom.create("span",{"data-mce-bogus":1}),i.className="mce-match-marker",o=e.getBody(),p(e,n,!1),t.findAndReplaceDOMText(r,o,i,!1,e.schema)},o=function(e){var t=e.parentNode;e.firstChild&&t.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)},i=function(t,r){var o,i=[];if(o=e.toArray(t.getBody().getElementsByTagName("span")),o.length)for(var a=0;a<o.length;a++){var u=n(o[a]);null!==u&&u.length&&u===r.toString()&&i.push(o[a])}return i},a=function(e,t,n){var r=t.get(),o=e.dom;n=!1!==n,n?r++:r--,o.removeClass(i(e,t.get()),"mce-match-marker-selected");var a=i(e,r);return a.length?(o.addClass(i(e,r),"mce-match-marker-selected"),e.selection.scrollIntoView(a[0]),r):-1},u=function(e,t){var n=t.parentNode;e.remove(t),e.isEmpty(n)&&e.remove(n)},c=function(e,t,n,o,i){n=n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=n.replace(/\s/g,"\\s"),n=i?"\\b"+n+"\\b":n;var u=r(e,t,new RegExp(n,o?"g":"gi"));return u&&(t.set(-1),t.set(a(e,t,!0))),u},s=function(e,t){var n=a(e,t,!0);-1!==n&&t.set(n)},l=function(e,t){var n=a(e,t,!1);-1!==n&&t.set(n)},f=function(e){var t=n(e);return null!==t&&t.length>0},d=function(t,r,i,a,c){var d,p,h,v,y,b,x=r.get();for(a=!1!==a,h=t.getBody(),p=e.grep(e.toArray(h.getElementsByTagName("span")),f),d=0;d<p.length;d++){var w=n(p[d]);if(v=y=parseInt(w,10),c||v===r.get()){for(i.length?(p[d].firstChild.nodeValue=i,o(p[d])):u(t.dom,p[d]);p[++d];){if((v=parseInt(n(p[d]),10))!==y){d--;break}u(t.dom,p[d])}a&&x--}else y>r.get()&&p[d].setAttribute("data-mce-index",y-1)}return t.undoManager.add(),r.set(x),a?(b=m(t,r),s(t,r)):(b=g(t,r),l(t,r)),!c&&b},p=function(t,r,i){var a,u,c,s;for(u=e.toArray(t.getBody().getElementsByTagName("span")),a=0;a<u.length;a++){var l=n(u[a]);null!==l&&l.length&&(l===r.get().toString()&&(c||(c=u[a].firstChild),s=u[a].firstChild),o(u[a]))}if(c&&s){var f=t.dom.createRng();return f.setStart(c,0),f.setEnd(s,s.data.length),!1!==i&&t.selection.setRng(f),f}},m=function(e,t){return i(e,t.get()+1).length>0},g=function(e,t){return i(e,t.get()-1).length>0};return{done:p,find:c,next:s,prev:l,replace:d,hasNext:m,hasPrev:g}}),i("3",["7"],function(e){return{get:function(t,n){return{done:function(r){return e.done(t,n,r)},find:function(r,o,i){return e.find(t,n,r,o,i)},next:function(){return e.next(t,n)},prev:function(){return e.prev(t,n)},replace:function(r,o,i){return e.replace(t,n,r,o,i)}}}}}),i("8",["9","7"],function(e,t){return{open:function(n,r){function o(){c.statusbar.find("#next").disabled(!1===t.hasNext(n,r)),c.statusbar.find("#prev").disabled(!1===t.hasPrev(n,r))}function i(){n.windowManager.alert("Could not find the specified string.",function(){c.find("#find")[0].focus()})}var a,u={};a=e.trim(n.selection.getContent({format:"text"}));var c=n.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){n.focus(),t.done(n,r)},onSubmit:function(e){var a,s,l,f;return e.preventDefault(),s=c.find("#case").checked(),f=c.find("#words").checked(),l=c.find("#find").value(),l.length?u.text===l&&u.caseState===s&&u.wholeWord===f?t.hasNext(n,r)?(t.next(n,r),void o()):void i():(a=t.find(n,r,l,s,f),a||i(),c.statusbar.items().slice(1).disabled(0===a),o(),void(u={text:l,caseState:s,wholeWord:f})):(t.done(n,r,!1),void c.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){c.submit()}},{text:"Replace",disabled:!0,onclick:function(){t.replace(n,r,c.find("#replace").value())||(c.statusbar.items().slice(1).disabled(!0),r.set(-1),u={})}},{text:"Replace all",disabled:!0,onclick:function(){t.replace(n,r,c.find("#replace").value(),!0,!0),c.statusbar.items().slice(1).disabled(!0),u={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){t.prev(n,r),o()}},{text:"Next",name:"next",disabled:!0,onclick:function(){t.next(n,r),o()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:a},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})}}}),i("4",["8"],function(e){return{register:function(t,n){t.addCommand("SearchReplace",function(){e.open(t,n)})}}}),i("5",["8"],function(e){var t=function(t,n){return function(){e.open(t,n)}};return{register:function(e,n){e.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:t(e,n),separator:"before",context:"edit"}),e.addButton("searchreplace",{tooltip:"Find and replace",onclick:t(e,n)}),e.shortcuts.add("Meta+F","",t(e,n))}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("searchreplace",function(t){var i=e(-1);return r.register(t,i),o.register(t,i),n.get(t,i)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,
require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("global!window",window),i("tinymce.plugins.spellchecker.alien.DetectProPlugin",["global!window","tinymce.core.PluginManager"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(n.settings.plugins)||!t.get("tinymcespellchecker"))&&("undefined"!=typeof e.console&&e.console.log&&e.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),!0)}}}),i("tinymce.plugins.spellchecker.api.Settings",[],function(){return{getLanguages:function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},getLanguage:function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},getRpcUrl:function(e){return e.getParam("spellchecker_rpc_url")},getSpellcheckerCallback:function(e){return e.getParam("spellchecker_callback")},getSpellcheckerWordcharPattern:function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e\xa0\u2002\u2003\u2009]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)}}}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.util.URI",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.URI")}),i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),i("tinymce.plugins.spellchecker.api.Events",[],function(){return{fireSpellcheckStart:function(e){return e.fire("SpellcheckStart")},fireSpellcheckEnd:function(e){return e.fire("SpellcheckEnd")}}}),i("tinymce.plugins.spellchecker.core.DomTextMatcher",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}return function(t,n){function r(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function o(t){var n;if(3===t.nodeType)return t.data;if(S[t.nodeName]&&!T[t.nodeName])return"";if(e(t))return"\n";if(n="",(T[t.nodeName]||E[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=o(t)}while(t=t.nextSibling);return n}function i(t,n,r){var o,i,a,u,c,s=[],l=0,f=t,d=0;n=n.slice(0),n.sort(function(e,t){return e.start-t.start}),c=n.shift();e:for(;;){if((T[f.nodeName]||E[f.nodeName]||e(f))&&l++,3===f.nodeType&&(!i&&f.length+l>=c.end?(i=f,u=c.end-l):o&&s.push(f),!o&&f.length+l>c.start&&(o=f,a=c.start-l),l+=f.length),o&&i){if(f=r({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:u,innerNodes:s,match:c.text,matchIndex:d}),l-=i.length-u,o=null,i=null,s=[],c=n.shift(),d++,!c)break}else if(S[f.nodeName]&&!T[f.nodeName]||!f.firstChild){if(f.nextSibling){f=f.nextSibling;continue}}else if(!e(f)){f=f.firstChild;continue}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===t)break e;f=f.parentNode}}}function a(e){function t(t,n){var r=_[n];r.stencil||(r.stencil=e(r));var o=r.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(A.doc.createTextNode(t)),o}return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex,c=A.doc;if(i===a){var s=i;o=s.parentNode,e.startNodeIndex>0&&(n=c.createTextNode(s.data.substring(0,e.startNodeIndex)),o.insertBefore(n,s));var l=t(e.match,u);return o.insertBefore(l,s),e.endNodeIndex<s.length&&(r=c.createTextNode(s.data.substring(e.endNodeIndex)),o.insertBefore(r,s)),s.parentNode.removeChild(s),l}n=c.createTextNode(i.data.substring(0,e.startNodeIndex)),r=c.createTextNode(a.data.substring(e.endNodeIndex));for(var f=t(i.data.substring(e.startNodeIndex),u),d=[],p=0,m=e.innerNodes.length;p<m;++p){var g=e.innerNodes[p],h=t(g.data,u);g.parentNode.replaceChild(h,g),d.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),u);return o=i.parentNode,o.insertBefore(n,i),o.insertBefore(f,i),o.removeChild(i),o=a.parentNode,o.insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}function u(e){e.parentNode.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function c(e){return-1!==e.className.indexOf("mce-spellchecker-word")}function s(e){var n=t.getElementsByTagName("*"),r=[];e="number"==typeof e?""+e:null;for(var o=0;o<n.length;o++){var i=n[o],a=i.getAttribute("data-mce-index");null!==a&&a.length&&c(i)&&(a!==e&&null!==e||r.push(i))}return r}function l(e){for(var t=_.length;t--;)if(_[t]===e)return t;return-1}function f(e){var t=[];return d(function(n,r){e(n,r)&&t.push(n)}),_=t,this}function d(e){for(var t=0,n=_.length;t<n&&!1!==e(_[t],t);t++);return this}function p(e){return _.length&&i(t,_,a(e)),this}function m(e,t){if(k&&e.global)for(;C=e.exec(k);)_.push(r(C,t));return this}function g(e){var t,n=s(e?l(e):null);for(t=n.length;t--;)u(n[t]);return this}function h(e){return _[e.getAttribute("data-mce-index")]}function v(e){return s(l(e))[0]}function y(e,t,n){return _.push({start:e,end:e+t,text:k.substr(e,t),data:n}),this}function b(e){var t=s(l(e)),r=n.dom.createRng();return r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]),r}function x(e,t){var r=b(e);return r.deleteContents(),t.length>0&&r.insertNode(n.dom.doc.createTextNode(t)),r}function w(){return _.splice(0,_.length),g(),this}var C,k,T,S,E,_=[],A=n.dom;return T=n.schema.getBlockElements(),S=n.schema.getWhiteSpaceElements(),E=n.schema.getShortEndedElements(),k=o(t),{text:k,matches:_,each:d,filter:f,reset:w,matchFromElement:h,elementFromMatch:v,find:m,add:y,wrap:p,unwrap:g,replace:x,rangeFromMatch:b,indexOf:l}}}),i("tinymce.plugins.spellchecker.core.Actions",["tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.XHR","tinymce.plugins.spellchecker.api.Events","tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.core.DomTextMatcher"],function(e,t,n,r,o,i){var a=function(e,t){if(!t.get()){var n=new i(e.getBody(),e);t.set(n)}return t.get()},u=function(e){for(var t in e)return!1;return!0},c=function(r,i,a){return function(u,c,s,l){var f={method:u,lang:a.get()},d="";f["addToDictionary"===u?"word":"text"]=c,e.each(f,function(e,t){d&&(d+="&"),d+=t+"="+encodeURIComponent(e)}),n.send({url:new t(i).toAbsolute(o.getRpcUrl(r)),type:"post",content_type:"application/x-www-form-urlencoded",data:d,success:function(e){if(e=JSON.parse(e))e.error?l(e.error):s(e);else{var t=r.translate("Server response wasn't proper JSON.");l(t)}},error:function(){var e=r.translate("The spelling service was not found: (")+o.getRpcUrl(r)+r.translate(")");l(e)}})}},s=function(e,t,n,r,i,a,u){var s=o.getSpellcheckerCallback(e);(s||c(e,t,n)).call(e.plugins.spellchecker,r,i,a,u)},l=function(e,t,n,r,o,i){if(!m(e,n,r)){var u=function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),m(e,n,r)},c=function(t){v(e,n,r,o,t)};e.setProgressState(!0),s(e,t,i,"spellcheck",a(e,r).text,c,u),e.focus()}},f=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||m(e,t,n)},d=function(e,t,n,r,o,i){e.setProgressState(!0),s(e,t,"addToDictionary",o,function(){e.setProgressState(!1),e.dom.remove(i,!0),f(e,n,r)},function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)})},p=function(t,n,r,o,i,a){t.selection.collapse(),a?e.each(t.dom.select("span.mce-spellchecker-word"),function(e){e.getAttribute("data-mce-word")===o&&t.dom.remove(e,!0)}):t.dom.remove(i,!0),f(t,n,r)},m=function(e,t,n){if(a(e,n).reset(),n.set(null),t.get())return t.set(!1),r.fireSpellcheckEnd(e),!0},g=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},h=function(t,n){var r,o=[];if(r=e.toArray(t.getBody().getElementsByTagName("span")),r.length)for(var i=0;i<r.length;i++){var a=g(r[i]);null!==a&&a.length&&(a===n.toString()&&o.push(r[i]))}return o},v=function(e,t,n,i,c){var s,l;if(c.words?(l=!!c.dictionary,s=c.words):s=c,e.setProgressState(!1),u(s)){var f=e.translate("No misspellings found.");return e.notificationManager.open({text:f,type:"info"}),void t.set(!1)}i.set({suggestions:s,hasDictionarySupport:l}),a(e,n).find(o.getSpellcheckerWordcharPattern(e)).filter(function(e){return!!s[e.text]}).wrap(function(t){return e.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})}),t.set(!0),r.fireSpellcheckStart(e)};return{spellcheck:l,checkIfFinished:f,addToDictionary:d,ignoreWord:p,findSpansByIndex:h,getElmIndex:g,markErrors:v}}),i("tinymce.plugins.spellchecker.api.Api",["tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.core.Actions"],function(e,t){return{get:function(n,r,o,i){var a=function(){return e.getLanguage(n)},u=function(){return e.getSpellcheckerWordcharPattern(n)},c=function(e){t.markErrors(n,r,i,o,e)};return{getTextMatcher:function(){return i.get()},getWordCharPattern:u,markErrors:c,getLanguage:a}}}}),i("tinymce.plugins.spellchecker.api.Commands",["tinymce.plugins.spellchecker.core.Actions"],function(e){return{register:function(t,n,r,o,i,a){t.addCommand("mceSpellCheck",function(){e.spellcheck(t,n,r,o,i,a)})}}}),i("tinymce.plugins.spellchecker.ui.Buttons",["tinymce.core.util.Tools","tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.core.Actions"],function(e,t,n){var r=function(t,n){var r=[];return e.each(n,function(e){r.push({selectable:!0,text:e.name,data:e.value})}),r},o=function(e){return function(n){var r=t.getLanguage(e);n.control.items().each(function(e){e.active(e.settings.data===r)})}},i=function(n){return e.map(t.getLanguages(n).split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})};return{register:function(e,t,a,u,c,s){var l=r("Language",i(e)),f=function(){n.spellcheck(e,t,a,u,s,c)},d={tooltip:"Spellcheck",onclick:f,onPostRender:function(t){var n=t.control;e.on("SpellcheckStart SpellcheckEnd",function(){n.active(a.get())})}};l.length>1&&(d.type="splitbutton",d.menu=l,d.onshow=o(e),d.onselect=function(e){c.set(e.control.settings.data)}),e.addButton("spellchecker",d),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:f,selectable:!0,onPostRender:function(){var t=this;t.active(a.get()),e.on("SpellcheckStart SpellcheckEnd",function(){t.active(a.get())})}})}}}),a("global!document",document),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.ui.Factory")}),i("tinymce.plugins.spellchecker.ui.SuggestionsMenu",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.core.Actions"],function(e,t,n,r,o,i){var a,u=function(o,u,c,s,l,f,d){var p=[],m=c.get().suggestions[f];r.each(m,function(e){p.push({text:e,onclick:function(){o.insertContent(o.dom.encode(e)),o.dom.remove(d),i.checkIfFinished(o,s,l)}})}),p.push({text:"-"}),c.get().hasDictionarySupport&&p.push({text:"Add to Dictionary",onclick:function(){i.addToDictionary(o,u,s,l,f,d)}}),p.push.apply(p,[{text:"Ignore",onclick:function(){i.ignoreWord(o,s,l,f,d)}},{text:"Ignore all",onclick:function(){i.ignoreWord(o,s,l,f,d,!0)}}]),a=n.create("menu",{items:p,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){a.remove(),a=null}}),a.renderTo(e.body);var g=t.DOM.getPos(o.getContentAreaContainer()),h=o.dom.getPos(d[0]),v=o.dom.getRoot();"BODY"===v.nodeName?(h.x-=v.ownerDocument.documentElement.scrollLeft||v.scrollLeft,h.y-=v.ownerDocument.documentElement.scrollTop||v.scrollTop):(h.x-=v.scrollLeft,h.y-=v.scrollTop),g.x+=h.x,g.y+=h.y,a.moveTo(g.x,g.y+d[0].offsetHeight)};return{setup:function(e,t,n,r,o){e.on("click",function(a){var c=a.target;if("mce-spellchecker-word"===c.className){a.preventDefault();var s=i.findSpansByIndex(e,i.getElmIndex(c));if(s.length>0){var l=e.dom.createRng();l.setStartBefore(s[0]),l.setEndAfter(s[s.length-1]),e.selection.setRng(l),u(e,t,n,r,o,c.getAttribute("data-mce-word"),s)}}})}}}),i("tinymce.plugins.spellchecker.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.spellchecker.alien.DetectProPlugin","tinymce.plugins.spellchecker.api.Api","tinymce.plugins.spellchecker.api.Commands","tinymce.plugins.spellchecker.api.Settings","tinymce.plugins.spellchecker.ui.Buttons","tinymce.plugins.spellchecker.ui.SuggestionsMenu"],function(e,t,n,r,o,i,a,u){return t.add("spellchecker",function(t,c){if(!1===n.hasProPlugin(t)){var s=e(!1),l=e(i.getLanguage(t)),f=e(null),d=e({});return a.register(t,c,s,f,l,d),u.setup(t,c,d,s,f),o.register(t,c,s,f,d,l),r.get(t,s,d,f,c)}}),function(){}}),r("tinymce.plugins.spellchecker.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("9",tinymce.util.Tools.resolve),i("2",["9"],function(e){return e("tinymce.PluginManager")}),a("a",window),i("3",["a","2"],function(e,t){return{hasProPlugin:function(n){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(n.settings.plugins)||!t.get("tinymcespellchecker")||("undefined"!=typeof e.console&&e.console.log&&e.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))}}}),i("6",[],function(){return{getLanguages:function(e){return e.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},getLanguage:function(e){var t=e.getParam("language","en");return e.getParam("spellchecker_language",t)},getRpcUrl:function(e){return e.getParam("spellchecker_rpc_url")},getSpellcheckerCallback:function(e){return e.getParam("spellchecker_callback")},getSpellcheckerWordcharPattern:function(e){var t=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`\xa7\xa9\xab\xae\xb1\xb6\xb7\xb8\xbb\xbc\xbd\xbe\xbf\xd7\xf7\xa4\u201d\u201c\u201e\xa0\u2002\u2003\u2009]+',"g");return e.getParam("spellchecker_wordchar_pattern",t)}}}),i("c",["9"],function(e){return e("tinymce.util.Tools")}),i("g",["9"],function(e){return e("tinymce.util.URI")}),i("h",["9"],function(e){return e("tinymce.util.XHR")}),i("i",[],function(){return{fireSpellcheckStart:function(e){return e.fire("SpellcheckStart")},fireSpellcheckEnd:function(e){return e.fire("SpellcheckEnd")}}}),i("j",[],function(){function e(e){return e&&1===e.nodeType&&"false"===e.contentEditable}return function(t,n){function r(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";return{start:e.index,end:e.index+e[0].length,text:e[0],data:t}}function o(t){var n;if(3===t.nodeType)return t.data;if(S[t.nodeName]&&!T[t.nodeName])return"";if(e(t))return"\n";if(n="",(T[t.nodeName]||E[t.nodeName])&&(n+="\n"),t=t.firstChild)do{n+=o(t)}while(t=t.nextSibling);return n}function i(t,n,r){var o,i,a,u,c,s=[],l=0,f=t,d=0;n=n.slice(0),n.sort(function(e,t){return e.start-t.start}),c=n.shift();e:for(;;){if((T[f.nodeName]||E[f.nodeName]||e(f))&&l++,3===f.nodeType&&(!i&&f.length+l>=c.end?(i=f,u=c.end-l):o&&s.push(f),!o&&f.length+l>c.start&&(o=f,a=c.start-l),l+=f.length),o&&i){if(f=r({startNode:o,startNodeIndex:a,endNode:i,endNodeIndex:u,innerNodes:s,match:c.text,matchIndex:d}),l-=i.length-u,o=null,i=null,s=[],c=n.shift(),d++,!c)break}else if(S[f.nodeName]&&!T[f.nodeName]||!f.firstChild){if(f.nextSibling){f=f.nextSibling;continue}}else if(!e(f)){f=f.firstChild;continue}for(;;){if(f.nextSibling){f=f.nextSibling;break}if(f.parentNode===t)break e;f=f.parentNode}}}function a(e){function t(t,n){var r=_[n];r.stencil||(r.stencil=e(r));var o=r.stencil.cloneNode(!1);return o.setAttribute("data-mce-index",n),t&&o.appendChild(A.doc.createTextNode(t)),o}return function(e){var n,r,o,i=e.startNode,a=e.endNode,u=e.matchIndex,c=A.doc;if(i===a){var s=i;o=s.parentNode,e.startNodeIndex>0&&(n=c.createTextNode(s.data.substring(0,e.startNodeIndex)),o.insertBefore(n,s));var l=t(e.match,u);return o.insertBefore(l,s),e.endNodeIndex<s.length&&(r=c.createTextNode(s.data.substring(e.endNodeIndex)),o.insertBefore(r,s)),s.parentNode.removeChild(s),l}n=c.createTextNode(i.data.substring(0,e.startNodeIndex)),r=c.createTextNode(a.data.substring(e.endNodeIndex));for(var f=t(i.data.substring(e.startNodeIndex),u),d=[],p=0,m=e.innerNodes.length;p<m;++p){var g=e.innerNodes[p],h=t(g.data,u);g.parentNode.replaceChild(h,g),d.push(h)}var v=t(a.data.substring(0,e.endNodeIndex),u);return o=i.parentNode,o.insertBefore(n,i),o.insertBefore(f,i),o.removeChild(i),o=a.parentNode,o.insertBefore(v,a),o.insertBefore(r,a),o.removeChild(a),v}}function u(e){e.parentNode.insertBefore(e.firstChild,e),e.parentNode.removeChild(e)}function c(e){return-1!==e.className.indexOf("mce-spellchecker-word")}function s(e){var n=t.getElementsByTagName("*"),r=[];e="number"==typeof e?""+e:null;for(var o=0;o<n.length;o++){var i=n[o],a=i.getAttribute("data-mce-index");null!==a&&a.length&&c(i)&&(a!==e&&null!==e||r.push(i))}return r}function l(e){for(var t=_.length;t--;)if(_[t]===e)return t;return-1}function f(e){var t=[];return d(function(n,r){e(n,r)&&t.push(n)}),_=t,this}function d(e){for(var t=0,n=_.length;t<n&&!1!==e(_[t],t);t++);return this}function p(e){return _.length&&i(t,_,a(e)),this}function m(e,t){if(k&&e.global)for(;C=e.exec(k);)_.push(r(C,t));return this}function g(e){var t,n=s(e?l(e):null);for(t=n.length;t--;)u(n[t]);return this}function h(e){return _[e.getAttribute("data-mce-index")]}function v(e){return s(l(e))[0]}function y(e,t,n){return _.push({start:e,end:e+t,text:k.substr(e,t),data:n}),this}function b(e){var t=s(l(e)),r=n.dom.createRng();return r.setStartBefore(t[0]),r.setEndAfter(t[t.length-1]),r}function x(e,t){var r=b(e);return r.deleteContents(),t.length>0&&r.insertNode(n.dom.doc.createTextNode(t)),r}function w(){return _.splice(0,_.length),g(),this}var C,k,T,S,E,_=[],A=n.dom;return T=n.schema.getBlockElements(),S=n.schema.getWhiteSpaceElements(),E=n.schema.getShortEndedElements(),k=o(t),{text:k,matches:_,each:d,filter:f,reset:w,matchFromElement:h,elementFromMatch:v,find:m,add:y,wrap:p,unwrap:g,replace:x,rangeFromMatch:b,indexOf:l}}}),i("b",["c","g","h","i","6","j"],function(e,t,n,r,o,i){var a=function(e,t){if(!t.get()){var n=new i(e.getBody(),e);t.set(n)}return t.get()},u=function(e){for(var t in e)return!1;return!0},c=function(r,i,a){return function(u,c,s,l){var f={method:u,lang:a.get()},d="";f["addToDictionary"===u?"word":"text"]=c,e.each(f,function(e,t){d&&(d+="&"),d+=t+"="+encodeURIComponent(e)}),n.send({url:new t(i).toAbsolute(o.getRpcUrl(r)),type:"post",content_type:"application/x-www-form-urlencoded",data:d,success:function(e){if(e=JSON.parse(e))e.error?l(e.error):s(e);else{var t=r.translate("Server response wasn't proper JSON.");l(t)}},error:function(){var e=r.translate("The spelling service was not found: (")+o.getRpcUrl(r)+r.translate(")");l(e)}})}},s=function(e,t,n,r,i,a,u){var s=o.getSpellcheckerCallback(e);(s||c(e,t,n)).call(e.plugins.spellchecker,r,i,a,u)},l=function(e,t,n,r,o,i){if(!m(e,n,r)){var u=function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1),m(e,n,r)},c=function(t){v(e,n,r,o,t)};e.setProgressState(!0),s(e,t,i,"spellcheck",a(e,r).text,c,u),e.focus()}},f=function(e,t,n){e.dom.select("span.mce-spellchecker-word").length||m(e,t,n)},d=function(e,t,n,r,o,i){e.setProgressState(!0),s(e,t,"addToDictionary",o,function(){e.setProgressState(!1),e.dom.remove(i,!0),f(e,n,r)},function(t){e.notificationManager.open({text:t,type:"error"}),e.setProgressState(!1)})},p=function(t,n,r,o,i,a){t.selection.collapse(),a?e.each(t.dom.select("span.mce-spellchecker-word"),function(e){e.getAttribute("data-mce-word")===o&&t.dom.remove(e,!0)}):t.dom.remove(i,!0),f(t,n,r)},m=function(e,t,n){if(a(e,n).reset(),n.set(null),t.get())return t.set(!1),r.fireSpellcheckEnd(e),!0},g=function(e){var t=e.getAttribute("data-mce-index");return"number"==typeof t?""+t:t},h=function(t,n){var r,o=[];if(r=e.toArray(t.getBody().getElementsByTagName("span")),r.length)for(var i=0;i<r.length;i++){var a=g(r[i]);null!==a&&a.length&&a===n.toString()&&o.push(r[i])}return o},v=function(e,t,n,i,c){var s,l;if(c.words?(l=!!c.dictionary,s=c.words):s=c,e.setProgressState(!1),u(s)){var f=e.translate("No misspellings found.");return e.notificationManager.open({text:f,type:"info"}),void t.set(!1)}i.set({suggestions:s,hasDictionarySupport:l}),a(e,n).find(o.getSpellcheckerWordcharPattern(e)).filter(function(e){return!!s[e.text]}).wrap(function(t){return e.dom.create("span",{"class":"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":t.text})}),t.set(!0),r.fireSpellcheckStart(e)};return{spellcheck:l,checkIfFinished:f,addToDictionary:d,ignoreWord:p,findSpansByIndex:h,getElmIndex:g,markErrors:v}}),i("4",["6","b"],function(e,t){return{get:function(n,r,o,i){var a=function(){return e.getLanguage(n)},u=function(){return e.getSpellcheckerWordcharPattern(n)},c=function(e){t.markErrors(n,r,i,o,e)};return{getTextMatcher:function(){return i.get()},getWordCharPattern:u,markErrors:c,getLanguage:a}}}}),i("5",["b"],function(e){return{register:function(t,n,r,o,i,a){t.addCommand("mceSpellCheck",function(){e.spellcheck(t,n,r,o,i,a)})}}}),i("7",["c","6","b"],function(e,t,n){var r=function(t,n){var r=[];return e.each(n,function(e){r.push({selectable:!0,text:e.name,data:e.value})}),r},o=function(e){return function(n){var r=t.getLanguage(e);n.control.items().each(function(e){e.active(e.settings.data===r)})}},i=function(n){return e.map(t.getLanguages(n).split(","),function(e){return e=e.split("="),{name:e[0],value:e[1]}})};return{register:function(e,t,a,u,c,s){var l=r("Language",i(e)),f=function(){n.spellcheck(e,t,a,u,s,c)},d={tooltip:"Spellcheck",onclick:f,onPostRender:function(t){var n=t.control;e.on("SpellcheckStart SpellcheckEnd",function(){n.active(a.get())})}};l.length>1&&(d.type="splitbutton",d.menu=l,d.onshow=o(e),d.onselect=function(e){c.set(e.control.settings.data)}),e.addButton("spellchecker",d),e.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:f,selectable:!0,onPostRender:function(){var t=this;t.active(a.get()),e.on("SpellcheckStart SpellcheckEnd",function(){t.active(a.get())})}})}}}),a("d",document),i("e",["9"],function(e){return e("tinymce.dom.DOMUtils")}),i("f",["9"],function(e){return e("tinymce.ui.Factory")}),i("8",["d","e","f","c","6","b"],function(e,t,n,r,o,i){var a,u=function(o,u,c,s,l,f,d){var p=[],m=c.get().suggestions[f];r.each(m,function(e){p.push({text:e,onclick:function(){o.insertContent(o.dom.encode(e)),o.dom.remove(d),i.checkIfFinished(o,s,l)}})}),p.push({text:"-"}),c.get().hasDictionarySupport&&p.push({text:"Add to Dictionary",onclick:function(){i.addToDictionary(o,u,s,l,f,d)}}),p.push.apply(p,[{text:"Ignore",onclick:function(){i.ignoreWord(o,s,l,f,d)}},{text:"Ignore all",onclick:function(){i.ignoreWord(o,s,l,f,d,!0)}}]),a=n.create("menu",{items:p,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){a.remove(),a=null}}),a.renderTo(e.body);var g=t.DOM.getPos(o.getContentAreaContainer()),h=o.dom.getPos(d[0]),v=o.dom.getRoot();"BODY"===v.nodeName?(h.x-=v.ownerDocument.documentElement.scrollLeft||v.scrollLeft,h.y-=v.ownerDocument.documentElement.scrollTop||v.scrollTop):(h.x-=v.scrollLeft,h.y-=v.scrollTop),g.x+=h.x,g.y+=h.y,a.moveTo(g.x,g.y+d[0].offsetHeight)};return{setup:function(e,t,n,r,o){e.on("click",function(a){var c=a.target;if("mce-spellchecker-word"===c.className){a.preventDefault();var s=i.findSpansByIndex(e,i.getElmIndex(c));if(s.length>0){var l=e.dom.createRng();l.setStartBefore(s[0]),l.setEndAfter(s[s.length-1]),e.selection.setRng(l),u(e,t,n,r,o,c.getAttribute("data-mce-word"),s)}}})}}}),i("0",["1","2","3","4","5","6","7","8"],function(e,t,n,r,o,i,a,u){return t.add("spellchecker",function(t,c){if(!1===n.hasProPlugin(t)){var s=e(!1),l=e(i.getLanguage(t)),f=e(null),d=e({});return a.register(t,c,s,f,l,d),u.setup(t,c,d,s,f),o.register(t,c,s,f,d,l),r.get(t,s,d,f,c)}}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("global!window",window),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.EditorManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.EditorManager")}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.plugins.tabfocus.api.Settings",[],function(){var e=function(e){return e.getParam("tabfocus_elements",":prev,:next")};return{getTabFocus:function(t){return t.getParam("tab_focus",e(t))}}}),i("tinymce.plugins.tabfocus.core.Keyboard",["global!window","tinymce.core.dom.DOMUtils","tinymce.core.EditorManager","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK","tinymce.plugins.tabfocus.api.Settings"],function(e,t,n,r,o,i,a,u){var c=t.DOM,s=function(e){e.keyCode!==a.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()};return{setup:function(t){function l(s){function l(e){function r(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&r(e.parentNode)}function o(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&n.get(s.id)&&-1!==e.tabIndex&&r(e)}if(d=c.select(":input:enabled,*[tabindex]:not(iframe)"),i.each(d,function(e,n){if(e.id===t.id)return f=n,!1}),e>0){for(m=f+1;m<d.length;m++)if(o(d[m]))return d[m]}else for(m=f-1;m>=0;m--)if(o(d[m]))return d[m];return null}var f,d,p,m;if(!(s.keyCode!==a.TAB||s.ctrlKey||s.altKey||s.metaKey||s.isDefaultPrevented())&&(p=i.explode(u.getTabFocus(t)),1===p.length&&(p[1]=p[0],p[0]=":prev"),d=s.shiftKey?":prev"===p[0]?l(-1):c.get(p[0]):":next"===p[1]?l(1):c.get(p[1]))){var g=n.get(d.id||d.name);d.id&&g?g.focus():o.setTimeout(function(){r.webkit||e.focus(),d.focus()},10),s.preventDefault()}}t.on("init",function(){t.inline&&c.setAttrib(t.getBody(),"tabIndex",null),t.on("keyup",s),r.gecko?t.on("keypress keydown",l):t.on("keydown",l)})}}}),i("tinymce.plugins.tabfocus.Plugin",["tinymce.core.PluginManager","tinymce.plugins.tabfocus.core.Keyboard"],function(e,t){return e.add("tabfocus",function(e){t.setup(e)}),function(){}}),r("tinymce.plugins.tabfocus.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),a("4",window),i("5",["3"],function(e){return e("tinymce.dom.DOMUtils")}),i("6",["3"],function(e){return e("tinymce.EditorManager")}),i("7",["3"],function(e){return e("tinymce.Env")}),i("8",["3"],function(e){return e("tinymce.util.Delay")}),i("9",["3"],function(e){return e("tinymce.util.Tools")}),i("a",["3"],function(e){return e("tinymce.util.VK")}),i("b",[],function(){var e=function(e){return e.getParam("tabfocus_elements",":prev,:next")};return{getTabFocus:function(t){return t.getParam("tab_focus",e(t))}}}),i("2",["4","5","6","7","8","9","a","b"],function(e,t,n,r,o,i,a,u){var c=t.DOM,s=function(e){e.keyCode!==a.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()};return{setup:function(t){function l(s){function l(e){function r(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&r(e.parentNode)}function o(e){return/INPUT|TEXTAREA|BUTTON/.test(e.tagName)&&n.get(s.id)&&-1!==e.tabIndex&&r(e)}if(d=c.select(":input:enabled,*[tabindex]:not(iframe)"),i.each(d,function(e,n){if(e.id===t.id)return f=n,!1}),e>0){for(m=f+1;m<d.length;m++)if(o(d[m]))return d[m]}else for(m=f-1;m>=0;m--)if(o(d[m]))return d[m];return null}var f,d,p,m;if(!(s.keyCode!==a.TAB||s.ctrlKey||s.altKey||s.metaKey||s.isDefaultPrevented())&&(p=i.explode(u.getTabFocus(t)),1===p.length&&(p[1]=p[0],p[0]=":prev"),d=s.shiftKey?":prev"===p[0]?l(-1):c.get(p[0]):":next"===p[1]?l(1):c.get(p[1]))){var g=n.get(d.id||d.name);d.id&&g?g.focus():o.setTimeout(function(){r.webkit||e.focus(),d.focus()},10),s.preventDefault()}}t.on("init",function(){t.inline&&c.setAttrib(t.getBody(),"tabIndex",null),t.on("keyup",s),r.gecko?t.on("keypress keydown",l):t.on("keydown",l)})}}}),i("0",["1","2"],function(e,t){return e.add("tabfocus",function(e){t.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}
}),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),a("global!document",document),i("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return u(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return u(o)},u=function(n){if(null===n||n===undefined)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:u}}),i("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(e){var t=function(n,r){var o=function(e,o){return t(n+e,r+o)};return{left:e.constant(n),top:e.constant(r),translate:o}};return t}),i("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=n!==undefined?n:e,o=0;o<t.length&&r!==undefined&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return e[t]!==undefined&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=n!==undefined?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(r===undefined)throw e+" not available on this browser";return r}}}),i("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),i("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),a("global!Number",Number),i("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined},o=function(e,n){var o=r(e,n);if(!o)return{major:0,minor:0};var i=function(e){return t(n.replace(o,"$"+e))};return u(i(1),i(2))},i=function(e,t){var r=n(t).toLowerCase();return 0===e.length?a():o(e,r)},a=function(){return u(0,0)},u=function(e,t){return{major:e,minor:t}};return{nu:u,detect:i,unknown:a}}),i("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge",r="Chrome",o="IE",i="Opera",a="Firefox",u="Safari",c=function(e,t){return function(){return t===e}},s=function(){return l({current:undefined,version:t.unknown()})},l=function(e){var t=e.current;return{current:t,version:e.version,isEdge:c(n,t),isChrome:c(r,t),isIE:c(o,t),isOpera:c(i,t),isFirefox:c(a,t),isSafari:c(u,t)}};return{unknown:s,nu:l,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(o),opera:e.constant(i),firefox:e.constant(a),safari:e.constant(u)}}),i("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",r="iOS",o="Android",i="Linux",a="OSX",u="Solaris",c="FreeBSD",s=function(e,t){return function(){return t===e}},l=function(){return f({current:undefined,version:t.unknown()})},f=function(e){var t=e.current;return{current:t,version:e.version,isWindows:s(n,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(a,t),isLinux:s(i,t),isSolaris:s(u,t),isFreeBSD:s(c,t)}};return{unknown:l,nu:f,windows:e.constant(n),ios:e.constant(r),android:e.constant(o),linux:e.constant(i),osx:e.constant(a),solaris:e.constant(u),freebsd:e.constant(c)}}),i("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,c=o||a||u&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),l=s&&!c,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(f)}}}),i("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),i("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),i("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),i("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t){var n=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},o=function(t,n){return l(t,n)?e.removeFromStart(t,n.length):t},i=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return l(t,n)?t:e.addToStart(t,n)},u=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},c=function(e,t){return-1!==e.indexOf(t)},s=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},l=function(e,t){return n(e,t,0)},f=function(e,t){return n(e,t,e.length-t.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:i,ensureLeading:a,ensureTrailing:u,endsWith:f,contains:c,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:s}}),i("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),i("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),u=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),s=r.detectOs(u,i).fold(t.unknown,t.nu);return{browser:c,os:s,deviceType:n(s,c,i)}}}}),a("global!navigator",navigator),i("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){var e=n.userAgent;return t.detect(e)})}}),i("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=0,u=1,c=2,s=3,l=function(){var e=i.createElement("span");return e.matches!==undefined?a:e.msMatchesSelector!==undefined?u:e.webkitMatchesSelector!==undefined?c:e.mozMatchesSelector!==undefined?s:-1}(),f=r.ELEMENT,d=r.DOCUMENT,p=function(e,t){var n=e.dom();if(n.nodeType!==f)return!1;if(l===a)return n.matches(t);if(l===u)return n.msMatchesSelector(t);if(l===c)return n.webkitMatchesSelector(t);if(l===s)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},m=function(e){return e.nodeType!==f&&e.nodeType!==d||0===e.childElementCount};return{all:function(t,r){var o=r===undefined?i:r.dom();return m(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:p,one:function(e,r){var o=r===undefined?i:r.dom();return m(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),i("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=function(e,t){return e.dom().isEqualNode(t.dom())},u=function(n,r){return e.exists(r,t.curry(i,n))},c=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},s=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},l=r.detect().browser,f=l.isIE()?s:c;return{eq:i,isEqualNode:a,member:u,contains:f,is:o.is}}),i("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),u=o(e.TEXT),c=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:u,isDocument:c,isComment:i}}),i("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r},r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),i("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return a(t.fromDom(r))}),a=function(e){var n=e.dom().body;if(null===n||n===undefined)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:a,inBody:o}}),i("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),i("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,u){var c=function(e){return p(o.body(),e)},s=function(t,o,i){for(var u=t.dom(),c=e.isFunction(i)?i:n.constant(!1);u.parentNode;){u=u.parentNode;var s=a.fromDom(u);if(o(s))return r.some(s);if(c(s))break}return r.none()},l=function(e,t,n){return u(function(e){return t(e)},s,e,t,n)},f=function(e,t){var n=e.dom();return n.parentNode?d(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},d=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},p=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:c,ancestor:s,closest:l,sibling:f,child:d,descendant:p}}),i("ephox.sugar.api.dom.Dom",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!document"],function(e,t,n,r,o,i){return{attached:function(r,a){var u=a||n.fromDom(i.documentElement);return o.ancestor(r,e.curry(t.eq,u)).isSome()},windowOf:function(e){var t=e.dom();return t===t.window?e:r.isDocument(e)?t.defaultView||t.parentWindow:null}}}),i("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(e,t,n){var r=function(t){var n=t.getBoundingClientRect();return e(n.left,n.top)},o=function(e,t){return e!==undefined?e:t!==undefined?t:0},i=function(e){var r=e.dom().ownerDocument,i=r.body,a=t.windowOf(n.fromDom(r)),c=r.documentElement,s=o(a.pageYOffset,c.scrollTop),l=o(a.pageXOffset,c.scrollLeft),f=o(c.clientTop,i.clientTop),d=o(c.clientLeft,i.clientLeft);return u(e).translate(l-d,s-f)},a=function(t){var n=t.dom();return e(n.offsetLeft,n.offsetTop)},u=function(o){var i=o.dom(),a=i.ownerDocument,u=a.body,c=n.fromDom(a.documentElement);return u===i?e(u.offsetLeft,u.offsetTop):t.attached(o,c)?r(i):e(0,0)};return{absolute:i,relative:a,viewport:u}}),i("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(e,t,n,r,o){return{only:function(r){var i=t.from(r.dom().documentElement).map(n.fromDom).getOr(r);return{parent:e.constant(i),view:e.constant(r),origin:e.constant(o(0,0))}},detached:function(t,n){var o=e.curry(r.absolute,n);return{parent:e.constant(n),view:e.constant(t),origin:o}},body:function(t,n){return{parent:e.constant(n),view:e.constant(t),origin:e.constant(o(0,0))}}}}),i("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var u={};return e.each(o,function(e,n){u[e]=t.constant(i[n])}),u}}}),i("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return e===undefined?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},u=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},c=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var u=o[i],c=t[u];if(r(c,u,t))return e.some(c)}return e.none()},s=function(e){return u(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:u,tupleMap:i,find:c,keys:n,values:s,size:function(e){return s(e).length}}}),i("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),i("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(u,c){var s=u.concat(c);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",u),o.validateStrArr("optional",c),o.checkDupes(s),function(i){var l=n.keys(i);e.forall(u,function(t){return e.contains(l,t)})||o.reqMessage(u,l);var f=e.filter(l,function(t){return!e.contains(s,t)});f.length>0&&o.unsuppMessage(f);var d={};return e.each(u,function(e){d[e]=t.constant(i[e])}),e.each(c,function(e){d[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),d}}}),i("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),i("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},u=function(e,t,n){a(e.dom(),t,n)},c=function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},s=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},l=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},f=function(e,t){e.dom().removeAttribute(t)},d=function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},p=function(e,t,n){l(e,n)&&!l(t,n)&&u(t,n,s(e,n))};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:u,setAll:c,get:s,has:l,remove:f,hasNone:d,transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){p(e,n,t)})}}}),i("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return e.style!==undefined}}}),a("global!window",window),i("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(t,n,r){if(!e.isString(r))throw f.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(n,r)},m=function(e,t){c.isSupported(e)&&e.style.removeProperty(t)},g=function(e,t,n){var r=e.dom();p(r,t,n)},h=function(e,t){var r=e.dom();n.each(t,function(e,t){p(r,t,e)})},v=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){m(r,t)},function(e){p(r,t,e)})})},y=function(e,t){var n=e.dom(),r=d.getComputedStyle(n),o=r.getPropertyValue(t),a=""!==o||i.inBody(e)?o:b(n,t);return null===a?undefined:a},b=function(e,t){return c.isSupported(e)?e.style.getPropertyValue(t):""},x=function(e,t){var n=e.dom(),o=b(n,t);return r.from(o).filter(function(e){return e.length>0})},w=function(e){var t={},n=e.dom();if(c.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},C=function(e,t,n){var r=a.fromTag(e);return g(r,t,n),x(r,t).isSome()},k=function(e,t){var n=e.dom();m(n,t),o.has(e,"style")&&""===s.trim(o.get(e,"style"))&&o.remove(e,"style")},T=function(e,t){var n=o.get(e,"style"),r=t(e);return(n===undefined?o.remove:o.set)(e,"style",n),r},S=function(e,t,n){x(e,n).each(function(e){x(t,n).isNone()&&g(t,n,e)})};return{copy:function(e,t){var n=e.dom(),r=t.dom();c.isSupported(n)&&c.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:g,preserve:T,setAll:h,setOptions:v,remove:k,get:y,getRaw:x,getAllRaw:w,isValidValue:C,reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){u.isElement(e)&&u.isElement(n)&&t.each(r,function(t){S(e,n,t)})}}}),i("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(e,t,n,r){return function(o,i){var a=function(t,n){if(!e.isNumber(n)&&!n.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+n;var i=t.dom();r.isSupported(i)&&(i.style[o]=n+"px")},u=function(e){var t=i(e);if(t<=0||null===t){var r=n.get(e,o);return parseFloat(r)||0}return t},c=u,s=function(e,r){return t.foldl(r,function(t,r){var o=n.get(e,r),i=o===undefined?0:parseInt(o,10);return isNaN(i)?t:t+i},0)};return{set:a,get:u,getOuter:c,aggregate:s,max:function(e,t,n){var r=s(e,n);return t>r?t-r:0}}}}),i("ephox.sugar.api.view.Height",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t){var n=t("height",function(e){return e.dom().offsetHeight});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=n.max(t,r,o);e.set(t,"max-height",i+"px")}}}),i("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,t){var n=t("width",function(e){return e.dom().offsetWidth});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=n.max(t,r,o);e.set(t,"max-width",i+"px")}}}),i("ephox.snooker.resize.BarPositions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Struct","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,i){var a=n.immutable("row","y"),u=n.immutable("col","x"),c=function(e){return o.absolute(e).left()+i.getOuter(e)},s=function(e){return o.absolute(e).left()},l=function(e,t){return u(e,s(t))},f=function(e,t){return u(e,c(t))},d=function(e){return o.absolute(e).top()},p=function(e,t){return a(e,d(t))},m=function(e,t){return a(e,d(t)+r.getOuter(t))},g=function(t,n,r){if(0===r.length)return[];var o=e.map(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),i=r[r.length-1].map(function(e){return n(r.length-1,e)});return o.concat([i])},h=function(e){return-e},v={delta:t.identity,positions:t.curry(g,p,m),edge:d},y={delta:t.identity,edge:s,positions:t.curry(g,l,f)};return{height:v,rtl:{delta:h,edge:c,positions:t.curry(g,f,l)},ltr:y}}),i("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(e){return{ltr:e.ltr,rtl:e.rtl}}),i("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(e){return function(t){var n=function(n){return t(n).isRtl()?e.rtl:e.ltr},r=function(e,t){return n(t).delta(e,t)},o=function(e,t){return n(t).positions(e,t)};return{delta:r,edge:function(e){return n(e).edge(e)},positions:o}}}),i("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(e,t){return function(n){var r=t.immutable.apply(null,n),o=[];return{bind:function(e){if(e===undefined)throw"Event bind error: undefined handler";o.push(e)},unbind:function(t){o=e.filter(o,function(e){return e!==t})},trigger:function(){var t=r.apply(null,arguments);e.each(o,function(e){e(t)})}}}}),i("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(e){return{create:function(t){return{registry:e.map(t,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:e.map(t,function(e){return e.trigger})}}}}),i("ephox.snooker.calc.ColumnContext",[],function(){var e=function(){return i(function(e){return e()})},t=function(e){return i(function(t,n){return n(e)})},n=function(e,t){return i(function(n,r,o){return o(e,t)})},r=function(e,t,n){return i(function(r,o,i,a){return a(e,t,n)})},o=function(e,t){return i(function(n,r,o,i,a){return a(e,t)})},i=function(e){return{fold:e}};return{none:e,only:t,left:n,middle:r,right:o}}),a("global!Math",Math),i("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(e,t,n,r){var o=function(e,t){return 0===e.length?n.none():1===e.length?n.only(0):0===t?n.left(0,1):t===e.length-1?n.right(t-1,t):t>0&&t<e.length-1?n.middle(t-1,t,t+1):n.none()};return{determine:function(n,i,a,u){var c=n.slice(0),s=o(n,i),l=function(n){return e.map(n,t.constant(0))},f=t.constant(l(c)),d=function(e){return u.singleColumnWidth(c[e],a)},p=function(e,t){if(a>=0){var n=r.max(u.minCellWidth(),c[t]-a);return l(c.slice(0,e)).concat([a,n-c[t]]).concat(l(c.slice(t+1)))}var o=r.max(u.minCellWidth(),c[e]+a),i=c[e]-o;return l(c.slice(0,e)).concat([o-c[e],i]).concat(l(c.slice(t+1)))},m=p,g=function(e,t,n){return p(t,n)},h=function(e,t){if(a>=0)return l(c.slice(0,t)).concat([a]);var n=r.max(u.minCellWidth(),c[t]+a);return l(c.slice(0,t)).concat([n-c[t]])};return s.fold(f,d,m,g,h)}}}),i("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(e){var t=e.immutable("width","height"),n=e.immutable("rows","columns"),r=e.immutable("row","column"),o=e.immutable("x","y"),i=e.immutable("element","rowspan","colspan"),a=e.immutable("element","rowspan","colspan","isNew");return{dimensions:t,grid:n,address:r,coords:o,extended:e.immutable("element","rowspan","colspan","row","column"),detail:i,detailnew:a,rowdata:e.immutable("element","cells","section"),elementnew:e.immutable("element","isNew"),rowdatanew:e.immutable("element","cells","section","isNew"),rowcells:e.immutable("cells","section"),rowdetails:e.immutable("details","section"),bounds:e.immutable("startRow","startCol","finishRow","finishCol")}}),i("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),i("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,u){var c=function(e){return u.fromDom(e.dom().ownerDocument)},s=function(e){var t=c(e);return u.fromDom(t.dom().documentElement)},l=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return u.fromDom(n)},f=function(e){var t=e.dom();return r.from(t.parentNode).map(u.fromDom)},d=function(e){return f(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},p=function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&i.parentNode!==undefined;){var c=i.parentNode,s=u.fromDom(c);if(a.push(s),!0===o(s))break;i=c}return a},m=function(e){var n=function(n){return t.filter(n,function(t){return!a.eq(e,t)})};return f(e).map(x).map(n).getOr([])},g=function(e){var t=e.dom()
;return r.from(t.offsetParent).map(u.fromDom)},h=function(e){var t=e.dom();return r.from(t.previousSibling).map(u.fromDom)},v=function(e){var t=e.dom();return r.from(t.nextSibling).map(u.fromDom)},y=function(e){return t.reverse(i.toArray(e,h))},b=function(e){return i.toArray(e,v)},x=function(e){var n=e.dom();return t.map(n.childNodes,u.fromDom)},w=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(u.fromDom)},C=function(e){return w(e,0)},k=function(e){return w(e,e.dom().childNodes.length-1)},T=function(e){return e.dom().childNodes.length},S=o.immutable("element","offset");return{owner:c,defaultView:l,documentElement:s,parent:f,findIndex:d,parents:p,siblings:m,prevSibling:h,offsetParent:g,prevSiblings:y,nextSibling:v,nextSiblings:b,children:x,child:w,firstChild:C,lastChild:k,childNodesCount:T,leaf:function(e,t){var n=x(e);return n.length>0&&t<n.length?S(n[t],0):S(e,t)}}}),i("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e,n){return i(e,n,t.constant(!0))},i=function(t,o,a){return e.bind(r.children(t),function(e){return n.is(e,o)?a(e)?[e]:[]:i(e,o,a)})};return{firstLayer:o,filterFirstLayer:i}}),i("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return u(t.body(),e)},o=function(t,r,o){return e.filter(n.parents(t,o),r)},i=function(t,r){return e.filter(n.siblings(t),r)},a=function(t,r){return e.filter(n.children(t),r)},u=function(t,r){var o=[];return e.each(n.children(t),function(e){r(e)&&(o=o.concat([e])),o=o.concat(u(e,r))}),o};return{all:r,ancestors:o,siblings:i,children:a,descendants:u}}),i("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),i("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(e){return t.one(e)},o=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:r,ancestor:o,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,r,i){return n(t.is,o,e,r,i)}}}),a("global!parseInt",parseInt),i("ephox.snooker.api.TableLookup",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse","global!parseInt"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=function(r,o,i){var u=i!==undefined?i:t.constant(!1);if(u(o))return n.none();if(e.contains(r,a.name(o)))return n.some(o);var l=function(e){return s.is(e,"table")||u(e)};return c.ancestor(o,r.join(","),l)},p=function(e,t){return d(["td","th"],e,t)},m=function(e){return o.firstLayer(e,"th,td")},g=function(e,t){return d(["caption","tr","tbody","tfoot","thead"],e,t)},h=function(e,t){return l.parent(t).map(function(t){return u.children(t,e)})},v=t.curry(h,"th,td"),y=t.curry(h,"tr"),b=function(e){return c.descendant(e,"th,td")},x=function(e,t){return c.closest(e,"table",t)},w=function(e,t){return d(["tr"],e,t)},C=function(e){return o.firstLayer(e,"tr")},k=function(e,t){return f(i.get(e,t),10)};return{cell:p,firstCell:b,cells:m,neighbourCells:v,table:x,row:w,rows:C,notCell:g,neighbourRows:y,attr:k,grid:function(e,t,n){var o=k(e,t),i=k(e,n);return r.grid(o,i)}}}),i("ephox.snooker.model.DetailsList",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){return{fromTable:function(a){var u=n.rows(a);return e.map(u,function(a){var u=a,c=i.parent(u),s=c.bind(function(e){var t=o.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),l=e.map(n.cells(a),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(u,l,s)})},fromPastedRows:function(o,i){return e.map(o,function(o){var a=e.map(n.cells(o),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(o,a,i.section())})}}}),i("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(e,t,n,r,o){var i=function(e,t){return e+","+t},a=function(e,t,r){var o=e.access()[i(t,r)];return o!==undefined?n.some(o):n.none()},u=function(e,t,r){var o=c(e,function(e){return r(t,e.element())});return o.length>0?n.some(o[0]):n.none()},c=function(t,n){var r=e.bind(t.all(),function(e){return e.cells()});return e.filter(r,n)};return{generate:function(n){var a={},u=[],c=0,s=0;e.each(n,function(t,n){var l=[];e.each(t.cells(),function(e){for(var t=0;a[i(n,t)]!==undefined;)t++;for(var u=r.extended(e.element(),e.rowspan(),e.colspan(),n,t),f=0;f<e.colspan();f++)for(var d=0;d<e.rowspan();d++){var p=n+d,m=t+f,g=i(p,m);a[g]=u,c=o.max(c,p+1),s=o.max(s,m+1)}l.push(u)}),u.push(r.rowdata(t.element(),l,t.section()))});var l=r.grid(c,s);return{grid:t.constant(l),access:t.constant(a),all:t.constant(u)}},getAt:a,findItem:u,filterItems:c,justCells:function(t){var n=e.map(t.all(),function(e){return e.cells()});return e.flatten(n)}}}),i("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),i("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(e,t,n,r){return{repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(t,n){var r=[];return e.each(t,function(e,o){o<t.length-1&&!n(e,t[o+1])?r.push(e):o===t.length-1&&r.push(e)}),r},deduce:function(o,i){if(i<0||i>=o.length-1)return t.none();var a=o[i].fold(function(){var t=e.reverse(o.slice(0,i));return n.findMap(t,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:0})}),u=o[i+1].fold(function(){var e=o.slice(i+1);return n.findMap(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:1})});return a.bind(function(e){return u.map(function(t){var n=t.delta+e.delta;return r.abs(t.value-e.value)/n})})}}}),i("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(e,t,n,r,o){var i=function(n){var i=n.grid(),u=o.range(0,i.columns()),c=o.range(0,i.rows());return e.map(u,function(o){return a(function(){return e.bind(c,function(e){return r.getAt(n,e,o).filter(function(e){return e.column()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return r.getAt(n,0,o)})})},a=function(t,r,o){var i=t();return e.find(i,r).orThunk(function(){return n.from(i[0]).orThunk(o)}).map(function(e){return e.element()})};return{columns:i,rows:function(n){var i=n.grid(),u=o.range(0,i.rows()),c=o.range(0,i.columns());return e.map(u,function(o){return a(function(){return e.bind(c,function(e){return r.getAt(n,o,e).filter(function(e){return e.row()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return r.getAt(n,o,0)})})}}}),i("ephox.snooker.resize.Sizes",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width","global!Math","global!parseInt"],function(e,t,n,r,o,i,a,u,c,s,l){var f=/(\d+(\.\d+)?)(\w|%)*/,d=/(\d+(\.\d+)?)%/,p=/(\d+(\.\d+)?)px|em/,m=function(e,t){a.set(e,"width",t+"px")},g=function(e,t){a.set(e,"width",t+"%")},h=function(e,t){a.set(e,"height",t+"px")},v=function(e,t){return a.getRaw(e,t).getOrThunk(function(){return a.get(e,t)})},y=function(e){return v(e,"height")},b=function(e,t,n,o){var i=r.table(e).map(function(e){var r=n(e);return s.floor(t/100*r)}).getOr(t);return o(e,i),i},x=function(e,t,r,i){var a=l(e,10);return n.endsWith(e,"%")&&"table"!==o.name(t)?b(t,a,r,i):a},w=function(e){var t=y(e);return t?x(t,e,u.get,h):u.get(e)},C=function(e,t,n){return n(e)/k(e,t)},k=function(e,t){return i.has(e,t)?l(i.get(e,t),10):1},T=function(e){return a.getRaw(e,"width").fold(function(){return t.from(i.get(e,"width"))},function(e){return t.some(e)})},S=function(e,t){return e/t.pixelWidth()*100},E=function(e,t,n){if(d.test(t)){var r=d.exec(t);return parseFloat(r[1],10)}var o=c.get(e),i=l(o,10);return S(i,n)},_=function(e,t){return T(e).fold(function(){var n=c.get(e),r=l(n,10);return S(r,t)},function(n){return E(e,n,t)})},A=function(e,t){return e/100*t.pixelWidth()},N=function(e,t,n){if(p.test(t)){var r=p.exec(t);return l(r[1],10)}if(d.test(t)){var o=d.exec(t),i=parseFloat(o[1],10);return A(i,n)}var a=c.get(e);return l(a,10)},D=function(e,t){return T(e).fold(function(){var t=c.get(e);return l(t,10)},function(n){return N(e,n,t)})},R=function(e){return C(e,"rowspan",w)},P=function(n){return T(n).bind(function(n){if(f.test(n)){var r=f.exec(n);return t.some({width:e.constant(r[1]),unit:e.constant(r[3])})}return t.none()})},I=function(e,t,n){a.set(e,"width",t+n)};return{percentageBasedSizeRegex:e.constant(d),pixelBasedSizeRegex:e.constant(p),setPixelWidth:m,setPercentageWidth:g,setHeight:h,getPixelWidth:D,getPercentageWidth:_,getGenericWidth:P,setGenericWidth:I,getHeight:R,getRawWidth:T}}),i("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r){var o=function(e,n){return t.has(e,n)&&r(t.get(e,n),10)>1},i=function(e){return o(e,"colspan")},a=function(e){return o(e,"rowspan")},u=function(e,t){return r(n.get(e,t),10)};return{hasColspan:i,hasRowspan:a,minWidth:e.constant(10),minHeight:e.constant(10),getInt:u}}),i("ephox.snooker.resize.ColumnSizes",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.lookup.Blocks","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.snooker.util.Util","ephox.sugar.api.properties.Css"],function(e,t,n,r,o,i,a){var u=function(e,t,n){return a.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},c=function(e){return u(e,"width",r.getPixelWidth)},s=function(e){return u(e,"height",r.getHeight)},l=function(r,a,u,c,s){var l=n.columns(r),f=e.map(l,function(e){return e.map(a.edge)});return e.map(l,function(e,n){return e.filter(t.not(o.hasColspan)).fold(function(){var e=i.deduce(f,n);return c(e)},function(e){return u(e,s)})})},f=function(e){return e.map(function(e){return e+"px"}).getOr("")},d=function(e,t){return l(e,t,c,f)},p=function(e,t,n){return l(e,t,r.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},m=function(e,t,n){return l(e,t,r.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},g=function(r,a,u,c){var s=n.rows(r),l=e.map(s,function(e){return e.map(a.edge)});return e.map(s,function(e,n){return e.filter(t.not(o.hasRowspan)).fold(function(){var e=i.deduce(l,n);return c(e)},function(e){return u(e)})})};return{getRawWidths:d,getPixelWidths:m,getPercentageWidths:p,getPixelHeights:function(e,t){return g(e,t,r.getHeight,function(e){return e.getOrThunk(o.minHeight)})},getRawHeights:function(e,t){return g(e,t,s,f)}}}),i("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(e,t,n){var r=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=n[o]!==undefined?n[o]:0;return r};return{recalculateWidth:function(o,i){var a=n.justCells(o);return e.map(a,function(e){var n=r(e.column(),e.column()+e.colspan(),i);return{element:e.element,width:t.constant(n),colspan:e.colspan}})},recalculateHeight:function(o,i){var a=n.justCells(o);return e.map(a,function(e){var n=r(e.row(),e.row()+e.rowspan(),i);return{element:e.element,height:t.constant(n),rowspan:e.rowspan}})},matchRowHeight:function(n,r){return e.map(n.all(),function(e,n){return{element:e.element,height:t.constant(r[n])}})}}}),i("ephox.snooker.resize.TableSize",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.sugar.api.view.Width","global!Math"],function(e,t,n,r,o,i,a){var u=function(e,a){var u=parseFloat(e,10),c=i.get(a),s=function(e){return e/c*100},l=function(e){return[100-e]},f=function(){return o.minWidth()/c*100},d=function(e,t,n){var o=u+n;r.setPercentageWidth(e,o)};return{width:t.constant(u),pixelWidth:t.constant(c),getWidths:n.getPercentageWidths,getCellDelta:s,singleColumnWidth:l,minCellWidth:f,setElementWidth:r.setPercentageWidth,setTableWidth:d}},c=function(i){var u=parseInt(i,10),c=t.identity,s=function(e){return[a.max(min,e+step)-e]},l=function(t,n){var o=e.foldr(n,function(e,t){return e+t},0);r.setPixelWidth(t,o)};return{width:t.constant(u),pixelWidth:t.constant(u),getWidths:n.getPixelWidths,getCellDelta:c,singleColumnWidth:s,minCellWidth:o.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:l}},s=function(e,t){if(r.percentageBasedSizeRegex().test(t)){var n=r.percentageBasedSizeRegex().exec(t);return u(n[1],e)}if(r.pixelBasedSizeRegex().test(t)){var o=r.pixelBasedSizeRegex().exec(t);return c(o[1])}var a=i.get(e);return c(a)};return{getTableSize:function(e){return r.getRawWidth(e).fold(function(){var t=i.get(e);return c(t)},function(t){return s(e,t)})}}}),i("ephox.snooker.resize.Adjustments",["ephox.katamari.api.Arr","ephox.snooker.calc.Deltas","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Recalculations","ephox.snooker.resize.Sizes","ephox.snooker.resize.TableSize","ephox.snooker.util.CellUtils","global!Math"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e){return r.generate(e)},f=function(t){return e.foldr(t,function(e,t){return e+t},0)},d=function(e){var t=n.fromTable(e);return l(t)};return{adjustWidth:function(n,r,o,a){var c=u.getTableSize(n),s=c.getCellDelta(r),l=d(n),f=c.getWidths(l,a,c),p=t.determine(f,o,s,c),m=e.map(p,function(e,t){return e+f[t]}),g=i.recalculateWidth(l,m);e.each(g,function(e){c.setElementWidth(e.element(),e.width())}),o===l.grid().columns()-1&&c.setTableWidth(n,m,s)},adjustHeight:function(t,n,r,u){var l=d(t),p=o.getPixelHeights(l,u),m=e.map(p,function(e,t){return r===t?s.max(n+e,c.minHeight()):e}),g=i.recalculateHeight(l,m),h=i.matchRowHeight(l,m);e.each(h,function(e){a.setHeight(e.element(),e.height())}),e.each(g,function(e){a.setHeight(e.element(),e.height())});var v=f(m);a.setHeight(t,v)},adjustWidthTo:function(t,n,r){var o=u.getTableSize(t),a=l(n),c=o.getWidths(a,r,o),s=i.recalculateWidth(a,c);e.each(s,function(e){o.setElementWidth(e.element(),e.width())});var f=e.foldr(c,function(e,t){return t+e},0);s.length>0&&o.setElementWidth(t,f)}}}),i("ephox.katamari.api.Contracts",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Type","ephox.katamari.util.BagUtils","global!Error"],function(e,t,n,r,o,i){var a=function(e,t){return u(e,t,{validate:r.isFunction,label:"function"})},u=function(t,r,a){if(0===r.length)throw new i("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(i){var u=n.keys(i);e.forall(r,function(t){return e.contains(u,t)})||o.reqMessage(r,u),t(r,u);var c=e.filter(r,function(e){return!a.validate(i[e],e)});return c.length>0&&o.invalidTypeMessage(c,a.label),i}},c=function(t,n){var r=e.filter(n,function(n){return!e.contains(t,n)});r.length>0&&o.unsuppMessage(r)},s=t.noop;return{exactly:t.curry(a,c),ensure:t.curry(a,s),ensureWith:t.curry(u,s)}}),i("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(e){return{mode:e.exactly(["compare","extract","mutate","sink"]),sink:e.exactly(["element","start","stop","destroy"]),api:e.exactly(["forceDrop","drop","move","delayDrop"])}}),i("ephox.katamari.api.Namespace",[],function(){return{css:function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}}}),i("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-dragster").resolve}}),i("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e,t){return t},o=function(t,n){return e.isObject(t)&&e.isObject(n)?a(t,n):n},i=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var u=r[a];for(var c in u)u.hasOwnProperty(c)&&(i[c]=e(i[c],u[c]))}return i}},a=i(o),u=i(r);return{deepMerge:a,merge:u}}),i("ephox.sugar.api.properties.Toggler",[],function(){return function(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}}),i("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(e,t){var n=function(e,n){var r=t.get(e,n);return r===undefined||""===r?[]:r.split(" ")};return{read:n,add:function(e,r,o){var i=n(e,r),a=i.concat([o]);t.set(e,r,a.join(" "))},remove:function(r,o,i){var a=e.filter(n(r,o),function(e){return e!==i});a.length>0?t.set(r,o,a.join(" ")):t.remove(r,o)}}}),i("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(e,t){var n=function(e){return e.dom().classList!==undefined},r=function(e){return t.read(e,"class")},o=function(e,n){return t.add(e,"class",n)},i=function(e,n){return t.remove(e,"class",n)};return{get:r,add:o,remove:i,toggle:function(t,n){e.contains(r(t),n)?i(t,n):o(t,n)},supports:n}}),i("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(e,t,n){var r=function(e,t){n.supports(e)?e.dom().classList.add(t):n.add(e,t)},o=function(e){0===(n.supports(e)?e.dom().classList:n.get(e)).length&&t.remove(e,"class")},i=function(e,t){if(n.supports(e)){e.dom().classList.remove(t)}else n.remove(e,t);o(e)},a=function(e,t){return n.supports(e)?e.dom().classList.toggle(t):n.toggle(e,t)},u=function(t,r){var o=n.supports(t),i=t.dom().classList;return e(function(){o?i.remove(r):n.remove(t,r)},function(){o?i.add(r):n.add(t,r)},c(t,r))},c=function(e,t){return n.supports(e)&&e.dom().classList.contains(t)};return{add:r,remove:i,toggle:a,toggler:u,has:c}}),i("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,r){e.nextSibling(n).fold(function(){e.parent(n).each(function(e){o(e,r)})},function(e){t(e,r)})},r=function(t,n){e.firstChild(t).fold(function(){o(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},o=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:n,prepend:r,append:o,appendAt:function(n,r,i){e.child(n,i).fold(function(){o(n,r)},function(e){t(e,r)})},wrap:function(e,n){t(e,n),o(n,e)}}}),i("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){var i=0===o?n:r[o-1];t.after(i,e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),i("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t){t.dom().textContent="",e.each(n.children(t),function(e){o(e)})},o=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(e){var r=n.children(e);r.length>0&&t.before(e,r),o(e)}}}),i("ephox.dragster.detect.Blocker",["ephox.dragster.style.Styles","ephox.katamari.api.Merger","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i){return function(a){var u=t.merge({layerClass:e.resolve("blocker")},a),c=o.fromTag("div");return r.setAll(c,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),n.add(c,e.resolve("blocker")),n.add(c,u.layerClass),{element:function(){return c},destroy:function(){i.remove(c)}}}}),i("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(e,t){var n=function(t,n,r,o,i,a,u){return{target:e.constant(t),x:e.constant(n),y:e.constant(r),stop:o,prevent:i,kill:a,raw:e.constant(u)}},r=function(r,o){return function(i){if(r(i)){var a=t.fromDom(i.target),u=function(){i.stopPropagation()},c=function(){i.preventDefault()},s=e.compose(c,u),l=n(a,i.clientX,i.clientY,u,c,s,i);o(l)}}},o=function(t,n,o,a,u){var c=r(o,a);return t.dom().addEventListener(n,c,u),{unbind:e.curry(i,t,n,c,u)}},i=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};return{bind:function(e,t,n,r){return o(e,t,n,r,!1)},capture:function(e,t,n,r){return o(e,t,n,r,!0)}}}),i("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(e,t){var n=e.constant(!0);return{bind:function(e,r,o){return t.bind(e,r,n,o)},capture:function(e,r,o){return t.capture(e,r,n,o)}}}),i("ephox.dragster.api.MouseDrag",["ephox.dragster.api.DragApis","ephox.dragster.detect.Blocker","ephox.katamari.api.Option","ephox.sugar.api.view.Position","ephox.sugar.api.events.DomEvent","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i,a){var u=function(e,t){return r(t.left()-e.left(),t.top()-e.top())},c=function(e){return n.some(r(e.x(),e.y()))},s=function(e,t){e.mutate(t.left(),t.top())},l=function(n,r){var u=t(r),c=o.bind(u.element(),"mousedown",n.forceDrop),s=o.bind(u.element(),"mouseup",n.drop),l=o.bind(u.element(),"mousemove",n.move),f=o.bind(u.element(),"mouseout",n.delayDrop),d=function(){u.destroy(),s.unbind(),l.unbind(),f.unbind(),c.unbind()},p=function(e){i.append(e,u.element())},m=function(){a.remove(u.element())};return e.sink({element:u.element,start:p,stop:m,destroy:d})};return e.mode({compare:u,extract:c,sink:l,mutate:s})}),i("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t,n){return function(){var r=e.none(),o=function(){r=e.none()},i=function(t,n){var o=r.map(function(e){return t.compare(e,n)});return r=e.some(n),o},a=function(e,t){t.extract(e).each(function(e){i(t,e).each(function(e){u.trigger.move(e)})})},u=n.create({move:t(["info"])});return{onEvent:a,reset:o,events:u.registry}}}),i("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(e){return function(){return{onEvent:function(){},reset:e.noop}}}),i("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],function(e,t){return function(){var n=t(),r=e(),o=n,i=function(){o.reset(),o=r},a=function(){o.reset(),o=n},u=function(e,t){o.onEvent(e,t)};return{on:i,off:a,isOn:function(){return o===r},onEvent:u,events:r.events}}}),a("global!clearTimeout",clearTimeout),a("global!setTimeout",setTimeout),i("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,t){return{adaptable:function(n,r){var o=null,i=null;return{cancel:function(){null!==o&&(e(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){n.apply(null,i),o=null,i=null},r))}}},first:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=t(function(){n.apply(null,e),o=null,e=null},r))}}},last:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var i=arguments;null!==o&&e(o),o=t(function(){n.apply(null,i),o=null,i=null},r)}}}}}),i("ephox.dragster.core.Dragging",["ephox.dragster.api.DragApis","ephox.dragster.detect.Movement","ephox.katamari.api.Throttler","ephox.porkbun.Event","ephox.porkbun.Events","global!Array"],function(e,t,n,r,o,i){return{setup:function(a,u,c){var s=!1,l=o.create({start:r([]),stop:r([])}),f=t(),d=function(){b.stop(),f.isOn()&&(f.off(),l.trigger.stop())},p=n.last(d,200),m=function(e){b.start(e),f.on(),l.trigger.start()},g=function(e){p.cancel(),f.onEvent(e,u)};f.events.move.bind(function(e){u.mutate(a,e.info())});var h=function(){s=!0},v=function(){s=!1},y=function(e){return function(){var t=i.prototype.slice.call(arguments,0);if(s)return e.apply(null,t)}},b=u.sink(e.api({forceDrop:d,drop:y(d),move:y(g),delayDrop:y(p.throttle)}),c),x=function(){b.destroy()};return{element:b.element,go:m,on:h,off:v,destroy:x,events:l.registry}}}}),i("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(e,t){return{transform:function(n,r){var o=r!==undefined?r:{},i=o.mode!==undefined?o.mode:e;return t.setup(n,i,r)}}}),i("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(e,t){return function(){var n=t.create({drag:e(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}}}),i("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(e,t,n,r){return function(){var o=n.create({drag:t(["xDelta","yDelta","target"])}),i=e.none(),a=r();return a.events.drag.bind(function(e){i.each(function(t){o.trigger.drag(e.xDelta(),e.yDelta(),t)})}),{assign:function(t){i=e.some(t)},get:function(){return i},mutate:a.mutate,events:o.registry}}}),i("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(e,t,n){return{col:function(r,o,i,a,u){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",left:o-a/2+"px",top:i+"px",height:u+"px",width:a+"px"}),e.set(c,"data-column",r),c},row:function(r,o,i,a,u){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",left:o+"px",top:i-u/2+"px",height:u+"px",width:a+"px"}),e.set(c,"data-row",r),c}}}),i("ephox.snooker.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-snooker").resolve}}),i("ephox.snooker.resize.Bars",["ephox.katamari.api.Arr","ephox.snooker.lookup.Blocks","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.Bar","ephox.snooker.style.Styles","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=i.resolve("resizer-bar"),g=i.resolve("resizer-rows"),h=i.resolve("resizer-cols"),v=7,y=function(t){var n=l.descendants(t.parent(),"."+m);e.each(n,u.remove)},b=function(t,n,r){var o=t.origin();e.each(n,function(e){e.each(function(e){var n=r(o,e);c.add(n,m),a.append(t.parent(),n)})})},x=function(e,t,n,r){b(e,t,function(e,t){var i=o.col(t.col(),t.x()-e.left(),n.top()-e.top(),v,r);return c.add(i,h),i})},w=function(e,t,n,r){b(e,t,function(e,t){var i=o.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,v);return c.add(i,g),i})},C=function(e,t,n,r,o,i){var a=d.absolute(t),u=n.length>0?o.positions(n,t):[];w(e,u,a,p.getOuter(t));var c=r.length>0?i.positions(r,t):[];x(e,c,a,f.getOuter(t))},k=function(e,o,i,a){y(e,o);var u=n.fromTable(o),c=r.generate(u),s=t.rows(c),l=t.columns(c);C(e,o,s,l,i,a)},T=function(t,n){var r=l.descendants(t.parent(),"."+m);e.each(r,n)};return{refresh:k,hide:function(e){T(e,function(e){s.set(e,"display","none")})},show:function(e){T(e,function(e){s.set(e,"display","block")})},destroy:y,isRowBar:function(e){return c.has(e,g)},isColBar:function(e){return c.has(e,h)}}}),i("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),i("ephox.snooker.resize.BarManager",["ephox.dragster.api.Dragger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.BarMutation","ephox.snooker.resize.Bars","ephox.snooker.style.Styles","ephox.snooker.util.CellUtils","ephox.sugar.api.dom.Compare","ephox.sugar.api.events.DomEvent","ephox.sugar.api.node.Body","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorExists","ephox.sugar.api.search.SelectorFind","global!parseInt"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y){var b=u.resolve("resizer-bar-dragging");return function(u,x,w){var C=i(),k=e.transform(C,{}),T=n.none(),S=function(e,t){return n.from(p.get(e,t))};C.events.drag.bind(function(e){S(e.target(),"data-row").each(function(){var t=c.getInt(e.target(),"top");g.set(e.target(),"top",t+e.yDelta()+"px")}),S(e.target(),"data-column").each(function(){var t=c.getInt(e.target(),"left");g.set(e.target(),"left",t+e.xDelta()+"px")})});var E=function(e,t){return c.getInt(e,t)-y(p.get(e,"data-initial-"+t),10)};k.events.stop.bind(function(){C.get().each(function(e){T.each(function(t){S(e,"data-row").each(function(n){var r=E(e,"top");p.remove(e,"data-initial-top"),O.trigger.adjustHeight(t,r,y(n,10))}),S(e,"data-column").each(function(n){var r=E(e,"left");p.remove(e,"data-initial-left"),O.trigger.adjustWidth(t,r,y(n,10))}),a.refresh(u,t,w,x)})})});var _=function(e,t){O.trigger.startAdjust(),C.assign(e),p.set(e,"data-initial-"+t,y(g.get(e,t),10)),m.add(e,b),g.set(e,"opacity","0.2"),k.go(u.parent())},A=l.bind(u.parent(),"mousedown",function(e){a.isRowBar(e.target())&&_(e.target(),"top"),a.isColBar(e.target())&&_(e.target(),"left")}),N=function(e){return s.eq(e,u.view())},D=l.bind(u.view(),"mouseover",function(e){"table"===d.name(e.target())||h.ancestor(e.target(),"table",N)?(T="table"===d.name(e.target())?n.some(e.target()):v.ancestor(e.target(),"table",N),T.each(function(e){a.refresh(u,e,w,x)})):f.inBody(e.target())&&a.destroy(u)}),R=function(){A.unbind(),D.unbind(),P.unbind(),k.destroy(),a.destroy(u)},P=l.bind(u.view(),"dragstart",function(e){e.raw().preventDefault()}),I=function(e){a.refresh(u,e,w,x)},O=o.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:R,refresh:I,on:k.on,off:k.off,hideBars:t.curry(a.hide,u),showBars:t.curry(a.show,u),events:O.registry}}}),i("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(e,t,n,r,o){return function(i,a){var u=o.height,c=r(i,a,u),s=t.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});return c.events.adjustHeight.bind(function(e){s.trigger.beforeResize(e.table());var t=u.delta(e.delta(),e.table());n.adjustHeight(e.table(),t,e.row(),u),s.trigger.afterResize(e.table())}),c.events.startAdjust.bind(function(){s.trigger.startDrag()}),c.events.adjustWidth.bind(function(e){s.trigger.beforeResize(e.table())
;var t=a.delta(e.delta(),e.table());n.adjustWidth(e.table(),t,e.column(),a),s.trigger.afterResize(e.table())}),{on:c.on,off:c.off,hideBars:c.hideBars,showBars:c.showBars,destroy:c.destroy,events:s.registry}}}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("ephox.snooker.api.CopySelected",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Struct","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=n.immutable("minRow","minCol","maxRow","maxCol"),p=function(e,n){var r=e.grid().columns(),o=e.grid().rows(),i=o,a=r,u=0,c=0;return t.each(e.access(),function(e){if(n(e)){var t=e.row(),r=t+e.rowspan()-1,o=e.column(),s=o+e.colspan()-1;t<i?i=t:r>u&&(u=r),o<a?a=o:s>c&&(c=s)}}),d(i,a,u,c)},m=function(e,t,n){var r=e[n].element(),o=c.fromTag("td");s.append(o,c.fromTag("br")),(t?s.append:s.prepend)(r,o)},g=function(e,t,n,r){for(var i=t.grid().columns(),a=t.grid().rows(),u=0;u<a;u++)for(var c=!1,s=0;s<i;s++)if(!(u<n.minRow()||u>n.maxRow()||s<n.minCol()||s>n.maxCol())){var l=o.getAt(t,u,s).filter(r).isNone();l?m(e,c,u):c=!0}},h=function(t,n){var r=e.filter(i.firstLayer(t,"tr"),function(e){return 0===e.dom().childElementCount});e.each(r,l.remove),n.minCol()!==n.maxCol()&&n.minRow()!==n.maxRow()||e.each(i.firstLayer(t,"th,td"),function(e){a.remove(e,"rowspan"),a.remove(e,"colspan")}),a.remove(t,"width"),a.remove(t,"height"),u.remove(t,"width"),u.remove(t,"height")};return{extract:function(t,n){var a=function(e){return f.is(e.element(),n)},u=r.fromTable(t),c=o.generate(u),s=p(c,a),d="th:not("+n+"),td:not("+n+")",m=i.filterFirstLayer(t,"th,td",function(e){return f.is(e,d)});return e.each(m,l.remove),g(u,c,s,a),h(t,s),t}}}),i("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},u=function(e){return a(e,!1)},c=function(e){return a(e,!0)},s=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:u,shallowAs:s,deep:c,copy:function(e,t){var n=s(e,t),o=i.children(c(e));return r.append(n,o),n},mutate:function(e,t){var a=s(e,t);n.before(e,a);var u=i.children(e);return r.append(a,u),o.remove(e),a}}}),i("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,o){var i=function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return s(e).getOr("")},a=function(e){try{return u(e)}catch(e){return t.none()}},u=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},c=e.detect().browser,s=c.isIE()&&10===c.version.major?a:u;return{get:i,getOption:s,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),i("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),i("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e){return"img"===t.name(e)?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},i="\xa0",a=function(e){return n.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf(i)>-1}).isSome()},u=["img","br"];return{getEnd:o,isEnd:function(e,t){return o(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(n){return a(n)||e.contains(u,t.name(n))}}}),i("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(t,r){var o=function(t){for(var i=n.children(t),a=i.length-1;a>=0;a--){var u=i[a];if(r(u))return e.some(u);var c=o(u);if(c.isSome())return c}return e.none()};return o(t)};return{first:function(e){return t.descendant(e,r.isCursorPosition)},last:function(e){return o(e,r.isCursorPosition)}}}),i("ephox.snooker.api.TableFill",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=function(){var e=i.fromTag("td");return r.append(e,i.fromTag("br")),e},p=function(e,n,r){var i=o.copy(e,n);return t.each(r,function(e,t){null===e?u.remove(i,t):u.set(i,t,e)}),i},m=function(e){return e},g=function(e){return function(){return i.fromTag("tr",e.dom())}},h=function(t,i,a){return f.first(t).map(function(u){var c=a.join(","),l=s.ancestors(u,c,function(e){return n.eq(e,t)});return e.foldr(l,function(e,t){var n=o.shallow(t);return r.append(e,n),n},i)}).getOr(i)};return{cellOperations:function(e,t,n){var o=function(t){var o=l.owner(t.element()),u=i.fromTag(a.name(t.element()),o.dom()),s=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=s.length>0?h(t.element(),u,s):u;return r.append(f,i.fromTag("br")),c.copy(t.element(),u),c.remove(u,"height"),1!==t.colspan()&&c.remove(t.element(),"width"),e(t.element(),u),u};return{row:g(t),cell:o,replace:p,gap:d}},paste:function(e){return{row:g(e),cell:d,replace:m,gap:d}}}}),i("ephox.sugar.api.node.Elements",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r){return{fromHtml:function(e,o){var i=o||r,a=i.createElement("div");return a.innerHTML=e,n.children(t.fromDom(a))},fromTags:function(n,r){return e.map(n,function(e){return t.fromTag(e,r)})},fromText:function(n,r){return e.map(n,function(e){return t.fromText(e,r)})},fromDom:function(n){return e.map(n,t.fromDom)}}}),i("ephox.sugar.api.properties.Html",["ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e){return e.dom().innerHTML};return{get:a,set:function(a,u){var c=i.owner(a),s=c.dom(),l=e.fromDom(s.createDocumentFragment()),f=t.fromHtml(u,s);r.append(l,f),o.empty(a),n.append(a,l)},getOuter:function(t){var r=e.fromTag("div"),o=e.fromDom(t.dom().cloneNode(!0));return n.append(r,o),a(r)}}}),i("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]}),i("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.Compare","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h){return function(){var v=function(e){return a.fromDom(e.dom().cloneNode(!1))},y=function(n){return!!s.isElement(n)&&("body"===s.name(n)||t.contains(e,s.name(n)))},b=function(e){return!!s.isElement(e)&&t.contains(["br","img","hr","input"],s.name(e))},x=function(e,t){return e.dom().compareDocumentPosition(t.dom())},w=function(e,t){var n=r.clone(e);r.setAll(t,n)};return{up:n.constant({selector:m.ancestor,closest:m.closest,predicate:f.ancestor,all:h.parents}),down:n.constant({selector:p.descendants,predicate:l.descendants}),styles:n.constant({get:i.get,getRaw:i.getRaw,set:i.set,remove:i.remove}),attrs:n.constant({get:r.get,set:r.set,remove:r.remove,copyTo:w}),insert:n.constant({before:u.before,after:u.after,afterAll:c.after,append:u.append,appendAll:c.append,prepend:u.prepend,wrap:u.wrap}),remove:n.constant({unwrap:d.unwrap,remove:d.remove}),create:n.constant({nu:a.fromTag,clone:v,text:a.fromText}),query:n.constant({comparePosition:x,prevSibling:h.prevSibling,nextSibling:h.nextSibling}),property:n.constant({children:h.children,name:s.name,parent:h.parent,isText:s.isText,isComment:s.isComment,isElement:s.isElement,getText:g.get,setText:g.set,isBoundary:y,isEmptyTag:b}),eq:o.eq,is:o.is}}}),i("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n,r){var o=r.immutable("left","right"),i=function(n,r,o){var i=n.property().children(r);return e.findIndex(i,t.curry(n.eq,o)).map(function(e){return{before:t.constant(i.slice(0,e)),after:t.constant(i.slice(e+1))}})},a=function(e,t,n){return i(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),o(t,r)})};return{breakToLeft:function(e,t,n){return i(e,t,n).map(function(r){var i=e.create().clone(t);return e.insert().appendAll(i,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,i),o(i,t)})},breakToRight:a,breakPath:function(e,t,o,i){var a=r.immutable("first","second","splits"),u=function(t,r,c){var s=a(t,n.none(),c);return o(t)?a(t,r,c):e.property().parent(t).bind(function(r){return i(e,r,t).map(function(e){var t=[{first:e.left,second:e.right}],i=o(r)?r:e.left();return u(i,n.some(e.right()),c.concat(t))}).getOr(s)})};return u(t,n.none(),[])}}}),i("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t,n){var r=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},o=function(t,n,r,o){var a=n(t,r);return e.foldr(o,function(e,r){var o=n(t,r);return i(t,e,o)},a)},i=function(e,n,r){return n.bind(function(n){return r.filter(t.curry(e.eq,n))})};return{oneAll:function(e,t,i){return i.length>0?r(e,t,i,o):n.none()}}}),i("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(e,t,n,r){var o=function(e,n){return t.curry(e.eq,n)},i=function(t,i,a,u){var c=t.property().children(i);if(t.eq(i,a[0]))return n.some([a[0]]);if(t.eq(i,u[0]))return n.some([u[0]]);var s=function(n){var r=e.reverse(n),a=e.findIndex(r,o(t,i)).getOr(-1),u=a<r.length-1?r[a+1]:r[a];return e.findIndex(c,o(t,u))},l=s(a),f=s(u);return l.bind(function(e){return f.map(function(t){var n=r.min(e,t),o=r.max(e,t);return c.slice(n,o+1)})})},a=function(n,r,i,a){var u=a!==undefined?a:t.constant(!1),c=[r].concat(n.up().all(r)),s=[i].concat(n.up().all(i)),l=function(t){return e.findIndex(t,u).fold(function(){return t},function(e){return t.slice(0,e+1)})},f=l(c),d=l(s),p=e.find(f,function(t){return e.exists(d,o(n,t))});return{firstpath:t.constant(f),secondpath:t.constant(d),shared:t.constant(p)}};return{subset:function(e,t,n){var r=a(e,t,n);return r.shared().bind(function(t){return i(e,t,r.firstpath(),r.secondpath())})},ancestors:a}}),i("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(e,t,n){return{sharedOne:function(e,n,r){return t.oneAll(e,n,r)},subset:function(e,t,r){return n.subset(e,t,r)},ancestors:function(e,t,r,o){return n.ancestors(e,t,r,o)},breakToLeft:function(t,n,r){return e.breakToLeft(t,n,r)},breakToRight:function(t,n,r){return e.breakToRight(t,n,r)},breakPath:function(t,n,r,o){return e.breakPath(t,n,r,o)}}}),i("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(e,t){var n=e();return{sharedOne:function(e,r){return t.sharedOne(n,function(t,n){return e(n)},r)},subset:function(e,r){return t.subset(n,e,r)},ancestors:function(e,r,o){return t.ancestors(n,e,r,o)},breakToLeft:function(e,r){return t.breakToLeft(n,e,r)},breakToRight:function(e,r){return t.breakToRight(n,e,r)},breakPath:function(e,r,o){return t.breakPath(n,e,r,function(e,t,n){return o(t,n)})}}}),i("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(e,t,n){var r=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},o=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};return{inSelection:r,isWithin:o,isRectangular:function(r,i){for(var a=!0,u=e.curry(o,i),c=i.startRow();c<=i.finishRow();c++)for(var s=i.startCol();s<=i.finishCol();s++)a=a&&n.getAt(r,c,s).exists(u);return a?t.some(i):t.none()}}}),i("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(e,t,n,r,o){var i=function(t,n){return e.bounds(o.min(t.row(),n.row()),o.min(t.column(),n.column()),o.max(t.row()+t.rowspan()-1,n.row()+n.rowspan()-1),o.max(t.column()+t.colspan()-1,n.column()+n.colspan()-1))},a=function(e,n,o){var a=t.findItem(e,n,r.eq),u=t.findItem(e,o,r.eq);return a.bind(function(e){return u.map(function(t){return i(e,t)})})};return{getAnyBox:a,getBox:function(e,t,r){return a(e,t,r).bind(function(t){return n.isRectangular(e,t)})}}}),i("ephox.snooker.selection.CellFinder",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,i){return{moveBy:function(e,t,r,o){return n.findItem(e,t,i.eq).bind(function(t){var i=r>0?t.row()+t.rowspan()-1:t.row(),a=o>0?t.column()+t.colspan()-1:t.column();return n.getAt(e,i+r,a+o).map(function(e){return e.element()})})},intercepts:function(i,a,u){return o.getAnyBox(i,a,u).map(function(o){var a=n.filterItems(i,t.curry(r.inSelection,o));return e.map(a,function(e){return e.element()})})},parentCell:function(e,t){var r=function(e,t){return i.contains(t,e)};return n.findItem(e,t,r).bind(function(e){return e.element()})}}}),i("ephox.snooker.api.TablePositions",["ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellFinder","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o,i){var a=function(t,n,o){return e.table(t).bind(function(e){var i=l(e);return r.moveBy(i,t,n,o)})},u=function(e,t,n){var o=l(e);return r.intercepts(o,t,n)},c=function(e,t,n,o,a){var u=l(e),c=i.eq(e,n)?t:r.parentCell(u,t),s=i.eq(e,a)?o:r.parentCell(u,o);return r.intercepts(u,c,s)},s=function(e,t,n){var r=l(e);return o.getBox(r,t,n)},l=function(e){var r=t.fromTable(e);return n.generate(r)};return{moveBy:a,intercepts:u,nestedIntercepts:c,getBox:s}}),i("ephox.darwin.selection.CellSelection",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.robin.api.dom.DomParent","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o,i,a,u,c){var s=function(e){return u.ancestor(e,"table")},l=function(e,t,a){return i.eq(e,t)?n.some([e]):s(e,a).bind(function(n){return s(t,a).bind(function(c){return i.eq(n,c)?o.intercepts(n,e,t):i.contains(n,c)?o.nestedIntercepts(n,e,n,t,c):i.contains(c,n)?o.nestedIntercepts(c,e,n,t,c):r.ancestors(e,t).shared().bind(function(r){return u.closest(r,"table",a).bind(function(r){return o.nestedIntercepts(r,e,n,t,c)})})})})},f=function(e,t){var r=a.descendants(e,t);return r.length>0?n.some(r):n.none()},d=function(t,n){return e.find(t,function(e){return c.is(e,n)})},p=function(e,n,o){return u.descendant(e,n).bind(function(n){return u.descendant(e,o).bind(function(e){return r.sharedOne(s,[n,e]).map(function(r){return{first:t.constant(n),last:t.constant(e),table:t.constant(r)}})})})},m=function(e,n){return u.ancestor(e,"table").bind(function(r){return u.descendant(r,n).bind(function(n){return l(n,e).map(function(r){return{boxes:t.constant(r),start:t.constant(n),finish:t.constant(e)}})})})};return{identify:l,retrieve:f,shiftSelection:function(e,t,n,r,i){return d(e,i).bind(function(e){return o.moveBy(e,t,n).bind(function(e){return m(e,r)})})},getEdges:p}}),i("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o){return{retrieve:function(t,n){return e.retrieve(t,n)},retrieveBox:function(i,a,u){return e.getEdges(i,a,u).bind(function(e){var a=function(e){return r.eq(i,e)},u=o.ancestor(e.first(),"thead,tfoot,tbody,table",a),c=o.ancestor(e.last(),"thead,tfoot,tbody,table",a);return u.bind(function(o){return c.bind(function(i){return r.eq(o,i)?n.getBox(e.table(),e.first(),e.last()):t.none()})})})}}}),i("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(e){var t="data-mce-selected",n="td["+t+"],th["+t+"]",r="["+t+"]",o="data-mce-first-selected",i="td["+o+"],th["+o+"]",a="data-mce-last-selected",u="td["+a+"],th["+a+"]";return{selected:e.constant(t),selectedSelector:e.constant(n),attributeSelector:e.constant(r),firstSelected:e.constant(o),firstSelectedSelector:e.constant(i),lastSelected:e.constant(a),lastSelectedSelector:e.constant(u)}}),i("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var u=[],c={};return e.each(a,function(s,l){var f=t.keys(s);if(1!==f.length)throw new o("one and only one name per case");var d=f[0],p=s[d];if(c[d]!==undefined)throw new o("duplicate key detected:"+d);if("cata"===d)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(p))throw new o("case arguments must be an array");u.push(d),c[d]=function(){var n=arguments.length;if(n!==p.length)throw new o("Wrong number of arguments to case "+d+". Expected "+p.length+" ("+p+"), got "+n);for(var c=new r(n),s=0;s<c.length;s++)c[s]=arguments[s];var f=function(n){var r=t.keys(n);if(u.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+r.join(","));if(!e.forall(u,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+u.join(", "));return n[d].apply(null,c)};return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[l].apply(null,c)},match:f,log:function(e){i.log(e,{constructors:u,constructor:d,params:c})}}}}),c}}}),i("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(e,t,n,r){return e.fold(t,n,r)},none:t.none,multiple:t.multiple,single:t.single}}),i("tinymce.plugins.table.queries.CellOperations",["ephox.darwin.api.TableSelection","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,i,a){var u=function(e,t){return a.cata(t.get(),n.constant([]),n.identity,n.constant([e]))},c=function(e,n){var i=function(e){return o.has(e,"rowspan")&&parseInt(o.get(e,"rowspan"),10)>1||o.has(e,"colspan")&&parseInt(o.get(e,"colspan"),10)>1},a=u(e,n);return a.length>0&&t.forall(a,i)?r.some(a):r.none()};return{mergable:function(t,o){return a.cata(o.get(),r.none,function(o){return 0===o.length?r.none():e.retrieveBox(t,i.firstSelectedSelector(),i.lastSelectedSelector()).bind(function(e){return o.length>1?r.some({bounds:n.constant(e),cells:n.constant(o)}):r.none()})},r.none)},unmergable:c,selection:u}}),i("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(e,t,n,r){var o=function(n){return{element:e.constant(n),mergable:t.none,unmergable:t.none,selection:e.constant([n])}},i=function(t,n,o){return{element:e.constant(o),mergable:e.constant(r.mergable(n,t)),unmergable:e.constant(r.unmergable(o,t)),selection:e.constant(r.selection(o,t))}},a=function(e){return o(e)},u=n.immutable("element","clipboard","generators");return{noMenu:o,forMenu:i,notCell:a,paste:u,pasteRows:function(n,o,i,a,u){return{element:e.constant(i),mergable:t.none,unmergable:t.none,selection:e.constant(r.selection(i,n)),clipboard:e.constant(a),generators:e.constant(u)}}}}),i("tinymce.plugins.table.actions.Clipboard",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopySelected","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Html","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=function(e){return i.table(e[0]).map(a.deep).map(function(e){return[r.extract(e,d.attributeSelector())]})};return{registerEvents:function(r,a,d,g){r.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault(),m(t).each(function(t){n.content=e.map(t,l.getOuter).join("")})};!0===n.selection&&p.cata(a.get(),t.noop,r,t.noop)}),r.on("BeforeSetContent",function(t){if(!0===t.selection&&!0===t.paste){n.from(r.dom.getParent(r.selection.getStart(),"th,td")).each(function(n){var a=u.fromDom(n);i.table(a).bind(function(n){var i=e.filter(c.fromHtml(t.content),function(e){return"meta"!==s.name(e)});if(1===i.length&&"table"===s.name(i[0])){t.preventDefault();var l=u.fromDom(r.getDoc()),p=o.paste(l),m=f.paste(a,i[0],p);d.pasteCells(n,m).each(function(e){r.selection.setRng(e),r.focus(),g.clear(n)})}})})}})}}}),i("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll"],function(e,t,n,r,o){var i=function(){return n.fromTag("table")},a=function(){return n.fromTag("tbody")},u=function(){return n.fromTag("tr")},c=function(){return n.fromTag("th")},s=function(){return n.fromTag("td")};return{render:function(l,f,d,p){var m=i();t.setAll(m,{"border-collapse":"collapse",width:"100%"}),e.set(m,"border","1");var g=a();r.append(m,g);for(var h=[],v=0;v<l;v++){for(var y=u(),b=0;b<f;b++){var x=v<d||b<p?c():s();b<p&&e.set(x,"scope","row"),v<d&&e.set(x,"scope","col"),r.append(x,n.fromTag("br")),t.set(x,"width",100/f+"%"),r.append(y,x)}h.push(y)}return o.append(g,h),m}}}),i("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(e){return{render:e.render}}),i("tinymce.plugins.table.actions.InsertTable",["ephox.snooker.api.TableRender","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Html"],function(e,t,n){return{insert:function(r,o,i){var a,u=e.render(i,o,0,0);t.set(u,"id","__mce");var c=n.getOuter(u);return r.insertContent(c),a=r.dom.get("__mce"),r.dom.setAttrib(a,"id",null),r.$("tr",a).each(function(e,t){r.fire("newrow",{node:t}),r.$("th,td",t).each(function(e,t){r.fire("newcell",{node:t})})}),r.dom.setAttribs(a,r.settings.table_default_attributes||{}),r.dom.setStyles(a,r.settings.table_default_styles||{}),a}}}),i("ephox.snooker.api.CellMutations",["ephox.snooker.resize.Sizes"],function(e){return{halve:function(t,n){e.getGenericWidth(t).each(function(r){var o=r.width()/2;e.setGenericWidth(t,o,r.unit()),e.setGenericWidth(n,o,r.unit())})}}}),i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),i("ephox.snooker.api.Generators",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Cell","ephox.katamari.api.Contracts","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,t,n,r,o,i,a,u){var c=function(e){var n=i.has(e,"colspan")?u(i.get(e,"colspan"),10):1,r=i.has(e,"rowspan")?u(i.get(e,"rowspan"),10):1;return{element:t.constant(e),colspan:t.constant(n),rowspan:t.constant(r)}},s=function(e,t){d(e);var o=r(n.none()),i=t!==undefined?t:c,a=function(t){return e.cell(t)},u=function(e){var t=i(e);return a(t)},s=function(e){var t=u(e);return o.get().isNone()&&o.set(n.some(t)),l=n.some({item:e,replacement:t}),t},l=n.none();return{getOrInit:function(e,t){return l.fold(function(){return s(e)},function(n){return t(e,n.item)?n.replacement:s(e)})},cursor:o.get}},l=function(t,o){return function(i){var a=r(n.none());d(i);var u=[],c=function(t,n){return e.find(u,function(e){return n(e.item,t)})},s=function(e){var r=i.replace(e,o,{scope:t});return u.push({item:e,sub:r}),a.get().isNone()&&a.set(n.some(r)),r};return{replaceOrInit:function(e,t){return c(e,t).fold(function(){return s(e)},function(n){return t(e,n.item)?n.sub:s(e)})},cursor:a.get}}},f=function(e){d(e);var o=r(n.none());return{combine:function(r){return o.get().isNone()&&o.set(n.some(r)),function(){var n=e.cell({element:t.constant(r),colspan:t.constant(1),rowspan:t.constant(1)});return a.remove(n,"width"),a.remove(r,"width"),n}},cursor:o.get}},d=o.exactly(["cell","row","replace","gap"]);return{modification:s,transform:l,merging:f}}),i("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(e){var t=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n=function(t,n){var r=t.property().name(n);return e.contains(["ol","ul"],r)},r=function(n,r){var o=n.property().name(r);return e.contains(t,o)},o=function(t,n){var r=t.property().name(n);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)},i=function(t,n){var r=t.property().name(n);return e.contains(["h1","h2","h3","h4","h5","h6"],r)},a=function(t,n){return e.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(n))},u=function(t,n){return e.contains(["br","img","hr","input"],t.property().name(n))};return{isBlock:r,isList:n,isFormatting:o,isHeading:i,isContainer:a,isEmptyTag:u,isFrame:function(e,t){return"iframe"===e.property().name(t)},isInline:function(e,t){return!(r(e,t)||u(e,t))&&"li"!==e.property().name(t)}}}),i("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(e,t){var n=e();return{isBlock:function(e){return t.isBlock(n,e)},isList:function(e){return t.isList(n,e)},isFormatting:function(e){return t.isFormatting(n,e)},isHeading:function(e){return t.isHeading(n,e)},isContainer:function(e){return t.isContainer(n,e)},isEmptyTag:function(e){return t.isEmptyTag(n,e)},isFrame:function(e){return t.isFrame(n,e)},isInline:function(e){return t.isInline(n,e)}}}),i("ephox.snooker.api.TableContent",["ephox.katamari.api.Arr","ephox.robin.api.dom.DomStructure","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n,r,o,i,a,u,c,s,l){return{merge:function(f){var d=function(e){return"br"===a.name(e)},p=function(t){return e.forall(t,function(e){return d(e)||a.isText(e)&&0===u.get(e).trim().length})},m=function(e){return"li"===a.name(e)||c.ancestor(e,t.isList).isSome()},g=function(e){return s.nextSibling(e).map(function(e){return!!t.isBlock(e)||(t.isEmptyTag(e)?"img"!==a.name(e):void 0)}).getOr(!1)},h=function(e){return l.last(e).bind(function(r){var o=g(r);return s.parent(r).map(function(a){return!0===o||m(a)||d(r)||t.isBlock(a)&&!n.eq(e,a)?[]:[i.fromTag("br")]})}).getOr([])},v=function(){var t=e.bind(f,function(e){var t=s.children(e);return p(t)?[]:t.concat(h(e))});return 0===t.length?[i.fromTag("br")]:t},y=v();o.empty(f[0]),r.append(f[0],y)}}}),i("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(e,t){var n=function(e,t,n){var r=e.cells(),i=r.slice(0,t),a=r.slice(t),u=i.concat([n]).concat(a);return o(e,u)},r=function(e,t,n){e.cells()[t]=n},o=function(e,n){return t.rowcells(n,e.section())},i=function(n,r){var o=n.cells(),i=e.map(o,r);return t.rowcells(i,n.section())},a=function(e,t){return e.cells()[t]};return{addCell:n,setCells:o,mutateCell:r,getCell:a,getCellElement:function(e,t){return a(e,t).element()},mapCells:i,cellLength:function(e){return e.cells().length}}}),i("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(t,r){return e.map(t,function(e){return n.getCell(e,r)})},o=function(e,t){return e[t]},i=function(t,n){if(0===t.length)return 0;var r=t[0];return e.findIndex(t,function(e){return!n(r.element(),e.element())}).fold(function(){return t.length},function(e){return e})};return{subgrid:function(e,n,a,u){var c=o(e,n).cells().slice(a),s=i(c,u),l=r(e,a).slice(n),f=i(l,u);return{colspan:t.constant(s),rowspan:t.constant(f)}}}}),i("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(e,t,n,r){return{toDetails:function(r,o){var i=e.map(r,function(t){return e.map(t.cells(),function(){return!1})}),a=function(e,t,n,r){for(var o=e;o<e+n;o++)for(var a=t;a<t+r;a++)i[o][a]=!0};return e.map(r,function(u,c){var s=e.bind(u.cells(),function(e,u){if(!1===i[c][u]){var s=n.subgrid(r,c,u,o);return a(c,u,s.rowspan(),s.colspan()),[t.detailnew(e.element(),s.rowspan(),s.colspan(),e.isNew())]}return[]});return t.rowdetails(s,u.section())})},toGrid:function(e,n,o){for(var i=[],a=0;a<e.grid().rows();a++){for(var u=[],c=0;c<e.grid().columns();c++){var s=r.getAt(e,a,c).map(function(e){return t.elementnew(e.element(),o)}).getOrThunk(function(){return t.elementnew(n.gap(),!0)});u.push(s)}var l=t.rowcells(u,e.all()[a].section());i.push(l)}return i}}}),i("ephox.snooker.operate.Redraw",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e,t,r,o){r===o?n.remove(e,t):n.set(e,t,r)};return{render:function(n,u){var f=[],d=[],p=function(t,u){var p=c.child(n,u).getOrThunk(function(){var e=r.fromTag(u,s.owner(n).dom());return o.append(n,e),e});a.empty(p);var m=e.map(t,function(t){t.isNew()&&f.push(t.element());var n=t.element();return a.empty(n),e.each(t.cells(),function(e){e.isNew()&&d.push(e.element()),l(e.element(),"colspan",e.colspan(),1),l(e.element(),"rowspan",e.rowspan(),1),o.append(n,e.element())}),n});i.append(p,m)},m=function(e){c.child(n,e).bind(a.remove)},g=function(e,t){e.length>0?p(e,t):m(t)},h=[],v=[],y=[];return e.each(u,function(e){switch(e.section()){case"thead":h.push(e);break;case"tbody":v.push(e);break;case"tfoot":y.push(e)}}),g(h,"thead"),g(v,"tbody"),g(y,"tfoot"),{newRows:t.constant(f),newCells:t.constant(d)}},copy:function(t){return e.map(t,function(t){var n=u.shallow(t.element());return e.each(t.cells(),function(e){var t=u.deep(e.element());l(t,"colspan",e.colspan(),1),l(t,"rowspan",e.rowspan(),1),o.append(n,t)}),n})}}}),
i("ephox.snooker.model.RunOperation",["ephox.katamari.api.Arr","ephox.katamari.api.Merger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw","ephox.snooker.resize.BarPositions","ephox.snooker.resize.Bars","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){var g=function(e,t){return c.toGrid(e,t,!1)},h=function(t,n){var r=function(e){return o.findMap(e,function(e){return m.parent(e.element()).map(function(e){var t=m.parent(e).isNone();return i.elementnew(e,t)})}).getOrThunk(function(){return i.elementnew(n.row(),!0)})};return e.map(t,function(e){var t=r(e.details());return i.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},v=function(e,t){var n=c.toDetails(e,p.eq);return h(n,t)},y=function(t,n){var r=e.flatten(e.map(t.all(),function(e){return e.cells()}));return e.find(r,function(e){return p.eq(n,e.element())})},b=function(e,t,o,i,a){return function(c,m,h,y,b){var x=u.fromTable(m),w=s.generate(x);return t(w,h).map(function(t){var r=g(w,y),o=e(r,t,p.eq,a(y)),i=v(o.grid(),y);return{grid:n.constant(i),cursor:o.cursor}}).fold(function(){return r.none()},function(e){var t=l.render(m,e.grid());return o(m,e.grid(),b),i(m),d.refresh(c,m,f.height,b),r.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},x=function(e,t){return a.cell(t.element()).bind(function(t){return y(e,t)})},w=function(e,n){return a.cell(n.element()).bind(function(r){return y(e,r).map(function(e){return t.merge(e,{generators:n.generators,clipboard:n.clipboard})})})},C=function(n,i){var u=e.map(i.selection(),function(e){return a.cell(e).bind(function(e){return y(n,e)})}),c=o.cat(u);return c.length>0?r.some(t.merge({cells:c},{generators:i.generators,clipboard:i.clipboard})):r.none()},k=function(e,t){return t.mergable()},T=function(e,t){return t.unmergable()};return{run:b,toDetailList:v,onCell:x,onCells:function(t,n){var i=e.map(n.selection(),function(e){return a.cell(e).bind(function(e){return y(t,e)})}),u=o.cat(i);return u.length>0?r.some(u):r.none()},onPaste:w,onPasteRows:C,onMergable:k,onUnmergable:T}}),i("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){var o=function(e){return r===e},i=function(){return n(r)},a=function(){return n(r)},u=function(e){return n(e(r))},c=function(e){e(r)},s=function(e){return e(r)},l=function(e,t){return t(r)},f=function(e){return e(r)},d=function(e){return e(r)},p=function(){return t.some(r)};return{is:o,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:i,orThunk:a,fold:l,map:u,each:c,bind:s,exists:f,forall:d,toOption:p}},r=function(n){var o=function(e){return e()},i=function(){return e.die(n)()},a=function(e){return e},u=function(e){return e()},c=function(){return r(n)},s=function(){return r(n)},l=function(e){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:o,getOrDie:i,or:a,orThunk:u,fold:l,map:c,each:e.noop,bind:s,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),i("ephox.snooker.model.Fitment",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Result","ephox.snooker.api.Structs","ephox.snooker.model.GridRow","ephox.snooker.util.Util","global!Array","global!Error","global!Math"],function(e,t,n,r,o,i,a,u,c){var s=function(e,r,i){if(e.row()>=r.length||e.column()>o.cellLength(r[0]))return n.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var a=r.slice(e.row()),u=a[0].cells().slice(e.column()),c=o.cellLength(i[0]),s=i.length;return n.value({rowDelta:t.constant(a.length-s),colDelta:t.constant(u.length-c)})},l=function(e,n){var r=o.cellLength(e[0]),i=o.cellLength(n[0]);return{rowDelta:t.constant(0),colDelta:t.constant(r-i)}},f=function(t,n){return e.map(t,function(){return r.elementnew(n.cell(),!0)})},d=function(e,t,n){return e.concat(i.repeat(t,function(){return o.setCells(e[e.length-1],f(e[e.length-1].cells(),n))}))},p=function(t,n,r){return e.map(t,function(e){return o.setCells(e,e.cells().concat(f(i.range(0,n),r)))})};return{measure:s,measureWidth:l,tailor:function(e,n,r){var o=n.colDelta()<0?p:t.identity;return(n.rowDelta()<0?d:t.identity)(o(e,c.abs(n.colDelta()),r),c.abs(n.rowDelta()),r)}}}),i("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n,r){var o=function(t,n){return e.foldl(t,function(t,r){return e.exists(t,function(e){return n(e.element(),r.element())})?t:t.concat([r])},[])};return{merge:function(e,t,o,i){if(0===e.length)return e;for(var a=t.startRow();a<=t.finishRow();a++)for(var u=t.startCol();u<=t.finishCol();u++)r.mutateCell(e[a],u,n.elementnew(i(),!1));return e},unmerge:function(e,t,o,i){for(var a=!0,u=0;u<e.length;u++)for(var c=0;c<r.cellLength(e[0]);c++){var s=r.getCellElement(e[u],c),l=o(s,t);!0===l&&!1===a?r.mutateCell(e[u],c,n.elementnew(i(),!0)):!0===l&&(a=!1)}return e},splitRows:function(i,a,u,c){if(a>0&&a<i.length){var s=i[a-1].cells(),l=o(s,u);e.each(l,function(e){for(var o=t.none(),s=a;s<i.length;s++)for(var l=0;l<r.cellLength(i[0]);l++){var f=i[s].cells()[l],d=u(f.element(),e.element());d&&(o.isNone()&&(o=t.some(c())),o.each(function(e){r.mutateCell(i[s],l,n.elementnew(e,!0))}))}})}return i}}}),i("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow","ephox.snooker.operate.MergingOperations"],function(e,t,n,r,o){var i=function(t,n,o,i){var a=r.getCell(t[n],o),u=e.curry(i,a.element()),c=t[n];return t.length>1&&r.cellLength(c)>1&&(o>0&&u(r.getCellElement(c,o-1))||o<c.length-1&&u(r.getCellElement(c,o+1))||n>0&&u(r.getCellElement(t[n-1],o))||n<t.length-1&&u(r.getCellElement(t[n+1],o)))},a=function(e,n,a,u,c){for(var s=e.row(),l=e.column(),f=a.length,d=r.cellLength(a[0]),p=s+f,m=l+d,g=s;g<p;g++)for(var h=l;h<m;h++){i(n,g,h,c)&&o.unmerge(n,r.getCellElement(n[g],h),c,u.cell);var v=r.getCellElement(a[g-s],h-l),y=u.replace(v);r.mutateCell(n[g],h,t.elementnew(y,!0))}return n};return{merge:function(e,t,r,o,i){return n.measure(e,t,r).map(function(u){var c=n.tailor(t,u,o);return a(e,c,r,o,i)})},insert:function(e,t,r,i,a){o.splitRows(t,e,a,i.cell);var u=n.measureWidth(r,t),c=n.tailor(r,u,i),s=n.measureWidth(t,c),l=n.tailor(t,s,i);return l.slice(0,e).concat(c).concat(l.slice(e,l.length))}}}),i("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(e,r,o,i,a){var u=e.slice(0,r),c=e.slice(r),s=n.mapCells(e[o],function(o,u){return r>0&&r<e.length&&i(n.getCellElement(e[r-1],u),n.getCellElement(e[r],u))?n.getCell(e[r],u):t.elementnew(a(o.element(),i),!0)});return u.concat([s]).concat(c)},o=function(r,o,i,a,u){return e.map(r,function(e){var r=o>0&&o<n.cellLength(e)&&a(n.getCellElement(e,o-1),n.getCellElement(e,o)),c=r?n.getCell(e,o):t.elementnew(u(n.getCellElement(e,i),a),!0);return n.addCell(e,o,c)})},i=function(r,o,i,a,u){var c=i+1;return e.map(r,function(e,r){var s=r===o,l=s?t.elementnew(u(n.getCellElement(e,i),a),!0):n.getCell(e,i);return n.addCell(e,c,l)})},a=function(e,r,o,i,a){var u=r+1,c=e.slice(0,u),s=e.slice(u),l=n.mapCells(e[r],function(e,n){return n===o?t.elementnew(a(e.element(),i),!0):e});return c.concat([l]).concat(s)},u=function(n,r,o){var i=e.map(n,function(e){var n=e.cells().slice(0,r).concat(e.cells().slice(o+1));return t.rowcells(n,e.section())});return e.filter(i,function(e){return e.cells().length>0})};return{insertRowAt:r,insertColumnAt:o,splitCellIntoColumns:i,splitCellIntoRows:a,deleteRowsAt:function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},deleteColumnsAt:u}}),i("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,t,n){var r=function(r,o,i,a){var u=function(t){return e.exists(o,function(e){return i(t.element(),e.element())})};return e.map(r,function(e){return n.mapCells(e,function(e){return u(e)?t.elementnew(a(e.element(),i),!0):e})})},o=function(e,t,r,o){return n.getCellElement(e[t],r)!==undefined&&t>0&&o(n.getCellElement(e[t-1],r),n.getCellElement(e[t],r))},i=function(e,t,r){return t>0&&r(n.getCellElement(e,t-1),n.getCellElement(e,t))};return{replaceColumn:function(t,a,u,c){var s=e.bind(t,function(e,r){return o(t,r,a,u)||i(e,a,u)?[]:[n.getCell(e,a)]});return r(t,s,u,c)},replaceRow:function(t,n,a,u){var c=t[n],s=e.bind(c.cells(),function(e,r){return o(t,n,r,a)||i(c,r,a)?[]:[e]});return r(t,s,a,u)}}}),i("ephox.snooker.api.TableOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.Generators","ephox.snooker.api.Structs","ephox.snooker.api.TableContent","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.GridRow","ephox.snooker.model.RunOperation","ephox.snooker.model.TableMerge","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.MergingOperations","ephox.snooker.operate.ModificationOperations","ephox.snooker.operate.TransformOperations","ephox.snooker.resize.Adjustments","ephox.sugar.api.dom.Remove"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y){var b=function(e){0===u.cells(e).length&&y.remove(e)},x=r.immutable("grid","cursor"),w=function(e,t,n){return C(e,t,n).orThunk(function(){return C(e,0,0)})},C=function(e,t,r){return n.from(e[t]).bind(function(e){return n.from(e.cells()[r]).bind(function(e){return n.from(e.element())})})},k=function(e,t,n){return x(e,C(e,t,n))},T=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.row()===n.row()})?t:t.concat([n])},[]).sort(function(e,t){return e.row()-t.row()})},S=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.column()===n.column()})?t:t.concat([n])},[]).sort(function(e,t){return e.column()-t.column()})},E=function(e,t,n,r){var o=t.row(),i=t.row(),a=g.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},_=function(t,n,r,o){var i=n[0].row(),a=n[0].row(),u=T(n),c=e.foldl(u,function(e){return g.insertRowAt(e,a,i,r,o.getOrInit)},t);return k(c,a,n[0].column())},A=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=g.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},N=function(t,n,r,o){var i=T(n),a=i[i.length-1].row(),u=i[i.length-1].row()+i[i.length-1].rowspan(),c=e.foldl(i,function(e){return g.insertRowAt(e,u,a,r,o.getOrInit)},t);return k(c,u,n[0].column())},D=function(e,t,n,r){var o=t.column(),i=t.column(),a=g.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},R=function(t,n,r,o){var i=S(n),a=i[0].column(),u=i[0].column(),c=e.foldl(i,function(e){return g.insertColumnAt(e,u,a,r,o.getOrInit)},t);return k(c,n[0].row(),u)},P=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=g.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},I=function(t,n,r,o){var i=n[n.length-1].column(),a=n[n.length-1].column()+n[n.length-1].colspan(),u=S(n),c=e.foldl(u,function(e){return g.insertColumnAt(e,a,i,r,o.getOrInit)},t);return k(c,n[0].row(),a)},O=function(e,t,n,r){var o=h.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},B=function(e,t,n,r){var o=h.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},M=function(e,t,n,r){var o=h.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},L=function(e,t,n,r){var o=h.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},F=function(e,t,n,r){var o=g.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},H=function(e,t,n,r){var o=g.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},U=function(e,t){var n=S(t),r=g.deleteColumnsAt(e,n[0].column(),n[n.length-1].column()),o=w(r,t[0].row(),t[0].column());return x(r,o)},W=function(e,t){var n=T(t),r=g.deleteRowsAt(e,n[0].row(),n[n.length-1].row()),o=w(r,t[0].row(),t[0].column());return x(r,o)},j=function(e,r,o){var i=r.cells();a.merge(i);var u=m.merge(e,r.bounds(),o,t.constant(i[0]));return x(u,n.from(i[0]))},q=function(t,r,o,i){var a=e.foldr(r,function(e,t){return m.unmerge(e,t,o,i.combine(t))},t);return x(a,n.from(r[0]))},$=function(e,t,r){var o=function(e,t){var n=c.fromTable(e),r=p.generate(n);return d.toGrid(r,t,!0)},a=o(t.clipboard(),t.generators()),u=i.address(t.row(),t.column());return f.merge(u,e,a,t.generators(),r).fold(function(){return x(e,n.some(t.element()))},function(e){var n=w(e,t.row(),t.column());return x(e,n)})},z=function(e,t,n){var r=c.fromPastedRows(e,n),o=p.generate(r);return d.toGrid(o,t,!0)},V=function(e,t,n){var r=e[t.cells[0].row()],o=t.cells[0].row(),i=z(t.clipboard(),t.generators(),r),a=f.insert(o,e,i,t.generators(),n),u=w(a,t.cells[0].row(),t.cells[0].column());return x(a,u)},K=function(e,t,n){var r=e[t.cells.length-1],o=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),i=z(t.clipboard(),t.generators(),r),a=f.insert(o,e,i,t.generators(),n),u=w(a,t.cells[0].row(),t.cells[0].column());return x(a,u)},G=v.adjustWidthTo;return{insertRowBefore:l.run(E,l.onCell,t.noop,t.noop,o.modification),insertRowsBefore:l.run(_,l.onCells,t.noop,t.noop,o.modification),insertRowAfter:l.run(A,l.onCell,t.noop,t.noop,o.modification),insertRowsAfter:l.run(N,l.onCells,t.noop,t.noop,o.modification),insertColumnBefore:l.run(D,l.onCell,G,t.noop,o.modification),insertColumnsBefore:l.run(R,l.onCells,G,t.noop,o.modification),insertColumnAfter:l.run(P,l.onCell,G,t.noop,o.modification),insertColumnsAfter:l.run(I,l.onCells,G,t.noop,o.modification),splitCellIntoColumns:l.run(F,l.onCell,G,t.noop,o.modification),splitCellIntoRows:l.run(H,l.onCell,t.noop,t.noop,o.modification),eraseColumns:l.run(U,l.onCells,G,b,o.modification),eraseRows:l.run(W,l.onCells,t.noop,b,o.modification),makeColumnHeader:l.run(B,l.onCell,t.noop,t.noop,o.transform("row","th")),unmakeColumnHeader:l.run(L,l.onCell,t.noop,t.noop,o.transform(null,"td")),makeRowHeader:l.run(O,l.onCell,t.noop,t.noop,o.transform("col","th")),unmakeRowHeader:l.run(M,l.onCell,t.noop,t.noop,o.transform(null,"td")),mergeCells:l.run(j,l.onMergable,t.noop,t.noop,o.merging),unmergeCells:l.run(q,l.onUnmergable,G,t.noop,o.merging),pasteCells:l.run($,l.onPaste,G,t.noop,o.modification),pasteRowsBefore:l.run(V,l.onPasteRows,t.noop,t.noop,o.modification),pasteRowsAfter:l.run(K,l.onPasteRows,t.noop,t.noop,o.modification)}}),i("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(e){var t=function(e,t){return function(r){return"rtl"===n(r)?t:e}},n=function(t){return"rtl"===e.get(t,"direction")?"rtl":"ltr"};return{onDirection:t,getDirection:n}}),i("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(e,t){var n={isRtl:e.constant(!1)},r={isRtl:e.constant(!0)};return{directionAt:function(e){return"rtl"===t.getDirection(e)?r:n}}}),i("tinymce.plugins.table.actions.TableActions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CellMutations","ephox.snooker.api.TableDirection","ephox.snooker.api.TableFill","ephox.snooker.api.TableOperations","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.queries.Direction"],function(e,t,n,r,o,i,a,u,c,s,l){return function(f,d){var p,m=function(e){return f.fire("newrow",{node:e.dom()}),e.dom()},g=function(e){return f.fire("newcell",{node:e.dom()}),e.dom()};!1!==f.settings.table_clone_elements&&("string"==typeof f.settings.table_clone_elements?p=f.settings.table_clone_elements.split(/[ ,]/):Array.isArray(f.settings.table_clone_elements)&&(p=f.settings.table_clone_elements));var h=n.from(p),v=function(t,n,r){return function(a,d){var p=s.descendants(a,"td[data-mce-style],th[data-mce-style]");e.each(p,function(e){c.remove(e,"data-mce-style")});var v=r(),y=u.fromDom(f.getDoc()),b=o(l.directionAt),x=i.cellOperations(n,y,h);return t(v,a,d,x,b).bind(function(t){return e.each(t.newRows(),function(e){m(e)}),e.each(t.newCells(),function(e){g(e)}),t.cursor().map(function(e){var t=f.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})})}};return{deleteRow:v(a.eraseRows,t.noop,d),deleteColumn:v(a.eraseColumns,t.noop,d),insertRowsBefore:v(a.insertRowsBefore,t.noop,d),insertRowsAfter:v(a.insertRowsAfter,t.noop,d),insertColumnsBefore:v(a.insertColumnsBefore,r.halve,d),insertColumnsAfter:v(a.insertColumnsAfter,r.halve,d),mergeCells:v(a.mergeCells,t.noop,d),unmergeCells:v(a.unmergeCells,t.noop,d),pasteRowsBefore:v(a.pasteRowsBefore,t.noop,d),pasteRowsAfter:v(a.pasteRowsAfter,t.noop,d),pasteCells:v(a.pasteCells,t.noop,d)}}}),i("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(e,t,n,r,o){return{copyRows:function(i,a,u){var c=e.fromTable(i),s=r.generate(c);return t.onCells(s,a).map(function(e){var r=n.toGrid(s,u,!1),i=r.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),a=t.toDetailList(i,u);return o.copy(a)})}}}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t){var n=function(e){return t.fromDom(e.getBody())};return{getBody:n,getIsRoot:function(t){return function(r){return e.eq(r,n(t))}}}}),i("tinymce.plugins.table.actions.TableCommands",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopyRows","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=l.each,m=n.none(),g=function(){return m.fold(function(){},function(t){return e.map(t,function(e){return e.dom()})})},h=function(t){var r=e.map(t,s.fromDom);m=n.from(r)};return{registerCommands:function(l,g,h,v,y){var b=f.getIsRoot(l),x=function(){var e=s.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"));i.table(e,b).filter(t.not(b)).each(function(e){var t=s.fromText("");a.after(e,t),u.remove(e);var n=l.dom.createRng();n.setStart(t.dom(),0),n.setEnd(t.dom(),0),l.selection.setRng(n)})},w=function(){return s.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"))},C=function(e){return i.table(e,b)},k=function(e){var t=w();C(t).each(function(n){var r=d.forMenu(y,n,t);e(n,r).each(function(e){l.selection.setRng(e),l.focus(),v.clear(n)})})},T=function(){var e=w();return C(e).bind(function(i){var a=s.fromDom(l.getDoc()),u=d.forMenu(y,i,e),c=o.cellOperations(t.noop,a,n.none());return r.copyRows(i,u,c)})},S=function(t){m.each(function(n){var r=e.map(n,function(e){return c.deep(e)}),i=w();C(i).bind(function(e){var n=s.fromDom(l.getDoc()),a=o.paste(n),u=d.pasteRows(y,e,i,r,a);t(e,u).each(function(t){l.selection.setRng(t),l.focus(),v.clear(e)})})})};p({mceTableSplitCells:function(){k(h.unmergeCells)},mceTableMergeCells:function(){k(h.mergeCells)},mceTableInsertRowBefore:function(){k(h.insertRowsBefore)},mceTableInsertRowAfter:function(){k(h.insertRowsAfter)},mceTableInsertColBefore:function(){k(h.insertColumnsBefore)},mceTableInsertColAfter:function(){k(h.insertColumnsAfter)},mceTableDeleteCol:function(){k(h.deleteColumn)},mceTableDeleteRow:function(){k(h.deleteRow)},mceTableCutRow:function(){m=T(),k(h.deleteRow)},mceTableCopyRow:function(){m=T()},mceTablePasteRowBefore:function(){S(h.pasteRowsBefore)},mceTablePasteRowAfter:function(){S(h.pasteRowsAfter)},mceTableDelete:x},function(e,t){l.addCommand(t,e)}),p({mceInsertTable:g.table,mceTableProps:function(){g.table(!0)},mceTableRowProps:g.row,mceTableCellProps:g.cell},function(e,t){l.addCommand(t,function(t,n){e(n)})})},getClipboardRows:g,setClipboardRows:h}}),i("tinymce.plugins.table.actions.TableWire",["ephox.snooker.api.ResizeWire","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","tinymce.plugins.table.alien.Util"],function(e,t,n,r){return{get:function(o){return o.inline?e.body(r.getBody(o),t.body()):e.only(n.fromDom(o.getDoc()))}}}),i("ephox.snooker.api.CellLocation",[],function(){var e=function(e){return o(function(t){return t(e)})},t=function(e){return o(function(t,n){return n(e)})},n=function(e,t){return o(function(n,r,o){return o(e,t)})},r=function(e){return o(function(t,n,r,o){return o(e)})},o=function(e){return{fold:e}};return{none:e,first:t,middle:n,last:r}}),i("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(e,t,n,r,o){var i=function(n,i){return r.table(n,i).bind(function(i){var a=r.cells(i);return e.findIndex(a,function(e){return o.eq(n,e)}).map(function(e){return{index:t.constant(e),all:t.constant(a)}})})};return{next:function(e,t){return i(e,t).fold(function(){return n.none(e)},function(t){return t.index()+1<t.all().length?n.middle(e,t.all()[t.index()+1]):n.last(e)})},prev:function(e,t){return i(e,t).fold(function(){return n.none()},function(t){return t.index()-1>=0?n.middle(e,t.all()[t.index()-1]):n.first(e)})}}}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),i("tinymce.plugins.table.queries.TabContext",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.CellNavigation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.CursorPosition","tinymce.core.util.VK","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(e,t,r,o){return g(e,t,n.next(r),o)},m=function(e,t,r,o){return g(e,t,n.prev(r),o)},g=function(e,n,o,i){return o.fold(t.none,t.none,function(n,r){return s.first(r).bind(function(n){var r=e.dom.createRng();return r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.some(r)})},function(t){return r.table(t,n).bind(function(n){var r=d.noMenu(t);i.insertRowsAfter(n,r);var o=u.descendants(n,"tr");if(o.length>0){var a=o[o.length-1];return c.descendant(a,"td,th").map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}})})},h=["table","li","dl"];return{handle:function(t,n,u,c){if(t.keyCode===l.TAB){var s=f.getBody(n),d=function(t){var n=a.name(t);return o.eq(t,s)||e.contains(h,n)},g=n.selection.getRng();if(g.collapsed){var v=i.fromDom(g.startContainer);r.cell(v,d).each(function(e){t.preventDefault(),(t.shiftKey?m:p)(n,d,e,u,c).each(function(e){n.selection.setRng(e)})})}}}}}),i("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],function(e){return{response:e.immutable("selection","kill")}}),i("ephox.darwin.api.SelectionKeys",[],function(){var e=function(e){return function(t){return t===e}},t=e(38),n=e(40),r=function(e){return e>=37&&e<=40};return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:t,isDown:n,isNavigation:r}}),i("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),n=function(e,t,n,r){return e.fold(t,n,r)};return{before:t.before,on:t.on,after:t.after,cata:n}}),i("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r){var o=function(e,t){var n=e.document.createRange();return i(n,t),n},i=function(e,t){e.selectNodeContents(t.dom())},a=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},u=function(e){return e.document.createRange()},c=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},s=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},l=function(e,t){m(e),e.insertNode(t.dom())},f=function(e,t,r,o){return n.eq(e,r)&&t===o},d=function(e,t,n){var r=e.document.createRange();return c(r,t),s(r,n),r},p=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},m=function(e){e.deleteContents()},g=function(e){var t=e.cloneContents();return r.fromDom(t)},h=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}},v=function(e){var n=e.getClientRects(),r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(h):t.none()},y=function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(h):t.none()},b=function(e){return e.toString()};return{create:u,replaceWith:l,selectNodeContents:o,selectNodeContentsUsing:i,isCollapsed:f,relativeToNative:d,exactToNative:p,deleteContents:m,cloneFragment:g,getFirstRect:v,getBounds:y,isWithin:a,toString:b}}),i("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,t,n,r,o,i){var a=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),u=function(e,t,n){return t(o.fromDom(n.startContainer),n.startOffset,o.fromDom(n.endContainer),n.endOffset)},c=function(e,o){return o.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(t,o){return{ltr:r.cached(function(){return i.relativeToNative(e,t,o)}),rtl:r.cached(function(){return n.some(i.relativeToNative(e,o,t))})}},exact:function(t,o,a,u){return{ltr:r.cached(function(){return i.exactToNative(e,t,o,a,u)}),rtl:r.cached(function(){return n.some(i.exactToNative(e,a,u,t,o))})}}})},s=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return a.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return u(e,a.ltr,n)})}return u(e,a.ltr,n)},l=function(e,t){var n=c(e,t);return s(e,n)},f=function(e,t){return l(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})};return{ltr:a.ltr,rtl:a.rtl,diagnose:l,asLtrRange:f}}),i("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r){return{convertToRange:function(n,o){var i=r.asLtrRange(n,o);return{start:e.constant(t.fromDom(i.startContainer)),soffset:e.constant(i.startOffset),finish:e.constant(t.fromDom(i.endContainer)),foffset:e.constant(i.endOffset)}},makeSitus:function(t,r,o,i){return{start:e.constant(n.on(t,r)),finish:e.constant(n.on(o,i))}}}}),i("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct"],function(e,t){var n=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r=t.immutable("start","soffset","finish","foffset"),o=function(e){return n.exact(e.start(),e.soffset(),e.finish(),e.foffset())};return{domRange:n.domRange,relative:n.relative,exact:n.exact,exactFromRange:o,range:r}}),i("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,t,r,o){var i=n.owner(e),a=i.dom().createRange();return a.setStart(e.dom(),t),a.setEnd(r.dom(),o),a},o=function(e,n,o,i){var a=r(e,n,o,i);return t.fromDom(a.commonAncestorContainer)};return{after:function(t,n,o,i){var a=r(t,n,o,i),u=e.eq(t,o)&&n===i;return a.collapsed&&!u},commonAncestorContainer:o}}),i("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var i=o||n,a=i.createDocumentFragment();return e.each(r,function(e){a.appendChild(e.dom())}),t.fromDom(a)}}}),i("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){var t=function(t,n,r,o,i){if(0===i)return 0;if(n===o)return i-1;for(var a=o,u=1;u<i;u++){var c=t(u),s=e.abs(n-c.left);if(r>c.bottom);else{if(r<c.top||s>a)return u-1;a=s}}return 0};return{inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:t}}),i("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,t,n,r){var o=function(e,t,o,i,a){var u=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},c=function(e){return u(e).getBoundingClientRect()},s=n.get(t).length,l=r.searchForPoint(c,o,i,a.right,s);return u(l)};return{locate:function(n,i,a,u){var c=n.dom().createRange();c.selectNode(i.dom());var s=c.getClientRects();return t.findMap(s,function(t){return r.inRect(t,a,u)?e.some(t):e.none()}).map(function(e){return o(n,i,a,u,e)})}}}),i("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,t,n,r,o,i,a){var u=function(n,i,a,u){var s=n.dom().createRange(),l=r.children(i);return t.findMap(l,function(t){return s.selectNode(t.dom()),o.inRect(s.getBoundingClientRect(),a,u)?c(n,t,a,u):e.none()})},c=function(e,t,r,o){return(n.isText(t)?i.locate:u)(e,t,r,o)};return{locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=a.max(i.left,a.min(i.right,n)),s=a.max(i.top,a.min(i.bottom,r));return c(e,t,u,s)}}}),i("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n){var r=!0,o=!1,i=function(e,t){return t-e.left<e.right-t?r:o},a=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},u=function(e,t,o){var u=e.dom().createRange();u.selectNode(t.dom());var c=u.getBoundingClientRect(),s=i(c,o);return(s===r?n.first:n.last)(t).map(function(t){return a(e,t,s)})},c=function(t,n,r){var o=n.dom().getBoundingClientRect(),u=i(o,r);return e.some(a(t,n,u))};return{search:function(e,n,r){return(0===t.children(n).length?c:u)(e,n,r)}}}),i("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,t,n,r,o,i,a,u){var c=function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(null===n.offsetNode)return e.none();var r=t.dom().createRange();return r.setStart(n.offsetNode,n.offset),r.collapse(),e.some(r)})},s=function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))},l=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect(),c=u.max(a.left,u.min(a.right,n)),s=u.max(a.top,u.min(a.bottom,r));return o.locate(e,t,c,s)},f=function(r,o,a){return e.from(r.dom().elementFromPoint(o,a)).map(t.fromDom).bind(function(e){var t=function(){return i.search(r,e,o)};return 0===n.children(e).length?t():l(r,e,o,a).orThunk(t)})},d=a.caretPositionFromPoint?c:a.caretRangeFromPoint?s:f;return{fromPoint:function(e,n,o){var i=t.fromDom(e.document);return d(i,n,o).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})}}}),
i("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r,o,i,a){var u=function(t,n,a,u){var c=i.create(t),s=o.is(n,u)?[n]:[],l=s.concat(r.descendants(n,u));return e.filter(l,function(e){return i.selectNodeContentsUsing(c,e),i.isWithin(a,c)})};return{find:function(e,r,o){var i=a.asLtrRange(e,r),c=t.fromDom(i.commonAncestorContainer);return n.isElement(c)?u(e,c,i,o):[]}}}),i("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r){var o=function(n,o){var i=t.name(n);return"input"===i?r.after(n):e.contains(["br","img"],i)?0===o?r.before(n):r.after(n):r.on(n,o)};return{beforeSpecial:o,preprocess:function(e,t){var i=e.fold(r.before,o,r.after),a=t.fold(r.before,o,r.after);return n.relative(i,a)}}}),i("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,t,n,r,o,i,a,u,c,s,l){var f=function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},d=function(e,t,n,r,o){var i=a.exactToNative(e,t,n,r,o);f(e,i)},p=function(e,t,n){return s.find(e,t,n)},m=function(e,t,n,r,o){g(e,i.on(t,n),i.on(r,o))},g=function(e,t,n){var r=l.preprocess(t,n);return u.diagnose(e,r).match({ltr:function(t,n,r,o){d(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();i.extend?(i.collapse(t.dom(),n),i.extend(r.dom(),o)):d(e,r,o,t,n)}})},h=function(t){return e.from(t.getRangeAt(0)).map(function(e){return o.range(n.fromDom(e.startContainer),e.startOffset,n.fromDom(e.endContainer),e.endOffset)})},v=function(r){var i=n.fromDom(r.anchorNode),a=n.fromDom(r.focusNode);return t.after(i,r.anchorOffset,a,r.focusOffset)?e.some(o.range(n.fromDom(r.anchorNode),r.anchorOffset,n.fromDom(r.focusNode),r.focusOffset)):h(r)},y=function(e,t){var n=a.selectNodeContents(e,t);f(e,n)},b=function(e,t){var r=a.selectNodeContents(e,t);return o.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)},x=function(t){var n=t.getSelection();return n.rangeCount>0?v(n):e.none()},w=function(e){return x(e).map(function(e){return o.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},C=function(e,t){var n=u.asLtrRange(e,t);return a.getFirstRect(n)},k=function(e,t){var n=u.asLtrRange(e,t);return a.getBounds(n)},T=function(e,t,n){return c.fromPoint(e,t,n)},S=function(e,t){var n=u.asLtrRange(e,t);return a.toString(n)};return{setExact:m,getExact:x,get:w,setRelative:g,setToElement:y,clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=u.asLtrRange(e,t);return a.cloneFragment(n)},replace:function(e,t,n){var o=u.asLtrRange(e,t),i=r.fromElements(n);a.replaceWith(o,i)},deleteAt:function(e,t){var n=u.asLtrRange(e,t);a.deleteContents(n)},forElement:b,getFirstRect:C,getBounds:k,getAtPoint:T,findWithin:p,getAsString:S}}),i("ephox.darwin.api.WindowBridge",["ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.api.selection.WindowSelection"],function(e,t,n,r,o,i){return function(a){var u=function(e){return e.dom().getBoundingClientRect()},c=function(e,o,u,c){var s=r.exact(e,o,u,c);return i.getFirstRect(a,s).map(function(e){return n.map(e,t.apply)})},s=function(){return i.get(a).map(function(t){return e.convertToRange(a,t)})},l=function(t){var n=r.relative(t.start(),t.finish());return e.convertToRange(a,n)},f=function(e,n){return i.getAtPoint(a,e,n).map(function(e){return{start:t.constant(o.on(e.start(),e.soffset())),finish:t.constant(o.on(e.finish(),e.foffset()))}})},d=function(){i.clear(a)},p=function(e){i.setToElement(a,e)};return{getRect:u,getRangedRect:c,getSelection:s,fromSitus:l,situsFromPoint:f,clearSelection:d,setSelection:function(e){i.setExact(a,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){i.setRelative(a,e,t)},selectContents:p,getInnerHeight:function(){return a.innerHeight},getScrollY:function(){return a.scrollY},scrollBy:function(e,t){a.scrollBy(e,t)}}}}),i("ephox.darwin.keyboard.KeySelection",["ephox.darwin.api.Responses","ephox.darwin.selection.CellSelection","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,u){var c=function(e,t,n,r,u,c,l){return i.eq(n,u)&&r===c?o.none():a.closest(n,"td,th",t).bind(function(n){return a.closest(u,"td,th",t).bind(function(r){return s(e,t,n,r,l)})})},s=function(r,a,c,s,l){if(!i.eq(c,s)){var f=t.identify(c,s,a).getOr([]);if(f.length>0)return l(r,f,c,s),o.some(e.response(o.some(n.makeSitus(c,0,c,u.getEnd(c))),!0))}return o.none()};return{sync:c,detect:s,update:function(e,n,r,o,i){var a=function(e){return i.clear(r),i.selectRange(r,e.boxes(),e.start(),e.finish()),e.boxes()};return t.shiftSelection(o,e,n,i.firstSelectedSelector(),i.lastSelectedSelector()).map(a)}}}),i("ephox.darwin.keyboard.Carets",["ephox.katamari.api.Struct"],function(e){var t=e.immutableBag(["left","top","right","bottom"],[]),n=function(e,n){return t({left:e.left(),top:e.top()+n,right:e.right(),bottom:e.bottom()+n})},r=function(e,n){return t({left:e.left(),top:e.top()-n,right:e.right(),bottom:e.bottom()-n})},o=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n-r,right:e.right(),bottom:n})},i=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n,right:e.right(),bottom:n+r})},a=function(e,n,r){return t({left:e.left()+n,top:e.top()+r,right:e.right()+n,bottom:e.bottom()+r})},u=function(e){return e.top()},c=function(e){return e.bottom()},s=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"};return{nu:t,moveUp:r,moveDown:n,moveBottomTo:o,moveTopTo:i,getTop:u,getBottom:c,translate:a,toString:s}}),i("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(e,n,o){return o>=0&&o<r.getEnd(n)?e.getRangedRect(n,o,n,o+1):o>0?e.getRangedRect(n,o-1,n,o):t.none()},i=function(t){return e.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},a=function(e,n){return t.some(e.getRect(n))};return{getBoxAt:function(e,r,u){return n.isElement(r)?a(e,r,u).map(i):n.isText(r)?o(e,r,u).map(i):t.none()},getEntireBox:function(e,o){return n.isElement(o)?a(e,o).map(i):n.isText(o)?e.getRangedRect(o,0,o,r.getEnd(o)).map(i):t.none()}}}),i("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,t,n){var r=n.immutable("item","mode"),o=function(e,t,n,o){var a=o!==undefined?o:i;return e.property().parent(t).map(function(e){return r(e,a)})},i=function(e,t,n,o){var i=o!==undefined?o:a;return n.sibling(e,t).map(function(e){return r(e,i)})},a=function(e,t,n,o){var i=o!==undefined?o:a,u=e.property().children(t);return n.first(u).map(function(e){return r(e,i)})},u=[{current:o,next:i,fallback:t.none()},{current:i,next:a,fallback:t.some(o)},{current:a,next:a,fallback:t.some(i)}],c=function(t,n,r,o,i){var a=i!==undefined?i:u;return e.find(a,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return c(t,n,e,o)})})})};return{backtrack:o,sidestep:i,advance:a,go:c}}),i("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(e){return{left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(t){return t.length>0?e.some(t[t.length-1]):e.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(t){return t.length>0?e.some(t[0]):e.none()}}}}}),i("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n){var r=function(n,o,i,a,u,c){return t.go(n,o,a,u).bind(function(t){return c(t.item())?e.none():i(t.item())?e.some(t.item()):r(n,t.item(),i,t.mode(),u,c)})};return{left:function(e,o,i,a){return r(e,o,i,t.sidestep,n.left(),a)},right:function(e,o,i,a){return r(e,o,i,t.sidestep,n.right(),a)}}}),i("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,t,n,r){var o=function(e,t){return 0===e.property().children(t).length},i=function(t,n,r){return u(t,n,e.curry(o,t),r)},a=function(t,n,r){return c(t,n,e.curry(o,t),r)},u=function(e,n,r,o){return t.left(e,n,r,o)},c=function(e,n,r,o){return t.right(e,n,r,o)};return{before:i,after:a,seekLeft:u,seekRight:c,walkers:function(){return{left:r.left,right:r.right}},walk:function(e,t,r,o,i){return n.go(e,t,r,o,i)},backtrack:n.backtrack,sidestep:n.sidestep,advance:n.advance}});i("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(e,t){var n=e();return{gather:function(e,r,o){return t.gather(n,e,r,o)},before:function(e,r){return t.before(n,e,r)},after:function(e,r){return t.after(n,e,r)},seekLeft:function(e,r,o){return t.seekLeft(n,e,r,o)},seekRight:function(e,r,o){return t.seekRight(n,e,r,o)},walkers:function(){return t.walkers()},walk:function(e,r,o,i){return t.walk(n,e,r,o,i)}}}),i("ephox.darwin.keyboard.Retries",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.dom.DomGather","ephox.robin.api.dom.DomStructure","ephox.katamari.api.Adt","ephox.sugar.api.search.PredicateFind","global!Math"],function(e,t,n,r,o,i,a,u,c){var s=5,l=100,f=a.generate([{none:[]},{retry:["caret"]}]),d=function(e,t){return e.left()<t.left()||c.abs(t.right()-e.left())<1||e.left()>t.right()},p=function(e,r,o){return u.closest(r,i.isBlock).fold(n.constant(!1),function(n){return t.getEntireBox(e,n).exists(function(e){return d(o,e)})})},m=function(t,n,r,o,i){var a=e.moveDown(i,s);return c.abs(r.bottom()-o.bottom())<1?f.retry(a):r.top()>i.bottom()?f.retry(a):r.top()===i.bottom()?f.retry(e.moveDown(i,1)):p(t,n,i)?f.retry(e.translate(a,s,0)):f.none()},g=function(t,n,r,o,i){var a=e.moveUp(i,s);return c.abs(r.top()-o.top())<1?f.retry(a):r.bottom()<i.top()?f.retry(a):r.bottom()===i.top()?f.retry(e.moveUp(i,1)):p(t,n,i)?f.retry(e.translate(a,s,0)):f.none()},h={point:e.getTop,adjuster:g,move:e.moveUp,gather:o.before},v={point:e.getBottom,adjuster:m,move:e.moveDown,gather:o.after},y=function(e,n,o,i,a){return 0===a?r.some(i):e.situsFromPoint(i.left(),n.point(i)).bind(function(u){return u.start().fold(r.none,function(u,c){return t.getEntireBox(e,u,c).bind(function(t){return n.adjuster(e,u,t,o,i).fold(r.none,function(t){return y(e,n,o,t,a-1)})}).orThunk(function(){return r.some(i)})},r.none)})},b=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+s)},x=function(e,t){return e.situsFromPoint(t.left(),t.top()-s)},w=function(e,t,n){return e.point(t)>n.getInnerHeight()?r.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?r.some(-e.point(t)):r.none()},C=function(e,t,n){var r=e.move(n,s),o=y(t,e,n,r,l).getOr(r);return w(e,o,t).fold(function(){return t.situsFromPoint(o.left(),e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)})};return{tryUp:n.curry(C,h),tryDown:n.curry(C,v),ieTryUp:x,ieTryDown:b,getJumpSize:n.constant(s)}}),i("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o){var i=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),a=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},u=function(e){return r.closest(e,"tr")};return{verify:function(e,c,s,l,f,d,p){return r.closest(l,"td,th",p).bind(function(s){return r.closest(c,"td,th",p).map(function(r){return n.eq(s,r)?n.eq(l,s)&&o.getEnd(s)===f?d(r):i.none("in same cell"):t.sharedOne(u,[s,r]).fold(function(){return a(e,r,s)?i.success():d(r)},function(){return d(r)})})}).getOr(i.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:i}}),i("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(e){return{point:e.immutable("element","offset"),delta:e.immutable("element","deltaOffset"),range:e.immutable("element","start","finish"),points:e.immutable("begin","end"),text:e.immutable("element","text")}}),i("ephox.sugar.api.search.ElementAddress",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,u,c){var s=r.immutable("ancestor","descendants","element","index"),l=r.immutable("parent","children","element","index"),f=function(e,t){return i.closest(e,function(e){return c.parent(e).exists(function(e){return o.eq(e,t)})})},d=function(e){return c.parent(e).bind(function(t){var n=c.children(t);return p(n,e).map(function(r){return l(t,n,e,r)})})},p=function(n,r){return e.findIndex(n,t.curry(o.eq,r))};return{childOf:f,indexOf:p,indexInParent:d,selectorsInParent:function(e,t){return c.parent(e).bind(function(n){var r=a.children(n,t);return p(r,e).map(function(t){return l(n,r,e,t)})})},descendantsInAncestor:function(e,t,n){return u.closest(e,t).bind(function(t){var r=a.descendants(t,n);return p(r,e).map(function(n){return s(t,r,e,n)})})}}}),i("ephox.darwin.navigation.BrTags",["ephox.darwin.navigation.BeforeAfter","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.ElementAddress","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e){return"br"===o.name(e)},f=function(e,t,r){return t(e,r).bind(function(e){return o.isText(e)&&0===i.get(e).trim().length?f(e,t,r):n.some(e)})},d=function(e,t,n){return n.traverse(t).orThunk(function(){return f(t,n.gather,e)}).map(n.relative)},p=function(e,t){return u.child(e,t).filter(l).orThunk(function(){return u.child(e,t-1).filter(l)})},m=function(e,t,n,r){return p(t,n).bind(function(t){return r.traverse(t).fold(function(){return f(t,r.gather,e).map(r.relative)},function(e){return a.indexInParent(e).map(function(e){return s.on(e.parent(),e.index())})})})};return{tryBr:function(e,n,r,o){return(l(n)?d(e,n,o):m(e,n,r,o)).map(function(e){return{start:t.constant(e),finish:t.constant(e)}})},process:function(t){return e.cata(t,function(){return n.none("BR ADT: none")},function(){return n.none()},function(e){return n.some(r.point(e,0))},function(e){return n.some(r.point(e,c.getEnd(e)))})}}}),i("ephox.darwin.keyboard.TableKeys",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.darwin.navigation.BrTags","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.selection.Awareness"],function(e,t,n,r,o,i,a,u,c,s){var l=u.detect(),f=function(e,t,n){return e.getSelection().bind(function(u){return o.tryBr(t,u.finish(),u.foffset(),n).fold(function(){return i.some(a.point(u.finish(),u.foffset()))},function(i){var a=e.fromSitus(i),c=r.verify(e,u.finish(),u.foffset(),a.finish(),a.foffset(),n.failure,t);return o.process(c)})})},d=function(t,n,o,a,u,l){return 0===l?i.none():g(t,n,o,a,u).bind(function(f){var m=t.fromSitus(f),g=r.verify(t,o,a,m.finish(),m.foffset(),u.failure,n);return r.cata(g,function(){return i.none()},function(){return i.some(f)},function(r){return c.eq(o,r)&&0===a?p(t,o,a,e.moveUp,u):d(t,n,r,0,u,l-1)},function(r){return c.eq(o,r)&&a===s.getEnd(r)?p(t,o,a,e.moveDown,u):d(t,n,r,s.getEnd(r),u,l-1)})})},p=function(e,r,o,i,a){return t.getBoxAt(e,r,o).bind(function(t){return m(e,a,i(t,n.getJumpSize()))})},m=function(e,t,n){return l.browser.isChrome()||l.browser.isSafari()||l.browser.isFirefox()||l.browser.isEdge()?t.otherRetry(e,n):l.browser.isIE()?t.ieRetry(e,n):i.none()},g=function(e,n,r,o,i){return t.getBoxAt(e,r,o).bind(function(t){return m(e,i,t)})};return{handle:function(e,t,n){return f(e,t,n).bind(function(r){return d(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})}}}),i("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),i("ephox.darwin.keyboard.VerticalMovement",["ephox.darwin.api.Responses","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.TableKeys","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i,a,u,c,s,l){var f=a.detect(),d=function(e,t){return c.ancestor(e,function(e){return l.parent(e).exists(function(e){return u.eq(e,t)})})},p=function(e,t,r,a,u){return s.closest(a,"td,th",t).bind(function(a){return s.closest(a,"table",t).bind(function(c){return d(u,c)?n.handle(e,t,r).bind(function(e){return s.closest(e.finish(),"td,th",t).map(function(t){return{start:o.constant(a),finish:o.constant(t),range:o.constant(e)}})}):i.none()})})};return{navigate:function(t,n,o,a,u){return f.browser.isIE()?i.none():p(t,n,o,a,u).map(function(t){var n=t.range();return e.response(i.some(r.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),!0)})},select:function(e,n,r,o,i,a,u){return p(e,r,o,i,a).bind(function(e){return t.detect(n,r,e.start(),e.finish(),u)})}}}),i("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r){var o=function(e,t){return r.closest(e,"td,th",t)};return function(r,i,a,u){var c=t.none(),s=function(){c=t.none()};return{mousedown:function(e){u.clear(i),c=o(e.target(),a)},mouseover:function(t){c.each(function(c){u.clear(i),o(t.target(),a).each(function(t){var o=e.identify(c,t,a).getOr([]);(o.length>1||1===o.length&&!n.eq(c,t))&&(u.selectRange(i,o,c,t),r.selectContents(t))})})},mouseup:function(){c.each(s)}}}}),i("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o){return{down:{traverse:r.nextSibling,gather:n.after,relative:o.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:t.adt.failedDown},up:{traverse:r.prevSibling,gather:n.before,relative:o.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:t.adt.failedUp}}}),i("ephox.darwin.api.InputHandlers",["ephox.darwin.api.Responses","ephox.darwin.api.SelectionKeys","ephox.darwin.api.WindowBridge","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.VerticalMovement","ephox.darwin.mouse.MouseSelection","ephox.darwin.navigation.KeyDirection","ephox.darwin.selection.CellSelection","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.selection.Situ"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=f.immutable("rows","cols");return{mouse:function(e,t,r,o){var a=n(e),u=i(a,t,r,o);return{mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},keyboard:function(i,f,m,g){var h=n(i),v=function(){return g.clear(f),s.none()};return{keydown:function(n,i,y,b,x,w){var C=n.raw().which,k=!0===n.raw().shiftKey;return u.retrieve(f,g.selectedSelector()).fold(function(){return t.isDown(C)&&k?c.curry(o.select,h,f,m,a.down,b,i,g.selectRange):t.isUp(C)&&k?c.curry(o.select,h,f,m,a.up,b,i,g.selectRange):t.isDown(C)?c.curry(o.navigate,h,m,a.down,b,i):t.isUp(C)?c.curry(o.navigate,h,m,a.up,b,i):s.none},function(n){var o=function(o){return function(){return l.findMap(o,function(e){return r.update(e.rows(),e.cols(),f,n,g)}).fold(function(){return u.getEdges(f,g.firstSelectedSelector(),g.lastSelectedSelector()).map(function(n){var r=t.isDown(C)||w.isForward(C)?d.after:d.before;return h.setRelativeSelection(d.on(n.first(),0),r(n.table())),g.clear(f),e.response(s.none(),!0)})},function(){return s.some(e.response(s.none(),!0))})}};return t.isDown(C)&&k?o([p(1,0)]):t.isUp(C)&&k?o([p(-1,0)]):w.isBackward(C)&&k?o([p(0,-1),p(-1,0)]):w.isForward(C)&&k?o([p(0,1),p(1,0)]):t.isNavigation(C)&&!1===k?v:s.none})()},keyup:function(e,n,o,i,a){return u.retrieve(f,g.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?s.none():t.isNavigation(u)?r.sync(f,m,n,o,i,a,g.selectRange):s.none()},s.none)}}}}}),i("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(e,t,n,r){var o=function(e){for(var t=e.dom().classList,n=new r(t.length),o=0;o<t.length;o++)n[o]=t.item(o);return n};return{add:function(n,r){e.each(r,function(e){t.add(n,e)})},remove:function(n,r){e.each(r,function(e){t.remove(n,e)})},toggle:function(n,r){e.each(r,function(e){t.toggle(n,e)})},hasAll:function(n,r){return e.forall(r,function(e){return t.has(n,e)})},hasAny:function(n,r){return e.exists(r,function(e){return t.has(n,e)})},get:function(e){return n.supports(e)?o(e):n.get(e)}}}),i("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(e,t){return{addClass:function(t){return function(n){e.add(n,t)}},removeClass:function(t){return function(n){e.remove(n,t)}},removeClasses:function(e){return function(n){t.remove(n,e)}},hasClass:function(t){return function(n){return e.has(n,t)}}}}),i("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,o){return{byClass:function(t){var i=r.addClass(t.selected()),a=r.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]),u=function(n){var r=o.descendants(n,t.selectedSelector());e.each(r,a)};return{clear:u,selectRange:function(r,o,a,c){u(r),e.each(o,i),n.add(a,t.firstSelected()),n.add(c,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(n){var r=function(e){t.remove(e,n.selected()),t.remove(e,n.firstSelected()),t.remove(e,n.lastSelected())},i=function(e){t.set(e,n.selected(),"1")},a=function(t){var i=o.descendants(t,n.selectedSelector());e.each(i,r)};return{clear:a,selectRange:function(r,o,u,c){a(r),e.each(o,i),t.set(u,n.firstSelected(),"1"),t.set(c,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}}}),i("tinymce.plugins.table.selection.CellSelection",["ephox.darwin.api.InputHandlers","ephox.darwin.api.SelectionAnnotation","ephox.darwin.api.SelectionKeys","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.SelectionDirection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.selection.Ephemera"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){return function(m,g){var h=i.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),v=o.none(),y=t.byAttr(p);m.on("init",function(){var t=m.getWin(),i=f.getBody(m),p=f.getIsRoot(m),b=function(){var e=m.selection,t=c.fromDom(e.getStart()),n=c.fromDom(e.getEnd()),s=a.table(t),l=a.table(n);s.bind(function(e){return l.bind(function(t){return u.eq(e,t)?o.some(!0):o.none()})}).fold(function(){y.clear(i)},r.noop)},x=e.mouse(t,i,p,y),w=e.keyboard(t,i,p,y),C=function(e,n){n.kill()&&e.kill(),n.selection().each(function(e){var n=s.relative(e.start(),e.finish()),r=l.asLtrRange(t,n);m.selection.setRng(r)})},k=function(e){var t=S(e);if(t.raw().shiftKey&&n.isNavigation(t.raw().which)){var r=m.selection.getRng(),o=c.fromDom(r.startContainer),i=c.fromDom(r.endContainer);w.keyup(t,o,r.startOffset,i,r.endOffset).each(function(e){C(t,e)})}},T=function(e){var t=S(e);g().each(function(e){e.hideBars()});var r=m.selection.getRng(),o=c.fromDom(m.selection.getStart()),i=c.fromDom(r.startContainer),a=c.fromDom(r.endContainer),u=d.directionAt(o).isRtl()?n.rtl:n.ltr;w.keydown(t,i,r.startOffset,a,r.endOffset,u).each(function(e){C(t,e)}),g().each(function(e){e.showBars()})},S=function(e){var t=c.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},i=r.compose(o,n);return{target:r.constant(t),x:r.constant(e.x),y:r.constant(e.y),stop:n,prevent:o,kill:i,raw:r.constant(e)}},E=function(e){return 0===e.button},_=function(e){return e.buttons===undefined||0!=(1&e.buttons)},A=function(e){E(e)&&x.mousedown(S(e))},N=function(e){_(e)&&x.mouseover(S(e))},D=function(e){E&&x.mouseup(S(e))};m.on("mousedown",A),m.on("mouseover",N),m.on("mouseup",D),m.on("keyup",k),m.on("keydown",T),m.on("nodechange",b),v=o.some(h({mousedown:A,mouseover:N,mouseup:D,keyup:k,keydown:T}))});var b=function(){v.each(function(){})};return{clear:y.clear,destroy:b}}}),i("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,t,n,r){return function(o){return{get:function(){var i=t.getBody(o);return e.retrieve(i,n.selectedSelector()).fold(function(){return o.selection.getStart()===undefined?r.none():r.single(o.selection)},function(e){return r.multiple(e)})}}}}),i("tinymce.plugins.table.ui.Buttons",["tinymce.core.util.Tools"],function(e){var t=e.each;return{addButtons:function(e,n){function r(t){return function(){e.execCommand(t)}}var o=[];t("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"==t?o.push({text:"-"}):o.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:o}),e.addButton("tableprops",{title:"Table properties",onclick:n.tableProps,icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:r("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:r("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:r("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:r("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:r("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:r("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:r("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:r("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:r("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:r("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:r("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:r("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:r("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:r("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:r("mceTableDeleteCol")})},addToolbars:function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=e.settings.table_toolbar;""!==n&&!1!==n&&(n||(n="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(t,n))}}}),i("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),i("tinymce.plugins.table.ui.Dialogs",["tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.table.actions.InsertTable"],function(e,t,n){var r=e.each;return function(o){function i(){var e=o.settings.color_picker_callback;if(e)return function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}}function a(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i()}]}]}}function u(e){return e?e.replace(/px$/,""):""}function c(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function s(e){r("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function l(e){r("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}function f(t,n,r){function o(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return o(t,r||[])}function d(e,t,n){var r=t.toJSON(),o=e.parseStyle(r.style);n?(t.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=r.borderColor,o["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}function p(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}function m(e,t,n){var o=e.parseStyle(e.getAttrib(t,"style"));r(n,function(e){o[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(i){function l(){function r(e,t,n){if("TD"===e.tagName||"TH"===e.tagName)C.setStyle(e,t,n);else if(e.children)for(var o=0;o<e.children.length;o++)r(e.children[o],t,n)}var i;d(C,this),k=e.extend(k,this.toJSON()),!1===k["class"]&&delete k["class"],o.undoManager.transact(function(){if(h||(h=n.insert(o,k.cols||1,k.rows||1)),o.dom.setAttribs(h,{style:k.style,"class":k["class"]}),o.settings.table_style_by_css){if(w=[],w.push({name:"border-width",value:c(k.border)}),w.push({name:"border-spacing",value:c(k.cellspacing)}),m(C,h,w),C.setAttribs(h,{"data-mce-border-color":k.borderColor,"data-mce-cell-padding":k.cellpadding,"data-mce-border":k.border}),h.children)for(var e=0;e<h.children.length;e++)r(h.children[e],{"border-width":c(k.border),"border-color":k.borderColor,padding:c(k.cellpadding)})}else o.dom.setAttribs(h,{border:k.border,cellpadding:k.cellpadding,cellspacing:k.cellspacing});C.getAttrib(h,"width")&&!o.settings.table_style_by_css?C.setAttrib(h,"width",u(k.width)):C.setStyle(h,"width",c(k.width)),C.setStyle(h,"height",c(k.height)),i=C.select("caption",h)[0],i&&!k.caption&&C.remove(i),!i&&k.caption&&(i=C.create("caption"),i.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',h.insertBefore(i,h.firstChild)),s(h),k.align&&o.formatter.apply("align"+k.align,{},h),o.focus(),o.addVisual()})}function g(e,t){function n(e,n){for(var r=0;r<n.length;r++){var o=C.getStyle(n[r],t);if(void 0===e&&(e=o),e!=o)return""}return e}var r,i=o.dom.select("td,th",e);return r=n(r,i)}var h,v,y,b,x,w,C=o.dom,k={};!0===i?(h=C.getParent(o.selection.getStart(),"table"))&&(k={
width:u(C.getStyle(h,"width")||C.getAttrib(h,"width")),height:u(C.getStyle(h,"height")||C.getAttrib(h,"height")),cellspacing:u(C.getStyle(h,"border-spacing")||C.getAttrib(h,"cellspacing")),cellpadding:C.getAttrib(h,"data-mce-cell-padding")||C.getAttrib(h,"cellpadding")||g(h,"padding"),border:C.getAttrib(h,"data-mce-border")||C.getAttrib(h,"border")||g(h,"border"),borderColor:C.getAttrib(h,"data-mce-border-color"),caption:!!C.select("caption",h)[0],"class":C.getAttrib(h,"class")},r("left center right".split(" "),function(e){o.formatter.matchNode(h,"align"+e)&&(k.align=e)})):(v={label:"Cols",name:"cols"},y={label:"Rows",name:"rows"}),o.settings.table_class_list&&(k["class"]&&(k["class"]=k["class"].replace(/\s*mce\-item\-table\s*/g,"")),b={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),x={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},b]},!1!==o.settings.table_advtab?(p(C,k,h),o.windowManager.open({title:"Table properties",data:k,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},a(C)],onsubmit:l})):o.windowManager.open({title:"Table properties",data:k,body:x,onsubmit:l})},g.cell=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function n(e,t,n){(1===y.length||n)&&v.setStyle(e,t,n)}function i(){d(v,this),g=e.extend(g,this.toJSON()),o.undoManager.transact(function(){r(y,function(e){t(e,"scope",g.scope),t(e,"style",g.style),t(e,"class",g["class"]),n(e,"width",c(g.width)),n(e,"height",c(g.height)),g.type&&e.nodeName.toLowerCase()!==g.type&&(e=v.rename(e,g.type)),1===y.length&&(s(e),l(e)),g.align&&o.formatter.apply("align"+g.align,{},e),g.valign&&o.formatter.apply("valign"+g.valign,{},e)}),o.focus()})}var m,g,h,v=o.dom,y=[];if(y=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!y.length&&m&&y.push(m),m=m||y[0]){y.length>1?g={width:"",height:"",scope:"","class":"",align:"",style:"",type:m.nodeName.toLowerCase()}:(g={width:u(v.getStyle(m,"width")||v.getAttrib(m,"width")),height:u(v.getStyle(m,"height")||v.getAttrib(m,"height")),scope:v.getAttrib(m,"scope"),"class":v.getAttrib(m,"class")},g.type=m.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(g.align=e)}),r("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(g.valign=e)}),p(v,g,m)),o.settings.table_cell_class_list&&(h={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},h]};!1!==o.settings.table_cell_advtab?o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:b},a(v)],onsubmit:i}):o.windowManager.open({title:"Cell properties",data:g,body:b,onsubmit:i})}},g.row=function(){function t(e,t,n){(1===x.length||n)&&b.setAttrib(e,t,n)}function n(e,t,n){(1===x.length||n)&&b.setStyle(e,t,n)}function i(){var i,a,u;d(b,this),v=e.extend(v,this.toJSON()),o.undoManager.transact(function(){var e=v.type;r(x,function(r){t(r,"scope",v.scope),t(r,"style",v.style),t(r,"class",v["class"]),n(r,"height",c(v.height)),e!==r.parentNode.nodeName.toLowerCase()&&(i=b.getParent(r,"table"),a=r.parentNode,u=b.select(e,i)[0],u||(u=b.create(e),i.firstChild?"CAPTION"===i.firstChild.nodeName?b.insertAfter(u,i.firstChild):i.insertBefore(u,i.firstChild):i.appendChild(u)),u.appendChild(r),a.hasChildNodes()||b.remove(a)),1===x.length&&s(r),v.align&&o.formatter.apply("align"+v.align,{},r)}),o.focus()})}var l,m,g,h,v,y,b=o.dom,x=[];l=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),r(l.rows,function(e){r(e.cells,function(t){if(b.getAttrib(t,"data-mce-selected")||t==m)return x.push(e),!1})}),(g=x[0])&&(x.length>1?v={height:"",scope:"","class":"",align:"",type:g.parentNode.nodeName.toLowerCase()}:(v={height:u(b.getStyle(g,"height")||b.getAttrib(g,"height")),scope:b.getAttrib(g,"scope"),"class":b.getAttrib(g,"class")},v.type=g.parentNode.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(v.align=e)}),p(b,v,g)),o.settings.table_row_class_list&&(h={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},h]},!1!==o.settings.table_row_advtab?o.windowManager.open({title:"Row properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},a(b)],onsubmit:i}):o.windowManager.open({title:"Row properties",data:v,body:y,onsubmit:i}))}}}),i("tinymce.plugins.table.ui.MenuItems",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Element","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.queries.TableTargets"],function(e,t,n,r,o,i){return{addMenuItems:function(a,u,c){function s(e){return function(){a.execCommand(e)}}var l=t.none(),f=[],d=[],p=[],m=[],g=function(e){e.disabled(!0)},h=function(e){e.disabled(!1)},v=function(){var e=this;f.push(e),l.fold(function(){g(e)},function(){h(e)})},y=function(){var e=this;d.push(e),l.fold(function(){g(e)},function(){h(e)})},b=function(){var e=this;p.push(e),l.fold(function(){g(e)},function(t){e.disabled(t.mergable().isNone())})},x=function(){var e=this;m.push(e),l.fold(function(){g(e)},function(t){e.disabled(t.unmergable().isNone())})},w=function(){l.fold(function(){e.each(f,g),e.each(d,g),e.each(p,g),e.each(m,g)},function(t){e.each(f,h),e.each(d,h),e.each(p,function(e){e.disabled(t.mergable().isNone())}),e.each(m,function(e){e.disabled(t.unmergable().isNone())})})};a.on("init",function(){a.on("nodechange",function(){var e=t.from(a.dom.getParent(a.selection.getStart(),"th,td"));l=e.bind(function(e){var t=r.fromDom(e);return n.table(t).map(function(e){return i.forMenu(c,e,t)})}),w()})});var C=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'},k=function(e,t,n,r){var o,i,a,u,c,s=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"==r.parent().rel;for(s.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=s.rows[i].childNodes[o].firstChild,c=(l?o>=t:o<=t)&&i<=n,e.dom.toggleClass(u,"mce-active",c),c&&(a=u);return a.parentNode},T=!1===a.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:u.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),u.table())},onshow:function(){k(a,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(e,"mce-active"),a.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:C(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(k(a,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),a.undoManager.transact(function(){o.insert(a,t.lastX+1,t.lastY+1)}),a.addVisual())}}]},S={text:"Table properties",context:"table",onPostRender:v,onclick:u.tableProps},E={text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"},_={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:s("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:s("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:s("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:s("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:s("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:s("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:s("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:s("mceTablePasteRowAfter"),onPostRender:y}]},A={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:s("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:s("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:s("mceTableDeleteCol"),onPostRender:y}]},N={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:s("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:s("mceTableMergeCells"),onPostRender:b},{text:"Split cell",onclick:s("mceTableSplitCells"),onPostRender:x}]};a.addMenuItem("inserttable",T),a.addMenuItem("tableprops",S),a.addMenuItem("deletetable",E),a.addMenuItem("row",_),a.addMenuItem("column",A),a.addMenuItem("cell",N)}}}),i("tinymce.plugins.table.Plugin",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.ResizeWire","ephox.snooker.api.TableDirection","ephox.snooker.api.TableResize","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.core.PluginManager","tinymce.plugins.table.actions.Clipboard","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.TableActions","tinymce.plugins.table.actions.TableCommands","tinymce.plugins.table.actions.TableWire","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.queries.TabContext","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.Selections","tinymce.plugins.table.ui.Buttons","tinymce.plugins.table.ui.Dialogs","tinymce.plugins.table.ui.MenuItems"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x,w){function C(c){var C=this,k=function(){return N},T=function(){return D.getOr(n.only(i.fromDom(c.getBody())))},S=h(c,k),E=new x(c),_=f(c,T),A=y(c);d.registerCommands(c,E,_,S,A),s.registerEvents(c,A,_,S),w.addMenuItems(c,E,A),b.addButtons(c,E),b.addToolbars(c);var N=t.none(),D=t.none(),R=t.none();c.on("init",function(){var n=r(m.directionAt),i=p.get(c);if(D=t.some(i),c.settings.object_resizing&&!1!==c.settings.table_resize_bars&&(!0===c.settings.object_resizing||"table"===c.settings.object_resizing)){var s=o(i,n);s.on(),s.events.startDrag.bind(function(){R=t.some(c.selection.getRng())}),s.events.afterResize.bind(function(t){var n=t.table(),r=u.descendants(n,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){a.remove(e,"data-mce-style")}),c.focus(),R.each(function(e){c.selection.setRng(e)}),c.undoManager.add()}),N=t.some(s)}}),c.on("PreInit",function(){c.serializer.addTempAttr(v.firstSelected()),c.serializer.addTempAttr(v.lastSelected())}),!1!==c.settings.table_tab_navigation&&c.on("keydown",function(e){g.handle(e,c,_,T)}),c.on("remove",function(){N.each(function(e){e.destroy()}),S.destroy()}),C.insertTable=function(e,t){l.insert(c,e,t)},C.setClipboardRows=d.setClipboardRows,C.getClipboardRows=d.getClipboardRows}return c.add("table",C),function(){}}),r("tinymce.plugins.table.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("p",Array),a("q",Error),i("n",["p","q"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("o",Object),i("2",["n","o"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),a("r",String),i("1",["2","p","q","r"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("s",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),a("t",document),i("6",["n","q","s","t"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return u(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return u(o)},u=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:u}}),i("v",["n"],function(e){var t=function(n,r){var o=function(e,o){return t(n+e,r+o)};return{left:e.constant(n),top:e.constant(r),translate:o}};return t}),i("5m",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("4t",["5m"],function(e){var t=function(t,n){for(var r=void 0!==n?n:e,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return void 0!==e[t]&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=void 0!==n?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("3r",["4t"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(void 0===r)throw e+" not available on this browser";return r}}}),i("2l",["3r"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),i("2p",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),a("63",Number),i("5n",["1","63","r"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}},o=function(e,n){var o=r(e,n);if(!o)return{major:0,minor:0};var i=function(e){return t(n.replace(o,"$"+e))};return u(i(1),i(2))},i=function(e,t){var r=n(t).toLowerCase();return 0===e.length?a():o(e,r)},a=function(){return u(0,0)},u=function(e,t){return{major:e,minor:t}};return{nu:u,detect:i,unknown:a}}),i("4u",["n","5n"],function(e,t){var n="Edge",r="Chrome",o="IE",i="Opera",a="Firefox",u="Safari",c=function(e,t){return function(){return t===e}},s=function(){return l({current:void 0,version:t.unknown()})},l=function(e){var t=e.current;return{current:t,version:e.version,isEdge:c(n,t),isChrome:c(r,t),isIE:c(o,t),isOpera:c(i,t),isFirefox:c(a,t),isSafari:c(u,t)}};return{unknown:s,nu:l,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(o),opera:e.constant(i),firefox:e.constant(a),safari:e.constant(u)}}),i("4v",["n","5n"],function(e,t){var n="Windows",r="iOS",o="Android",i="Linux",a="OSX",u="Solaris",c="FreeBSD",s=function(e,t){return function(){return t===e}},l=function(){return f({current:void 0,version:t.unknown()})},f=function(e){var t=e.current;return{current:t,version:e.version,isWindows:s(n,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(a,t),isLinux:s(i,t),isSolaris:s(u,t),isFreeBSD:s(c,t)}};return{unknown:l,nu:f,windows:e.constant(n),ios:e.constant(r),android:e.constant(o),linux:e.constant(i),osx:e.constant(a),solaris:e.constant(u),freebsd:e.constant(c)}}),i("4w",["n"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,c=o||a||u&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),l=s&&!c,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(f)}}}),i("4x",["1","5n","r"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),i("4z",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),i("50",["2","q"],function(e){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),i("3w",["4z","50","q"],function(e,t){var n=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},o=function(t,n){return l(t,n)?e.removeFromStart(t,n.length):t},i=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return l(t,n)?t:e.addToStart(t,n)},u=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},c=function(e,t){return-1!==e.indexOf(t)},s=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},l=function(e,t){return n(e,t,0)},f=function(e,t){return n(e,t,e.length-t.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:i,ensureLeading:a,ensureTrailing:u,endsWith:f,contains:c,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:s}}),i("4y",["n","3w"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),i("3s",["4u","4v","4w","4x","4y"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),u=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),s=r.detectOs(u,i).fold(t.unknown,t.nu);return{browser:c,os:s,deviceType:n(s,c,i)}}}}),a("3t",navigator),i("2m",["2p","3s","3t"],function(e,t,n){return{detect:e.cached(function(){var e=n.userAgent;return t.detect(e)})}}),i("2n",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("16",["1","2","6","2n","q","t"],function(e,t,n,r,o,i){var a=0,u=1,c=2,s=3,l=function(){var e=i.createElement("span");return void 0!==e.matches?a:void 0!==e.msMatchesSelector?u:void 0!==e.webkitMatchesSelector?c:void 0!==e.mozMatchesSelector?s:-1}(),f=r.ELEMENT,d=r.DOCUMENT,p=function(e,t){var n=e.dom();if(n.nodeType!==f)return!1;if(l===a)return n.matches(t);if(l===u)return n.msMatchesSelector(t);if(l===c)return n.webkitMatchesSelector(t);if(l===s)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},m=function(e){return e.nodeType!==f&&e.nodeType!==d||0===e.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return m(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:p,one:function(e,r){var o=void 0===r?i:r.dom();return m(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),i("1r",["1","n","2l","2m","16"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=function(e,t){return e.dom().isEqualNode(t.dom())},u=function(n,r){return e.exists(r,t.curry(i,n))},c=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},s=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},l=r.detect().browser,f=l.isIE()?s:c;return{eq:i,isEqualNode:a,member:u,contains:f,is:o.is}}),i("14",["2n"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),u=o(e.TEXT),c=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:u,isDocument:c,isComment:i}}),i("12",["p","r"],function(e,t){var n=function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r},r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),i("1p",["2p","6","14","t"],function(e,t,n,r){var o=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return a(t.fromDom(r))}),a=function(e){var n=e.dom().body;if(null===n||void 0===n)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:a,inBody:o}}),i("2u",["12","2"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),i("2t",["12","1","n","2","1p","1r","6","2u"],function(e,t,n,r,o,i,a,u){var c=function(e){return p(o.body(),e)},s=function(t,o,i){for(var u=t.dom(),c=e.isFunction(i)?i:n.constant(!1);u.parentNode;){u=u.parentNode;var s=a.fromDom(u);if(o(s))return r.some(s);if(c(s))break}return r.none()},l=function(e,t,n){return u(function(e){return t(e)},s,e,t,n)},f=function(e,t){var n=e.dom();return n.parentNode?d(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},d=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},p=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:c,ancestor:s,closest:l,sibling:f,child:d,descendant:p}}),i("23",["n","1r","6","14","2t","t"],function(e,t,n,r,o,i){return{attached:function(r,a){var u=a||n.fromDom(i.documentElement);return o.ancestor(r,e.curry(t.eq,u)).isSome()},windowOf:function(e){var t=e.dom();return t===t.window?e:r.isDocument(e)?t.defaultView||t.parentWindow:null}}}),i("u",["v","23","6"],function(e,t,n){var r=function(t){var n=t.getBoundingClientRect();return e(n.left,n.top)},o=function(e,t){return void 0!==e?e:void 0!==t?t:0},i=function(e){var r=e.dom().ownerDocument,i=r.body,a=t.windowOf(n.fromDom(r)),c=r.documentElement,s=o(a.pageYOffset,c.scrollTop),l=o(a.pageXOffset,c.scrollLeft),f=o(c.clientTop,i.clientTop),d=o(c.clientLeft,i.clientLeft);return u(e).translate(l-d,s-f)},a=function(t){var n=t.dom();return e(n.offsetLeft,n.offsetTop)},u=function(o){var i=o.dom(),a=i.ownerDocument,u=a.body,c=n.fromDom(a.documentElement);return u===i?e(u.offsetLeft,u.offsetTop):t.attached(o,c)?r(i):e(0,0)};return{absolute:i,relative:a,viewport:u}}),i("3",["n","2","6","u","v"],function(e,t,n,r,o){return{only:function(r){var i=t.from(r.dom().documentElement).map(n.fromDom).getOr(r);return{parent:e.constant(i),view:e.constant(r),origin:e.constant(o(0,0))}},detached:function(t,n){var o=e.curry(r.absolute,n);return{parent:e.constant(n),view:e.constant(t),origin:o}},body:function(t,n){return{parent:e.constant(n),view:e.constant(t),origin:e.constant(o(0,0))}}}}),i("24",["1","n","p","q"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var u={};return e.each(o,function(e,n){u[e]=t.constant(i[n])}),u}}}),i("13",["2","o"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return void 0===e?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},u=function(e,t){var n=[];return r(e,function(e,r){
n.push(t(e,r))}),n},c=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var u=o[i],c=t[u];if(r(c,u,t))return e.some(c)}return e.none()},s=function(e){return u(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:u,tupleMap:i,find:c,keys:n,values:s,size:function(e){return s(e).length}}}),i("3u",["1","12","q"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),i("25",["1","n","13","2","3u","q","o"],function(e,t,n,r,o,i,a){return function(u,c){var s=u.concat(c);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",u),o.validateStrArr("optional",c),o.checkDupes(s),function(i){var l=n.keys(i);e.forall(u,function(t){return e.contains(l,t)})||o.reqMessage(u,l);var f=e.filter(l,function(t){return!e.contains(s,t)});f.length>0&&o.unsuppMessage(f);var d={};return e.each(u,function(e){d[e]=t.constant(i[e])}),e.each(c,function(e){d[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),d}}}),i("1y",["24","25"],function(e,t){return{immutable:e,immutableBag:t}}),i("7",["12","1","13","14","q","s"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},u=function(e,t,n){a(e.dom(),t,n)},c=function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},s=function(e,t){var n=e.dom().getAttribute(t);return null===n?void 0:n},l=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},f=function(e,t){e.dom().removeAttribute(t)},d=function(e){var t=e.dom().attributes;return void 0===t||null===t||0===t.length},p=function(e,t,n){l(e,n)&&!l(t,n)&&u(t,n,s(e,n))};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:u,setAll:c,get:s,has:l,remove:f,hasNone:d,transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){p(e,n,t)})}}}),i("3v",[],function(){return{isSupported:function(e){return void 0!==e.style}}}),a("3x",window),i("2r",["12","1","13","2","7","1p","6","14","3v","3w","q","s","3x"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(t,n,r){if(!e.isString(r))throw f.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(n,r)},m=function(e,t){c.isSupported(e)&&e.style.removeProperty(t)},g=function(e,t,n){var r=e.dom();p(r,t,n)},h=function(e,t){var r=e.dom();n.each(t,function(e,t){p(r,t,e)})},v=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){m(r,t)},function(e){p(r,t,e)})})},y=function(e,t){var n=e.dom(),r=d.getComputedStyle(n),o=r.getPropertyValue(t),a=""!==o||i.inBody(e)?o:b(n,t);return null===a?void 0:a},b=function(e,t){return c.isSupported(e)?e.style.getPropertyValue(t):""},x=function(e,t){var n=e.dom(),o=b(n,t);return r.from(o).filter(function(e){return e.length>0})},w=function(e){var t={},n=e.dom();if(c.isSupported(n))for(var r=0;r<n.style.length;r++){var o=n.style.item(r);t[o]=n.style[o]}return t},C=function(e,t,n){var r=a.fromTag(e);return g(r,t,n),x(r,t).isSome()},k=function(e,t){var n=e.dom();m(n,t),o.has(e,"style")&&""===s.trim(o.get(e,"style"))&&o.remove(e,"style")},T=function(e,t){var n=o.get(e,"style"),r=t(e);return(void 0===n?o.remove:o.set)(e,"style",n),r},S=function(e,t,n){x(e,n).each(function(e){x(t,n).isNone()&&g(t,n,e)})};return{copy:function(e,t){var n=e.dom(),r=t.dom();c.isSupported(n)&&c.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:g,preserve:T,setAll:h,setOptions:v,remove:k,get:y,getRaw:x,getAllRaw:w,isValidValue:C,reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){u.isElement(e)&&u.isElement(n)&&t.each(r,function(t){S(e,n,t)})}}}),i("3y",["12","1","2r","3v"],function(e,t,n,r){return function(o,i){var a=function(t,n){if(!e.isNumber(n)&&!n.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+n;var i=t.dom();r.isSupported(i)&&(i.style[o]=n+"px")},u=function(e){var t=i(e);if(t<=0||null===t){var r=n.get(e,o);return parseFloat(r)||0}return t},c=u,s=function(e,r){return t.foldl(r,function(t,r){var o=n.get(e,r),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i},0)};return{set:a,get:u,getOuter:c,aggregate:s,max:function(e,t,n){var r=s(e,n);return t>r?t-r:0}}}}),i("26",["2r","3y"],function(e,t){var n=t("height",function(e){return e.dom().offsetHeight});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=n.max(t,r,o);e.set(t,"max-height",i+"px")}}}),i("27",["2r","3y"],function(e,t){var n=t("width",function(e){return e.dom().offsetWidth});return{set:function(e,t){n.set(e,t)},get:function(e){return n.get(e)},getOuter:function(e){return n.getOuter(e)},setMax:function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=n.max(t,r,o);e.set(t,"max-width",i+"px")}}}),i("11",["1","n","1y","26","u","27"],function(e,t,n,r,o,i){var a=n.immutable("row","y"),u=n.immutable("col","x"),c=function(e){return o.absolute(e).left()+i.getOuter(e)},s=function(e){return o.absolute(e).left()},l=function(e,t){return u(e,s(t))},f=function(e,t){return u(e,c(t))},d=function(e){return o.absolute(e).top()},p=function(e,t){return a(e,d(t))},m=function(e,t){return a(e,d(t)+r.getOuter(t))},g=function(t,n,r){if(0===r.length)return[];var o=e.map(r.slice(1),function(e,n){return e.map(function(e){return t(n,e)})}),i=r[r.length-1].map(function(e){return n(r.length-1,e)});return o.concat([i])},h=function(e){return-e},v={delta:t.identity,positions:t.curry(g,p,m),edge:d},y={delta:t.identity,edge:s,positions:t.curry(g,l,f)};return{height:v,rtl:{delta:h,edge:c,positions:t.curry(g,f,l)},ltr:y}}),i("w",["11"],function(e){return{ltr:e.ltr,rtl:e.rtl}}),i("4",["w"],function(e){return function(t){var n=function(n){return t(n).isRtl()?e.rtl:e.ltr},r=function(e,t){return n(t).delta(e,t)},o=function(e,t){return n(t).positions(e,t)};return{delta:r,edge:function(e){return n(e).edge(e)},positions:o}}}),i("x",["1","1y"],function(e,t){return function(n){var r=t.immutable.apply(null,n),o=[];return{bind:function(e){if(void 0===e)throw"Event bind error: undefined handler";o.push(e)},unbind:function(t){o=e.filter(o,function(e){return e!==t})},trigger:function(){var t=r.apply(null,arguments);e.each(o,function(e){e(t)})}}}}),i("y",["13"],function(e){return{create:function(t){return{registry:e.map(t,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:e.map(t,function(e){return e.trigger})}}}}),i("3z",[],function(){var e=function(){return i(function(e){return e()})},t=function(e){return i(function(t,n){return n(e)})},n=function(e,t){return i(function(n,r,o){return o(e,t)})},r=function(e,t,n){return i(function(r,o,i,a){return a(e,t,n)})},o=function(e,t){return i(function(n,r,o,i,a){return a(e,t)})},i=function(e){return{fold:e}};return{none:e,only:t,left:n,middle:r,right:o}}),a("2g",Math),i("28",["1","n","3z","2g"],function(e,t,n,r){var o=function(e,t){return 0===e.length?n.none():1===e.length?n.only(0):0===t?n.left(0,1):t===e.length-1?n.right(t-1,t):t>0&&t<e.length-1?n.middle(t-1,t,t+1):n.none()};return{determine:function(n,i,a,u){var c=n.slice(0),s=o(n,i),l=function(n){return e.map(n,t.constant(0))},f=t.constant(l(c)),d=function(e){return u.singleColumnWidth(c[e],a)},p=function(e,t){if(a>=0){var n=r.max(u.minCellWidth(),c[t]-a);return l(c.slice(0,e)).concat([a,n-c[t]]).concat(l(c.slice(t+1)))}var o=r.max(u.minCellWidth(),c[e]+a),i=c[e]-o;return l(c.slice(0,e)).concat([o-c[e],i]).concat(l(c.slice(t+1)))},m=p,g=function(e,t,n){return p(t,n)},h=function(e,t){if(a>=0)return l(c.slice(0,t)).concat([a]);var n=r.max(u.minCellWidth(),c[t]+a);return l(c.slice(0,t)).concat([n-c[t]])};return s.fold(f,d,m,g,h)}}}),i("30",["1y"],function(e){var t=e.immutable("width","height"),n=e.immutable("rows","columns"),r=e.immutable("row","column"),o=e.immutable("x","y"),i=e.immutable("element","rowspan","colspan"),a=e.immutable("element","rowspan","colspan","isNew");return{dimensions:t,grid:n,address:r,coords:o,extended:e.immutable("element","rowspan","colspan","row","column"),detail:i,detailnew:a,rowdata:e.immutable("element","cells","section"),elementnew:e.immutable("element","isNew"),rowdatanew:e.immutable("element","cells","section","isNew"),rowcells:e.immutable("cells","section"),rowdetails:e.immutable("details","section"),bounds:e.immutable("startRow","startCol","finishRow","finishCol")}}),i("40",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),i("2w",["12","1","n","2","1y","40","1r","6"],function(e,t,n,r,o,i,a,u){var c=function(e){return u.fromDom(e.dom().ownerDocument)},s=function(e){var t=c(e);return u.fromDom(t.dom().documentElement)},l=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return u.fromDom(n)},f=function(e){var t=e.dom();return r.from(t.parentNode).map(u.fromDom)},d=function(e){return f(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},p=function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,s=u.fromDom(c);if(a.push(s),!0===o(s))break;i=c}return a},m=function(e){var n=function(n){return t.filter(n,function(t){return!a.eq(e,t)})};return f(e).map(x).map(n).getOr([])},g=function(e){var t=e.dom();return r.from(t.offsetParent).map(u.fromDom)},h=function(e){var t=e.dom();return r.from(t.previousSibling).map(u.fromDom)},v=function(e){var t=e.dom();return r.from(t.nextSibling).map(u.fromDom)},y=function(e){return t.reverse(i.toArray(e,h))},b=function(e){return i.toArray(e,v)},x=function(e){var n=e.dom();return t.map(n.childNodes,u.fromDom)},w=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(u.fromDom)},C=function(e){return w(e,0)},k=function(e){return w(e,e.dom().childNodes.length-1)},T=function(e){return e.dom().childNodes.length},S=o.immutable("element","offset");return{owner:c,defaultView:l,documentElement:s,parent:f,findIndex:d,parents:p,siblings:m,prevSibling:h,offsetParent:g,prevSiblings:y,nextSibling:v,nextSiblings:b,children:x,child:w,firstChild:C,lastChild:k,childNodesCount:T,leaf:function(e,t){var n=x(e);return n.length>0&&t<n.length?S(n[t],0):S(e,t)}}}),i("2x",["1","n","16","2w"],function(e,t,n,r){var o=function(e,n){return i(e,n,t.constant(!0))},i=function(t,o,a){return e.bind(r.children(t),function(e){return n.is(e,o)?a(e)?[e]:[]:i(e,o,a)})};return{firstLayer:o,filterFirstLayer:i}}),i("15",["1","1p","2w"],function(e,t,n){var r=function(e){return u(t.body(),e)},o=function(t,r,o){return e.filter(n.parents(t,o),r)},i=function(t,r){return e.filter(n.siblings(t),r)},a=function(t,r){return e.filter(n.children(t),r)},u=function(t,r){var o=[];return e.each(n.children(t),function(e){r(e)&&(o=o.concat([e])),o=o.concat(u(e,r))}),o};return{all:r,ancestors:o,siblings:i,children:a,descendants:u}}),i("8",["15","16"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),i("1s",["2t","16","2u"],function(e,t,n){var r=function(e){return t.one(e)},o=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:r,ancestor:o,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,r,i){return n(t.is,o,e,r,i)}}}),a("2v",parseInt),i("1a",["1","n","2","30","2x","7","14","8","1s","16","2w","2v"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=function(r,o,i){var u=void 0!==i?i:t.constant(!1);if(u(o))return n.none();if(e.contains(r,a.name(o)))return n.some(o);var l=function(e){return s.is(e,"table")||u(e)};return c.ancestor(o,r.join(","),l)},p=function(e,t){return d(["td","th"],e,t)},m=function(e){return o.firstLayer(e,"th,td")},g=function(e,t){return d(["caption","tr","tbody","tfoot","thead"],e,t)},h=function(e,t){return l.parent(t).map(function(t){return u.children(t,e)})},v=t.curry(h,"th,td"),y=t.curry(h,"tr"),b=function(e){return c.descendant(e,"th,td")},x=function(e,t){return c.closest(e,"table",t)},w=function(e,t){return d(["tr"],e,t)},C=function(e){return o.firstLayer(e,"tr")},k=function(e,t){return f(i.get(e,t),10)};return{cell:p,firstCell:b,cells:m,neighbourCells:v,table:x,row:w,rows:C,notCell:g,neighbourRows:y,attr:k,grid:function(e,t,n){var o=k(e,t),i=k(e,n);return r.grid(o,i)}}}),i("29",["1","30","1a","7","14","2w"],function(e,t,n,r,o,i){return{fromTable:function(a){var u=n.rows(a);return e.map(u,function(a){var u=a,c=i.parent(u),s=c.bind(function(e){var t=o.name(e);return"tfoot"===t||"thead"===t||"tbody"===t?t:"tbody"}),l=e.map(n.cells(a),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(u,l,s)})},fromPastedRows:function(o,i){return e.map(o,function(o){var a=e.map(n.cells(o),function(e){var n=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return t.detail(e,n,o)});return t.rowdata(o,a,i.section())})}}}),i("2a",["1","n","2","30","2g"],function(e,t,n,r,o){var i=function(e,t){return e+","+t},a=function(e,t,r){var o=e.access()[i(t,r)];return void 0!==o?n.some(o):n.none()},u=function(e,t,r){var o=c(e,function(e){return r(t,e.element())});return o.length>0?n.some(o[0]):n.none()},c=function(t,n){var r=e.bind(t.all(),function(e){return e.cells()});return e.filter(r,n)};return{generate:function(n){var a={},u=[],c=0,s=0;e.each(n,function(t,n){var l=[];e.each(t.cells(),function(e){for(var t=0;void 0!==a[i(n,t)];)t++;for(var u=r.extended(e.element(),e.rowspan(),e.colspan(),n,t),f=0;f<e.colspan();f++)for(var d=0;d<e.rowspan();d++){var p=n+d,m=t+f,g=i(p,m);a[g]=u,c=o.max(c,p+1),s=o.max(s,m+1)}l.push(u)}),u.push(r.rowdata(t.element(),l,t.section()))});var l=r.grid(c,s);return{grid:t.constant(l),access:t.constant(a),all:t.constant(u)}},getAt:a,findItem:u,filterItems:c,justCells:function(t){var n=e.map(t.all(),function(e){return e.cells()});return e.flatten(n)}}}),i("3m",["2"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),i("42",["1","2","3m","2g"],function(e,t,n,r){return{repeat:function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},range:function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n},unique:function(t,n){var r=[];return e.each(t,function(e,o){o<t.length-1&&!n(e,t[o+1])?r.push(e):o===t.length-1&&r.push(e)}),r},deduce:function(o,i){if(i<0||i>=o.length-1)return t.none();var a=o[i].fold(function(){var t=e.reverse(o.slice(0,i));return n.findMap(t,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:0})}),u=o[i+1].fold(function(){var e=o.slice(i+1);return n.findMap(e,function(e,t){return e.map(function(e){return{value:e,delta:t+1}})})},function(e){return t.some({value:e,delta:1})});return a.bind(function(e){return u.map(function(t){var n=t.delta+e.delta;return r.abs(t.value-e.value)/n})})}}}),i("41",["1","n","2","2a","42"],function(e,t,n,r,o){var i=function(n){var i=n.grid(),u=o.range(0,i.columns()),c=o.range(0,i.rows());return e.map(u,function(o){return a(function(){return e.bind(c,function(e){return r.getAt(n,e,o).filter(function(e){return e.column()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return r.getAt(n,0,o)})})},a=function(t,r,o){var i=t();return e.find(i,r).orThunk(function(){return n.from(i[0]).orThunk(o)}).map(function(e){return e.element()})};return{columns:i,rows:function(n){var i=n.grid(),u=o.range(0,i.rows()),c=o.range(0,i.columns());return e.map(u,function(o){return a(function(){return e.bind(c,function(e){return r.getAt(n,o,e).filter(function(e){return e.row()===o}).fold(t.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return r.getAt(n,o,0)})})}}}),i("2d",["n","2","3w","1a","14","7","2r","26","27","2g","2v"],function(e,t,n,r,o,i,a,u,c,s,l){var f=/(\d+(\.\d+)?)(\w|%)*/,d=/(\d+(\.\d+)?)%/,p=/(\d+(\.\d+)?)px|em/,m=function(e,t){a.set(e,"width",t+"px")},g=function(e,t){a.set(e,"width",t+"%")},h=function(e,t){a.set(e,"height",t+"px")},v=function(e,t){return a.getRaw(e,t).getOrThunk(function(){return a.get(e,t)})},y=function(e){return v(e,"height")},b=function(e,t,n,o){var i=r.table(e).map(function(e){var r=n(e);return s.floor(t/100*r)}).getOr(t);return o(e,i),i},x=function(e,t,r,i){var a=l(e,10);return n.endsWith(e,"%")&&"table"!==o.name(t)?b(t,a,r,i):a},w=function(e){var t=y(e);return t?x(t,e,u.get,h):u.get(e)},C=function(e,t,n){return n(e)/k(e,t)},k=function(e,t){return i.has(e,t)?l(i.get(e,t),10):1},T=function(e){return a.getRaw(e,"width").fold(function(){return t.from(i.get(e,"width"))},function(e){return t.some(e)})},S=function(e,t){return e/t.pixelWidth()*100},E=function(e,t,n){if(d.test(t)){var r=d.exec(t);return parseFloat(r[1],10)}var o=c.get(e),i=l(o,10);return S(i,n)},_=function(e,t){return T(e).fold(function(){var n=c.get(e),r=l(n,10);return S(r,t)},function(n){return E(e,n,t)})},A=function(e,t){return e/100*t.pixelWidth()},N=function(e,t,n){if(p.test(t)){var r=p.exec(t);return l(r[1],10)}if(d.test(t)){var o=d.exec(t),i=parseFloat(o[1],10);return A(i,n)}var a=c.get(e);return l(a,10)},D=function(e,t){return T(e).fold(function(){var t=c.get(e);return l(t,10)},function(n){return N(e,n,t)})},R=function(e){return C(e,"rowspan",w)},P=function(n){return T(n).bind(function(n){if(f.test(n)){var r=f.exec(n);return t.some({width:e.constant(r[1]),unit:e.constant(r[3])})}return t.none()})},I=function(e,t,n){a.set(e,"width",t+n)};return{percentageBasedSizeRegex:e.constant(d),pixelBasedSizeRegex:e.constant(p),setPixelWidth:m,setPercentageWidth:g,setHeight:h,getPixelWidth:D,getPercentageWidth:_,getGenericWidth:P,setGenericWidth:I,getHeight:R,getRawWidth:T}}),i("2f",["n","7","2r","2v"],function(e,t,n,r){var o=function(e,n){return t.has(e,n)&&r(t.get(e,n),10)>1},i=function(e){return o(e,"colspan")},a=function(e){return o(e,"rowspan")},u=function(e,t){return r(n.get(e,t),10)};return{hasColspan:i,hasRowspan:a,minWidth:e.constant(10),minHeight:e.constant(10),getInt:u}}),i("2b",["1","n","41","2d","2f","42","2r"],function(e,t,n,r,o,i,a){var u=function(e,t,n){return a.getRaw(e,t).fold(function(){return n(e)+"px"},function(e){return e})},c=function(e){return u(e,"width",r.getPixelWidth)},s=function(e){return u(e,"height",r.getHeight)},l=function(r,a,u,c,s){var l=n.columns(r),f=e.map(l,function(e){return e.map(a.edge)});return e.map(l,function(e,n){return e.filter(t.not(o.hasColspan)).fold(function(){var e=i.deduce(f,n);return c(e)},function(e){return u(e,s)})})},f=function(e){return e.map(function(e){return e+"px"}).getOr("")},d=function(e,t){return l(e,t,c,f)},p=function(e,t,n){return l(e,t,r.getPercentageWidth,function(e){return e.fold(function(){return n.minCellWidth()},function(e){return e/n.pixelWidth()*100})},n)},m=function(e,t,n){return l(e,t,r.getPixelWidth,function(e){return e.getOrThunk(n.minCellWidth)},n)},g=function(r,a,u,c){var s=n.rows(r),l=e.map(s,function(e){return e.map(a.edge)});return e.map(s,function(e,n){return e.filter(t.not(o.hasRowspan)).fold(function(){var e=i.deduce(l,n);return c(e)},function(e){return u(e)})})};return{getRawWidths:d,getPixelWidths:m,getPercentageWidths:p,getPixelHeights:function(e,t){return g(e,t,r.getHeight,function(e){return e.getOrThunk(o.minHeight)})},getRawHeights:function(e,t){return g(e,t,s,f)}}}),i("2c",["1","n","2a","2v"],function(e,t,n){var r=function(e,t,n){for(var r=0,o=e;o<t;o++)r+=void 0!==n[o]?n[o]:0;return r};return{recalculateWidth:function(o,i){var a=n.justCells(o);return e.map(a,function(e){var n=r(e.column(),e.column()+e.colspan(),i);return{element:e.element,width:t.constant(n),colspan:e.colspan}})},recalculateHeight:function(o,i){var a=n.justCells(o);return e.map(a,function(e){var n=r(e.row(),e.row()+e.rowspan(),i);return{element:e.element,height:t.constant(n),rowspan:e.rowspan}})},matchRowHeight:function(n,r){return e.map(n.all(),function(e,n){return{element:e.element,height:t.constant(r[n])}})}}}),i("2e",["1","n","2b","2d","2f","27","2g"],function(e,t,n,r,o,i,a){var u=function(e,a){var u=parseFloat(e,10),c=i.get(a),s=function(e){return e/c*100},l=function(e){return[100-e]},f=function(){return o.minWidth()/c*100},d=function(e,t,n){var o=u+n;r.setPercentageWidth(e,o)};return{width:t.constant(u),pixelWidth:t.constant(c),getWidths:n.getPercentageWidths,getCellDelta:s,singleColumnWidth:l,minCellWidth:f,setElementWidth:r.setPercentageWidth,setTableWidth:d}},c=function(i){var u=parseInt(i,10),c=t.identity,s=function(e){return[a.max(min,e+step)-e]},l=function(t,n){var o=e.foldr(n,function(e,t){return e+t},0);r.setPixelWidth(t,o)};return{width:t.constant(u),pixelWidth:t.constant(u),getWidths:n.getPixelWidths,getCellDelta:c,singleColumnWidth:s,minCellWidth:o.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:l}},s=function(e,t){if(r.percentageBasedSizeRegex().test(t)){var n=r.percentageBasedSizeRegex().exec(t);return u(n[1],e)}if(r.pixelBasedSizeRegex().test(t)){var o=r.pixelBasedSizeRegex().exec(t);return c(o[1])}var a=i.get(e);return c(a)};return{getTableSize:function(e){return r.getRawWidth(e).fold(function(){var t=i.get(e);return c(t)},function(t){return s(e,t)})}}}),i("z",["1","28","29","2a","2b","2c","2d","2e","2f","2g"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e){return r.generate(e)},f=function(t){return e.foldr(t,function(e,t){return e+t},0)},d=function(e){var t=n.fromTable(e);return l(t)};return{adjustWidth:function(n,r,o,a){var c=u.getTableSize(n),s=c.getCellDelta(r),l=d(n),f=c.getWidths(l,a,c),p=t.determine(f,o,s,c),m=e.map(p,function(e,t){return e+f[t]}),g=i.recalculateWidth(l,m);e.each(g,function(e){c.setElementWidth(e.element(),e.width())}),o===l.grid().columns()-1&&c.setTableWidth(n,m,s)},adjustHeight:function(t,n,r,u){var l=d(t),p=o.getPixelHeights(l,u),m=e.map(p,function(e,t){return r===t?s.max(n+e,c.minHeight()):e}),g=i.recalculateHeight(l,m),h=i.matchRowHeight(l,m);e.each(h,function(e){a.setHeight(e.element(),e.height())}),e.each(g,function(e){a.setHeight(e.element(),e.height())});var v=f(m);a.setHeight(t,v)},adjustWidthTo:function(t,n,r){var o=u.getTableSize(t),a=l(n),c=o.getWidths(a,r,o),s=i.recalculateWidth(a,c);e.each(s,function(e){o.setElementWidth(e.element(),e.width())});var f=e.foldr(c,function(e,t){return t+e},0);s.length>0&&o.setElementWidth(t,f)}}}),i("4g",["1","n","13","12","3u","q"],function(e,t,n,r,o,i){var a=function(e,t){return u(e,t,{validate:r.isFunction,label:"function"})},u=function(t,r,a){if(0===r.length)throw new i("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(i){var u=n.keys(i);e.forall(r,function(t){return e.contains(u,t)})||o.reqMessage(r,u),t(r,u);var c=e.filter(r,function(e){return!a.validate(i[e],e)});return c.length>0&&o.invalidTypeMessage(c,a.label),i}},c=function(t,n){var r=e.filter(n,function(n){return!e.contains(t,n)});r.length>0&&o.unsuppMessage(r)},s=t.noop;return{exactly:t.curry(a,c),ensure:t.curry(a,s),ensureWith:t.curry(u,s)}}),i("51",["4g"],function(e){return{mode:e.exactly(["compare","extract","mutate","sink"]),sink:e.exactly(["element","start","stop","destroy"]),api:e.exactly(["forceDrop","drop","move","delayDrop"])}}),i("47",[],function(){return{css:function(e){var t=e.replace(/\./g,"-");return{resolve:function(e){return t+"-"+e}}}}}),i("5o",["47"],function(e){return{resolve:e.css("ephox-dragster").resolve}}),i("4i",["12","p","q"],function(e,t,n){var r=function(e,t){return t},o=function(t,n){return e.isObject(t)&&e.isObject(n)?a(t,n):n},i=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var u=r[a];for(var c in u)u.hasOwnProperty(c)&&(i[c]=e(i[c],u[c]))}return i}},a=i(o),u=i(r);return{deepMerge:a,merge:u}}),i("48",[],function(){return function(e,t,n){var r=n||!1,o=function(){t(),r=!0},i=function(){e(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}}),i("55",["1","7"],function(e,t){var n=function(e,n){var r=t.get(e,n);return void 0===r||""===r?[]:r.split(" ")};return{read:n,add:function(e,r,o){var i=n(e,r),a=i.concat([o]);t.set(e,r,a.join(" "))},remove:function(r,o,i){var a=e.filter(n(r,o),function(e){return e!==i});a.length>0?t.set(r,o,a.join(" ")):t.remove(r,o)}}}),i("49",["1","55"],function(e,t){var n=function(e){return void 0!==e.dom().classList},r=function(e){return t.read(e,"class")},o=function(e,n){return t.add(e,"class",n)},i=function(e,n){return t.remove(e,"class",n)};return{get:r,add:o,remove:i,toggle:function(t,n){e.contains(r(t),n)?i(t,n):o(t,n)},supports:n}}),i("2q",["48","7","49"],function(e,t,n){var r=function(e,t){n.supports(e)?e.dom().classList.add(t):n.add(e,t)},o=function(e){0===(n.supports(e)?e.dom().classList:n.get(e)).length&&t.remove(e,"class")},i=function(e,t){if(n.supports(e)){e.dom().classList.remove(t)}else n.remove(e,t);o(e)},a=function(e,t){return n.supports(e)?e.dom().classList.toggle(t):n.toggle(e,t)},u=function(t,r){var o=n.supports(t),i=t.dom().classList;return e(function(){o?i.remove(r):n.remove(t,r)},function(){o?i.add(r):n.add(t,r)},c(t,r))},c=function(e,t){return n.supports(e)&&e.dom().classList.contains(t)};return{add:r,remove:i,toggle:a,toggler:u,has:c}}),i("1l",["2w"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,r){e.nextSibling(n).fold(function(){e.parent(n).each(function(e){o(e,r)})},function(e){t(e,r)})},r=function(t,n){e.firstChild(t).fold(function(){o(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},o=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:n,prepend:r,append:o,appendAt:function(n,r,i){e.child(n,i).fold(function(){o(n,r)},function(e){t(e,r)})},wrap:function(e,n){t(e,n),o(n,e)}}}),i("2y",["1","1l"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){var i=0===o?n:r[o-1];t.after(i,e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),i("1m",["1","2y","2w"],function(e,t,n){var r=function(t){t.dom().textContent="",e.each(n.children(t),function(e){o(e)})},o=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(e){var r=n.children(e);r.length>0&&t.before(e,r),o(e)}}}),i("52",["5o","4i","2q","2r","6","1m"],function(e,t,n,r,o,i){return function(a){var u=t.merge({layerClass:e.resolve("blocker")},a),c=o.fromTag("div");return r.setAll(c,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),n.add(c,e.resolve("blocker")),n.add(c,u.layerClass),{element:function(){return c},destroy:function(){i.remove(c)}}}}),i("4a",["n","6"],function(e,t){var n=function(t,n,r,o,i,a,u){return{target:e.constant(t),x:e.constant(n),y:e.constant(r),stop:o,prevent:i,kill:a,raw:e.constant(u)}},r=function(r,o){return function(i){if(r(i)){var a=t.fromDom(i.target),u=function(){i.stopPropagation()},c=function(){i.preventDefault()},s=e.compose(c,u),l=n(a,i.clientX,i.clientY,u,c,s,i);o(l)}}},o=function(t,n,o,a,u){var c=r(o,a);return t.dom().addEventListener(n,c,u),{unbind:e.curry(i,t,n,c,u)}},i=function(e,t,n,r){e.dom().removeEventListener(t,n,r)};return{bind:function(e,t,n,r){return o(e,t,n,r,!1)},capture:function(e,t,n,r){return o(e,t,n,r,!0)}}}),i("2o",["n","4a"],function(e,t){var n=e.constant(!0);return{bind:function(e,r,o){return t.bind(e,r,n,o)},capture:function(e,r,o){return t.capture(e,r,n,o)}}}),i("43",["51","52","2","v","2o","1l","1m"],function(e,t,n,r,o,i,a){var u=function(e,t){return r(t.left()-e.left(),t.top()-e.top())},c=function(e){return n.some(r(e.x(),e.y()))},s=function(e,t){e.mutate(t.left(),t.top())},l=function(n,r){var u=t(r),c=o.bind(u.element(),"mousedown",n.forceDrop),s=o.bind(u.element(),"mouseup",n.drop),l=o.bind(u.element(),"mousemove",n.move),f=o.bind(u.element(),"mouseout",n.delayDrop),d=function(){u.destroy(),s.unbind(),l.unbind(),f.unbind(),c.unbind()},p=function(e){i.append(e,u.element())},m=function(){a.remove(u.element())};return e.sink({element:u.element,start:p,stop:m,destroy:d})};return e.mode({compare:u,extract:c,sink:l,mutate:s})}),i("5p",["2","x","y"],function(e,t,n){return function(){var r=e.none(),o=function(){r=e.none()},i=function(t,n){var o=r.map(function(e){return t.compare(e,n)});return r=e.some(n),o},a=function(e,t){t.extract(e).each(function(e){i(t,e).each(function(e){u.trigger.move(e)})})},u=n.create({move:t(["info"])});return{onEvent:a,reset:o,events:u.registry}}}),i("5q",["n"],function(e){return function(){return{onEvent:function(){},reset:e.noop}}}),i("53",["5p","5q"],function(e,t){return function(){var n=t(),r=e(),o=n,i=function(){o.reset(),o=r},a=function(){o.reset(),o=n},u=function(e,t){o.onEvent(e,t)};return{on:i,off:a,isOn:function(){return o===r},onEvent:u,events:r.events}}}),a("5r",clearTimeout),a("5s",setTimeout),i("54",["5r","5s"],function(e,t){return{adaptable:function(n,r){var o=null,i=null;return{cancel:function(){null!==o&&(e(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){n.apply(null,i),o=null,i=null},r))}}},first:function(n,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=t(function(){n.apply(null,e),o=null,e=null},r))}}},last:function(n,r){var o=null,i=function(){null!==o&&(e(o),o=null)},a=function(){var i=arguments;null!==o&&e(o),o=t(function(){n.apply(null,i),o=null,i=null},r)};return{cancel:i,throttle:a}}}}),i("44",["51","53","54","x","y","p"],function(e,t,n,r,o,i){return{setup:function(a,u,c){var s=!1,l=o.create({start:r([]),stop:r([])}),f=t(),d=function(){b.stop(),f.isOn()&&(f.off(),l.trigger.stop())},p=n.last(d,200),m=function(e){b.start(e),f.on(),l.trigger.start()},g=function(e){p.cancel(),f.onEvent(e,u)};f.events.move.bind(function(e){u.mutate(a,e.info())});var h=function(){s=!0},v=function(){s=!1},y=function(e){return function(){var t=i.prototype.slice.call(arguments,0);if(s)return e.apply(null,t)}},b=u.sink(e.api({forceDrop:d,drop:y(d),move:y(g),delayDrop:y(p.throttle)}),c),x=function(){b.destroy()};return{element:b.element,go:m,on:h,off:v,destroy:x,events:l.registry}}}}),i("2h",["43","44","p"],function(e,t){return{transform:function(n,r){var o=void 0!==r?r:{},i=void 0!==o.mode?o.mode:e;return t.setup(n,i,r)}}}),i("45",["x","y"],function(e,t){return function(){var n=t.create({drag:e(["xDelta","yDelta"])});return{mutate:function(e,t){n.trigger.drag(e,t)},events:n.registry}}}),i("2i",["2","x","y","45"],function(e,t,n,r){return function(){var o=n.create({drag:t(["xDelta","yDelta","target"])}),i=e.none(),a=r();return a.events.drag.bind(function(e){i.each(function(t){o.trigger.drag(e.xDelta(),e.yDelta(),t)})}),{assign:function(t){i=e.some(t)},get:function(){return i},mutate:a.mutate,events:o.registry}}}),i("46",["7","2r","6"],function(e,t,n){return{col:function(r,o,i,a,u){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",
left:o-a/2+"px",top:i+"px",height:u+"px",width:a+"px"}),e.set(c,"data-column",r),c},row:function(r,o,i,a,u){var c=n.fromTag("div");return t.setAll(c,{position:"absolute",left:o+"px",top:i-u/2+"px",height:u+"px",width:a+"px"}),e.set(c,"data-row",r),c}}}),i("2k",["47"],function(e){return{resolve:e.css("ephox-snooker").resolve}}),i("2j",["1","41","29","2a","46","2k","1l","1m","2q","2r","8","26","u","27"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=i.resolve("resizer-bar"),g=i.resolve("resizer-rows"),h=i.resolve("resizer-cols"),v=7,y=function(t){var n=l.descendants(t.parent(),"."+m);e.each(n,u.remove)},b=function(t,n,r){var o=t.origin();e.each(n,function(e){e.each(function(e){var n=r(o,e);c.add(n,m),a.append(t.parent(),n)})})},x=function(e,t,n,r){b(e,t,function(e,t){var i=o.col(t.col(),t.x()-e.left(),n.top()-e.top(),v,r);return c.add(i,h),i})},w=function(e,t,n,r){b(e,t,function(e,t){var i=o.row(t.row(),n.left()-e.left(),t.y()-e.top(),r,v);return c.add(i,g),i})},C=function(e,t,n,r,o,i){var a=d.absolute(t),u=n.length>0?o.positions(n,t):[];w(e,u,a,p.getOuter(t));var c=r.length>0?i.positions(r,t):[];x(e,c,a,f.getOuter(t))},k=function(e,o,i,a){y(e,o);var u=n.fromTable(o),c=r.generate(u),s=t.rows(c),l=t.columns(c);C(e,o,s,l,i,a)},T=function(t,n){var r=l.descendants(t.parent(),"."+m);e.each(r,n)};return{refresh:k,hide:function(e){T(e,function(e){s.set(e,"display","none")})},show:function(e){T(e,function(e){s.set(e,"display","block")})},destroy:y,isRowBar:function(e){return c.has(e,g)},isColBar:function(e){return c.has(e,h)}}}),i("2s",["1s"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),i("10",["2h","n","2","x","y","2i","2j","2k","2f","1r","2o","1p","14","7","2q","2r","2s","1s","2v"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y){var b=u.resolve("resizer-bar-dragging");return function(u,x,w){var C=i(),k=e.transform(C,{}),T=n.none(),S=function(e,t){return n.from(p.get(e,t))};C.events.drag.bind(function(e){S(e.target(),"data-row").each(function(){var t=c.getInt(e.target(),"top");g.set(e.target(),"top",t+e.yDelta()+"px")}),S(e.target(),"data-column").each(function(){var t=c.getInt(e.target(),"left");g.set(e.target(),"left",t+e.xDelta()+"px")})});var E=function(e,t){return c.getInt(e,t)-y(p.get(e,"data-initial-"+t),10)};k.events.stop.bind(function(){C.get().each(function(e){T.each(function(t){S(e,"data-row").each(function(n){var r=E(e,"top");p.remove(e,"data-initial-top"),O.trigger.adjustHeight(t,r,y(n,10))}),S(e,"data-column").each(function(n){var r=E(e,"left");p.remove(e,"data-initial-left"),O.trigger.adjustWidth(t,r,y(n,10))}),a.refresh(u,t,w,x)})})});var _=function(e,t){O.trigger.startAdjust(),C.assign(e),p.set(e,"data-initial-"+t,y(g.get(e,t),10)),m.add(e,b),g.set(e,"opacity","0.2"),k.go(u.parent())},A=l.bind(u.parent(),"mousedown",function(e){a.isRowBar(e.target())&&_(e.target(),"top"),a.isColBar(e.target())&&_(e.target(),"left")}),N=function(e){return s.eq(e,u.view())},D=l.bind(u.view(),"mouseover",function(e){"table"===d.name(e.target())||h.ancestor(e.target(),"table",N)?(T="table"===d.name(e.target())?n.some(e.target()):v.ancestor(e.target(),"table",N),T.each(function(e){a.refresh(u,e,w,x)})):f.inBody(e.target())&&a.destroy(u)}),R=function(){A.unbind(),D.unbind(),P.unbind(),k.destroy(),a.destroy(u)},P=l.bind(u.view(),"dragstart",function(e){e.raw().preventDefault()}),I=function(e){a.refresh(u,e,w,x)},O=o.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:R,refresh:I,on:k.on,off:k.off,hideBars:t.curry(a.hide,u),showBars:t.curry(a.show,u),events:O.registry}}}),i("5",["x","y","z","10","11"],function(e,t,n,r,o){return function(i,a){var u=o.height,c=r(i,a,u),s=t.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});return c.events.adjustHeight.bind(function(e){s.trigger.beforeResize(e.table());var t=u.delta(e.delta(),e.table());n.adjustHeight(e.table(),t,e.row(),u),s.trigger.afterResize(e.table())}),c.events.startAdjust.bind(function(){s.trigger.startDrag()}),c.events.adjustWidth.bind(function(e){s.trigger.beforeResize(e.table());var t=a.delta(e.delta(),e.table());n.adjustWidth(e.table(),t,e.column(),a),s.trigger.afterResize(e.table())}),{on:c.on,off:c.off,hideBars:c.hideBars,showBars:c.showBars,destroy:c.destroy,events:s.registry}}}),a("17",tinymce.util.Tools.resolve),i("9",["17"],function(e){return e("tinymce.PluginManager")}),i("18",["1","13","1y","29","2a","2x","7","2r","6","1l","1m","16"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=n.immutable("minRow","minCol","maxRow","maxCol"),p=function(e,n){var r=e.grid().columns(),o=e.grid().rows(),i=o,a=r,u=0,c=0;return t.each(e.access(),function(e){if(n(e)){var t=e.row(),r=t+e.rowspan()-1,o=e.column(),s=o+e.colspan()-1;t<i?i=t:r>u&&(u=r),o<a?a=o:s>c&&(c=s)}}),d(i,a,u,c)},m=function(e,t,n){var r=e[n].element(),o=c.fromTag("td");s.append(o,c.fromTag("br")),(t?s.append:s.prepend)(r,o)},g=function(e,t,n,r){for(var i=t.grid().columns(),a=t.grid().rows(),u=0;u<a;u++)for(var c=!1,s=0;s<i;s++)if(!(u<n.minRow()||u>n.maxRow()||s<n.minCol()||s>n.maxCol())){var l=o.getAt(t,u,s).filter(r).isNone();l?m(e,c,u):c=!0}},h=function(t,n){var r=e.filter(i.firstLayer(t,"tr"),function(e){return 0===e.dom().childElementCount});e.each(r,l.remove),n.minCol()!==n.maxCol()&&n.minRow()!==n.maxRow()||e.each(i.firstLayer(t,"th,td"),function(e){a.remove(e,"rowspan"),a.remove(e,"colspan")}),a.remove(t,"width"),a.remove(t,"height"),u.remove(t,"width"),u.remove(t,"height")};return{extract:function(t,n){var a=function(e){return f.is(e.element(),n)},u=r.fromTable(t),c=o.generate(u),s=p(c,a),d="th:not("+n+"),td:not("+n+")",m=i.filterFirstLayer(t,"th,td",function(e){return f.is(e,d)});return e.each(m,l.remove),g(u,c,s,a),h(t,s),t}}}),i("1b",["7","6","1l","2y","1m","2w"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},u=function(e){return a(e,!1)},c=function(e){return a(e,!0)},s=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:u,shallowAs:s,deep:c,copy:function(e,t){var n=s(e,t),o=i.children(c(e));return r.append(n,o),n},mutate:function(e,t){var a=s(e,t);n.before(e,a);var u=i.children(e);return r.append(a,u),o.remove(e),a}}}),i("56",["2m","2","q"],function(e,t,n){return function(r,o){var i=function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return s(e).getOr("")},a=function(e){try{return u(e)}catch(e){return t.none()}},u=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},c=e.detect().browser,s=c.isIE()&&10===c.version.major?a:u;return{get:i,getOption:s,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),i("4b",["14","56"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),i("2z",["1","14","4b","2w"],function(e,t,n,r){var o=function(e){return"img"===t.name(e)?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},i="\xa0",a=function(e){return n.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf(i)>-1}).isSome()},u=["img","br"];return{getEnd:o,isEnd:function(e,t){return o(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(n){return a(n)||e.contains(u,t.name(n))}}}),i("1t",["2","2t","2w","2z"],function(e,t,n,r){var o=function(t,r){var o=function(t){for(var i=n.children(t),a=i.length-1;a>=0;a--){var u=i[a];if(r(u))return e.some(u);var c=o(u);if(c.isSome())return c}return e.none()};return o(t)};return{first:function(e){return t.descendant(e,r.isCursorPosition)},last:function(e){return o(e,r.isCursorPosition)}}}),i("19",["1","13","1r","1l","1b","6","14","7","2r","8","2w","1t"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=function(){var e=i.fromTag("td");return r.append(e,i.fromTag("br")),e},p=function(e,n,r){var i=o.copy(e,n);return t.each(r,function(e,t){null===e?u.remove(i,t):u.set(i,t,e)}),i},m=function(e){return e},g=function(e){return function(){return i.fromTag("tr",e.dom())}},h=function(t,i,a){return f.first(t).map(function(u){var c=a.join(","),l=s.ancestors(u,c,function(e){return n.eq(e,t)});return e.foldr(l,function(e,t){var n=o.shallow(t);return r.append(e,n),n},i)}).getOr(i)};return{cellOperations:function(e,t,n){var o=function(t){var o=l.owner(t.element()),u=i.fromTag(a.name(t.element()),o.dom()),s=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),f=s.length>0?h(t.element(),u,s):u;return r.append(f,i.fromTag("br")),c.copy(t.element(),u),c.remove(u,"height"),1!==t.colspan()&&c.remove(t.element(),"width"),e(t.element(),u),u};return{row:g(t),cell:o,replace:p,gap:d}},paste:function(e){return{row:g(e),cell:d,replace:m,gap:d}}}}),i("1c",["1","6","2w","t"],function(e,t,n,r){return{fromHtml:function(e,o){var i=o||r,a=i.createElement("div");return a.innerHTML=e,n.children(t.fromDom(a))},fromTags:function(n,r){return e.map(n,function(e){return t.fromTag(e,r)})},fromText:function(n,r){return e.map(n,function(e){return t.fromText(e,r)})},fromDom:function(n){return e.map(n,t.fromDom)}}}),i("1d",["6","1c","1l","2y","1m","2w"],function(e,t,n,r,o,i){var a=function(e){return e.dom().innerHTML};return{get:a,set:function(a,u){var c=i.owner(a),s=c.dom(),l=e.fromDom(s.createDocumentFragment()),f=t.fromHtml(u,s);r.append(l,f),o.empty(a),n.append(a,l)},getOuter:function(t){var r=e.fromTag("div"),o=e.fromDom(t.dom().cloneNode(!0));return n.append(r,o),a(r)}}}),i("5t",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]}),i("57",["5t","1","n","7","1r","2r","6","1l","2y","14","15","2t","1m","8","1s","4b","2w"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h){return function(){var v=function(e){return a.fromDom(e.dom().cloneNode(!1))},y=function(n){return!!s.isElement(n)&&("body"===s.name(n)||t.contains(e,s.name(n)))},b=function(e){return!!s.isElement(e)&&t.contains(["br","img","hr","input"],s.name(e))},x=function(e,t){return e.dom().compareDocumentPosition(t.dom())},w=function(e,t){var n=r.clone(e);r.setAll(t,n)};return{up:n.constant({selector:m.ancestor,closest:m.closest,predicate:f.ancestor,all:h.parents}),down:n.constant({selector:p.descendants,predicate:l.descendants}),styles:n.constant({get:i.get,getRaw:i.getRaw,set:i.set,remove:i.remove}),attrs:n.constant({get:r.get,set:r.set,remove:r.remove,copyTo:w}),insert:n.constant({before:u.before,after:u.after,afterAll:c.after,append:u.append,appendAll:c.append,prepend:u.prepend,wrap:u.wrap}),remove:n.constant({unwrap:d.unwrap,remove:d.remove}),create:n.constant({nu:a.fromTag,clone:v,text:a.fromText}),query:n.constant({comparePosition:x,prevSibling:h.prevSibling,nextSibling:h.nextSibling}),property:n.constant({children:h.children,name:s.name,parent:h.parent,isText:s.isText,isComment:s.isComment,isElement:s.isElement,getText:g.get,setText:g.set,isBoundary:y,isEmptyTag:b}),eq:o.eq,is:o.is}}}),i("5u",["1","n","2","1y"],function(e,t,n,r){var o=r.immutable("left","right"),i=function(n,r,o){var i=n.property().children(r);return e.findIndex(i,t.curry(n.eq,o)).map(function(e){return{before:t.constant(i.slice(0,e)),after:t.constant(i.slice(e+1))}})},a=function(e,t,n){return i(e,t,n).map(function(n){var r=e.create().clone(t);return e.insert().appendAll(r,n.after()),e.insert().after(t,r),o(t,r)})};return{breakToLeft:function(e,t,n){return i(e,t,n).map(function(r){var i=e.create().clone(t);return e.insert().appendAll(i,r.before().concat([n])),e.insert().appendAll(t,r.after()),e.insert().before(t,i),o(i,t)})},breakToRight:a,breakPath:function(e,t,o,i){var a=r.immutable("first","second","splits"),u=function(t,r,c){var s=a(t,n.none(),c);return o(t)?a(t,r,c):e.property().parent(t).bind(function(r){return i(e,r,t).map(function(e){var t=[{first:e.left,second:e.right}],i=o(r)?r:e.left();return u(i,n.some(e.right()),c.concat(t))}).getOr(s)})};return u(t,n.none(),[])}}}),i("5v",["1","n","2"],function(e,t,n){var r=function(e,t,n,r){return r(e,t,n[0],n.slice(1))},o=function(t,n,r,o){var a=n(t,r);return e.foldr(o,function(e,r){var o=n(t,r);return i(t,e,o)},a)},i=function(e,n,r){return n.bind(function(n){return r.filter(t.curry(e.eq,n))})};return{oneAll:function(e,t,i){return i.length>0?r(e,t,i,o):n.none()}}}),i("5w",["1","n","2","2g"],function(e,t,n,r){var o=function(e,n){return t.curry(e.eq,n)},i=function(t,i,a,u){var c=t.property().children(i);if(t.eq(i,a[0]))return n.some([a[0]]);if(t.eq(i,u[0]))return n.some([u[0]]);var s=function(n){var r=e.reverse(n),a=e.findIndex(r,o(t,i)).getOr(-1),u=a<r.length-1?r[a+1]:r[a];return e.findIndex(c,o(t,u))},l=s(a),f=s(u);return l.bind(function(e){return f.map(function(t){var n=r.min(e,t),o=r.max(e,t);return c.slice(n,o+1)})})},a=function(n,r,i,a){var u=void 0!==a?a:t.constant(!1),c=[r].concat(n.up().all(r)),s=[i].concat(n.up().all(i)),l=function(t){return e.findIndex(t,u).fold(function(){return t},function(e){return t.slice(0,e+1)})},f=l(c),d=l(s),p=e.find(f,function(t){return e.exists(d,o(n,t))});return{firstpath:t.constant(f),secondpath:t.constant(d),shared:t.constant(p)}};return{subset:function(e,t,n){var r=a(e,t,n);return r.shared().bind(function(t){return i(e,t,r.firstpath(),r.secondpath())})},ancestors:a}}),i("58",["5u","5v","5w"],function(e,t,n){return{sharedOne:function(e,n,r){return t.oneAll(e,n,r)},subset:function(e,t,r){return n.subset(e,t,r)},ancestors:function(e,t,r,o){return n.ancestors(e,t,r,o)},breakToLeft:function(t,n,r){return e.breakToLeft(t,n,r)},breakToRight:function(t,n,r){return e.breakToRight(t,n,r)},breakPath:function(t,n,r,o){return e.breakPath(t,n,r,o)}}}),i("4c",["57","58"],function(e,t){var n=e();return{sharedOne:function(e,r){return t.sharedOne(n,function(t,n){return e(n)},r)},subset:function(e,r){return t.subset(n,e,r)},ancestors:function(e,r,o){return t.ancestors(n,e,r,o)},breakToLeft:function(e,r){return t.breakToLeft(n,e,r)},breakToRight:function(e,r){return t.breakToRight(n,e,r)},breakPath:function(e,r,o){return t.breakPath(n,e,r,function(e,t,n){return o(t,n)})}}}),i("59",["n","2","2a"],function(e,t,n){var r=function(e,t){var n=t.column(),r=t.column()+t.colspan()-1,o=t.row(),i=t.row()+t.rowspan()-1;return n<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&i>=e.startRow()},o=function(e,t){return t.column()>=e.startCol()&&t.column()+t.colspan()-1<=e.finishCol()&&t.row()>=e.startRow()&&t.row()+t.rowspan()-1<=e.finishRow()};return{inSelection:r,isWithin:o,isRectangular:function(r,i){for(var a=!0,u=e.curry(o,i),c=i.startRow();c<=i.finishRow();c++)for(var s=i.startCol();s<=i.finishCol();s++)a=a&&n.getAt(r,c,s).exists(u);return a?t.some(i):t.none()}}}),i("4e",["30","2a","59","1r","2g"],function(e,t,n,r,o){var i=function(t,n){return e.bounds(o.min(t.row(),n.row()),o.min(t.column(),n.column()),o.max(t.row()+t.rowspan()-1,n.row()+n.rowspan()-1),o.max(t.column()+t.colspan()-1,n.column()+n.colspan()-1))},a=function(e,n,o){var a=t.findItem(e,n,r.eq),u=t.findItem(e,o,r.eq);return a.bind(function(e){return u.map(function(t){return i(e,t)})})};return{getAnyBox:a,getBox:function(e,t,r){return a(e,t,r).bind(function(t){return n.isRectangular(e,t)})}}}),i("4d",["1","n","2a","59","4e","1r"],function(e,t,n,r,o,i){return{moveBy:function(e,t,r,o){return n.findItem(e,t,i.eq).bind(function(t){var i=r>0?t.row()+t.rowspan()-1:t.row(),a=o>0?t.column()+t.colspan()-1:t.column();return n.getAt(e,i+r,a+o).map(function(e){return e.element()})})},intercepts:function(i,a,u){return o.getAnyBox(i,a,u).map(function(o){var a=n.filterItems(i,t.curry(r.inSelection,o));return e.map(a,function(e){return e.element()})})},parentCell:function(e,t){var r=function(e,t){return i.contains(t,e)};return n.findItem(e,t,r).bind(function(e){return e.element()})}}}),i("3q",["1a","29","2a","4d","4e","1r"],function(e,t,n,r,o,i){var a=function(t,n,o){return e.table(t).bind(function(e){var i=l(e);return r.moveBy(i,t,n,o)})},u=function(e,t,n){var o=l(e);return r.intercepts(o,t,n)},c=function(e,t,n,o,a){var u=l(e),c=i.eq(e,n)?t:r.parentCell(u,t),s=i.eq(e,a)?o:r.parentCell(u,o);return r.intercepts(u,c,s)},s=function(e,t,n){var r=l(e);return o.getBox(r,t,n)},l=function(e){var r=t.fromTable(e);return n.generate(r)};return{moveBy:a,intercepts:u,nestedIntercepts:c,getBox:s}}),i("3l",["1","n","2","4c","3q","1r","8","1s","16"],function(e,t,n,r,o,i,a,u,c){var s=function(e){return u.ancestor(e,"table")},l=function(e,t,a){return i.eq(e,t)?n.some([e]):s(e,a).bind(function(n){return s(t,a).bind(function(c){return i.eq(n,c)?o.intercepts(n,e,t):i.contains(n,c)?o.nestedIntercepts(n,e,n,t,c):i.contains(c,n)?o.nestedIntercepts(c,e,n,t,c):r.ancestors(e,t).shared().bind(function(r){return u.closest(r,"table",a).bind(function(r){return o.nestedIntercepts(r,e,n,t,c)})})})})},f=function(e,t){var r=a.descendants(e,t);return r.length>0?n.some(r):n.none()},d=function(t,n){return e.find(t,function(e){return c.is(e,n)})},p=function(e,n,o){return u.descendant(e,n).bind(function(n){return u.descendant(e,o).bind(function(e){return r.sharedOne(s,[n,e]).map(function(r){return{first:t.constant(n),last:t.constant(e),table:t.constant(r)}})})})},m=function(e,n){return u.ancestor(e,"table").bind(function(r){return u.descendant(r,n).bind(function(n){return l(n,e).map(function(r){return{boxes:t.constant(r),start:t.constant(n),finish:t.constant(e)}})})})};return{identify:l,retrieve:f,shiftSelection:function(e,t,n,r,i){return d(e,i).bind(function(e){return o.moveBy(e,t,n).bind(function(e){return m(e,r)})})},getEdges:p}}),i("21",["3l","2","3q","1r","1s"],function(e,t,n,r,o){return{retrieve:function(t,n){return e.retrieve(t,n)},retrieveBox:function(i,a,u){return e.getEdges(i,a,u).bind(function(e){var a=function(e){return r.eq(i,e)},u=o.ancestor(e.first(),"thead,tfoot,tbody,table",a),c=o.ancestor(e.last(),"thead,tfoot,tbody,table",a);return u.bind(function(o){return c.bind(function(i){return r.eq(o,i)?n.getBox(e.table(),e.first(),e.last()):t.none()})})})}}}),i("i",["n"],function(e){var t="data-mce-selected",n="td["+t+"],th["+t+"]",r="["+t+"]",o="data-mce-first-selected",i="td["+o+"],th["+o+"]",a="data-mce-last-selected",u="td["+a+"],th["+a+"]";return{selected:e.constant(t),selectedSelector:e.constant(n),attributeSelector:e.constant(r),firstSelected:e.constant(o),firstSelectedSelector:e.constant(i),lastSelected:e.constant(a),lastSelectedSelector:e.constant(u)}}),i("32",["1","13","12","p","q","s"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var u=[],c={};return e.each(a,function(s,l){var f=t.keys(s);if(1!==f.length)throw new o("one and only one name per case");var d=f[0],p=s[d];if(void 0!==c[d])throw new o("duplicate key detected:"+d);if("cata"===d)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(p))throw new o("case arguments must be an array");u.push(d),c[d]=function(){var n=arguments.length;if(n!==p.length)throw new o("Wrong number of arguments to case "+d+". Expected "+p.length+" ("+p+"), got "+n);for(var c=new r(n),s=0;s<c.length;s++)c[s]=arguments[s];var f=function(n){var r=t.keys(n);if(u.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+r.join(","));if(!e.forall(u,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+u.join(", "));return n[d].apply(null,c)};return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[l].apply(null,c)},match:f,log:function(e){i.log(e,{constructors:u,constructor:d,params:c})}}}}),c}}}),i("1f",["32"],function(e){var t=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(e,t,n,r){return e.fold(t,n,r)},none:t.none,multiple:t.multiple,single:t.single}}),i("31",["21","1","n","2","7","i","1f"],function(e,t,n,r,o,i,a){var u=function(e,t){return a.cata(t.get(),n.constant([]),n.identity,n.constant([e]))},c=function(e,n){var i=function(e){return o.has(e,"rowspan")&&parseInt(o.get(e,"rowspan"),10)>1||o.has(e,"colspan")&&parseInt(o.get(e,"colspan"),10)>1},a=u(e,n);return a.length>0&&t.forall(a,i)?r.some(a):r.none()};return{mergable:function(t,o){return a.cata(o.get(),r.none,function(o){return 0===o.length?r.none():e.retrieveBox(t,i.firstSelectedSelector(),i.lastSelectedSelector()).bind(function(e){return o.length>1?r.some({bounds:n.constant(e),cells:n.constant(o)}):r.none()})},r.none)},unmergable:c,selection:u}}),i("1e",["n","2","1y","31"],function(e,t,n,r){var o=function(n){return{element:e.constant(n),mergable:t.none,unmergable:t.none,selection:e.constant([n])}},i=function(t,n,o){return{element:e.constant(o),mergable:e.constant(r.mergable(n,t)),unmergable:e.constant(r.unmergable(o,t)),selection:e.constant(r.selection(o,t))}},a=function(e){return o(e)},u=n.immutable("element","clipboard","generators");return{noMenu:o,forMenu:i,notCell:a,paste:u,pasteRows:function(n,o,i,a,u){return{element:e.constant(i),mergable:t.none,unmergable:t.none,selection:e.constant(r.selection(i,n)),clipboard:e.constant(a),generators:e.constant(u)}}}}),i("a",["1","n","2","18","19","1a","1b","6","1c","14","1d","1e","i","1f"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=function(e){return i.table(e[0]).map(a.deep).map(function(e){return[r.extract(e,d.attributeSelector())]})};return{registerEvents:function(r,a,d,g){r.on("BeforeGetContent",function(n){var r=function(t){n.preventDefault(),m(t).each(function(t){n.content=e.map(t,l.getOuter).join("")})};!0===n.selection&&p.cata(a.get(),t.noop,r,t.noop)}),r.on("BeforeSetContent",function(t){if(!0===t.selection&&!0===t.paste){n.from(r.dom.getParent(r.selection.getStart(),"th,td")).each(function(n){var a=u.fromDom(n);i.table(a).bind(function(n){var i=e.filter(c.fromHtml(t.content),function(e){return"meta"!==s.name(e)});if(1===i.length&&"table"===s.name(i[0])){t.preventDefault();var l=u.fromDom(r.getDoc()),p=o.paste(l),m=f.paste(a,i[0],p);d.pasteCells(n,m).each(function(e){r.selection.setRng(e),r.focus(),g.clear(n)})}})})}})}}}),i("33",["7","2r","6","1l","2y"],function(e,t,n,r,o){var i=function(){return n.fromTag("table")},a=function(){return n.fromTag("tbody")},u=function(){return n.fromTag("tr")},c=function(){return n.fromTag("th")},s=function(){return n.fromTag("td")};return{render:function(l,f,d,p){var m=i();t.setAll(m,{"border-collapse":"collapse",width:"100%"}),e.set(m,"border","1");var g=a();r.append(m,g);for(var h=[],v=0;v<l;v++){for(var y=u(),b=0;b<f;b++){var x=v<d||b<p?c():s();b<p&&e.set(x,"scope","row"),v<d&&e.set(x,"scope","col"),r.append(x,n.fromTag("br")),t.set(x,"width",100/f+"%"),r.append(y,x)}h.push(y)}return o.append(g,h),m}}}),i("1g",["33"],function(e){return{render:e.render}}),i("b",["1g","7","1d"],function(e,t,n){return{insert:function(r,o,i){var a,u=e.render(i,o,0,0);t.set(u,"id","__mce");var c=n.getOuter(u);return r.insertContent(c),a=r.dom.get("__mce"),r.dom.setAttrib(a,"id",null),r.$("tr",a).each(function(e,t){r.fire("newrow",{node:t}),r.$("th,td",t).each(function(e,t){r.fire("newcell",{node:t})})}),r.dom.setAttribs(a,r.settings.table_default_attributes||{}),r.dom.setStyles(a,r.settings.table_default_styles||{}),a}}}),i("1h",["2d"],function(e){return{halve:function(t,n){e.getGenericWidth(t).each(function(r){var o=r.width()/2;e.setGenericWidth(t,o,r.unit()),e.setGenericWidth(n,o,r.unit())})}}}),i("4f",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),i("34",["1","n","2","4f","4g","7","2r","2v"],function(e,t,n,r,o,i,a,u){var c=function(e){var n=i.has(e,"colspan")?u(i.get(e,"colspan"),10):1,r=i.has(e,"rowspan")?u(i.get(e,"rowspan"),10):1;return{element:t.constant(e),colspan:t.constant(n),rowspan:t.constant(r)}},s=function(e,t){d(e);var o=r(n.none()),i=void 0!==t?t:c,a=function(t){return e.cell(t)},u=function(e){var t=i(e);return a(t)},s=function(e){var t=u(e);return o.get().isNone()&&o.set(n.some(t)),l=n.some({item:e,replacement:t}),t},l=n.none();return{getOrInit:function(e,t){return l.fold(function(){return s(e)},function(n){return t(e,n.item)?n.replacement:s(e)})},cursor:o.get}},l=function(t,o){return function(i){var a=r(n.none());d(i);var u=[],c=function(t,n){return e.find(u,function(e){return n(e.item,t)})},s=function(e){var r=i.replace(e,o,{scope:t});return u.push({item:e,sub:r}),a.get().isNone()&&a.set(n.some(r)),r};return{replaceOrInit:function(e,t){return c(e,t).fold(function(){return s(e)},function(n){return t(e,n.item)?n.sub:s(e)})},cursor:a.get}}},f=function(e){d(e);var o=r(n.none());return{combine:function(r){return o.get().isNone()&&o.set(n.some(r)),function(){var n=e.cell({element:t.constant(r),colspan:t.constant(1),rowspan:t.constant(1)});return a.remove(n,"width"),a.remove(r,"width"),n}},cursor:o.get}},d=o.exactly(["cell","row","replace","gap"]);return{modification:s,transform:l,merging:f}}),i("5a",["1"],function(e){var t=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],n=function(t,n){var r=t.property().name(n);return e.contains(["ol","ul"],r)},r=function(n,r){var o=n.property().name(r);return e.contains(t,o)},o=function(t,n){var r=t.property().name(n);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)},i=function(t,n){var r=t.property().name(n);return e.contains(["h1","h2","h3","h4","h5","h6"],r)},a=function(t,n){return e.contains(["div","li","td","th","blockquote","body","caption"],t.property().name(n))},u=function(t,n){return e.contains(["br","img","hr","input"],t.property().name(n))};return{isBlock:r,isList:n,isFormatting:o,isHeading:i,isContainer:a,isEmptyTag:u,isFrame:function(e,t){return"iframe"===e.property().name(t)},isInline:function(e,t){return!(r(e,t)||u(e,t))&&"li"!==e.property().name(t)}}}),i("4h",["57","5a"],function(e,t){var n=e();return{isBlock:function(e){return t.isBlock(n,e)},isList:function(e){return t.isList(n,e)},isFormatting:function(e){return t.isFormatting(n,e)},isHeading:function(e){return t.isHeading(n,e)},isContainer:function(e){return t.isContainer(n,e)},isEmptyTag:function(e){return t.isEmptyTag(n,e)},isFrame:function(e){return t.isFrame(n,e)},isInline:function(e){return t.isInline(n,e)}}}),i("35",["1","4h","1r","2y","1m","6","14","4b","2t","2w","1t"],function(e,t,n,r,o,i,a,u,c,s,l){return{merge:function(f){var d=function(e){return"br"===a.name(e)},p=function(t){return e.forall(t,function(e){return d(e)||a.isText(e)&&0===u.get(e).trim().length})},m=function(e){return"li"===a.name(e)||c.ancestor(e,t.isList).isSome()},g=function(e){return s.nextSibling(e).map(function(e){return!!t.isBlock(e)||(t.isEmptyTag(e)?"img"!==a.name(e):void 0)}).getOr(!1)},h=function(e){return l.last(e).bind(function(r){var o=g(r);return s.parent(r).map(function(a){return!0===o||m(a)||d(r)||t.isBlock(a)&&!n.eq(e,a)?[]:[i.fromTag("br")]})}).getOr([])},v=function(){var t=e.bind(f,function(e){var t=s.children(e);return p(t)?[]:t.concat(h(e))});return 0===t.length?[i.fromTag("br")]:t},y=v();o.empty(f[0]),r.append(f[0],y)}}}),i("36",["1","30"],function(e,t){var n=function(e,t,n){var r=e.cells(),i=r.slice(0,t),a=r.slice(t),u=i.concat([n]).concat(a);return o(e,u)},r=function(e,t,n){e.cells()[t]=n},o=function(e,n){return t.rowcells(n,e.section())},i=function(n,r){var o=n.cells(),i=e.map(o,r);return t.rowcells(i,n.section())},a=function(e,t){return e.cells()[t]};return{addCell:n,setCells:o,mutateCell:r,getCell:a,getCellElement:function(e,t){return a(e,t).element()},mapCells:i,cellLength:function(e){return e.cells().length}}}),i("4j",["1","n","36"],function(e,t,n){var r=function(t,r){return e.map(t,function(e){return n.getCell(e,r)})},o=function(e,t){return e[t]},i=function(t,n){if(0===t.length)return 0;var r=t[0];return e.findIndex(t,function(e){return!n(r.element(),e.element())}).fold(function(){return t.length},function(e){return e})};return{subgrid:function(e,n,a,u){var c=o(e,n).cells().slice(a),s=i(c,u),l=r(e,a).slice(n),f=i(l,u);return{colspan:t.constant(s),rowspan:t.constant(f)}}}}),i("39",["1","30","4j","2a"],function(e,t,n,r){return{toDetails:function(r,o){var i=e.map(r,function(t){return e.map(t.cells(),function(){return!1})}),a=function(e,t,n,r){for(var o=e;o<e+n;o++)for(var a=t;a<t+r;a++)i[o][a]=!0};return e.map(r,function(u,c){var s=e.bind(u.cells(),function(e,u){if(!1===i[c][u]){var s=n.subgrid(r,c,u,o);return a(c,u,s.rowspan(),s.colspan()),[t.detailnew(e.element(),s.rowspan(),s.colspan(),e.isNew())]}return[]});return t.rowdetails(s,u.section())})},toGrid:function(e,n,o){for(var i=[],a=0;a<e.grid().rows();a++){for(var u=[],c=0;c<e.grid().columns();c++){var s=r.getAt(e,a,c).map(function(e){return t.elementnew(e.element(),o)}).getOrThunk(function(){return t.elementnew(n.gap(),!0)});u.push(s)}var l=t.rowcells(u,e.all()[a].section());i.push(l)}return i}}}),i("3d",["1","n","7","6","1l","2y","1m","1b","1s","2w"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e,t,r,o){r===o?n.remove(e,t):n.set(e,t,r)};return{render:function(n,u){var f=[],d=[],p=function(t,u){var p=c.child(n,u).getOrThunk(function(){var e=r.fromTag(u,s.owner(n).dom());return o.append(n,e),e});a.empty(p);var m=e.map(t,function(t){t.isNew()&&f.push(t.element());var n=t.element();return a.empty(n),e.each(t.cells(),function(e){e.isNew()&&d.push(e.element()),l(e.element(),"colspan",e.colspan(),1),l(e.element(),"rowspan",e.rowspan(),1),o.append(n,e.element())}),n});i.append(p,m)},m=function(e){c.child(n,e).bind(a.remove)},g=function(e,t){e.length>0?p(e,t):m(t)},h=[],v=[],y=[];return e.each(u,function(e){switch(e.section()){case"thead":h.push(e);break;case"tbody":v.push(e);break;case"tfoot":y.push(e)}}),g(h,"thead"),g(v,"tbody"),g(y,"tfoot"),{newRows:t.constant(f),newCells:t.constant(d)}},copy:function(t){return e.map(t,function(t){var n=u.shallow(t.element());return e.each(t.cells(),function(e){var t=u.deep(e.element());l(t,"colspan",e.colspan(),1),l(t,"rowspan",e.rowspan(),1),o.append(n,t)}),n})}}}),i("37",["1","4i","n","2","3m","30","1a","29","39","2a","3d","11","2j","1r","2w"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){var g=function(e,t){return c.toGrid(e,t,!1)},h=function(t,n){var r=function(e){return o.findMap(e,function(e){return m.parent(e.element()).map(function(e){var t=m.parent(e).isNone();return i.elementnew(e,t)})}).getOrThunk(function(){return i.elementnew(n.row(),!0)})};return e.map(t,function(e){var t=r(e.details());return i.rowdatanew(t.element(),e.details(),e.section(),t.isNew())})},v=function(e,t){var n=c.toDetails(e,p.eq);return h(n,t)},y=function(t,n){var r=e.flatten(e.map(t.all(),function(e){return e.cells()}));return e.find(r,function(e){return p.eq(n,e.element())})},b=function(e,t,o,i,a){return function(c,m,h,y,b){var x=u.fromTable(m),w=s.generate(x);return t(w,h).map(function(t){var r=g(w,y),o=e(r,t,p.eq,a(y)),i=v(o.grid(),y);return{grid:n.constant(i),cursor:o.cursor}}).fold(function(){return r.none()},function(e){var t=l.render(m,e.grid());return o(m,e.grid(),b),i(m),d.refresh(c,m,f.height,b),r.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})})}},x=function(e,t){return a.cell(t.element()).bind(function(t){return y(e,t)})},w=function(e,n){return a.cell(n.element()).bind(function(r){return y(e,r).map(function(e){return t.merge(e,{generators:n.generators,clipboard:n.clipboard})})})},C=function(n,i){var u=e.map(i.selection(),function(e){return a.cell(e).bind(function(e){return y(n,e)})}),c=o.cat(u);return c.length>0?r.some(t.merge({cells:c},{generators:i.generators,clipboard:i.clipboard})):r.none()},k=function(e,t){return t.mergable()},T=function(e,t){return t.unmergable()};return{run:b,toDetailList:v,onCell:x,onCells:function(t,n){var i=e.map(n.selection(),function(e){return a.cell(e).bind(function(e){return y(t,e)})}),u=o.cat(i);return u.length>0?r.some(u):r.none()},onPaste:w,onPasteRows:C,onMergable:k,onUnmergable:T}}),i("5b",["n","2"],function(e,t){var n=function(r){var o=function(e){return r===e},i=function(){return n(r)},a=function(){return n(r)},u=function(e){return n(e(r))},c=function(e){e(r)},s=function(e){return e(r)},l=function(e,t){return t(r)},f=function(e){return e(r)},d=function(e){return e(r)},p=function(){return t.some(r)};return{is:o,
isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:i,orThunk:a,fold:l,map:u,each:c,bind:s,exists:f,forall:d,toOption:p}},r=function(n){var o=function(e){return e()},i=function(){return e.die(n)()},a=function(e){return e},u=function(e){return e()},c=function(){return r(n)},s=function(){return r(n)},l=function(e){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:o,getOrDie:i,or:a,orThunk:u,fold:l,map:c,each:e.noop,bind:s,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),i("4k",["1","n","5b","30","36","42","p","q","2g"],function(e,t,n,r,o,i,a,u,c){var s=function(e,r,i){if(e.row()>=r.length||e.column()>o.cellLength(r[0]))return n.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var a=r.slice(e.row()),u=a[0].cells().slice(e.column()),c=o.cellLength(i[0]),s=i.length;return n.value({rowDelta:t.constant(a.length-s),colDelta:t.constant(u.length-c)})},l=function(e,n){var r=o.cellLength(e[0]),i=o.cellLength(n[0]);return{rowDelta:t.constant(0),colDelta:t.constant(r-i)}},f=function(t,n){return e.map(t,function(){return r.elementnew(n.cell(),!0)})},d=function(e,t,n){return e.concat(i.repeat(t,function(){return o.setCells(e[e.length-1],f(e[e.length-1].cells(),n))}))},p=function(t,n,r){return e.map(t,function(e){return o.setCells(e,e.cells().concat(f(i.range(0,n),r)))})};return{measure:s,measureWidth:l,tailor:function(e,n,r){var o=n.colDelta()<0?p:t.identity;return(n.rowDelta()<0?d:t.identity)(o(e,c.abs(n.colDelta()),r),c.abs(n.rowDelta()),r)}}}),i("3a",["1","2","30","36"],function(e,t,n,r){var o=function(t,n){return e.foldl(t,function(t,r){return e.exists(t,function(e){return n(e.element(),r.element())})?t:t.concat([r])},[])};return{merge:function(e,t,o,i){if(0===e.length)return e;for(var a=t.startRow();a<=t.finishRow();a++)for(var u=t.startCol();u<=t.finishCol();u++)r.mutateCell(e[a],u,n.elementnew(i(),!1));return e},unmerge:function(e,t,o,i){for(var a=!0,u=0;u<e.length;u++)for(var c=0;c<r.cellLength(e[0]);c++){var s=r.getCellElement(e[u],c),l=o(s,t);!0===l&&!1===a?r.mutateCell(e[u],c,n.elementnew(i(),!0)):!0===l&&(a=!1)}return e},splitRows:function(i,a,u,c){if(a>0&&a<i.length){var s=i[a-1].cells(),l=o(s,u);e.each(l,function(e){for(var o=t.none(),s=a;s<i.length;s++)for(var l=0;l<r.cellLength(i[0]);l++){var f=i[s].cells()[l],d=u(f.element(),e.element());d&&(o.isNone()&&(o=t.some(c())),o.each(function(e){r.mutateCell(i[s],l,n.elementnew(e,!0))}))}})}return i}}}),i("38",["n","30","4k","36","3a"],function(e,t,n,r,o){var i=function(t,n,o,i){var a=r.getCell(t[n],o),u=e.curry(i,a.element()),c=t[n];return t.length>1&&r.cellLength(c)>1&&(o>0&&u(r.getCellElement(c,o-1))||o<c.length-1&&u(r.getCellElement(c,o+1))||n>0&&u(r.getCellElement(t[n-1],o))||n<t.length-1&&u(r.getCellElement(t[n+1],o)))},a=function(e,n,a,u,c){for(var s=e.row(),l=e.column(),f=a.length,d=r.cellLength(a[0]),p=s+f,m=l+d,g=s;g<p;g++)for(var h=l;h<m;h++){i(n,g,h,c)&&o.unmerge(n,r.getCellElement(n[g],h),c,u.cell);var v=r.getCellElement(a[g-s],h-l),y=u.replace(v);r.mutateCell(n[g],h,t.elementnew(y,!0))}return n};return{merge:function(e,t,r,o,i){return n.measure(e,t,r).map(function(u){var c=n.tailor(t,u,o);return a(e,c,r,o,i)})},insert:function(e,t,r,i,a){o.splitRows(t,e,a,i.cell);var u=n.measureWidth(r,t),c=n.tailor(r,u,i),s=n.measureWidth(t,c),l=n.tailor(t,s,i);return l.slice(0,e).concat(c).concat(l.slice(e,l.length))}}}),i("3b",["1","30","36"],function(e,t,n){var r=function(e,r,o,i,a){var u=e.slice(0,r),c=e.slice(r),s=n.mapCells(e[o],function(o,u){return r>0&&r<e.length&&i(n.getCellElement(e[r-1],u),n.getCellElement(e[r],u))?n.getCell(e[r],u):t.elementnew(a(o.element(),i),!0)});return u.concat([s]).concat(c)},o=function(r,o,i,a,u){return e.map(r,function(e){var r=o>0&&o<n.cellLength(e)&&a(n.getCellElement(e,o-1),n.getCellElement(e,o)),c=r?n.getCell(e,o):t.elementnew(u(n.getCellElement(e,i),a),!0);return n.addCell(e,o,c)})},i=function(r,o,i,a,u){var c=i+1;return e.map(r,function(e,r){var s=r===o,l=s?t.elementnew(u(n.getCellElement(e,i),a),!0):n.getCell(e,i);return n.addCell(e,c,l)})},a=function(e,r,o,i,a){var u=r+1,c=e.slice(0,u),s=e.slice(u),l=n.mapCells(e[r],function(e,n){return n===o?t.elementnew(a(e.element(),i),!0):e});return c.concat([l]).concat(s)},u=function(n,r,o){var i=e.map(n,function(e){var n=e.cells().slice(0,r).concat(e.cells().slice(o+1));return t.rowcells(n,e.section())});return e.filter(i,function(e){return e.cells().length>0})};return{insertRowAt:r,insertColumnAt:o,splitCellIntoColumns:i,splitCellIntoRows:a,deleteRowsAt:function(e,t,n){return e.slice(0,t).concat(e.slice(n+1))},deleteColumnsAt:u}}),i("3c",["1","30","36"],function(e,t,n){var r=function(r,o,i,a){var u=function(t){return e.exists(o,function(e){return i(t.element(),e.element())})};return e.map(r,function(e){return n.mapCells(e,function(e){return u(e)?t.elementnew(a(e.element(),i),!0):e})})},o=function(e,t,r,o){return void 0!==n.getCellElement(e[t],r)&&t>0&&o(n.getCellElement(e[t-1],r),n.getCellElement(e[t],r))},i=function(e,t,r){return t>0&&r(n.getCellElement(e,t-1),n.getCellElement(e,t))};return{replaceColumn:function(t,a,u,c){var s=e.bind(t,function(e,r){return o(t,r,a,u)||i(e,a,u)?[]:[n.getCell(e,a)]});return r(t,s,u,c)},replaceRow:function(t,n,a,u){var c=t[n],s=e.bind(c.cells(),function(e,r){return o(t,n,r,a)||i(c,r,a)?[]:[e]});return r(t,s,a,u)}}}),i("1i",["1","n","2","1y","34","30","35","1a","29","36","37","38","39","2a","3a","3b","3c","z","1m"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y){var b=function(e){0===u.cells(e).length&&y.remove(e)},x=r.immutable("grid","cursor"),w=function(e,t,n){return C(e,t,n).orThunk(function(){return C(e,0,0)})},C=function(e,t,r){return n.from(e[t]).bind(function(e){return n.from(e.cells()[r]).bind(function(e){return n.from(e.element())})})},k=function(e,t,n){return x(e,C(e,t,n))},T=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.row()===n.row()})?t:t.concat([n])},[]).sort(function(e,t){return e.row()-t.row()})},S=function(t){return e.foldl(t,function(t,n){return e.exists(t,function(e){return e.column()===n.column()})?t:t.concat([n])},[]).sort(function(e,t){return e.column()-t.column()})},E=function(e,t,n,r){var o=t.row(),i=t.row(),a=g.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},_=function(t,n,r,o){var i=n[0].row(),a=n[0].row(),u=T(n),c=e.foldl(u,function(e){return g.insertRowAt(e,a,i,r,o.getOrInit)},t);return k(c,a,n[0].column())},A=function(e,t,n,r){var o=t.row(),i=t.row()+t.rowspan(),a=g.insertRowAt(e,i,o,n,r.getOrInit);return k(a,i,t.column())},N=function(t,n,r,o){var i=T(n),a=i[i.length-1].row(),u=i[i.length-1].row()+i[i.length-1].rowspan(),c=e.foldl(i,function(e){return g.insertRowAt(e,u,a,r,o.getOrInit)},t);return k(c,u,n[0].column())},D=function(e,t,n,r){var o=t.column(),i=t.column(),a=g.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},R=function(t,n,r,o){var i=S(n),a=i[0].column(),u=i[0].column(),c=e.foldl(i,function(e){return g.insertColumnAt(e,u,a,r,o.getOrInit)},t);return k(c,n[0].row(),u)},P=function(e,t,n,r){var o=t.column(),i=t.column()+t.colspan(),a=g.insertColumnAt(e,i,o,n,r.getOrInit);return k(a,t.row(),i)},I=function(t,n,r,o){var i=n[n.length-1].column(),a=n[n.length-1].column()+n[n.length-1].colspan(),u=S(n),c=e.foldl(u,function(e){return g.insertColumnAt(e,a,i,r,o.getOrInit)},t);return k(c,n[0].row(),a)},O=function(e,t,n,r){var o=h.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},B=function(e,t,n,r){var o=h.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},M=function(e,t,n,r){var o=h.replaceRow(e,t.row(),n,r.replaceOrInit);return k(o,t.row(),t.column())},L=function(e,t,n,r){var o=h.replaceColumn(e,t.column(),n,r.replaceOrInit);return k(o,t.row(),t.column())},F=function(e,t,n,r){var o=g.splitCellIntoColumns(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},H=function(e,t,n,r){var o=g.splitCellIntoRows(e,t.row(),t.column(),n,r.getOrInit);return k(o,t.row(),t.column())},U=function(e,t){var n=S(t),r=g.deleteColumnsAt(e,n[0].column(),n[n.length-1].column()),o=w(r,t[0].row(),t[0].column());return x(r,o)},W=function(e,t){var n=T(t),r=g.deleteRowsAt(e,n[0].row(),n[n.length-1].row()),o=w(r,t[0].row(),t[0].column());return x(r,o)},j=function(e,r,o){var i=r.cells();a.merge(i);var u=m.merge(e,r.bounds(),o,t.constant(i[0]));return x(u,n.from(i[0]))},q=function(t,r,o,i){var a=e.foldr(r,function(e,t){return m.unmerge(e,t,o,i.combine(t))},t);return x(a,n.from(r[0]))},$=function(e,t,r){var o=function(e,t){var n=c.fromTable(e),r=p.generate(n);return d.toGrid(r,t,!0)},a=o(t.clipboard(),t.generators()),u=i.address(t.row(),t.column());return f.merge(u,e,a,t.generators(),r).fold(function(){return x(e,n.some(t.element()))},function(e){var n=w(e,t.row(),t.column());return x(e,n)})},z=function(e,t,n){var r=c.fromPastedRows(e,n),o=p.generate(r);return d.toGrid(o,t,!0)},V=function(e,t,n){var r=e[t.cells[0].row()],o=t.cells[0].row(),i=z(t.clipboard(),t.generators(),r),a=f.insert(o,e,i,t.generators(),n),u=w(a,t.cells[0].row(),t.cells[0].column());return x(a,u)},K=function(e,t,n){var r=e[t.cells.length-1],o=t.cells[t.cells.length-1].row()+t.cells[t.cells.length-1].rowspan(),i=z(t.clipboard(),t.generators(),r),a=f.insert(o,e,i,t.generators(),n),u=w(a,t.cells[0].row(),t.cells[0].column());return x(a,u)},G=v.adjustWidthTo;return{insertRowBefore:l.run(E,l.onCell,t.noop,t.noop,o.modification),insertRowsBefore:l.run(_,l.onCells,t.noop,t.noop,o.modification),insertRowAfter:l.run(A,l.onCell,t.noop,t.noop,o.modification),insertRowsAfter:l.run(N,l.onCells,t.noop,t.noop,o.modification),insertColumnBefore:l.run(D,l.onCell,G,t.noop,o.modification),insertColumnsBefore:l.run(R,l.onCells,G,t.noop,o.modification),insertColumnAfter:l.run(P,l.onCell,G,t.noop,o.modification),insertColumnsAfter:l.run(I,l.onCells,G,t.noop,o.modification),splitCellIntoColumns:l.run(F,l.onCell,G,t.noop,o.modification),splitCellIntoRows:l.run(H,l.onCell,t.noop,t.noop,o.modification),eraseColumns:l.run(U,l.onCells,G,b,o.modification),eraseRows:l.run(W,l.onCells,t.noop,b,o.modification),makeColumnHeader:l.run(B,l.onCell,t.noop,t.noop,o.transform("row","th")),unmakeColumnHeader:l.run(L,l.onCell,t.noop,t.noop,o.transform(null,"td")),makeRowHeader:l.run(O,l.onCell,t.noop,t.noop,o.transform("col","th")),unmakeRowHeader:l.run(M,l.onCell,t.noop,t.noop,o.transform(null,"td")),mergeCells:l.run(j,l.onMergable,t.noop,t.noop,o.merging),unmergeCells:l.run(q,l.onUnmergable,G,t.noop,o.merging),pasteCells:l.run($,l.onPaste,G,t.noop,o.modification),pasteRowsBefore:l.run(V,l.onPasteRows,t.noop,t.noop,o.modification),pasteRowsAfter:l.run(K,l.onPasteRows,t.noop,t.noop,o.modification)}}),i("1j",["2r"],function(e){var t=function(e,t){return function(r){return"rtl"===n(r)?t:e}},n=function(t){return"rtl"===e.get(t,"direction")?"rtl":"ltr"};return{onDirection:t,getDirection:n}}),i("f",["n","1j"],function(e,t){var n={isRtl:e.constant(!1)},r={isRtl:e.constant(!0)};return{directionAt:function(e){return"rtl"===t.getDirection(e)?r:n}}}),i("c",["1","n","2","1h","4","19","1i","6","7","8","f"],function(e,t,n,r,o,i,a,u,c,s,l){return function(f,d){var p,m=function(e){return f.fire("newrow",{node:e.dom()}),e.dom()},g=function(e){return f.fire("newcell",{node:e.dom()}),e.dom()};!1!==f.settings.table_clone_elements&&("string"==typeof f.settings.table_clone_elements?p=f.settings.table_clone_elements.split(/[ ,]/):Array.isArray(f.settings.table_clone_elements)&&(p=f.settings.table_clone_elements));var h=n.from(p),v=function(t,n,r){return function(a,d){var p=s.descendants(a,"td[data-mce-style],th[data-mce-style]");e.each(p,function(e){c.remove(e,"data-mce-style")});var v=r(),y=u.fromDom(f.getDoc()),b=o(l.directionAt),x=i.cellOperations(n,y,h);return t(v,a,d,x,b).bind(function(t){return e.each(t.newRows(),function(e){m(e)}),e.each(t.newCells(),function(e){g(e)}),t.cursor().map(function(e){var t=f.dom.createRng();return t.setStart(e.dom(),0),t.setEnd(e.dom(),0),t})})}};return{deleteRow:v(a.eraseRows,t.noop,d),deleteColumn:v(a.eraseColumns,t.noop,d),insertRowsBefore:v(a.insertRowsBefore,t.noop,d),insertRowsAfter:v(a.insertRowsAfter,t.noop,d),insertColumnsBefore:v(a.insertColumnsBefore,r.halve,d),insertColumnsAfter:v(a.insertColumnsAfter,r.halve,d),mergeCells:v(a.mergeCells,t.noop,d),unmergeCells:v(a.unmergeCells,t.noop,d),pasteRowsBefore:v(a.pasteRowsBefore,t.noop,d),pasteRowsAfter:v(a.pasteRowsAfter,t.noop,d),pasteCells:v(a.pasteCells,t.noop,d)}}}),i("1k",["29","37","39","2a","3d"],function(e,t,n,r,o){return{copyRows:function(i,a,u){var c=e.fromTable(i),s=r.generate(c);return t.onCells(s,a).map(function(e){var r=n.toGrid(s,u,!1),i=r.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),a=t.toDetailList(i,u);return o.copy(a)})}}}),i("1n",["17"],function(e){return e("tinymce.util.Tools")}),i("1o",["1r","6"],function(e,t){var n=function(e){return t.fromDom(e.getBody())};return{getBody:n,getIsRoot:function(t){return function(r){return e.eq(r,n(t))}}}}),i("d",["1","n","2","1k","19","1a","1l","1m","1b","6","1n","1o","1e"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=l.each,m=n.none(),g=function(){return m.fold(function(){},function(t){return e.map(t,function(e){return e.dom()})})},h=function(t){var r=e.map(t,s.fromDom);m=n.from(r)};return{registerCommands:function(l,g,h,v,y){var b=f.getIsRoot(l),x=function(){var e=s.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"));i.table(e,b).filter(t.not(b)).each(function(e){var t=s.fromText("");a.after(e,t),u.remove(e);var n=l.dom.createRng();n.setStart(t.dom(),0),n.setEnd(t.dom(),0),l.selection.setRng(n)})},w=function(){return s.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"))},C=function(e){return i.table(e,b)},k=function(e){var t=w();C(t).each(function(n){var r=d.forMenu(y,n,t);e(n,r).each(function(e){l.selection.setRng(e),l.focus(),v.clear(n)})})},T=function(){var e=w();return C(e).bind(function(i){var a=s.fromDom(l.getDoc()),u=d.forMenu(y,i,e),c=o.cellOperations(t.noop,a,n.none());return r.copyRows(i,u,c)})},S=function(t){m.each(function(n){var r=e.map(n,function(e){return c.deep(e)}),i=w();C(i).bind(function(e){var n=s.fromDom(l.getDoc()),a=o.paste(n),u=d.pasteRows(y,e,i,r,a);t(e,u).each(function(t){l.selection.setRng(t),l.focus(),v.clear(e)})})})};p({mceTableSplitCells:function(){k(h.unmergeCells)},mceTableMergeCells:function(){k(h.mergeCells)},mceTableInsertRowBefore:function(){k(h.insertRowsBefore)},mceTableInsertRowAfter:function(){k(h.insertRowsAfter)},mceTableInsertColBefore:function(){k(h.insertColumnsBefore)},mceTableInsertColAfter:function(){k(h.insertColumnsAfter)},mceTableDeleteCol:function(){k(h.deleteColumn)},mceTableDeleteRow:function(){k(h.deleteRow)},mceTableCutRow:function(){m=T(),k(h.deleteRow)},mceTableCopyRow:function(){m=T()},mceTablePasteRowBefore:function(){S(h.pasteRowsBefore)},mceTablePasteRowAfter:function(){S(h.pasteRowsAfter)},mceTableDelete:x},function(e,t){l.addCommand(t,e)}),p({mceInsertTable:g.table,mceTableProps:function(){g.table(!0)},mceTableRowProps:g.row,mceTableCellProps:g.cell},function(e,t){l.addCommand(t,function(t,n){e(n)})})},getClipboardRows:g,setClipboardRows:h}}),i("e",["3","1p","6","1o"],function(e,t,n,r){return{get:function(o){return o.inline?e.body(r.getBody(o),t.body()):e.only(n.fromDom(o.getDoc()))}}}),i("3e",[],function(){var e=function(e){return o(function(t){return t(e)})},t=function(e){return o(function(t,n){return n(e)})},n=function(e,t){return o(function(n,r,o){return o(e,t)})},r=function(e){return o(function(t,n,r,o){return o(e)})},o=function(e){return{fold:e}};return{none:e,first:t,middle:n,last:r}}),i("1q",["1","n","3e","1a","1r"],function(e,t,n,r,o){var i=function(n,i){return r.table(n,i).bind(function(i){var a=r.cells(i);return e.findIndex(a,function(e){return o.eq(n,e)}).map(function(e){return{index:t.constant(e),all:t.constant(a)}})})};return{next:function(e,t){return i(e,t).fold(function(){return n.none(e)},function(t){return t.index()+1<t.all().length?n.middle(e,t.all()[t.index()+1]):n.last(e)})},prev:function(e,t){return i(e,t).fold(function(){return n.none()},function(t){return t.index()-1>=0?n.middle(e,t.all()[t.index()-1]):n.first(e)})}}}),i("1u",["17"],function(e){return e("tinymce.util.VK")}),i("g",["1","2","1q","1a","1r","6","14","8","1s","1t","1u","1o","1e"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(e,t,r,o){return g(e,t,n.next(r),o)},m=function(e,t,r,o){return g(e,t,n.prev(r),o)},g=function(e,n,o,i){return o.fold(t.none,t.none,function(n,r){return s.first(r).bind(function(n){var r=e.dom.createRng();return r.setStart(n.dom(),0),r.setEnd(n.dom(),0),t.some(r)})},function(t){return r.table(t,n).bind(function(n){var r=d.noMenu(t);i.insertRowsAfter(n,r);var o=u.descendants(n,"tr");if(o.length>0){var a=o[o.length-1];return c.descendant(a,"td,th").map(function(t){var n=e.dom.createRng();return n.setStart(t.dom(),0),n.setEnd(t.dom(),0),n})}})})},h=["table","li","dl"];return{handle:function(t,n,u,c){if(t.keyCode===l.TAB){var s=f.getBody(n),d=function(t){var n=a.name(t);return o.eq(t,s)||e.contains(h,n)},g=n.selection.getRng();if(g.collapsed){var v=i.fromDom(g.startContainer);r.cell(v,d).each(function(e){t.preventDefault(),(t.shiftKey?m:p)(n,d,e,u,c).each(function(e){n.selection.setRng(e)})})}}}}}),i("3f",["1y"],function(e){return{response:e.immutable("selection","kill")}}),i("1x",[],function(){var e=function(e){return function(t){return t===e}},t=e(38),n=e(40),r=function(e){return e>=37&&e<=40};return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:t,isDown:n,isNavigation:r}}),i("3n",["32"],function(e){var t=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),n=function(e,t,n,r){return e.fold(t,n,r)};return{before:t.before,on:t.on,after:t.after,cata:n}}),i("3p",["n","2","1r","6"],function(e,t,n,r){var o=function(e,t){var n=e.document.createRange();return i(n,t),n},i=function(e,t){e.selectNodeContents(t.dom())},a=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},u=function(e){return e.document.createRange()},c=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},s=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},l=function(e,t){m(e),e.insertNode(t.dom())},f=function(e,t,r,o){return n.eq(e,r)&&t===o},d=function(e,t,n){var r=e.document.createRange();return c(r,t),s(r,n),r},p=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},m=function(e){e.deleteContents()},g=function(e){var t=e.cloneContents();return r.fromDom(t)},h=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}};return{create:u,replaceWith:l,selectNodeContents:o,selectNodeContentsUsing:i,isCollapsed:f,relativeToNative:d,exactToNative:p,deleteContents:m,cloneFragment:g,getFirstRect:function(e){var n=e.getClientRects(),r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(h):t.none()},getBounds:function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(h):t.none()},isWithin:a,toString:function(e){return e.toString()}}}),i("20",["32","n","2","2p","6","3p"],function(e,t,n,r,o,i){var a=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),u=function(e,t,n){return t(o.fromDom(n.startContainer),n.startOffset,o.fromDom(n.endContainer),n.endOffset)},c=function(e,o){return o.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(t,o){return{ltr:r.cached(function(){return i.relativeToNative(e,t,o)}),rtl:r.cached(function(){return n.some(i.relativeToNative(e,o,t))})}},exact:function(t,o,a,u){return{ltr:r.cached(function(){return i.exactToNative(e,t,o,a,u)}),rtl:r.cached(function(){return n.some(i.exactToNative(e,a,u,t,o))})}}})},s=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return a.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return u(e,a.ltr,n)})}return u(e,a.ltr,n)},l=function(e,t){var n=c(e,t);return s(e,n)},f=function(e,t){return l(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})};return{ltr:a.ltr,rtl:a.rtl,diagnose:l,asLtrRange:f}}),i("4l",["n","6","3n","20"],function(e,t,n,r){return{convertToRange:function(n,o){var i=r.asLtrRange(n,o);return{start:e.constant(t.fromDom(i.startContainer)),soffset:e.constant(i.startOffset),finish:e.constant(t.fromDom(i.endContainer)),foffset:e.constant(i.endOffset)}},makeSitus:function(t,r,o,i){return{start:e.constant(n.on(t,r)),finish:e.constant(n.on(o,i))}}}}),i("1z",["32","1y"],function(e,t){var n=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r=t.immutable("start","soffset","finish","foffset"),o=function(e){return n.exact(e.start(),e.soffset(),e.finish(),e.foffset())};return{domRange:n.domRange,relative:n.relative,exact:n.exact,exactFromRange:o,range:r}}),i("5c",["1r","6","2w"],function(e,t,n){var r=function(e,t,r,o){var i=n.owner(e),a=i.dom().createRange();return a.setStart(e.dom(),t),a.setEnd(r.dom(),o),a},o=function(e,n,o,i){var a=r(e,n,o,i);return t.fromDom(a.commonAncestorContainer)};return{after:function(t,n,o,i){var a=r(t,n,o,i),u=e.eq(t,o)&&n===i;return a.collapsed&&!u},commonAncestorContainer:o}}),i("5d",["1","6","t"],function(e,t,n){return{fromElements:function(r,o){var i=o||n,a=i.createDocumentFragment();return e.each(r,function(e){a.appendChild(e.dom())}),t.fromDom(a)}}}),i("64",["2g"],function(e){var t=function(t,n,r,o,i){if(0===i)return 0;if(n===o)return i-1;for(var a=o,u=1;u<i;u++){var c=t(u),s=e.abs(n-c.left);if(r>c.bottom);else{if(r<c.top||s>a)return u-1;a=s}}return 0};return{inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:t}}),i("65",["2","3m","4b","64","2g"],function(e,t,n,r){var o=function(e,t,o,i,a){var u=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},c=function(e){return u(e).getBoundingClientRect()},s=n.get(t).length,l=r.searchForPoint(c,o,i,a.right,s);return u(l)};return{locate:function(n,i,a,u){var c=n.dom().createRange();c.selectNode(i.dom());var s=c.getClientRects();return t.findMap(s,function(t){return r.inRect(t,a,u)?e.some(t):e.none()}).map(function(e){return o(n,i,a,u,e)})}}}),i("5x",["2","3m","14","2w","64","65","2g"],function(e,t,n,r,o,i,a){var u=function(n,i,a,u){var s=n.dom().createRange(),l=r.children(i);return t.findMap(l,function(t){return s.selectNode(t.dom()),o.inRect(s.getBoundingClientRect(),a,u)?c(n,t,a,u):e.none()})},c=function(e,t,r,o){return(n.isText(t)?i.locate:u)(e,t,r,o)};return{locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=a.max(i.left,a.min(i.right,n)),s=a.max(i.top,a.min(i.bottom,r));return c(e,t,u,s)}}}),i("5y",["2","2w","1t"],function(e,t,n){var r=!0,o=!1,i=function(e,t){return t-e.left<e.right-t?r:o},a=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},u=function(e,t,o){var u=e.dom().createRange();u.selectNode(t.dom());var c=u.getBoundingClientRect(),s=i(c,o);return(s===r?n.first:n.last)(t).map(function(t){return a(e,t,s)})},c=function(t,n,r){var o=n.dom().getBoundingClientRect(),u=i(o,r);return e.some(a(t,n,u))};return{search:function(e,n,r){return(0===t.children(n).length?c:u)(e,n,r)}}}),i("5e",["2","6","2w","1z","5x","5y","t","2g"],function(e,t,n,r,o,i,a,u){var c=function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(null===n.offsetNode)return e.none();var r=t.dom().createRange();return r.setStart(n.offsetNode,n.offset),r.collapse(),e.some(r)})},s=function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))},l=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect(),c=u.max(a.left,u.min(a.right,n)),s=u.max(a.top,u.min(a.bottom,r));return o.locate(e,t,c,s)},f=function(r,o,a){return e.from(r.dom().elementFromPoint(o,a)).map(t.fromDom).bind(function(e){var t=function(){return i.search(r,e,o)};return 0===n.children(e).length?t():l(r,e,o,a).orThunk(t)})},d=a.caretPositionFromPoint?c:a.caretRangeFromPoint?s:f;return{fromPoint:function(e,n,o){var i=t.fromDom(e.document);return d(i,n,o).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})}}}),i("5f",["1","6","14","8","16","3p","20"],function(e,t,n,r,o,i,a){var u=function(t,n,a,u){var c=i.create(t),s=o.is(n,u)?[n]:[],l=s.concat(r.descendants(n,u));return e.filter(l,function(e){return i.selectNodeContentsUsing(c,e),i.isWithin(a,c)})};return{find:function(e,r,o){var i=a.asLtrRange(e,r),c=t.fromDom(i.commonAncestorContainer);return n.isElement(c)?u(e,c,i,o):[]}}}),i("5g",["1","14","1z","3n"],function(e,t,n,r){var o=function(n,o){var i=t.name(n);return"input"===i?r.after(n):e.contains(["br","img"],i)?0===o?r.before(n):r.after(n):r.on(n,o)};return{beforeSpecial:o,preprocess:function(e,t){var i=e.fold(r.before,o,r.after),a=t.fold(r.before,o,r.after);return n.relative(i,a)}}}),i("4m",["2","5c","6","5d","1z","3n","3p","20","5e","5f","5g"],function(e,t,n,r,o,i,a,u,c,s,l){var f=function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},d=function(e,t,n,r,o){var i=a.exactToNative(e,t,n,r,o);f(e,i)},p=function(e,t,n){return s.find(e,t,n)},m=function(e,t,n,r,o){g(e,i.on(t,n),i.on(r,o))},g=function(e,t,n){var r=l.preprocess(t,n);return u.diagnose(e,r).match({ltr:function(t,n,r,o){d(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();i.extend?(i.collapse(t.dom(),n),i.extend(r.dom(),o)):d(e,r,o,t,n)}})},h=function(t){return e.from(t.getRangeAt(0)).map(function(e){return o.range(n.fromDom(e.startContainer),e.startOffset,n.fromDom(e.endContainer),e.endOffset)})},v=function(r){var i=n.fromDom(r.anchorNode),a=n.fromDom(r.focusNode);return t.after(i,r.anchorOffset,a,r.focusOffset)?e.some(o.range(n.fromDom(r.anchorNode),r.anchorOffset,n.fromDom(r.focusNode),r.focusOffset)):h(r)},y=function(e,t){var n=a.selectNodeContents(e,t);f(e,n)},b=function(e,t){var r=a.selectNodeContents(e,t);return o.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)},x=function(t){var n=t.getSelection();return n.rangeCount>0?v(n):e.none()},w=function(e){return x(e).map(function(e){return o.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},C=function(e,t){var n=u.asLtrRange(e,t);return a.getFirstRect(n)},k=function(e,t){var n=u.asLtrRange(e,t);return a.getBounds(n)},T=function(e,t,n){return c.fromPoint(e,t,n)},S=function(e,t){var n=u.asLtrRange(e,t);return a.toString(n)};return{setExact:m,getExact:x,get:w,setRelative:g,setToElement:y,clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=u.asLtrRange(e,t);return a.cloneFragment(n)},replace:function(e,t,n){var o=u.asLtrRange(e,t),i=r.fromElements(n);a.replaceWith(o,i)},deleteAt:function(e,t){var n=u.asLtrRange(e,t);a.deleteContents(n)},forElement:b,getFirstRect:C,getBounds:k,getAtPoint:T,findWithin:p,getAsString:S}}),i("3g",["4l","n","13","1z","3n","4m"],function(e,t,n,r,o,i){return function(a){var u=function(e){return e.dom().getBoundingClientRect()},c=function(e,o,u,c){var s=r.exact(e,o,u,c);return i.getFirstRect(a,s).map(function(e){return n.map(e,t.apply)})},s=function(){return i.get(a).map(function(t){return e.convertToRange(a,t)})},l=function(t){var n=r.relative(t.start(),t.finish());return e.convertToRange(a,n)},f=function(e,n){return i.getAtPoint(a,e,n).map(function(e){return{start:t.constant(o.on(e.start(),e.soffset())),finish:t.constant(o.on(e.finish(),e.foffset()))}})},d=function(){i.clear(a)},p=function(e){i.setToElement(a,e)};return{getRect:u,getRangedRect:c,getSelection:s,fromSitus:l,situsFromPoint:f,clearSelection:d,setSelection:function(e){i.setExact(a,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,t){i.setRelative(a,e,t)},selectContents:p,getInnerHeight:function(){return a.innerHeight},getScrollY:function(){return a.scrollY},scrollBy:function(e,t){a.scrollBy(e,t)}}}}),i("3h",["3f","3l","4l","n","2","1r","1s","2z","1z","3n"],function(e,t,n,r,o,i,a,u){var c=function(e,t,n,r,u,c,l){return i.eq(n,u)&&r===c?o.none():a.closest(n,"td,th",t).bind(function(n){return a.closest(u,"td,th",t).bind(function(r){return s(e,t,n,r,l)})})},s=function(r,a,c,s,l){if(!i.eq(c,s)){var f=t.identify(c,s,a).getOr([]);if(f.length>0)return l(r,f,c,s),o.some(e.response(o.some(n.makeSitus(c,0,c,u.getEnd(c))),!0))}return o.none()};return{sync:c,detect:s,update:function(e,n,r,o,i){var a=function(e){return i.clear(r),i.selectRange(r,e.boxes(),e.start(),e.finish()),e.boxes()};return t.shiftSelection(o,e,n,i.firstSelectedSelector(),i.lastSelectedSelector()).map(a)}}}),i("5h",["1y"],function(e){var t=e.immutableBag(["left","top","right","bottom"],[]),n=function(e,n){return t({left:e.left(),top:e.top()+n,right:e.right(),bottom:e.bottom()+n})},r=function(e,n){return t({left:e.left(),top:e.top()-n,right:e.right(),bottom:e.bottom()-n})},o=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n-r,right:e.right(),bottom:n})},i=function(e,n){var r=e.bottom()-e.top();return t({left:e.left(),top:n,right:e.right(),bottom:n+r})},a=function(e,n,r){return t({left:e.left()+n,top:e.top()+r,right:e.right()+n,bottom:e.bottom()+r})};return{nu:t,moveUp:r,moveDown:n,moveBottomTo:o,moveTopTo:i,getTop:function(e){return e.top()},getBottom:function(e){return e.bottom()},translate:a,toString:function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"}}}),i("5i",["5h","2","14","2z"],function(e,t,n,r){var o=function(e,n,o){return o>=0&&o<r.getEnd(n)?e.getRangedRect(n,o,n,o+1):o>0?e.getRangedRect(n,o-1,n,o):t.none()},i=function(t){return e.nu({left:t.left,top:t.top,right:t.right,bottom:t.bottom})},a=function(e,n){return t.some(e.getRect(n))};return{getBoxAt:function(e,r,u){return n.isElement(r)?a(e,r,u).map(i):n.isText(r)?o(e,r,u).map(i):t.none()},getEntireBox:function(e,o){return n.isElement(o)?a(e,o).map(i):n.isText(o)?e.getRangedRect(o,0,o,r.getEnd(o)).map(i):t.none()}}}),i("60",["1","2","1y"],function(e,t,n){var r=n.immutable("item","mode"),o=function(e,t,n,o){var a=void 0!==o?o:i;return e.property().parent(t).map(function(e){return r(e,a)})},i=function(e,t,n,o){var i=void 0!==o?o:a;return n.sibling(e,t).map(function(e){return r(e,i)})},a=function(e,t,n,o){var i=void 0!==o?o:a,u=e.property().children(t);return n.first(u).map(function(e){return r(e,i)})},u=[{current:o,next:i,fallback:t.none()},{current:i,next:a,fallback:t.some(o)},{current:a,next:a,fallback:t.some(i)}],c=function(t,n,r,o,i){var a=void 0!==i?i:u;return e.find(a,function(e){return e.current===r}).bind(function(e){return e.current(t,n,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return c(t,n,e,o)})})})};return{backtrack:o,sidestep:i,advance:a,go:c}}),i("61",["2"],function(e){return{left:function(){return{sibling:function(e,t){return e.query().prevSibling(t)},first:function(t){return t.length>0?e.some(t[t.length-1]):e.none()}}},right:function(){return{sibling:function(e,t){return e.query().nextSibling(t)},first:function(t){return t.length>0?e.some(t[0]):e.none()}}}}}),i("5z",["2","60","61"],function(e,t,n){var r=function(n,o,i,a,u,c){return t.go(n,o,a,u).bind(function(t){return c(t.item())?e.none():i(t.item())?e.some(t.item()):r(n,t.item(),i,t.mode(),u,c)})};return{left:function(e,o,i,a){return r(e,o,i,t.sidestep,n.left(),a)},right:function(e,o,i,a){return r(e,o,i,t.sidestep,n.right(),a)}}}),i("5j",["n","5z","60","61"],function(e,t,n,r){var o=function(e,t){return 0===e.property().children(t).length},i=function(t,n,r){return u(t,n,e.curry(o,t),r)},a=function(t,n,r){return c(t,n,e.curry(o,t),r)},u=function(e,n,r,o){return t.left(e,n,r,o)},c=function(e,n,r,o){return t.right(e,n,r,o)};return{before:i,after:a,seekLeft:u,seekRight:c,walkers:function(){return{left:r.left,right:r.right}},walk:function(e,t,r,o,i){return n.go(e,t,r,o,i)},backtrack:n.backtrack,sidestep:n.sidestep,advance:n.advance}});i("4r",["57","5j"],function(e,t){var n=e();return{gather:function(e,r,o){return t.gather(n,e,r,o)},before:function(e,r){return t.before(n,e,r)},
after:function(e,r){return t.after(n,e,r)},seekLeft:function(e,r,o){return t.seekLeft(n,e,r,o)},seekRight:function(e,r,o){return t.seekRight(n,e,r,o)},walkers:function(){return t.walkers()},walk:function(e,r,o,i){return t.walk(n,e,r,o,i)}}}),i("4p",["5h","5i","n","2","4r","4h","32","2t","2g"],function(e,t,n,r,o,i,a,u,c){var s=5,l=100,f=a.generate([{none:[]},{retry:["caret"]}]),d=function(e,t){return e.left()<t.left()||c.abs(t.right()-e.left())<1||e.left()>t.right()},p=function(e,r,o){return u.closest(r,i.isBlock).fold(n.constant(!1),function(n){return t.getEntireBox(e,n).exists(function(e){return d(o,e)})})},m=function(t,n,r,o,i){var a=e.moveDown(i,s);return c.abs(r.bottom()-o.bottom())<1?f.retry(a):r.top()>i.bottom()?f.retry(a):r.top()===i.bottom()?f.retry(e.moveDown(i,1)):p(t,n,i)?f.retry(e.translate(a,s,0)):f.none()},g=function(t,n,r,o,i){var a=e.moveUp(i,s);return c.abs(r.top()-o.top())<1?f.retry(a):r.bottom()<i.top()?f.retry(a):r.bottom()===i.top()?f.retry(e.moveUp(i,1)):p(t,n,i)?f.retry(e.translate(a,s,0)):f.none()},h={point:e.getTop,adjuster:g,move:e.moveUp,gather:o.before},v={point:e.getBottom,adjuster:m,move:e.moveDown,gather:o.after},y=function(e,n,o,i,a){return 0===a?r.some(i):e.situsFromPoint(i.left(),n.point(i)).bind(function(u){return u.start().fold(r.none,function(u,c){return t.getEntireBox(e,u,c).bind(function(t){return n.adjuster(e,u,t,o,i).fold(r.none,function(t){return y(e,n,o,t,a-1)})}).orThunk(function(){return r.some(i)})},r.none)})},b=function(e,t){return e.situsFromPoint(t.left(),t.bottom()+s)},x=function(e,t){return e.situsFromPoint(t.left(),t.top()-s)},w=function(e,t,n){return e.point(t)>n.getInnerHeight()?r.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?r.some(-e.point(t)):r.none()},C=function(e,t,n){var r=e.move(n,s),o=y(t,e,n,r,l).getOr(r);return w(e,o,t).fold(function(){return t.situsFromPoint(o.left(),e.point(o))},function(n){return t.scrollBy(0,n),t.situsFromPoint(o.left(),e.point(o)-n)})};return{tryUp:n.curry(C,h),tryDown:n.curry(C,v),ieTryUp:x,ieTryDown:b,getJumpSize:n.constant(s)}}),i("4q",["32","4c","1r","1s","2z"],function(e,t,n,r,o){var i=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),a=function(e,t,n){var r=e.getRect(t),o=e.getRect(n);return o.right>r.left&&o.left<r.right},u=function(e){return r.closest(e,"tr")};return{verify:function(e,c,s,l,f,d,p){return r.closest(l,"td,th",p).bind(function(s){return r.closest(c,"td,th",p).map(function(r){return n.eq(s,r)?n.eq(l,s)&&o.getEnd(s)===f?d(r):i.none("in same cell"):t.sharedOne(u,[s,r]).fold(function(){return a(e,r,s)?i.success():d(r)},function(){return d(r)})})}).getOr(i.none("default"))},cata:function(e,t,n,r,o){return e.fold(t,n,r,o)},adt:i}}),i("5l",["1y"],function(e){return{point:e.immutable("element","offset"),delta:e.immutable("element","deltaOffset"),range:e.immutable("element","start","finish"),points:e.immutable("begin","end"),text:e.immutable("element","text")}}),i("62",["1","n","2","1y","1r","2t","8","1s","2w"],function(e,t,n,r,o,i,a,u,c){var s=r.immutable("ancestor","descendants","element","index"),l=r.immutable("parent","children","element","index"),f=function(e,t){return i.closest(e,function(e){return c.parent(e).exists(function(e){return o.eq(e,t)})})},d=function(e){return c.parent(e).bind(function(t){var n=c.children(t);return p(n,e).map(function(r){return l(t,n,e,r)})})},p=function(n,r){return e.findIndex(n,t.curry(o.eq,r))};return{childOf:f,indexOf:p,indexInParent:d,selectorsInParent:function(e,t){return c.parent(e).bind(function(n){var r=a.children(n,t);return p(r,e).map(function(t){return l(n,r,e,t)})})},descendantsInAncestor:function(e,t,n){return u.closest(e,t).bind(function(t){var r=a.descendants(t,n);return p(r,e).map(function(n){return s(t,r,e,n)})})}}}),i("5k",["4q","n","2","5l","14","4b","62","2w","2z","3n"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e){return"br"===o.name(e)},f=function(e,t,r){return t(e,r).bind(function(e){return o.isText(e)&&0===i.get(e).trim().length?f(e,t,r):n.some(e)})},d=function(e,t,n){return n.traverse(t).orThunk(function(){return f(t,n.gather,e)}).map(n.relative)},p=function(e,t){return u.child(e,t).filter(l).orThunk(function(){return u.child(e,t-1).filter(l)})},m=function(e,t,n,r){return p(t,n).bind(function(t){return r.traverse(t).fold(function(){return f(t,r.gather,e).map(r.relative)},function(e){return a.indexInParent(e).map(function(e){return s.on(e.parent(),e.index())})})})};return{tryBr:function(e,n,r,o){return(l(n)?d(e,n,o):m(e,n,r,o)).map(function(e){return{start:t.constant(e),finish:t.constant(e)}})},process:function(t){return e.cata(t,function(){return n.none("BR ADT: none")},function(){return n.none()},function(e){return n.some(r.point(e,0))},function(e){return n.some(r.point(e,c.getEnd(e)))})}}}),i("4n",["5h","5i","4p","4q","5k","2","5l","2m","1r","2z"],function(e,t,n,r,o,i,a,u,c,s){var l=u.detect(),f=function(e,t,n){return e.getSelection().bind(function(u){return o.tryBr(t,u.finish(),u.foffset(),n).fold(function(){return i.some(a.point(u.finish(),u.foffset()))},function(i){var a=e.fromSitus(i),c=r.verify(e,u.finish(),u.foffset(),a.finish(),a.foffset(),n.failure,t);return o.process(c)})})},d=function(t,n,o,a,u,l){return 0===l?i.none():g(t,n,o,a,u).bind(function(f){var m=t.fromSitus(f),g=r.verify(t,o,a,m.finish(),m.foffset(),u.failure,n);return r.cata(g,function(){return i.none()},function(){return i.some(f)},function(r){return c.eq(o,r)&&0===a?p(t,o,a,e.moveUp,u):d(t,n,r,0,u,l-1)},function(r){return c.eq(o,r)&&a===s.getEnd(r)?p(t,o,a,e.moveDown,u):d(t,n,r,s.getEnd(r),u,l-1)})})},p=function(e,r,o,i,a){return t.getBoxAt(e,r,o).bind(function(t){return m(e,a,i(t,n.getJumpSize()))})},m=function(e,t,n){return l.browser.isChrome()||l.browser.isSafari()||l.browser.isFirefox()||l.browser.isEdge()?t.otherRetry(e,n):l.browser.isIE()?t.ieRetry(e,n):i.none()},g=function(e,n,r,o,i){return t.getBoxAt(e,r,o).bind(function(t){return m(e,i,t)})};return{handle:function(e,t,n){return f(e,t,n).bind(function(r){return d(e,t,r.element(),r.offset(),n,20).map(e.fromSitus)})}}}),i("4o",["2t"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),i("3i",["3f","3h","4n","4l","n","2","2m","1r","4o","1s","2w"],function(e,t,n,r,o,i,a,u,c,s,l){var f=a.detect(),d=function(e,t){return c.ancestor(e,function(e){return l.parent(e).exists(function(e){return u.eq(e,t)})})},p=function(e,t,r,a,u){return s.closest(a,"td,th",t).bind(function(a){return s.closest(a,"table",t).bind(function(c){return d(u,c)?n.handle(e,t,r).bind(function(e){return s.closest(e.finish(),"td,th",t).map(function(t){return{start:o.constant(a),finish:o.constant(t),range:o.constant(e)}})}):i.none()})})};return{navigate:function(t,n,o,a,u){return f.browser.isIE()?i.none():p(t,n,o,a,u).map(function(t){var n=t.range();return e.response(i.some(r.makeSitus(n.start(),n.soffset(),n.finish(),n.foffset())),!0)})},select:function(e,n,r,o,i,a,u){return p(e,r,o,i,a).bind(function(e){return t.detect(n,r,e.start(),e.finish(),u)})}}}),i("3j",["3l","2","1r","1s"],function(e,t,n,r){var o=function(e,t){return r.closest(e,"td,th",t)};return function(r,i,a,u){var c=t.none(),s=function(){c=t.none()};return{mousedown:function(e){u.clear(i),c=o(e.target(),a)},mouseover:function(t){c.each(function(c){u.clear(i),o(t.target(),a).each(function(t){var o=e.identify(c,t,a).getOr([]);(o.length>1||1===o.length&&!n.eq(c,t))&&(u.selectRange(i,o,c,t),r.selectContents(t))})})},mouseup:function(){c.each(s)}}}}),i("3k",["4p","4q","4r","2w","3n"],function(e,t,n,r,o){return{down:{traverse:r.nextSibling,gather:n.after,relative:o.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:t.adt.failedDown},up:{traverse:r.prevSibling,gather:n.before,relative:o.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:t.adt.failedUp}}}),i("1v",["3f","1x","3g","3h","3i","3j","3k","3l","n","2","3m","1y","3n"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=f.immutable("rows","cols");return{mouse:function(e,t,r,o){var a=n(e),u=i(a,t,r,o);return{mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},keyboard:function(i,f,m,g){var h=n(i),v=function(){return g.clear(f),s.none()};return{keydown:function(n,i,y,b,x,w){var C=n.raw().which,k=!0===n.raw().shiftKey;return u.retrieve(f,g.selectedSelector()).fold(function(){return t.isDown(C)&&k?c.curry(o.select,h,f,m,a.down,b,i,g.selectRange):t.isUp(C)&&k?c.curry(o.select,h,f,m,a.up,b,i,g.selectRange):t.isDown(C)?c.curry(o.navigate,h,m,a.down,b,i):t.isUp(C)?c.curry(o.navigate,h,m,a.up,b,i):s.none},function(n){var o=function(o){return function(){return l.findMap(o,function(e){return r.update(e.rows(),e.cols(),f,n,g)}).fold(function(){return u.getEdges(f,g.firstSelectedSelector(),g.lastSelectedSelector()).map(function(n){var r=t.isDown(C)||w.isForward(C)?d.after:d.before;return h.setRelativeSelection(d.on(n.first(),0),r(n.table())),g.clear(f),e.response(s.none(),!0)})},function(){return s.some(e.response(s.none(),!0))})}};return t.isDown(C)&&k?o([p(1,0)]):t.isUp(C)&&k?o([p(-1,0)]):w.isBackward(C)&&k?o([p(0,-1),p(-1,0)]):w.isForward(C)&&k?o([p(0,1),p(1,0)]):t.isNavigation(C)&&!1===k?v:s.none})()},keyup:function(e,n,o,i,a){return u.retrieve(f,g.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?s.none():t.isNavigation(u)?r.sync(f,m,n,o,i,a,g.selectRange):s.none()},s.none)}}}}}),i("4s",["1","2q","49","p"],function(e,t,n,r){var o=function(e){for(var t=e.dom().classList,n=new r(t.length),o=0;o<t.length;o++)n[o]=t.item(o);return n};return{add:function(n,r){e.each(r,function(e){t.add(n,e)})},remove:function(n,r){e.each(r,function(e){t.remove(n,e)})},toggle:function(n,r){e.each(r,function(e){t.toggle(n,e)})},hasAll:function(n,r){return e.forall(r,function(e){return t.has(n,e)})},hasAny:function(n,r){return e.exists(r,function(e){return t.has(n,e)})},get:function(e){return n.supports(e)?o(e):n.get(e)}}}),i("3o",["2q","4s"],function(e,t){return{addClass:function(t){return function(n){e.add(n,t)}},removeClass:function(t){return function(n){e.remove(n,t)}},removeClasses:function(e){return function(n){t.remove(n,e)}},hasClass:function(t){return function(n){return e.has(n,t)}}}}),i("1w",["1","7","2q","3o","8"],function(e,t,n,r,o){return{byClass:function(t){var i=r.addClass(t.selected()),a=r.removeClasses([t.selected(),t.lastSelected(),t.firstSelected()]),u=function(n){var r=o.descendants(n,t.selectedSelector());e.each(r,a)};return{clear:u,selectRange:function(r,o,a,c){u(r),e.each(o,i),n.add(a,t.firstSelected()),n.add(c,t.lastSelected())},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},byAttr:function(n){var r=function(e){t.remove(e,n.selected()),t.remove(e,n.firstSelected()),t.remove(e,n.lastSelected())},i=function(e){t.set(e,n.selected(),"1")},a=function(t){var i=o.descendants(t,n.selectedSelector());e.each(i,r)};return{clear:a,selectRange:function(r,o,u,c){a(r),e.each(o,i),t.set(u,n.firstSelected(),"1"),t.set(c,n.lastSelected(),"1")},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}}}}),i("h",["1v","1w","1x","n","2","1y","1a","1r","6","1z","20","1o","f","i"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){return function(m,g){var h=i.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),v=o.none(),y=t.byAttr(p);m.on("init",function(){var t=m.getWin(),i=f.getBody(m),p=f.getIsRoot(m),b=function(){var e=m.selection,t=c.fromDom(e.getStart()),n=c.fromDom(e.getEnd()),s=a.table(t),l=a.table(n);s.bind(function(e){return l.bind(function(t){return u.eq(e,t)?o.some(!0):o.none()})}).fold(function(){y.clear(i)},r.noop)},x=e.mouse(t,i,p,y),w=e.keyboard(t,i,p,y),C=function(e,n){n.kill()&&e.kill(),n.selection().each(function(e){var n=s.relative(e.start(),e.finish()),r=l.asLtrRange(t,n);m.selection.setRng(r)})},k=function(e){var t=S(e);if(t.raw().shiftKey&&n.isNavigation(t.raw().which)){var r=m.selection.getRng(),o=c.fromDom(r.startContainer),i=c.fromDom(r.endContainer);w.keyup(t,o,r.startOffset,i,r.endOffset).each(function(e){C(t,e)})}},T=function(e){var t=S(e);g().each(function(e){e.hideBars()});var r=m.selection.getRng(),o=c.fromDom(m.selection.getStart()),i=c.fromDom(r.startContainer),a=c.fromDom(r.endContainer),u=d.directionAt(o).isRtl()?n.rtl:n.ltr;w.keydown(t,i,r.startOffset,a,r.endOffset,u).each(function(e){C(t,e)}),g().each(function(e){e.showBars()})},S=function(e){var t=c.fromDom(e.target),n=function(){e.stopPropagation()},o=function(){e.preventDefault()},i=r.compose(o,n);return{target:r.constant(t),x:r.constant(e.x),y:r.constant(e.y),stop:n,prevent:o,kill:i,raw:r.constant(e)}},E=function(e){return 0===e.button},_=function(e){return void 0===e.buttons||0!=(1&e.buttons)},A=function(e){E(e)&&x.mousedown(S(e))},N=function(e){_(e)&&x.mouseover(S(e))},D=function(e){E&&x.mouseup(S(e))};m.on("mousedown",A),m.on("mouseover",N),m.on("mouseup",D),m.on("keyup",k),m.on("keydown",T),m.on("nodechange",b),v=o.some(h({mousedown:A,mouseover:N,mouseup:D,keyup:k,keydown:T}))});var b=function(){v.each(function(){})};return{clear:y.clear,destroy:b}}}),i("j",["21","1o","i","1f"],function(e,t,n,r){return function(o){return{get:function(){var i=t.getBody(o);return e.retrieve(i,n.selectedSelector()).fold(function(){return void 0===o.selection.getStart()?r.none():r.single(o.selection)},function(e){return r.multiple(e)})}}}}),i("k",["1n"],function(e){var t=e.each,n=function(e,n){function r(t){return function(){e.execCommand(t)}}var o=[];t("inserttable tableprops deletetable | cell row column".split(" "),function(t){"|"==t?o.push({text:"-"}):o.push(e.menuItems[t])}),e.addButton("table",{type:"menubutton",title:"Table",menu:o}),e.addButton("tableprops",{title:"Table properties",onclick:n.tableProps,icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:r("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:r("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:r("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:r("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:r("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:r("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:r("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:r("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:r("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:r("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:r("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:r("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:r("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:r("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:r("mceTableDeleteCol")})},r=function(e){var t=function(t){return e.dom.is(t,"table")&&e.getBody().contains(t)},n=e.settings.table_toolbar;""!==n&&!1!==n&&(n||(n="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(t,n))};return{addButtons:n,addToolbars:r}}),i("22",["17"],function(e){return e("tinymce.Env")}),i("l",["1n","22","b"],function(e,t,n){var r=e.each;return function(o){function i(){var e=o.settings.color_picker_callback;if(e)return function(){var t=this;e.call(o,function(e){t.value(e).fire("change")},t.value())}}function a(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){d(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:i()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:i()}]}]}}function u(e){return e?e.replace(/px$/,""):""}function c(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function s(e){r("left center right".split(" "),function(t){o.formatter.remove("align"+t,{},e)})}function l(e){r("top middle bottom".split(" "),function(t){o.formatter.remove("valign"+t,{},e)})}function f(t,n,r){function o(t,r){return r=r||[],e.each(t,function(e){var t={text:e.text||e.title};e.menu?t.menu=o(e.menu):(t.value=e.value,n&&n(t)),r.push(t)}),r}return o(t,r||[])}function d(e,t,n){var r=t.toJSON(),o=e.parseStyle(r.style);n?(t.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),t.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=r.borderColor,o["background-color"]=r.backgroundColor),t.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}function p(e,t,n){var r=e.parseStyle(e.getAttrib(n,"style"));r["border-color"]&&(t.borderColor=r["border-color"]),r["background-color"]&&(t.backgroundColor=r["background-color"]),t.style=e.serializeStyle(r)}function m(e,t,n){var o=e.parseStyle(e.getAttrib(t,"style"));r(n,function(e){o[e.name]=e.value}),e.setAttrib(t,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}var g=this;g.tableProps=function(){g.table(!0)},g.table=function(i){function l(){function r(e,t,n){if("TD"===e.tagName||"TH"===e.tagName)C.setStyle(e,t,n);else if(e.children)for(var o=0;o<e.children.length;o++)r(e.children[o],t,n)}var i;d(C,this),k=e.extend(k,this.toJSON()),!1===k["class"]&&delete k["class"],o.undoManager.transact(function(){if(h||(h=n.insert(o,k.cols||1,k.rows||1)),o.dom.setAttribs(h,{style:k.style,"class":k["class"]}),o.settings.table_style_by_css){if(w=[],w.push({name:"border-width",value:c(k.border)}),w.push({name:"border-spacing",value:c(k.cellspacing)}),m(C,h,w),C.setAttribs(h,{"data-mce-border-color":k.borderColor,"data-mce-cell-padding":k.cellpadding,"data-mce-border":k.border}),h.children)for(var e=0;e<h.children.length;e++)r(h.children[e],{"border-width":c(k.border),"border-color":k.borderColor,padding:c(k.cellpadding)})}else o.dom.setAttribs(h,{border:k.border,cellpadding:k.cellpadding,cellspacing:k.cellspacing});C.getAttrib(h,"width")&&!o.settings.table_style_by_css?C.setAttrib(h,"width",u(k.width)):C.setStyle(h,"width",c(k.width)),C.setStyle(h,"height",c(k.height)),i=C.select("caption",h)[0],i&&!k.caption&&C.remove(i),!i&&k.caption&&(i=C.create("caption"),i.innerHTML=t.ie?"\xa0":'<br data-mce-bogus="1"/>',h.insertBefore(i,h.firstChild)),s(h),k.align&&o.formatter.apply("align"+k.align,{},h),o.focus(),o.addVisual()})}function g(e,t){function n(e,n){for(var r=0;r<n.length;r++){var o=C.getStyle(n[r],t);if(void 0===e&&(e=o),e!=o)return""}return e}var r;return r=n(r,o.dom.select("td,th",e))}var h,v,y,b,x,w,C=o.dom,k={};!0===i?(h=C.getParent(o.selection.getStart(),"table"))&&(k={width:u(C.getStyle(h,"width")||C.getAttrib(h,"width")),height:u(C.getStyle(h,"height")||C.getAttrib(h,"height")),cellspacing:u(C.getStyle(h,"border-spacing")||C.getAttrib(h,"cellspacing")),cellpadding:C.getAttrib(h,"data-mce-cell-padding")||C.getAttrib(h,"cellpadding")||g(h,"padding"),border:C.getAttrib(h,"data-mce-border")||C.getAttrib(h,"border")||g(h,"border"),borderColor:C.getAttrib(h,"data-mce-border-color"),caption:!!C.select("caption",h)[0],"class":C.getAttrib(h,"class")},r("left center right".split(" "),function(e){o.formatter.matchNode(h,"align"+e)&&(k.align=e)})):(v={label:"Cols",name:"cols"},y={label:"Rows",name:"rows"}),o.settings.table_class_list&&(k["class"]&&(k["class"]=k["class"].replace(/\s*mce\-item\-table\s*/g,"")),b={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),x={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[v,y,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},b]},!1!==o.settings.table_advtab?(p(C,k,h),o.windowManager.open({title:"Table properties",data:k,bodyType:"tabpanel",body:[{title:"General",type:"form",items:x},a(C)],onsubmit:l})):o.windowManager.open({title:"Table properties",data:k,body:x,onsubmit:l})},g.cell=function(){function t(e,t,n){(1===y.length||n)&&v.setAttrib(e,t,n)}function n(e,t,n){(1===y.length||n)&&v.setStyle(e,t,n)}function i(){d(v,this),g=e.extend(g,this.toJSON()),o.undoManager.transact(function(){r(y,function(e){t(e,"scope",g.scope),t(e,"style",g.style),t(e,"class",g["class"]),n(e,"width",c(g.width)),n(e,"height",c(g.height)),g.type&&e.nodeName.toLowerCase()!==g.type&&(e=v.rename(e,g.type)),1===y.length&&(s(e),l(e)),g.align&&o.formatter.apply("align"+g.align,{},e),g.valign&&o.formatter.apply("valign"+g.valign,{},e)}),o.focus()})}var m,g,h,v=o.dom,y=[];if(y=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!y.length&&m&&y.push(m),m=m||y[0]){y.length>1?g={width:"",height:"",scope:"","class":"",align:"",style:"",type:m.nodeName.toLowerCase()}:(g={width:u(v.getStyle(m,"width")||v.getAttrib(m,"width")),height:u(v.getStyle(m,"height")||v.getAttrib(m,"height")),scope:v.getAttrib(m,"scope"),"class":v.getAttrib(m,"class")},g.type=m.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(g.align=e)}),r("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(g.valign=e)}),p(v,g,m)),o.settings.table_cell_class_list&&(h={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},h]};!1!==o.settings.table_cell_advtab?o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:g,body:[{title:"General",type:"form",items:b},a(v)],onsubmit:i}):o.windowManager.open({title:"Cell properties",data:g,body:b,onsubmit:i})}},g.row=function(){function t(e,t,n){(1===x.length||n)&&b.setAttrib(e,t,n)}function n(e,t,n){(1===x.length||n)&&b.setStyle(e,t,n)}function i(){var i,a,u;d(b,this),v=e.extend(v,this.toJSON()),o.undoManager.transact(function(){var e=v.type;r(x,function(r){t(r,"scope",v.scope),t(r,"style",v.style),t(r,"class",v["class"]),n(r,"height",c(v.height)),e!==r.parentNode.nodeName.toLowerCase()&&(i=b.getParent(r,"table"),a=r.parentNode,u=b.select(e,i)[0],u||(u=b.create(e),i.firstChild?"CAPTION"===i.firstChild.nodeName?b.insertAfter(u,i.firstChild):i.insertBefore(u,i.firstChild):i.appendChild(u)),u.appendChild(r),a.hasChildNodes()||b.remove(a)),1===x.length&&s(r),v.align&&o.formatter.apply("align"+v.align,{},r)}),o.focus()})}var l,m,g,h,v,y,b=o.dom,x=[];l=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),r(l.rows,function(e){r(e.cells,function(t){if(b.getAttrib(t,"data-mce-selected")||t==m)return x.push(e),!1})}),(g=x[0])&&(x.length>1?v={height:"",scope:"","class":"",align:"",type:g.parentNode.nodeName.toLowerCase()}:(v={height:u(b.getStyle(g,"height")||b.getAttrib(g,"height")),scope:b.getAttrib(g,"scope"),"class":b.getAttrib(g,"class")},v.type=g.parentNode.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(v.align=e)}),p(b,v,g)),o.settings.table_row_class_list&&(h={name:"class",type:"listbox",label:"Class",values:f(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),y={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},h]},!1!==o.settings.table_row_advtab?o.windowManager.open({title:"Row properties",data:v,bodyType:"tabpanel",body:[{title:"General",type:"form",items:y},a(b)],onsubmit:i}):o.windowManager.open({title:"Row properties",data:v,body:y,onsubmit:i}))}}}),i("m",["1","2","1a","6","b","1e"],function(e,t,n,r,o,i){return{addMenuItems:function(a,u,c){function s(e){return function(){a.execCommand(e)}}var l=t.none(),f=[],d=[],p=[],m=[],g=function(e){e.disabled(!0)},h=function(e){e.disabled(!1)},v=function(){var e=this;f.push(e),l.fold(function(){g(e)},function(){h(e)})},y=function(){var e=this;d.push(e),l.fold(function(){g(e)},function(){h(e)})},b=function(){var e=this;p.push(e),l.fold(function(){g(e)},function(t){e.disabled(t.mergable().isNone())})},x=function(){var e=this;m.push(e),l.fold(function(){g(e)},function(t){e.disabled(t.unmergable().isNone())})},w=function(){l.fold(function(){e.each(f,g),e.each(d,g),e.each(p,g),e.each(m,g)},function(t){e.each(f,h),e.each(d,h),e.each(p,function(e){e.disabled(t.mergable().isNone())}),e.each(m,function(e){e.disabled(t.unmergable().isNone())})})};a.on("init",function(){a.on("nodechange",function(){var e=t.from(a.dom.getParent(a.selection.getStart(),"th,td"));l=e.bind(function(e){var t=r.fromDom(e);return n.table(t).map(function(e){return i.forMenu(c,e,t)})}),w()})});var C=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var t=0;t<10;t++){e+="<tr>";for(var n=0;n<10;n++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*t+n)+'" href="#" data-mce-x="'+n+'" data-mce-y="'+t+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'},k=function(e,t,n,r){var o,i,a,u,c,s=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"==r.parent().rel;for(s.nextSibling.innerHTML=t+1+" x "+(n+1),l&&(t=9-t),i=0;i<10;i++)for(o=0;o<10;o++)u=s.rows[i].childNodes[o].firstChild,c=(l?o>=t:o<=t)&&i<=n,e.dom.toggleClass(u,"mce-active",c),c&&(a=u);return a.parentNode},T=!1===a.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:u.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),u.table())},onshow:function(){k(a,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");a.dom.removeClass(e,"mce-active"),a.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:C(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var t,n,r=e.target;"A"==r.tagName.toUpperCase()&&(t=parseInt(r.getAttribute("data-mce-x"),10),n=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(t=9-t),t===this.lastX&&n===this.lastY||(k(a,t,n,e.control),this.lastX=t,this.lastY=n))},onclick:function(e){var t=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),t.parent().cancel(),a.undoManager.transact(function(){o.insert(a,t.lastX+1,t.lastY+1)}),a.addVisual())}}]},S={text:"Table properties",context:"table",onPostRender:v,onclick:u.tableProps},E={text:"Delete table",context:"table",onPostRender:v,cmd:"mceTableDelete"},_={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:s("mceTableInsertRowBefore"),onPostRender:y},{text:"Insert row after",onclick:s("mceTableInsertRowAfter"),onPostRender:y},{text:"Delete row",onclick:s("mceTableDeleteRow"),onPostRender:y},{text:"Row properties",onclick:s("mceTableRowProps"),onPostRender:y},{text:"-"},{text:"Cut row",onclick:s("mceTableCutRow"),onPostRender:y},{text:"Copy row",onclick:s("mceTableCopyRow"),onPostRender:y},{text:"Paste row before",onclick:s("mceTablePasteRowBefore"),onPostRender:y},{text:"Paste row after",onclick:s("mceTablePasteRowAfter"),onPostRender:y}]},A={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:s("mceTableInsertColBefore"),onPostRender:y},{text:"Insert column after",onclick:s("mceTableInsertColAfter"),onPostRender:y},{text:"Delete column",onclick:s("mceTableDeleteCol"),onPostRender:y}]},N={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:s("mceTableCellProps"),onPostRender:y},{text:"Merge cells",onclick:s("mceTableMergeCells"),onPostRender:b},{text:"Split cell",onclick:s("mceTableSplitCells"),onPostRender:x}]};a.addMenuItem("inserttable",T),a.addMenuItem("tableprops",S),a.addMenuItem("deletetable",E),a.addMenuItem("row",_),a.addMenuItem("column",A),a.addMenuItem("cell",N)}}}),i("0",["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x,w){function C(c){var C=this,k=function(){return N},T=function(){return D.getOr(n.only(i.fromDom(c.getBody())))},S=h(c,k),E=new x(c),_=f(c,T),A=y(c);d.registerCommands(c,E,_,S,A),s.registerEvents(c,A,_,S),w.addMenuItems(c,E,A),b.addButtons(c,E),b.addToolbars(c);var N=t.none(),D=t.none(),R=t.none();c.on("init",function(){var n=r(m.directionAt),i=p.get(c);if(D=t.some(i),c.settings.object_resizing&&!1!==c.settings.table_resize_bars&&(!0===c.settings.object_resizing||"table"===c.settings.object_resizing)){var s=o(i,n);s.on(),s.events.startDrag.bind(function(){R=t.some(c.selection.getRng())}),s.events.afterResize.bind(function(t){var n=t.table(),r=u.descendants(n,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){a.remove(e,"data-mce-style")}),c.focus(),R.each(function(e){c.selection.setRng(e)}),c.undoManager.add()}),N=t.some(s)}}),c.on("PreInit",function(){c.serializer.addTempAttr(v.firstSelected()),c.serializer.addTempAttr(v.lastSelected())}),!1!==c.settings.table_tab_navigation&&c.on("keydown",function(e){g.handle(e,c,_,T)}),c.on("remove",function(){N.each(function(e){e.destroy()}),S.destroy()}),C.insertTable=function(e,t){l.insert(c,e,t)},C.setClipboardRows=d.setClipboardRows,C.getClipboardRows=d.getClipboardRows}return c.add("table",C),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})}
;a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.core.util.XHR",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.XHR")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.plugins.template.api.Settings",["tinymce.core.dom.DOMUtils"],function(e){return{getCreationDateClasses:function(e){return e.getParam("template_cdate_classes","cdate")},getModificationDateClasses:function(e){return e.getParam("template_mdate_classes","mdate")},getSelectedContentClasses:function(e){return e.getParam("template_selected_content_classes","selcontent")},getPreviewReplaceValues:function(e){return e.getParam("template_preview_replace_values")},getTemplateReplaceValues:function(e){return e.getParam("template_replace_values")},getTemplates:function(e){return e.templates},getCdateFormat:function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))},getMdateFormat:function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},getDialogWidth:function(e){return e.getParam("template_popup_width",600)},getDialogHeight:function(t){return Math.min(e.DOM.getViewPort().h,t.getParam("template_popup_height",500))}}}),i("tinymce.plugins.template.core.DateTimeHelper",[],function(){var e=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e};return{getDateTime:function(t,n,r){var o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" ");return r=r||new Date,n=n.replace("%D","%m/%d/%Y"),n=n.replace("%r","%I:%M:%S %p"),n=n.replace("%Y",""+r.getFullYear()),n=n.replace("%y",""+r.getYear()),n=n.replace("%m",e(r.getMonth()+1,2)),n=n.replace("%d",e(r.getDate(),2)),n=n.replace("%H",""+e(r.getHours(),2)),n=n.replace("%M",""+e(r.getMinutes(),2)),n=n.replace("%S",""+e(r.getSeconds(),2)),n=n.replace("%I",""+((r.getHours()+11)%12+1)),n=n.replace("%p",r.getHours()<12?"AM":"PM"),n=n.replace("%B",""+t.translate(u[r.getMonth()])),n=n.replace("%b",""+t.translate(a[r.getMonth()])),n=n.replace("%A",""+t.translate(i[r.getDay()])),n=n.replace("%a",""+t.translate(o[r.getDay()])),n=n.replace("%%","%")}}}),i("tinymce.plugins.template.core.Templates",["tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.DateTimeHelper"],function(e,t,n,r){var o=function(e,r){return function(){var o=n.getTemplates(e);if("function"==typeof o)return void o(r);"string"==typeof o?t.send({url:o,success:function(e){r(JSON.parse(e))}}):r(o)}},i=function(t,n,r){return e.each(r,function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n},a=function(t,r){var o=t.dom,i=n.getTemplateReplaceValues(t);e.each(o.select("*",r),function(t){e.each(i,function(e,n){o.hasClass(t,n)&&"function"==typeof i[n]&&i[n](t)})})},u=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)};return{createTemplateList:o,replaceTemplateValues:i,replaceVals:a,insertTemplate:function(t,o,c){var s,l,f=t.dom,d=t.selection.getContent();c=i(t,c,n.getTemplateReplaceValues(t)),s=f.create("div",null,c),l=f.select(".mceTmpl",s),l&&l.length>0&&(s=f.create("div",null),s.appendChild(l[0].cloneNode(!0))),e.each(f.select("*",s),function(e){u(e,n.getCreationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=r.getDateTime(t,n.getCdateFormat(t))),u(e,n.getModificationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=r.getDateTime(t,n.getMdateFormat(t))),u(e,n.getSelectedContentClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=d)}),a(t,s),t.execCommand("mceInsertContent",!1,s.innerHTML),t.addVisual()}}}),i("tinymce.plugins.template.api.Commands",["ephox.katamari.api.Fun","tinymce.plugins.template.core.Templates"],function(e,t){return{register:function(n){n.addCommand("mceInsertTemplate",e.curry(t.insertTemplate,n))}}}),i("tinymce.plugins.template.core.FilterContent",["tinymce.core.util.Tools","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.DateTimeHelper","tinymce.plugins.template.core.Templates"],function(e,t,n,r){return{setup:function(o){o.on("PreProcess",function(i){var a=o.dom,u=t.getMdateFormat(o);e.each(a.select("div",i.node),function(t){a.hasClass(t,"mceTmpl")&&(e.each(a.select("*",t),function(e){a.hasClass(e,o.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=n.getDateTime(o,u))}),r.replaceVals(o,t))})})}}}),i("tinymce.plugins.template.ui.Dialog",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.util.XHR","tinymce.plugins.template.api.Settings","tinymce.plugins.template.core.Templates"],function(e,t,n,r,o){var i=function(e,n,i){if(-1===i.indexOf("<html>")){var a="";t.each(e.contentCSS,function(t){a+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var u=e.settings.body_class||"";-1!==u.indexOf("=")&&(u=e.getParam("body_class","","hash"),u=u[e.id]||""),i="<!DOCTYPE html><html><head>"+a+'</head><body class="'+u+'">'+i+"</body></html>"}i=o.replaceTemplateValues(e,i,r.getPreviewReplaceValues(e));var c=n.find("iframe")[0].getEl().contentWindow.document;c.open(),c.write(i),c.close()};return{open:function(e,a){var u,c,s=[];if(!a||0===a.length){var l=e.translate("No templates defined.");return void e.notificationManager.open({text:l,type:"info"})}t.each(a,function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})});var f=function(t){var r=t.control.value();r.url?n.send({url:r.url,success:function(t){c=t,i(e,u,c)}}):(c=r.content,i(e,u,c)),u.find("#description")[0].text(t.control.value().description)};u=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:s,onselect:f}}]},{type:"label",name:"description",label:"Description",text:"\xa0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){o.insertTemplate(e,!1,c)},minWidth:r.getDialogWidth(e),minHeight:r.getDialogHeight(e)}),u.find("listbox")[0].fire("select")}}}),i("tinymce.plugins.template.ui.Buttons",["tinymce.plugins.template.core.Templates","tinymce.plugins.template.ui.Dialog"],function(e,t){var n=function(e){return function(n){t.open(e,n)}};return{register:function(t){t.addButton("template",{title:"Insert template",onclick:e.createTemplateList(t.settings,n(t))}),t.addMenuItem("template",{text:"Template",onclick:e.createTemplateList(t.settings,n(t)),icon:"template",context:"insert"})}}}),i("tinymce.plugins.template.Plugin",["tinymce.core.PluginManager","tinymce.plugins.template.api.Commands","tinymce.plugins.template.core.FilterContent","tinymce.plugins.template.ui.Buttons"],function(e,t,n,r){return e.add("template",function(e){r.register(e),t.register(e),n.setup(e)}),function(){}}),r("tinymce.plugins.template.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("5",tinymce.util.Tools.resolve),i("1",["5"],function(e){return e("tinymce.PluginManager")}),a("c",Array),a("d",Error),i("6",["c","d"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("8",["5"],function(e){return e("tinymce.util.Tools")}),i("e",["5"],function(e){return e("tinymce.util.XHR")}),i("f",["5"],function(e){return e("tinymce.dom.DOMUtils")}),i("9",["f"],function(e){return{getCreationDateClasses:function(e){return e.getParam("template_cdate_classes","cdate")},getModificationDateClasses:function(e){return e.getParam("template_mdate_classes","mdate")},getSelectedContentClasses:function(e){return e.getParam("template_selected_content_classes","selcontent")},getPreviewReplaceValues:function(e){return e.getParam("template_preview_replace_values")},getTemplateReplaceValues:function(e){return e.getParam("template_replace_values")},getTemplates:function(e){return e.templates},getCdateFormat:function(e){return e.getParam("template_cdate_format",e.getLang("template.cdate_format"))},getMdateFormat:function(e){return e.getParam("template_mdate_format",e.getLang("template.mdate_format"))},getDialogWidth:function(e){return e.getParam("template_popup_width",600)},getDialogHeight:function(t){return Math.min(e.DOM.getViewPort().h,t.getParam("template_popup_height",500))}}}),i("a",[],function(){var e=function(e,t){if(e=""+e,e.length<t)for(var n=0;n<t-e.length;n++)e="0"+e;return e};return{getDateTime:function(t,n,r){var o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),a="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" ");return r=r||new Date,n=n.replace("%D","%m/%d/%Y"),n=n.replace("%r","%I:%M:%S %p"),n=n.replace("%Y",""+r.getFullYear()),n=n.replace("%y",""+r.getYear()),n=n.replace("%m",e(r.getMonth()+1,2)),n=n.replace("%d",e(r.getDate(),2)),n=n.replace("%H",""+e(r.getHours(),2)),n=n.replace("%M",""+e(r.getMinutes(),2)),n=n.replace("%S",""+e(r.getSeconds(),2)),n=n.replace("%I",""+((r.getHours()+11)%12+1)),n=n.replace("%p",r.getHours()<12?"AM":"PM"),n=n.replace("%B",""+t.translate(u[r.getMonth()])),n=n.replace("%b",""+t.translate(a[r.getMonth()])),n=n.replace("%A",""+t.translate(i[r.getDay()])),n=n.replace("%a",""+t.translate(o[r.getDay()])),n=n.replace("%%","%")}}}),i("7",["8","e","9","a"],function(e,t,n,r){var o=function(e,r){return function(){var o=n.getTemplates(e);return"function"==typeof o?void o(r):void("string"==typeof o?t.send({url:o,success:function(e){r(JSON.parse(e))}}):r(o))}},i=function(t,n,r){return e.each(r,function(e,t){"function"==typeof e&&(e=e(t)),n=n.replace(new RegExp("\\{\\$"+t+"\\}","g"),e)}),n},a=function(t,r){var o=t.dom,i=n.getTemplateReplaceValues(t);e.each(o.select("*",r),function(t){e.each(i,function(e,n){o.hasClass(t,n)&&"function"==typeof i[n]&&i[n](t)})})},u=function(e,t){return new RegExp("\\b"+t+"\\b","g").test(e.className)};return{createTemplateList:o,replaceTemplateValues:i,replaceVals:a,insertTemplate:function(t,o,c){var s,l,f=t.dom,d=t.selection.getContent();c=i(t,c,n.getTemplateReplaceValues(t)),s=f.create("div",null,c),l=f.select(".mceTmpl",s),l&&l.length>0&&(s=f.create("div",null),s.appendChild(l[0].cloneNode(!0))),e.each(f.select("*",s),function(e){u(e,n.getCreationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=r.getDateTime(t,n.getCdateFormat(t))),u(e,n.getModificationDateClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=r.getDateTime(t,n.getMdateFormat(t))),u(e,n.getSelectedContentClasses(t).replace(/\s+/g,"|"))&&(e.innerHTML=d)}),a(t,s),t.execCommand("mceInsertContent",!1,s.innerHTML),t.addVisual()}}}),i("2",["6","7"],function(e,t){return{register:function(n){n.addCommand("mceInsertTemplate",e.curry(t.insertTemplate,n))}}}),i("3",["8","9","a","7"],function(e,t,n,r){return{setup:function(o){o.on("PreProcess",function(i){var a=o.dom,u=t.getMdateFormat(o);e.each(a.select("div",i.node),function(t){a.hasClass(t,"mceTmpl")&&(e.each(a.select("*",t),function(e){a.hasClass(e,o.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=n.getDateTime(o,u))}),r.replaceVals(o,t))})})}}}),i("b",["f","8","e","9","7"],function(e,t,n,r,o){var i=function(e,n,i){if(-1===i.indexOf("<html>")){var a="";t.each(e.contentCSS,function(t){a+='<link type="text/css" rel="stylesheet" href="'+e.documentBaseURI.toAbsolute(t)+'">'});var u=e.settings.body_class||"";-1!==u.indexOf("=")&&(u=e.getParam("body_class","","hash"),u=u[e.id]||""),i="<!DOCTYPE html><html><head>"+a+'</head><body class="'+u+'">'+i+"</body></html>"}i=o.replaceTemplateValues(e,i,r.getPreviewReplaceValues(e));var c=n.find("iframe")[0].getEl().contentWindow.document;c.open(),c.write(i),c.close()};return{open:function(e,a){var u,c,s=[];if(!a||0===a.length){var l=e.translate("No templates defined.");return void e.notificationManager.open({text:l,type:"info"})}t.each(a,function(e){s.push({selected:!s.length,text:e.title,value:{url:e.url,content:e.content,description:e.description}})});var f=function(t){var r=t.control.value();r.url?n.send({url:r.url,success:function(t){c=t,i(e,u,c)}}):(c=r.content,i(e,u,c)),u.find("#description")[0].text(t.control.value().description)};u=e.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:s,onselect:f}}]},{type:"label",name:"description",label:"Description",text:"\xa0"},{type:"iframe",flex:1,border:1}],onsubmit:function(){o.insertTemplate(e,!1,c)},minWidth:r.getDialogWidth(e),minHeight:r.getDialogHeight(e)}),u.find("listbox")[0].fire("select")}}}),i("4",["7","b"],function(e,t){var n=function(e){return function(n){t.open(e,n)}};return{register:function(t){t.addButton("template",{title:"Insert template",onclick:e.createTemplateList(t.settings,n(t))}),t.addMenuItem("template",{text:"Template",onclick:e.createTemplateList(t.settings,n(t)),icon:"template",context:"insert"})}}}),i("0",["1","2","3","4"],function(e,t,n,r){return e.add("template",function(e){r.register(e),t.register(e),n.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.textcolor.api.Settings",[],function(){var e=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=function(t){return t.getParam("textcolor_map",e)},n=function(e){return e.getParam("forecolor_map",t(e))},r=function(e){return e.getParam("backcolor_map",t(e))},o=function(e){return e.getParam("textcolor_rows",5)},i=function(e){return e.getParam("textcolor_cols",8)},a=function(e){return e.getParam("forecolor_rows",o(e))},u=function(e){return e.getParam("backcolor_rows",o(e))},c=function(e){return e.getParam("forecolor_cols",i(e))},s=function(e){return e.getParam("backcolor_cols",i(e))},l=function(e){return e.getParam("color_picker_callback",null)};return{getForeColorMap:n,getBackColorMap:r,getForeColorRows:a,getBackColorRows:u,getForeColorCols:c,getBackColorCols:s,getColorPickerCallback:l,hasColorPicker:function(e){return"function"==typeof l(e)}}}),i("tinymce.plugins.textcolor.core.TextColor",[],function(){return{getCurrentColor:function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n},mapColors:function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},applyFormat:function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},removeFormat:function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}}}),i("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),i("tinymce.plugins.textcolor.ui.ColorPickerHtml",["tinymce.core.dom.DOMUtils","tinymce.core.util.I18n","tinymce.plugins.textcolor.api.Settings","tinymce.plugins.textcolor.core.TextColor"],function(e,t,n,r){return{getHtml:function(n,o,i,a){var u,c,s,l,f,d,p,m=0,g=e.DOM.uniqueId("mcearia"),h=function(e,n){var r="transparent"===e;return'<td class="mce-grid-cell'+(r?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+m+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+t.translate(n)+'">'+(r?"&#215;":"")+"</div></td>"};for(u=r.mapColors(i),u.push({text:t.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',l=u.length-1,d=0;d<o;d++){for(s+="<tr>",f=0;f<n;f++)p=d*n+f,p>l?s+="<td></td>":(c=u[p],s+=h(c.color,c.text));s+="</tr>"}if(a){for(s+='<tr><td colspan="'+n+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+t.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",f=0;f<n;f++)s+=h("","Custom color");s+="</tr>"}return s+="</tbody></table>"}}}),i("tinymce.plugins.textcolor.ui.Buttons",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.plugins.textcolor.api.Settings","tinymce.plugins.textcolor.core.TextColor","tinymce.plugins.textcolor.ui.ColorPickerHtml"],function(e,t,n,r,o){var i=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},a=function(e){return function(t){var n=t.control;n._color?r.applyFormat(e,n.settings.format,n._color):r.removeFormat(e,n.settings.format)}},u=function(o,a){return function(u){var c,s=this.parent(),l=r.getCurrentColor(o,s.settings.format),f=function(e){s.hidePanel(),s.color(e),r.applyFormat(o,s.settings.format,e)},d=function(){s.hidePanel(),s.resetColor(),r.removeFormat(o,s.settings.format)};e.DOM.getParent(u.target,".mce-custom-color-btn")&&(s.hidePanel(),n.getColorPickerCallback(o).call(o,function(e){var n,r,o,u=s.panel.getEl().getElementsByTagName("table")[0];for(n=t.map(u.rows[u.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<n.length&&(r=n[o],r.getAttribute("data-mce-color"));o++);if(o===a)for(o=0;o<a-1;o++)i(n[o],n[o+1].getAttribute("data-mce-color"));i(r,e),f(e)},l)),c=u.target.getAttribute("data-mce-color"),c?(this.lastId&&e.DOM.get(this.lastId).setAttribute("aria-selected",!1),u.target.setAttribute("aria-selected",!0),this.lastId=u.target.id,"transparent"===c?d():f(c)):null!==c&&s.hidePanel()}},c=function(e,t){return function(){var r=t?n.getForeColorCols(e):n.getBackColorCols(e),i=t?n.getForeColorRows(e):n.getBackColorRows(e),a=t?n.getForeColorMap(e):n.getBackColorMap(e),u=n.hasColorPicker(e);return o.getHtml(r,i,a,u)}};return{register:function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:c(e,!0),onclick:u(e,n.getForeColorCols(e))},onclick:a(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:c(e,!1),onclick:u(e,n.getBackColorCols(e))},onclick:a(e)})}}}),i("tinymce.plugins.textcolor.Plugin",["tinymce.core.PluginManager","tinymce.plugins.textcolor.ui.Buttons"],function(e,t){return e.add("textcolor",function(e){t.register(e)}),function(){}}),r("tinymce.plugins.textcolor.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(e){return e("tinymce.PluginManager")}),i("4",["3"],function(e){return e("tinymce.dom.DOMUtils")}),i("5",["3"],function(e){return e("tinymce.util.Tools")}),i("6",[],function(){var e=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],t=function(t){return t.getParam("textcolor_map",e)},n=function(e){return e.getParam("forecolor_map",t(e))},r=function(e){return e.getParam("backcolor_map",t(e))},o=function(e){return e.getParam("textcolor_rows",5)},i=function(e){return e.getParam("textcolor_cols",8)},a=function(e){return e.getParam("forecolor_rows",o(e))},u=function(e){return e.getParam("backcolor_rows",o(e))},c=function(e){return e.getParam("forecolor_cols",i(e))},s=function(e){return e.getParam("backcolor_cols",i(e))},l=function(e){return e.getParam("color_picker_callback",null)};return{getForeColorMap:n,getBackColorMap:r,getForeColorRows:a,getBackColorRows:u,getForeColorCols:c,getBackColorCols:s,getColorPickerCallback:l,hasColorPicker:function(e){return"function"==typeof l(e)}}}),i("7",[],function(){return{getCurrentColor:function(e,t){var n;return e.dom.getParents(e.selection.getStart(),function(e){var r;(r=e.style["forecolor"===t?"color":"background-color"])&&(n=r)}),n},mapColors:function(e){var t,n=[];for(t=0;t<e.length;t+=2)n.push({text:e[t+1],color:"#"+e[t]});return n},applyFormat:function(e,t,n){e.undoManager.transact(function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()})},removeFormat:function(e,t){e.undoManager.transact(function(){e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()})}}}),i("9",["3"],function(e){return e("tinymce.util.I18n")}),i("8",["4","9","6","7"],function(e,t,n,r){return{getHtml:function(n,o,i,a){var u,c,s,l,f,d,p,m=0,g=e.DOM.uniqueId("mcearia"),h=function(e,n){var r="transparent"===e;return'<td class="mce-grid-cell'+(r?" mce-colorbtn-trans":"")+'"><div id="'+g+"-"+m+++'" data-mce-color="'+(e||"")+'" role="option" tabIndex="-1" style="'+(e?"background-color: "+e:"")+'" title="'+t.translate(n)+'">'+(r?"&#215;":"")+"</div></td>"};for(u=r.mapColors(i),u.push({text:t.translate("No color"),color:"transparent"}),s='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',l=u.length-1,d=0;d<o;d++){for(s+="<tr>",f=0;f<n;f++)p=d*n+f,p>l?s+="<td></td>":(c=u[p],s+=h(c.color,c.text));s+="</tr>"}if(a){for(s+='<tr><td colspan="'+n+'" class="mce-custom-color-btn"><div id="'+g+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+g+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+t.translate("Custom...")+"</button></div></td></tr>",s+="<tr>",f=0;f<n;f++)s+=h("","Custom color");s+="</tr>"}return s+="</tbody></table>"}}}),i("2",["4","5","6","7","8"],function(e,t,n,r,o){var i=function(e,t){e.style.background=t,e.setAttribute("data-mce-color",t)},a=function(e){return function(t){var n=t.control;n._color?r.applyFormat(e,n.settings.format,n._color):r.removeFormat(e,n.settings.format)}},u=function(o,a){return function(u){var c,s=this.parent(),l=r.getCurrentColor(o,s.settings.format),f=function(e){s.hidePanel(),s.color(e),r.applyFormat(o,s.settings.format,e)},d=function(){s.hidePanel(),s.resetColor(),r.removeFormat(o,s.settings.format)};e.DOM.getParent(u.target,".mce-custom-color-btn")&&(s.hidePanel(),n.getColorPickerCallback(o).call(o,function(e){var n,r,o,u=s.panel.getEl().getElementsByTagName("table")[0];for(n=t.map(u.rows[u.rows.length-1].childNodes,function(e){return e.firstChild}),o=0;o<n.length&&(r=n[o],r.getAttribute("data-mce-color"));o++);if(o===a)for(o=0;o<a-1;o++)i(n[o],n[o+1].getAttribute("data-mce-color"));i(r,e),f(e)},l)),c=u.target.getAttribute("data-mce-color"),c?(this.lastId&&e.DOM.get(this.lastId).setAttribute("aria-selected",!1),u.target.setAttribute("aria-selected",!0),this.lastId=u.target.id,"transparent"===c?d():f(c)):null!==c&&s.hidePanel()}},c=function(e,t){return function(){var r=t?n.getForeColorCols(e):n.getBackColorCols(e),i=t?n.getForeColorRows(e):n.getBackColorRows(e),a=t?n.getForeColorMap(e):n.getBackColorMap(e),u=n.hasColorPicker(e);return o.getHtml(r,i,a,u)}};return{register:function(e){e.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:c(e,!0),onclick:u(e,n.getForeColorCols(e))},onclick:a(e)}),e.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:c(e,!1),onclick:u(e,n.getBackColorCols(e))},onclick:a(e)})}}}),i("0",["1","2"],function(e,t){return e.add("textcolor",function(e){t.register(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.textpattern.api.Api",[],function(){return{get:function(e){return{setPatterns:function(t){e.set(t)},getPatterns:function(){return e.get()}}}}}),i("tinymce.plugins.textpattern.api.Settings",[],function(){var e=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];return{getPatterns:function(t){return t.textpattern_patterns!==undefined?t.textpattern_patterns:e}}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),a("global!document",document),i("tinymce.core.dom.TreeWalker",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.TreeWalker")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.textpattern.core.Patterns",[],function(){var e=function(e){return e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0})},t=function(e,t,n,r){return t.substr(n-e.end.length-r,e.end.length)===e.end},n=function(e,t,n){return e-t-n.end.length-n.start.length>0};return{findPattern:function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},findEndPattern:function(r,o,i,a){var u,c,s=e(r);for(c=0;c<s.length;c++)if(u=s[c],u.end!==undefined&&t(u,o,i,a)&&n(i,a,u))return u}}}),i("tinymce.plugins.textpattern.core.Formatter",["global!document","tinymce.core.dom.TreeWalker","tinymce.core.util.Tools","tinymce.plugins.textpattern.core.Patterns"],function(e,t,n,r){var o=function(e,t,n,r){return e=r>0?e.splitText(r):e,e.splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),e},i=function(t,n,o){if(!1!==n.collapsed){var i=n.startContainer,a=i.data,u=!0===o?1:0;if(3===i.nodeType){var c=r.findEndPattern(t,a,n.startOffset,u);if(c!==undefined){var s=a.lastIndexOf(c.end,n.startOffset-u),l=a.lastIndexOf(c.start,s-c.end.length);if(s=a.indexOf(c.end,l+c.start.length),-1!==l){var f=e.createRange();f.setStart(i,l),f.setEnd(i,s+c.end.length);var d=r.findPattern(t,f.toString());if(!(c===undefined||d!==c||i.data.length<=c.start.length+c.end.length))return{pattern:c,startOffset:l,
endOffset:s}}}}}},a=function(e,t,r,i){var a=n.isArray(r.pattern.format)?r.pattern.format:[r.pattern.format];if(0!==n.grep(a,function(t){var n=e.formatter.get(t);return n&&n[0].inline}).length)return e.undoManager.transact(function(){t=o(t,r.pattern,r.endOffset,r.startOffset,i),a.forEach(function(n){e.formatter.apply(n,{},t)})}),t},u=function(e,t,n){var r=e.selection.getRng(!0),o=i(t,r,n);if(o)return a(e,r.startContainer,o,n)};return{patternFromRng:i,applyInlineFormatSpace:function(e,t){return u(e,t,!0)},applyInlineFormatEnter:function(e,t){return u(e,t,!1)},applyBlockFormat:function(e,o){var i,a,u,c,s,l,f,d,p,m,g;if(i=e.selection,a=e.dom,i.isCollapsed()&&(f=a.getParent(i.getStart(),"p"))){for(p=new t(f,f);s=p.next();)if(3===s.nodeType){c=s;break}if(c){if(!(d=r.findPattern(o,c.data)))return;if(m=i.getRng(!0),u=m.startContainer,g=m.startOffset,c===u&&(g=Math.max(0,g-d.start.length)),n.trim(c.data).length===d.start.length)return;d.format&&(l=e.formatter.get(d.format))&&l[0].block&&(c.deleteData(0,d.start.length),e.formatter.apply(d.format,{},c),m.setStart(u,g),m.collapse(!0),i.setRng(m)),d.cmd&&e.undoManager.transact(function(){c.deleteData(0,d.start.length),e.execCommand(d.cmd)})}}}}}),i("tinymce.plugins.textpattern.core.KeyHandler",["tinymce.core.util.VK","tinymce.plugins.textpattern.core.Formatter"],function(e,t){function n(e,n){var r,o;r=t.applyInlineFormatEnter(e,n),r&&(o=e.dom.createRng(),o.setStart(r,r.data.length),o.setEnd(r,r.data.length),e.selection.setRng(o)),t.applyBlockFormat(e,n)}function r(e,n){var r,o,i,a,u;(r=t.applyInlineFormatSpace(e,n))&&(u=e.dom,o=r.data.slice(-1),/[\u00a0 ]/.test(o)&&(r.deleteData(r.data.length-1,1),i=u.doc.createTextNode(o),u.insertAfter(i,r.parentNode),a=u.createRng(),a.setStart(i,1),a.setEnd(i,1),e.selection.setRng(a)))}var o=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},i=function(t,n){return o(t,n,function(t,n){return t===n.keyCode&&!1===e.modifierPressed(n)})};return{handleEnter:n,handleInlineKey:r,checkCharCode:function(e,t){return o(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},checkKeyCode:i}}),i("tinymce.plugins.textpattern.core.Keyboard",["tinymce.core.util.Delay","tinymce.core.util.VK","tinymce.plugins.textpattern.core.KeyHandler"],function(e,t,n){return{setup:function(r,o){var i=[",",".",";",":","!","?"],a=[32];r.on("keydown",function(e){13!==e.keyCode||t.modifierPressed(e)||n.handleEnter(r,o.get())},!0),r.on("keyup",function(e){n.checkKeyCode(a,e)&&n.handleInlineKey(r,o.get())}),r.on("keypress",function(t){n.checkCharCode(i,t)&&e.setEditorTimeout(r,function(){n.handleInlineKey(r,o.get())})})}}}),i("tinymce.plugins.textpattern.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.textpattern.api.Api","tinymce.plugins.textpattern.api.Settings","tinymce.plugins.textpattern.core.Keyboard"],function(e,t,n,r,o){return t.add("textpattern",function(t){var i=e(r.getPatterns(t.settings));return o.setup(t,i),n.get(i)}),function(){}}),r("tinymce.plugins.textpattern.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),i("3",[],function(){return{get:function(e){return{setPatterns:function(t){e.set(t)},getPatterns:function(){return e.get()}}}}}),i("4",[],function(){var e=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}];return{getPatterns:function(t){return void 0!==t.textpattern_patterns?t.textpattern_patterns:e}}}),i("7",["6"],function(e){return e("tinymce.util.Delay")}),i("8",["6"],function(e){return e("tinymce.util.VK")}),a("b",document),i("c",["6"],function(e){return e("tinymce.dom.TreeWalker")}),i("d",["6"],function(e){return e("tinymce.util.Tools")}),i("e",[],function(){var e=function(e){return e.sort(function(e,t){return e.start.length>t.start.length?-1:e.start.length<t.start.length?1:0})},t=function(e,t,n,r){return t.substr(n-e.end.length-r,e.end.length)===e.end},n=function(e,t,n){return e-t-n.end.length-n.start.length>0};return{findPattern:function(e,t){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n].start)&&(!e[n].end||t.lastIndexOf(e[n].end)===t.length-e[n].end.length))return e[n]},findEndPattern:function(r,o,i,a){var u,c,s=e(r);for(c=0;c<s.length;c++)if(u=s[c],void 0!==u.end&&t(u,o,i,a)&&n(i,a,u))return u}}}),i("a",["b","c","d","e"],function(e,t,n,r){var o=function(e,t,n,r){return e=r>0?e.splitText(r):e,e.splitText(n-r+t.end.length),e.deleteData(0,t.start.length),e.deleteData(e.data.length-t.end.length,t.end.length),e},i=function(t,n,o){if(!1!==n.collapsed){var i=n.startContainer,a=i.data,u=!0===o?1:0;if(3===i.nodeType){var c=r.findEndPattern(t,a,n.startOffset,u);if(void 0!==c){var s=a.lastIndexOf(c.end,n.startOffset-u),l=a.lastIndexOf(c.start,s-c.end.length);if(s=a.indexOf(c.end,l+c.start.length),-1!==l){var f=e.createRange();f.setStart(i,l),f.setEnd(i,s+c.end.length);var d=r.findPattern(t,f.toString());if(!(void 0===c||d!==c||i.data.length<=c.start.length+c.end.length))return{pattern:c,startOffset:l,endOffset:s}}}}}},a=function(e,t,r,i){var a=n.isArray(r.pattern.format)?r.pattern.format:[r.pattern.format];if(0!==n.grep(a,function(t){var n=e.formatter.get(t);return n&&n[0].inline}).length)return e.undoManager.transact(function(){t=o(t,r.pattern,r.endOffset,r.startOffset,i),a.forEach(function(n){e.formatter.apply(n,{},t)})}),t},u=function(e,t,n){var r=e.selection.getRng(!0),o=i(t,r,n);if(o)return a(e,r.startContainer,o,n)},c=function(e,t){return u(e,t,!0)},s=function(e,t){return u(e,t,!1)},l=function(e,o){var i,a,u,c,s,l,f,d,p,m,g;if(i=e.selection,a=e.dom,i.isCollapsed()&&(f=a.getParent(i.getStart(),"p"))){for(p=new t(f,f);s=p.next();)if(3===s.nodeType){c=s;break}if(c){if(!(d=r.findPattern(o,c.data)))return;if(m=i.getRng(!0),u=m.startContainer,g=m.startOffset,c===u&&(g=Math.max(0,g-d.start.length)),n.trim(c.data).length===d.start.length)return;d.format&&(l=e.formatter.get(d.format))&&l[0].block&&(c.deleteData(0,d.start.length),e.formatter.apply(d.format,{},c),m.setStart(u,g),m.collapse(!0),i.setRng(m)),d.cmd&&e.undoManager.transact(function(){c.deleteData(0,d.start.length),e.execCommand(d.cmd)})}}};return{patternFromRng:i,applyInlineFormatSpace:c,applyInlineFormatEnter:s,applyBlockFormat:l}}),i("9",["8","a"],function(e,t){function n(e,n){var r,o;r=t.applyInlineFormatEnter(e,n),r&&(o=e.dom.createRng(),o.setStart(r,r.data.length),o.setEnd(r,r.data.length),e.selection.setRng(o)),t.applyBlockFormat(e,n)}function r(e,n){var r,o,i,a,u;(r=t.applyInlineFormatSpace(e,n))&&(u=e.dom,o=r.data.slice(-1),/[\u00a0 ]/.test(o)&&(r.deleteData(r.data.length-1,1),i=u.doc.createTextNode(o),u.insertAfter(i,r.parentNode),a=u.createRng(),a.setStart(i,1),a.setEnd(i,1),e.selection.setRng(a)))}var o=function(e,t,n){for(var r=0;r<e.length;r++)if(n(e[r],t))return!0},i=function(t,n){return o(t,n,function(t,n){return t===n.keyCode&&!1===e.modifierPressed(n)})};return{handleEnter:n,handleInlineKey:r,checkCharCode:function(e,t){return o(e,t,function(e,t){return e.charCodeAt(0)===t.charCode})},checkKeyCode:i}}),i("5",["7","8","9"],function(e,t,n){return{setup:function(r,o){var i=[",",".",";",":","!","?"],a=[32];r.on("keydown",function(e){13!==e.keyCode||t.modifierPressed(e)||n.handleEnter(r,o.get())},!0),r.on("keyup",function(e){n.checkKeyCode(a,e)&&n.handleInlineKey(r,o.get())}),r.on("keypress",function(t){n.checkCharCode(i,t)&&e.setEditorTimeout(r,function(){n.handleInlineKey(r,o.get())})})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("textpattern",function(t){var i=e(r.getPatterns(t.settings));return o.setup(t,i),n.get(i)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.toc.api.Settings",[],function(){return{getTocClass:function(e){return e.getParam("toc_class","mce-toc")},getTocHeader:function(e){var t=e.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},getTocDepth:function(e){var t=parseInt(e.getParam("toc_depth","3"),10);return t>=1&&t<=9?t:3}}}),i("tinymce.plugins.toc.core.Guid",[],function(){return{create:function(e){var t=0;return function(){var n=(new Date).getTime().toString(32);return e+n+(t++).toString(32)}}}}),i("tinymce.plugins.toc.core.Toc",["tinymce.core.dom.DOMUtils","tinymce.core.util.I18n","tinymce.core.util.Tools","tinymce.plugins.toc.api.Settings","tinymce.plugins.toc.core.Guid"],function(e,t,n,r,o){var i=o.create("mcetoc_"),a=function(e){var t,n=[];for(t=1;t<=e;t++)n.push("h"+t);return n.join(",")},u=function(e){return c(e).length>0},c=function(e){var t=r.getTocClass(e),o=r.getTocHeader(e),u=a(r.getTocDepth(e)),c=e.$(u);return c.length&&/^h[1-9]$/i.test(o)&&(c=c.filter(function(n,r){return!e.dom.hasClass(r.parentNode,t)})),n.map(c,function(t){return{id:t.id?t.id:i(),level:parseInt(t.nodeName.replace(/^H/i,""),10),title:e.$.text(t),element:t}})},s=function(e){var t,n=9;for(t=0;t<e.length;t++)if(e[t].level<n&&(n=e[t].level),1===n)return n;return n},l=function(t,n){var r="<"+t+' contenteditable="true">',o="</"+t+">";return r+e.DOM.encode(n)+o},f=function(e){var t=d(e);return'<div class="'+e.dom.encode(r.getTocClass(e))+'" contenteditable="false">'+t+"</div>"},d=function(e){var n,o,i,a,u="",f=c(e),d=s(f)-1;if(!f.length)return"";for(u+=l(r.getTocHeader(e),t.translate("Table of Contents")),n=0;n<f.length;n++){if(i=f[n],i.element.id=i.id,a=f[n+1]&&f[n+1].level,d===i.level)u+="<li>";else for(o=d;o<i.level;o++)u+="<ul><li>";if(u+='<a href="#'+i.id+'">'+i.title+"</a>",a!==i.level&&a)for(o=i.level;o>a;o--)u+="</li></ul><li>";else u+="</li>",a||(u+="</ul>");d=i.level}return u},p=function(e,t){return!t.length||e.dom.getParents(t[0],".mce-offscreen-selection").length>0},m=function(e){var t=r.getTocClass(e),n=e.$("."+t);p(e,n)?e.insertContent(f(e)):g(e)},g=function(e){var t=r.getTocClass(e),n=e.$("."+t);n.length&&e.undoManager.transact(function(){n.html(d(e))})};return{hasHeaders:u,insertToc:m,updateToc:g}}),i("tinymce.plugins.toc.api.Commands",["tinymce.plugins.toc.core.Toc"],function(e){return{register:function(t){t.addCommand("mceInsertToc",function(){e.insertToc(t)}),t.addCommand("mceUpdateToc",function(){e.updateToc(t)})}}}),i("tinymce.plugins.toc.core.FilterContent",["tinymce.plugins.toc.api.Settings"],function(e){return{setup:function(t){var n=t.$,r=e.getTocClass(t);t.on("PreProcess",function(e){var t=n("."+r,e.node);t.length&&(t.removeAttr("contentEditable"),t.find("[contenteditable]").removeAttr("contentEditable"))}),t.on("SetContent",function(){var e=n("."+r);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))})}}}),i("tinymce.plugins.toc.ui.Buttons",["tinymce.plugins.toc.api.Settings","tinymce.plugins.toc.core.Toc"],function(e,t){var n=function(e){return function(n){var r=n.control;e.on("LoadContent SetContent change",function(){r.disabled(e.readonly||!t.hasHeaders(e))})}},r=function(t){return function(n){return n&&t.dom.is(n,"."+e.getTocClass(t))&&t.getBody().contains(n)}};return{register:function(e){e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:n(e)}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:n(e)}),e.addContextToolbar(r(e),"tocupdate")}}}),i("tinymce.plugins.toc.Plugin",["tinymce.core.PluginManager","tinymce.plugins.toc.api.Commands","tinymce.plugins.toc.api.Settings","tinymce.plugins.toc.core.FilterContent","tinymce.plugins.toc.ui.Buttons"],function(e,t,n,r,o){return e.add("toc",function(e){t.register(e),o.register(e),r.setup(e)}),function(){}}),r("tinymce.plugins.toc.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("6",tinymce.util.Tools.resolve),i("1",["6"],function(e){return e("tinymce.PluginManager")}),i("8",["6"],function(e){return e("tinymce.dom.DOMUtils")}),i("9",["6"],function(e){return e("tinymce.util.I18n")}),i("a",["6"],function(e){return e("tinymce.util.Tools")}),i("3",[],function(){return{getTocClass:function(e){return e.getParam("toc_class","mce-toc")},getTocHeader:function(e){var t=e.getParam("toc_header","h2");return/^h[1-6]$/.test(t)?t:"h2"},getTocDepth:function(e){var t=parseInt(e.getParam("toc_depth","3"),10);return t>=1&&t<=9?t:3}}}),i("b",[],function(){return{create:function(e){var t=0;return function(){var n=(new Date).getTime().toString(32);return e+n+(t++).toString(32)}}}}),i("7",["8","9","a","3","b"],function(e,t,n,r,o){var i=o.create("mcetoc_"),a=function(e){var t,n=[];for(t=1;t<=e;t++)n.push("h"+t);return n.join(",")},u=function(e){return c(e).length>0},c=function(e){var t=r.getTocClass(e),o=r.getTocHeader(e),u=a(r.getTocDepth(e)),c=e.$(u);return c.length&&/^h[1-9]$/i.test(o)&&(c=c.filter(function(n,r){return!e.dom.hasClass(r.parentNode,t)})),n.map(c,function(t){return{id:t.id?t.id:i(),level:parseInt(t.nodeName.replace(/^H/i,""),10),title:e.$.text(t),element:t}})},s=function(e){var t,n=9;for(t=0;t<e.length;t++)if(e[t].level<n&&(n=e[t].level),1===n)return n;return n},l=function(t,n){var r="<"+t+' contenteditable="true">',o="</"+t+">";return r+e.DOM.encode(n)+o},f=function(e){var t=d(e);return'<div class="'+e.dom.encode(r.getTocClass(e))+'" contenteditable="false">'+t+"</div>"},d=function(e){var n,o,i,a,u="",f=c(e),d=s(f)-1;if(!f.length)return"";for(u+=l(r.getTocHeader(e),t.translate("Table of Contents")),n=0;n<f.length;n++){if(i=f[n],i.element.id=i.id,a=f[n+1]&&f[n+1].level,d===i.level)u+="<li>";else for(o=d;o<i.level;o++)u+="<ul><li>";if(u+='<a href="#'+i.id+'">'+i.title+"</a>",a!==i.level&&a)for(o=i.level;o>a;o--)u+="</li></ul><li>";else u+="</li>",a||(u+="</ul>");d=i.level}return u},p=function(e,t){return!t.length||e.dom.getParents(t[0],".mce-offscreen-selection").length>0},m=function(e){var t=r.getTocClass(e),n=e.$("."+t);p(e,n)?e.insertContent(f(e)):g(e)},g=function(e){var t=r.getTocClass(e),n=e.$("."+t);n.length&&e.undoManager.transact(function(){n.html(d(e))})};return{hasHeaders:u,insertToc:m,updateToc:g}}),i("2",["7"],function(e){return{register:function(t){t.addCommand("mceInsertToc",function(){e.insertToc(t)}),t.addCommand("mceUpdateToc",function(){e.updateToc(t)})}}}),i("4",["3"],function(e){return{setup:function(t){var n=t.$,r=e.getTocClass(t);t.on("PreProcess",function(e){var t=n("."+r,e.node);t.length&&(t.removeAttr("contentEditable"),t.find("[contenteditable]").removeAttr("contentEditable"))}),t.on("SetContent",function(){var e=n("."+r);e.length&&(e.attr("contentEditable",!1),e.children(":first-child").attr("contentEditable",!0))})}}}),i("5",["3","7"],function(e,t){var n=function(e){return function(n){var r=n.control;e.on("LoadContent SetContent change",function(){r.disabled(e.readonly||!t.hasHeaders(e))})}},r=function(t){return function(n){return n&&t.dom.is(n,"."+e.getTocClass(t))&&t.getBody().contains(n)}};return{register:function(e){e.addButton("toc",{tooltip:"Table of Contents",cmd:"mceInsertToc",icon:"toc",onPostRender:n(e)}),e.addButton("tocupdate",{tooltip:"Update",cmd:"mceUpdateToc",icon:"reload"}),e.addMenuItem("toc",{text:"Table of Contents",context:"insert",cmd:"mceInsertToc",onPostRender:n(e)}),e.addContextToolbar(r(e),"tocupdate")}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return e.add("toc",function(e){t.register(e),o.register(e),r.setup(e)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.visualblocks.api.Events",[],function(){return{fireVisualBlocks:function(e,t){e.fire("VisualBlocks",{state:t})}}}),i("tinymce.plugins.visualblocks.api.Settings",[],function(){return{isEnabledByDefault:function(e){return e.getParam("visualblocks_default_state",!1)},getContentCss:function(e){return e.settings.visualblocks_content_css}}}),i("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.dom.DOMUtils")}),i("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),i("tinymce.plugins.visualblocks.core.LoadCss",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t){var n=e.DOM.uniqueId();return{load:function(r,o){var i=t.toArray(r.getElementsByTagName("link"));if(0===t.grep(i,function(e){return e.id===n}).length){var a=e.DOM.create("link",{id:n,rel:"stylesheet",href:o});r.getElementsByTagName("head")[0].appendChild(a)}}}}),i("tinymce.plugins.visualblocks.core.VisualBlocks",["tinymce.plugins.visualblocks.api.Events","tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.LoadCss"],function(e,t,n){return{toggleVisualBlocks:function(r,o,i){var a=r.dom,u=t.getContentCss(r);n.load(r.getDoc(),u||o+"/css/visualblocks.css"),a.toggleClass(r.getBody(),"mce-visualblocks"),i.set(!i.get()),e.fireVisualBlocks(r,i.get())}}}),i("tinymce.plugins.visualblocks.api.Commands",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(e){return{register:function(t,n,r){t.addCommand("mceVisualBlocks",function(){e.toggleVisualBlocks(t,n,r)})}}}),i("tinymce.plugins.visualblocks.core.Bindings",["tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.VisualBlocks"],function(e,t){return{setup:function(n,r,o){n.on("PreviewFormats AfterPreviewFormats",function(e){o.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),n.on("init",function(){e.isEnabledByDefault(n)&&t.toggleVisualBlocks(n,r,o)}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")})}}}),i("tinymce.plugins.visualblocks.ui.Buttons",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(){var e=function(e,t){return function(n){var r=n.control;r.active(t.get()),e.on("VisualBlocks",function(e){r.active(e.state)})}};return{register:function(t,n){t.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(t,n)}),t.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(t,n),selectable:!0,context:"view",prependToContext:!0})}}}),i("tinymce.plugins.visualblocks.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualblocks.api.Commands","tinymce.plugins.visualblocks.core.Bindings","tinymce.plugins.visualblocks.ui.Buttons"],function(e,t,n,r,o){return t.add("visualblocks",function(t,i){var a=e(!1);n.register(t,i,a),o.register(t,a),r.setup(t,i,a)}),function(){}}),r("tinymce.plugins.visualblocks.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("6",tinymce.util.Tools.resolve),i("2",["6"],function(e){return e("tinymce.PluginManager")}),i("9",[],function(){return{fireVisualBlocks:function(e,t){e.fire("VisualBlocks",{state:t})}}}),i("8",[],function(){return{isEnabledByDefault:function(e){return e.getParam("visualblocks_default_state",!1)},getContentCss:function(e){return e.settings.visualblocks_content_css}}}),i("b",["6"],function(e){return e("tinymce.dom.DOMUtils")}),i("c",["6"],function(e){return e("tinymce.util.Tools")}),i("a",["b","c"],function(e,t){var n=e.DOM.uniqueId();return{load:function(r,o){var i=t.toArray(r.getElementsByTagName("link"));if(0===t.grep(i,function(e){return e.id===n}).length){var a=e.DOM.create("link",{id:n,rel:"stylesheet",href:o});r.getElementsByTagName("head")[0].appendChild(a)}}}}),i("7",["9","8","a"],function(e,t,n){return{toggleVisualBlocks:function(r,o,i){var a=r.dom,u=t.getContentCss(r);n.load(r.getDoc(),u||o+"/css/visualblocks.css"),a.toggleClass(r.getBody(),"mce-visualblocks"),i.set(!i.get()),e.fireVisualBlocks(r,i.get())}}}),i("3",["7"],function(e){return{register:function(t,n,r){t.addCommand("mceVisualBlocks",function(){e.toggleVisualBlocks(t,n,r)})}}}),i("4",["8","7"],function(e,t){return{setup:function(n,r,o){n.on("PreviewFormats AfterPreviewFormats",function(e){o.get()&&n.dom.toggleClass(n.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),n.on("init",function(){e.isEnabledByDefault(n)&&t.toggleVisualBlocks(n,r,o)}),n.on("remove",function(){n.dom.removeClass(n.getBody(),"mce-visualblocks")})}}}),i("5",["7"],function(){var e=function(e,t){return function(n){var r=n.control;r.active(t.get()),e.on("VisualBlocks",function(e){r.active(e.state)})}};return{register:function(t,n){t.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(t,n)}),t.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:e(t,n),selectable:!0,context:"view",prependToContext:!0})}}}),i("0",["1","2","3","4","5"],function(e,t,n,r,o){return t.add("visualblocks",function(t,i){var a=e(!1);n.register(t,i,a),o.register(t,a),r.setup(t,i,a)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.visualchars.api.Api",[],function(){return{get:function(e){return{isEnabled:function(){return e.get()}}}}}),i("tinymce.plugins.visualchars.api.Events",[],function(){return{fireVisualChars:function(e,t){return e.fire("VisualChars",{state:t})}}}),i("tinymce.plugins.visualchars.core.Data",[],function(){var e={"\xa0":"nbsp","\xad":"shy"},t=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},n=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n};return{charMap:e,regExp:t(e),regExpGlobal:t(e,!0),selector:n(e),charMapToRegExp:t,charMapToSelector:n}}),a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),a("global!document",document),i("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return u(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return u(o)},u=function(n){if(null===n||n===undefined)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:u}}),i("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,
DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),u=o(e.TEXT),c=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:u,isDocument:c,isComment:i}}),i("tinymce.plugins.visualchars.core.Html",["tinymce.plugins.visualchars.core.Data"],function(e){return{wrapCharWithSpan:function(t){return'<span data-mce-bogus="1" class="mce-'+e.charMap[t]+'">'+t+"</span>"}}}),i("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(e,t,n,r,o){var i=function(e){return n.isText(e)&&n.value(e)!==undefined&&r.regExp.test(n.value(e))},a=function(n,r){var o=[],i=n.dom(),u=e.map(i.childNodes,t.fromDom);return e.each(u,function(e){r(e)&&(o=o.concat([e])),o=o.concat(a(e,r))}),o};return{isMatch:i,filterDescendants:a,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(e){return e.replace(r.regExpGlobal,o.wrapCharWithSpan)}}}),i("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node"],function(e,t,n,r,o){var i=function(e,i){var a,u,c=t.filterDescendants(r.fromDom(i),t.isMatch);n.each(c,function(n){var r=t.replaceWithSpans(o.value(n));for(u=e.dom.create("div",null,r);a=u.lastChild;)e.dom.insertAfter(a,n.dom());e.dom.remove(n.dom())})},a=function(t,r){var o=t.dom.select(e.selector,r);n.each(o,function(e){t.dom.remove(e,1)})};return{show:i,hide:a,toggle:function(e){var n=e.getBody(),r=e.selection.getBookmark(),o=t.findParentElm(e.selection.getNode(),n);o=o!==undefined?o:n,a(e,o),i(e,o),e.selection.moveToBookmark(r)}}}),i("tinymce.plugins.visualchars.core.Actions",["tinymce.plugins.visualchars.api.Events","tinymce.plugins.visualchars.core.VisualChars"],function(e,t){return{toggleVisualChars:function(n,r){var o,i=n.getBody(),a=n.selection;r.set(!r.get()),e.fireVisualChars(n,r.get()),o=a.getBookmark(),!0===r.get()?t.show(n,i):t.hide(n,i),a.moveToBookmark(o)}}}),i("tinymce.plugins.visualchars.api.Commands",["tinymce.plugins.visualchars.core.Actions"],function(e){return{register:function(t,n){t.addCommand("mceVisualChars",function(){e.toggleVisualChars(t,n)})}}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.plugins.visualchars.core.Keyboard",["tinymce.core.util.Delay","tinymce.plugins.visualchars.core.VisualChars"],function(e,t){return{setup:function(n,r){var o=e.debounce(function(){t.toggle(n)},300);!1!==n.settings.forced_root_block&&n.on("keydown",function(e){!0===r.get()&&(13===e.keyCode?t.toggle(n):o())})}}}),i("tinymce.plugins.visualchars.ui.Buttons",[],function(){var e=function(e){return function(t){var n=t.control;e.on("VisualChars",function(e){n.active(e.state)})}};return{register:function(t){t.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e(t)}),t.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e(t),selectable:!0,context:"view",prependToContext:!0})}}}),i("tinymce.plugins.visualchars.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualchars.api.Api","tinymce.plugins.visualchars.api.Commands","tinymce.plugins.visualchars.core.Keyboard","tinymce.plugins.visualchars.ui.Buttons"],function(e,t,n,r,o,i){return t.add("visualchars",function(t){var a=e(!1);return r.register(t,a),i.register(t),o.setup(t,a),n.get(a)}),function(){}}),r("tinymce.plugins.visualchars.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};i("1",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),a("7",tinymce.util.Tools.resolve),i("2",["7"],function(e){return e("tinymce.PluginManager")}),i("3",[],function(){return{get:function(e){return{isEnabled:function(){return e.get()}}}}}),i("b",[],function(){return{fireVisualChars:function(e,t){return e.fire("VisualChars",{state:t})}}}),i("c",[],function(){var e={"\xa0":"nbsp","\xad":"shy"},t=function(e,t){var n,r="";for(n in e)r+=n;return new RegExp("["+r+"]",t?"g":"")},n=function(e){var t,n="";for(t in e)n&&(n+=","),n+="span.mce-"+e[t];return n};return{charMap:e,regExp:t(e),regExpGlobal:t(e,!0),selector:n(e),charMapToRegExp:t,charMapToSelector:n}}),a("i",Array),a("j",Error),i("l",["i","j"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}},i=function(e){return e},a=function(e,t){return e===t},u=function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}};return{noop:n,compose:r,constant:o,identity:i,tripleEquals:a,curry:u,not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("q",Object),i("h",["l","q"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||void 0===e?i:a(e)}}}),a("k",String),i("e",["h","i","j","k"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return void 0===e?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),i("m",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),a("n",document),i("f",["l","j","m","n"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return u(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return u(o)},u=function(n){if(null===n||void 0===n)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:u}}),i("o",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("g",["o"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),u=o(e.TEXT),c=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:u,isDocument:c,isComment:i}}),i("p",["c"],function(e){return{wrapCharWithSpan:function(t){return'<span data-mce-bogus="1" class="mce-'+e.charMap[t]+'">'+t+"</span>"}}}),i("d",["e","f","g","c","p"],function(e,t,n,r,o){var i=function(e){return n.isText(e)&&void 0!==n.value(e)&&r.regExp.test(n.value(e))},a=function(n,r){var o=[],i=n.dom(),u=e.map(i.childNodes,t.fromDom);return e.each(u,function(e){r(e)&&(o=o.concat([e])),o=o.concat(a(e,r))}),o};return{isMatch:i,filterDescendants:a,findParentElm:function(e,t){for(;e.parentNode;){if(e.parentNode===t)return e;e=e.parentNode}},replaceWithSpans:function(e){return e.replace(r.regExpGlobal,o.wrapCharWithSpan)}}}),i("a",["c","d","e","f","g"],function(e,t,n,r,o){var i=function(e,i){var a,u,c=t.filterDescendants(r.fromDom(i),t.isMatch);n.each(c,function(n){var r=t.replaceWithSpans(o.value(n));for(u=e.dom.create("div",null,r);a=u.lastChild;)e.dom.insertAfter(a,n.dom());e.dom.remove(n.dom())})},a=function(t,r){var o=t.dom.select(e.selector,r);n.each(o,function(e){t.dom.remove(e,1)})};return{show:i,hide:a,toggle:function(e){var n=e.getBody(),r=e.selection.getBookmark(),o=t.findParentElm(e.selection.getNode(),n);o=void 0!==o?o:n,a(e,o),i(e,o),e.selection.moveToBookmark(r)}}}),i("8",["b","a"],function(e,t){return{toggleVisualChars:function(n,r){var o,i=n.getBody(),a=n.selection;r.set(!r.get()),e.fireVisualChars(n,r.get()),o=a.getBookmark(),!0===r.get()?t.show(n,i):t.hide(n,i),a.moveToBookmark(o)}}}),i("4",["8"],function(e){return{register:function(t,n){t.addCommand("mceVisualChars",function(){e.toggleVisualChars(t,n)})}}}),i("9",["7"],function(e){return e("tinymce.util.Delay")}),i("5",["9","a"],function(e,t){return{setup:function(n,r){var o=e.debounce(function(){t.toggle(n)},300);!1!==n.settings.forced_root_block&&n.on("keydown",function(e){!0===r.get()&&(13===e.keyCode?t.toggle(n):o())})}}}),i("6",[],function(){var e=function(e){return function(t){var n=t.control;e.on("VisualChars",function(e){n.active(e.state)})}};return{register:function(t){t.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e(t)}),t.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:e(t),selectable:!0,context:"view",prependToContext:!0})}}}),i("0",["1","2","3","4","5","6"],function(e,t,n,r,o,i){return t.add("visualchars",function(t){var a=e(!1);return r.register(t,a),i.register(t),o.setup(t,a),n.get(a)}),function(){}}),r("0")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),i("tinymce.plugins.wordcount.text.UnicodeData",[],function(){var e={aletter:"[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]",midnumlet:"[-'\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]",midletter:"[:\xb7\xb7\u05f4\u2027\ufe13\ufe55\uff1a]",midnum:"[+*/,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b\u2200-\u22ff]",numeric:"[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]",cr:"\\r",lf:"\\n",newline:"[\x0B\f\x85\u2028\u2029]",extend:"[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]",format:"[\xad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]",katakana:"[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]",extendnumlet:"[=_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"};return{characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp(e.aletter),new RegExp(e.midnumlet),new RegExp(e.midletter),new RegExp(e.midnum),new RegExp(e.numeric),new RegExp(e.cr),new RegExp(e.lf),new RegExp(e.newline),new RegExp(e.extend),new RegExp(e.format),new RegExp(e.katakana),new RegExp(e.extendnumlet),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+e.punctuation+"$"),WHITESPACE:/^\s+$/}}),i("tinymce.plugins.wordcount.alien.Arr",[],function(){var e=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,e.length!==undefined){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1};return{each:e,map:function(t,n){var r=[];return e(t,function(e,o){r.push(n(e,o,t))}),r}}}),i("tinymce.plugins.wordcount.text.StringMapper",["tinymce.plugins.wordcount.text.UnicodeData","tinymce.plugins.wordcount.alien.Arr"],function(e,t){var n=e.SETS,r=e.characterIndices.OTHER,o=function(e){var t,o,i=r,a=n.length;for(t=0;t<a;++t)if((o=n[t])&&o.test(e)){i=t;break}return i},i=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}};return{classify:function(e){var n=i(o);return t.map(e.split(""),n)}}}),i("tinymce.plugins.wordcount.text.WordBoundary",["tinymce.plugins.wordcount.text.UnicodeData"],function(e){var t=e.characterIndices;return{isWordBoundary:function(e,n){var r,o,i=e[n],a=e[n+1];return!(n<0||n>e.length-1&&0!==n||i===t.ALETTER&&a===t.ALETTER||(o=e[n+2],i===t.ALETTER&&(a===t.MIDLETTER||a===t.MIDNUMLET||a===t.AT)&&o===t.ALETTER||(r=e[n-1],(i===t.MIDLETTER||i===t.MIDNUMLET||a===t.AT)&&a===t.ALETTER&&r===t.ALETTER||!(i!==t.NUMERIC&&i!==t.ALETTER||a!==t.NUMERIC&&a!==t.ALETTER)||(i===t.MIDNUM||i===t.MIDNUMLET)&&a===t.NUMERIC&&r===t.NUMERIC||i===t.NUMERIC&&(a===t.MIDNUM||a===t.MIDNUMLET)&&o===t.NUMERIC||i===t.EXTEND||i===t.FORMAT||r===t.EXTEND||r===t.FORMAT||a===t.EXTEND||a===t.FORMAT||i===t.CR&&a===t.LF||i!==t.NEWLINE&&i!==t.CR&&i!==t.LF&&a!==t.NEWLINE&&a!==t.CR&&a!==t.LF&&(i===t.KATAKANA&&a===t.KATAKANA||a===t.EXTENDNUMLET&&(i===t.ALETTER||i===t.NUMERIC||i===t.KATAKANA||i===t.EXTENDNUMLET)||i===t.EXTENDNUMLET&&(a===t.ALETTER||a===t.NUMERIC||a===t.KATAKANA)||i===t.AT))))}}}),i("tinymce.plugins.wordcount.text.WordGetter",["tinymce.plugins.wordcount.text.UnicodeData","tinymce.plugins.wordcount.text.StringMapper","tinymce.plugins.wordcount.text.WordBoundary"],function(e,t,n){var r=e.EMPTY_STRING,o=e.WHITESPACE,i=e.PUNCTUATION,a=function(e){return"http"===e||"https"===e},u=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(o.test(r))break}return n},c=function(e,t,n){var r=u(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},s=function(e,u){var s,l,f,d=0,p=t.classify(e),m=p.length,g=[],h=[];for(u||(u={}),u.ignoreCase&&(e=e.toLowerCase()),l=u.includePunctuation,f=u.includeWhitespace;d<m;++d)if(s=e.charAt(d),g.push(s),n.isWordBoundary(p,d)){if((g=g.join(r))&&(f||!o.test(g))&&(l||!i.test(g)))if(a(g)){var v=c(g,e,d);h.push(v.word),d=v.index}else h.push(g);g=[]}return h};return{getWords:function(e,t){return s(e.replace(/\ufeff/g,""),t)}}}),i("tinymce.plugins.wordcount.text.WordCount",["tinymce.plugins.wordcount.text.WordGetter"],function(e){var t=function(e){return e.removed?"":e.getBody().innerText};return{getCount:function(n){return e.getWords(t(n)).length}}}),i("tinymce.plugins.wordcount.api.Api",["tinymce.plugins.wordcount.text.WordCount"],function(e){return{get:function(t){return{getCount:function(){return e.getCount(t)}}}}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Delay")}),i("tinymce.core.util.I18n",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.I18n")}),i("tinymce.plugins.wordcount.ui.Statusbar",["tinymce.core.util.Delay","tinymce.core.util.I18n","tinymce.plugins.wordcount.text.WordCount"],function(e,t,n){return{setup:function(r){var o=function(e){return t.translate(["{0} words",n.getCount(e)])},i=function(){r.theme.panel.find("#wordcount").text(o(r))};r.on("init",function(){var t=r.theme.panel&&r.theme.panel.find("#statusbar")[0],n=e.debounce(i,300);t&&e.setEditorTimeout(r,function(){t.insert({type:"label",name:"wordcount",text:o(r),classes:"wordcount",disabled:r.settings.readonly},0),r.on("setcontent beforeaddundo undo redo keyup",n)},0)})}}}),i("tinymce.plugins.wordcount.Plugin",["tinymce.core.PluginManager","tinymce.plugins.wordcount.api.Api","tinymce.plugins.wordcount.ui.Statusbar"],function(e,t,n){return e.add("wordcount",function(e){return n.setup(e),t.get(e)}),function(){}}),r("tinymce.plugins.wordcount.Plugin")()}(),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(void 0===s)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n;(function(e,t){i(e,[],function(){return t})})("4",tinymce.util.Tools.resolve),i("1",["4"],function(e){return e("tinymce.PluginManager")}),i("9",[],function(){var e={aletter:"[A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f3\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bc0-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u24b6-\u24e9\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u303b\u303c\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790\ua791\ua7a0-\ua7a9\ua7fa-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]",midnumlet:"[-'\\.\u2018\u2019\u2024\ufe52\uff07\uff0e]",midletter:"[:\xb7\xb7\u05f4\u2027\ufe13\ufe55\uff1a]",midnum:"[+*/,;;\u0589\u060c\u060d\u066c\u07f8\u2044\ufe10\ufe14\ufe50\ufe54\uff0c\uff1b\u2200-\u22ff]",numeric:"[0-9\u0660-\u0669\u066b\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9]",cr:"\\r",lf:"\\n",newline:"[\x0B\f\x85\u2028\u2029]",
extend:"[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b6-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1baa\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]",format:"[\xad\u0600-\u0603\u06dd\u070f\u17b4\u17b5\u200e\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb]",katakana:"[\u3031-\u3035\u309b\u309c\u30a0-\u30fa\u30fc-\u30ff\u31f0-\u31ff\u32d0-\u32fe\u3300-\u3357\uff66-\uff9d]",extendnumlet:"[=_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}\xa1\xab\xb7\xbb\xbf;\xb7\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1361-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u3008\u3009\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30\u2e31\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65]"};return{characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp(e.aletter),new RegExp(e.midnumlet),new RegExp(e.midletter),new RegExp(e.midnum),new RegExp(e.numeric),new RegExp(e.cr),new RegExp(e.lf),new RegExp(e.newline),new RegExp(e.extend),new RegExp(e.format),new RegExp(e.katakana),new RegExp(e.extendnumlet),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+e.punctuation+"$"),WHITESPACE:/^\s+$/}}),i("c",[],function(){var e=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,void 0!==e.length){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1};return{each:e,map:function(t,n){var r=[];return e(t,function(e,o){r.push(n(e,o,t))}),r}}}),i("a",["9","c"],function(e,t){var n=e.SETS,r=e.characterIndices.OTHER,o=function(e){var t,o,i=r,a=n.length;for(t=0;t<a;++t)if((o=n[t])&&o.test(e)){i=t;break}return i},i=function(e){var t={};return function(n){if(t[n])return t[n];var r=e(n);return t[n]=r,r}};return{classify:function(e){var n=i(o);return t.map(e.split(""),n)}}}),i("b",["9"],function(e){var t=e.characterIndices;return{isWordBoundary:function(e,n){var r,o,i=e[n],a=e[n+1];return!(n<0||n>e.length-1&&0!==n||i===t.ALETTER&&a===t.ALETTER||(o=e[n+2],i===t.ALETTER&&(a===t.MIDLETTER||a===t.MIDNUMLET||a===t.AT)&&o===t.ALETTER||(r=e[n-1],(i===t.MIDLETTER||i===t.MIDNUMLET||a===t.AT)&&a===t.ALETTER&&r===t.ALETTER||!(i!==t.NUMERIC&&i!==t.ALETTER||a!==t.NUMERIC&&a!==t.ALETTER)||(i===t.MIDNUM||i===t.MIDNUMLET)&&a===t.NUMERIC&&r===t.NUMERIC||i===t.NUMERIC&&(a===t.MIDNUM||a===t.MIDNUMLET)&&o===t.NUMERIC||i===t.EXTEND||i===t.FORMAT||r===t.EXTEND||r===t.FORMAT||a===t.EXTEND||a===t.FORMAT||i===t.CR&&a===t.LF||i!==t.NEWLINE&&i!==t.CR&&i!==t.LF&&a!==t.NEWLINE&&a!==t.CR&&a!==t.LF&&(i===t.KATAKANA&&a===t.KATAKANA||a===t.EXTENDNUMLET&&(i===t.ALETTER||i===t.NUMERIC||i===t.KATAKANA||i===t.EXTENDNUMLET)||i===t.EXTENDNUMLET&&(a===t.ALETTER||a===t.NUMERIC||a===t.KATAKANA)||i===t.AT))))}}}),i("8",["9","a","b"],function(e,t,n){var r=e.EMPTY_STRING,o=e.WHITESPACE,i=e.PUNCTUATION,a=function(e){return"http"===e||"https"===e},u=function(e,t){var n;for(n=t;n<e.length;++n){var r=e.charAt(n);if(o.test(r))break}return n},c=function(e,t,n){var r=u(t,n+1),o=t.substring(n+1,r);return"://"===o.substr(0,3)?{word:e+o,index:r}:{word:e,index:n}},s=function(e,u){var s,l,f,d=0,p=t.classify(e),m=p.length,g=[],h=[];for(u||(u={}),u.ignoreCase&&(e=e.toLowerCase()),l=u.includePunctuation,f=u.includeWhitespace;d<m;++d)if(s=e.charAt(d),g.push(s),n.isWordBoundary(p,d)){if((g=g.join(r))&&(f||!o.test(g))&&(l||!i.test(g)))if(a(g)){var v=c(g,e,d);h.push(v.word),d=v.index}else h.push(g);g=[]}return h};return{getWords:function(e,t){return s(e.replace(/\ufeff/g,""),t)}}}),i("5",["8"],function(e){var t=function(e){return e.removed?"":e.getBody().innerText};return{getCount:function(n){return e.getWords(t(n)).length}}}),i("2",["5"],function(e){return{get:function(t){return{getCount:function(){return e.getCount(t)}}}}}),i("6",["4"],function(e){return e("tinymce.util.Delay")}),i("7",["4"],function(e){return e("tinymce.util.I18n")}),i("3",["6","7","5"],function(e,t,n){return{setup:function(r){var o=function(e){return t.translate(["{0} words",n.getCount(e)])},i=function(){r.theme.panel.find("#wordcount").text(o(r))};r.on("init",function(){var t=r.theme.panel&&r.theme.panel.find("#statusbar")[0],n=e.debounce(i,300);t&&e.setEditorTimeout(r,function(){t.insert({type:"label",name:"wordcount",text:o(r),classes:"wordcount",disabled:r.settings.readonly},0),r.on("setcontent beforeaddundo undo redo keyup",n)},0)})}}}),i("0",["1","2","3"],function(e,t,n){return e.add("wordcount",function(e){return n.setup(e),t.get(e)}),function(){}}),r("0")()}(),window.tinymce=window.tinymce||{base:"/assets/tinymce",suffix:""},"undefined"!=typeof Turbolinks&&Turbolinks.supported&&document.addEventListener("turbolinks:before-render",function(){tinymce.remove()}),function(){var e={},t=function(t){for(var n=e[t],o=n.deps,i=n.defn,a=o.length,u=new Array(a),c=0;c<a;++c)u[c]=r(o[c]);var s=i.apply(null,u);if(s===undefined)throw"module ["+t+"] returned undefined";n.instance=s},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(n===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:undefined}},r=function(n){var r=e[n];if(r===undefined)throw"module ["+n+"] was undefined";return r.instance===undefined&&t(n),r.instance},o=function(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;++i)o[i]=r(e[i]);t.apply(null,o)};({}).bolt={module:{api:{define:n,require:o,demand:r}}};var i=n,a=function(e,t){i(e,[],function(){return t})};a("global!Array",Array),a("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,t){var n=function(){},r=function(e,t){return function(){return e(t.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:n,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,t){return e===t},curry:function(t){for(var n=new e(arguments.length-1),r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=n.concat(r);return t.apply(null,i)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new t(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),a("global!window",window),a("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,t){var n=e.never,r=e.always,o=function(){return i},i=function(){var i=function(e){return e.isNone()},a=function(e){return e()},u=function(e){return e},c=function(){},s={fold:function(e){return e()},is:n,isSome:n,isNone:r,getOr:u,getOrThunk:a,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:a,map:o,ap:o,each:c,bind:o,flatten:o,exists:n,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:e.constant("none()")};return t.freeze&&t.freeze(s),s}(),a=function(e){var t=function(){return e},u=function(){return l},c=function(t){return a(t(e))},s=function(t){return t(e)},l={fold:function(t,n){return n(e)},is:function(t){return e===t},isSome:r,isNone:n,getOr:t,getOrThunk:t,getOrDie:t,or:u,orThunk:u,map:c,ap:function(t){return t.fold(o,function(t){return a(t(e))})},each:function(t){t(e)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(e)?l:i},equals:function(t){return t.is(e)},equals_:function(t,r){return t.fold(n,function(t){return r(e,t)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:a,none:o,from:function(e){return null===e||e===undefined?i:a(e)}}}),a("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,t,n,r){var o=function(){var e=t.prototype.indexOf,n=function(t,n){return e.call(t,n)},r=function(e,t){return x(e,t)};return e===undefined?r:n}(),i=function(t,n){var r=o(t,n);return-1===r?e.none():e.some(r)},a=function(e,t){return o(e,t)>-1},u=function(e,t){return b(e,t).isSome()},c=function(e,t){for(var n=[],r=0;r<e;r++)n.push(t(r));return n},s=function(e,t){for(var n=[],r=0;r<e.length;r+=t){var o=e.slice(r,r+t);n.push(o)}return n},l=function(e,n){for(var r=e.length,o=new t(r),i=0;i<r;i++){var a=e[i];o[i]=n(a,i,e)}return o},f=function(e,t){for(var n=0,r=e.length;n<r;n++){t(e[n],n,e)}},d=function(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n,e)}},p=function(e,t){for(var n=[],r=[],o=0,i=e.length;o<i;o++){var a=e[o];(t(a,o,e)?n:r).push(a)}return{pass:n,fail:r}},m=function(e,t){for(var n=[],r=0,o=e.length;r<o;r++){var i=e[r];t(i,r,e)&&n.push(i)}return n},g=function(e,t){if(0===e.length)return[];for(var n=t(e[0]),r=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i],c=t(u);c!==n&&(r.push(o),o=[]),n=c,o.push(u)}return 0!==o.length&&r.push(o),r},h=function(e,t,n){return d(e,function(e){n=t(n,e)}),n},v=function(e,t,n){return f(e,function(e){n=t(n,e)}),n},y=function(t,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r,t))return e.some(i)}return e.none()},b=function(t,n){for(var r=0,o=t.length;r<o;r++){if(n(t[r],r,t))return e.some(r)}return e.none()},x=function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return n;return-1},w=t.prototype.push,C=function(e){for(var r=[],o=0,i=e.length;o<i;++o){if(!t.prototype.isPrototypeOf(e[o]))throw new n("Arr.flatten item "+o+" was not an array, input: "+e);w.apply(r,e[o])}return r},k=function(e,t){var n=l(e,t);return C(n)},T=function(e,t){for(var n=0,r=e.length;n<r;++n){if(!0!==t(e[n],n,e))return!1}return!0},S=function(e,t){return e.length===t.length&&T(e,function(e,n){return e===t[n]})},E=t.prototype.slice;return{map:l,each:f,eachr:d,partition:p,filter:m,groupBy:g,indexOf:i,foldr:h,foldl:v,find:y,findIndex:b,flatten:C,bind:k,forall:T,exists:u,contains:a,equal:S,reverse:function(e){var t=E.call(e,0);return t.reverse(),t},chunk:s,difference:function(e,t){return m(e,function(e){return!a(t,e)})},mapToObject:function(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[r(a)]=t(a,o)}return n},pure:function(e){return[e]},sort:function(e,t){var n=E.call(e,0);return n.sort(t),n},range:c,head:function(t){return 0===t.length?e.none():e.some(t[0])},last:function(t){return 0===t.length?e.none():e.some(t[t.length-1])}}}),a("global!document",document),i("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var t=function(t,n){for(var r=n!==undefined?n:e,o=0;o<t.length&&r!==undefined&&null!==r;++o)r=r[t[o]];return r},n=function(e,n){var r=e.split(".");return t(r,n)},r=function(e,t){return e[t]!==undefined&&null!==e[t]||(e[t]={}),e[t]},o=function(t,n){for(var o=n!==undefined?n:e,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:n,forge:o,namespace:function(e,t){var n=e.split(".");return o(n,t)}}}),i("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var t=function(t,n){return e.resolve(t,n)};return{getOrDie:function(e,n){var r=t(e,n);if(r===undefined)throw e+" not available on this browser";return r}}}),i("ephox.sand.api.URL",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("URL")};return{createObjectURL:function(e){return t().createObjectURL(e)},revokeObjectURL:function(e){t().revokeObjectURL(e)}}}),a("global!matchMedia",matchMedia),a("global!navigator",navigator),i("tinymce.core.Env",["ephox.sand.api.URL","global!document","global!matchMedia","global!navigator","global!window"],function(e,t,n,r,o){var i,a,u,c,s,l,f,d,p,m,g,h,v,y=r,b=y.userAgent,x=function(e){return"matchMedia"in o&&n(e).matches};return i=o.opera&&o.opera.buildNumber,p=/Android/.test(b),a=/WebKit/.test(b),u=!a&&!i&&/MSIE/gi.test(b)&&/Explorer/gi.test(y.appName),u=u&&/MSIE (\w+)\./.exec(b)[1],c=-1!=b.indexOf("Trident/")&&(-1!=b.indexOf("rv:")||-1!=y.appName.indexOf("Netscape"))&&11,s=-1!=b.indexOf("Edge/")&&!u&&!c&&12,u=u||c||s,l=!a&&!c&&/Gecko/.test(b),f=-1!=b.indexOf("Mac"),d=/(iPad|iPhone)/.test(b),m="FormData"in o&&"FileReader"in o&&"URL"in o&&!!e.createObjectURL,g=x("only screen and (max-device-width: 480px)")&&(p||d),h=x("only screen and (min-width: 800px)")&&(p||d),v=-1!=b.indexOf("Windows Phone"),s&&(a=!1),{opera:i,webkit:a,ie:u,gecko:l,mac:f,iOS:d,android:p,contentEditable:!d||m||b.match(/AppleWebKit\/(\d*)/)[1]>=534,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=u,range:o.getSelection&&"Range"in o,documentMode:u&&!s?t.documentMode||7:10,fileApi:m,ceFalse:!1===u||u>8,canHaveCSP:!1===u||u>11,desktop:!g&&!h,windowsPhone:v}}),a("global!clearInterval",clearInterval),a("global!clearTimeout",clearTimeout),a("global!setInterval",setInterval),a("global!setTimeout",setTimeout),i("tinymce.core.util.Promise",[],function(){function e(e,t){return function(){e.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],u(t,e(r,this),e(o,this))}function n(e){var t=this;if(null===this._state)return void this._deferreds.push(e);c(function(){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return void(t._state?e.resolve:e.reject)(t._value);var r;try{r=n(t._value)}catch(t){return void e.reject(t)}e.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void u(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,i.call(this)}catch(e){o.call(this,e)}}function o(e){this._state=!1,this._value=e,i.call(this)}function i(){for(var e=0,t=this._deferreds.length;e<t;e++)n.call(this,this._deferreds[e]);this._deferreds=null}function a(e,t,n,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r}function u(e,t,n){var r=!1;try{e(function(e){r||(r=!0,t(e))},function(e){r||(r=!0,n(e))})}catch(e){if(r)return;r=!0,n(e)}}if(window.Promise)return window.Promise;var c=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(e){setTimeout(e,1)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return t.prototype["catch"]=function(e){return this.then(null,e)},t.prototype.then=function(e,r){var o=this;return new t(function(t,i){n.call(o,new a(e,r,t,i))})},t.all=function(){var e=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new t(function(t,n){function r(i,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,function(e){r(i,e)},n)}e[i]=a,0==--o&&t(e)}catch(e){n(e)}}if(0===e.length)return t([]);for(var o=e.length,i=0;i<e.length;i++)r(i,e[i])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},t}),i("tinymce.core.util.Delay",["global!clearInterval","global!clearTimeout","global!document","global!setInterval","global!setTimeout","global!window","tinymce.core.util.Promise"],function(e,t,n,r,o,i,a){var u,c=function(e,t){var n,r=i.requestAnimationFrame,o=["ms","moz","webkit"],a=function(e){i.setTimeout(e,0)};for(n=0;n<o.length&&!r;n++)r=i[o[n]+"RequestAnimationFrame"];r||(r=a),r(e,t)},s=function(e,t){return"number"!=typeof t&&(t=0),o(e,t)},l=function(e,t){return"number"!=typeof t&&(t=1),r(e,t)},f=function(e){return t(e)},d=function(t){return e(t)},p=function(e,n){var r,o;return o=function(){var o=arguments;t(r),r=s(function(){e.apply(this,o)},n)},o.stop=function(){t(r)},o};return{requestAnimationFrame:function(e,t){if(u)return void u.then(e);u=new a(function(e){t||(t=n.body),c(e,t)}).then(e)},setTimeout:s,setInterval:l,setEditorTimeout:function(e,t,n){return s(function(){e.removed||t()},n)},setEditorInterval:function(t,n,r){var o;return o=l(function(){t.removed?e(o):n()},r)},debounce:p,throttle:p,clearInterval:d,clearTimeout:f}}),i("tinymce.core.dom.EventUtils",["global!document","global!window","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n,r){"use strict";var o="mce-data-",i=/^(?:mouse|contextmenu)|click/,a={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},u=function(e){return e.isDefaultPrevented===s||e.isDefaultPrevented===c},c=function(){return!1},s=function(){return!0},l=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n)},f=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n)},d=function(e,t){var n,r=t;return n=e.path,n&&n.length>0&&(r=n[0]),e.deepPath&&(n=e.deepPath())&&n.length>0&&(r=n[0]),r},p=function(t,r){var o,l,f=r||{};for(o in t)a[o]||(f[o]=t[o]);if(f.target||(f.target=f.srcElement||e),n.experimentalShadowDom&&(f.target=d(t,f.target)),t&&i.test(t.type)&&t.pageX===l&&t.clientX!==l){var p=f.target.ownerDocument||e,m=p.documentElement,g=p.body;f.pageX=t.clientX+(m&&m.scrollLeft||g&&g.scrollLeft||0)-(m&&m.clientLeft||g&&g.clientLeft||0),f.pageY=t.clientY+(m&&m.scrollTop||g&&g.scrollTop||0)-(m&&m.clientTop||g&&g.clientTop||0)}return f.preventDefault=function(){f.isDefaultPrevented=s,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},f.stopPropagation=function(){f.isPropagationStopped=s,t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)},f.stopImmediatePropagation=function(){f.isImmediatePropagationStopped=s,f.stopPropagation()},!1===u(f)&&(f.isDefaultPrevented=c,f.isPropagationStopped=c,f.isImmediatePropagationStopped=c),"undefined"==typeof f.metaKey&&(f.metaKey=!1),f},m=function(e,t,o){var i=e.document,a={type:"ready"};if(o.domLoaded)return void t(a);var u=function(){return"complete"===i.readyState||"interactive"===i.readyState&&i.body},c=function(){o.domLoaded||(o.domLoaded=!0,t(a))},s=function(){u()&&(f(i,"readystatechange",s),c())},d=function(){try{i.documentElement.doScroll("left")}catch(e){return void r.setTimeout(d)}c()};!i.addEventListener||n.ie&&n.ie<11?(l(i,"readystatechange",s),i.documentElement.doScroll&&e.self===e.top&&d()):u()?c():l(e,"DOMContentLoaded",c),l(e,"load",c)},g=function(){var n,r,i,a,u,c=this,s={};r=o+(+new Date).toString(32),a="onmouseenter"in e.documentElement,i="onfocusin"in e.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},n=1,c.domLoaded=!1,c.events=s;var d=function(e,t){var n,r,o,i,a=s[t];if(n=a&&a[e.type])for(r=0,o=n.length;r<o;r++)if(i=n[r],i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return};c.bind=function(e,o,f,g){var h,v,y,b,x,w,C,k=t,T=function(e){d(p(e||k.event),h)};if(e&&3!==e.nodeType&&8!==e.nodeType){for(e[r]?h=e[r]:(h=n++,e[r]=h,s[h]={}),g=g||e,o=o.split(" "),y=o.length;y--;)b=o[y],w=T,x=C=!1,"DOMContentLoaded"===b&&(b="ready"),c.domLoaded&&"ready"===b&&"complete"==e.readyState?f.call(g,p({type:b})):(a||(x=u[b])&&(w=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=p(e||k.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,d(e,h))}),i||"focusin"!==b&&"focusout"!==b||(C=!0,x="focusin"===b?"focus":"blur",w=function(e){e=p(e||k.event),e.type="focus"===e.type?"focusin":"focusout",d(e,h)}),v=s[h][b],v?"ready"===b&&c.domLoaded?f({type:b}):v.push({func:f,scope:g}):(s[h][b]=v=[{func:f,scope:g}],v.fakeName=x,v.capture=C,v.nativeHandler=w,"ready"===b?m(e,w,c):l(e,x||b,w,C)));return e=v=0,f}},c.unbind=function(e,t,n){var o,i,a,u,l,d;if(!e||3===e.nodeType||8===e.nodeType)return c;if(o=e[r]){if(d=s[o],t){for(t=t.split(" "),a=t.length;a--;)if(l=t[a],i=d[l]){if(n)for(u=i.length;u--;)if(i[u].func===n){var p=i.nativeHandler,m=i.fakeName,g=i.capture;i=i.slice(0,u).concat(i.slice(u+1)),i.nativeHandler=p,i.fakeName=m,i.capture=g,d[l]=i}n&&0!==i.length||(delete d[l],f(e,i.fakeName||l,i.nativeHandler,i.capture))}}else{for(l in d)i=d[l],f(e,i.fakeName||l,i.nativeHandler,i.capture);d={}}for(l in d)return c;delete s[o];try{delete e[r]}catch(t){e[r]=null}}return c},c.fire=function(e,t,n){var o;if(!e||3===e.nodeType||8===e.nodeType)return c;n=p(null,n),n.type=t,n.target=e;do{o=e[r],o&&d(n,o),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!n.isPropagationStopped());return c},c.clean=function(e){var t,n,o=c.unbind;if(!e||3===e.nodeType||8===e.nodeType)return c;if(e[r]&&o(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(o(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[r]&&o(e);return c},c.destroy=function(){s={}},c.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};return g.Event=new g,g.Event.bind(t,"ready",function(){}),g}),i("tinymce.core.dom.Sizzle",[],function(){function e(e,t,n,r){var o,i,a,c,l,f,d,p,m,g;if((t?t.ownerDocument||t:L)!==N&&A(t),t=t||N,n=n||[],!e||"string"!=typeof e)return n;if(1!==(c=t.nodeType)&&9!==c)return[];if(R&&!r){if(o=me.exec(e))if(a=o[1]){if(9===c){if(!(i=t.getElementById(a))||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&B(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return Y.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&y.getElementsByClassName)return Y.apply(n,t.getElementsByClassName(a)),n}if(y.qsa&&(!P||!P.test(e))){if(p=d=M,m=t,g=9===c&&e,1===c&&"object"!==t.nodeName.toLowerCase()){for(f=C(e),(d=t.getAttribute("id"))?p=d.replace(he,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=f.length;l--;)f[l]=p+s(f[l]);m=ge.test(e)&&u(t.parentNode)||t,g=f.join(",")}if(g)try{return Y.apply(n,m.querySelectorAll(g)),n}catch(e){}finally{d||t.removeAttribute("id")}}}return T(e.replace(oe,"$1"),t,n,r)}function t(){function e(n,r){return t.push(n+" ")>b.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function n(e){return e[M]=!0,e}function r(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||z)-(~e.sourceIndex||z);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function o(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function i(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function a(e){return n(function(t){return t=+t,n(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function u(e){return e&&typeof e.getElementsByTagName!==$&&e}function c(){}function s(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function l(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=H++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var u,c,s=[F,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(c=t[M]||(t[M]={}),(u=c[r])&&u[0]===F&&u[1]===i)return s[2]=u[2];if(c[r]=s,s[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function d(t,n,r){for(var o=0,i=n.length;o<i;o++)e(t,n[o],r);return r}function p(e,t,n,r,o){for(var i,a=[],u=0,c=e.length,s=null!=t;u<c;u++)(i=e[u])&&(n&&!n(i,r,o)||(a.push(i),s&&t.push(u)));return a}function m(e,t,r,o,i,a){return o&&!o[M]&&(o=m(o)),i&&!i[M]&&(i=m(i,a)),n(function(n,a,u,c){var s,l,f,m=[],g=[],h=a.length,v=n||d(t||"*",u.nodeType?[u]:u,[]),y=!e||!n&&t?v:p(v,m,e,u,c),b=r?i||(n?e:h||o)?[]:a:y;if(r&&r(y,b,u,c),o)for(s=p(b,g),o(s,[],u,c),l=s.length;l--;)(f=s[l])&&(b[g[l]]=!(y[g[l]]=f));if(n){if(i||e){if(i){for(s=[],l=b.length;l--;)(f=b[l])&&s.push(y[l]=f);i(null,b=[],s,c)}for(l=b.length;l--;)(f=b[l])&&(s=i?J.call(n,f):m[l])>-1&&(n[s]=!(a[s]=f))}}else b=p(b===a?b.splice(h,b.length):b),i?i(null,a,b,c):Y.apply(a,b)})}function g(e){for(var t,n,r,o=e.length,i=b.relative[e[0].type],a=i||b.relative[" "],u=i?1:0,c=l(function(e){return e===t},a,!0),d=l(function(e){return J.call(t,e)>-1},a,!0),p=[function(e,n,r){return!i&&(r||n!==S)||((t=n).nodeType?c(e,n,r):d(e,n,r))}];u<o;u++)if(n=b.relative[e[u].type])p=[l(f(p),n)];else{if(n=b.filter[e[u].type].apply(null,e[u].matches),n[M]){for(r=++u;r<o&&!b.relative[e[r].type];r++);return m(u>1&&f(p),u>1&&s(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(oe,"$1"),n,u<r&&g(e.slice(u,r)),r<o&&g(e=e.slice(r)),r<o&&s(e))}p.push(n)}return f(p)}function h(t,r){var o=r.length>0,i=t.length>0,a=function(n,a,u,c,s){var l,f,d,m=0,g="0",h=n&&[],v=[],y=S,x=n||i&&b.find.TAG("*",s),w=F+=null==y?1:Math.random()||.1,C=x.length;for(s&&(S=a!==N&&a);g!==C&&null!=(l=x[g]);g++){if(i&&l){for(f=0;d=t[f++];)if(d(l,a,u)){c.push(l);break}s&&(F=w)}o&&((l=!d&&l)&&m--,n&&h.push(l))}if(m+=g,o&&g!==m){for(f=0;d=r[f++];)d(h,v,a,u);if(n){if(m>0)for(;g--;)h[g]||v[g]||(v[g]=G.call(c));v=p(v)}Y.apply(c,v),s&&!n&&v.length>0&&m+r.length>1&&e.uniqueSort(c)}return s&&(F=w,S=y),h};return o?n(a):a}var v,y,b,x,w,C,k,T,S,E,_,A,N,D,R,P,I,O,B,M="sizzle"+-new Date,L=window.document,F=0,H=0,U=t(),W=t(),j=t(),q=function(e,t){return e===t&&(_=!0),0},$=typeof undefined,z=1<<31,V={}.hasOwnProperty,K=[],G=K.pop,X=K.push,Y=K.push,Q=K.slice,J=K.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",re=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ne+")*)|.*)\\)|)",oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ie=new RegExp("^"+ee+"*,"+ee+"*"),ae=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ue=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ce=new RegExp(re),se=new RegExp("^"+te+"$"),le={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ne),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,de=/^h\d$/i,pe=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,he=/'|\\/g,ve=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ye=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Y.apply(K=Q.call(L.childNodes),L.childNodes),K[L.childNodes.length].nodeType}catch(e){Y={apply:K.length?function(e,t){X.apply(e,Q.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}y=e.support={},w=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},A=e.setDocument=function(e){function t(e){try{return e.top}catch(e){}return null}var n,o=e?e.ownerDocument||e:L,i=o.defaultView;return o!==N&&9===o.nodeType&&o.documentElement?(N=o,D=o.documentElement,R=!w(o),i&&i!==t(i)&&(i.addEventListener?i.addEventListener("unload",function(){A()},!1):i.attachEvent&&i.attachEvent("onunload",function(){A()})),y.attributes=!0,y.getElementsByTagName=!0,y.getElementsByClassName=pe.test(o.getElementsByClassName),y.getById=!0,b.find.ID=function(e,t){if(typeof t.getElementById!==$&&R){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},b.filter.ID=function(e){var t=e.replace(ve,ye);return function(e){return e.getAttribute("id")===t}},b.find.TAG=y.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==$)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},b.find.CLASS=y.getElementsByClassName&&function(e,t){if(R)return t.getElementsByClassName(e)},I=[],P=[],y.disconnectedMatch=!0,P=P.length&&new RegExp(P.join("|")),I=I.length&&new RegExp(I.join("|")),n=pe.test(D.compareDocumentPosition),B=n||pe.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=n?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===o||e.ownerDocument===L&&B(L,e)?-1:t===o||t.ownerDocument===L&&B(L,t)?1:E?J.call(E,e)-J.call(E,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,i=0,a=e.parentNode,u=t.parentNode,c=[e],s=[t];if(!a||!u)return e===o?-1:t===o?1:a?-1:u?1:E?J.call(E,e)-J.call(E,t):0;if(a===u)return r(e,t);for(n=e;n=n.parentNode;)c.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;c[i]===s[i];)i++;return i?r(c[i],s[i]):c[i]===L?-1:s[i]===L?1:0},o):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&A(t),n=n.replace(ue,"='$1']"),y.matchesSelector&&R&&(!I||!I.test(n))&&(!P||!P.test(n)))try{var r=O.call(t,n);if(r||y.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(e){}return e(n,N,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==N&&A(e),B(e,t)},e.attr=function(e,t){(e.ownerDocument||e)!==N&&A(e);var n=b.attrHandle[t.toLowerCase()],r=n&&V.call(b.attrHandle,t.toLowerCase())?n(e,t,!R):undefined
;return r!==undefined?r:y.attributes||!R?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],r=0,o=0;if(_=!y.detectDuplicates,E=!y.sortStable&&e.slice(0),e.sort(q),_){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return E=null,e},x=e.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=x(t);return n},b=e.selectors={cacheLength:50,createPseudo:n,match:le,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ve,ye),e[3]=(e[3]||e[4]||e[5]||"").replace(ve,ye),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return le.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ve,ye).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==$&&e.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(o){var i=e.attr(o,t);return null==i?"!="===n:!n||(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i+" ").indexOf(r)>-1:"|="===n&&(i===r||i.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),u="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,c){var s,l,f,d,p,m,g=i!==a?"nextSibling":"previousSibling",h=t.parentNode,v=u&&t.nodeName.toLowerCase(),y=!c&&!u;if(h){if(i){for(;g;){for(f=t;f=f[g];)if(u?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;m=g="only"===e&&!m&&"nextSibling"}return!0}if(m=[a?h.firstChild:h.lastChild],a&&y){for(l=h[M]||(h[M]={}),s=l[e]||[],p=s[0]===F&&s[1],d=s[0]===F&&s[2],f=p&&h.childNodes[p];f=++p&&f&&f[g]||(d=p=0)||m.pop();)if(1===f.nodeType&&++d&&f===t){l[e]=[F,p,d];break}}else if(y&&(s=(t[M]||(t[M]={}))[e])&&s[0]===F)d=s[1];else for(;(f=++p&&f&&f[g]||(d=p=0)||m.pop())&&((u?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++d||(y&&((f[M]||(f[M]={}))[e]=[F,d]),f!==t)););return(d-=o)===r||d%r==0&&d/r>=0}}},PSEUDO:function(t,r){var o,i=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[M]?i(r):i.length>1?(o=[t,t,"",r],b.setFilters.hasOwnProperty(t.toLowerCase())?n(function(e,t){for(var n,o=i(e,r),a=o.length;a--;)n=J.call(e,o[a]),e[n]=!(t[n]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:n(function(e){var t=[],r=[],o=k(e.replace(oe,"$1"));return o[M]?n(function(e,t,n,r){for(var i,a=o(e,null,r,[]),u=e.length;u--;)(i=a[u])&&(e[u]=!(t[u]=i))}):function(e,n,i){return t[0]=e,o(t,null,i,r),!r.pop()}}),has:n(function(t){return function(n){return e(t,n).length>0}}),contains:n(function(e){return e=e.replace(ve,ye),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:n(function(t){return se.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(ve,ye).toLowerCase(),function(e){var n;do{if(n=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return de.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,n){return[n<0?n+t:n]}),even:a(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:a(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:a(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:a(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},b.pseudos.nth=b.pseudos.eq;for(v in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[v]=o(v);for(v in{submit:!0,reset:!0})b.pseudos[v]=i(v);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,C=e.tokenize=function(t,n){var r,o,i,a,u,c,s,l=W[t+" "];if(l)return n?0:l.slice(0);for(u=t,c=[],s=b.preFilter;u;){r&&!(o=ie.exec(u))||(o&&(u=u.slice(o[0].length)||u),c.push(i=[])),r=!1,(o=ae.exec(u))&&(r=o.shift(),i.push({value:r,type:o[0].replace(oe," ")}),u=u.slice(r.length));for(a in b.filter)!(o=le[a].exec(u))||s[a]&&!(o=s[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),u=u.slice(r.length));if(!r)break}return n?u.length:u?e.error(t):W(t,c).slice(0)},k=e.compile=function(e,t){var n,r=[],o=[],i=j[e+" "];if(!i){for(t||(t=C(e)),n=t.length;n--;)i=g(t[n]),i[M]?r.push(i):o.push(i);i=j(e,h(o,r)),i.selector=e}return i},T=e.select=function(e,t,n,r){var o,i,a,c,l,f="function"==typeof e&&e,d=!r&&C(e=f.selector||e);if(n=n||[],1===d.length){if(i=d[0]=d[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&y.getById&&9===t.nodeType&&R&&b.relative[i[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(ve,ye),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=le.needsContext.test(e)?0:i.length;o--&&(a=i[o],!b.relative[c=a.type]);)if((l=b.find[c])&&(r=l(a.matches[0].replace(ve,ye),ge.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(o,1),!(e=r.length&&s(i)))return Y.apply(n,r),n;break}}return(f||k(e,d))(r,t,!R,n,ge.test(e)&&u(t.parentNode)||t),n},y.sortStable=M.split("").sort(q).join("")===M,y.detectDuplicates=!!_,A(),y.sortDetached=!0,e}),i("tinymce.core.util.Arr",[],function(){var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=function(t){var n,r,o=t;if(!e(t))for(o=[],n=0,r=t.length;n<r;n++)o[n]=t[n];return o},n=function(e,t,n){var r,o;if(!e)return 0;if(n=n||e,e.length!==undefined){for(r=0,o=e.length;r<o;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1},r=function(e,t){var r=[];return n(e,function(n,o){r.push(t(n,o,e))}),r},o=function(e,t){var r=[];return n(e,function(n,o){t&&!t(n,o,e)||r.push(n)}),r},i=function(e,t){var n,r;if(e)for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},a=function(e,t,n,r){var o=0;for(arguments.length<3&&(n=e[0]);o<e.length;o++)n=t.call(r,n,e[o],o);return n},u=function(e,t,n){var r,o;for(r=0,o=e.length;r<o;r++)if(t.call(n,e[r],r,e))return r;return-1};return{isArray:e,toArray:t,each:n,map:r,filter:o,indexOf:i,reduce:a,findIndex:u,find:function(e,t,n){var r=u(e,t,n);return-1!==r?e[r]:undefined},last:function(e){return e[e.length-1]}}}),i("tinymce.core.util.Tools",["global!window","tinymce.core.Env","tinymce.core.util.Arr"],function(e,t,n){var r=/^\s*|\s*$/g,o=function(e){return null===e||e===undefined?"":(""+e).replace(r,"")},i=function(e,t){return t?!("array"!=t||!n.isArray(e))||typeof e==t:e!==undefined},a=function(e,t,n){var r;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},r=e.length;r--;)n[e[r]]={};return n},u=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c=function(e,t,n){var r,o,i,a,u,c=this,s=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],o=c.createNS(e[3].replace(/\.\w+$/,""),n),!o[i]){if("static"==e[2])return o[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[i]));t[i]||(t[i]=function(){},s=1),o[i]=t[i],c.extend(o[i].prototype,t),e[5]&&(r=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],u=o[i],o[i]=s?function(){return r[a].apply(this,arguments)}:function(){return this.parent=r[a],u.apply(this,arguments)},o[i].prototype[i]=o[i],c.each(r,function(e,t){o[i].prototype[t]=r[t]}),c.each(t,function(e,t){r[t]?o[i].prototype[t]=function(){return this.parent=r[t],e.apply(this,arguments)}:t!=i&&(o[i].prototype[t]=e)})),c.each(t["static"],function(e,t){o[i][t]=e})}},s=function(e,t){var n,r,o,i,a=arguments;for(n=1,r=a.length;n<r;n++){t=a[n];for(o in t)t.hasOwnProperty(o)&&(i=t[o])!==undefined&&(e[o]=i)}return e},l=function(e,t,r,o){o=o||this,e&&(r&&(e=e[r]),n.each(e,function(e,n){if(!1===t.call(o,e,n,r))return!1;l(e,t,r,o)}))},f=function(t,n){var r,o;for(n=n||e,t=t.split("."),r=0;r<t.length;r++)o=t[r],n[o]||(n[o]={}),n=n[o];return n},d=function(t,n){var r,o;for(n=n||e,t=t.split("."),r=0,o=t.length;r<o&&(n=n[t[r]]);r++);return n},p=function(e,t){return!e||i(e,"array")?e:n.map(e.split(t||","),o)},m=function(e){var n=t.cacheSuffix;return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e};return{trim:o,isArray:n.isArray,is:i,toArray:n.toArray,makeMap:a,each:n.each,map:n.map,grep:n.filter,inArray:n.indexOf,hasOwn:u,extend:s,create:c,walk:l,createNS:f,resolve:d,explode:p,_addCacheSuffix:m}}),i("tinymce.core.dom.DomQuery",["global!document","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.Env","tinymce.core.util.Tools"],function(e,t,n,r,o){var i,a=e,u=Array.prototype.push,c=Array.prototype.slice,s=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=t.Event,f=o.makeMap("children,contents,next,prev"),d=function(e){return void 0!==e},p=function(e){return"string"==typeof e},m=function(e){return e&&e==e.window},g=function(e,t){var n,r,o;for(t=t||a,o=t.createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;r=o.firstChild;)n.appendChild(r);return n},h=function(e,t,n,r){var o;if(p(t))t=g(t,R(e[0]));else if(t.length&&!t.nodeType){if(t=S.makeArray(t),r)for(o=t.length-1;o>=0;o--)h(e,t[o],n,r);else for(o=0;o<t.length;o++)h(e,t[o],n,r);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e},v=function(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},y=function(e,t,n){var r,o;return t=S(t)[0],e.each(function(){var e=this;n&&r==e.parentNode?o.appendChild(e):(r=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e},b=o.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),x=o.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),w={"for":"htmlFor","class":"className",readonly:"readOnly"},C={"float":"cssFloat"},k={},T={},S=function(e,t){return new S.fn.init(e,t)},E=function(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1},_=/^\s*|\s*$/g,A=function(e){return null===e||e===i?"":(""+e).replace(_,"")},N=function(e,t){var n,r,o,i,a;if(e)if((n=e.length)===i){for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],!1===t.call(a,r,a)))break}else for(o=0;o<n&&(a=e[o],!1!==t.call(a,o,a));o++);return e},D=function(e,t){var n=[];return N(e,function(e,r){t(r,e)&&n.push(r)}),n},R=function(e){return e?9==e.nodeType?e:e.ownerDocument:a};S.fn=S.prototype={constructor:S,selector:"",context:null,length:0,init:function(t,n){var r,o,i=this;if(!t)return i;if(t.nodeType)return i.context=i[0]=t,i.length=1,i;if(n&&n.nodeType)i.context=n;else{if(n)return S(t).attr(n);i.context=n=e}if(p(t)){if(i.selector=t,!(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:s.exec(t)))return S(n).find(t);if(r[1])for(o=g(t,R(n)).firstChild;o;)u.call(i,o),o=o.nextSibling;else{if(!(o=R(n).getElementById(r[2])))return i;if(o.id!==r[2])return i.find(t);i.length=1,i[0]=o}}else this.add(t,!1);return i},toArray:function(){return o.toArray(this)},add:function(e,t){var n,r,o=this;if(p(e))return o.add(S(e));if(!1!==t)for(n=S.unique(o.toArray().concat(S.makeArray(e))),o.length=n.length,r=0;r<n.length;r++)o[r]=n[r];else u.apply(o,S.makeArray(e));return o},attr:function(e,t){var n,r=this;if("object"==typeof e)N(e,function(e,t){r.attr(e,t)});else{if(!d(t)){if(r[0]&&1===r[0].nodeType){if((n=k[e])&&n.get)return n.get(r[0],e);if(x[e])return r.prop(e)?e:i;t=r[0].getAttribute(e,2),null===t&&(t=i)}return t}this.each(function(){var n;if(1===this.nodeType){if((n=k[e])&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return r},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if("object"==typeof(e=w[e]||e))N(e,function(e,t){n.prop(e,t)});else{if(!d(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){var n,r,o=this,a=function(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})},u=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})};if("object"==typeof e)N(e,function(e,t){o.css(e,t)});else if(d(t))e=a(e),"number"!=typeof t||b[e]||(t+="px"),o.each(function(){var n=this.style;if((r=T[e])&&r.set)return void r.set(this,t);try{this.style[C[e]||e]=t}catch(e){}null!==t&&""!==t||(n.removeProperty?n.removeProperty(u(e)):n.removeAttribute(e))});else{if(n=o[0],(r=T[e])&&r.get)return r.get(n);if(n.ownerDocument.defaultView)try{return n.ownerDocument.defaultView.getComputedStyle(n,null).getPropertyValue(u(e))}catch(e){return i}else if(n.currentStyle)return n.currentStyle[a(e)]}return o},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],l.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(d(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(r){S(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(d(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return h(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(e)})},prepend:function(){return h(this,arguments,function(e){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?h(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?h(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return S(e).append(this),this},prependTo:function(e){return S(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return y(this,e)},wrapAll:function(e){return y(this,e,!0)},wrapInner:function(e){return this.each(function(){S(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),S(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?N(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,r){var o,i;(i=v(r,e))!==t&&(o=r.className,i?r.className=A((" "+o+" ").replace(" "+e+" "," ")):r.className+=o?" "+e:e)}),n)},hasClass:function(e){return v(this[0],e)},each:function(e){return N(this,e)},on:function(e,t){return this.each(function(){l.bind(this,e,t)})},off:function(e,t){return this.each(function(){l.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?l.fire(this,e.type,e):l.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new S(c.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,r=[];for(t=0,n=this.length;t<n;t++)S.find(e,this[t],r);return S(r)},filter:function(e){return S("function"==typeof e?D(this.toArray(),function(t,n){return e(n,t)}):S.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof S&&(e=e[0]),this.each(function(n,r){for(;r;){if("string"==typeof e&&S(r).is(e)){t.push(r);break}if(r==e){t.push(r);break}r=r.parentNode}}),S(t)},offset:function(e){var t,n,r,o,i=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,r=n.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),i=o.left+(r.scrollLeft||n.body.scrollLeft)-r.clientLeft,a=o.top+(r.scrollTop||n.body.scrollTop)-r.clientTop)),{left:i,top:a})},push:u,sort:[].sort,splice:[].splice},o.extend(S,{extend:o.extend,makeArray:function(e){return m(e)||e.nodeType?[e]:o.toArray(e)},inArray:E,isArray:o.isArray,each:N,trim:A,grep:D,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var r=t.length;for(n&&(e=":not("+e+")");r--;)1!=t[r].nodeType&&t.splice(r,1);return t=1===t.length?S.find.matchesSelector(t[0],e)?[t[0]]:[]:S.find.matches(e,t)}});var P=function(e,t,n){var r=[],o=e[t];for("string"!=typeof n&&n instanceof S&&(n=n[0]);o&&9!==o.nodeType;){if(n!==undefined){if(o===n)break;if("string"==typeof n&&S(o).is(n))break}1===o.nodeType&&r.push(o),o=o[t]}return r},I=function(e,t,n,r){var o=[];for(r instanceof S&&(r=r[0]);e;e=e[t])if(!n||e.nodeType===n){if(r!==undefined){if(e===r)break;if("string"==typeof r&&S(e).is(r))break}o.push(e)}return o},O=function(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null};N({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return P(e,"parentNode")},next:function(e){return O(e,"nextSibling",1)},prev:function(e){return O(e,"previousSibling",1)},children:function(e){return I(e.firstChild,"nextSibling",1)},contents:function(e){return o.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){S.fn[e]=function(n){var r=this,o=[];return r.each(function(){var e=t.call(o,this,n,o);e&&(S.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(f[e]||(o=S.unique(o)),0===e.indexOf("parents")&&(o=o.reverse())),o=S(o),n?o.filter(n):o}}),N({parentsUntil:function(e,t){return P(e,"parentNode",t)},nextUntil:function(e,t){return I(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return I(e,"previousSibling",1,t).slice(1)}},function(e,t){S.fn[e]=function(n,r){var o=this,i=[];return o.each(function(){var e=t.call(i,this,n,i);e&&(S.isArray(e)?i.push.apply(i,e):i.push(e))}),this.length>1&&(i=S.unique(i),0!==e.indexOf("parents")&&"prevUntil"!==e||(i=i.reverse())),i=S(i),r?i.filter(r):i}}),S.fn.is=function(e){return!!e&&this.filter(e).length>0},S.fn.init.prototype=S.fn,S.overrideDefaults=function(e){var t,n=function(r,o){return t=t||e(),0===arguments.length&&(r=t.element),o||(o=t.context),new n.fn.init(r,o)};return S.extend(n,this),n};var B=function(e,t,n){N(n,function(n,r){e[n]=e[n]||{},e[n][t]=r})};return r.ie&&r.ie<8&&(B(k,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?i:t},size:function(e){var t=e.size;return 20===t?i:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?i:t}}),B(k,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),r.ie&&r.ie<9&&(C["float"]="styleFloat",B(T,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),S.attrHooks=k,S.cssHooks=T,S}),i("ephox.katamari.api.LazyValue",["ephox.katamari.api.Arr","ephox.katamari.api.Option","global!setTimeout"],function(e,t,n){var r=function(o){var i=t.none(),a=[],u=function(e){return r(function(t){c(function(n){t(e(n))})})},c=function(e){l()?d(e):a.push(e)},s=function(e){i=t.some(e),f(a),a=[]},l=function(){return i.isSome()},f=function(t){e.each(t,d)},d=function(e){i.each(function(t){n(function(){e(t)},0)})};return o(s),{get:c,map:u,isReady:l}};return{nu:r,pure:function(e){return r(function(t){t(e)})}}}),i("ephox.katamari.async.Bounce",["global!Array","global!setTimeout"],function(e,t){return{bounce:function(n){return function(){var r=e.prototype.slice.call(arguments),o=this;t(function(){n.apply(o,r)},0)}}}}),i("ephox.katamari.api.Future",["ephox.katamari.api.LazyValue","ephox.katamari.async.Bounce"],function(e,t){var n=function(r){var o=function(e){r(t.bounce(e))};return{map:function(e){return n(function(t){o(function(n){var r=e(n);t(r)})})},bind:function(e){return n(function(t){o(function(n){e(n).get(t)})})},anonBind:function(e){return n(function(t){o(function(){e.get(t)})})},toLazy:function(){return e.nu(o)},get:o}};return{nu:n,pure:function(e){return n(function(t){t(e)})}}}),i("ephox.katamari.async.AsyncValues",["ephox.katamari.api.Arr"],function(e){return{par:function(t,n){return n(function(n){var r=[],o=0,i=function(e){return function(i){r[e]=i,++o>=t.length&&n(r)}};0===t.length?n([]):e.each(t,function(e,t){e.get(i(t))})})}}}),i("ephox.katamari.api.Futures",["ephox.katamari.api.Arr","ephox.katamari.api.Future","ephox.katamari.async.AsyncValues"],function(e,t,n){var r=function(e){return n.par(e,t.nu)};return{par:r,mapM:function(t,n){var o=e.map(t,n);return r(o)},compose:function(e,t){return function(n){return t(n).bind(e)}}}}),i("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,t){var n=function(r){var o=function(e){return r===e},i=function(){return n(r)},a=function(){return n(r)},u=function(e){return n(e(r))},c=function(e){e(r)},s=function(e){return e(r)},l=function(e,t){return t(r)},f=function(e){return e(r)},d=function(e){return e(r)},p=function(){return t.some(r)};return{is:o,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:i,orThunk:a,fold:l,map:u,each:c,bind:s,exists:f,forall:d,toOption:p}},r=function(n){var o=function(e){return e()},i=function(){return e.die(n)()},a=function(e){return e},u=function(e){return e()},c=function(){return r(n)},s=function(){return r(n)},l=function(e){return e(n)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:o,getOrDie:i,or:a,orThunk:u,fold:l,map:c,each:e.noop,bind:s,exists:e.constant(!1),forall:e.constant(!0),toOption:t.none}};return{value:n,error:r}}),i("tinymce.core.dom.StyleSheetLoader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Future","ephox.katamari.api.Futures","ephox.katamari.api.Result","global!navigator","tinymce.core.util.Delay","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u){"use strict";return function(c,s){var l,f=0,d={};s=s||{},l=s.maxLoadTime||5e3;var p=function(e){c.getElementsByTagName("head")[0].appendChild(e)},m=function(e,t,n){var r,o,s,m,g=function(){for(var e=m.passed,t=e.length;t--;)e[t]();m.status=2,m.passed=[],m.failed=[]},h=function(){for(var e=m.failed,t=e.length;t--;)e[t]();m.status=3,m.passed=[],m.failed=[]},v=function(){var e=i.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)},y=function(e,t){e()||((new Date).getTime()-s<l?a.setTimeout(t):h())},b=function(){y(function(){for(var e,t,n=c.styleSheets,o=n.length;o--;)if(e=n[o],(t=e.ownerNode?e.ownerNode:e.owningElement)&&t.id===r.id)return g(),!0},b)},x=function(){y(function(){try{var e=o.sheet.cssRules;return g(),!!e}catch(e){}},x)};if(e=u._addCacheSuffix(e),d[e]?m=d[e]:(m={passed:[],failed:[]},d[e]=m),t&&m.passed.push(t),n&&m.failed.push(n),1!=m.status){if(2==m.status)return void g();if(3==m.status)return void h();if(m.status=1,r=c.createElement("link"),r.rel="stylesheet",r.type="text/css",r.id="u"+f++,r.async=!1,r.defer=!1,s=(new Date).getTime(),"onload"in r&&!v())r.onload=b,r.onerror=h;else{if(i.userAgent.indexOf("Firefox")>0)return o=c.createElement("style"),o.textContent='@import "'+e+'"',x(),void p(o);b()}p(r),r.href=e}},g=function(e){return n.nu(function(n){m(e,t.compose(n,t.constant(o.value(e))),t.compose(n,t.constant(o.error(e))))})},h=function(e){return e.fold(t.identity,t.identity)};return{load:m,loadAll:function(t,n,o){r.par(e.map(t,g)).get(function(t){var r=e.partition(t,function(e){return e.isValue()});r.fail.length>0?o(r.fail.map(h)):n(r.pass.map(h))})}}}}),i("tinymce.core.dom.TreeWalker",[],function(){return function(e,t){var n=e,r=function(e,n,r,o){var i,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(i=e[r])return i;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(i=a[r])return i}}},o=function(e,n,r,o){var i,a,u;if(e){if(i=e[r],t&&i===t)return;if(i){if(!o)for(u=i[n];u;u=u[n])if(!u[n])return u;return i}if((a=e.parentNode)&&a!==t)return a}};this.current=function(){return n},this.next=function(e){return n=r(n,"firstChild","nextSibling",e)},this.prev=function(e){return n=r(n,"lastChild","previousSibling",e)},this.prev2=function(e){return n=o(n,"lastChild","previousSibling",e)}}}),i("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),i("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,t,n,r){var o=function(e,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=e,!i.hasChildNodes()||i.childNodes.length>1)throw n.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(i.childNodes[0])},i=function(e,t){var n=t||r,o=n.createElement(e);return u(o)},a=function(e,t){var n=t||r,o=n.createTextNode(e);return u(o)},u=function(n){if(null===n||n===undefined)throw new t("Node cannot be null or undefined");return{dom:e.constant(n)}};return{fromHtml:o,fromTag:i,fromText:a,fromDom:u}}),i("tinymce.core.html.Entities",["ephox.sugar.api.node.Element","tinymce.core.util.Tools"],function(e,t){var n,r,o,i=t.makeMap,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,s=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,l={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},o={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var f=function(t){var n;return n=e.fromTag("div").dom(),n.innerHTML=t,n.textContent||n.innerText||t},d=function(e,t){var n,o,i,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),r[o]||(i="&"+e[n+1]+";",a[o]=i,a[i]=o);return a}};n=d("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var p={encodeRaw:function(e,t){return e.replace(t?a:u,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:u,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,o){return o=o||n,e.replace(t?a:u,function(e){return r[e]||o[e]||e})},getEncodeFunc:function(e,t){t=d(t)||n;var o=function(e,n){return e.replace(n?a:u,function(e){return r[e]!==undefined?r[e]:t[e]!==undefined?t[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"})},c=function(e,n){return p.encodeNamed(e,n,t)};return e=i(e.replace(/\+/g,",")),e.named&&e.numeric?o:e.named?t?c:p.encodeNamed:e.numeric?p.encodeNumeric:p.encodeRaw},decode:function(e){return e.replace(s,function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10),t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):l[t]||String.fromCharCode(t)):o[e]||n[e]||f(e)})}};return p}),i("tinymce.core.html.Schema",["tinymce.core.util.Tools"],function(e){var t={},n={},r=e.makeMap,o=e.each,i=e.extend,a=e.explode,u=e.inArray,c=function(t,n){return t=e.trim(t),t?t.split(n||" "):[]},s=function(e){var r,i,a,u,s,l,f={},d=function(e,t,o){var i,a,u,s=function(e,t){var n,r,o={};for(n=0,r=e.length;n<r;n++)o[e[n]]=t||{};return o};for(o=o||[],t=t||"","string"==typeof o&&(o=c(o)),e=c(e),i=e.length;i--;)a=c([r,t].join(" ")),u={attributes:s(a),attributesOrder:a,children:s(o,n)},f[e[i]]=u},p=function(e,t){var n,r,o,i;for(e=c(e),n=e.length,t=c(t);n--;)for(r=f[e[n]],o=0,i=t.length;o<i;o++)r.attributes[t[o]]={},r.attributesOrder.push(t[o])};return t[e]?t[e]:(r="id accesskey class dir lang style tabindex title role",i="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!=e&&(r+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",i+=" article aside details dialog figure header footer hgroup section nav",a+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!=e&&(r+=" xml:lang",l="acronym applet basefont big font strike tt",a=[a,l].join(" "),o(c(l),function(e){d(e,"",a)}),s="center dir isindex noframes",i=[i,s].join(" "),u=[i,a].join(" "),o(c(s),function(e){d(e,"",u)})),u=u||[i,a].join(" "),d("html","manifest","head body"),d("head","","base command link meta noscript script style title"),d("title hr noscript br"),d("base","href target"),d("link","href rel media hreflang type sizes hreflang"),
d("meta","name http-equiv content charset"),d("style","media type scoped"),d("script","src async defer type charset"),d("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),d("address dt dd div caption","",u),d("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a),d("blockquote","cite",u),d("ol","reversed start type","li"),d("ul","","li"),d("li","value",u),d("dl","","dt dd"),d("a","href target rel media hreflang type",a),d("q","cite",a),d("ins del","cite datetime",u),d("img","src sizes srcset alt usemap ismap width height"),d("iframe","src name width height",u),d("embed","src type width height"),d("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),d("param","name value"),d("map","name",[u,"area"].join(" ")),d("area","alt coords shape href target rel media hreflang type"),d("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),d("colgroup","span","col"),d("col","span"),d("tbody thead tfoot","","tr"),d("tr","","td th"),d("td","colspan rowspan headers",u),d("th","colspan rowspan headers scope abbr",u),d("form","accept-charset action autocomplete enctype method name novalidate target",u),d("fieldset","disabled form name",[u,"legend"].join(" ")),d("label","form for",a),d("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),d("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:a),d("select","disabled form multiple name required size","option optgroup"),d("optgroup","disabled label","option"),d("option","disabled label selected value"),d("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),d("menu","type label",[u,"li"].join(" ")),d("noscript","",u),"html4"!=e&&(d("wbr"),d("ruby","",[a,"rt rp"].join(" ")),d("figcaption","",u),d("mark rt rp summary bdi","",a),d("canvas","width height",u),d("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),d("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),d("picture","","img source"),d("source","src srcset type media sizes"),d("track","kind src srclang label default"),d("datalist","",[a,"option"].join(" ")),d("article section nav aside header footer","",u),d("hgroup","","h1 h2 h3 h4 h5 h6"),d("figure","",[u,"figcaption"].join(" ")),d("time","datetime",a),d("dialog","open",u),d("command","type label icon disabled checked radiogroup command"),d("output","for form name",a),d("progress","value max",a),d("meter","value min max low high optimum",a),d("details","open",[u,"summary"].join(" ")),d("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(p("script","language xml:space"),p("style","xml:space"),p("object","declare classid code codebase codetype archive standby align border hspace vspace"),p("embed","align name hspace vspace"),p("param","valuetype type"),p("a","charset name rev shape coords"),p("br","clear"),p("applet","codebase archive code object alt name width height align hspace vspace"),p("img","name longdesc align border hspace vspace"),p("iframe","longdesc frameborder marginwidth marginheight scrolling align"),p("font basefont","size color face"),p("input","usemap align"),p("select","onchange"),p("textarea"),p("h1 h2 h3 h4 h5 h6 div p legend caption","align"),p("ul","type compact"),p("li","type"),p("ol dl menu dir","compact"),p("pre","width xml:space"),p("hr","align noshade size width"),p("isindex","prompt"),p("table","summary width frame rules cellspacing cellpadding align bgcolor"),p("col","width align char charoff valign"),p("colgroup","width align char charoff valign"),p("thead","align char charoff valign"),p("tr","align char charoff valign bgcolor"),p("th","axis align char charoff valign nowrap bgcolor width height"),p("form","accept"),p("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),p("tfoot","align char charoff valign"),p("tbody","align char charoff valign"),p("area","nohref"),p("body","background bgcolor text link vlink alink")),"html4"!=e&&(p("input button select textarea","autofocus"),p("input textarea","placeholder"),p("a","download"),p("link script img","crossorigin"),p("iframe","sandbox seamless allowfullscreen")),o(c("a form meter progress dfn"),function(e){f[e]&&delete f[e].children[e]}),delete f.caption.children.table,delete f.script,t[e]=f,f)},l=function(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),o(e,function(e,o){n[o]=n[o.toUpperCase()]="map"==t?r(e,/[, ]/):a(e,/[, ]/)})),n};return function(e){var n,f,d,p,m,g,h,v,y,b,x,w,C,k=this,T={},S={},E=[],_={},A={},N=function(n,o,a){var u=e[n];return u?u=r(u,/[, ]/,r(u.toUpperCase(),/[, ]/)):(u=t[n])||(u=r(o," ",r(o.toUpperCase()," ")),u=i(u,a),t[n]=u),u};e=e||{},d=s(e.schema),!1===e.verify_html&&(e.valid_elements="*[*]"),n=l(e.valid_styles),f=l(e.invalid_styles,"map"),v=l(e.valid_classes,"map"),p=N("whitespace_elements","pre script noscript style textarea video audio iframe object code"),m=N("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),g=N("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),h=N("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),b=N("non_empty_elements","td th iframe video audio object script pre code",g),x=N("move_caret_before_on_enter_elements","table",b),w=N("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),y=N("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption",w),C=N("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),o((e.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(e){A[e]=new RegExp("</"+e+"[^>]*>","gi")});var D=function(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},R=function(e){var t,n,o,i,a,s,l,f,d,p,m,g,h,v,y,b,x,w,C,k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,S=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,_=/[*?+]/;if(e)for(e=c(e,","),T["@"]&&(b=T["@"].attributes,x=T["@"].attributesOrder),t=0,n=e.length;t<n;t++)if(a=k.exec(e[t])){if(v=a[1],d=a[2],y=a[3],f=a[5],g={},h=[],s={attributes:g,attributesOrder:h},"#"===v&&(s.paddEmpty=!0),"-"===v&&(s.removeEmpty=!0),"!"===a[4]&&(s.removeEmptyAttrs=!0),b){for(w in b)g[w]=b[w];h.push.apply(h,x)}if(f)for(f=c(f,"|"),o=0,i=f.length;o<i;o++)if(a=S.exec(f[o])){if(l={},m=a[1],p=a[2].replace(/::/g,":"),v=a[3],C=a[4],"!"===m&&(s.attributesRequired=s.attributesRequired||[],s.attributesRequired.push(p),l.required=!0),"-"===m){delete g[p],h.splice(u(h,p),1);continue}v&&("="===v&&(s.attributesDefault=s.attributesDefault||[],s.attributesDefault.push({name:p,value:C}),l.defaultValue=C),":"===v&&(s.attributesForced=s.attributesForced||[],s.attributesForced.push({name:p,value:C}),l.forcedValue=C),"<"===v&&(l.validValues=r(C,"?"))),_.test(p)?(s.attributePatterns=s.attributePatterns||[],l.pattern=D(p),s.attributePatterns.push(l)):(g[p]||h.push(p),g[p]=l)}b||"@"!=d||(b=g,x=h),y&&(s.outputName=d,T[y]=s),_.test(d)?(s.pattern=D(d),E.push(s)):T[d]=s}},P=function(e){T={},E=[],R(e),o(d,function(e,t){S[t]=e.children})},I=function(e){var n=/^(~)?(.+)$/;e&&(t.text_block_elements=t.block_elements=null,o(c(e,","),function(e){var t=n.exec(e),r="~"===t[1],a=r?"span":"div",u=t[2];if(S[u]=S[a],_[u]=a,r||(y[u.toUpperCase()]={},y[u]={}),!T[u]){var c=T[a];c=i({},c),delete c.removeEmptyAttrs,delete c.removeEmpty,T[u]=c}o(S,function(e,t){e[a]&&(S[t]=e=i({},S[t]),e[u]=e[a])})}))},O=function(n){var r=/^([+\-]?)(\w+)\[([^\]]+)\]$/;t[e.schema]=null,n&&o(c(n,","),function(e){var t,n,i=r.exec(e);i&&(n=i[1],t=n?S[i[2]]:S[i[2]]={"#comment":{}},t=S[i[2]],o(c(i[3],"|"),function(e){"-"===n?delete t[e]:t[e]={}}))})},B=function(e){var t,n=T[e];if(n)return n;for(t=E.length;t--;)if(n=E[t],n.pattern.test(e))return n};e.valid_elements?P(e.valid_elements):(o(d,function(e,t){T[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},S[t]=e.children}),"html5"!=e.schema&&o(c("strong/b em/i"),function(e){e=c(e,"/"),T[e[1]].outputName=e[0]}),o(c("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){T[e]&&(T[e].removeEmpty=!0)}),o(c("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){T[e].paddEmpty=!0}),o(c("span"),function(e){T[e].removeEmptyAttrs=!0})),I(e.custom_elements),O(e.valid_children),R(e.extended_valid_elements),O("+ol[ul|ol],+ul[ul|ol]"),o({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(e,t){T[t]&&(T[t].parentsRequired=c(e))}),e.invalid_elements&&o(a(e.invalid_elements),function(e){T[e]&&delete T[e]}),B("span")||R("span[!data-mce-type|*]"),k.children=S,k.getValidStyles=function(){return n},k.getInvalidStyles=function(){return f},k.getValidClasses=function(){return v},k.getBoolAttrs=function(){return h},k.getBlockElements=function(){return y},k.getTextBlockElements=function(){return w},k.getTextInlineElements=function(){return C},k.getShortEndedElements=function(){return g},k.getSelfClosingElements=function(){return m},k.getNonEmptyElements=function(){return b},k.getMoveCaretBeforeOnEnterElements=function(){return x},k.getWhiteSpaceElements=function(){return p},k.getSpecialElements=function(){return A},k.isValidChild=function(e,t){var n=S[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},k.isValid=function(e,t){var n,r,o=B(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(r=n.length;r--;)if(n[r].pattern.test(e))return!0}return!1},k.getElementRule=B,k.getCustomElements=function(){return _},k.addValidElements=R,k.setValidElements=P,k.addCustomElements=I,k.addValidChildren=O,k.elements=T}}),i("tinymce.core.html.Styles",[],function(){return function(e,t){var n,r,o,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,s=/\s+$/,l={},f="\ufeff";for(e=e||{},t&&(o=t.getValidStyles(),i=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+f).split(" "),n=0;n<r.length;n++)l[r[n]]=f+n,l[f+n]=r[n];var d=function(e,t,n,r){var o=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+o(t)+o(n)+o(r)};return{toHex:function(e){return e.replace(a,d)},parse:function(t){var r,o,i,p,m={},g=e.url_converter,h=e.url_converter_scope||this,v=function(e,t,r){var o,i,a,u;if((o=m[e+"-top"+t])&&(i=m[e+"-right"+t])&&(a=m[e+"-bottom"+t])&&(u=m[e+"-left"+t])){var c=[o,i,a,u];for(n=c.length-1;n--&&c[n]===c[n+1];);n>-1&&r||(m[e+t]=-1==n?c[0]:c.join(" "),delete m[e+"-top"+t],delete m[e+"-right"+t],delete m[e+"-bottom"+t],delete m[e+"-left"+t])}},y=function(e){var t,n=m[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return m[e]=n[0],!0}},b=function(e,t,n,r){y(t)&&y(n)&&y(r)&&(m[e]=m[t]+" "+m[n]+" "+m[r],delete m[t],delete m[n],delete m[r])},x=function(e){return p=!0,l[e]},w=function(e,t){return p&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},C=function(e){return String.fromCharCode(parseInt(e.slice(1),16))},k=function(e){return e.replace(/\\[0-9a-f]+/gi,C)},T=function(t,n,r,o,i,a){if(i=i||a)return i=w(i),"'"+i.replace(/\'/g,"\\'")+"'";if(n=w(n||r||o),!e.allow_script_urls){var u=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(u))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(u))return""}return g&&(n=g.call(h,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,x).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,x)});r=c.exec(t);)if(c.lastIndex=r.index+r[0].length,o=r[1].replace(s,"").toLowerCase(),i=r[2].replace(s,""),o&&i){if(o=k(o),i=k(i),-1!==o.indexOf(f)||-1!==o.indexOf('"'))continue;if(!e.allow_script_urls&&("behavior"==o||/expression\s*\(|\/\*|\*\//.test(i)))continue;"font-weight"===o&&"700"===i?i="bold":"color"!==o&&"background-color"!==o||(i=i.toLowerCase()),i=i.replace(a,d),i=i.replace(u,T),m[o]=p?w(i,!0):i}v("border","",!0),v("border","-width"),v("border","-color"),v("border","-style"),v("padding",""),v("margin",""),b("border","border-width","border-style","border-color"),"medium none"===m.border&&delete m.border,"none"===m["border-image"]&&delete m["border-image"]}return m},serialize:function(e,t){var n,r,a="",u=function(t){var n,r,i,u;if(n=o[t])for(r=0,i=n.length;r<i;r++)t=n[r],(u=e[t])&&(a+=(a.length>0?" ":"")+t+": "+u+";")},c=function(e,t){var n;return(!(n=i["*"])||!n[e])&&(!(n=i[t])||!n[e])};if(t&&o)u("*"),u(t);else for(n in e)!(r=e[n])||i&&!c(n,t)||(a+=(a.length>0?" ":"")+n+": "+r+";");return a}}}}),i("tinymce.core.dom.DOMUtils",["global!document","global!window","tinymce.core.dom.DomQuery","tinymce.core.dom.EventUtils","tinymce.core.dom.Sizzle","tinymce.core.dom.StyleSheetLoader","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.html.Entities","tinymce.core.html.Schema","tinymce.core.html.Styles","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=f.each,p=f.is,m=f.grep,g=f.trim,h=u.ie,v=/^([a-z0-9],?)+$/i,y=/^[ \t\r\n]*$/,b=function(e,t){var n,r={},o=t.keep_values;return n={set:function(n,r,o){t.url_converter&&(r=t.url_converter.call(t.url_converter_scope||e,r,o,n[0])),n.attr("data-mce-"+o,r).attr(o,r)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},r={style:{set:function(e,t){if(null!==t&&"object"==typeof t)return void e.css(t);o&&e.attr("data-mce-style",t),e.attr("style",t)},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},o&&(r.href=r.src=n),r},x=function(e,t){var n=t.attr("style");n=e.serializeStyle(e.parseStyle(n),t[0].nodeName),n||(n=null),t.attr("data-mce-style",n)},w=function(e,t){var n,r,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)r=e.nodeType,(!t||3!=r||r!=n&&e.nodeValue.length)&&(o++,n=r);return o},C=function(e,o){var a,u=this;u.doc=e,u.win=t,u.files={},u.counter=0,u.stdMode=!h||e.documentMode>=8,u.boxModel=!h||"CSS1Compat"==e.compatMode||u.stdMode,u.styleSheetLoader=new i(e),u.boundEvents=[],u.settings=o=o||{},u.schema=o.schema?o.schema:new s({}),u.styles=new l({url_converter:o.url_converter,url_converter_scope:o.url_converter_scope},o.schema),u.fixDoc(e),u.events=o.ownEvents?new r(o.proxy):r.Event,u.attrHooks=b(u,o),a=o.schema?o.schema.getBlockElements():{},u.$=n.overrideDefaults(function(){return{context:e,element:u.getRoot()}}),u.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!a[e.nodeName]):!!a[e]}};return C.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(h&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,r,o=this;return!h||1!==e.nodeType||t?e.cloneNode(t):(r=o.doc,t?n.firstChild:(n=r.createElement(e.nodeName),d(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e||this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,r=this;return e=r.get(e),t=r.getPos(e),n=r.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,r=this;return e=r.get(e),t=r.getStyle(e,"width"),n=r.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,n,r){var o,i=this,a=[];for(e=i.get(e),r=r===undefined,n=n||("BODY"!=i.getRoot().nodeName?i.getRoot().parentNode:null),p(t,"string")&&(o=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return i.is(e,o)});e&&e!=n&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;a.push(e)}e=e.parentNode}return r?a:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(e,t){var n=this;return o(e,n.get(t)||n.settings.root_element||n.doc,[])},is:function(e,t){var n;if(!e)return!1;if(e.length===undefined){if("*"===t)return 1==e.nodeType;if(v.test(t)){for(t=t.toLowerCase().split(/,/),e=e.nodeName.toLowerCase(),n=t.length-1;n>=0;n--)if(t[n]==e)return!0;return!1}}if(e.nodeType&&1!=e.nodeType)return!1;var r=e.nodeType?[e]:e;return o(t,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,r,o){var i=this;return this.run(e,function(e){var a;return a=p(t,"string")?i.doc.createElement(t):t,i.setAttribs(a,n),r&&(r.nodeType?a.appendChild(r):i.setHTML(a,r)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var r,o="";o+="<"+e;for(r in t)t.hasOwnProperty(r)&&null!==t[r]&&"undefined"!=typeof t[r]&&(o+=" "+r+'="'+this.encode(t[r])+'"');return void 0!==n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n,r,o=this.doc;for(r=o.createElement("div"),t=o.createDocumentFragment(),e&&(r.innerHTML=e);n=r.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&x(this,e)},getStyle:function(e,t,n){return e=this.$$(e),n?e.css(t):(t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=u.ie&&u.ie<12?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[t]:undefined)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&x(this,e)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var r,o,i=this,a=i.settings;""===n&&(n=null),e=i.$$(e),r=e.attr(t),e.length&&(o=i.attrHooks[t],o&&o.set?o.set(e,n,t):e.attr(t,n),r!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,r){d(t,function(e,t){n.setAttrib(r,t,e)})})},getAttrib:function(e,t,n){var r,o,i=this;return e=i.$$(e),e.length&&(r=i.attrHooks[t],o=r&&r.get?r.get(e,t):e.attr(t)),void 0===o&&(o=n||""),o},getPos:function(e,t){var r,o,i=this,a=0,u=0,c=i.doc,s=c.body;if(e=i.get(e),t=t||s,e){if(t===s&&e.getBoundingClientRect&&"static"===n(s).css("position"))return o=e.getBoundingClientRect(),t=i.boxModel?c.documentElement:s,a=o.left+(c.documentElement.scrollLeft||s.scrollLeft)-t.clientLeft,u=o.top+(c.documentElement.scrollTop||s.scrollTop)-t.clientTop,{x:a,y:u};for(r=e;r&&r!=t&&r.nodeType;)a+=r.offsetLeft||0,u+=r.offsetTop||0,r=r.offsetParent;for(r=e.parentNode;r&&r!=t&&r.nodeType;)a-=r.scrollLeft||0,u-=r.scrollTop||0,r=r.parentNode}return{x:a,y:u}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(t){var n,r,o=this,i=o.doc;if(o!==C.DOM&&i===e){var a=C.DOM.addedStyles;if(a=a||[],a[t])return;a[t]=!0,C.DOM.addedStyles=a}r=i.getElementById("mceDefaultStyles"),r||(r=i.createElement("style"),r.id="mceDefaultStyles",r.type="text/css",n=i.getElementsByTagName("head")[0],n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r)),r.styleSheet?r.styleSheet.cssText+=t:r.appendChild(i.createTextNode(t))},loadCSS:function(t){var n,r=this,o=r.doc;if(r!==C.DOM&&o===e)return void C.DOM.loadCSS(t);t||(t=""),n=o.getElementsByTagName("head")[0],d(t.split(","),function(e){var t;e=f._addCacheSuffix(e),r.files[e]||(r.files[e]=!0,t=r.create("link",{rel:"stylesheet",href:e}),h&&o.documentMode&&o.recalc&&(t.onload=function(){o.recalc&&o.recalc(),t.onload=null}),n.appendChild(t))})},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,r){this.$$(e).toggleClass(t,r).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),h?e.each(function(e,r){if(!1!==r.canHaveHTML){for(;r.firstChild;)r.removeChild(r.firstChild);try{r.innerHTML="<br>"+t,r.removeChild(r.firstChild)}catch(e){n("<div></div>").html("<br>"+t).contents().slice(1).appendTo(r)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType&&"outerHTML"in e?e.outerHTML:n("<div></div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var r=this;r.$$(e).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=t)}catch(e){}r.remove(n(this).html(t),!0)})},decode:c.decode,encode:c.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,r;return n=t.parentNode,r=t.nextSibling,r?n.insertBefore(e,r):n.appendChild(e),e})},replace:function(e,t,n){return this.run(t,function(t){return p(t,"array")&&(e=e.cloneNode(!0)),n&&d(m(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,r=this;return e.nodeName!=t.toUpperCase()&&(n=r.create(t),d(r.getAttribs(e),function(t){r.setAttrib(n,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,r=e;r;){for(n=t;n&&r!=n;)n=n.parentNode;if(r==n)break;r=r.parentNode}return!r&&e.ownerDocument?e.ownerDocument.documentElement:r},toHex:function(e){return this.styles.toHex(f.trim(e))},run:function(e,t,n){var r,o=this;return"string"==typeof e&&(e=o.get(e)),!!e&&(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(r=[],d(e,function(e,i){e&&("string"==typeof e&&(e=o.get(e)),r.push(t.call(n,e,i)))}),r))},getAttribs:function(e){var t;if(!(e=this.get(e)))return[];if(h){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,r,o,i,u,c,s=this,l=0;if(e=e.firstChild){u=new a(e,e.parentNode),t=t||(s.schema?s.schema.getNonEmptyElements():null),i=s.schema?s.schema.getWhiteSpaceElements():{};do{if(1===(o=e.nodeType)){var f=e.getAttribute("data-mce-bogus");if(f){e=u.next("all"===f);continue}if(c=e.nodeName.toLowerCase(),t&&t[c]){if("br"===c){l++,e=u.next();continue}return!1}for(r=s.getAttribs(e),n=r.length;n--;)if("name"===(c=r[n].nodeName)||"data-mce-bookmark"===c)return!1}if(8==o)return!1;if(3===o&&!y.test(e.nodeValue))return!1;if(3===o&&e.parentNode&&i[e.parentNode.nodeName]&&y.test(e.nodeValue))return!1;e=u.next()}while(e)}return l<=1},createRng:function(){return this.doc.createRange()},nodeIndex:w,split:function(e,t,n){var r,o,i,a=this,u=a.createRng(),c=function(e){var t,n=e.childNodes,r=e.nodeType,o=function(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n};if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(t=n.length-1;t>=0;t--)c(n[t]);if(9!=r){if(3==r&&e.nodeValue.length>0){var i=g(e.nodeValue).length;if(!a.isBlock(e.parentNode)||i>0||0===i&&o(e))return}else if(1==r&&(n=e.childNodes,1==n.length&&n[0]&&1==n[0].nodeType&&"bookmark"==n[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(n[0],e),n.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;a.remove(e)}return e}};if(e&&t)return u.setStart(e.parentNode,a.nodeIndex(e)),u.setEnd(t.parentNode,a.nodeIndex(t)),r=u.extractContents(),u=a.createRng(),u.setStart(t.parentNode,a.nodeIndex(t)+1),u.setEnd(e.parentNode,a.nodeIndex(e)+1),o=u.extractContents(),i=e.parentNode,i.insertBefore(c(r),e),n?i.insertBefore(n,e):i.insertBefore(t,e),i.insertBefore(c(o),e),a.remove(e),n||t},bind:function(e,t,n,r){var o=this;if(f.isArray(e)){for(var i=e.length;i--;)e[i]=o.bind(e[i],t,n,r);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,r]),o.events.bind(e,t,n,r||o)},unbind:function(e,t,n){var r,o=this;if(f.isArray(e)){for(r=e.length;r--;)e[r]=o.unbind(e[r],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(r=o.boundEvents.length;r--;){var i=o.boundEvents[r];e!=i[0]||t&&t!=i[1]||n&&n!=i[2]||this.events.unbind(i[0],i[1],i[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&null===(n=this.getContentEditable(e));e=e.parentNode);return n},destroy:function(){var e=this;if(e.boundEvents){for(var t=e.boundEvents.length;t--;){var n=e.boundEvents[t];this.events.unbind(n[0],n[1],n[2])}e.boundEvents=null}o.setDocument&&o.setDocument(),e.win=e.doc=e.root=e.events=e.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var r=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return r.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},C.DOM=new C(e),C.nodeIndex=w,C}),i("tinymce.core.dom.ScriptLoader",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r=t.DOM,o=n.each,i=n.grep,a=function(e){return"function"==typeof e},u=function(){var t,u=0,c=1,s=2,l=3,f={},d=[],p={},m=[],g=0,h=function(t,o,i){var u,c,s=r,l=function(){s.remove(c),u&&(u.onreadystatechange=u.onload=u=null),o()},f=function(){a(i)?i():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+t)};c=s.uniqueId(),u=e.createElement("script"),u.id=c,u.type="text/javascript",u.src=n._addCacheSuffix(t),"onreadystatechange"in u?u.onreadystatechange=function(){/loaded|complete/.test(u.readyState)&&l()}:u.onload=l,u.onerror=f,(e.getElementsByTagName("head")[0]||e.body).appendChild(u)};this.isDone=function(e){return f[e]==s},this.markDone=function(e){f[e]=s},this.add=this.load=function(e,n,r,o){f[e]==t&&(d.push(e),f[e]=u),n&&(p[e]||(p[e]=[]),p[e].push({success:n,failure:o,scope:r||this}))},this.remove=function(e){delete f[e],delete p[e]},this.loadQueue=function(e,t,n){this.loadScripts(d,e,t,n)},this.loadScripts=function(e,n,r,u){var d,v=[],y=function(e,n){o(p[n],function(t){a(t[e])&&t[e].call(t.scope)}),p[n]=t};m.push({success:n,failure:u,scope:r||this}),(d=function(){var t=i(e);if(e.length=0,o(t,function(e){return f[e]===s?void y("success",e):f[e]===l?void y("failure",e):void(f[e]!==c&&(f[e]=c,g++,h(e,function(){f[e]=s,g--,y("success",e),d()},function(){f[e]=l,g--,v.push(e),y("failure",e),d()})))}),!g){var n=m.slice(0);m.length=0,o(n,function(e){0===v.length?a(e.success)&&e.success.call(e.scope):a(e.failure)&&e.failure.call(e.scope,v)})}})()}};return u.ScriptLoader=new u,u}),i("tinymce.core.AddOnManager",["ephox.katamari.api.Arr","tinymce.core.dom.ScriptLoader","tinymce.core.util.Tools"],function(e,t,n){var r=n.each,o=function(){var e=this;e.items=[],e.urls={},e.lookup={},e._listeners=[]};return o.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:undefined},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(e,n){var r=o.language;if(r&&!1!==o.languageLoad){if(n)if(n=","+n+",",-1!=n.indexOf(","+r.substr(0,2)+","))r=r.substr(0,2);else if(-1==n.indexOf(","+r+","))return;t.ScriptLoader.add(this.urls[e]+"/langs/"+r+".js")}},add:function(t,n,o){this.items.push(n),this.lookup[t]={instance:n,dependencies:o};var i=e.partition(this._listeners,function(e){return e.name===t});return this._listeners=i.fail,r(i.pass,function(e){e.callback()}),n},remove:function(e){delete this.urls[e],delete this.lookup[e]},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(e,n){var o=this.urls[e];r(n,function(e){t.ScriptLoader.add(o+"/"+e)})},load:function(e,n,i,a,u){var c=this,s=n,l=function(){var o=c.dependencies(e);r(o,function(e){var t=c.createUrl(n,e);c.load(t.resource,t,undefined,undefined)}),i&&(a?i.call(a):i.call(t))};c.urls[e]||("object"==typeof n&&(s=n.prefix+n.resource+n.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=o.baseURL+"/"+s),c.urls[e]=s.substring(0,s.lastIndexOf("/")),c.lookup[e]?l():t.ScriptLoader.add(s,l,a,u))},waitFor:function(e,t){this.lookup.hasOwnProperty(e)?t():this._listeners.push({name:e,callback:t})}},o.PluginManager=new o,o.ThemeManager=new o,o}),i("ephox.katamari.api.Cell",[],function(){var e=function(t){var n=t,r=function(){return n};return{get:r,set:function(e){n=e},clone:function(){return e(r())}}};return e}),i("tinymce.core.dom.NodeType",[],function(){var e=function(e){return function(t){return!!t&&t.nodeType==e}},t=e(1),n=function(e){return e=e.toLowerCase().split(" "),function(t){var n,r;if(t&&t.nodeType)for(r=t.nodeName.toLowerCase(),n=0;n<e.length;n++)if(r===e[n])return!0;return!1}},r=function(e,n){return n=n.toLowerCase().split(" "),function(r){var o;if(t(r))for(o=0;o<n.length;o++)if(r.ownerDocument.defaultView.getComputedStyle(r,null).getPropertyValue(e)===n[o])return!0;return!1}},o=function(e,n){return function(r){return t(r)&&r[e]===n}},i=function(e){return function(n){return t(n)&&n.hasAttribute(e)}},a=function(e,n){return function(r){return t(r)&&r.getAttribute(e)===n}},u=function(e){return t(e)&&e.hasAttribute("data-mce-bogus")},c=function(e){return function(n){if(t(n)){if(n.contentEditable===e)return!0;if(n.getAttribute("data-mce-contenteditable")===e)return!0}return!1}};return{isText:e(3),isElement:t,isComment:e(8),isBr:n("br"),isContentEditableTrue:c("true"),isContentEditableFalse:c("false"),matchNodeNames:n,hasPropValue:o,hasAttribute:i,hasAttributeValue:a,matchStyleValues:r,isBogus:u}}),i("tinymce.core.util.Fun",[],function(){var e=[].slice,t=function(e){return function(){return e}},n=function(e){return function(t){return!e(t)}},r=function(e,t){return function(n){return e(t(n))}},o=function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}},i=function(){var t=e.call(arguments);return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}},a=function(t){var n=e.call(arguments);return n.length-1>=t.length?t.apply(this,n.slice(1)):function(){var e=n.concat([].slice.call(arguments));return a.apply(this,e)}};return{constant:t,negate:n,and:i,or:o,curry:a,compose:r,noop:function(){}}}),i("tinymce.core.text.Zwsp",[],function(){var e="\ufeff";return{isZwsp:function(t){return t===e},ZWSP:e,trim:function(t){return t.replace(new RegExp(e,"g"),"")}}}),i("tinymce.core.caret.CaretContainer",["global!document","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isElement,o=t.isText,i=function(e){return o(e)&&(e=e.parentNode),r(e)&&e.hasAttribute("data-mce-caret")},a=function(e){return o(e)&&n.isZwsp(e.data)},u=function(e){return i(e)||a(e)},c=function(e){return e.firstChild!==e.lastChild||!t.isBr(e.firstChild)},s=function(e,t){
var r,i,a,c;if(r=e.ownerDocument,a=r.createTextNode(n.ZWSP),c=e.parentNode,t){if(i=e.previousSibling,o(i)){if(u(i))return i;if(v(i))return i.splitText(i.data.length-1)}c.insertBefore(a,e)}else{if(i=e.nextSibling,o(i)){if(u(i))return i;if(h(i))return i.splitText(1),i}e.nextSibling?c.insertBefore(a,e.nextSibling):c.appendChild(a)}return a},l=function(e){if(t.isText(e)){var r=e.data;return r.length>0&&r.charAt(0)!==n.ZWSP&&e.insertData(0,n.ZWSP),e}return null},f=function(e){if(t.isText(e)){var r=e.data;return r.length>0&&r.charAt(r.length-1)!==n.ZWSP&&e.insertData(r.length,n.ZWSP),e}return null},d=function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset())===n.ZWSP},p=function(e){return e&&t.isText(e.container())&&e.container().data.charAt(e.offset()-1)===n.ZWSP},m=function(){var t=e.createElement("br");return t.setAttribute("data-mce-bogus","1"),t},g=function(e,t,n){var r,o,i;return r=t.ownerDocument,o=r.createElement(e),o.setAttribute("data-mce-caret",n?"before":"after"),o.setAttribute("data-mce-bogus","all"),o.appendChild(m()),i=t.parentNode,n?i.insertBefore(o,t):t.nextSibling?i.insertBefore(o,t.nextSibling):i.appendChild(o),o},h=function(e){return o(e)&&e.data[0]==n.ZWSP},v=function(e){return o(e)&&e.data[e.data.length-1]==n.ZWSP},y=function(e){var n=e.getElementsByTagName("br"),r=n[n.length-1];t.isBogus(r)&&r.parentNode.removeChild(r)};return{isCaretContainer:u,isCaretContainerBlock:i,isCaretContainerInline:a,showCaretContainerBlock:function(e){return e&&e.hasAttribute("data-mce-caret")?(y(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("_moz_abspos"),e):null},insertInline:s,prependInline:l,appendInline:f,isBeforeInline:d,isAfterInline:p,insertBlock:g,hasContent:c,startsWithCaretContainer:h,endsWithCaretContainer:v}}),i("tinymce.core.dom.RangeUtils",["tinymce.core.util.Tools","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretContainer"],function(e,t,n,r){var o=e.each,i=n.isContentEditableTrue,a=n.isContentEditableFalse,u=r.isCaretContainer,c=function(e){return i(e)||a(e)},s=function(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:t<0&&(t=0),n[t]||e},l=function(e,t,n){for(;e&&e!==t;){if(n(e))return e;e=e.parentNode}return null},f=function(e,t,n){return null!==l(e,t,n)},d=function(e,t,n){return f(e,t,function(e){return e.nodeName===n})},p=function(e){return"_mce_caret"===e.id},m=function(e,t){return u(e)&&!1===f(e,t,p)},g=function(e){this.walk=function(t,n){var r,i,a,u,c,l,f,d=t.startContainer,p=t.startOffset,m=t.endContainer,g=t.endOffset;if(f=e.select("td[data-mce-selected],th[data-mce-selected]"),f.length>0)return void o(f,function(e){n([e])});var h=function(e){var t;return t=e[0],3===t.nodeType&&t===d&&p>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===g&&e.length>0&&t===m&&3===t.nodeType&&e.splice(e.length-1,1),e},v=function(e,t,n){for(var r=[];e&&e!=n;e=e[t])r.push(e);return r},y=function(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)},b=function(e,t,r){var o=r?"nextSibling":"previousSibling";for(u=e,c=u.parentNode;u&&u!=t;u=c)c=u.parentNode,l=v(u==e?u:u[o],o),l.length&&(r||l.reverse(),n(h(l)))};if(1==d.nodeType&&d.hasChildNodes()&&(d=d.childNodes[p]),1==m.nodeType&&m.hasChildNodes()&&(m=s(m,g)),d==m)return n(h([d]));for(r=e.findCommonAncestor(d,m),u=d;u;u=u.parentNode){if(u===m)return b(d,r,!0);if(u===r)break}for(u=m;u;u=u.parentNode){if(u===d)return b(m,r);if(u===r)break}i=y(d,r)||d,a=y(m,r)||m,b(d,i,!0),l=v(i==d?i:i.nextSibling,"nextSibling",a==m?a.nextSibling:a),l.length&&n(h(l)),b(m,a)},this.split=function(e){var t=e.startContainer,n=e.startOffset,r=e.endContainer,o=e.endOffset,i=function(e,t){return e.splitText(t)};return t==r&&3==t.nodeType?n>0&&n<t.nodeValue.length&&(r=i(t,n),t=r.previousSibling,o>n?(o-=n,t=r=i(r,o).previousSibling,o=r.nodeValue.length,n=0):o=0):(3==t.nodeType&&n>0&&n<t.nodeValue.length&&(t=i(t,n),n=0),3==r.nodeType&&o>0&&o<r.nodeValue.length&&(r=i(r,o).previousSibling,o=r.nodeValue.length)),{startContainer:t,startOffset:n,endContainer:r,endOffset:o}},this.normalize=function(n){var r,o=!1,i=function(i){var c,s,l,f,p,g,h,v=e.getRoot(),y=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},b=function(n,r){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||v);n=o[r?"prev":"next"]();)if("BR"===n.nodeName)return!0},x=function(e){for(;e&&e!=v;){if(a(e))return!0;e=e.parentNode}return!1},w=function(e,t){return e.previousSibling&&e.previousSibling.nodeName==t},C=function(n,i){var a,u,l;if(i=i||c,l=e.getParent(i.parentNode,e.isBlock)||v,n&&"BR"==i.nodeName&&h&&e.isEmpty(l))return c=i.parentNode,s=e.nodeIndex(i),void(o=!0);for(a=new t(i,l);f=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(f)||m(f,e.getRoot()))return;if(3===f.nodeType&&f.nodeValue.length>0)return void(!1===d(f,v,"A")&&(c=f,s=n?f.nodeValue.length:0,o=!0));if(e.isBlock(f)||p[f.nodeName.toLowerCase()])return;u=f}r&&u&&(c=u,o=!0,s=0)};if(c=n[(i?"start":"end")+"Container"],s=n[(i?"start":"end")+"Offset"],h=1==c.nodeType&&s===c.childNodes.length,p=e.schema.getNonEmptyElements(),g=i,!u(c)){if(1==c.nodeType&&s>c.childNodes.length-1&&(g=!1),9===c.nodeType&&(c=e.getRoot(),s=0),c===v){if(g&&(f=c.childNodes[s>0?s-1:0])){if(u(f))return;if(p[f.nodeName]||"TABLE"==f.nodeName)return}if(c.hasChildNodes()){if(s=Math.min(!g&&s>0?s-1:s,c.childNodes.length-1),c=c.childNodes[s],s=0,!r&&c===v.lastChild&&"TABLE"===c.nodeName)return;if(x(c)||u(c))return;if(c.hasChildNodes()&&!/TABLE/.test(c.nodeName)){f=c,l=new t(c,v);do{if(a(f)||u(f)){o=!1;break}if(3===f.nodeType&&f.nodeValue.length>0){s=g?0:f.nodeValue.length,c=f,o=!0;break}if(p[f.nodeName.toLowerCase()]&&!y(f)){s=e.nodeIndex(f),c=f.parentNode,"IMG"!==f.nodeName&&"PRE"!==f.nodeName||g||s++,o=!0;break}}while(f=g?l.next():l.prev())}}}r&&(3===c.nodeType&&0===s&&C(!0),1===c.nodeType&&(f=c.childNodes[s],f||(f=c.childNodes[s-1]),!f||"BR"!==f.nodeName||w(f,"A")||b(f)||b(f,!0)||C(!0,f))),g&&!r&&3===c.nodeType&&s===c.nodeValue.length&&C(!1),o&&n["set"+(i?"Start":"End")](c,s)}};return r=n.collapsed,i(!0),r||i(),o&&r&&n.collapse(!0),o}};g.compareRanges=function(e,t){return e&&t&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset};var h=function(t,n,r){var o,i,a;if(o=r.elementFromPoint(t,n),i=r.body.createTextRange(),o&&"HTML"!=o.tagName||(o=r.body),i.moveToElementText(o),a=e.toArray(i.getClientRects()),a=a.sort(function(e,t){return e=Math.abs(Math.max(e.top-n,e.bottom-n)),t=Math.abs(Math.max(t.top-n,t.bottom-n)),e-t}),a.length>0){n=(a[0].bottom+a[0].top)/2;try{return i.moveToPoint(t,n),i.collapse(!0),i}catch(e){}}return null},v=function(e,t){var n=e&&e.parentElement?e.parentElement():null;return a(l(n,t,c))?null:e};return g.getCaretRangeFromPoint=function(e,t,n){var r,o;if(n.caretPositionFromPoint)o=n.caretPositionFromPoint(e,t),r=n.createRange(),r.setStart(o.offsetNode,o.offset),r.collapse(!0);else if(n.caretRangeFromPoint)r=n.caretRangeFromPoint(e,t);else if(n.body.createTextRange){r=n.body.createTextRange();try{r.moveToPoint(e,t),r.collapse(!0)}catch(o){r=h(e,t,n)}return v(r,n.body)}return r},g.getSelectedNode=function(e){var t=e.startContainer,n=e.startOffset;return t.hasChildNodes()&&e.endOffset==n+1?t.childNodes[n]:null},g.getNode=function(e,t){return 1===e.nodeType&&e.hasChildNodes()&&(t>=e.childNodes.length&&(t=e.childNodes.length-1),e=e.childNodes[t]),e},g}),i("tinymce.core.caret.CaretCandidate",["tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.caret.CaretContainer"],function(e,t,n){var r=e.isContentEditableTrue,o=e.isContentEditableFalse,i=e.isBr,a=e.isText,u=e.matchNodeNames("script style textarea"),c=e.matchNodeNames("img input textarea hr iframe video audio object"),s=e.matchNodeNames("table"),l=n.isCaretContainer,f=function(e){return!l(e)&&(a(e)?!u(e.parentNode):c(e)||i(e)||s(e)||o(e))},d=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode){if(o(e))return!1;if(r(e))return!0}return!0},p=function(e){return!!o(e)&&!0!==t.reduce(e.getElementsByTagName("*"),function(e,t){return e||r(t)},!1)};return{isCaretCandidate:f,isInEditable:d,isAtomic:function(e){return c(e)||p(e)},isEditableCaretCandidate:function(e,t){return f(e)&&d(e,t)}}}),i("tinymce.core.geom.ClientRect",[],function(){var e=Math.round,t=function(t){return t?{left:e(t.left),top:e(t.top),bottom:e(t.bottom),right:e(t.right),width:e(t.width),height:e(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},n=function(e,n){return e=t(e),n?e.right=e.left:(e.left=e.left+e.width,e.right=e.left),e.width=0,e},r=function(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right},o=function(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},i=function(e,t){return e.bottom-e.height/2<t.top||!(e.top>t.bottom)&&o(t.top-e.bottom,e,t)},a=function(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&o(t.bottom-e.top,e,t)},u=function(e,t){return e.left<t.left},c=function(e,t){return e.right>t.right};return{clone:t,collapse:n,isEqual:r,isAbove:i,isBelow:a,isLeft:u,isRight:c,compare:function(e,t){return i(e,t)?-1:a(e,t)?1:u(e,t)?-1:c(e,t)?1:0},containsXY:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}}}),i("tinymce.core.text.ExtendingChar",[],function(){var e=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]");return{isExtendingChar:function(t){return"string"==typeof t&&t.charCodeAt(0)>=768&&e.test(t)}}}),i("tinymce.core.caret.CaretPosition",["tinymce.core.util.Fun","tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.dom.RangeUtils","tinymce.core.caret.CaretCandidate","tinymce.core.geom.ClientRect","tinymce.core.text.ExtendingChar"],function(e,t,n,r,o,i,a){var u=t.isElement,c=o.isCaretCandidate,s=t.matchStyleValues("display","block table"),l=t.matchStyleValues("float","left right"),f=e.and(u,c,e.negate(l)),d=e.negate(t.matchStyleValues("white-space","pre pre-line pre-wrap")),p=t.isText,m=t.isBr,g=n.nodeIndex,h=r.getNode,v=function(e){return"createRange"in e?e.createRange():n.DOM.createRng()},y=function(e){return e&&/[\r\n\t ]/.test(e)},b=function(e){var t,n=e.startContainer,r=e.startOffset;return!!(y(e.toString())&&d(n.parentNode)&&(t=n.data,y(t[r-1])||y(t[r+1])))},x=function(e){var t,n,r=[],o=function(e){var t,n=e.ownerDocument,r=v(n),o=n.createTextNode("\xa0"),a=e.parentNode;return a.insertBefore(o,e),r.setStart(o,0),r.setEnd(o,1),t=i.clone(r.getBoundingClientRect()),a.removeChild(o),t},c=function(e){var t,n;return n=e.getClientRects(),t=n.length>0?i.clone(n[0]):i.clone(e.getBoundingClientRect()),m(e)&&0===t.left?o(e):t},l=function(e,t){return e=i.collapse(e,t),e.width=1,e.right=e.left+1,e},d=function(e){0!==e.height&&(r.length>0&&i.isEqual(e,r[r.length-1])||r.push(e))},g=function(e,t){var n=v(e.ownerDocument);if(t<e.data.length){if(a.isExtendingChar(e.data[t]))return r;if(a.isExtendingChar(e.data[t-1])&&(n.setStart(e,t),n.setEnd(e,t+1),!b(n)))return d(l(c(n),!1)),r}t>0&&(n.setStart(e,t-1),n.setEnd(e,t),b(n)||d(l(c(n),!1))),t<e.data.length&&(n.setStart(e,t),n.setEnd(e,t+1),b(n)||d(l(c(n),!0)))};if(p(e.container()))return g(e.container(),e.offset()),r;if(u(e.container()))if(e.isAtEnd())n=h(e.container(),e.offset()),p(n)&&g(n,n.data.length),f(n)&&!m(n)&&d(l(c(n),!1));else{if(n=h(e.container(),e.offset()),p(n)&&g(n,0),f(n)&&e.isAtEnd())return d(l(c(n),!1)),r;t=h(e.container(),e.offset()-1),f(t)&&!m(t)&&(s(t)||s(n)||!f(n))&&d(l(c(t),!1)),f(n)&&d(l(c(n),!0))}return r},w=function(t,n,r){var o=function(){return p(t),0===n},i=function(){return p(t)?n>=t.data.length:n>=t.childNodes.length},a=function(){var e;return e=v(t.ownerDocument),e.setStart(t,n),e.setEnd(t,n),e},u=function(){return r||(r=x(new w(t,n))),r},c=function(){return u().length>0},s=function(e){return e&&t===e.container()&&n===e.offset()},l=function(e){return h(t,e?n-1:n)};return{container:e.constant(t),offset:e.constant(n),toRange:a,getClientRects:u,isVisible:c,isAtStart:o,isAtEnd:i,isEqual:s,getNode:l}};return w.fromRangeStart=function(e){return new w(e.startContainer,e.startOffset)},w.fromRangeEnd=function(e){return new w(e.endContainer,e.endOffset)},w.after=function(e){return new w(e.parentNode,g(e)+1)},w.before=function(e){return new w(e.parentNode,g(e))},w.isAtStart=function(e){return!!e&&e.isAtStart()},w.isAtEnd=function(e){return!!e&&e.isAtEnd()},w.isTextPosition=function(e){return!!e&&t.isText(e.container())},w}),i("tinymce.core.caret.CaretBookmark",["tinymce.core.dom.NodeType","tinymce.core.dom.DOMUtils","tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.caret.CaretPosition"],function(e,t,n,r,o){var i=e.isText,a=e.isBogus,u=t.nodeIndex,c=function(e){var t=e.parentNode;return a(t)?c(t):t},s=function(e){return e?r.reduce(e.childNodes,function(e,t){return a(t)&&"BR"!=t.nodeName?e=e.concat(s(t)):e.push(t),e},[]):[]},l=function(e,t){for(;(e=e.previousSibling)&&i(e);)t+=e.data.length;return t},f=function(e){return function(t){return e===t}},d=function(t){var n,o,a;return n=s(c(t)),o=r.findIndex(n,f(t),t),n=n.slice(0,o+1),a=r.reduce(n,function(e,t,r){return i(t)&&i(n[r-1])&&e++,e},0),n=r.filter(n,e.matchNodeNames(t.nodeName)),(o=r.findIndex(n,f(t),t))-a},p=function(e){return(i(e)?"text()":e.nodeName.toLowerCase())+"["+d(e)+"]"},m=function(e,t,n){var r=[];for(t=t.parentNode;t!=e&&(!n||!n(t));t=t.parentNode)r.push(t);return r},g=function(t,n,o){var a=s(t);return a=r.filter(a,function(e,t){return!i(e)||!i(a[t-1])}),a=r.filter(a,e.matchNodeNames(n)),a[o]},h=function(e,t){for(var n,r=e,a=0;i(r);){if(n=r.data.length,t>=a&&t<=a+n){e=r,t-=a;break}if(!i(r.nextSibling)){e=r,t=n;break}a+=n,r=r.nextSibling}return t>e.data.length&&(t=e.data.length),new o(e,t)};return{create:function(t,o){var a,u,c,s,f,d=[];return a=o.container(),u=o.offset(),i(a)?c=l(a,u):(s=a.childNodes,u>=s.length?(c="after",u=s.length-1):c="before",a=s[u]),d.push(p(a)),f=m(t,a),f=r.filter(f,n.negate(e.isBogus)),d=d.concat(r.map(f,function(e){return p(e)})),d.reverse().join("/")+","+c},resolve:function(e,t){var n,a,c;return t?(n=t.split(","),t=n[0].split("/"),c=n.length>1?n[1]:"before",a=r.reduce(t,function(e,t){return(t=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t))?("text()"===t[1]&&(t[1]="#text"),g(e,t[1],parseInt(t[2],10))):null},e),a?i(a)?h(a,parseInt(c,10)):(c="after"===c?u(a)+1:u(a),new o(a.parentNode,c)):null):null}}}),i("tinymce.core.dom.BookmarkManager",["tinymce.core.caret.CaretBookmark","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u){var c=r.isContentEditableFalse,s=function(e,t){var n,r;for(r=a.trim(e.data.slice(0,t)).length,n=e.previousSibling;n&&3===n.nodeType;n=n.previousSibling)r+=a.trim(n.data).length;return r},l=function(e){r.isText(e)&&0===e.data.length&&e.parentNode.removeChild(e)},f=function(a){var f=a.dom;this.getBookmark=function(i,d){var p,m,g,h,v,y,b,x="&#xFEFF;",w=function(e,t){var n=0;return u.each(f.select(e),function(e){if("all"!==e.getAttribute("data-mce-bogus"))return e!=t&&void n++}),n},C=function(e){var t=function(t){var n,r,o,i=t?"start":"end";n=e[i+"Container"],r=e[i+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(o=n.childNodes,(n=o[Math.min(t?r:r-1,o.length-1)])&&(r=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,r)))};return t(!0),t(),e},k=function(e){var t=f.getRoot(),n={},r=function(e,n){var r,o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"],a=[],u=0;for(3===o.nodeType?a.push(d?s(o,i):i):(r=o.childNodes,i>=r.length&&r.length&&(u=1,i=Math.max(0,r.length-1)),a.push(f.nodeIndex(r[i],d)+u));o&&o!=t;o=o.parentNode)a.push(f.nodeIndex(o,d));return a};return n.start=r(e,!0),a.isCollapsed()||(n.end=r(e)),n},T=function(e){var n=function(e,n){var i;if(r.isElement(e)&&(e=o.getNode(e,n),c(e)))return e;if(t.isCaretContainer(e)){if(r.isText(e)&&t.isCaretContainerBlock(e)&&(e=e.parentNode),i=e.previousSibling,c(i))return i;if(i=e.nextSibling,c(i))return i}};return n(e.startContainer,e.startOffset)||n(e.endContainer,e.endOffset)};if(2==i)return y=a.getNode(),v=y?y.nodeName:null,p=a.getRng(),c(y)||"IMG"==v?{name:v,index:w(v,y)}:(y=T(p),y?(v=y.tagName,{name:v,index:w(v,y)}):k(p));if(3==i)return p=a.getRng(),{start:e.create(f.getRoot(),n.fromRangeStart(p)),end:e.create(f.getRoot(),n.fromRangeEnd(p))};if(i)return{rng:a.getRng()};if(p=a.getRng(),g=f.uniqueId(),h=a.isCollapsed(),b="overflow:hidden;line-height:0px",y=a.getNode(),"IMG"==(v=y.nodeName))return{name:v,index:w(v,y)};if(m=C(p.cloneRange()),!h){m.collapse(!1);var S=f.create("span",{"data-mce-type":"bookmark",id:g+"_end",style:b},x);m.insertNode(S),l(S.nextSibling)}p=C(p),p.collapse(!0);var E=f.create("span",{"data-mce-type":"bookmark",id:g+"_start",style:b},x);return p.insertNode(E),l(E.previousSibling),a.moveToBookmark({id:g,keep:1}),{id:g}},this.moveToBookmark=function(t){var n,r,o,c,s,l,d=function(e){var o,i,a,u,c=t[e?"start":"end"];if(c){for(a=c[0],i=r,o=c.length-1;o>=1;o--){if(u=i.childNodes,c[o]>u.length-1)return;i=u[c[o]]}3===i.nodeType&&(a=Math.min(c[0],i.nodeValue.length)),1===i.nodeType&&(a=Math.min(c[0],i.childNodes.length)),e?n.setStart(i,a):n.setEnd(i,a)}return!0},p=function(e){var n,r,a,d,p=f.get(t.id+"_"+e),m=t.keep;if(p&&(n=p.parentNode,"start"==e?(m?(n=p.firstChild,r=1):r=f.nodeIndex(p),o=c=n,s=l=r):(m?(n=p.firstChild,r=1):r=f.nodeIndex(p),c=n,l=r),!m)){for(d=p.previousSibling,a=p.nextSibling,u.each(u.grep(p.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});p=f.get(t.id+"_"+e);)f.remove(p,1);d&&a&&d.nodeType==a.nodeType&&3==d.nodeType&&!i.opera&&(r=d.nodeValue.length,d.appendData(a.nodeValue),f.remove(a),"start"==e?(o=c=d,s=l=r):(c=d,l=r))}},m=function(e){return!f.isBlock(e)||e.innerHTML||i.ie||(e.innerHTML='<br data-mce-bogus="1" />'),e},g=function(){var n,r;return n=f.createRng(),r=e.resolve(f.getRoot(),t.start),n.setStart(r.container(),r.offset()),r=e.resolve(f.getRoot(),t.end),n.setEnd(r.container(),r.offset()),n};t&&(u.isArray(t.start)?(n=f.createRng(),r=f.getRoot(),d(!0)&&d()&&a.setRng(n)):"string"==typeof t.start?a.setRng(g(t)):t.id?(p("start"),p("end"),o&&(n=f.createRng(),n.setStart(m(o),s),n.setEnd(m(c),l),a.setRng(n))):t.name?a.select(f.select(t.name)[t.index]):t.rng&&a.setRng(t.rng))}};return f.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},f}),i("tinymce.core.caret.CaretUtils",["tinymce.core.util.Fun","tinymce.core.dom.TreeWalker","tinymce.core.dom.NodeType","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i){var a=n.isContentEditableTrue,u=n.isContentEditableFalse,c=n.matchStyleValues("display","block table table-cell table-caption list-item"),s=o.isCaretContainer,l=o.isCaretContainerBlock,f=e.curry,d=n.isElement,p=i.isCaretCandidate,m=function(e){return e>0},g=function(e){return e<0},h=function(e,t){for(var n;n=e(t);)if(!l(n))return n;return null},v=function(e,n,r,o,i){var a=new t(e,o);if(g(n)){if((u(e)||l(e))&&(e=h(a.prev,!0),r(e)))return e;for(;e=h(a.prev,i);)if(r(e))return e}if(m(n)){if((u(e)||l(e))&&(e=h(a.next,!0),r(e)))return e;for(;e=h(a.next,i);)if(r(e))return e}return null},y=function(e,t){for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(a(e))return e;return t},b=function(e,t){for(;e&&e!=t;){if(c(e))return e;e=e.parentNode}return null},x=function(e,t,n){return b(e.container(),n)==b(t.container(),n)},w=function(e,t,n){return y(e.container(),n)==y(t.container(),n)},C=function(e,t){var n,r;return t?(n=t.container(),r=t.offset(),d(n)?n.childNodes[r+e]:null):null},k=function(e,t){var n=t.ownerDocument.createRange();return e?(n.setStartBefore(t),n.setEndBefore(t)):(n.setStartAfter(t),n.setEndAfter(t)),n},T=function(e,t,n){return b(t,e)==b(n,e)},S=function(e,t,n){var r,o;for(o=e?"previousSibling":"nextSibling";n&&n!=t;){if(r=n[o],s(r)&&(r=r[o]),u(r)){if(T(t,r,n))return r;break}if(p(r))break;n=n.parentNode}return null},E=f(k,!0),_=f(k,!1),A=function(e,t,r){var i,a,c,l,p=f(S,!0,t),m=f(S,!1,t);if(a=r.startContainer,c=r.startOffset,o.isCaretContainerBlock(a)){if(d(a)||(a=a.parentNode),"before"==(l=a.getAttribute("data-mce-caret"))&&(i=a.nextSibling,u(i)))return E(i);if("after"==l&&(i=a.previousSibling,u(i)))return _(i)}if(!r.collapsed)return r;if(n.isText(a)){if(s(a)){if(1===e){if(i=m(a))return E(i);if(i=p(a))return _(i)}if(-1===e){if(i=p(a))return _(i);if(i=m(a))return E(i)}return r}if(o.endsWithCaretContainer(a)&&c>=a.data.length-1)return 1===e&&(i=m(a))?E(i):r;if(o.startsWithCaretContainer(a)&&c<=1)return-1===e&&(i=p(a))?_(i):r;if(c===a.data.length)return i=m(a),i?E(i):r;if(0===c)return i=p(a),i?_(i):r}return r},N=function(e,t){return u(C(e,t))};return{isForwards:m,isBackwards:g,findNode:v,getEditingHost:y,getParentBlock:b,isInSameBlock:x,isInSameEditingHost:w,isBeforeContentEditableFalse:f(N,0),isAfterContentEditableFalse:f(N,-1),normalizeRange:A}}),i("tinymce.core.caret.CaretWalker",["tinymce.core.dom.NodeType","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i){var a=e.isContentEditableFalse,u=e.isText,c=e.isElement,s=e.isBr,l=r.isForwards,f=r.isBackwards,d=t.isCaretCandidate,p=t.isAtomic,m=t.isEditableCaretCandidate,g=function(e,t){for(var n=[];e&&e!=t;)n.push(e),e=e.parentNode;return n},h=function(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},v=function(e,t){if(l(e)){if(d(t.previousSibling)&&!u(t.previousSibling))return n.before(t);if(u(t))return n(t,0)}if(f(e)){if(d(t.nextSibling)&&!u(t.nextSibling))return n.after(t);if(u(t))return n(t,t.data.length)}return f(e)?s(t)?n.before(t):n.after(t):n.before(t)},y=function(t,o){var i;return!!e.isBr(t)&&(!!(i=b(1,n.after(t),o))&&!r.isInSameBlock(n.before(t),n.before(i),o))},b=function(e,t,x){var w,C,k,T,S,E,_;if(!c(x)||!t)return null;if(t.isEqual(n.after(x))&&x.lastChild){if(_=n.after(x.lastChild),f(e)&&d(x.lastChild)&&c(x.lastChild))return s(x.lastChild)?n.before(x.lastChild):_}else _=t;if(w=_.container(),C=_.offset(),u(w)){if(f(e)&&C>0)return n(w,--C);if(l(e)&&C<w.length)return n(w,++C);k=w}else{if(f(e)&&C>0&&(T=h(w,C-1),d(T)))return!p(T)&&(S=r.findNode(T,e,m,T))?u(S)?n(S,S.data.length):n.after(S):u(T)?n(T,T.data.length):n.before(T);if(l(e)&&C<w.childNodes.length&&(T=h(w,C),d(T)))return y(T,x)?b(e,n.after(T),x):!p(T)&&(S=r.findNode(T,e,m,T))?u(S)?n(S,0):n.before(S):u(T)?n(T,0):n.after(T);k=_.getNode()}return(l(e)&&_.isAtEnd()||f(e)&&_.isAtStart())&&(k=r.findNode(k,e,i.constant(!0),x,!0),m(k))?v(e,k):(T=r.findNode(k,e,m,x),E=o.last(o.filter(g(w,x),a)),!E||T&&E.contains(T)?T?v(e,T):null:_=l(e)?n.after(E):n.before(E))};return function(e){return{next:function(t){return b(1,t,e)},prev:function(t){return b(-1,t,e)}}}}),i("tinymce.core.caret.CaretFinder",["ephox.katamari.api.Fun","ephox.katamari.api.Option","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a){var u=function(e,t,n){var o=e?r.before(n):r.after(n);return m(e,t,o)},c=function(e){return a.isBr(e)?r.before(e):r.after(e)},s=function(e){return r.isTextPosition(e)?0===e.offset():n.isCaretCandidate(e.getNode())},l=function(e){return r.isTextPosition(e)?e.offset()===e.container().data.length:n.isCaretCandidate(e.getNode(!0))},f=function(e,t){return!r.isTextPosition(e)&&!r.isTextPosition(t)&&e.getNode()===t.getNode(!0)},d=function(e){return!r.isTextPosition(e)&&a.isBr(e.getNode())},p=function(e,t,n){return e?!f(t,n)&&!d(t)&&l(t)&&s(n):!f(n,t)&&s(t)&&l(n)},m=function(e,n,r){var o=new i(n);return t.from(e?o.next(r):o.prev(r))},g=function(e,n,r){return m(e,n,r).bind(function(i){return o.isInSameBlock(r,i,n)&&p(e,r,i)?m(e,n,i):t.some(i)})},h=function(e,o){var i=e?o.firstChild:o.lastChild;return a.isText(i)?t.some(new r(i,e?0:i.data.length)):i?n.isCaretCandidate(i)?t.some(e?r.before(i):c(i)):u(e,o,i):t.none()};return{fromPosition:m,nextPosition:e.curry(m,!0),prevPosition:e.curry(m,!1),navigate:g,positionIn:h,firstPositionIn:e.curry(h,!0),lastPositionIn:e.curry(h,!1)}}),i("tinymce.core.dom.RangeNormalizer",["global!document","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils"],function(e,t,n,r){var o=function(t,n,r,o){var i=e.createRange();return i.setStart(t,n),i.setEnd(r,o),i},i=function(e){var i=n.fromRangeStart(e),a=n.fromRangeEnd(e),u=e.commonAncestorContainer;return t.fromPosition(!1,u,a).map(function(t){return!r.isInSameBlock(i,a,u)&&r.isInSameBlock(i,t,u)?o(i.container(),i.offset(),t.container(),t.offset()):e}).getOr(e)},a=function(e){return e.collapsed?e:i(e)};return{normalize:function(e){return a(e)}}}),i("ephox.katamari.api.Type",["global!Array","global!String"],function(e,t){var n=function(n){if(null===n)return"null";var r=typeof n;return"object"===r&&e.prototype.isPrototypeOf(n)?"array":"object"===r&&t.prototype.isPrototypeOf(n)?"string":r},r=function(e){return function(t){return n(t)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),i("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,t,n,r){return function(){var o=arguments;return function(){for(var i=new n(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var u={};return e.each(o,function(e,n){u[e]=t.constant(i[n])}),u}}}),i("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,t){var n=function(){var e=t.keys,n=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};return e===undefined?n:e}(),r=function(e,t){for(var r=n(e),o=0,i=r.length;o<i;o++){var a=r[o];t(e[a],a,e)}},o=function(e,t){return i(e,function(e,n,r){return{k:n,v:t(e,n,r)}})},i=function(e,t){var n={};return r(e,function(r,o){var i=t(r,o,e);n[i.k]=i.v}),n},a=function(e,t){var n={},o={};return r(e,function(e,r){(t(e,r)?n:o)[r]=e}),{t:n,f:o}},u=function(e,t){var n=[];return r(e,function(e,r){n.push(t(e,r))}),n},c=function(t,r){for(var o=n(t),i=0,a=o.length;i<a;i++){var u=o[i],c=t[u];if(r(c,u,t))return e.some(c)}return e.none()},s=function(e){return u(e,function(e){return e})};return{bifilter:a,each:r,map:o,mapToArray:u,tupleMap:i,find:c,keys:n,values:s,size:function(e){return s(e).length}}}),i("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,t,n){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,t){throw new n("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(e){throw new n("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new n("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!t.isString(e))throw new n("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,t){throw new n("All values need to be of type: "+t+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);e.find(o,function(e,t){return t<o.length-1&&e===o[t+1]}).each(function(e){throw new n("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),i("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,t,n,r,o,i,a){return function(u,c){var s=u.concat(c);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",u),o.validateStrArr("optional",c),o.checkDupes(s),function(i){var l=n.keys(i);e.forall(u,function(t){return e.contains(l,t)})||o.reqMessage(u,l);var f=e.filter(l,function(t){return!e.contains(s,t)});f.length>0&&o.unsuppMessage(f);var d={};return e.each(u,function(e){d[e]=t.constant(i[e])}),e.each(c,function(e){d[e]=t.constant(a.prototype.hasOwnProperty.call(i,e)?r.some(i[e]):r.none())}),d}}}),i("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,t){return{immutable:e,immutableBag:t}}),i("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,t){var n=[],r=function(e){return n.push(e),t(e)},o=t(e);do{o=o.bind(r)}while(o.isSome());return n}}}),i("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var t=function(){return e.getOrDie("Node")},n=function(e,t,n){return 0!=(e.compareDocumentPosition(t)&n)};return{documentPositionPreceding:function(e,r){return n(e,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return n(e,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),i("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var t,n=!1;return function(){return n||(n=!0,t=e.apply(null,arguments)),t}}}}),a("global!Number",Number),i("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,t,n){var r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.test(t))return r}return undefined},o=function(e,n){var o=r(e,n);if(!o)return{major:0,minor:0};var i=function(e){return t(n.replace(o,"$"+e))};return u(i(1),i(2))},i=function(e,t){var r=n(t).toLowerCase();return 0===e.length?a():o(e,r)},a=function(){return u(0,0)},u=function(e,t){return{major:e,minor:t}};return{nu:u,detect:i,unknown:a}}),i("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Edge",r="Chrome",o="IE",i="Opera",a="Firefox",u="Safari",c=function(e,t){return function(){return t===e}},s=function(){return l({current:undefined,version:t.unknown()})},l=function(e){var t=e.current;return{current:t,version:e.version,isEdge:c(n,t),isChrome:c(r,t),isIE:c(o,t),isOpera:c(i,t),isFirefox:c(a,t),isSafari:c(u,t)}};return{unknown:s,nu:l,edge:e.constant(n),chrome:e.constant(r),ie:e.constant(o),opera:e.constant(i),firefox:e.constant(a),safari:e.constant(u)}}),i("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,t){var n="Windows",r="iOS",o="Android",i="Linux",a="OSX",u="Solaris",c="FreeBSD",s=function(e,t){return function(){return t===e}},l=function(){return f({
current:undefined,version:t.unknown()})},f=function(e){var t=e.current;return{current:t,version:e.version,isWindows:s(n,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(a,t),isLinux:s(i,t),isSolaris:s(u,t),isFreeBSD:s(c,t)}};return{unknown:l,nu:f,windows:e.constant(n),ios:e.constant(r),android:e.constant(o),linux:e.constant(i),osx:e.constant(a),solaris:e.constant(u),freebsd:e.constant(c)}}),i("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(t,n,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,a=t.isAndroid()&&3===t.version.major,u=t.isAndroid()&&4===t.version.major,c=o||a||u&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),l=s&&!c,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(i),isTablet:e.constant(c),isPhone:e.constant(l),isTouch:e.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:e.constant(f)}}}),i("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,t,n){var r=function(t,r){var o=n(r).toLowerCase();return e.find(t,function(e){return e.search(o)})};return{detectBrowser:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})},detectOs:function(e,n){return r(e,n).map(function(e){var r=t.detect(e.versionRegexes,n);return{current:e.name,version:r}})}}}),i("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,t){return t+e},addToEnd:function(e,t){return e+t},removeFromStart:function(e,t){return e.substring(t)},removeFromEnd:function(e,t){return e.substring(0,e.length-t)}}}),i("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e){return{first:function(e,t){return e.substr(0,t)},last:function(e,t){return e.substr(e.length-t,e.length)},head:function(t){return""===t?e.none():e.some(t.substr(0,1))},tail:function(t){return""===t?e.none():e.some(t.substring(1))}}}),i("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,t){var n=function(e,t,n){return""===t||!(e.length<t.length)&&e.substr(n,n+t.length)===t},r=function(e,t){var n=function(e){var t=typeof e;return"string"===t||"number"===t};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=t[r];return n(o)?o:e})},o=function(t,n){return l(t,n)?e.removeFromStart(t,n.length):t},i=function(t,n){return f(t,n)?e.removeFromEnd(t,n.length):t},a=function(t,n){return l(t,n)?t:e.addToStart(t,n)},u=function(t,n){return f(t,n)?t:e.addToEnd(t,n)},c=function(e,t){return-1!==e.indexOf(t)},s=function(e){return t.head(e).bind(function(n){return t.tail(e).map(function(e){return n.toUpperCase()+e})}).getOr(e)},l=function(e,t){return n(e,t,0)},f=function(e,t){return n(e,t,e.length-t.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:i,ensureLeading:a,ensureTrailing:u,endsWith:f,contains:c,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:s}}),i("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,t){var n=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(n){return t.contains(n,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return t.contains(e,"edge/")&&t.contains(e,"chrome")&&t.contains(e,"safari")&&t.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,n],search:function(e){return t.contains(e,"chrome")&&!t.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return t.contains(e,"msie")||t.contains(e,"trident")}},{name:"Opera",versionRegexes:[n,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[n,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(t.contains(e,"safari")||t.contains(e,"mobile/"))&&t.contains(e,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return t.contains(e,"iphone")||t.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(i)}}),i("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,t,n,r,o){return{detect:function(i){var a=o.browsers(),u=o.oses(),c=r.detectBrowser(a,i).fold(e.unknown,e.nu),s=r.detectOs(u,i).fold(t.unknown,t.nu);return{browser:c,os:s,deviceType:n(s,c,i)}}}}),i("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,t,n){return{detect:e.cached(function(){var e=n.userAgent;return t.detect(e)})}}),i("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,t,n,r,o,i){var a=0,u=1,c=2,s=3,l=function(){var e=i.createElement("span");return e.matches!==undefined?a:e.msMatchesSelector!==undefined?u:e.webkitMatchesSelector!==undefined?c:e.mozMatchesSelector!==undefined?s:-1}(),f=r.ELEMENT,d=r.DOCUMENT,p=function(e,t){var n=e.dom();if(n.nodeType!==f)return!1;if(l===a)return n.matches(t);if(l===u)return n.msMatchesSelector(t);if(l===c)return n.webkitMatchesSelector(t);if(l===s)return n.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},m=function(e){return e.nodeType!==f&&e.nodeType!==d||0===e.childElementCount};return{all:function(t,r){var o=r===undefined?i:r.dom();return m(o)?[]:e.map(o.querySelectorAll(t),n.fromDom)},is:p,one:function(e,r){var o=r===undefined?i:r.dom();return m(o)?t.none():t.from(o.querySelector(e)).map(n.fromDom)}}}),i("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,t,n,r,o){var i=function(e,t){return e.dom()===t.dom()},a=function(e,t){return e.dom().isEqualNode(t.dom())},u=function(n,r){return e.exists(r,t.curry(i,n))},c=function(e,t){var n=e.dom(),r=t.dom();return n!==r&&n.contains(r)},s=function(e,t){return n.documentPositionContainedBy(e.dom(),t.dom())},l=r.detect().browser,f=l.isIE()?s:c;return{eq:i,isEqualNode:a,member:u,contains:f,is:o.is}}),i("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r,o,i,a,u){var c=function(e){return u.fromDom(e.dom().ownerDocument)},s=function(e){var t=c(e);return u.fromDom(t.dom().documentElement)},l=function(e){var t=e.dom(),n=t.ownerDocument.defaultView;return u.fromDom(n)},f=function(e){var t=e.dom();return r.from(t.parentNode).map(u.fromDom)},d=function(e){return f(e).bind(function(n){var r=x(n);return t.findIndex(r,function(t){return a.eq(e,t)})})},p=function(t,r){for(var o=e.isFunction(r)?r:n.constant(!1),i=t.dom(),a=[];null!==i.parentNode&&i.parentNode!==undefined;){var c=i.parentNode,s=u.fromDom(c);if(a.push(s),!0===o(s))break;i=c}return a},m=function(e){var n=function(n){return t.filter(n,function(t){return!a.eq(e,t)})};return f(e).map(x).map(n).getOr([])},g=function(e){var t=e.dom();return r.from(t.offsetParent).map(u.fromDom)},h=function(e){var t=e.dom();return r.from(t.previousSibling).map(u.fromDom)},v=function(e){var t=e.dom();return r.from(t.nextSibling).map(u.fromDom)},y=function(e){return t.reverse(i.toArray(e,h))},b=function(e){return i.toArray(e,v)},x=function(e){var n=e.dom();return t.map(n.childNodes,u.fromDom)},w=function(e,t){var n=e.dom().childNodes;return r.from(n[t]).map(u.fromDom)},C=function(e){return w(e,0)},k=function(e){return w(e,e.dom().childNodes.length-1)},T=function(e){return e.dom().childNodes.length},S=o.immutable("element","offset");return{owner:c,defaultView:l,documentElement:s,parent:f,findIndex:d,parents:p,siblings:m,prevSibling:h,offsetParent:g,prevSiblings:y,nextSibling:v,nextSiblings:b,children:x,child:w,firstChild:C,lastChild:k,childNodesCount:T,leaf:function(e,t){var n=x(e);return n.length>0&&t<n.length?S(n[t],0):S(e,t)}}}),i("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var t=function(t,n){e.parent(t).each(function(e){e.dom().insertBefore(n.dom(),t.dom())})},n=function(n,r){e.nextSibling(n).fold(function(){e.parent(n).each(function(e){o(e,r)})},function(e){t(e,r)})},r=function(t,n){e.firstChild(t).fold(function(){o(t,n)},function(e){t.dom().insertBefore(n.dom(),e.dom())})},o=function(e,t){e.dom().appendChild(t.dom())};return{before:t,after:n,prepend:r,append:o,appendAt:function(n,r,i){e.child(n,i).fold(function(){o(n,r)},function(e){t(e,r)})},wrap:function(e,n){t(e,n),o(n,e)}}}),i("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,t){return{before:function(n,r){e.each(r,function(e){t.before(n,e)})},after:function(n,r){e.each(r,function(e,o){var i=0===o?n:r[o-1];t.after(i,e)})},prepend:function(n,r){e.each(r.slice().reverse(),function(e){t.prepend(n,e)})},append:function(n,r){e.each(r,function(e){t.append(n,e)})}}}),i("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(t){t.dom().textContent="",e.each(n.children(t),function(e){o(e)})},o=function(e){var t=e.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(e){var r=n.children(e);r.length>0&&t.before(e,r),o(e)}}}),i("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var t=function(e){return e.dom().nodeName.toLowerCase()},n=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(t){return n(t)===e}},i=function(r){return n(r)===e.COMMENT||"#comment"===t(r)},a=o(e.ELEMENT),u=o(e.TEXT),c=o(e.DOCUMENT);return{name:t,type:n,value:r,isElement:a,isText:u,isDocument:c,isComment:i}}),i("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,t,n){return function(r,o){var i=function(e){if(!r(e))throw new n("Can only get "+o+" value of a "+o+" node");return s(e).getOr("")},a=function(e){try{return u(e)}catch(e){return t.none()}},u=function(e){return r(e)?t.from(e.dom().nodeValue):t.none()},c=e.detect().browser,s=c.isIE()&&10===c.version.major?a:u;return{get:i,getOption:s,set:function(e,t){if(!r(e))throw new n("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=t}}}}),i("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,t){var n=t(e.isText,"text");return{get:function(e){return n.get(e)},getOption:function(e){return n.getOption(e)},set:function(e,t){n.set(e,t)}}}),i("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,t,n,r){var o=function(e){var t=n.isText(e)?e.dom().parentNode:e.dom();return t!==undefined&&null!==t&&t.ownerDocument.body.contains(t)},i=e.cached(function(){return a(t.fromDom(r))}),a=function(e){var n=e.dom().body;if(null===n||n===undefined)throw"Body is not available yet";return t.fromDom(n)};return{body:i,getBody:a,inBody:o}}),i("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return u(t.body(),e)},o=function(t,r,o){return e.filter(n.parents(t,o),r)},i=function(t,r){return e.filter(n.siblings(t),r)},a=function(t,r){return e.filter(n.children(t),r)},u=function(t,r){var o=[];return e.each(n.children(t),function(e){r(e)&&(o=o.concat([e])),o=o.concat(u(e,r))}),o};return{all:r,ancestors:o,siblings:i,children:a,descendants:u}}),i("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,t){return{all:function(e){return t.all(e)},ancestors:function(n,r,o){return e.ancestors(n,function(e){return t.is(e,r)},o)},siblings:function(n,r){return e.siblings(n,function(e){return t.is(e,r)})},children:function(n,r){return e.children(n,function(e){return t.is(e,r)})},descendants:function(e,n){return t.all(n,e)}}}),i("tinymce.core.dom.ElementType",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.node.Node"],function(e,t,n){var r=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],o=["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"],i=["td","th"],a=["thead","tbody","tfoot"],u=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],c=["h1","h2","h3","h4","h5","h6"],s=["li","dd","dt"],l=["ul","ol","dl"],f=function(r){var o;return function(i){return o=o||e.mapToObject(r,t.constant(!0)),o.hasOwnProperty(n.name(i))}},d=f(c),p=f(r),m=function(e){return n.isElement(e)&&!p(e)},g=function(e){return n.isElement(e)&&"br"===n.name(e)};return{isBlock:p,isInline:m,isHeading:d,isTextBlock:f(u),isList:f(l),isListItem:f(s),isVoid:f(o),isTableSection:f(a),isTableCell:f(i),isBr:g}}),i("tinymce.core.dom.PaddingBr",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType"],function(e,t,n,r,o,i,a,u,c){var s=function(e){for(var t=[],n=e.dom();n;)t.push(r.fromDom(n)),n=n.lastChild;return t},l=function(e){return o.isText(e)?"\xa0"===i.get(e):c.isBr(e)};return{removeTrailingBr:function(t){var r=a.descendants(t,"br"),o=e.filter(s(t).slice(-1),c.isBr);r.length===o.length&&e.each(o,n.remove)},fillWithPaddingBr:function(e){n.empty(e),t.append(e,r.fromHtml('<br data-mce-bogus="1">'))},isPaddedElement:function(t){return 1===e.filter(u.children(t),l).length},trimBlockTrailingBr:function(e){u.lastChild(e).each(function(t){u.prevSibling(t).each(function(r){c.isBlock(e)&&c.isBr(t)&&c.isBlock(r)&&n.remove(t)})})}}}),i("tinymce.core.fmt.FormatUtils",["tinymce.core.dom.TreeWalker"],function(e){var t=function(e){return e&&/^(IMG)$/.test(e.nodeName)},n=function(n,r,o){var i,u,c,s=o.startContainer,l=o.startOffset;if((o.startContainer!==o.endContainer||!t(o.startContainer.childNodes[o.startOffset]))&&(3===s.nodeType&&l>=s.nodeValue.length&&(l=n.nodeIndex(s),s=s.parentNode),1===s.nodeType))for(c=s.childNodes,l<c.length?(s=c[l],i=new e(s,n.getParent(s,n.isBlock))):(s=c[c.length-1],i=new e(s,n.getParent(s,n.isBlock)),i.next(!0)),u=i.current();u;u=i.next())if(3===u.nodeType&&!a(u))return o.setStart(u,0),void r.setRng(o)},r=function(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1===e.nodeType||!a(e))return e},o=function(e,t){return t.nodeType&&(t=t.nodeName),!!e.schema.getTextBlockElements()[t.toLowerCase()]},i=function(e,t,n){return e.schema.isValidChild(t,n)},a=function(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)},u=function(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e},c=function(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},s=function(e,t,n){return"color"!==n&&"backgroundColor"!==n||(t=e.toHex(t)),"fontWeight"===n&&700===t&&(t="bold"),"fontFamily"===n&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t};return{isInlineBlock:t,moveStart:n,getNonWhiteSpaceSibling:r,isTextBlock:o,isValid:i,isWhiteSpaceNode:a,replaceVars:u,isEq:c,normalizeStyleValue:s,getStyle:function(e,t,n){return s(e,e.getStyle(t,n),n)},getTextDecoration:function(e,t){var n;return e.getParent(t,function(t){return(n=e.getStyle(t,"text-decoration"))&&"none"!==n}),n},getParents:function(e,t,n){return e.getParents(t,n,e.getRoot())}}}),i("tinymce.core.fmt.ExpandRange",["tinymce.core.dom.BookmarkManager","tinymce.core.dom.TreeWalker","tinymce.core.fmt.FormatUtils"],function(e,t,n){var r=e.isBookmarkNode,o=n.getParents,i=n.isWhiteSpaceNode,a=n.isTextBlock,u=function(e,t){for(void 0===t&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}},c=function(e,t){var n=u(e,t);if(n.node){for(;n.node&&0===n.offset&&n.node.previousSibling;)n=u(n.node.previousSibling);n.node&&n.offset>0&&3===n.node.nodeType&&" "===n.node.nodeValue.charAt(n.offset-1)&&n.offset>1&&(e=n.node,e.splitText(n.offset-1))}return e},s=function(e){return"BR"===e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling};return{expandRng:function(e,u,l,f){var d,p,m=u.startContainer,g=u.startOffset,h=u.endContainer,v=u.endOffset,y=e.dom,b=function(e){var t,n,o,a,u;if(t=n=e?m:h,a=e?"previousSibling":"nextSibling",u=y.getRoot(),3===t.nodeType&&!i(t)&&(e?g>0:v<t.nodeValue.length))return t;for(;;){if(!l[0].block_expand&&y.isBlock(n))return n;for(o=n[a];o;o=o[a])if(!r(o)&&!i(o)&&!s(o))return n;if(n===u||n.parentNode===u){t=n;break}n=n.parentNode}return t};1===m.nodeType&&m.hasChildNodes()&&(d=m.childNodes.length-1,m=m.childNodes[g>d?d:g],3===m.nodeType&&(g=0)),1===h.nodeType&&h.hasChildNodes()&&(d=h.childNodes.length-1,h=h.childNodes[v>d?d:v-1],3===h.nodeType&&(v=h.nodeValue.length));var x=function(e){for(var t=e;t;){if(1===t.nodeType&&y.getContentEditable(t))return"false"===y.getContentEditable(t)?t:e;t=t.parentNode}return e},w=function(n,r,o){var i,a,u,c,s=function(e,t){var n,r,i=e.nodeValue;return void 0===t&&(t=o?i.length:0),o?(n=i.lastIndexOf(" ",t),r=i.lastIndexOf("\xa0",t),-1===(n=n>r?n:r)||f||n++):(n=i.indexOf(" ",t),r=i.indexOf("\xa0",t),n=-1!==n&&(-1===r||n<r)?n:r),n};if(3===n.nodeType){if(-1!==(u=s(n,r)))return{container:n,offset:u};c=n}for(i=new t(n,y.getParent(n,y.isBlock)||e.getBody());a=i[o?"prev":"next"]();)if(3===a.nodeType){if(c=a,-1!==(u=s(a)))return{container:a,offset:u}}else if(y.isBlock(a))break;if(c)return r=o?0:c.length,{container:c,offset:r}},C=function(e,t){var n,r,i,a;for(3===e.nodeType&&0===e.nodeValue.length&&e[t]&&(e=e[t]),n=o(y,e),r=0;r<n.length;r++)for(i=0;i<l.length;i++)if(!("collapsed"in(a=l[i])&&a.collapsed!==u.collapsed)&&y.is(n[r],a.selector))return n[r];return e},k=function(t,r){var i,u=y.getRoot();if(l[0].wrapper||(i=y.getParent(t,l[0].block,u)),!i){var c=y.getParent(t,"LI,TD,TH");i=y.getParent(3===t.nodeType?t.parentNode:t,function(t){return t!==u&&a(e,t)},c)}if(i&&l[0].wrapper&&(i=o(y,i,"ul,ol").reverse()[0]||i),!i)for(i=t;i[r]&&!y.isBlock(i[r])&&(i=i[r],!n.isEq(i,"br")););return i||t};return m=x(m),h=x(h),(r(m.parentNode)||r(m))&&(m=r(m)?m:m.parentNode,m=m.nextSibling||m,3===m.nodeType&&(g=0)),(r(h.parentNode)||r(h))&&(h=r(h)?h:h.parentNode,h=h.previousSibling||h,3===h.nodeType&&(v=h.length)),l[0].inline&&(u.collapsed&&(p=w(m,g,!0),p&&(m=p.container,g=p.offset),(p=w(h,v))&&(h=p.container,v=p.offset)),h=f?h:c(h,v)),(l[0].inline||l[0].block_expand)&&(l[0].inline&&3===m.nodeType&&0!==g||(m=b(!0)),l[0].inline&&3===h.nodeType&&v!==h.nodeValue.length||(h=b())),l[0].selector&&!1!==l[0].expand&&!l[0].inline&&(m=C(m,"previousSibling"),h=C(h,"nextSibling")),(l[0].block||l[0].selector)&&(m=k(m,"previousSibling"),h=k(h,"nextSibling"),l[0].block&&(y.isBlock(m)||(m=b(!0)),y.isBlock(h)||(h=b()))),1===m.nodeType&&(g=y.nodeIndex(m),m=m.parentNode),1===h.nodeType&&(v=y.nodeIndex(h)+1,h=h.parentNode),{startContainer:m,startOffset:g,endContainer:h,endOffset:v}}}}),i("tinymce.core.fmt.MatchFormat",["tinymce.core.fmt.FormatUtils"],function(e){var t=e.isEq,n=function(e,t,n){var r=e.formatter.get(n);if(r)for(var o=0;o<r.length;o++)if(!1===r[o].inherit&&e.dom.is(t,r[o].selector))return!0;return!1},r=function(e,t,r,o){var i=e.dom.getRoot();return t!==i&&(t=e.dom.getParent(t,function(t){return!!n(e,t,r)||(t.parentNode===i||!!a(e,t,r,o,!0))}),a(e,t,r,o))},o=function(e,n,r){return!!t(n,r.inline)||(!!t(n,r.block)||(r.selector?1===n.nodeType&&e.is(n,r.selector):void 0))},i=function(n,r,o,i,a,u){var c,s,l,f=o[i];if(o.onmatch)return o.onmatch(r,o,i);if(f)if("undefined"==typeof f.length){for(c in f)if(f.hasOwnProperty(c)){if(s="attributes"===i?n.getAttrib(r,c):e.getStyle(n,r,c),a&&!s&&!o.exact)return;if((!a||o.exact)&&!t(s,e.normalizeStyleValue(n,e.replaceVars(f[c],u),c)))return}}else for(l=0;l<f.length;l++)if("attributes"===i?n.getAttrib(r,f[l]):e.getStyle(n,r,f[l]))return o;return o},a=function(e,t,n,r,a){var u,c,s,l,f=e.formatter.get(n),d=e.dom;if(f&&t)for(c=0;c<f.length;c++)if(u=f[c],o(e.dom,t,u)&&i(d,t,u,"attributes",a,r)&&i(d,t,u,"styles",a,r)){if(l=u.classes)for(s=0;s<l.length;s++)if(!e.dom.hasClass(t,l[s]))return;return u}};return{matchNode:a,matchName:o,match:function(e,t,n,o){var i;return o?r(e,o,t,n):(o=e.selection.getNode(),!!r(e,o,t,n)||!((i=e.selection.getStart())===o||!r(e,i,t,n)))},matchAll:function(e,t,n){var r,o=[],i={};return r=e.selection.getStart(),e.dom.getParent(r,function(r){var u,c;for(u=0;u<t.length;u++)c=t[u],!i[c]&&a(e,r,c,n)&&(i[c]=!0,o.push(c))},e.dom.getRoot()),o},canApply:function(t,n){var r,o,i,a,u,c=t.formatter.get(n),s=t.dom;if(c)for(r=t.selection.getStart(),o=e.getParents(s,r),a=c.length-1;a>=0;a--){if(!(u=c[a].selector)||c[a].defaultBlock)return!0;for(i=o.length-1;i>=0;i--)if(s.is(o[i],u))return!0}return!1},matchesUnInheritedFormatSelector:n}}),i("tinymce.core.fmt.CaretFormat",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.dom.PaddingBr","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.text.Zwsp","tinymce.core.util.Fun","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l){var f=c.ZWSP,d="_mce_caret",p=!1,m=function(e){return 1===e.nodeType&&e.id===d},g=function(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==f||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0},h=function(e){var t;if(e)for(t=new o(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e;return null},v=function(e,t){var n=e.create("span",{id:d,"data-mce-bogus":"1",style:p?"color:red":""});return t&&n.appendChild(e.doc.createTextNode(f)),n},y=function(e){for(;e;){if(e.id===d)return e;e=e.parentNode}},b=function(e,t){var n;(n=y(t.getStart()))&&!e.isEmpty(n)&&l.walk(n,function(t){1!==t.nodeType||t.id===d||e.isEmpty(t)||e.setAttrib(t,"data-mce-bogus",null)},"childNodes")},x=function(e){var t=h(e);return t&&t.nodeValue.charAt(0)===f&&t.deleteData(0,1),t},w=function(e,r,o,i){var a,u,c;a=r.getRng(!0),u=e.getParent(o,e.isBlock),g(o)?(!1!==i&&(a.setStartBefore(o),a.setEndBefore(o)),e.remove(o)):(c=x(o),a.startContainer===c&&a.startOffset>0&&a.setStart(c,a.startOffset-1),a.endContainer===c&&a.endOffset>0&&a.setEnd(c,a.endOffset-1),e.remove(o,!0)),u&&e.isEmpty(u)&&n.fillWithPaddingBr(t.fromDom(u)),r.setRng(a)},C=function(e,t,n,r){if(n)w(e,t,n,r);else if(!(n=y(t.getStart())))for(;n=e.get(d);)w(e,t,n,!1)},k=function(e,r,o){var i=e.dom,u=i.getParent(o,s.curry(a.isTextBlock,e));u&&i.isEmpty(u)?o.parentNode.replaceChild(r,o):(n.removeTrailingBr(t.fromDom(o)),i.isEmpty(o)?o.parentNode.replaceChild(r,o):i.insertAfter(r,o))},T=function(e,t){return e.appendChild(t),t},S=function(t,n){var r=e.foldr(t,function(e,t){return T(e,t.cloneNode(!1))},n);return T(r,r.ownerDocument.createTextNode(f))},E=function(e){e._hasCaretEvents||(_(e),e._hasCaretEvents=!0)},_=function(e){var t=e.dom,n=e.selection;if(!e._hasCaretEvents){var r,o;e.on("BeforeGetContent",function(e){r&&"raw"!==e.format&&r()}),e.on("mouseup keydown",function(e){o&&o(e)}),r=function(){var e,r=[];if(g(y(n.getStart()),r))for(e=r.length;e--;)t.setAttrib(r[e],"data-mce-bogus","1")},o=function(e){var r=e.keyCode;C(t,n,null,!1),8===r&&n.isCollapsed()&&n.getStart().innerHTML===f&&C(t,n,y(n.getStart())),37!==r&&39!==r||C(t,n,y(n.getStart())),b(t,n)},e.on("SetContent",function(e){e.selection&&b(t,n)}),e._hasCaretEvents=!0}};return{applyCaretFormat:function(e,t,n){var o,a,u,c,s,l,d,p=e.dom,m=e.selection;E(e),o=m.getRng(!0),c=o.startOffset,l=o.startContainer,d=l.nodeValue,(a=y(m.getStart()))&&(u=h(a));var g=/[^\s\u00a0\u00ad\u200b\ufeff]/;d&&c>0&&c<d.length&&g.test(d.charAt(c))&&g.test(d.charAt(c-1))?(s=m.getBookmark(),o.collapse(!0),o=i.expandRng(e,o,e.formatter.get(t)),o=new r(p).split(o),e.formatter.apply(t,n,o),m.moveToBookmark(s)):(a&&u.nodeValue===f?e.formatter.apply(t,n,a):(a=v(p,!0),u=a.firstChild,o.insertNode(a),c=1,e.formatter.apply(t,n,a)),m.setCursorLocation(u,c))},removeCaretFormat:function(e,t,n,o){var a,c,s,l,f,d,p,m=e.dom,g=e.selection,h=g.getRng(!0),b=[];for(E(e),a=h.startContainer,c=h.startOffset,f=a,3===a.nodeType&&(c!==a.nodeValue.length&&(l=!0),f=f.parentNode);f;){if(u.matchNode(e,f,t,n,o)){d=f;break}f.nextSibling&&(l=!0),b.push(f),f=f.parentNode}if(d)if(l)s=g.getBookmark(),h.collapse(!0),h=i.expandRng(e,h,e.formatter.get(t),!0),h=new r(m).split(h),e.formatter.remove(t,n,h),g.moveToBookmark(s);else{p=y(d);var x=v(m,!1),C=S(b,x);p?k(e,x,p):k(e,x,d),w(m,g,p,!1),g.setCursorLocation(C,1),m.isEmpty(d)&&m.remove(d)}},isCaretNode:m}}),i("tinymce.core.fmt.Hooks",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.DomQuery"],function(e,t,n){var r={},o=e.filter,i=e.each,a=function(e,t){var n=r[e];n||(r[e]=n=[]),r[e].push(t)},u=function(e,t){i(r[e],function(e){e(t)})};return a("pre",function(r){var a,u,c=r.selection.getRng(),s=function(t){return a(t.previousSibling)&&-1!==e.indexOf(u,t.previousSibling)},l=function(e,t){n(t).remove(),n(e).append("<br><br>").append(t.childNodes)};a=t.matchNodeNames("pre"),c.collapsed||(u=r.selection.getSelectedBlocks(),i(o(o(u,a),s),function(e){l(e.previousSibling,e)}))}),{postProcess:u}}),i("tinymce.core.dom.ElementUtils",["tinymce.core.dom.BookmarkManager","tinymce.core.util.Tools"],function(e,t){var n=t.each;return function(t){this.compare=function(r,o){if(r.nodeName!=o.nodeName)return!1;var i=function(e){var r={};return n(t.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&0!==o.indexOf("data-")&&(r[o]=t.getAttrib(e,o))}),r},a=function(e,t){var n,r;for(r in e)if(e.hasOwnProperty(r)){if(void 0===(n=t[r]))return!1;if(e[r]!=n)return!1;delete t[r]}for(r in t)if(t.hasOwnProperty(r))return!1;return!0};return!!a(i(r),i(o))&&(!!a(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(o,"style")))&&(!e.isBookmarkNode(r)&&!e.isBookmarkNode(o)))}}}),i("tinymce.core.fmt.RemoveFormat",["ephox.katamari.api.Fun","tinymce.core.dom.BookmarkManager","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c){var s=/^(src|href|style)$/,l=c.each,f=a.isEq,d=function(e){return/^(TH|TD)$/.test(e.nodeName)},p=function(e,t,n){var o,i,a;return o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],1===o.nodeType&&(a=o.childNodes.length-1,!n&&i&&i--,o=o.childNodes[i>a?a:i]),3===o.nodeType&&n&&i>=o.nodeValue.length&&(o=new r(o,e.getBody()).next()||o),3!==o.nodeType||n||0!==i||(o=new r(o,e.getBody()).prev()||o),o},m=function(e,t,n,r){var o=e.create(n,r);return t.parentNode.insertBefore(o,t),o.appendChild(t),o},g=function(e,t,n){return!!f(t,n.inline)||(!!f(t,n.block)||(n.selector?1===t.nodeType&&e.is(t,n.selector):void 0))},h=function(e,t){return t.links&&"A"===e.tagName},v=function(e,t,n,r){return!(t=a.getNonWhiteSpaceSibling(t,n,r))||"BR"===t.nodeName||e.isBlock(t)},y=function(e,t,n){var r,o=t.parentNode,i=e.dom,u=e.settings.forced_root_block;n.block&&(u?o===i.getRoot()&&(n.list_block&&f(t,n.list_block)||l(c.grep(t.childNodes),function(t){a.isValid(e,u,t.nodeName.toLowerCase())?r?r.appendChild(t):(r=m(i,t,u),i.setAttribs(r,e.settings.forced_root_block_attrs)):r=0})):i.isBlock(t)&&!i.isBlock(o)&&(v(i,t,!1)||v(i,t.firstChild,!0,1)||t.insertBefore(i.create("br"),t.firstChild),v(i,t,!0)||v(i,t.lastChild,!1,1)||t.appendChild(i.create("br")))),n.selector&&n.inline&&!f(n.inline,t)||i.remove(t,1)},b=function(e,t,n,r,o){var i,u,c,d=e.dom;if(!g(d,r,t)&&!h(r,t))return!1;if("all"!==t.remove)for(l(t.styles,function(e,i){e=a.normalizeStyleValue(d,a.replaceVars(e,n),i),"number"==typeof i&&(i=e,o=0),(t.remove_similar||!o||f(a.getStyle(d,o,i),e))&&d.setStyle(r,i,""),c=1}),c&&""===d.getAttrib(r,"style")&&(r.removeAttribute("style"),r.removeAttribute("data-mce-style")),l(t.attributes,function(e,t){var i;if(e=a.replaceVars(e,n),"number"==typeof t&&(t=e,o=0),!o||f(d.getAttrib(o,t),e)){if("class"===t&&(e=d.getAttrib(r,t))&&(i="",l(e.split(/\s+/),function(e){/mce\-\w+/.test(e)&&(i+=(i?" ":"")+e)}),i))return void d.setAttrib(r,t,i);"class"===t&&r.removeAttribute("className"),s.test(t)&&r.removeAttribute("data-mce-"+t),r.removeAttribute(t)}}),l(t.classes,function(e){e=a.replaceVars(e,n),o&&!d.hasClass(o,e)||d.removeClass(r,e)}),u=d.getAttribs(r),i=0;i<u.length;i++){var p=u[i].nodeName;if(0!==p.indexOf("_")&&0!==p.indexOf("data-"))return!1}return"none"!==t.remove?(y(e,r,t),!0):void 0},x=function(e,t,n,r,o){var i;return l(a.getParents(e.dom,t.parentNode).reverse(),function(t){var a;i||"_start"===t.id||"_end"===t.id||(a=u.matchNode(e,t,n,r,o))&&!1!==a.split&&(i=t)}),i},w=function(e,t,n,r,o,i,a,u){var c,s,l,f,d,p,m=e.dom;if(n){for(p=n.parentNode,c=r.parentNode;c&&c!==p;c=c.parentNode){for(s=m.clone(c,!1),d=0;d<t.length;d++)if(b(e,t[d],u,s,s)){s=0;break}s&&(l&&s.appendChild(l),f||(f=s),l=s)}!i||a.mixed&&m.isBlock(n)||(r=m.split(n,r)),l&&(o.parentNode.insertBefore(l,o),f.appendChild(o))}return r};return{removeFormat:b,remove:function(e,r,s,f,g){var h,v,y=e.formatter.get(r),C=y[0],k=!0,T=e.dom,S=e.selection,E=function(t){var n=x(e,t,r,s,g);return w(e,y,n,t,t,!0,C,s)},_=function(t){var n,r,o,i,a;if(1===t.nodeType&&T.getContentEditable(t)&&(i=k,k="true"===T.getContentEditable(t),a=!0),n=c.grep(t.childNodes),k&&!a)for(r=0,o=y.length;r<o&&!b(e,y[r],s,t,t);r++);if(C.deep&&n.length){for(r=0,o=n.length;r<o;r++)_(n[r]);a&&(k=i)}},A=function(e){var n=T.get(e?"_start":"_end"),r=n[e?"firstChild":"lastChild"];return t.isBookmarkNode(r)&&(r=r[e?"firstChild":"lastChild"]),3===r.nodeType&&0===r.data.length&&(r=e?n.previousSibling||n.nextSibling:n.nextSibling||n.previousSibling),T.remove(n,!0),r},N=function(t){var r,o,u=t.commonAncestorContainer;if(t=i.expandRng(e,t,y,!0),C.split){if(r=p(e,t,!0),o=p(e,t),r!==o){if(/^(TR|TH|TD)$/.test(r.nodeName)&&r.firstChild&&(r="TR"===r.nodeName?r.firstChild.firstChild||r:r.firstChild||r),u&&/^T(HEAD|BODY|FOOT|R)$/.test(u.nodeName)&&d(o)&&o.firstChild&&(o=o.firstChild||o),T.isChildOf(r,o)&&!T.isBlock(o)&&!d(r)&&!d(o))return r=m(T,r,"span",{id:"_start","data-mce-type":"bookmark"}),E(r),void(r=A(!0));r=m(T,r,"span",{id:"_start","data-mce-type":"bookmark"}),o=m(T,o,"span",{id:"_end","data-mce-type":"bookmark"}),E(r),E(o),r=A(!0),o=A()}else r=o=E(r);t.startContainer=r.parentNode?r.parentNode:r,t.startOffset=T.nodeIndex(r),t.endContainer=o.parentNode?o.parentNode:o,t.endOffset=T.nodeIndex(o)+1}new n(T).walk(t,function(t){l(t,function(t){_(t),1===t.nodeType&&"underline"===e.dom.getStyle(t,"text-decoration")&&t.parentNode&&"underline"===a.getTextDecoration(T,t.parentNode)&&b(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,t)})})};if(f)return void(f.nodeType?(v=T.createRng(),v.setStartBefore(f),v.setEndAfter(f),N(v)):N(f))
;if("false"!==T.getContentEditable(S.getNode()))S.isCollapsed()&&C.inline&&!T.select("td[data-mce-selected],th[data-mce-selected]").length?o.removeCaretFormat(e,r,s,g):(h=S.getBookmark(),N(S.getRng(!0)),S.moveToBookmark(h),C.inline&&u.match(e,r,s,S.getStart())&&a.moveStart(T,S,S.getRng(!0)),e.nodeChanged());else{f=S.getNode();for(var D=0,R=y.length;D<R&&(!y[D].ceFalseOverride||!b(e,y[D],s,f,f));D++);}}}}),i("tinymce.core.fmt.MergeFormats",["ephox.katamari.api.Fun","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c){var s=c.each,l=function(e){return e&&1===e.nodeType&&!t.isBookmarkNode(e)&&!o.isCaretNode(e)&&!r.isBogus(e)},f=function(e,n){var r;for(r=e;r;r=r[n]){if(3===r.nodeType&&0!==r.nodeValue.length)return e;if(1===r.nodeType&&!t.isBookmarkNode(r))return r}return e},d=function(e,t,r){var o,i,a=new n(e);if(t&&r&&(t=f(t,"previousSibling"),r=f(r,"nextSibling"),a.compare(t,r))){for(o=t.nextSibling;o&&o!==r;)i=o,o=o.nextSibling,t.appendChild(i);return e.remove(r),c.each(c.grep(r.childNodes),function(e){t.appendChild(e)}),t}return r},p=function(e,t,n){s(e.childNodes,function(e){l(e)&&(t(e)&&n(e),e.hasChildNodes()&&p(e,t,n))})},m=function(t,n){return e.curry(function(e,n){return!(!n||!i.getStyle(t,n,e))},n)},g=function(t,n,r){return e.curry(function(e,n,r){t.setStyle(r,e,n),""===r.getAttribute("style")&&r.removeAttribute("style"),h(t,r)},n,r)},h=function(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)},v=function(e,t){var n;1===t.nodeType&&t.parentNode&&1===t.parentNode.nodeType&&(n=i.getTextDecoration(e,t.parentNode),e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null))},y=function(t,n,r,o){(n.styles.color||n.styles.textDecoration)&&(c.walk(o,e.curry(v,t),"childNodes"),v(t,o))},b=function(e,t,n,r){t.styles&&t.styles.backgroundColor&&p(r,m(e,"fontSize"),g(e,"backgroundColor",i.replaceVars(t.styles.backgroundColor,n)))},x=function(e,t,n,r){"sub"!==t.inline&&"sup"!==t.inline||(p(r,m(e,"fontSize"),g(e,"fontSize","")),e.remove(e.select("sup"===t.inline?"sub":"sup",r),!0))},w=function(e,t,n,r){r&&!1!==t.merge_siblings&&(r=d(e,i.getNonWhiteSpaceSibling(r),r),r=d(e,r,i.getNonWhiteSpaceSibling(r,!0)))},C=function(e,t,n){if(t.clear_child_styles){var r=t.links?"*:not(a)":"*";s(e.select(r,n),function(n){l(n)&&s(t.styles,function(t,r){e.setStyle(n,r,"")})})}};return{mergeWithChildren:function(e,t,n,r){s(t,function(t){s(e.dom.select(t.inline,r),function(r){l(r)&&u.removeFormat(e,t,n,r,t.exact?r:null)}),C(e.dom,t,r)})},mergeUnderlineAndColor:y,mergeBackgroundColorAndFontSize:b,mergeSubSup:x,mergeSiblings:w,mergeWithParents:function(e,t,n,r,o){a.matchNode(e,o.parentNode,n,r)&&u.removeFormat(e,t,r,o)||t.merge_with_parents&&e.dom.getParent(o.parentNode,function(i){if(a.matchNode(e,i,n,r))return u.removeFormat(e,t,r,o),!0})}}}),i("tinymce.core.fmt.ApplyFormat",["tinymce.core.dom.BookmarkManager","tinymce.core.dom.NodeType","tinymce.core.dom.RangeNormalizer","tinymce.core.dom.RangeUtils","tinymce.core.fmt.CaretFormat","tinymce.core.fmt.ExpandRange","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.Hooks","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.MergeFormats","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l){var f=l.each,d=function(n){return n&&1===n.nodeType&&!e.isBookmarkNode(n)&&!o.isCaretNode(n)&&!t.isBogus(n)},p=function(t,m,g,h){var v,y,b=t.formatter.get(m),x=b[0],w=!h&&t.selection.isCollapsed(),C=t.dom,k=t.selection,T=function(e,t){if(t=t||x,e){if(t.onformat&&t.onformat(e,t,g,h),f(t.styles,function(t,n){C.setStyle(e,n,a.replaceVars(t,g))}),t.styles){var n=C.getAttrib(e,"style");n&&e.setAttribute("data-mce-style",n)}f(t.attributes,function(t,n){C.setAttrib(e,n,a.replaceVars(t,g))}),f(t.classes,function(t){t=a.replaceVars(t,g),C.hasClass(e,t)||C.addClass(e,t)})}},S=function(e,t){var n=!1;return!!x.selector&&(f(e,function(e){if(!("collapsed"in e&&e.collapsed!==w))return C.is(t,e.selector)&&!o.isCaretNode(t)?(T(t,e),n=!0,!1):void 0}),n)},E=function(n,i,u,p){var h,v,y=[],w=!0;h=x.inline||x.block,v=n.create(h),T(v),new r(n).walk(i,function(e){var r,i=function(e){var u,s,d,C;if(C=w,u=e.nodeName.toLowerCase(),s=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&n.getContentEditable(e)&&(C=w,w="true"===n.getContentEditable(e),d=!0),a.isEq(u,"br"))return r=0,void(x.block&&n.remove(e));if(x.wrapper&&c.matchNode(t,e,m,g))return void(r=0);if(w&&!d&&x.block&&!x.wrapper&&a.isTextBlock(t,u)&&a.isValid(t,s,h))return e=n.rename(e,h),T(e),y.push(e),void(r=0);if(x.selector){var k=S(b,e);if(!x.inline||k)return void(r=0)}!w||d||!a.isValid(t,h,u)||!a.isValid(t,s,h)||!p&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||o.isCaretNode(e)||x.inline&&n.isBlock(e)?(r=0,f(l.grep(e.childNodes),i),d&&(w=C),r=0):(r||(r=n.clone(v,!1),e.parentNode.insertBefore(r,e),y.push(r)),r.appendChild(e))};f(e,i)}),!0===x.links&&f(y,function(e){var t=function(e){"A"===e.nodeName&&T(e,x),f(l.grep(e.childNodes),t)};t(e)}),f(y,function(r){var o,i=function(t){var n=0;return f(t.childNodes,function(t){a.isWhiteSpaceNode(t)||e.isBookmarkNode(t)||n++}),n},u=function(e){var t=!1;return f(e.childNodes,function(e){if(d(e))return t=e,!1}),t},l=function(t){var r,o;return r=u(t),r&&!e.isBookmarkNode(r)&&c.matchName(n,r,x)&&(o=n.clone(r,!1),T(o),n.replace(o,t,!0),n.remove(r,1)),o||t};if(o=i(r),(y.length>1||!n.isBlock(r))&&0===o)return void n.remove(r,1);(x.inline||x.wrapper)&&(x.exact||1!==o||(r=l(r)),s.mergeWithChildren(t,b,g,r),s.mergeWithParents(t,x,m,g,r),s.mergeBackgroundColorAndFontSize(n,x,g,r),s.mergeSubSup(n,x,g,r),s.mergeSiblings(n,x,g,r))})};if("false"!==C.getContentEditable(k.getNode())){if(x){if(h)h.nodeType?S(b,h)||(y=C.createRng(),y.setStartBefore(h),y.setEndAfter(h),E(C,i.expandRng(t,y,b),null,!0)):E(C,h,null,!0);else if(w&&x.inline&&!C.select("td[data-mce-selected],th[data-mce-selected]").length)o.applyCaretFormat(t,m,g);else{var _=t.selection.getNode();t.settings.forced_root_block||!b[0].defaultBlock||C.getParent(_,C.isBlock)||p(t,b[0].defaultBlock),t.selection.setRng(n.normalize(t.selection.getRng())),v=k.getBookmark(),E(C,i.expandRng(t,k.getRng(!0),b),v),x.styles&&s.mergeUnderlineAndColor(C,x,g,_),k.moveToBookmark(v),a.moveStart(C,k,k.getRng(!0)),t.nodeChanged()}u.postProcess(m,t)}}else{h=k.getNode();for(var A=0,N=b.length;A<N;A++)if(b[A].ceFalseOverride&&C.is(h,b[A].selector))return void T(h,b[A])}};return{applyFormat:p}}),i("tinymce.core.fmt.FormatChanged",["ephox.katamari.api.Cell","tinymce.core.fmt.FormatUtils","tinymce.core.fmt.MatchFormat","tinymce.core.util.Tools"],function(e,t,n,r){var o=r.each,i=function(e,i){var a={};e.set({}),i.on("NodeChange",function(u){var c=t.getParents(i.dom,u.element),s={};c=r.grep(c,function(e){return 1===e.nodeType&&!e.getAttribute("data-mce-bogus")}),o(e.get(),function(e,t){o(c,function(r){return i.formatter.matchNode(r,t,{},e.similar)?(a[t]||(o(e,function(e){e(!0,{node:r,format:t,parents:c})}),a[t]=e),s[t]=e,!1):!n.matchesUnInheritedFormatSelector(i,r,t)&&void 0})}),o(a,function(e,t){s[t]||(delete a[t],o(e,function(e){e(!1,{node:u.element,format:t,parents:c})}))})})},a=function(e,t,n,r){var i=e.get();o(t.split(","),function(e){i[e]||(i[e]=[],i[e].similar=r),i[e].push(n)}),e.set(i)};return{formatChanged:function(e,t,n,r,o){null===t.get()&&i(t,e),a(t,n,r,o)}}}),i("tinymce.core.fmt.DefaultFormats",["tinymce.core.util.Tools"],function(e){return{get:function(t){var n={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(n,r,o){e.each(o,function(e,r){t.setAttrib(n,r,e)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return e.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){n[e]={block:e,remove:"all"}}),n}}}),i("tinymce.core.fmt.FormatRegistry",["tinymce.core.fmt.DefaultFormats","tinymce.core.util.Tools"],function(e,t){return function(n){var r={},o=function(e){return e?r[e]:r},i=function(e,n){e&&("string"!=typeof e?t.each(e,function(e,t){i(t,e)}):(n=n.length?n:[n],t.each(n,function(e){"undefined"==typeof e.deep&&(e.deep=!e.selector),"undefined"==typeof e.split&&(e.split=!e.selector||e.inline),"undefined"==typeof e.remove&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),r[e]=n))},a=function(e){return e&&r[e]&&delete r[e],r};return i(e.get(n.dom)),i(n.settings.formats),{get:o,register:i,unregister:a}}}),i("tinymce.core.fmt.Preview",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools","tinymce.core.html.Schema"],function(e,t,n){var r=t.each,o=e.DOM,i=function(e,r){var i,a,u,c=r&&r.schema||new n({}),s=function(e,t){t.classes.length&&o.addClass(e,t.classes.join(" ")),o.setAttribs(e,t.attrs)},l=function(e){var t;return a="string"==typeof e?{name:e,classes:[],attrs:{}}:e,t=o.create(a.name),s(t,a),t},f=function(e,n){var r="string"!=typeof e?e.nodeName.toLowerCase():e,o=c.getElementRule(r),i=o&&o.parentsRequired;return!(!i||!i.length)&&(n&&-1!==t.inArray(i,n)?n:i[0])},d=function(e,n,r){var i,a,u,c=n.length>0&&n[0],s=c&&c.name;if(u=f(e,s))s===u?(a=n[0],n=n.slice(1)):a=u;else if(c)a=n[0],n=n.slice(1);else if(!r)return e;return a&&(i=l(a),i.appendChild(e)),r&&(i||(i=o.create("div"),i.appendChild(e)),t.each(r,function(t){var n=l(t);i.insertBefore(n,e)})),d(i,n,a&&a.siblings)};return e&&e.length?(a=e[0],i=l(a),u=o.create("div"),u.appendChild(d(i,e.slice(1),a.siblings)),u):""},a=function(e,t){return i(c(e),t)},u=function(e){var n,r={classes:[],attrs:{}};return e=r.selector=t.trim(e),"*"!==e&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(e,n,o,i,a){switch(n){case"#":r.attrs.id=o;break;case".":r.classes.push(o);break;case":":-1!==t.inArray("checked disabled enabled read-only required".split(" "),o)&&(r.attrs[o]=o)}if("["===i){var u=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);u&&(r.attrs[u[1]]=u[2])}return""})),r.name=n||"div",r},c=function(e){return e&&"string"==typeof e?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),t.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),function(e){var n=t.map(e.split(/(?:~\+|~|\+)/),u),r=n.pop();return n.length&&(r.siblings=n),r}).reverse()):[]};return{getCssText:function(e,t){var n,a,u,s,l,f,d="";if(!1===(f=e.settings.preview_styles))return"";"string"!=typeof f&&(f="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var p=function(e){return e.replace(/%(\w+)/g,"")};if("string"==typeof t){if(!(t=e.formatter.get(t)))return;t=t[0]}return"preview"in t&&!1===(f=t.preview)?"":(n=t.block||t.inline||"span",s=c(t.selector),s.length?(s[0].name||(s[0].name=n),n=t.selector,a=i(s,e)):a=i([n],e),u=o.select(n,a)[0]||a.firstChild,r(t.styles,function(e,t){(e=p(e))&&o.setStyle(u,t,e)}),r(t.attributes,function(e,t){(e=p(e))&&o.setAttrib(u,t,e)}),r(t.classes,function(e){e=p(e),o.hasClass(u,e)||o.addClass(u,e)}),e.fire("PreviewFormats"),o.setStyles(a,{position:"absolute",left:-65535}),e.getBody().appendChild(a),l=o.getStyle(e.getBody(),"fontSize",!0),l=/px$/.test(l)?parseInt(l,10):0,r(f.split(" "),function(t){var n=o.getStyle(u,t,!0);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=o.getStyle(e.getBody(),t,!0),"#ffffff"===o.toHex(n).toLowerCase())||"color"===t&&"#000000"===o.toHex(n).toLowerCase())){if("font-size"===t&&/em|%$/.test(n)){if(0===l)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*l+"px"}"border"===t&&n&&(d+="padding:0 2px;"),d+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),o.remove(a),d)},parseSelector:c,selectorToHtml:a}}),i("tinymce.core.fmt.ToggleFormat",["tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.RemoveFormat"],function(e,t,n){return{toggle:function(r,o,i,a,u){var c=o.get(i);!t.match(r,i,a,u)||"toggle"in c[0]&&!c[0].toggle?e.applyFormat(r,i,a,u):n.remove(r,i,a,u)}}}),i("tinymce.core.keyboard.FormatShortcuts",[],function(){return{setup:function(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}}}),i("tinymce.core.api.Formatter",["ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.fmt.ApplyFormat","tinymce.core.fmt.FormatChanged","tinymce.core.fmt.FormatRegistry","tinymce.core.fmt.MatchFormat","tinymce.core.fmt.Preview","tinymce.core.fmt.RemoveFormat","tinymce.core.fmt.ToggleFormat","tinymce.core.keyboard.FormatShortcuts"],function(e,t,n,r,o,i,a,u,c,s){return function(l){var f=o(l),d=e(null);return s.setup(l),{get:f.get,register:f.register,unregister:f.unregister,apply:t.curry(n.applyFormat,l),remove:t.curry(u.remove,l),toggle:t.curry(c.toggle,l,f),match:t.curry(i.match,l),matchAll:t.curry(i.matchAll,l),matchNode:t.curry(i.matchNode,l),canApply:t.curry(i.canApply,l),formatChanged:t.curry(r.formatChanged,l,d),getCssText:t.curry(a.getCssText,l)}}}),i("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,t,n,r,o,i){var a=function(t,n,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",n,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(n,r+"")},u=function(e,t,n){a(e.dom(),t,n)},c=function(e,t){var r=e.dom();n.each(t,function(e,t){a(r,t,e)})},s=function(e,t){var n=e.dom().getAttribute(t);return null===n?undefined:n},l=function(e,t){var n=e.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},f=function(e,t){e.dom().removeAttribute(t)},d=function(e){var t=e.dom().attributes;return t===undefined||null===t||0===t.length},p=function(e,t,n){l(e,n)&&!l(t,n)&&u(t,n,s(e,n))};return{clone:function(e){return t.foldl(e.dom().attributes,function(e,t){return e[t.name]=t.value,e},{})},set:u,setAll:c,get:s,has:l,remove:f,hasNone:d,transfer:function(e,n,o){r.isElement(e)&&r.isElement(n)&&t.each(o,function(t){p(e,n,t)})}}}),i("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return e.style!==undefined}}}),i("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(t,n,r){if(!e.isString(r))throw f.error("Invalid call to CSS.set. Property ",n,":: Value ",r,":: Element ",t),new l("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(n,r)},m=function(e,t){c.isSupported(e)&&e.style.removeProperty(t)},g=function(e,t,n){var r=e.dom();p(r,t,n)},h=function(e,t){var r=e.dom();n.each(t,function(e,t){p(r,t,e)})},v=function(e,t){var r=e.dom();n.each(t,function(e,t){e.fold(function(){m(r,t)},function(e){p(r,t,e)})})},y=function(e,t){var n=e.dom(),r=d.getComputedStyle(n),o=r.getPropertyValue(t),a=""!==o||i.inBody(e)?o:b(n,t);return null===a?undefined:a},b=function(e,t){return c.isSupported(e)?e.style.getPropertyValue(t):""},x=function(e,t){var n=e.dom(),o=b(n,t);return r.from(o).filter(function(e){return e.length>0})},w=function(e,t,n){var r=a.fromTag(e);return g(r,t,n),x(r,t).isSome()},C=function(e,t){var n=e.dom();m(n,t),o.has(e,"style")&&""===s.trim(o.get(e,"style"))&&o.remove(e,"style")},k=function(e,t){var n=o.get(e,"style"),r=t(e);return(n===undefined?o.remove:o.set)(e,"style",n),r},T=function(e,t,n){x(e,n).each(function(e){x(t,n).isNone()&&g(t,n,e)})};return{copy:function(e,t){var n=e.dom(),r=t.dom();c.isSupported(n)&&c.isSupported(r)&&(r.style.cssText=n.style.cssText)},set:g,preserve:k,setAll:h,setOptions:v,remove:C,get:y,getRaw:x,isValidValue:w,reflow:function(e){return e.dom().offsetWidth},transfer:function(e,n,r){u.isElement(e)&&u.isElement(n)&&t.each(r,function(t){T(e,n,t)})}}}),i("tinymce.core.EditorView",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Css","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,t){return t.dom()[e]},u=function(e,t){return parseInt(o.get(t,e),10)},c=e.curry(a,"clientWidth"),s=e.curry(a,"clientHeight"),l=e.curry(u,"margin-top"),f=e.curry(u,"margin-left"),d=function(e){return e.dom().getBoundingClientRect()},p=function(e,t,n){var r=c(e),o=s(e);return t>=0&&n>=0&&t<=r&&n<=o},m=function(e,t,n,r){var o=d(t);return{x:n-(e?o.left+t.dom().clientLeft+f(t):0),y:r-(e?o.top+t.dom().clientTop+l(t):0)}},g=function(e){return t.from(e).map(r.fromDom)};return{isXYInContentArea:function(e,t,n){var o=r.fromDom(e.getBody()),a=e.inline?o:i.documentElement(o),u=m(e.inline,a,t,n);return p(a,u.x,u.y)},isEditorAttachedToDom:function(e){var t=e.inline?e.getBody():e.getContentAreaContainer();return g(t).map(function(e){return n.contains(i.owner(e),e)}).getOr(!1)}}}),i("tinymce.core.ui.NotificationManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,reposition:e,getArgs:e}}}),i("tinymce.core.api.NotificationManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.EditorView","tinymce.core.ui.NotificationManagerImpl","tinymce.core.util.Delay"],function(e,t,n,r,o){return function(i){var a=[],u=function(){var e=i.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():r()},c=function(){return t.from(a[0])},s=function(e,t){return!(e.type!==t.type||e.text!==t.text||e.progressBar||e.timeout||t.progressBar||t.timeout)},l=function(){a.length>0&&u().reposition(a)},f=function(e){a.push(e)},d=function(t){e.findIndex(a,function(e){return e===t}).each(function(e){a.splice(e,1)})},p=function(t){if(!i.removed&&n.isEditorAttachedToDom(i))return e.find(a,function(e){return s(u().getArgs(e),t)}).getOrThunk(function(){i.editorManager.setActive(i);var e=u().open(t,function(){d(e),l()});return f(e),l(),e})},m=function(){c().each(function(e){u().close(e),d(e),l()})},g=function(){return a};return function(t){t.on("SkinLoaded",function(){var e=t.settings.service_message;e&&p({text:e,type:"warning",timeout:0,icon:""})}),t.on("ResizeEditor ResizeWindow",function(){o.requestAnimationFrame(l)}),t.on("remove",function(){e.each(a,function(e){u().close(e)})})}(i),{open:p,close:m,getNotifications:g}}}),i("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,t,n,r,o,i){return{generate:function(a){if(!n.isArray(a))throw new o("cases must be an array");if(0===a.length)throw new o("there must be at least one case");var u=[],c={};return e.each(a,function(s,l){var f=t.keys(s);if(1!==f.length)throw new o("one and only one name per case");var d=f[0],p=s[d];if(c[d]!==undefined)throw new o("duplicate key detected:"+d);if("cata"===d)throw new o("cannot have a case named cata (sorry)");if(!n.isArray(p))throw new o("case arguments must be an array");u.push(d),c[d]=function(){var n=arguments.length;if(n!==p.length)throw new o("Wrong number of arguments to case "+d+". Expected "+p.length+" ("+p+"), got "+n);for(var c=new r(n),s=0;s<c.length;s++)c[s]=arguments[s];var f=function(n){var r=t.keys(n);if(u.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+r.join(","));if(!e.forall(u,function(t){return e.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+u.join(", "));return n[d].apply(null,c)};return{fold:function(){if(arguments.length!==a.length)throw new o("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[l].apply(null,c)},match:f,log:function(e){i.log(e,{constructors:u,constructor:d,params:c})}}}}),c}}}),i("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct"],function(e,t){var n=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r=t.immutable("start","soffset","finish","foffset"),o=function(e){return n.exact(e.start(),e.soffset(),e.finish(),e.foffset())};return{domRange:n.domRange,relative:n.relative,exact:n.exact,exactFromRange:o,range:r}}),i("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e,t,r,o){var i=n.owner(e),a=i.dom().createRange();return a.setStart(e.dom(),t),a.setEnd(r.dom(),o),a},o=function(e,n,o,i){var a=r(e,n,o,i);return t.fromDom(a.commonAncestorContainer)};return{after:function(t,n,o,i){var a=r(t,n,o,i),u=e.eq(t,o)&&n===i;return a.collapsed&&!u},commonAncestorContainer:o}}),i("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,t,n){return{fromElements:function(r,o){var i=o||n,a=i.createDocumentFragment();return e.each(r,function(e){a.appendChild(e.dom())}),t.fromDom(a)}}}),i("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt"],function(e){var t=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),n=function(e,t,n,r){return e.fold(t,n,r)};return{before:t.before,on:t.on,after:t.after,cata:n}}),i("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,t,n,r){var o=function(e,t){var n=e.document.createRange();return i(n,t),n},i=function(e,t){e.selectNodeContents(t.dom())},a=function(e,t){return t.compareBoundaryPoints(e.END_TO_START,e)<1&&t.compareBoundaryPoints(e.START_TO_END,e)>-1},u=function(e){return e.document.createRange()},c=function(e,t){t.fold(function(t){e.setStartBefore(t.dom())},function(t,n){e.setStart(t.dom(),n)},function(t){e.setStartAfter(t.dom())})},s=function(e,t){t.fold(function(t){e.setEndBefore(t.dom())},function(t,n){e.setEnd(t.dom(),n)},function(t){e.setEndAfter(t.dom())})},l=function(e,t){m(e),e.insertNode(t.dom())},f=function(e,t,r,o){return n.eq(e,r)&&t===o},d=function(e,t,n){var r=e.document.createRange();return c(r,t),s(r,n),r},p=function(e,t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},m=function(e){e.deleteContents()},g=function(e){var t=e.cloneContents();return r.fromDom(t)},h=function(t){return{left:e.constant(t.left),top:e.constant(t.top),right:e.constant(t.right),bottom:e.constant(t.bottom),width:e.constant(t.width),height:e.constant(t.height)}},v=function(e){var n=e.getClientRects(),r=n.length>0?n[0]:e.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(h):t.none()},y=function(e){var n=e.getBoundingClientRect();return n.width>0||n.height>0?t.some(n).map(h):t.none()},b=function(e){return e.toString()};return{create:u,replaceWith:l,selectNodeContents:o,selectNodeContentsUsing:i,isCollapsed:f,relativeToNative:d,exactToNative:p,deleteContents:m,cloneFragment:g,getFirstRect:v,getBounds:y,isWithin:a,toString:b}}),i("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,t,n,r,o,i){var a=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),u=function(e,t,n){return t(o.fromDom(n.startContainer),n.startOffset,o.fromDom(n.endContainer),n.endOffset)},c=function(e,o){return o.match({domRange:function(e){return{ltr:t.constant(e),rtl:n.none}},relative:function(t,o){return{ltr:r.cached(function(){return i.relativeToNative(e,t,o)}),rtl:r.cached(function(){return n.some(i.relativeToNative(e,o,t))})}},exact:function(t,o,a,u){return{ltr:r.cached(function(){return i.exactToNative(e,t,o,a,u)}),rtl:r.cached(function(){return n.some(i.exactToNative(e,a,u,t,o))})}}})},s=function(e,t){var n=t.ltr();if(n.collapsed){return t.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return a.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return u(e,a.ltr,n)})}return u(e,a.ltr,n)},l=function(e,t){var n=c(e,t);return s(e,n)},f=function(e,t){return l(e,t).match({ltr:function(t,n,r,o){var i=e.document.createRange();return i.setStart(t.dom(),n),i.setEnd(r.dom(),o),i},rtl:function(t,n,r,o){var i=e.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),n),i}})};return{ltr:a.ltr,rtl:a.rtl,diagnose:l,asLtrRange:f}}),i("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var t=[],n=function(e){t.push(e)},r=0;r<e.length;r++)e[r].each(n);return t},findMap:function(t,n){for(var r=0;r<t.length;r++){var o=n(t[r],r);if(o.isSome())return o}return e.none()},liftN:function(t,n){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return e.none();r.push(i.getOrDie())}return e.some(n.apply(null,r))}}}),a("global!Math",Math),i("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){var t=function(t,n,r,o,i){if(0===i)return 0;if(n===o)return i-1;for(var a=o,u=1;u<i;u++){var c=t(u),s=e.abs(n-c.left);if(r>c.bottom);else{if(r<c.top||s>a)return u-1;a=s}}return 0};return{inRect:function(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom},searchForPoint:t}}),i("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,t,n,r){var o=function(e,t,o,i,a){var u=function(n){var r=e.dom().createRange();return r.setStart(t.dom(),n),r.collapse(!0),r},c=function(e){return u(e).getBoundingClientRect()},s=n.get(t).length,l=r.searchForPoint(c,o,i,a.right,s);return u(l)};return{locate:function(n,i,a,u){var c=n.dom().createRange();c.selectNode(i.dom());var s=c.getClientRects();return t.findMap(s,function(t){return r.inRect(t,a,u)?e.some(t):e.none()}).map(function(e){return o(n,i,a,u,e)})}}}),i("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,t,n,r,o,i,a){var u=function(n,i,a,u){var s=n.dom().createRange(),l=r.children(i);return t.findMap(l,function(t){return s.selectNode(t.dom()),o.inRect(s.getBoundingClientRect(),a,u)?c(n,t,a,u):e.none()})},c=function(e,t,r,o){return(n.isText(t)?i.locate:u)(e,t,r,o)};return{locate:function(e,t,n,r){var o=e.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),u=a.max(i.left,a.min(i.right,n)),s=a.max(i.top,a.min(i.bottom,r));return c(e,t,u,s)}}}),i("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,t){return function(n,r,o,i,a){return n(o,i)?t.some(o):e.isFunction(a)&&a(o)?t.none():r(o,i,a)}}),i("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n,r,o,i,a,u){var c=function(e){return p(o.body(),e)},s=function(t,o,i){for(var u=t.dom(),c=e.isFunction(i)?i:n.constant(!1);u.parentNode;){u=u.parentNode;var s=a.fromDom(u);if(o(s))return r.some(s);if(c(s))break}return r.none()},l=function(e,t,n){return u(function(e){return t(e)},s,e,t,n)},f=function(e,t){var n=e.dom();return n.parentNode?d(a.fromDom(n.parentNode),function(n){return!i.eq(e,n)&&t(n)}):r.none()},d=function(e,r){return t.find(e.dom().childNodes,n.compose(r,a.fromDom)).map(a.fromDom)},p=function(e,t){var n=function(e){for(var o=0;o<e.childNodes.length;o++){if(t(a.fromDom(e.childNodes[o])))return r.some(a.fromDom(e.childNodes[o]));var i=n(e.childNodes[o]);if(i.isSome())return i}return r.none()};return n(e.dom())};return{first:c,ancestor:s,closest:l,sibling:f,child:d,descendant:p}}),i("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,t,n,r){var o=function(e){return"img"===t.name(e)?1:n.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},i="\xa0",a=function(e){return n.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf(i)>-1}).isSome()},u=["img","br"];return{getEnd:o,isEnd:function(e,t){return o(e)===t},isStart:function(e,t){return 0===t},isCursorPosition:function(n){return a(n)||e.contains(u,t.name(n))}}}),i("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,t,n,r){var o=function(t,r){var o=function(t){for(var i=n.children(t),a=i.length-1;a>=0;a--){var u=i[a];if(r(u))return e.some(u);var c=o(u);if(c.isSome())return c}return e.none()};return o(t)};return{first:function(e){return t.descendant(e,r.isCursorPosition)},last:function(e){return o(e,r.isCursorPosition)}}}),i("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,t,n){var r=!0,o=!1,i=function(e,t){return t-e.left<e.right-t?r:o
},a=function(e,t,n){var r=e.dom().createRange();return r.selectNode(t.dom()),r.collapse(n),r},u=function(e,t,o){var u=e.dom().createRange();u.selectNode(t.dom());var c=u.getBoundingClientRect(),s=i(c,o);return(s===r?n.first:n.last)(t).map(function(t){return a(e,t,s)})},c=function(t,n,r){var o=n.dom().getBoundingClientRect(),u=i(o,r);return e.some(a(t,n,u))};return{search:function(e,n,r){return(0===t.children(n).length?c:u)(e,n,r)}}}),i("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,t,n,r,o,i,a,u){var c=function(t,n,r){return e.from(t.dom().caretPositionFromPoint(n,r)).bind(function(n){if(null===n.offsetNode)return e.none();var r=t.dom().createRange();return r.setStart(n.offsetNode,n.offset),r.collapse(),e.some(r)})},s=function(t,n,r){return e.from(t.dom().caretRangeFromPoint(n,r))},l=function(e,t,n,r){var i=e.dom().createRange();i.selectNode(t.dom());var a=i.getBoundingClientRect(),c=u.max(a.left,u.min(a.right,n)),s=u.max(a.top,u.min(a.bottom,r));return o.locate(e,t,c,s)},f=function(r,o,a){return e.from(r.dom().elementFromPoint(o,a)).map(t.fromDom).bind(function(e){var t=function(){return i.search(r,e,o)};return 0===n.children(e).length?t():l(r,e,o,a).orThunk(t)})},d=a.caretPositionFromPoint?c:a.caretRangeFromPoint?s:f;return{fromPoint:function(e,n,o){var i=t.fromDom(e.document);return d(i,n,o).map(function(e){return r.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})}}}),i("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,t,n,r,o,i,a){var u=function(t,n,a,u){var c=i.create(t),s=o.is(n,u)?[n]:[],l=s.concat(r.descendants(n,u));return e.filter(l,function(e){return i.selectNodeContentsUsing(c,e),i.isWithin(a,c)})};return{find:function(e,r,o){var i=a.asLtrRange(e,r),c=t.fromDom(i.commonAncestorContainer);return n.isElement(c)?u(e,c,i,o):[]}}}),i("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,t,n,r){var o=function(n,o){var i=t.name(n);return"input"===i?r.after(n):e.contains(["br","img"],i)?0===o?r.before(n):r.after(n):r.on(n,o)};return{beforeSpecial:o,preprocess:function(e,t){var i=e.fold(r.before,o,r.after),a=t.fold(r.before,o,r.after);return n.relative(i,a)}}}),i("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,t,n,r,o,i,a,u,c,s,l){var f=function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},d=function(e,t,n,r,o){var i=a.exactToNative(e,t,n,r,o);f(e,i)},p=function(e,t,n){return s.find(e,t,n)},m=function(e,t,n,r,o){g(e,i.on(t,n),i.on(r,o))},g=function(e,t,n){var r=l.preprocess(t,n);return u.diagnose(e,r).match({ltr:function(t,n,r,o){d(e,t,n,r,o)},rtl:function(t,n,r,o){var i=e.getSelection();i.extend?(i.collapse(t.dom(),n),i.extend(r.dom(),o)):d(e,r,o,t,n)}})},h=function(t){return e.from(t.getRangeAt(0)).map(function(e){return o.range(n.fromDom(e.startContainer),e.startOffset,n.fromDom(e.endContainer),e.endOffset)})},v=function(r){var i=n.fromDom(r.anchorNode),a=n.fromDom(r.focusNode);return t.after(i,r.anchorOffset,a,r.focusOffset)?e.some(o.range(n.fromDom(r.anchorNode),r.anchorOffset,n.fromDom(r.focusNode),r.focusOffset)):h(r)},y=function(e,t){var n=a.selectNodeContents(e,t);f(e,n)},b=function(e,t){var r=a.selectNodeContents(e,t);return o.range(n.fromDom(r.startContainer),r.startOffset,n.fromDom(r.endContainer),r.endOffset)},x=function(t){var n=t.getSelection();return n.rangeCount>0?v(n):e.none()},w=function(e){return x(e).map(function(e){return o.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},C=function(e,t){var n=u.asLtrRange(e,t);return a.getFirstRect(n)},k=function(e,t){var n=u.asLtrRange(e,t);return a.getBounds(n)},T=function(e,t,n){return c.fromPoint(e,t,n)},S=function(e,t){var n=u.asLtrRange(e,t);return a.toString(n)};return{setExact:m,getExact:x,get:w,setRelative:g,setToElement:y,clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,t){var n=u.asLtrRange(e,t);return a.cloneFragment(n)},replace:function(e,t,n){var o=u.asLtrRange(e,t),i=r.fromElements(n);a.replaceWith(o,i)},deleteAt:function(e,t){var n=u.asLtrRange(e,t);a.deleteContents(n)},forElement:b,getFirstRect:C,getBounds:k,getAtPoint:T,findWithin:p,getAsString:S}}),i("tinymce.core.selection.SelectionBookmark",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.WindowSelection","global!document","tinymce.core.caret.CaretFinder"],function(e,t,n,r,o,i,a,u,c,s){var l=function(e,t){var n=o.isText(t)?i.get(t).length:a.children(t).length+1;return e>n?n:e<0?0:e},f=function(e){return u.range(e.start(),l(e.soffset(),e.start()),e.finish(),l(e.foffset(),e.finish()))},d=function(e,t){return n.contains(e,t)||n.eq(e,t)},p=function(e){return function(t){return d(e,t.start())&&d(e,t.finish())}},m=function(e){var n=e.getSelection();return(0===n.rangeCount?t.none():t.from(n.getRangeAt(0))).map(function(e){return u.range(r.fromDom(e.startContainer),e.startOffset,r.fromDom(e.endContainer),e.endOffset)})},g=function(e){var t=a.defaultView(e);return m(t.dom()).filter(p(e))},h=function(e,n){return t.from(n).filter(p(e)).map(f)},v=function(e){var n=s.createRange();return n.setStart(e.start().dom(),e.soffset()),n.setEnd(e.finish().dom(),e.foffset()),t.some(n)},y=function(e){var t=g(r.fromDom(e.getBody()));e.bookmark=t.isSome()?t:e.bookmark},b=function(n){return(n.bookmark?n.bookmark:t.none()).bind(e.curry(h,r.fromDom(n.getBody()))).bind(v)};return{store:y,restore:function(e){b(e).each(function(t){e.selection.setRng(t)})},getRng:b,getBookmark:g,validate:h}}),i("tinymce.core.ui.WindowManagerImpl",[],function(){return function(){var e=function(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,alert:e,confirm:e,close:e,getParams:e,setParams:e}}}),i("tinymce.core.api.WindowManager",["ephox.katamari.api.Arr","ephox.katamari.api.Option","tinymce.core.selection.SelectionBookmark","tinymce.core.ui.WindowManagerImpl"],function(e,t,n,r){return function(o){var i=[],a=function(){var e=o.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():r()},u=function(e,t){return function(){return t?t.apply(e,arguments):undefined}},c=function(e){o.fire("OpenWindow",{win:e})},s=function(e){o.fire("CloseWindow",{win:e})},l=function(e){i.push(e),c(e)},f=function(t){e.findIndex(i,function(e){return e===t}).each(function(e){i.splice(e,1),s(t),0===i.length&&o.focus()})},d=function(){return t.from(i[i.length-1])},p=function(e,t){o.editorManager.setActive(o),n.store(o);var r=a().open(e,t,f);return l(r),r},m=function(e,t,n){var r=a().alert(e,u(n||this,t),f);l(r)},g=function(e,t,n){var r=a().confirm(e,u(n||this,t),f);l(r)},h=function(){d().each(function(e){a().close(e),f(e)})},v=function(){return d().map(a().getParams).getOr(null)},y=function(e){d().each(function(t){a().setParams(t,e)})},b=function(){return i};return o.on("remove",function(){e.each(i.slice(0),function(e){a().close(e)})}),{windows:i,open:p,alert:m,confirm:g,close:h,getParams:v,setParams:y,getWindows:b}}}),i("tinymce.core.dom.RangePoint",["ephox.katamari.api.Arr","tinymce.core.geom.ClientRect"],function(e,t){return{isXYWithinRange:function(n,r,o){return!o.collapsed&&e.foldl(o.getClientRects(),function(e,o){return e||t.containsXY(o,n,r)},!1)}}}),i("tinymce.core.util.VK",["tinymce.core.Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),i("tinymce.core.dom.ControlSelection",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","global!document","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.Env","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,u,c,s){var l=o.isContentEditableFalse,f=o.isContentEditableTrue,d=function(e,t){for(;t&&t!=e;){if(f(t)||l(t))return t;t=t.parentNode}return null},p=function(e){return e&&"IMG"===e.nodeName},m=function(e,t){return p(e.target)&&!i.isXYWithinRange(e.clientX,e.clientY,t)},g=function(e,t){var n=t.target;m(t,e.selection.getRng())&&!t.isDefaultPrevented()&&(t.preventDefault(),e.selection.select(n))};return function(o,i){var f,p,m,h,v,y,b,x,w,C,k,T,S,E,_,A,N,D,R=i.dom,P=c.each,I=i.getDoc(),O=r,B=a.ie&&a.ie<11,M=Math.abs,L=Math.round,F=i.getBody();h={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var H=".mce-content-body";i.contentStyles.push(H+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: box-sizing;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+H+" .mce-resizehandle:hover {background: #000}"+H+" img[data-mce-selected],"+H+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+H+" .mce-clonedresizable {position: absolute;"+(a.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+H+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var U=function(e){var r=i.settings.object_resizing;return!1!==r&&!a.iOS&&("string"!=typeof r&&(r="table,img,div"),"false"!==e.getAttribute("data-mce-resize")&&(e!=i.getBody()&&n.is(t.fromDom(e),r)))},W=function(e){var t,n,r,o,a;t=e.screenX-b,n=e.screenY-x,_=t*v[2]+k,A=n*v[3]+T,_=_<5?5:_,A=A<5?5:A,r="IMG"==f.nodeName&&!1!==i.settings.resize_img_proportional?!s.modifierPressed(e):s.modifierPressed(e)||"IMG"==f.nodeName&&v[2]*v[3]!=0,r&&(M(t)>M(n)?(A=L(_*S),_=L(A/S)):(_=L(A/S),A=L(_*S))),R.setStyles(p,{width:_,height:A}),o=v.startPos.x+t,a=v.startPos.y+n,o=o>0?o:0,a=a>0?a:0,R.setStyles(m,{left:o,top:a,display:"block"}),m.innerHTML=_+" &times; "+A,v[2]<0&&p.clientWidth<=_&&R.setStyle(p,"left",w+(k-_)),v[3]<0&&p.clientHeight<=A&&R.setStyle(p,"top",C+(T-A)),t=F.scrollWidth-N,n=F.scrollHeight-D,t+n!==0&&R.setStyles(m,{left:o-t,top:a-n}),E||(i.fire("ObjectResizeStart",{target:f,width:k,height:T}),E=!0)},j=function(){E=!1;var e=function(e,t){t&&(f.style[e]||!i.schema.isValid(f.nodeName.toLowerCase(),e)?R.setStyle(f,e,t):R.setAttrib(f,e,t))};e("width",_),e("height",A),R.unbind(I,"mousemove",W),R.unbind(I,"mouseup",j),O!=I&&(R.unbind(O,"mousemove",W),R.unbind(O,"mouseup",j)),R.remove(p),R.remove(m),B&&"TABLE"!=f.nodeName||q(f),i.fire("ObjectResized",{target:f,width:_,height:A}),R.setAttrib(f,"style",R.getAttrib(f,"style")),i.nodeChanged()},q=function(e,t,n){var r,o,u,c,s;$(),Z(),r=R.getPos(e,F),w=r.x,C=r.y,s=e.getBoundingClientRect(),o=s.width||s.right-s.left,u=s.height||s.bottom-s.top,f!=e&&(J(),f=e,_=A=0),c=i.fire("ObjectSelected",{target:e}),U(e)&&!c.isDefaultPrevented()?P(h,function(e,r){var i,c=function(t){b=t.screenX,x=t.screenY,k=f.clientWidth,T=f.clientHeight,S=T/k,v=e,e.startPos={x:o*e[0]+w,y:u*e[1]+C},N=F.scrollWidth,D=F.scrollHeight,p=f.cloneNode(!0),R.addClass(p,"mce-clonedresizable"),R.setAttrib(p,"data-mce-bogus","all"),p.contentEditable=!1,p.unSelectabe=!0,R.setStyles(p,{left:w,top:C,margin:0}),p.removeAttribute("data-mce-selected"),F.appendChild(p),R.bind(I,"mousemove",W),R.bind(I,"mouseup",j),O!=I&&(R.bind(O,"mousemove",W),R.bind(O,"mouseup",j)),m=R.add(F,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},k+" &times; "+T)};if(t)return void(r==t&&c(n));i=R.get("mceResizeHandle"+r),i&&R.remove(i),i=R.add(F,"div",{id:"mceResizeHandle"+r,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+r+"-resize; margin:0; padding:0"}),a.ie&&(i.contentEditable=!1),R.bind(i,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),c(e)}),e.elm=i,R.setStyles(i,{left:o*e[0]+w-i.offsetWidth/2,top:u*e[1]+C-i.offsetHeight/2})}):$(),f.setAttribute("data-mce-selected","1")},$=function(){var e,t;Z(),f&&f.removeAttribute("data-mce-selected");for(e in h)(t=R.get("mceResizeHandle"+e))&&(R.unbind(t),R.remove(t))},z=function(e){var t,n,r=function(e,t){if(e)do{if(e===t)return!0}while(e=e.parentNode)};if(!E&&!i.removed){if(P(R.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),n="mousedown"==e.type?e.target:o.getNode(),n=R.$(n).closest(B?"table":"table,img,hr")[0],r(n,F)&&(ee(),t=o.getStart(!0),r(t,n)&&r(o.getEnd(!0),n)&&(!B||n!=t&&"IMG"!==t.nodeName)))return void q(n);$()}},V=function(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)},K=function(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)},G=function(e){var t,n,r,o,a,u,c,s=e.srcElement;t=s.getBoundingClientRect(),u=y.clientX-t.left,c=y.clientY-t.top;for(n in h)if(r=h[n],o=s.offsetWidth*r[0],a=s.offsetHeight*r[1],M(o-u)<8&&M(a-c)<8){v=r;break}E=!0,i.fire("ObjectResizeStart",{target:f,width:f.clientWidth,height:f.clientHeight}),i.getDoc().selection.empty(),q(s,n,y)},X=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},Y=function(e){return l(d(i.getBody(),e))},Q=function(e){var t=e.srcElement;if(Y(t))return void X(e);if(t!=f){if(i.fire("ObjectSelected",{target:t}),J(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);"IMG"!=t.nodeName&&"TABLE"!=t.nodeName||($(),f=t,V(t,"resizestart",G))}},J=function(){K(f,"resizestart",G)},Z=function(){for(var e in h){var t=h[e];t.elm&&(R.unbind(t.elm),delete t.elm)}},ee=function(){try{i.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}},te=function(e){var t;if(B){t=I.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(e){}}};return i.on("init",function(){B?(i.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&($(),te(e.target))}),V(F,"controlselect",Q),i.on("mousedown",function(e){y=e})):(ee(),a.ie>=11&&(i.on("mousedown click",function(e){var t=e.target,n=t.nodeName;E||!/^(TABLE|IMG|HR)$/.test(n)||Y(t)||(2!==e.button&&i.selection.select(t,"TABLE"==n),"mousedown"==e.type&&i.nodeChanged())}),i.dom.bind(F,"mscontrolselect",function(e){var t=function(e){u.setEditorTimeout(i,function(){i.selection.select(e)})};if(Y(e.target))return e.preventDefault(),void t(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&t(e.target))})));var t=u.throttle(function(e){i.composing||z(e)});i.on("nodechange ResizeEditor ResizeWindow drop",t),i.on("keyup compositionend",function(e){f&&"TABLE"==f.nodeName&&t(e)}),i.on("hide blur",$),i.on("contextmenu",e.curry(g,i))}),i.on("remove",Z),{isResizable:U,showResizeRect:q,hideResizeRect:$,updateResizeRect:z,controlSelect:te,destroy:function(){f=p=null,B&&(J(),K(F,"controlselect",Q))}}}}),i("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()}}}),i("ephox.sugar.api.dom.Focus",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.Traverse","global!document"],function(e,t,n,r,o,i,a){var u=function(e){e.dom().focus()},c=function(e){e.dom().blur()},s=function(e){var t=i.owner(e).dom();return e.dom()===t.activeElement},l=function(e){var n=e!==undefined?e.dom():a;return t.from(n.activeElement).map(r.fromDom)},f=function(t){var r=i.owner(t);l(r).filter(function(r){return o.closest(r,e.curry(n.eq,t))}).fold(function(){u(t)},e.noop)};return{hasFocus:s,focus:u,blur:c,active:l,search:function(e){return l(i.owner(e)).filter(function(t){return e.dom().contains(t.dom())})},focusInside:f}}),i("tinymce.core.EditorFocus",["ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Focus","ephox.sugar.api.node.Element","tinymce.core.Env","tinymce.core.caret.CaretFinder","tinymce.core.dom.ElementType","tinymce.core.dom.RangeUtils","tinymce.core.selection.SelectionBookmark"],function(e,t,n,r,o,i,a,u,c){var s=function(e,t){return e.dom.getParent(t,function(t){return"true"===e.dom.getContentEditable(t)})},l=function(t){return t.collapsed?e.from(u.getNode(t.startContainer,t.startOffset)).map(r.fromDom):e.none()},f=function(n,r){return l(r).bind(function(r){return a.isTableSection(r)?e.some(r):!1===t.contains(n,r)?e.some(n):e.none()})},d=function(e,t){f(r.fromDom(e.getBody()),t).bind(function(e){return i.firstPositionIn(e.dom())}).fold(function(){e.selection.normalize()},function(t){e.selection.setRng(t.toRange())})},p=function(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},m=function(e){return n.hasFocus(e)||n.search(e).isSome()},g=function(e){return e.iframeElement&&n.hasFocus(r.fromDom(e.iframeElement))},h=function(e){var t=e.getBody();return t&&m(r.fromDom(t))},v=function(e){return e.inline?h(e):g(e)},y=function(e){var t,n=e.selection,r=e.settings.content_editable,i=e.getBody(),a=n.getRng();if(e.quirks.refreshContentEditable(),t=s(e,n.getNode()),e.$.contains(i,t))return p(t),d(e,a),void b(e);e.bookmark!==undefined&&!1===v(e)&&c.getRng(e).each(function(t){e.selection.setRng(t),a=t}),r||(o.opera||p(i),e.getWin().focus()),(o.gecko||r)&&(p(i),d(e,a)),b(e)},b=function(e){e.editorManager.setActive(e)};return{focus:function(e,t){e.removed||(t?b(e):y(e))},hasFocus:v}}),i("tinymce.core.dom.ScrollIntoView",["tinymce.core.dom.NodeType"],function(e){var t=function(e){for(var t=0,n=0,r=e;r&&r.nodeType;)t+=r.offsetLeft||0,n+=r.offsetTop||0,r=r.offsetParent;return{x:t,y:n}},n=function(e,t,n){var r={elm:t,alignToTop:n};return e.fire("scrollIntoView",r),r.isDefaultPrevented()};return{scrollIntoView:function(r,o,i){var a,u,c,s,l=r.dom,f=l.getRoot(),d=0;if(!n(r,o,i)&&e.isElement(o)){if(!1===i&&(d=o.offsetHeight),"BODY"!==f.nodeName){var p=r.selection.getScrollContainer();if(p)return a=t(o).y-t(p).y+d,s=p.clientHeight,c=p.scrollTop,void((a<c||a+25>c+s)&&(p.scrollTop=a<c?a:a-s+25))}u=l.getViewPort(r.getWin()),a=l.getPos(o).y+d,c=u.y,s=u.h,(a<u.y||a+25>c+s)&&r.getWin().scrollTo(0,a<c?a:a-s+25)}}}}),i("tinymce.core.selection.EventProcessRanges",["ephox.katamari.api.Arr"],function(e){return{processRanges:function(t,n){return e.map(n,function(e){var n=t.fire("GetSelectionRange",{range:e});return n.range!==e?n.range:e})}}}),i("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,t,n,r,o,i){var a=function(e,n){return t.fromDom(e.dom().cloneNode(n))},u=function(e){return a(e,!1)},c=function(e){return a(e,!0)},s=function(n,r){var o=t.fromTag(r),i=e.clone(n);return e.setAll(o,i),o};return{shallow:u,shallowAs:s,deep:c,copy:function(e,t){var n=s(e,t),o=i.children(c(e));return r.append(n,o),n},mutate:function(e,t){var a=s(e,t);n.before(e,a);var u=i.children(e);return r.append(a,u),o.remove(e),a}}}),i("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,t,n){var r=function(e){return t.one(e)},o=function(n,r,o){return e.ancestor(n,function(e){return t.is(e,r)},o)};return{first:r,ancestor:o,sibling:function(n,r){return e.sibling(n,function(e){return t.is(e,r)})},child:function(n,r){return e.child(n,function(e){return t.is(e,r)})},descendant:function(e,n){return t.one(n,e)},closest:function(e,r,i){return n(t.is,o,e,r,i)}}}),i("tinymce.core.dom.Parents",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,t,n){var r=function(e){return e.slice(0,-1)},o=function(e,o,i){return t.contains(o,e)?r(n.parents(e,function(e){return i(e)||t.eq(e,o)})):[]},i=function(t,n){return o(t,n,e.constant(!1))};return{parentsUntil:o,parents:i,parentsAndSelf:function(e,t){return[e].concat(i(e,t))}}}),i("tinymce.core.selection.SelectionUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,u,c){var s=function(e){var t=e.startContainer,r=e.startOffset;return c.isText(t)?0===r?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[r]).map(i.fromDom)},l=function(e){var t=e.endContainer,r=e.endOffset;return c.isText(t)?r===t.data.length?n.some(i.fromDom(t)):n.none():n.from(t.childNodes[r-1]).map(i.fromDom)},f=function(e){return u.firstChild(e).fold(t.constant([e]),function(t){return[e].concat(f(t))})},d=function(e){return u.lastChild(e).fold(t.constant([e]),function(t){return"br"===a.name(t)?u.prevSibling(t).map(function(t){return[e].concat(d(t))}).getOr([]):[e].concat(d(t))})};return{hasAllContentsSelected:function(n,i){return r.liftN([s(i),l(i)],function(r,i){var a=e.find(f(n),t.curry(o.eq,r)),u=e.find(d(n),t.curry(o.eq,i));return a.isSome()&&u.isSome()}).getOr(!1)}}}),i("tinymce.core.selection.SimpleTableModel",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter"],function(e,t,n,r,o,i,a,u,c,s){var l=n.immutable("element","width","rows"),f=n.immutable("element","cells"),d=n.immutable("x","y"),p=function(e,t){var n=parseInt(c.get(e,t),10);return isNaN(n)?1:n},m=function(e,t,n,r,o){for(var i=p(o,"rowspan"),u=p(o,"colspan"),c=e.rows(),s=n;s<n+i;s++){c[s]||(c[s]=f(a.deep(r),[]));for(var l=t;l<t+u;l++){c[s].cells()[l]=s==n&&l==t?o:a.shallow(o)}}},g=function(e,t,n){var r=e.rows();return!!(r[n]?r[n].cells():[])[t]},h=function(e,t,n){for(;g(e,t,n);)t++;return t},v=function(t){return e.foldl(t,function(e,t){return t.cells().length>e?t.cells().length:e},0)},y=function(e,n){for(var o=e.rows(),i=0;i<o.length;i++)for(var a=o[i].cells(),u=0;u<a.length;u++)if(r.eq(a[u],n))return t.some(d(u,i));return t.none()},b=function(e,t,n,r,o){for(var i=[],a=e.rows(),u=n;u<=o;u++){var c=a[u].cells(),s=t<r?c.slice(t,r+1):c.slice(r,t+1);i.push(f(a[u].element(),s))}return i},x=function(e,t,n){var r=t.x(),o=t.y(),i=n.x(),a=n.y(),u=o<a?b(e,r,o,i,a):b(e,r,a,i,o);return l(e.element(),v(u),u)},w=function(e,t){var n=a.shallow(e.element()),r=u.fromTag("tbody");return i.append(r,t),o.append(n,r),n},C=function(t){return e.map(t.rows(),function(t){var n=e.map(t.cells(),function(e){var t=a.deep(e);return c.remove(t,"colspan"),c.remove(t,"rowspan"),t}),r=a.shallow(t.element());return i.append(r,n),r})};return{fromDom:function(t){var n=l(a.shallow(t),0,[]);return e.each(s.descendants(t,"tr"),function(t,r){e.each(s.descendants(t,"td,th"),function(e,o){m(n,h(n,o,r),r,t,e)})}),l(n.element(),v(n.rows()),n.rows())},toDom:function(e){return w(e,C(e))},subsection:function(e,t,n){return y(e,t).bind(function(t){return y(e,n).map(function(n){return x(e,t,n)})})}}}),i("tinymce.core.selection.MultiRange",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","tinymce.core.dom.RangeUtils"],function(e,t,n){var r=function(e){for(var t=[],n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t};return{getRanges:r,getSelectedNodes:function(r){return e.bind(r,function(e){var r=n.getSelectedNode(e);return r?[t.fromDom(r)]:[]})},hasMultipleRanges:function(e){return r(e).length>1}}}),i("tinymce.core.selection.TableCellSelection",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.dom.ElementType","tinymce.core.selection.MultiRange"],function(e,t,n,r,o){var i=function(t){return e.filter(o.getSelectedNodes(t),r.isTableCell)},a=function(e){return n.descendants(e,"td[data-mce-selected],th[data-mce-selected]")},u=function(e,t){var n=a(t),r=i(e);return n.length>0?n:r};return{getCellsFromRanges:i,getCellsFromElement:a,getCellsFromElementOrRanges:u,getCellsFromEditor:function(e){return u(o.getRanges(e.selection.getSel()),t.fromDom(e.getBody()))}}}),i("tinymce.core.selection.FragmentReader",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse","tinymce.core.dom.ElementType","tinymce.core.dom.Parents","tinymce.core.selection.SelectionUtils","tinymce.core.selection.SimpleTableModel","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){var g=function(t){return e.find(t,function(e){return"ul"===u.name(e)||"ol"===u.name(e)})},h=function(n,r){return e.find(n,function(e){return"li"===u.name(e)&&d.hasAllContentsSelected(e,r)}).fold(t.constant([]),function(){return g(n).map(function(e){return[i.fromTag("li"),i.fromTag(u.name(e))]}).getOr([])})},v=function(t,n){var o=e.foldl(n,function(e,t){return r.append(t,e),t},t);return n.length>0?a.fromElements([o]):o},y=function(e){return l.isListItem(e)?s.parent(e).filter(l.isList).fold(t.constant([]),function(t){return[e,t]}):l.isList(e)?[e]:[]},b=function(t,n){var r=i.fromDom(n.commonAncestorContainer),a=f.parentsAndSelf(r,t),u=e.filter(a,function(e){return l.isInline(e)||l.isHeading(e)}),c=h(a,n),s=u.concat(c.length?c:y(r));return e.map(s,o.shallow)},x=function(){return a.fromElements([])},w=function(e,t){return v(i.fromDom(t.cloneContents()),b(e,t))},C=function(e,r){return c.ancestor(r,"table",t.curry(n.eq,e))},k=function(e,t){return C(e,t[0]).bind(function(e){var n=t[0],r=t[t.length-1],o=p.fromDom(e);return p.subsection(o,n,r).map(function(e){return a.fromElements([p.toDom(e)])})}).getOrThunk(x)},T=function(e,t){return t.length>0&&t[0].collapsed?x():w(e,t[0])};return{read:function(e,t){var n=m.getCellsFromElementOrRanges(t,e);return n.length>0?k(e,n):T(e,t)}}}),i("tinymce.core.selection.GetSelectionContent",["ephox.sugar.api.node.Element","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.FragmentReader","tinymce.core.selection.MultiRange","tinymce.core.text.Zwsp"],function(e,t,n,r,o){return{getContent:function(i,a){var u,c,s,l=i.selection.getRng(),f=i.dom.create("body"),d=i.selection.getSel(),p=t.processRanges(i,r.getRanges(d));return a=a||{},u=c="",a.get=!0,a.format=a.format||"html",a.selection=!0,a=i.fire("BeforeGetContent",a),a.isDefaultPrevented()?(i.fire("GetContent",a),a.content):"text"===a.format?i.selection.isCollapsed()?"":o.trim(l.text||(d.toString?d.toString():"")):(l.cloneContents?(s=a.contextual?n.read(e.fromDom(i.getBody()),p).dom():l.cloneContents())&&f.appendChild(s):l.item!==undefined||l.htmlText!==undefined?(f.innerHTML="<br>"+(l.item?l.item(0).outerHTML:l.htmlText),f.removeChild(f.firstChild)):f.innerHTML=l.toString(),/^\s/.test(f.innerHTML)&&(u=" "),/\s+$/.test(f.innerHTML)&&(c=" "),a.getInner=!0,a.content=i.selection.isCollapsed()?"":u+i.selection.serializer.serialize(f,a)+c,i.fire("GetContent",a),a.content)}}}),i("tinymce.core.selection.SetSelectionContent",[],function(){return{setContent:function(e,t,n){var r,o,i,a=e.selection.getRng(),u=e.getDoc();if(n=n||{format:"html"},n.set=!0,n.selection=!0,n.content=t,!n.no_events&&(n=e.fire("BeforeSetContent",n),n.isDefaultPrevented()))return void e.fire("SetContent",n);if(t=n.content,a.insertNode){t+='<span id="__caret">_</span>',a.startContainer==u&&a.endContainer==u?u.body.innerHTML=t:(a.deleteContents(),0===u.body.childNodes.length?u.body.innerHTML=t:a.createContextualFragment?a.insertNode(a.createContextualFragment(t)):(o=u.createDocumentFragment(),i=u.createElement("div"),o.appendChild(i),i.outerHTML=t,a.insertNode(o))),r=e.dom.get("__caret"),a=u.createRange(),a.setStartBefore(r),a.setEndBefore(r),e.selection.setRng(a),e.dom.remove("__caret");try{e.selection.setRng(a)}catch(e){}}else a.item&&(u.execCommand("Delete",!1,null),a=e.getRng()),/^\s+/.test(t)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+t),e.dom.remove("__mce_tmp")):a.pasteHTML(t);n.no_events||e.fire("SetContent",n)}}}),i("tinymce.core.dom.Selection",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.EditorFocus","tinymce.core.Env","tinymce.core.caret.CaretPosition","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ControlSelection","tinymce.core.dom.RangeUtils","tinymce.core.dom.ScrollIntoView","tinymce.core.dom.TreeWalker","tinymce.core.selection.EventProcessRanges","tinymce.core.selection.GetSelectionContent","tinymce.core.selection.MultiRange","tinymce.core.selection.SelectionBookmark","tinymce.core.selection.SetSelectionContent","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g){var h=g.each,v=g.trim,y=function(n){return!(!n||!n.ownerDocument)&&e.contains(t.fromDom(n.ownerDocument),t.fromDom(n))},b=function(e){return!!e&&(!!e.select||y(e.startContainer)&&y(e.endContainer))},x=function(e,t,n,r){var o=this;o.dom=e,o.win=t,o.serializer=n,o.editor=r,o.bookmarkManager=new i(o),o.controlSelection=new a(o,r)};return x.prototype={setCursorLocation:function(e,t){var n=this,r=n.dom.createRng();e?(r.setStart(e,t),r.setEnd(e,t),n.setRng(r),n.collapse(!1)):(n._moveEndPoint(r,n.editor.getBody(),!0),n.setRng(r))},getContent:function(e){return f.getContent(this.editor,e)},setContent:function(e,t){m.setContent(this.editor,e,t)},getStart:function(e){var t,n=this,r=n.getRng();return t=r.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&r.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,r.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,r=this,o=r.getRng();return t=o.endContainer,n=o.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,r=this,o=r.dom,i=o.createRng();if(e){if(!t&&r.controlSelection.controlSelect(e))return;n=o.nodeIndex(e),i.setStart(e.parentNode,n),i.setEnd(e.parentNode,n+1),t&&(r._moveEndPoint(i,e,!0),r._moveEndPoint(i,e)),r.setRng(i)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t=this,n=t.getRng();n.collapse(!!e),t.setRng(n)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(){var e,t,r,o,i=this,a=function(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(e){return-1}};if(!i.win)return null;if(void 0===(o=i.win.document)||null===o)return null;if(i.editor.bookmark!==undefined&&!1===n.hasFocus(i.editor)){var u=p.getRng(i.editor);if(u.isSome())return u.getOr(o.createRange())}try{(e=i.getSel())&&(t=e.rangeCount>0?e.getRangeAt(0):e.createRange?e.createRange():o.createRange())}catch(e){}return t=l.processRanges(i.editor,[t])[0],t||(t=o.createRange?o.createRange():o.body.createTextRange()),t.setStart&&9===t.startContainer.nodeType&&t.collapsed&&(r=i.dom.getRoot(),t.setStart(r,0),t.setEnd(r,0)),i.selectedRange&&i.explicitRange&&(0===a(t.START_TO_START,t,i.selectedRange)&&0===a(t.END_TO_END,t,i.selectedRange)?t=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),t},setRng:function(e,t){var n,o,i,a=this;if(b(e))if(e.select){a.explicitRange=null;try{e.select()}catch(e){}}else{if(n=a.getSel(),i=a.editor.fire("SetSelectionRange",{range:e,forward:t}),
e=i.range,n){a.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(e){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),a.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}e.collapsed||e.startContainer!==e.endContainer||!n.setBaseAndExtent||r.ie||e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()&&(o=e.startContainer.childNodes[e.startOffset])&&"IMG"===o.tagName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(o,0,o,1)),a.editor.fire("AfterSetSelectionRange",{range:e,forward:t})}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){var e,t,n,r,o,i=this,a=i.getRng(),u=i.dom.getRoot(),c=function(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n};return a?(t=a.startContainer,n=a.endContainer,r=a.startOffset,o=a.endOffset,e=a.commonAncestorContainer,!a.collapsed&&(t==n&&o-r<2&&t.hasChildNodes()&&(e=t.childNodes[r]),3===t.nodeType&&3===n.nodeType&&(t=t.length===r?c(t.nextSibling,!0):t.parentNode,n=0===o?c(n.previousSibling,!1):n.parentNode,t&&t===n))?t:e&&3==e.nodeType?e.parentNode:e):u},getSelectedBlocks:function(e,t){var n,r,o=this,i=o.dom,a=[];if(r=i.getRoot(),e=i.getParent(e||o.getStart(),i.isBlock),t=i.getParent(t||o.getEnd(),i.isBlock),e&&e!=r&&a.push(e),e&&t&&e!=t){n=e;for(var u=new s(e,r);(n=u.next())&&n!=t;)i.isBlock(n)&&a.push(n)}return t&&e!=t&&t!=r&&a.push(t),a},isForward:function(){var e,t,n=this.dom,r=this.getSel();return!(r&&r.anchorNode&&r.focusNode)||(e=n.createRng(),e.setStart(r.anchorNode,r.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(r.focusNode,r.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){var e=this,t=e.getRng();return new u(e.dom).normalize(t)&&!d.hasMultipleRanges(e.getSel())&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.on("NodeChange",function(e){var t=e.element,o=r.dom,i=o.getParents(t,null,o.getRoot()),a={};h(r.selectorChangedData,function(e,t){h(i,function(r){if(o.is(r,t))return n[t]||(h(e,function(e){e(!0,{node:r,selector:t,parents:i})}),n[t]=e),a[t]=e,!1})}),h(n,function(e,r){a[r]||(delete n[r],h(e,function(e){e(!1,{node:t,selector:r,parents:i})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e,t){c.scrollIntoView(this.editor,e,t)},placeCaretAt:function(e,t){this.setRng(u.getCaretRangeFromPoint(e,t,this.editor.getDoc()))},_moveEndPoint:function(e,t,n){var o=t,i=new s(t,o),a=this.dom.schema.getNonEmptyElements();do{if(3==t.nodeType&&0!==v(t.nodeValue).length)return void(n?e.setStart(t,0):e.setEnd(t,t.nodeValue.length));if(a[t.nodeName]&&!/^(TD|TH)$/.test(t.nodeName))return void(n?e.setStartBefore(t):"BR"==t.nodeName?e.setEndBefore(t):e.setEndAfter(t));if(r.ie&&r.ie<11&&this.dom.isBlock(t)&&this.dom.isEmpty(t))return void(n?e.setStart(t,0):e.setEnd(t,0))}while(t=n?i.next():i.prev());"BODY"==o.nodeName&&(n?e.setStart(o,0):e.setEnd(o,o.childNodes.length))},getBoundingClientRect:function(){var e=this.getRng();return e.collapsed?o.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function(){this.win=null,this.controlSelection.destroy()}},x}),i("tinymce.core.html.Node",[],function(){var e=/^[ \t\r\n]*$/,t={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},n=function(e,t,n){var r,o,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(r=e[a])return r;for(o=e.parent;o&&o!==t;o=o.parent)if(r=o[a])return r}},r=function(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})};return r.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,r,o,i=this;if("string"!=typeof e){for(r in e)i.attr(r,e[r]);return i}if(n=i.attributes){if(t!==o){if(null===t){if(e in n.map)for(delete n.map[e],r=n.length;r--;)if(n[r].name===e)return n=n.splice(r,1),i;return i}if(e in n.map){for(r=n.length;r--;)if(n[r].name===e){n[r].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},clone:function(){var e,t,n,o,i,a=this,u=new r(a.name,a.type);if(n=a.attributes){for(i=[],i.map={},e=0,t=n.length;e<t;e++)o=n[e],"id"!==o.name&&(i[i.length]={name:o.name,value:o.value},i.map[o.name]=o.value);u.attributes=i}return u.value=a.value,u.shortEnded=a.shortEnded,u},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,r=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):r.next=n,t.lastChild===e?(t.lastChild=r,r&&(r.next=null)):n.prev=r,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var r;return e.parent&&e.remove(),r=t.parent||this,n?(t===r.firstChild?r.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===r.lastChild?r.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=r,e},getAll:function(e){var t,r=this,o=[];for(t=r.firstChild;t;t=n(t,r))t.name===e&&o.push(t);return o},empty:function(){var e,t,r,o=this;if(o.firstChild){for(e=[],r=o.firstChild;r;r=n(r,o))e.push(r);for(t=e.length;t--;)r=e[t],r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(t,r,o){var i,a,u=this,c=u.firstChild;if(r=r||{},c)do{if(1===c.type){if(c.attributes.map["data-mce-bogus"])continue;if(t[c.name])return!1;for(i=c.attributes.length;i--;)if("name"===(a=c.attributes[i].name)||0===a.indexOf("data-mce-bookmark"))return!1}if(8===c.type)return!1;if(3===c.type&&!e.test(c.value))return!1;if(3===c.type&&c.parent&&r[c.parent.name]&&e.test(c.value))return!1;if(o&&o(c))return!1}while(c=n(c,u));return!0},walk:function(e){return n(this,null,e)}},r.create=function(e,n){var o,i;if(o=new r(e,t[e]||1),n)for(i in n)o.attr(i,n[i]);return o},r}),i("tinymce.core.html.SaxParser",["tinymce.core.html.Schema","tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t,n){var r=n.each,o=function(e){return 0===e.indexOf("data-")||0===e.indexOf("aria-")},i=function(e){return e.replace(/<!--|-->/g,"")},a=function(e,t,n){var r,o,i,a,u=1;for(a=e.getShortEndedElements(),i=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,i.lastIndex=r=n;o=i.exec(t);){if(r=i.lastIndex,"/"===o[1])u--;else if(!o[1]){if(o[2]in a)continue;u++}if(0===u)break}return r},u=function(u,c){var s=this,l=function(){};u=u||{},s.schema=c=c||new e,!1!==u.fix_self_closing&&(u.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(s[e]=u[e]||l)}),s.parse=function(e){var r,s,l,f,d,p,m,g,h,v,y,b,x,w,C,k,T,S,E,_,A,N,D,R,P,I,O,B,M,L,F=this,H=0,U=[],W=0,j=t.decode,q=n.makeMap("src,href,data,background,formaction,poster"),$=/((java|vb)script|mhtml):/i,z=/^data:/i,V=function(e){var t,n;for(t=U.length;t--&&U[t].name!==e;);if(t>=0){for(n=U.length-1;n>=t;n--)e=U[n],e.valid&&F.end(e.name);U.length=t}},K=function(e,t,n,r,i){var a,c,s=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in y?t:j(n||r||i||""),x&&!g&&!1===o(t)){if(!(a=S[t])&&E){for(c=E.length;c--&&(a=E[c],!a.pattern.test(t)););-1===c&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(q[t]&&!u.allow_script_urls){var l=n.replace(s,"");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if($.test(l))return;if(!u.allow_html_data_urls&&z.test(l)&&!/^data:image\//i.test(l))return}g&&(t in q||0===t.indexOf("on"))||(f.map[t]=n,f.push({name:t,value:n}))};for(I=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),O=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=c.getShortEndedElements(),P=u.self_closing_elements||c.getSelfClosingElements(),y=c.getBoolAttrs(),x=u.validate,h=u.remove_internals,L=u.fix_self_closing,B=c.getSpecialElements(),D=e+">";r=I.exec(D);){if(H<r.index&&F.text(j(e.substr(H,r.index-H))),s=r[6])s=s.toLowerCase(),":"===s.charAt(0)&&(s=s.substr(1)),V(s);else if(s=r[7]){if(r.index+r[0].length>e.length){F.text(j(e.substr(r.index))),H=r.index+r[0].length;continue}if(s=s.toLowerCase(),":"===s.charAt(0)&&(s=s.substr(1)),b=s in v,L&&P[s]&&U.length>0&&U[U.length-1].name===s&&V(s),!x||(w=c.getElementRule(s))){if(C=!0,x&&(S=w.attributes,E=w.attributePatterns),(T=r[8])?(g=-1!==T.indexOf("data-mce-type"),g&&h&&(C=!1),f=[],f.map={},T.replace(O,K)):(f=[],f.map={}),x&&!g){if(_=w.attributesRequired,A=w.attributesDefault,N=w.attributesForced,R=w.removeEmptyAttrs,R&&!f.length&&(C=!1),N)for(d=N.length;d--;)k=N[d],m=k.name,M=k.value,"{$uid}"===M&&(M="mce_"+W++),f.map[m]=M,f.push({name:m,value:M});if(A)for(d=A.length;d--;)k=A[d],(m=k.name)in f.map||(M=k.value,"{$uid}"===M&&(M="mce_"+W++),f.map[m]=M,f.push({name:m,value:M}));if(_){for(d=_.length;d--&&!(_[d]in f.map););-1===d&&(C=!1)}if(k=f.map["data-mce-bogus"]){if("all"===k){H=a(c,e,I.lastIndex),I.lastIndex=H;continue}C=!1}}C&&F.start(s,f,b)}else C=!1;if(l=B[s]){l.lastIndex=H=r.index+r[0].length,(r=l.exec(e))?(C&&(p=e.substr(H,r.index-H)),H=r.index+r[0].length):(p=e.substr(H),H=e.length),C&&(p.length>0&&F.text(p,!0),F.end(s)),I.lastIndex=H;continue}b||(T&&T.indexOf("/")==T.length-1?C&&F.end(s):U.push({name:s,valid:C}))}else(s=r[1])?(">"===s.charAt(0)&&(s=" "+s),u.allow_conditional_comments||"[if"!==s.substr(0,3).toLowerCase()||(s=" "+s),F.comment(s)):(s=r[2])?F.cdata(i(s)):(s=r[3])?F.doctype(s):(s=r[4])&&F.pi(s,r[5]);H=r.index+r[0].length}for(H<e.length&&F.text(j(e.substr(H))),d=U.length-1;d>=0;d--)s=U[d],s.valid&&F.end(s.name)}};return u.findEndTag=a,u}),i("tinymce.core.html.DomParser",["tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.html.SaxParser","tinymce.core.util.Tools"],function(e,t,n,r){var o=r.makeMap,i=r.each,a=r.explode,u=r.extend,c=function(t,n){t.padd_empty_with_br?n.empty().append(new e("br","1")).shortEnded=!0:n.empty().append(new e("#text","3")).value="\xa0"},s=function(e,t){return e&&e.firstChild===e.lastChild&&e.firstChild.name===t},l=function(e,t){var n=e.getElementRule(t.name);return n&&n.paddEmpty},f=function(e,t,n,r){return r.isEmpty(t,n,function(t){return l(e,t)})};return function(l,d){var p=this,m={},g=[],h={},v={};l=l||{},l.validate=!("validate"in l)||l.validate,l.root_name=l.root_name||"body",p.schema=d=d||new t;var y=function(t){var n,r,i,a,u,c,l,m,g,h,v,y,b,x,w,C;for(y=o("tr,td,th,tbody,thead,tfoot,table"),h=d.getNonEmptyElements(),v=d.getWhiteSpaceElements(),b=d.getTextBlockElements(),x=d.getSpecialElements(),n=0;n<t.length;n++)if(r=t[n],r.parent&&!r.fixed)if(b[r.name]&&"li"==r.parent.name){for(w=r.next;w&&b[w.name];)w.name="li",w.fixed=!0,r.parent.insert(w,r.parent),w=w.next;r.unwrap(r)}else{for(a=[r],i=r.parent;i&&!d.isValidChild(i.name,r.name)&&!y[i.name];i=i.parent)a.push(i);if(i&&a.length>1){for(a.reverse(),u=c=p.filterNode(a[0].clone()),g=0;g<a.length-1;g++){for(d.isValidChild(c.name,a[g].name)?(l=p.filterNode(a[g].clone()),c.append(l)):l=c,m=a[g].firstChild;m&&m!=a[g+1];)C=m.next,l.append(m),m=C;c=l}f(d,h,v,u)?i.insert(r,a[0],!0):(i.insert(u,a[0],!0),i.insert(r,u)),i=a[0],(f(d,h,v,i)||s(i,"br"))&&i.empty().remove()}else if(r.parent){if("li"===r.name){if((w=r.prev)&&("ul"===w.name||"ul"===w.name)){w.append(r);continue}if((w=r.next)&&("ul"===w.name||"ul"===w.name)){w.insert(r,w.firstChild,!0);continue}r.wrap(p.filterNode(new e("ul",1)));continue}d.isValidChild(r.parent.name,"div")&&d.isValidChild("div",r.name)?r.wrap(p.filterNode(new e("div",1))):x[r.name]?r.empty().remove():r.unwrap()}}};p.filterNode=function(e){var t,n,r;n in m&&(r=h[n],r?r.push(e):h[n]=[e]),t=g.length;for(;t--;)(n=g[t].name)in e.attributes.map&&(r=v[n],r?r.push(e):v[n]=[e]);return e},p.addNodeFilter=function(e,t){i(a(e),function(e){var n=m[e];n||(m[e]=n=[]),n.push(t)})},p.addAttributeFilter=function(e,t){i(a(e),function(e){var n;for(n=0;n<g.length;n++)if(g[n].name===e)return void g[n].callbacks.push(t);g.push({name:e,callbacks:[t]})})},p.parse=function(t,r){var i,a,s,p,b,x,w,C,k,T,S,E,_,A,N,D,R,P,I,O,B,M=[];r=r||{},h={},v={},E=u(o("script,style,head,html,body,title,meta,param"),d.getBlockElements()),O=d.getNonEmptyElements(),I=d.children,S=l.validate,B="forced_root_block"in r?r.forced_root_block:l.forced_root_block,P=d.getWhiteSpaceElements(),_=/^[ \t\r\n]+/,N=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,R=/^[ \t\r\n]+$/;var L=function(){var e,t,n=a.firstChild,r=function(e){e&&(n=e.firstChild,n&&3==n.type&&(n.value=n.value.replace(_,"")),(n=e.lastChild)&&3==n.type&&(n.value=n.value.replace(N,"")))};if(d.isValidChild(a.name,B.toLowerCase())){for(;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!E[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=F(B,1),t.attr(l.forced_root_block_attrs),a.insert(t,n),t.append(n)):(r(t),t=null),n=e;r(t)}},F=function(t,n){var r,o=new e(t,n);return t in m&&(r=h[t],r?r.push(o):h[t]=[o]),o},H=function(e){var t,n,r,o,i=d.getBlockElements();for(t=e.prev;t&&3===t.type;){if(r=t.value.replace(N,""),r.length>0)return void(t.value=r);if(n=t.next){if(3==n.type&&n.value.length){t=t.prev;continue}if(!i[n.name]&&"script"!=n.name&&"style"!=n.name){t=t.prev;continue}}o=t.prev,t.remove(),t=o}},U=function(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n};if(i=new n({validate:S,allow_script_urls:l.allow_script_urls,allow_conditional_comments:l.allow_conditional_comments,self_closing_elements:U(d.getSelfClosingElements()),cdata:function(e){s.append(F("#cdata",4)).value=e},text:function(e,t){var n;A||(e=e.replace(D," "),s.lastChild&&E[s.lastChild.name]&&(e=e.replace(_,""))),0!==e.length&&(n=F("#text",3),n.raw=!!t,s.append(n).value=e)},comment:function(e){s.append(F("#comment",8)).value=e},pi:function(e,t){s.append(F(e,7)).value=t,H(s)},doctype:function(e){var t;t=s.append(F("#doctype",10)),t.value=e,H(s)},start:function(e,t,n){var r,o,i,a,u;if(i=S?d.getElementRule(e):{}){for(r=F(i.outputName||e,1),r.attributes=t,r.shortEnded=n,s.append(r),u=I[s.name],u&&I[r.name]&&!u[r.name]&&M.push(r),o=g.length;o--;)(a=g[o].name)in t.map&&(k=v[a],k?k.push(r):v[a]=[r]);E[e]&&H(r),n||(s=r),!A&&P[e]&&(A=!0)}},end:function(e){var t,n,r,o,i;if(n=S?d.getElementRule(e):{}){if(E[e]&&!A){if((t=s.firstChild)&&3===t.type)if(r=t.value.replace(_,""),r.length>0)t.value=r,t=t.next;else for(o=t.next,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.next,(0===r.length||R.test(r))&&(t.remove(),t=o),t=o;if((t=s.lastChild)&&3===t.type)if(r=t.value.replace(N,""),r.length>0)t.value=r,t=t.prev;else for(o=t.prev,t.remove(),t=o;t&&3===t.type;)r=t.value,o=t.prev,(0===r.length||R.test(r))&&(t.remove(),t=o),t=o}if(A&&P[e]&&(A=!1),(n.removeEmpty||n.paddEmpty)&&f(d,O,P,s))if(n.paddEmpty)c(l,s);else if(!s.attributes.map.name&&!s.attributes.map.id)return i=s.parent,E[s.name]?s.empty().remove():s.unwrap(),void(s=i);s=s.parent}}},d),a=s=new e(r.context||l.root_name,11),i.parse(t),S&&M.length&&(r.context?r.invalid=!0:y(M)),B&&("body"==a.name||r.isRootContent)&&L(),!r.invalid){for(T in h){for(k=m[T],p=h[T],w=p.length;w--;)p[w].parent||p.splice(w,1);for(b=0,x=k.length;b<x;b++)k[b](p,T,r)}for(b=0,x=g.length;b<x;b++)if(k=g[b],k.name in v){for(p=v[k.name],w=p.length;w--;)p[w].parent||p.splice(w,1);for(w=0,C=k.callbacks.length;w<C;w++)k.callbacks[w](p,k.name,r)}}return a},l.remove_trailing_brs&&p.addNodeFilter("br",function(t){var n,r,o,i,a,s,p,m,g=t.length,h=u({},d.getBlockElements()),v=d.getNonEmptyElements(),y=d.getNonEmptyElements();for(h.body=1,n=0;n<g;n++)if(r=t[n],o=r.parent,h[r.parent.name]&&r===o.lastChild){for(a=r.prev;a;){if("span"!==(s=a.name)||"bookmark"!==a.attr("data-mce-type")){if("br"!==s)break;if("br"===s){r=null;break}}a=a.prev}r&&(r.remove(),f(d,v,y,o)&&(p=d.getElementRule(o.name))&&(p.removeEmpty?o.remove():p.paddEmpty&&c(l,o)))}else{for(i=r;o&&o.firstChild===i&&o.lastChild===i&&(i=o,!h[o.name]);)o=o.parent;i===o&&!0!==l.padd_empty_with_br&&(m=new e("#text",3),m.value="\xa0",r.replace(m))}}),p.addAttributeFilter("href",function(e){var t,n=e.length,o=function(e){return e.split(" ").filter(function(e){return e.length>0}).concat(["noopener"]).sort().join(" ")},i=function(e){var t=e?r.trim(e):"";return/\b(noopener)\b/g.test(t)?t:o(t)};if(!l.allow_unsafe_link_target)for(;n--;)t=e[n],"a"===t.name&&"_blank"===t.attr("target")&&t.attr("rel",i(t.attr("rel")))}),l.allow_html_in_named_anchor||p.addAttributeFilter("id,name",function(e){for(var t,n,r,o,i=e.length;i--;)if(o=e[i],"a"===o.name&&o.firstChild&&!o.attr("href")){r=o.parent,t=o.lastChild;do{n=t.prev,r.insert(t,o),t=n}while(t)}}),l.fix_list_elements&&p.addNodeFilter("ul,ol",function(t){for(var n,r,o=t.length;o--;)if(n=t[o],r=n.parent,"ul"===r.name||"ol"===r.name)if(n.prev&&"li"===n.prev.name)n.prev.append(n);else{var i=new e("li",1);i.attr("style","list-style-type: none"),n.wrap(i)}}),l.validate&&d.getValidClasses()&&p.addAttributeFilter("class",function(e){for(var t,n,r,o,i,a,u,c=e.length,s=d.getValidClasses();c--;){for(t=e[c],n=t.attr("class").split(" "),i="",r=0;r<n.length;r++)o=n[r],u=!1,a=s["*"],a&&a[o]&&(u=!0),a=s[t.name],!u&&a&&a[o]&&(u=!0),u&&(i&&(i+=" "),i+=o);i.length||(i=null),t.attr("class",i)}})}}),i("tinymce.core.html.Writer",["tinymce.core.html.Entities","tinymce.core.util.Tools"],function(e,t){var n=t.makeMap;return function(t){var r,o,i,a,u,c=[];return t=t||{},r=t.indent,o=n(t.indent_before||""),i=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),u="html"==t.element_format,{start:function(e,t,n){var s,l,f,d;if(r&&o[e]&&c.length>0&&(d=c[c.length-1],d.length>0&&"\n"!==d&&c.push("\n")),c.push("<",e),t)for(s=0,l=t.length;s<l;s++)f=t[s],c.push(" ",f.name,'="',a(f.value,!0),'"');c[c.length]=!n||u?">":" />",n&&r&&i[e]&&c.length>0&&(d=c[c.length-1],d.length>0&&"\n"!==d&&c.push("\n"))},end:function(e){var t;c.push("</",e,">"),r&&i[e]&&c.length>0&&(t=c[c.length-1],t.length>0&&"\n"!==t&&c.push("\n"))},text:function(e,t){e.length>0&&(c[c.length]=t?e:a(e))},cdata:function(e){c.push("<![CDATA[",e,"]]>")},comment:function(e){c.push("<!--",e,"-->")},pi:function(e,t){t?c.push("<?",e," ",a(t),"?>"):c.push("<?",e,"?>"),r&&c.push("\n")},doctype:function(e){c.push("<!DOCTYPE",e,">",r?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}}}),i("tinymce.core.html.Serializer",["tinymce.core.html.Writer","tinymce.core.html.Schema"],function(e,t){return function(n,r){var o=this,i=new e(n);n=n||{},n.validate=!("validate"in n)||n.validate,o.schema=r=r||new t,o.writer=i,o.serialize=function(e){var t,o;o=n.validate,t={3:function(e){i.text(e.value,e.raw)},8:function(e){i.comment(e.value)},7:function(e){i.pi(e.name,e.value)},10:function(e){i.doctype(e.value)},4:function(e){i.cdata(e.value)},11:function(e){if(e=e.firstChild)do{a(e)}while(e=e.next)}},i.reset();var a=function(e){var n,u,c,s,l,f,d,p,m,g=t[e.type];if(g)g(e);else{if(n=e.name,u=e.shortEnded,c=e.attributes,o&&c&&c.length>1&&(f=[],f.map={},m=r.getElementRule(e.name))){for(d=0,p=m.attributesOrder.length;d<p;d++)(s=m.attributesOrder[d])in c.map&&(l=c.map[s],f.map[s]=l,f.push({name:s,value:l}));for(d=0,p=c.length;d<p;d++)(s=c[d].name)in f.map||(l=c.map[s],f.map[s]=l,f.push({name:s,value:l}));c=f}if(i.start(e.name,c,u),!u){if(e=e.firstChild)do{a(e)}while(e=e.next);i.end(n)}}};return 1!=e.type||n.inner?t[11](e):a(e),i.getContent()}}}),i("tinymce.core.dom.Serializer",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.html.DomParser","tinymce.core.html.Entities","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l){var f=l.each,d=l.trim,p=t.DOM,m=function(e){var t,n,r=function(e){return e&&"br"===e.name};t=e.lastChild,r(t)&&(n=t.prev,r(n)&&(t.remove(),n.remove()))};return function(t,i){var g,h,v,y=["data-mce-selected"];i&&(g=i.dom,h=i.schema);var b=function(e){var t=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[\u200b\ufeff]+<\\/span>","\\s?("+y.join("|")+')="[^"]+"'].join("|"),"gi");return e=s.trim(e.replace(t,""))},x=function(e){var t,n,r,o,u,c=e,s=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,l=i.schema;for(c=b(c),u=l.getShortEndedElements();o=s.exec(c);)n=s.lastIndex,r=o[0].length,t=u[o[1]]?n:a.findEndTag(l,c,n),c=c.substring(0,n-r)+c.substring(t),s.lastIndex=n-r;return c},w=function(){return x(i.getBody().innerHTML)},C=function(e){-1===l.inArray(y,e)&&(v.addAttributeFilter(e,function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),y.push(e))};return g=g||p,h=h||new u(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs,v=new r(t,h),v.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,r=e.length;r--;)n=e[r],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),v.addAttributeFilter("src,href,style",function(e,n){for(var r,o,i,a=e.length,u="data-mce-"+n,c=t.url_converter,s=t.url_converter_scope;a--;)r=e[a],o=r.attributes.map[u],o!==i?(r.attr(n,o.length>0?o:null),r.attr(u,null)):(o=r.attributes.map[n],"style"===n?o=g.serializeStyle(g.parseStyle(o),r.name):c&&(o=c.call(s,o,n,r.name)),r.attr(n,o.length>0?o:null))}),v.addAttributeFilter("class",function(e){for(var t,n,r=e.length;r--;)t=e[r],(n=t.attr("class"))&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),v.addAttributeFilter("data-mce-type",function(e,t,n){for(var r,o=e.length;o--;)r=e[o],"bookmark"!==r.attributes.map["data-mce-type"]||n.cleanup||r.remove()}),v.addNodeFilter("noscript",function(e){for(var t,n=e.length;n--;)(t=e[n].firstChild)&&(t.value=o.decode(t.value))}),v.addNodeFilter("script,style",function(e,t){for(var n,r,o,i=e.length,a=function(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)n=e[i],r=n.firstChild?n.firstChild.value:"","script"===t?(o=n.attr("type"),o&&n.attr("type","mce-no/type"==o?null:o.replace(/^mce\-/,"")),r.length>0&&(n.firstChild.value="// <![CDATA[\n"+a(r)+"\n// ]]>")):r.length>0&&(n.firstChild.value="<!--\n"+a(r)+"\n-->")}),v.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),v.addNodeFilter("xml:namespace,input",function(e,t){for(var n,r=e.length;r--;)n=e[r],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),v.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:h,addNodeFilter:v.addNodeFilter,addAttributeFilter:v.addAttributeFilter,serialize:function(r,o){var i,a,u,l,p,y,b=this;return n.ie&&g.select("script,style,select,map").length>0?(p=r.innerHTML,r=r.cloneNode(!1),g.setHTML(r,p)):r=r.cloneNode(!0),i=e.implementation,i.createHTMLDocument&&(a=i.createHTMLDocument(""),f("BODY"==r.nodeName?r.childNodes:[r],function(e){a.body.appendChild(a.importNode(e,!0))}),r="BODY"!=r.nodeName?a.body.firstChild:a.body,u=g.doc,g.doc=a),o=o||{},o.format=o.format||"html",o.selection&&(o.forced_root_block=""),o.no_events||(o.node=r,b.onPreProcess(o)),p=s.trim(d(o.getInner?r.innerHTML:g.getOuterHTML(r))),y=v.parse(p,o),m(y),l=new c(t,h),o.content=l.serialize(y),o.no_events||b.onPostProcess(o),u&&(g.doc=u),o.node=null,o.content},addRules:function(e){h.addValidElements(e)},setRules:function(e){h.setValidElements(e)},onPreProcess:function(e){i&&i.fire("PreProcess",e)},onPostProcess:function(e){i&&i.fire("PostProcess",e)},addTempAttr:C,trimHtml:b,getTrimmedContent:w,trimContent:x}}}),i("tinymce.core.InsertList",["tinymce.core.util.Tools","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition"],function(e,t,n){var r=function(e){return e.firstChild&&e.firstChild===e.lastChild},o=function(e){return"br"===e.name||"\xa0"===e.value},i=function(e,t){return e.getBlockElements()[t.name]&&r(t)&&o(t.firstChild)},a=function(e,t){var n=e.getNonEmptyElements();return t&&(t.isEmpty(n)||i(e,t))},u=function(e,t){var n=t.firstChild,r=t.lastChild;return n&&"meta"===n.name&&(n=n.next),r&&"mce_marker"===r.attr("id")&&(r=r.prev),a(e,r)&&(r=r.prev),!(!n||n!==r)&&("ul"===n.name||"ol"===n.name)},c=function(e){var t=e.firstChild,n=e.lastChild;return t&&"META"===t.nodeName&&t.parentNode.removeChild(t),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),e},s=function(e,t,n){var r=t.serialize(n),o=e.createFragment(r);return c(o)},l=function(t){return e.grep(t.childNodes,function(e){return"LI"===e.nodeName})},f=function(e){return!e.firstChild},d=function(e){return e.length>0&&f(e[e.length-1])?e.slice(0,-1):e},p=function(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},m=function(e,t){return!!p(e,t)},g=function(e,t){var n=t.cloneRange(),r=t.cloneRange();return n.setStartBefore(e),r.setEndAfter(e),[n.cloneContents(),r.cloneContents()]},h=function(e,r){var o=n.before(e),i=new t(r),a=i.next(o);return a?a.toRange():null},v=function(e,r){var o=n.after(e),i=new t(r),a=i.prev(o);return a?a.toRange():null},y=function(t,n,r,o){var i=g(t,o),a=t.parentNode;return a.insertBefore(i[0],t),e.each(n,function(e){a.insertBefore(e,t)}),a.insertBefore(i[1],t),a.removeChild(t),v(n[n.length-1],r)},b=function(t,n,r){var o=t.parentNode;return e.each(n,function(e){o.insertBefore(e,t)}),h(t,r)},x=function(e,t,n,r){return r.insertAfter(t.reverse(),e),v(t[0],n)};return{isListFragment:u,insertAtCaret:function(e,r,o,i){var a=s(r,e,i),u=p(r,o.startContainer),c=d(l(a.firstChild)),f=1,m=r.getRoot(),g=function(e){var i=n.fromRangeStart(o),a=new t(r.getRoot()),c=e===f?a.prev(i):a.next(i);return!c||p(r,c.getNode())!==u};return g(f)?b(u,c,m):g(2)?x(u,c,m,r):y(u,c,m,o)},isParentBlockLi:m,trimListItems:d,listItems:l}}),i("tinymce.core.InsertContent",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.ElementUtils","tinymce.core.dom.NodeType","tinymce.core.dom.PaddingBr","tinymce.core.dom.RangeNormalizer","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.InsertList","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=i.matchNodeNames("td th"),p=function(e,t,n){if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(e.dom.createFragment(t),n);else{var r=n.firstChild,o=n.lastChild;!r||r===o&&"BR"===r.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t)}},m=function(n,r){e.from(n.getParent(r,"td,th")).map(t.fromDom).each(a.trimBlockTrailingBr)},g=function(e,t,i){var a,g,h,v,y,b,x,w,C,k,T,S,E=e.schema.getTextInlineElements(),_=e.selection,A=e.dom,N=function(e){var t,n,r;t=_.getRng(!0),n=t.startContainer,r=t.startOffset;var o=function(e){return n[e]&&3==n[e].nodeType};return 3==n.nodeType&&(r>0?e=e.replace(/^&nbsp;/," "):o("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),r<n.length?e=e.replace(/&nbsp;(<br>|)$/," "):o("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e},D=function(){var e,n,r;e=_.getRng(!0),n=e.startContainer,r=e.startOffset,3==n.nodeType&&e.collapsed&&("\xa0"===n.data[r]?(n.deleteData(r,1),/[\u00a0| ]$/.test(t)||(t+=" ")):"\xa0"===n.data[r-1]&&(n.deleteData(r-1,1),/[\u00a0| ]$/.test(t)||(t=" "+t)))},R=function(){if(S){var t=e.getBody(),n=new o(A);f.each(A.select("*[data-mce-fragment]"),function(e){for(var r=e.parentNode;r&&r!=t;r=r.parentNode)E[e.nodeName.toLowerCase()]&&n.compare(r,e)&&A.remove(e,!0)})}},P=function(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")},I=function(e){f.each(e.getElementsByTagName("*"),function(e){e.removeAttribute("data-mce-fragment")})},O=function(e){return!!e.getAttribute("data-mce-fragment")},B=function(t){return t&&!e.schema.getShortEndedElements()[t.nodeName]},M=function(t){var o,i,a,u=function(t){for(var n=e.getBody();t&&t!==n;t=t.parentNode)if("false"===e.dom.getContentEditable(t))return t;return null};if(t){if(_.scrollIntoView(t),o=u(t))return A.remove(t),void _.select(o);w=A.createRng(),C=t.previousSibling,C&&3==C.nodeType?(w.setStart(C,C.nodeValue.length),c.ie||(k=t.nextSibling)&&3==k.nodeType&&(C.appendData(k.data),k.parentNode.removeChild(k))):(w.setStartBefore(t),w.setEndBefore(t));var s=function(t){var o=n.fromRangeStart(t);if(o=new r(e.getBody()).next(o))return o.toRange()};i=A.getParent(t,A.isBlock),A.remove(t),i&&A.isEmpty(i)&&(e.$(i).empty(),w.setStart(i,0),w.setEnd(i,0),d(i)||O(i)||!(a=s(w))?A.add(i,A.create("br",{"data-mce-bogus":"1"})):(w=a,A.remove(i))),_.setRng(w)}};if(/^ | $/.test(t)&&(t=N(t)),a=e.parser,S=i.merge,g=new s({validate:e.settings.validate},e.schema),T='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',b={content:t,format:"html",selection:!0,paste:i.paste},b=e.fire("BeforeSetContent",b),b.isDefaultPrevented())return void e.fire("SetContent",{content:b.content,format:"html",selection:!0,paste:i.paste});t=b.content,-1==t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,T),w=_.getRng();var L=w.startContainer||(w.parentElement?w.parentElement():null),F=e.getBody();L===F&&_.isCollapsed()&&A.isBlock(F.firstChild)&&B(F.firstChild)&&A.isEmpty(F.firstChild)&&(w=A.createRng(),w.setStart(F.firstChild,0),w.setEnd(F.firstChild,0),_.setRng(w)),_.isCollapsed()||(e.selection.setRng(u.normalize(e.selection.getRng())),e.getDoc().execCommand("Delete",!1,null),D()),h=_.getNode();var H={context:h.nodeName.toLowerCase(),data:i.data};if(y=a.parse(t,H),!0===i.paste&&l.isListFragment(e.schema,y)&&l.isParentBlockLi(A,h))return w=l.insertAtCaret(g,A,e.selection.getRng(!0),y),e.selection.setRng(w),void e.fire("SetContent",b);if(P(y),C=y.lastChild,"mce_marker"==C.attr("id"))for(x=C,C=C.prev;C;C=C.walk(!0))if(3==C.type||!A.isBlock(C.name)){e.schema.isValidChild(C.parent.name,"span")&&C.parent.insert(x,C,"br"===C.name);break}if(e._selectionOverrides.showBlockCaretContainer(h),H.invalid){for(_.setContent(T),h=_.getNode(),v=e.getBody(),9==h.nodeType?h=C=v:C=h;C!==v;)h=C,C=C.parentNode;t=h==v?v.innerHTML:A.getOuterHTML(h),t=g.serialize(a.parse(t.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(y)}))),h==v?A.setHTML(v,t):A.setOuterHTML(h,t)}else t=g.serialize(y),p(e,t,h);R(),M(A.get("mce_marker")),I(e.getBody()),m(e.dom,e.selection.getStart()),e.fire("SetContent",b),e.addVisual()},h=function(e){var t;return"string"!=typeof e?(t=f.extend({paste:e.paste,data:{paste:e.paste}},e),{content:e.content,details:t}):{content:e,details:{}}};return{insertAtCaret:function(e,t){var n=h(t);g(e,n.content,n.details)}}}),i("tinymce.core.delete.DeleteUtils",["ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.PredicateFind","tinymce.core.dom.ElementType"],function(e,t,n,r,o){var i=function(e){return function(r){return t.eq(e,n.fromDom(r.dom().parentNode))}},a=function(e){var t=e.getBody(),n=t.firstChild&&e.dom.isBlock(t.firstChild)?t.firstChild:t;e.selection.setCursorLocation(n,0)};return{getParentBlock:function(n,a){return t.contains(n,a)?r.closest(a,function(e){return o.isTextBlock(e)||o.isListItem(e)},i(n)):e.none()},paddEmptyBody:function(e){e.dom.isEmpty(e.getBody())&&(e.setContent(""),a(e))}}}),i("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(t){return e.first(t).isSome()},ancestor:function(t,n,r){return e.ancestor(t,n,r).isSome()},sibling:function(t,n){return e.sibling(t,n).isSome()},child:function(t,n){return e.child(t,n).isSome()},descendant:function(t,n){return e.descendant(t,n).isSome()},closest:function(t,n,r){return e.closest(t,n,r).isSome()}}}),
i("tinymce.core.dom.Empty",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorExists","tinymce.core.caret.CaretCandidate","tinymce.core.dom.NodeType","tinymce.core.dom.TreeWalker"],function(e,t,n,r,o,i,a){var u=function(o,i){var a=n.fromDom(o),u=n.fromDom(i);return r.ancestor(u,"pre,code",e.curry(t.eq,a))},c=function(e,t){return i.isText(t)&&/^[ \t\r\n]*$/.test(t.data)&&!1===u(e,t)},s=function(e){return i.isElement(e)&&"A"===e.nodeName&&e.hasAttribute("name")},l=function(e,t){return o.isCaretCandidate(t)&&!1===c(e,t)||s(t)||f(t)},f=i.hasAttribute("data-mce-bookmark"),d=i.hasAttribute("data-mce-bogus"),p=i.hasAttributeValue("data-mce-bogus","all"),m=function(e){var t,n,r=0;if(l(e,e))return!1;if(!(n=e.firstChild))return!0;t=new a(n,e);do{if(p(n))n=t.next(!0);else if(d(n))n=t.next();else if(i.isBr(n))r++,n=t.next();else{if(l(e,n))return!1;n=t.next()}}while(n);return r<=1};return{isEmpty:function(e){return m(e.dom())}}}),i("tinymce.core.delete.BlockBoundary",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){var g=o.immutable("block","position"),h=o.immutable("from","to"),v=function(e,t){var n=a.fromDom(e),r=a.fromDom(t.container());return d.getParentBlock(n,r).map(function(e){return g(e,t)})},y=function(e){return!1===i.eq(e.from().block(),e.to().block())},b=function(e){return s.parent(e.from().block()).bind(function(t){return s.parent(e.to().block()).filter(function(e){return i.eq(t,e)})}).isSome()},x=function(e){return!1===m.isContentEditableFalse(e.from().block())&&!1===m.isContentEditableFalse(e.to().block())},w=function(e,t,r){return m.isBr(r.position().getNode())&&!1===p.isEmpty(r.block())?l.positionIn(!1,r.block().dom()).bind(function(o){return o.isEqual(r.position())?l.fromPosition(t,e,o).bind(function(t){return v(e,t)}):n.some(r)}).getOr(r):r},C=function(e,t,n){var o=v(e,f.fromRangeStart(n)),i=o.bind(function(n){return l.fromPosition(t,e,n.position()).bind(function(n){return v(e,n).map(function(n){return w(e,t,n)})})});return r.liftN([o,i],h).filter(function(e){return y(e)&&b(e)&&x(e)})};return{read:function(e,t,r){return r.collapsed?C(e,t,r):n.none()}}}),i("tinymce.core.delete.MergeBlocks",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.NodeType","tinymce.core.dom.Parents"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=function(t){var n=a.children(t);return e.findIndex(n,s.isBlock).fold(function(){return n},function(e){return n.slice(0,e)})},m=function(t){var n=p(t);return e.each(n,function(e){o.remove(e)}),n},g=function(e,t){u.positionIn(e,t.dom()).each(function(e){var t=e.getNode();f.isBr(t)&&o.remove(i.fromDom(t))})},h=function(t,n){var r=d.parentsAndSelf(n,t);return e.find(r.reverse(),l.isEmpty).each(o.remove)},v=function(e,r){var o=a.parents(r,function(t){return n.eq(t,e)});return t.from(o[o.length-2])},y=function(e,r){return n.contains(r,e)?a.parent(e).bind(function(o){return n.eq(o,r)?t.some(e):v(r,e)}):t.none()},b=function(t,n,i){if(l.isEmpty(i))return o.remove(i),u.firstPositionIn(n.dom());g(!0,n),g(!1,i);var a=m(n);return y(n,i).fold(function(){h(t,n);var o=u.lastPositionIn(i.dom());return e.each(a,function(e){r.append(i,e)}),o},function(o){var s=u.prevPosition(i.dom(),c.before(o.dom()));return e.each(a,function(e){r.before(o,e)}),h(t,n),s})};return{mergeBlocks:function(e,t,n,r){return t?b(e,r,n):b(e,n,r)}}}),i("tinymce.core.delete.BlockBoundaryDelete",["ephox.sugar.api.node.Element","tinymce.core.delete.BlockBoundary","tinymce.core.delete.MergeBlocks"],function(e,t,n){return{backspaceDelete:function(r,o){var i,a=e.fromDom(r.getBody());return i=t.read(a.dom(),o,r.selection.getRng()).bind(function(e){return n.mergeBlocks(a,o,e.from().block(),e.to().block())}),i.each(function(e){r.selection.setRng(e.toRange())}),i.isSome()}}}),i("tinymce.core.delete.BlockRangeDelete",["ephox.katamari.api.Options","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteUtils","tinymce.core.delete.MergeBlocks"],function(e,t,n,r,o,i,a){var u=function(r,o){var u=o.getRng();return e.liftN([i.getParentBlock(r,n.fromDom(u.startContainer)),i.getParentBlock(r,n.fromDom(u.endContainer))],function(e,n){return!1===t.eq(e,n)&&(u.deleteContents(),a.mergeBlocks(r,!0,e,n).each(function(e){o.setRng(e.toRange())}),!0)}).getOr(!1)},c=function(e,t){var n=r.prevPosition(e.dom(),o.fromRangeStart(t)).isNone(),i=r.nextPosition(e.dom(),o.fromRangeEnd(t)).isNone();return n&&i},s=function(e){return e.setContent(""),e.selection.setCursorLocation(),!0},l=function(e){var t=n.fromDom(e.getBody()),r=e.selection.getRng();return c(t,r)?s(e):u(t,e.selection)};return{backspaceDelete:function(e){return!e.selection.isCollapsed()&&l(e,e.selection.getRng())}}}),i("tinymce.core.delete.CefDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Option","ephox.sugar.api.node.Element","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteUtils","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,u,c){var s=e.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),l=function(e,t){var n=t.getNode(!1===e),r=e?"after":"before";return c.isElement(n)&&n.getAttribute("data-mce-caret")===r},f=function(e,r,o,i){var c=i.getNode(!1===r);return a.getParentBlock(n.fromDom(e),n.fromDom(o.getNode())).map(function(e){return u.isEmpty(e)?s.remove(e.dom()):s.moveToElement(c)}).orThunk(function(){return t.some(s.moveToElement(c))})},d=function(e,n,o){return r.fromPosition(n,e,o).bind(function(r){return n&&c.isContentEditableFalse(r.getNode())?f(e,n,o,r):!1===n&&c.isContentEditableFalse(r.getNode(!0))?f(e,n,o,r):n&&i.isAfterContentEditableFalse(o)?t.some(s.moveToPosition(r)):!1===n&&i.isBeforeContentEditableFalse(o)?t.some(s.moveToPosition(r)):t.none()})},p=function(e,n){return e&&c.isContentEditableFalse(n.nextSibling)?t.some(s.moveToElement(n.nextSibling)):!1===e&&c.isContentEditableFalse(n.previousSibling)?t.some(s.moveToElement(n.previousSibling)):t.none()},m=function(e,n,r){return l(n,r)?p(n,r.getNode(!1===n)).fold(function(){return d(e,n,r)},t.some):d(e,n,r)};return{read:function(e,n,r){var a=i.normalizeRange(n?1:-1,e,r),u=o.fromRangeStart(a);return!1===n&&i.isAfterContentEditableFalse(u)?t.some(s.remove(u.getNode(!0))):n&&i.isBeforeContentEditableFalse(u)?t.some(s.remove(u.getNode())):m(e,n,u)}}}),i("tinymce.core.delete.DeleteElement",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.Empty","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=function(e,t){var n=e.container(),r=e.offset();return!1===f.isTextPosition(e)&&n===t.parentNode&&r>f.before(t).offset()},g=function(e,t){return m(t,e)?new f(t.container(),t.offset()-1):t},h=function(e){return p.isText(e)?new f(e,0):f.before(e)},v=function(e){return p.isText(e)?new f(e,e.data.length):f.after(e)},y=function(e){return s.isCaretCandidate(e.previousSibling)?t.some(v(e.previousSibling)):e.previousSibling?l.lastPositionIn(e.previousSibling):t.none()},b=function(e){return s.isCaretCandidate(e.nextSibling)?t.some(h(e.nextSibling)):e.nextSibling?l.firstPositionIn(e.nextSibling):t.none()},x=function(e,n){var r=f.before(n.previousSibling?n.previousSibling:n.parentNode);return l.prevPosition(e,r).fold(function(){return l.nextPosition(e,f.after(n))},t.some)},w=function(e,n){return l.nextPosition(e,f.after(n)).fold(function(){return l.prevPosition(e,f.before(n))},t.some)},C=function(e,t){return y(t).orThunk(function(){return b(t)}).orThunk(function(){return x(e,t)})},k=function(e,t){return b(t).orThunk(function(){return y(t)}).orThunk(function(){return w(e,t)})},T=function(e,t,n){return e?k(t,n):C(t,n)},S=function(t,n,r){return T(t,n,r).map(e.curry(g,r))},E=function(e,t,n){n.fold(function(){e.focus()},function(n){e.selection.setRng(n.toRange(),t)})},_=function(e){return function(t){return t.dom()===e}},A=function(e,t){return t&&e.schema.getBlockElements().hasOwnProperty(a.name(t))},N=function(e){if(d.isEmpty(e)){var n=i.fromHtml('<br data-mce-bogus="1">');return o.empty(e),r.append(e,n),t.some(f.before(n.dom()))}return t.none()},D=function(e,t){return n.liftN([c.prevSibling(e),c.nextSibling(e),t],function(t,n,r){var i,a=t.dom(),u=n.dom();return p.isText(a)&&p.isText(u)?(i=a.data.length,a.appendData(u.data),o.remove(n),o.remove(e),r.container()===u?new f(a,i):r):(o.remove(e),r)}).orThunk(function(){return o.remove(e),t})};return{deleteElement:function(n,r,o){var i=S(r,n.getBody(),o.dom()),a=u.ancestor(o,e.curry(A,n),_(n.getBody())),c=D(o,i);a.bind(N).fold(function(){E(n,r,c)},function(e){E(n,r,t.some(e))})}}}),i("tinymce.core.delete.CefDelete",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","tinymce.core.caret.CaretPosition","tinymce.core.delete.CefDeleteAction","tinymce.core.delete.DeleteElement","tinymce.core.delete.DeleteUtils","tinymce.core.dom.NodeType"],function(e,t,n,r,o,i,a,u,c){var s=function(e,t){return function(r){return a.deleteElement(e,t,n.fromDom(r)),!0}},l=function(e,t){return function(n){var r=t?o.before(n):o.after(n);return e.selection.setRng(r.toRange()),!0}},f=function(e){return function(t){return e.selection.setRng(t.toRange()),!0}},d=function(e,t){return i.read(e.getBody(),t,e.selection.getRng()).map(function(n){return n.fold(s(e,t),l(e,t),f(e))}).getOr(!1)},p=function(n){e.each(r.descendants(n,".mce-offscreen-selection"),t.remove)},m=function(e,t){var r=e.selection.getNode();return!!c.isContentEditableFalse(r)&&(p(n.fromDom(e.getBody())),a.deleteElement(e,t,n.fromDom(e.selection.getNode())),u.paddEmptyBody(e),!0)},g=function(e,t){for(;t&&t!==e;){if(c.isContentEditableTrue(t)||c.isContentEditableFalse(t))return t;t=t.parentNode}return null},h=function(e){var t,n=g(e.getBody(),e.selection.getNode());return c.isContentEditableTrue(n)&&e.dom.isBlock(n)&&e.dom.isEmpty(n)&&(t=e.dom.create("br",{"data-mce-bogus":"1"}),e.dom.setHTML(n,""),n.appendChild(t),e.selection.setRng(o.before(t).toRange())),!0};return{backspaceDelete:function(e,t){return e.selection.isCollapsed()?d(e,t):m(e,t)},paddEmptyElement:h}}),i("tinymce.core.caret.CaretContainerInline",["ephox.katamari.api.Fun","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n){var r=t.isText,o=function(e){return r(e)&&e.data[0]===n.ZWSP},i=function(e){return r(e)&&e.data[e.data.length-1]===n.ZWSP},a=function(e){return e.ownerDocument.createTextNode(n.ZWSP)},u=function(e){if(r(e.previousSibling))return i(e.previousSibling)?e.previousSibling:(e.previousSibling.appendData(n.ZWSP),e.previousSibling);if(r(e))return o(e)?e:(e.insertData(0,n.ZWSP),e);var t=a(e);return e.parentNode.insertBefore(t,e),t},c=function(e){if(r(e.nextSibling))return o(e.nextSibling)?e.nextSibling:(e.nextSibling.insertData(0,n.ZWSP),e.nextSibling);if(r(e))return i(e)?e:(e.appendData(n.ZWSP),e);var t=a(e);return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t),t},s=function(e,t){return e?u(t):c(t)};return{insertInline:s,insertInlineBefore:e.curry(s,!0),insertInlineAfter:e.curry(s,!1)}}),i("tinymce.core.caret.CaretContainerRemove",["ephox.katamari.api.Arr","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.text.Zwsp"],function(e,t,n,r,o){var i=r.isElement,a=r.isText,u=function(e){var t=e.parentNode;t&&t.removeChild(e)},c=function(e){try{return e.nodeValue}catch(e){return""}},s=function(e,t){0===t.length?u(e):e.nodeValue=t},l=function(e){var t=o.trim(e);return{count:e.length-t.length,text:t}},f=function(e,t){return v(e),t},d=function(e,t){var r=l(e.data.substr(0,t.offset())),o=l(e.data.substr(t.offset())),i=r.text+o.text;return i.length>0?(s(e,i),new n(e,t.offset()-r.count)):t},p=function(t,r){var o=r.container(),i=e.indexOf(o.childNodes,t).map(function(e){return e<r.offset()?new n(o,r.offset()-1):r}).getOr(r);return v(t),i},m=function(e,t){return t.container()===e?d(e,t):f(e,t)},g=function(e,t){return t.container()===e.parentNode?p(e,t):f(e,t)},h=function(e,t){return n.isTextPosition(t)?m(e,t):g(e,t)},v=function(e){if(i(e)&&t.isCaretContainer(e)&&(t.hasContent(e)?e.removeAttribute("data-mce-caret"):u(e)),a(e)){var n=o.trim(c(e));s(e,n)}};return{removeAndReposition:h,remove:v}}),i("tinymce.core.EditorSettings",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.katamari.api.Struct","ephox.katamari.api.Type","ephox.sand.api.PlatformDetection","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c){var s=i.immutable("sections","settings"),l=u.detect(),f=l.deviceType.isTouch(),d=["lists","autolink","autosave"],p={theme:"mobile"},m=function(t){var n=a.isArray(t)?t.join(" "):t,r=e.map(a.isString(n)?n.split(" "):[],o.trim);return e.filter(r,function(e){return e.length>0})},g=function(n){return e.filter(n,t.curry(e.contains,d))},h=function(t,r){var o=n.bifilter(r,function(n,r){return e.contains(t,r)});return s(o.t,o.f)},v=function(e,t,n){var r=e.sections(),o=r.hasOwnProperty(t)?r[t]:{};return c.extend({},n,o)},y=function(e,t){return e.sections().hasOwnProperty(t)},b=function(e,t,n){return{id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:t,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:n.convertURL,url_converter_scope:n,ie7_compat:!0}},x=function(e,t){var n=t.external_plugins?t.external_plugins:{};return e&&e.external_plugins?c.extend({},e.external_plugins,n):n},w=function(e,t){return[].concat(m(e)).concat(m(t))},C=function(e,t,n,r){var o=m(n.forced_plugins),i=m(r.plugins),a=e&&y(t,"mobile")?g(i):i,u=w(o,a);return c.extend(r,{plugins:u.join(" ")})},k=function(e,t){var n=t.settings().inline;return e&&y(t,"mobile")&&!n},T=function(e,t,n,r){var o=h(["mobile"],r),i=c.extend(t,n,o.settings(),k(e,o)?v(o,"mobile",p):{},{validate:!0,content_editable:o.settings().inline,external_plugins:x(n,o.settings())});return C(e,o,n,i)},S=function(e,t,n,r,o){var i=b(t,n,e);return T(f,i,r,o)},E=function(e,t){return r.from(e.settings[t])},_=function(e,t,n){return r.from(t.settings[n]).filter(e)};return{getEditorSettings:S,get:E,getString:t.curry(_,a.isString),combineSettings:T}}),i("tinymce.core.text.Bidi",[],function(){var e=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/;return{hasStrongRtl:function(t){return e.test(t)}}}),i("tinymce.core.keyboard.InlineUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Type","ephox.sugar.api.node.Element","ephox.sugar.api.search.Selectors","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.dom.DOMUtils","tinymce.core.dom.NodeType","tinymce.core.EditorSettings","tinymce.core.text.Bidi"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g){var h=function(e,t){var n=m.getString(e,"inline_boundaries_selector").getOr("a[href],code");return a.is(i.fromDom(t),n)},v=function(e){return"rtl"===d.DOM.getStyle(e,"direction",!0)||g.hasStrongRtl(e.textContent)},y=function(t,n,r){return e.filter(d.DOM.getParents(r.container(),"*",n),t)},b=function(e,t,r){var o=y(e,t,r);return n.from(o[o.length-1])},x=function(e,t,n){var r=l.getParentBlock(t,e),o=l.getParentBlock(n,e);return r&&r===o},w=function(e){return u.isBeforeInline(e)||u.isAfterInline(e)},C=function(e,t){var n=t.container(),r=t.offset();return e?u.isCaretContainerInline(n)?p.isText(n.nextSibling)?new s(n.nextSibling,0):s.after(n):u.isBeforeInline(t)?new s(n,r+1):t:u.isCaretContainerInline(n)?p.isText(n.previousSibling)?new s(n.previousSibling,n.previousSibling.data.length):s.before(n):u.isAfterInline(t)?new s(n,r-1):t};return{isInlineTarget:h,findRootInline:b,isRtl:v,isAtZwsp:w,normalizePosition:C,normalizeForwards:t.curry(C,!0),normalizeBackwards:t.curry(C,!1),hasSameParentBlock:x}}),i("tinymce.core.keyboard.BoundaryCaret",["ephox.katamari.api.Option","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerInline","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a){var u=function(e,t){return a.isText(e.container())?n.insertInline(t,e.container()):n.insertInline(t,e.getNode())},c=function(e,n){var r=n.get();return r&&e.container()===r&&t.isCaretContainerInline(r)};return{renderCaret:function(t,a){return a.fold(function(o){r.remove(t.get());var a=n.insertInlineBefore(o);return t.set(a),e.some(new i(a,a.length-1))},function(e){return o.firstPositionIn(e).map(function(e){if(c(e,t))return new i(t.get(),1);r.remove(t.get());var n=u(e,!0);return t.set(n),new i(n,1)})},function(e){return o.lastPositionIn(e).map(function(e){if(c(e,t))return new i(t.get(),t.get().length-1);r.remove(t.get());var n=u(e,!1);return t.set(n),new i(n,n.length-1)})},function(o){r.remove(t.get());var a=n.insertInlineAfter(o);return t.set(a),e.some(new i(a,1))})}}}),i("tinymce.core.util.LazyEvaluator",["ephox.katamari.api.Option"],function(e){return{evaluateUntil:function(t,n){for(var r=0;r<t.length;r++){var o=t[r].apply(null,n);if(o.isSome())return o}return e.none()}}}),i("tinymce.core.keyboard.BoundaryLocation",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.keyboard.InlineUtils","tinymce.core.util.LazyEvaluator"],function(e,t,n,r,o,i,a,u,c,s,l){var f=e.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),d=function(e,t){var n=u.getParentBlock(t,e);return n||e},p=function(e,r,o){var a=s.normalizeForwards(o),u=d(r,a.container());return s.findRootInline(e,u,a).fold(function(){return i.nextPosition(u,a).bind(t.curry(s.findRootInline,e,u)).map(function(e){return f.before(e)})},n.none)},m=function(e,t,r){var o=s.normalizeBackwards(r);return s.findRootInline(e,t,o).bind(function(e){return i.prevPosition(e,o).isNone()?n.some(f.start(e)):n.none()})},g=function(e,t,r){var o=s.normalizeForwards(r);return s.findRootInline(e,t,o).bind(function(e){return i.nextPosition(e,o).isNone()?n.some(f.end(e)):n.none()})},h=function(e,r,o){var a=s.normalizeBackwards(o),u=d(r,a.container());return s.findRootInline(e,u,a).fold(function(){return i.prevPosition(u,a).bind(t.curry(s.findRootInline,e,u)).map(function(e){return f.after(e)})},n.none)},v=function(e){return!1===s.isRtl(b(e))},y=function(e,t,n){return l.evaluateUntil([p,m,g,h],[e,t,n]).filter(v)},b=function(e){return e.fold(t.identity,t.identity,t.identity,t.identity)},x=function(e){return e.fold(t.constant("before"),t.constant("start"),t.constant("end"),t.constant("after"))},w=function(e){return e.fold(f.before,f.before,f.after,f.after)},C=function(e){return e.fold(f.start,f.start,f.end,f.end)},k=function(e,t){return x(e)===x(t)&&b(e)===b(t)},T=function(e,t,n,o,i,a){return r.liftN([s.findRootInline(t,n,o),s.findRootInline(t,n,i)],function(t,r){return t!==r&&s.hasSameParentBlock(n,t,r)?f.after(e?t:r):a}).getOr(a)},S=function(e,n){return e.fold(t.constant(!0),function(e){return!k(e,n)})},E=function(e,n,r,o,a){var u=s.normalizePosition(e,a);return i.fromPosition(e,r,u).map(t.curry(s.normalizePosition,e)).fold(function(){return o.map(w)},function(i){return y(n,r,i).map(t.curry(T,e,n,r,u,i)).filter(t.curry(S,o))}).filter(v)},_=function(e,r){return e?r.fold(t.compose(n.some,f.start),n.none,t.compose(n.some,f.after),n.none):r.fold(n.none,t.compose(n.some,f.before),n.none,t.compose(n.some,f.end))},A=function(e,n,r,o){var i=s.normalizePosition(e,o),a=y(n,r,i);return y(n,r,i).bind(t.curry(_,e)).orThunk(function(){return E(e,n,r,a,o)})};return{readLocation:y,findLocation:A,prevLocation:t.curry(A,!1),nextLocation:t.curry(A,!0),getElement:b,outside:w,inside:C}}),i("tinymce.core.keyboard.BoundarySelection",["ephox.katamari.api.Arr","ephox.katamari.api.Cell","ephox.katamari.api.Fun","tinymce.core.caret.CaretContainerRemove","tinymce.core.caret.CaretPosition","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,u){var c=function(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},s=function(e){return!1!==e.settings.inline_boundaries},l=function(e,t){e?t.setAttribute("data-mce-selected","1"):t.removeAttribute("data-mce-selected","1")},f=function(e,t,n){return i.renderCaret(t,n).map(function(t){return c(e,t),n})},d=function(e,t,r){var i=e.getBody(),c=o.fromRangeStart(e.selection.getRng()),s=n.curry(u.isInlineTarget,e);return a.findLocation(r,s,i,c).bind(function(n){return f(e,t,n)})},p=function(t,r,o){var i=e.filter(r.select("*[data-mce-selected]"),t),a=e.filter(o,t);e.each(e.difference(i,a),n.curry(l,!1)),e.each(e.difference(a,i),n.curry(l,!0))},m=function(e,t){if(e.selection.isCollapsed()&&!0!==e.composing&&t.get()){var n=o.fromRangeStart(e.selection.getRng());o.isTextPosition(n)&&!1===u.isAtZwsp(n)&&(c(e,r.removeAndReposition(t.get(),n)),t.set(null))}},g=function(t,n,r,i){if(n.selection.isCollapsed()){var u=e.filter(i,t);e.each(u,function(){var e=o.fromRangeStart(n.selection.getRng());a.readLocation(t,n.getBody(),e).bind(function(e){return f(n,r,e)})})}};return{move:function(e,t,n){return function(){return!!s(e)&&d(e,t,n).isSome()}},setupSelectedState:function(e){var r=new t(null),o=n.curry(u.isInlineTarget,e);return e.on("NodeChange",function(t){s(e)&&(p(o,e.dom,t.parents),m(e,r),g(o,e,r,t.parents))}),r},setCaretPosition:c}}),i("tinymce.core.delete.InlineBoundaryDelete",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Element","global!document","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.delete.DeleteElement","tinymce.core.keyboard.BoundaryCaret","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){var m=function(e){return!1!==e.settings.inline_boundaries},g=function(e,t){var n=o.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},h=function(e){return n.liftN([a.firstPositionIn(e),a.lastPositionIn(e)],function(t,n){var r=p.normalizePosition(!0,t),o=p.normalizePosition(!1,n);return a.nextPosition(e,r).map(function(e){return e.isEqual(o)}).getOr(!0)}).getOr(!0)},v=function(e,t){return function(n){return l.renderCaret(t,n).map(function(t){return d.setCaretPosition(e,t),!0}).getOr(!1)}},y=function(t,n,r,o){var i=t.getBody(),a=e.curry(p.isInlineTarget,t);t.undoManager.ignore(function(){t.selection.setRng(g(r,o)),t.execCommand("Delete"),f.readLocation(a,i,u.fromRangeStart(t.selection.getRng())).map(f.inside).map(v(t,n))}),t.nodeChanged()},b=function(e,t){var n=c.getParentBlock(t,e);return n||e},x=function(n,o,i,u){var c=b(n.getBody(),u.container()),l=e.curry(p.isInlineTarget,n),d=f.readLocation(l,c,u);return d.bind(function(n){return i?n.fold(e.constant(t.some(f.inside(n))),t.none,e.constant(t.some(f.outside(n))),t.none):n.fold(t.none,e.constant(t.some(f.outside(n))),t.none,e.constant(t.some(f.inside(n))))}).map(v(n,o)).getOrThunk(function(){var e=a.navigate(i,c,u),t=e.bind(function(e){return f.readLocation(l,c,e)});return d.isSome()&&t.isSome()?p.findRootInline(l,c,u).map(function(e){return!!h(e)&&(s.deleteElement(n,i,r.fromDom(e)),!0)}).getOr(!1):t.bind(function(){return e.map(function(e){return i?y(n,o,u,e):y(n,o,e,u),!0})}).getOr(!1)})};return{backspaceDelete:function(e,t,n){if(e.selection.isCollapsed()&&m(e)){var r=u.fromRangeStart(e.selection.getRng());return x(e,t,n,r)}return!1}}}),i("tinymce.core.delete.TableDeleteAction",["ephox.katamari.api.Adt","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind"],function(e,t,n,r,o,i,a,u,c,s){var l=i.immutable("start","end"),f=i.immutable("rng","table","cells"),d=e.generate([{removeTable:["element"]},{emptyCells:["cells"]}]),p=function(e,t){return s.closest(u.fromDom(e),"td,th",t)},m=function(e,t){return s.ancestor(e,"table",t)},g=function(e){return!1===a.eq(e.start(),e.end())},h=function(e,t){return m(e.start(),t).bind(function(n){return m(e.end(),t).bind(function(e){return a.eq(n,e)?r.some(n):r.none()})})},v=function(e,t){return o.liftN([p(e.startContainer,t),p(e.endContainer,t)],l).filter(g)},y=function(e,t){return h(e,t).bind(function(t){var n=c.descendants(t,"td,th");return f(e,t,n)})},b=function(e,t){var r=n.curry(a.eq,e);return v(t,r).map(function(e){return y(e,r)})},x=function(e,n){return t.findIndex(e,function(e){return a.eq(e,n)})},w=function(e){return o.liftN([x(e.cells(),e.rng().start()),x(e.cells(),e.rng().end())],function(t,n){return e.cells().slice(t,n+1)})},C=function(e){return w(e).bind(function(t){var n=e.cells();return t.length===n.length?d.removeTable(e.table()):d.emptyCells(t)})},k=function(e){return d.emptyCells(e)};return{getActionFromRange:function(e,t){return b(e,t).map(C)},getActionFromCells:k}}),i("tinymce.core.delete.TableDelete",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.core.caret.CaretFinder","tinymce.core.caret.CaretPosition","tinymce.core.delete.DeleteElement","tinymce.core.delete.TableDeleteAction","tinymce.core.dom.ElementType","tinymce.core.dom.Empty","tinymce.core.dom.PaddingBr","tinymce.core.dom.Parents","tinymce.core.selection.TableCellSelection"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m){var g=function(t,n){return e.each(n,d.fillWithPaddingBr),t.selection.setCursorLocation(n[0].dom(),0),!0},h=function(e,t){return c.deleteElement(e,!1,t),!0},v=function(e,n,r){return s.getActionFromRange(n,r).map(function(n){return n.fold(t.curry(h,e),t.curry(g,e))})},y=function(e,t){return T(e,t)},b=function(e,t,n,r){return C(t,r).fold(function(){return v(e,t,n)},function(t){return y(e,t)}).getOr(!1)},x=function(e,t){var n=o.fromDom(e.getBody()),r=e.selection.getRng(),i=m.getCellsFromEditor(e);return 0!==i.length?g(e,i):b(e,n,r,t)},w=function(t,n){return e.find(p.parentsAndSelf(n,t),l.isTableCell)},C=function(t,n){return e.find(p.parentsAndSelf(n,t),function(e){return"caption"===i.name(e)})},k=function(e,t,n,i,u){return a.navigate(n,e.getBody(),u).bind(function(e){return w(t,o.fromDom(e.getNode())).map(function(e){return!1===r.eq(e,i)})})},T=function(e,t){return d.fillWithPaddingBr(t),e.selection.setCursorLocation(t.dom(),0),n.some(!0)},S=function(e,t,n,r){return a.firstPositionIn(e.dom()).bind(function(o){return a.lastPositionIn(e.dom()).map(function(e){return t?n.isEqual(o)&&r.isEqual(e):n.isEqual(e)&&r.isEqual(o)})}).getOr(!0)},E=function(e,t){return T(e,t)},_=function(e,t,n){return C(e,o.fromDom(n.getNode())).map(function(e){return!1===r.eq(e,t)})},A=function(e,t,r,o,i){return a.navigate(r,e.getBody(),i).bind(function(n){return S(o,r,i,n)?E(e,o):_(t,o,n)}).or(n.some(!0))},N=function(e,t,n,r){var o=u.fromRangeStart(e.selection.getRng());return w(n,r).bind(function(r){return f.isEmpty(r)?T(e,r):k(e,n,t,r,o)})},D=function(e,t,n,r){var o=u.fromRangeStart(e.selection.getRng());return f.isEmpty(r)?T(e,r):A(e,n,t,r,o)},R=function(e,t,n){var r=o.fromDom(e.getBody());return C(r,n).fold(function(){return N(e,t,r,n)},function(n){return D(e,t,r,n)}).getOr(!1)};return{backspaceDelete:function(e,t){var n=o.fromDom(e.selection.getStart(!0));return e.selection.isCollapsed()?R(e,t,n):x(e,n)}}}),i("tinymce.core.delete.DeleteCommands",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.DeleteUtils","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.TableDelete"],function(e,t,n,r,o,i){var a=function(e,t){e.getDoc().execCommand(t,!1,null)};return{deleteCommand:function(u){n.backspaceDelete(u,!1)||o.backspaceDelete(u,!1)||e.backspaceDelete(u,!1)||i.backspaceDelete(u)||t.backspaceDelete(u,!1)||(a(u,"Delete"),r.paddEmptyBody(u))},forwardDeleteCommand:function(r){n.backspaceDelete(r,!0)||o.backspaceDelete(r,!0)||e.backspaceDelete(r,!0)||i.backspaceDelete(r)||t.backspaceDelete(r,!0)||a(r,"ForwardDelete")}}}),i("tinymce.core.EditorCommands",["tinymce.core.Env","tinymce.core.InsertContent","tinymce.core.delete.DeleteCommands","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.selection.SelectionBookmark","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u){var c=u.each,s=u.extend,l=u.map,f=u.inArray,d=u.explode,p=e.ie&&e.ie<11,m=!0,g=!1;return function(u){var h,v,y,b,x={state:{},exec:{},value:{}},w=u.settings;u.on("PreInit",function(){h=u.dom,v=u.selection,w=u.settings,y=u.formatter});var C=function(e,t,n,r){var o,i,s=0;if(!u.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||r&&r.skip_focus?a.restore(u):u.focus(),r=u.fire("BeforeExecCommand",{command:e,ui:t,value:n}),r.isDefaultPrevented())return!1;if(i=e.toLowerCase(),o=x.exec[i])return o(i,t,n),u.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(c(u.plugins,function(r){if(r.execCommand&&r.execCommand(e,t,n))return u.fire("ExecCommand",{command:e,ui:t,value:n}),s=!0,!1}),s)return s;if(u.theme&&u.theme.execCommand&&u.theme.execCommand(e,t,n))return u.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{s=u.getDoc().execCommand(e,t,n)}catch(e){}return!!s&&(u.fire("ExecCommand",{command:e,ui:t,value:n}),!0)}},k=function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=x.state[e])return t(e);try{return u.getDoc().queryCommandState(e)}catch(e){}return!1}},T=function(e){var t;if(!u.quirks.isHidden()&&!u.removed){if(e=e.toLowerCase(),t=x.value[e])return t(e);try{return u.getDoc().queryCommandValue(e)}catch(e){}}},S=function(e,t){t=t||"exec",c(e,function(e,n){c(n.toLowerCase().split(","),function(n){x[t][n]=e})})},E=function(e,t,n){e=e.toLowerCase(),x.exec[e]=function(e,r,o,i){return t.call(n||u,r,o,i)}};s(this,{execCommand:C,queryCommandState:k,queryCommandValue:T,queryCommandSupported:function(e){if(e=e.toLowerCase(),x.exec[e])return!0;try{return u.getDoc().queryCommandSupported(e)}catch(e){}return!1},addCommands:S,addCommand:E,addQueryStateHandler:function(e,t,n){e=e.toLowerCase(),x.state[e]=function(){
return t.call(n||u)}},addQueryValueHandler:function(e,t,n){e=e.toLowerCase(),x.value[e]=function(){return t.call(n||u)}},hasCustomCommand:function(e){return e=e.toLowerCase(),!!x.exec[e]}});var _=function(e,t,n){return t===undefined&&(t=g),n===undefined&&(n=null),u.getDoc().execCommand(e,t,n)},A=function(e){return y.match(e)},N=function(e,t){y.toggle(e,t?{value:t}:undefined),u.nodeChanged()},D=function(e){b=v.getBookmark(e)},R=function(){v.moveToBookmark(b)};S({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){u.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=u.getDoc();try{_(t)}catch(e){n=m}if("paste"!==t||r.queryCommandEnabled(t)||(n=!0),n||!r.queryCommandSupported(t)){var o=u.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");e.mac&&(o=o.replace(/Ctrl\+/g,"\u2318+")),u.notificationManager.open({text:o,type:"error"})}},unlink:function(){if(v.isCollapsed()){var e=u.dom.getParent(u.selection.getStart(),"a");return void(e&&u.dom.remove(e,!0))}y.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(e){var t=e.substring(7);"full"==t&&(t="justify"),c("left,center,right,justify".split(","),function(e){t!=e&&y.remove("align"+e)}),"none"!=t&&N("align"+t)},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;_(e),(t=h.getParent(v.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(D(),h.split(n,t),R()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){N(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){N(e,n)},FontSize:function(e,t,n){var r,o;n>=1&&n<=7&&(o=d(w.font_size_style_values),r=d(w.font_size_classes),n=r?r[n-1]||n:o[n-1]||n),N(e,n)},RemoveFormat:function(e){y.remove(e)},mceBlockQuote:function(){N("blockquote")},FormatBlock:function(e,t,n){return N(n||"p")},mceCleanup:function(){var e=v.getBookmark();u.setContent(u.getContent({cleanup:m}),{cleanup:m}),v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||v.getNode();r!=u.getBody()&&(D(),u.dom.remove(r,m),R())},mceSelectNodeDepth:function(e,t,n){var r=0;h.getParent(v.getNode(),function(e){if(1==e.nodeType&&r++==n)return v.select(e),g},u.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(e,n,r){t.insertAtCaret(u,r)},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker"),u.setContent(u.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){N(n)},mceSetContent:function(e,t,n){u.setContent(n)},"Indent,Outdent":function(e){var t,n,r;t=w.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),k("InsertUnorderedList")||k("InsertOrderedList")?_(e):(w.forced_root_block||h.getParent(v.getNode(),h.isBlock)||y.apply("div"),c(v.getSelectedBlocks(),function(o){if("false"!==h.getContentEditable(o)&&"LI"!==o.nodeName){var i=u.getParam("indent_use_margin",!1)?"margin":"padding";i="TABLE"===o.nodeName?"margin":i,i+="rtl"==h.getStyle(o,"direction",!0)?"Right":"Left","outdent"==e?(r=Math.max(0,parseInt(o.style[i]||0,10)-t),h.setStyle(o,i,r?r+n:"")):(r=parseInt(o.style[i]||0,10)+t+n,h.setStyle(o,i,r))}}))},mceRepaint:function(){},InsertHorizontalRule:function(){u.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){u.hasVisual=!u.hasVisual,u.addVisual()},mceReplaceContent:function(e,t,n){u.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var r;"string"==typeof n&&(n={href:n}),r=h.getParent(v.getNode(),"a"),n.href=n.href.replace(" ","%20"),r&&n.href||y.remove("link"),n.href&&y.apply("link",n,r)},selectAll:function(){var e=h.getParent(v.getStart(),r.isContentEditableTrue);if(e){var t=h.createRng();t.selectNodeContents(e),v.setRng(t)}},"delete":function(){n.deleteCommand(u)},forwardDelete:function(){n.forwardDeleteCommand(u)},mceNewDocument:function(){u.setContent("")},InsertLineBreak:function(e,t,n){var r,a,c,s=n,l=v.getRng(!0);new o(h).normalize(l);var f=l.startOffset,d=l.startContainer;if(1==d.nodeType&&d.hasChildNodes()){var g=f>d.childNodes.length-1;d=d.childNodes[Math.min(f,d.childNodes.length-1)]||d,f=g&&3==d.nodeType?d.nodeValue.length:0}var y=h.getParent(d,h.isBlock),b=y?y.nodeName.toUpperCase():"",x=y?h.getParent(y.parentNode,h.isBlock):null,w=x?x.nodeName.toUpperCase():"",C=s&&s.ctrlKey;"LI"!=w||C||(y=x,b=w);var k=function(){for(var e,t=new i(d,y),n=u.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0};d&&3==d.nodeType&&f>=d.nodeValue.length&&(p||k()||(r=h.create("br"),l.insertNode(r),l.setStartAfter(r),l.setEndAfter(r),a=!0)),r=h.create("br"),l.insertNode(r);var T=h.doc.documentMode;return p&&"PRE"==b&&(!T||T<8)&&r.parentNode.insertBefore(h.doc.createTextNode("\r"),r),c=h.create("span",{},"&nbsp;"),r.parentNode.insertBefore(c,r),v.scrollIntoView(c),h.remove(c),a?(l.setStartBefore(r),l.setEndBefore(r)):(l.setStartAfter(r),l.setEndAfter(r)),v.setRng(l),u.undoManager.add(),m}}),S({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=v.isCollapsed()?[h.getParent(v.getNode(),h.isBlock)]:v.getSelectedBlocks(),r=l(n,function(e){return!!y.matchNode(e,t)});return-1!==f(r,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return A(e)},mceBlockQuote:function(){return A("blockquote")},Outdent:function(){var e;if(w.inline_styles){if((e=h.getParent(v.getStart(),h.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=h.getParent(v.getEnd(),h.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return k("InsertUnorderedList")||k("InsertOrderedList")||!w.inline_styles&&!!h.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=h.getParent(v.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),S({"FontSize,FontName":function(e){var t,n=0;return(t=h.getParent(v.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),S({Undo:function(){u.undoManager.undo()},Redo:function(){u.undoManager.redo()}})}}),i("tinymce.core.util.EventDispatcher",["tinymce.core.util.Tools"],function(e){var t=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),n=function(t){var n,r,o=this,i={},a=function(){return!1},u=function(){return!0};t=t||{},n=t.scope||o,r=t.toggleEvent||a;var c=function(e,r){var o,c,s,f;if(e=e.toLowerCase(),r=r||{},r.type=e,r.target||(r.target=n),r.preventDefault||(r.preventDefault=function(){r.isDefaultPrevented=u},r.stopPropagation=function(){r.isPropagationStopped=u},r.stopImmediatePropagation=function(){r.isImmediatePropagationStopped=u},r.isDefaultPrevented=a,r.isPropagationStopped=a,r.isImmediatePropagationStopped=a),t.beforeFire&&t.beforeFire(r),o=i[e])for(c=0,s=o.length;c<s;c++){if(f=o[c],f.once&&l(e,f.func),r.isImmediatePropagationStopped())return r.stopPropagation(),r;if(!1===f.func.call(n,r))return r.preventDefault(),r}return r},s=function(t,n,u,c){var s,l,f;if(!1===n&&(n=a),n)for(n={func:n},c&&e.extend(n,c),l=t.toLowerCase().split(" "),f=l.length;f--;)t=l[f],s=i[t],s||(s=i[t]=[],r(t,!0)),u?s.unshift(n):s.push(n);return o},l=function(e,t){var n,a,u,c,s;if(e)for(c=e.toLowerCase().split(" "),n=c.length;n--;){if(e=c[n],a=i[e],!e){for(u in i)r(u,!1),delete i[u];return o}if(a){if(t)for(s=a.length;s--;)a[s].func===t&&(a=a.slice(0,s).concat(a.slice(s+1)),i[e]=a);else a.length=0;a.length||(r(e,!1),delete i[e])}}else{for(e in i)r(e,!1);i={}}return o},f=function(e,t,n){return s(e,t,n,{once:!0})},d=function(e){return e=e.toLowerCase(),!(!i[e]||0===i[e].length)};o.fire=c,o.on=s,o.off=l,o.once=f,o.has=d};return n.isNative=function(e){return!!t[e.toLowerCase()]},n}),i("tinymce.core.util.Observable",["tinymce.core.util.EventDispatcher"],function(e){var t=function(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,r){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,r)}})),t._eventDispatcher};return{fire:function(e,n,r){var o=this;if(o.removed&&"remove"!==e)return n;if(n=t(o).fire(e,n,r),!1!==r&&o.parent)for(var i=o.parent();i&&!n.isPropagationStopped();)i.fire(e,n,!1),i=i.parent();return n},on:function(e,n,r){return t(this).on(e,n,r)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),i("tinymce.core.EditorObservable",["tinymce.core.util.Observable","tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(e,t,n){var r,o=t.DOM,i=function(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=o.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()},a=function(e,t){var n,a,u=function(e){return!e.hidden&&!e.readonly};if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed)if(n=i(e,t),e.settings.event_root){if(r||(r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&r){for(t in r)e.dom.unbind(i(e,t));r=null}})),r[t])return;a=function(n){for(var r=n.target,i=e.editorManager.get(),a=i.length;a--;){var c=i[a].getBody();(c===r||o.isChildOf(r,c))&&u(i[a])&&i[a].fire(t,n)}},r[t]=a,o.bind(n,t,a)}else a=function(n){u(e)&&e.fire(t,n)},o.bind(n,t,a),e.delegates[t]=a},u={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){a(e,t)})},toggleNativeEvent:function(e,t){var n=this;"focus"!=e&&"blur"!=e&&(t?n.initialized?a(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(i(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return u=n.extend({},e,u)}),i("tinymce.core.ErrorReporter",["global!window","tinymce.core.AddOnManager"],function(e,t){var n=t.PluginManager,r=function(e,t){for(var r in n.urls){if(n.urls[r]+"/plugin"+t+".js"===e)return r}return null},o=function(e,t){var n=r(t,e.suffix);return n?"Failed to load plugin: "+n+" from url "+t:"Failed to load plugin url: "+t},i=function(e,t){e.notificationManager.open({type:"error",text:t})},a=function(e,t){e._skinLoaded?i(e,t):e.on("SkinLoaded",function(){i(e,t)})},u=function(e,t){a(e,"Failed to upload image: "+t)};return{pluginLoadError:function(e,t){a(e,o(e,t))},uploadError:u,displayError:a,initError:function(){var t=e.console;t&&!e.test&&(t.error?t.error.apply(t,arguments):t.log.apply(t,arguments))}}}),i("tinymce.core.caret.CaretContainerInput",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.search.SelectorFind","tinymce.core.caret.CaretContainer"],function(e,t,n,r){var o=function(r){return n.descendant(t.fromDom(r.getBody()),"*[data-mce-caret]").fold(e.constant(null),function(e){return e.dom()})},i=function(e){e.selection.setRng(e.selection.getRng())},a=function(e,t){t.hasAttribute("data-mce-caret")&&(r.showCaretContainerBlock(t),i(e),e.selection.scrollIntoView(t))},u=function(e,t){var n=o(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void a(n)):void(r.hasContent(n)&&a(e,n))};return{setup:function(t){t.on("keyup compositionstart",e.curry(u,t))}}}),i("ephox.sand.api.XMLHttpRequest",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("XMLHttpRequest"))}}),i("tinymce.core.file.Uploader",["ephox.sand.api.XMLHttpRequest","global!window","tinymce.core.util.Fun","tinymce.core.util.Promise","tinymce.core.util.Tools"],function(e,t,n,r,o){return function(n,i){var a={},u=function(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t},c=function(n,r,o,a){var c,s;c=new e,c.open("POST",i.url),c.withCredentials=i.credentials,c.upload.onprogress=function(e){a(e.loaded/e.total*100)},c.onerror=function(){o("Image upload failed due to a XHR Transport error. Code: "+c.status)},c.onload=function(){var e;return c.status<200||c.status>=300?void o("HTTP Error: "+c.status):(e=JSON.parse(c.responseText))&&"string"==typeof e.location?void r(u(i.basePath,e.location)):void o("Invalid JSON: "+c.responseText)},s=new t.FormData,s.append("file",n.blob(),n.filename()),c.send(s)},s=function(){return new r(function(e){e([])})},l=function(e,t){return{url:t,blobInfo:e,status:!0}},f=function(e,t){return{url:"",blobInfo:e,status:!1,error:t}},d=function(e,t){o.each(a[e],function(e){e(t)}),delete a[e]},p=function(e,t,o){return n.markPending(e.blobUri()),new r(function(r){var i,a,u=function(){};try{var c=function(){i&&(i.close(),a=u)},s=function(t){c(),n.markUploaded(e.blobUri(),t),d(e.blobUri(),l(e,t)),r(l(e,t))},p=function(t){c(),n.removeFailed(e.blobUri()),d(e.blobUri(),f(e,t)),r(f(e,t))};a=function(e){e<0||e>100||(i||(i=o()),i.progressBar.value(e))},t(e,s,p,a)}catch(t){r(f(e,t.message))}})},m=function(e){return e===c},g=function(e){var t=e.blobUri();return new r(function(e){a[t]=a[t]||[],a[t].push(e)})},h=function(e,t){return e=o.grep(e,function(e){return!n.isUploaded(e.blobUri())}),r.all(o.map(e,function(e){return n.isPending(e.blobUri())?g(e):p(e,i.handler,t)}))},v=function(e,t){return!i.url&&m(i.handler)?s():h(e,t)};return i=o.extend({credentials:!1,handler:c},i),{upload:v}}}),i("ephox.sand.api.Blob",["ephox.sand.util.Global"],function(e){return function(t,n){return new(e.getOrDie("Blob"))(t,n)}});i("ephox.sand.api.FileReader",["ephox.sand.util.Global"],function(e){return function(){return new(e.getOrDie("FileReader"))}}),i("ephox.sand.api.Uint8Array",["ephox.sand.util.Global"],function(e){return function(t){return new(e.getOrDie("Uint8Array"))(t)}}),i("ephox.sand.api.Window",["ephox.sand.util.Global"],function(e){var t=function(t){e.getOrDie("requestAnimationFrame")(t)};return{atob:function(t){return e.getOrDie("atob")(t)},requestAnimationFrame:t}}),i("tinymce.core.file.Conversions",["ephox.sand.api.Blob","ephox.sand.api.FileReader","ephox.sand.api.Uint8Array","ephox.sand.api.Window","ephox.sand.api.XMLHttpRequest","tinymce.core.util.Promise"],function(e,t,n,r,o,i){var a=function(e){return new i(function(t,n){var r=function(){n("Cannot convert "+e+" to Blob. Resource might not exist or is inaccessible.")};try{var i=new o;i.open("GET",e,!0),i.responseType="blob",i.onload=function(){200==this.status?t(this.response):r()},i.onerror=r,i.send()}catch(e){r()}})},u=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},c=function(t){return new i(function(o){var i,a,c;t=u(t);try{i=r.atob(t.data)}catch(t){return void o(new e([]))}for(a=new n(i.length),c=0;c<a.length;c++)a[c]=i.charCodeAt(c);o(new e([a],{type:t.type}))})};return{uriToBlob:function(e){return 0===e.indexOf("blob:")?a(e):0===e.indexOf("data:")?c(e):null},blobToDataUri:function(e){return new i(function(n){var r=new t;r.onloadend=function(){n(r.result)},r.readAsDataURL(e)})},parseDataUri:u}}),i("tinymce.core.file.ImageScanner",["tinymce.core.util.Promise","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.file.Conversions","tinymce.core.Env"],function(e,t,n,r,o){var i=0,a=function(e){return(e||"blobid")+i++},u=function(e,t,n,o){var i,u;if(0===t.src.indexOf("blob:"))return u=e.getByUri(t.src),void(u?n({image:t,blobInfo:u}):r.uriToBlob(t.src).then(function(o){r.blobToDataUri(o).then(function(c){i=r.parseDataUri(c).data,u=e.create(a(),o,i),e.add(u),n({image:t,blobInfo:u})})},function(e){o(e)}));i=r.parseDataUri(t.src).data,u=e.findFirst(function(e){return e.base64()===i}),u?n({image:t,blobInfo:u}):r.uriToBlob(t.src).then(function(r){u=e.create(a(),r,i),e.add(u),n({image:t,blobInfo:u})},function(e){o(e)})},c=function(e){return e?e.getElementsByTagName("img"):[]};return function(r,i){var a={};return{findAll:function(s,l){var f,d;return l||(l=n.constant(!0)),f=t.filter(c(s),function(e){var t=e.src;return!!o.fileApi&&(!e.hasAttribute("data-mce-bogus")&&(!e.hasAttribute("data-mce-placeholder")&&(!(!t||t==o.transparentSrc)&&(0===t.indexOf("blob:")?!r.isUploaded(t):0===t.indexOf("data:")&&l(e)))))}),d=t.map(f,function(t){var n;return a[t.src]?new e(function(e){a[t.src].then(function(n){if("string"==typeof n)return n;e({image:t,blobInfo:n.blobInfo})})}):(n=new e(function(e,n){u(i,t,e,n)}).then(function(e){return delete a[e.image.src],e})["catch"](function(e){return delete a[t.src],e}),a[t.src]=n,n)}),e.all(d)}}}}),i("tinymce.core.util.Uuid",[],function(){var e=0,t=function(){var e=function(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()};return{uuid:function(n){return n+e+++t()}}}),i("tinymce.core.file.BlobCache",["ephox.sand.api.URL","tinymce.core.util.Arr","tinymce.core.util.Fun","tinymce.core.util.Uuid"],function(e,t,n,r){return function(){var o=[],i=n.constant,a=function(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[e.toLowerCase()]||"dat"},u=function(e,t,n,r){return c("object"==typeof e?e:{id:e,name:r,blob:t,base64:n})},c=function(t){var n,o;if(!t.blob||!t.base64)throw"blob and base64 representations of the image are required for BlobInfo to be created";return n=t.id||r.uuid("blobid"),o=t.name||n,{id:i(n),name:i(o),filename:i(o+"."+a(t.blob.type)),blob:i(t.blob),base64:i(t.base64),blobUri:i(t.blobUri||e.createObjectURL(t.blob)),uri:i(t.uri)}},s=function(e){l(e.id())||o.push(e)},l=function(e){return f(function(t){return t.id()===e})},f=function(e){return t.filter(o,e)[0]};return{create:u,add:s,get:l,getByUri:function(e){return f(function(t){return t.blobUri()==e})},findFirst:f,removeByUri:function(n){o=t.filter(o,function(t){return t.blobUri()!==n||(e.revokeObjectURL(t.blobUri()),!1)})},destroy:function(){t.each(o,function(t){e.revokeObjectURL(t.blobUri())}),o=[]}}}}),i("tinymce.core.file.UploadStatus",[],function(){return function(){var e=1,t=2,n={},r=function(e,t){return{status:e,resultUri:t}},o=function(e){return e in n};return{hasBlobUri:o,getResultUri:function(e){var t=n[e];return t?t.resultUri:null},isPending:function(t){return!!o(t)&&n[t].status===e},isUploaded:function(e){return!!o(e)&&n[e].status===t},markPending:function(t){n[t]=r(e,null)},markUploaded:function(e,o){n[e]=r(t,o)},removeFailed:function(e){delete n[e]},destroy:function(){n={}}}}}),i("tinymce.core.EditorUpload",["tinymce.core.util.Arr","tinymce.core.file.Uploader","tinymce.core.file.ImageScanner","tinymce.core.file.BlobCache","tinymce.core.file.UploadStatus","tinymce.core.ErrorReporter"],function(e,t,n,r,o,i){return function(a){var u,c,s=new r,l=a.settings,f=new o,d=function(e){return function(t){return a.selection?e(t):[]}},p=function(){return"?"+(new Date).getTime()},m=function(e,t,n){var r=0;do{-1!==(r=e.indexOf(t,r))&&(e=e.substring(0,r)+n+e.substr(r+t.length),r+=n.length-t.length+1)}while(-1!==r);return e},g=function(e,t,n){return e=m(e,'src="'+t+'"','src="'+n+'"'),e=m(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},h=function(t,n){e.each(a.undoManager.data,function(r){"fragmented"===r.type?r.fragments=e.map(r.fragments,function(e){return g(e,t,n)}):r.content=g(r.content,t,n)})},v=function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},y=function(e,t){s.removeByUri(e.src),h(e.src,t),a.$(e).attr({src:l.images_reuse_filename?t+p():t,"data-mce-src":a.convertURL(t,"src")})},b=function(n){return u||(u=new t(f,{url:l.images_upload_url,basePath:l.images_upload_base_path,credentials:l.images_upload_credentials,handler:l.images_upload_handler})),C().then(d(function(t){var r;return r=e.map(t,function(e){return e.blobInfo}),u.upload(r,v).then(d(function(r){var o=e.map(r,function(e,n){var r=t[n].image;return e.status&&!1!==a.settings.images_replace_blob_uris?y(r,e.url):e.error&&i.uploadError(a,e.error),{element:r,status:e.status}});return n&&n(o),o}))}))},x=function(e){if(!1!==l.automatic_uploads)return b(e)},w=function(e){return!l.images_dataimg_filter||l.images_dataimg_filter(e)},C=function(){return c||(c=new n(f,s)),c.findAll(a.getBody(),w).then(d(function(t){return t=e.filter(t,function(e){return"string"!=typeof e||(i.displayError(a,e),!1)}),e.each(t,function(e){h(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")}),t}))},k=function(){s.destroy(),f.destroy(),c=u=null},T=function(t){return t.replace(/src="(blob:[^"]+)"/g,function(t,n){var r=f.getResultUri(n);if(r)return'src="'+r+'"';var o=s.getByUri(n);return o||(o=e.reduce(a.editorManager.get(),function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)},null)),o?'src="data:'+o.blob().type+";base64,"+o.base64()+'"':t})};return a.on("setContent",function(){!1!==a.settings.automatic_uploads?x():C()}),a.on("RawSaveContent",function(e){e.content=T(e.content)}),a.on("getContent",function(e){e.source_view||"raw"==e.format||(e.content=T(e.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(t){e.each(t,function(e){var t=e.attr("src");if(!s.getByUri(t)){var n=f.getResultUri(t);n&&e.attr("src",n)}})})}),{blobCache:s,uploadImages:b,uploadImagesAuto:x,scanForImages:C,destroy:k}}}),i("tinymce.core.ForceBlocks",["ephox.katamari.api.Fun"],function(e){var t=function(e){var t,n,r,o,i,a,u,c,s,l,f,d=e.settings,p=e.dom,m=e.selection,g=e.schema,h=g.getBlockElements(),v=m.getStart(),y=e.getBody();if(f=d.forced_root_block,v&&1===v.nodeType&&f){for(;v&&v!==y;){if(h[v.nodeName])return;v=v.parentNode}t=m.getRng(),n=t.startContainer,r=t.startOffset,o=t.endContainer,i=t.endOffset;try{s=e.getDoc().activeElement===y}catch(e){}for(v=y.firstChild,l=y.nodeName.toLowerCase();v;)if((3===v.nodeType||1==v.nodeType&&!h[v.nodeName])&&g.isValidChild(l,f.toLowerCase())){if(3===v.nodeType&&0===v.nodeValue.length){u=v,v=v.nextSibling,p.remove(u);continue}a||(a=p.create(f,e.settings.forced_root_block_attrs),v.parentNode.insertBefore(a,v),c=!0),u=v,v=v.nextSibling,a.appendChild(u)}else a=null,v=v.nextSibling;c&&s&&(t.setStart(n,r),t.setEnd(o,i),m.setRng(t),e.nodeChanged())}};return{setup:function(n){n.settings.forced_root_block&&n.on("NodeChange",e.curry(t,n))}}}),i("tinymce.core.dom.Dimensions",["tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect"],function(e,t,n){var r=function(o){var i=function(t){return e.map(t,function(e){return e=n.clone(e),e.node=o,e})};if(e.isArray(o))return e.reduce(o,function(e,t){return e.concat(r(t))},[]);if(t.isElement(o))return i(o.getClientRects());if(t.isText(o)){var a=o.ownerDocument.createRange();return a.setStart(o,0),a.setEnd(o,o.data.length),i(a.getClientRects())}};return{getClientRects:r}}),i("tinymce.core.caret.LineUtils",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.NodeType","tinymce.core.dom.Dimensions","tinymce.core.geom.ClientRect","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretCandidate"],function(e,t,n,r,o,i,a){var u=n.isContentEditableFalse,c=i.findNode,s=e.curry,l=function(e,t){return Math.abs(e.left-t)},f=function(e,t){return Math.abs(e.right-t)},d=function(e,n){var r=function(e,t){return e>=t.left&&e<=t.right};return t.reduce(e,function(e,t){var o,i;return o=Math.min(l(e,n),f(e,n)),i=Math.min(l(t,n),f(t,n)),r(n,t)?t:r(n,e)?e:i==o&&u(t.node)?t:i<o?t:e})},p=function(e,t,n,r){for(;r=c(r,e,a.isEditableCaretCandidate,t);)if(n(r))return},m=function(e,n){var i=[],a=function(e,o){var a;return a=t.filter(r.getClientRects(o),function(t){return!e(t,n)}),i=i.concat(a),0===a.length};return i.push(n),p(-1,e,s(a,o.isAbove),n.node),p(1,e,s(a,o.isBelow),n.node),i},g=function(e){return t.filter(t.toArray(e.getElementsByTagName("*")),u)},h=function(e,t){return{node:e.node,before:l(e,t)<f(e,t)}};return{findClosestClientRect:d,findLineNodeRects:m,closestCaret:function(e,n,o){var i,a;return i=r.getClientRects(g(e)),i=t.filter(i,function(e){return o>=e.top&&o<=e.bottom}),a=d(i,n),a&&(a=d(m(e,a),n))&&u(a.node)?h(a,n):null}}}),i("tinymce.core.caret.LineWalker",["tinymce.core.util.Fun","tinymce.core.util.Arr","tinymce.core.dom.Dimensions","tinymce.core.caret.CaretCandidate","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.CaretPosition","tinymce.core.geom.ClientRect"],function(e,t,n,r,o,i,a,u){var c=e.curry,s=function(e,t,n,i){for(;i=o.findNode(i,e,r.isEditableCaretCandidate,t);)if(n(i))return},l=function(e,r,o,i,a,u){var c,l,f=0,d=[],p=function(i){var u,c,s;for(s=n.getClientRects(i),-1==e&&(s=s.reverse()),u=0;u<s.length;u++)if(c=s[u],!o(c,l)){if(d.length>0&&r(c,t.last(d))&&f++,c.line=f,a(c))return!0;d.push(c)}};return(l=t.last(u.getClientRects()))?(c=u.getNode(),p(c),s(e,i,p,c),d):d},f=function(e,t){return t.line>e},d=function(e,t){return t.line===e};return{upUntil:c(l,-1,u.isAbove,u.isBelow),downUntil:c(l,1,u.isBelow,u.isAbove),positionsUntil:function(e,n,r,o){var c,s,l,f,d,p,m=new i(n),g=[],h=0,v=function(e){return t.last(e.getClientRects())};1==e?(c=m.next,s=u.isBelow,l=u.isAbove,f=a.after(o)):(c=m.prev,s=u.isAbove,l=u.isBelow,f=a.before(o)),p=v(f);do{if(f.isVisible()&&(d=v(f),!l(d,p))){if(g.length>0&&s(d,t.last(g))&&h++,d=u.clone(d),d.position=f,d.line=h,r(d))return g;g.push(d)}}while(f=c(f));return g},isAboveLine:c(f),isLine:c(d)}}),i("tinymce.core.keyboard.CefUtils",["tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.dom.NodeType","tinymce.core.util.Fun"],function(e,t,n,r){var o=n.isContentEditableTrue,i=n.isContentEditableFalse,a=function(e,t,n,r){return t._selectionOverrides.showCaret(e,n,r)},u=function(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t},c=function(e,t){var n;return n=e.fire("BeforeObjectSelected",{target:t}),n.isDefaultPrevented()?null:u(t)},s=function(n,u){var c,s;return u=t.normalizeRange(1,n.getBody(),u),c=e.fromRangeStart(u),i(c.getNode())?a(1,n,c.getNode(),!c.isAtEnd()):i(c.getNode(!0))?a(1,n,c.getNode(!0),!1):(s=n.dom.getParent(c.getNode(),r.or(i,o)),i(s)?a(1,n,s,!1):null)};return{showCaret:a,selectNode:c,renderCaretAtRange:s,renderRangeCaret:function(e,t){return t&&t.collapsed?s(e,t)||t:t}}}),i("tinymce.core.keyboard.CefNavigation",["tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.LineUtils","tinymce.core.caret.LineWalker","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.keyboard.CefUtils","tinymce.core.util.Arr","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a,u,c,s,l,f){var d=a.isContentEditableFalse,p=u.getSelectedNode,m=n.isAfterContentEditableFalse,g=n.isBeforeContentEditableFalse,h=function(e,t){for(;t=e(t);)if(t.isVisible())return t;return t},v=function(e,t){var r=n.isInSameBlock(e,t);return!(r||!a.isBr(e.getNode()))||r},y=function(t){return e.isCaretContainerBlock(t.startContainer)},b=function(e,r,o){return o=n.normalizeRange(e,r,o),-1===e?t.fromRangeStart(o):t.fromRangeEnd(o)},x=function(e,t,n,r,o){var i,a,u,c;return!o.collapsed&&(i=p(o),d(i))?s.showCaret(e,t,i,-1===e):(c=y(o),a=b(e,t.getBody(),o),r(a)?s.selectNode(t,a.getNode(-1===e)):(a=n(a))?r(a)?s.showCaret(e,t,a.getNode(-1===e),1===e):(u=n(a),r(u)&&v(a,u)?s.showCaret(e,t,u.getNode(-1===e),1===e):c?s.renderRangeCaret(t,a.toRange()):null):c?o:null)},w=function(e,t,n,r){var a,u,c,f,h,v,y,x,w;if(w=p(r),a=b(e,t.getBody(),r),u=n(t.getBody(),i.isAboveLine(1),a),c=l.filter(u,i.isLine(1)),h=l.last(a.getClientRects()),g(a)&&(w=a.getNode()),m(a)&&(w=a.getNode(!0)),!h)return null;if(v=h.left,(f=o.findClosestClientRect(c,v))&&d(f.node))return y=Math.abs(v-f.left),x=Math.abs(v-f.right),s.showCaret(e,t,f.node,y<x);if(w){var C=i.positionsUntil(e,t.getBody(),i.isAboveLine(1),w);if(f=o.findClosestClientRect(l.filter(C,i.isLine(1)),v))return s.renderRangeCaret(t,f.position.toRange());if(f=l.last(l.filter(C,i.isLine(0))))return s.renderRangeCaret(t,f.position.toRange())}},C=function(e){var t=e.dom.create(e.settings.forced_root_block);return(!c.ie||c.ie>=11)&&(t.innerHTML='<br data-mce-bogus="1">'),t},k=function(e,n,o){var i,a,u,c=new r(e.getBody()),s=f.curry(h,c.next),l=f.curry(h,c.prev);if(o.collapsed&&e.settings.forced_root_block){if(!(i=e.dom.getParent(o.startContainer,"PRE")))return;a=1===n?s(t.fromRangeStart(o)):l(t.fromRangeStart(o)),a||(u=C(e),1===n?e.$(i).after(u):e.$(i).before(u),e.selection.select(u,!0),e.selection.collapse())}},T=function(e,t){var n,o=new r(e.getBody()),i=f.curry(h,o.next),a=f.curry(h,o.prev),u=t?1:-1,c=t?i:a,s=t?g:m,l=e.selection.getRng();return(n=x(u,e,c,s,l))?n:(n=k(e,u,l))||null},S=function(e,t){var n,r=t?1:-1,o=t?i.downUntil:i.upUntil,a=e.selection.getRng();return(n=w(r,e,o,a))?n:(n=k(e,r,a))||null};return{moveH:function(e,t){return function(){var n=T(e,t);return!!n&&(e.selection.setRng(n),!0)}},moveV:function(e,t){return function(){var n=S(e,t);return!!n&&(e.selection.setRng(n),!0)}}}}),i("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,t,n){var r=function(e,t){return t},o=function(t,n){return e.isObject(t)&&e.isObject(n)?a(t,n):n},i=function(e){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new n("Can't merge zero objects");for(var i={},a=0;a<r.length;a++){var u=r[a];for(var c in u)u.hasOwnProperty(c)&&(i[c]=e(i[c],u[c]))}return i}},a=i(o),u=i(r);return{deepMerge:a,merge:u}}),i("tinymce.core.keyboard.MatchKeys",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Merger"],function(e,t,n){var r=function(r){return e.map(r,function(e){return n.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:t.noop},e)})},o=function(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},i=function(t,n){return e.bind(r(t),function(e){return o(e,n)?[e]:[]})};return{match:i,action:function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}},execute:function(t,n){return e.find(i(t,n),function(e){return e.action()})}}}),i("tinymce.core.keyboard.ArrowKeys",["tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.CefNavigation","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r){var o=function(o,i,a){n.execute([{keyCode:r.RIGHT,action:t.moveH(o,!0)},{keyCode:r.LEFT,action:t.moveH(o,!1)},{keyCode:r.UP,action:t.moveV(o,!1)},{keyCode:r.DOWN,action:t.moveV(o,!0)},{keyCode:r.RIGHT,action:e.move(o,i,!0)},{keyCode:r.LEFT,action:e.move(o,i,!1)}],a).each(function(){a.preventDefault()})};return{setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&o(e,t,n)})}}}),i("tinymce.core.keyboard.DeleteBackspaceKeys",["tinymce.core.delete.BlockBoundaryDelete","tinymce.core.delete.BlockRangeDelete","tinymce.core.delete.CefDelete","tinymce.core.delete.InlineBoundaryDelete","tinymce.core.delete.TableDelete","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n,r,o,i,a){var u=function(u,c,s){i.execute([{keyCode:a.BACKSPACE,action:i.action(n.backspaceDelete,u,!1)},{keyCode:a.DELETE,action:i.action(n.backspaceDelete,u,!0)},{keyCode:a.BACKSPACE,action:i.action(r.backspaceDelete,u,c,!1)},{keyCode:a.DELETE,action:i.action(r.backspaceDelete,u,c,!0)},{keyCode:a.BACKSPACE,action:i.action(t.backspaceDelete,u,!1)},{keyCode:a.DELETE,action:i.action(t.backspaceDelete,u,!0)},{keyCode:a.BACKSPACE,action:i.action(e.backspaceDelete,u,!1)},{keyCode:a.DELETE,action:i.action(e.backspaceDelete,u,!0)},{keyCode:a.BACKSPACE,action:i.action(o.backspaceDelete,u,!1)},{keyCode:a.DELETE,action:i.action(o.backspaceDelete,u,!0)}],s).each(function(){s.preventDefault()})},c=function(e,t){i.execute([{keyCode:a.BACKSPACE,action:i.action(n.paddEmptyElement,e)},{keyCode:a.DELETE,action:i.action(n.paddEmptyElement,e)}],t)};return{setup:function(e,t){e.on("keydown",function(n){!1===n.isDefaultPrevented()&&u(e,t,n)}),e.on("keyup",function(t){!1===t.isDefaultPrevented()&&c(e,t)})}}}),i("tinymce.core.keyboard.InsertNewLine",["tinymce.core.caret.CaretContainer","tinymce.core.dom.NodeType","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.text.Zwsp","tinymce.core.util.Tools"],function(e,t,n,r,o,i){var a=function(e){
return e&&"A"===e.nodeName&&0===i.trim(o.trim(e.innerText||e.textContent)).length},u=function(e){return e&&/^(TD|TH|CAPTION)$/.test(e.nodeName)},c=function(e,t){return e.firstChild&&e.firstChild.nodeName==t},s=function(e,t){return e&&e.parentNode&&e.parentNode.nodeName===t},l=function(e){e.innerHTML='<br data-mce-bogus="1">'},f=function(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},d=function(e){return e&&/^(OL|UL|LI)$/.test(e.nodeName)},p=function(e){return d(e)&&d(e.parentNode)},m=function(e,t){return t&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&"true"!==e.getContentEditable(t)},g=function(e,t,n){var r,o=n,i=[];if(o){for(;o=o.firstChild;){if(e.isBlock(o))return;1!=o.nodeType||t[o.nodeName.toLowerCase()]||i.push(o)}for(r=i.length;r--;)o=i[r],!o.hasChildNodes()||o.firstChild==o.lastChild&&""===o.firstChild.nodeValue?e.remove(o):a(o)&&e.remove(o)}},h=function(e,n,r){return!1===t.isText(n)?r:e?1===r&&n.data.charAt(r-1)===o.ZWSP?0:r:r===n.data.length-1&&n.data.charAt(r)===o.ZWSP?n.data.length:r},v=function(e){var t=e.cloneRange();return t.setStart(e.startContainer,h(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,h(!1,e.endContainer,e.endOffset)),t},y=function(e){for(;e;){if(1===e.nodeType||3===e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}},b=function(e,t){e.execCommand("InsertLineBreak",!1,t)},x=function(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)},w=function(e,t){var n,r,o=e.getRoot();for(n=t;n!==o&&"false"!==e.getContentEditable(n);)"true"===e.getContentEditable(n)&&(r=n),n=n.parentNode;return n!==o?r:o},C=function(e,t){var n=e.settings.forced_root_block;n&&n.toLowerCase()===t.tagName.toLowerCase()&&e.dom.setAttribs(t,e.settings.forced_root_block_attrs)},k=function(e,t,n,r,o){var i,a,c,s,l,f,d=t||"P",p=e.dom,g=w(p,r);if(!(a=p.getParent(r,p.isBlock))||!m(p,a)){if(a=a||g,f=a==e.getBody()||u(a)?a.nodeName.toLowerCase():a.parentNode.nodeName.toLowerCase(),!a.hasChildNodes())return i=p.create(d),C(e,i),a.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i;for(s=r;s.parentNode!=a;)s=s.parentNode;for(;s&&!p.isBlock(s);)c=s,s=s.previousSibling;if(c&&e.schema.isValidChild(f,d.toLowerCase())){for(i=p.create(d),C(e,i),c.parentNode.insertBefore(i,c),s=c;s&&!p.isBlock(s);)l=s.nextSibling,i.appendChild(s),s=l;n.setStart(r,o),n.setEnd(r,o)}}return r},T=function(e,t){var n;t.normalize(),(n=t.lastChild)&&!/^(left|right)$/gi.test(e.getStyle(n,"float",!0))||e.add(t,"br")},S=function(e){var t=e.parentNode;return/^(LI|DT|DD)$/.test(t.nodeName)?t:e},E=function(e,t,n){for(var r=e[n?"firstChild":"lastChild"];r&&1!=r.nodeType;)r=r[n?"nextSibling":"previousSibling"];return r===t};return{insert:function(t,o){var i,a,u,d,_,A,N,D,R,P,I,O,B,M=t.dom,L=t.selection,F=t.settings,H=t.schema,U=H.getNonEmptyElements(),W=t.selection.getRng(),j=function(e){var t,n,o,i,a=e,u=H.getMoveCaretBeforeOnEnterElements();if(e){if(/^(LI|DT|DD)$/.test(e.nodeName)){var c=y(e.firstChild);c&&/^(UL|OL|DL)$/.test(c.nodeName)&&e.insertBefore(M.doc.createTextNode("\xa0"),e.firstChild)}if(o=M.createRng(),e.normalize(),e.hasChildNodes()){for(t=new r(e,e);n=t.current();){if(3==n.nodeType){o.setStart(n,0),o.setEnd(n,0);break}if(u[n.nodeName.toLowerCase()]){o.setStartBefore(n),o.setEndBefore(n);break}a=n,n=t.next()}n||(o.setStart(a,0),o.setEnd(a,0))}else"BR"==e.nodeName?e.nextSibling&&M.isBlock(e.nextSibling)?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)):(o.setStart(e,0),o.setEnd(e,0));L.setRng(o),M.remove(i),L.scrollIntoView(e)}},q=function(e){var n,r,o,i=u,c=H.getTextInlineElements();if(e||"TABLE"==P||"HR"==P?(n=M.create(e||O),C(t,n)):n=_.cloneNode(!1),o=n,!1===F.keep_styles)M.setAttrib(n,"style",null),M.setAttrib(n,"class",null);else do{if(c[i.nodeName]){if("_mce_caret"==i.id)continue;r=i.cloneNode(!1),M.setAttrib(r,"id",""),n.hasChildNodes()?(r.appendChild(n.firstChild),n.appendChild(r)):(o=r,n.appendChild(r))}}while((i=i.parentNode)&&i!=a);return l(o),n},$=function(e){var t,n,o,i;if(i=h(e,u,d),3==u.nodeType&&(e?i>0:i<u.nodeValue.length))return!1;if(u.parentNode==_&&B&&!e)return!0;if(e&&1==u.nodeType&&u==_.firstChild)return!0;if(f(u,"TABLE")||f(u,"HR"))return B&&!e||!B&&e;for(t=new r(u,_),3==u.nodeType&&(e&&0===i?t.prev():e||i!=u.nodeValue.length||t.next());n=t.current();){if(1===n.nodeType){if(!n.getAttribute("data-mce-bogus")&&(o=n.nodeName.toLowerCase(),U[o]&&"br"!==o))return!1}else if(3===n.nodeType&&!/^[ \t\r\n]*$/.test(n.nodeValue))return!1;e?t.prev():t.next()}return!0},z=function(){R!=t.getBody()&&(p(R)&&(O="LI"),N=O?q(O):M.create("BR"),E(R,_,!0)&&E(R,_,!1)?s(R,"LI")?M.insertAfter(N,S(R)):M.replace(N,R):E(R,_,!0)?s(R,"LI")?(M.insertAfter(N,S(R)),N.appendChild(M.doc.createTextNode(" ")),N.appendChild(R)):R.parentNode.insertBefore(N,R):E(R,_,!1)?M.insertAfter(N,S(R)):(R=S(R),i=W.cloneRange(),i.setStartAfter(_),i.setEndAfter(R),D=i.extractContents(),"LI"===O&&c(D,"LI")?(N=D.firstChild,M.insertAfter(D,R)):(M.insertAfter(D,R),M.insertAfter(N,R))),M.remove(_),j(N))},V=function(){N=/^(H[1-6]|PRE|FIGURE)$/.test(P)&&"HGROUP"!=I?q(O):q(),F.end_container_on_empty_block&&m(M,R)&&M.isEmpty(_)?N=M.split(R,_):M.insertAfter(N,_),j(N)};if(new n(M).normalize(W),u=W.startContainer,d=W.startOffset,O=(F.force_p_newlines?"p":"")||F.forced_root_block,O=O?O.toUpperCase():"",A=o.shiftKey,1==u.nodeType&&u.hasChildNodes()&&(B=d>u.childNodes.length-1,u=u.childNodes[Math.min(d,u.childNodes.length-1)]||u,d=B&&3==u.nodeType?u.nodeValue.length:0),a=w(M,u)){if(!M.isBlock(a)&&a!=M.getRoot())return void(O&&!A||b(t,o));if((O&&!A||!O&&A)&&(u=k(t,O,W,u,d)),_=M.getParent(u,M.isBlock),R=_?M.getParent(_.parentNode,M.isBlock):null,P=_?_.nodeName.toUpperCase():"",I=R?R.nodeName.toUpperCase():"","LI"!=I||o.ctrlKey||(_=R,R=R.parentNode,P=I),/^(LI|DT|DD)$/.test(P)){if(!O&&A)return void b(t,o);if(M.isEmpty(_))return void z()}if("PRE"==P&&!1!==F.br_in_pre){if(!A)return void b(t,o)}else if(!O&&!A&&"LI"!=P||O&&A)return void b(t,o);O&&_===t.getBody()||(O=O||"P",e.isCaretContainerBlock(_)?(N=e.showCaretContainerBlock(_),M.isEmpty(_)&&l(_),j(N)):$()?V():$(!0)?(N=_.parentNode.insertBefore(q(),_),j(f(_,"HR")?N:_)):(i=v(W).cloneRange(),i.setEndAfter(_),D=i.extractContents(),x(D),N=D.firstChild,M.insertAfter(D,_),g(M,U,N),T(M,_),M.isEmpty(_)&&l(_),N.normalize(),M.isEmpty(N)?(M.remove(N),V()):j(N)),M.setAttrib(N,"id",""),t.fire("NewBlock",{newBlock:N}))}}}}),i("tinymce.core.keyboard.EnterKey",["tinymce.core.keyboard.InsertNewLine","tinymce.core.util.VK"],function(e,t){var n=function(e){e.typing&&(e.typing=!1,e.add())},r=function(t,r){r.isDefaultPrevented()||(r.preventDefault(),n(t.undoManager),t.undoManager.transact(function(){!1===t.selection.isCollapsed()&&t.execCommand("Delete"),e.insert(t,r)}))};return{setup:function(e){e.on("keydown",function(n){n.keyCode===t.ENTER&&r(e,n)})}}}),i("tinymce.core.keyboard.InsertSpace",["ephox.katamari.api.Fun","tinymce.core.caret.CaretPosition","tinymce.core.dom.NodeType","tinymce.core.keyboard.BoundaryLocation","tinymce.core.keyboard.InlineUtils"],function(e,t,n,r,o){var i=function(e,t){return s(e)&&n.isText(t.container())},a=function(e,t){var n=t.container(),r=t.offset();n.insertData(r,"\xa0"),e.selection.setCursorLocation(n,r+1)},u=function(e,t,n){return!!i(n,t)&&(a(e,t),!0)},c=function(n){var i=e.curry(o.isInlineTarget,n),a=t.fromRangeStart(n.selection.getRng());return r.readLocation(i,n.getBody(),a).map(e.curry(u,n,a)).getOr(!1)},s=function(t){return t.fold(e.constant(!1),e.constant(!0),e.constant(!0),e.constant(!1))};return{insertAtSelection:function(e){return!!e.selection.isCollapsed()&&c(e)}}}),i("tinymce.core.keyboard.SpaceKey",["tinymce.core.keyboard.InsertSpace","tinymce.core.keyboard.MatchKeys","tinymce.core.util.VK"],function(e,t,n){var r=function(r,o){t.execute([{keyCode:n.SPACEBAR,action:t.action(e.insertAtSelection,r)}],o).each(function(){o.preventDefault()})};return{setup:function(e){e.on("keydown",function(t){!1===t.isDefaultPrevented()&&r(e,t)})}}}),i("tinymce.core.keyboard.KeyboardOverrides",["tinymce.core.keyboard.ArrowKeys","tinymce.core.keyboard.BoundarySelection","tinymce.core.keyboard.DeleteBackspaceKeys","tinymce.core.keyboard.EnterKey","tinymce.core.keyboard.SpaceKey"],function(e,t,n,r,o){return{setup:function(i){var a=t.setupSelectedState(i);e.setup(i,a),n.setup(i,a),r.setup(i),o.setup(i)}}}),i("tinymce.core.NodeChange",["tinymce.core.dom.RangeUtils","tinymce.core.Env","tinymce.core.util.Delay"],function(e,t,n){return function(r){var o,i=[],a=function(e){var t,n;if(n=r.$(e).parentsUntil(r.getBody()).add(e),n.length===i.length){for(t=n.length;t>=0&&n[t]===i[t];t--);if(-1===t)return i=n,!0}return i=n,!1};"onselectionchange"in r.getDoc()||r.on("NodeChange Click MouseUp KeyUp Focus",function(t){var n,i;n=r.selection.getRng(),i={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset},"nodechange"!=t.type&&e.compareRanges(i,o)||r.fire("SelectionChange"),o=i}),r.on("contextmenu",function(){r.fire("SelectionChange")}),r.on("SelectionChange",function(){var e=r.selection.getStart(!0);!e||!t.range&&r.selection.isCollapsed()||!a(e)&&r.dom.isChildOf(e,r.getBody())&&r.nodeChanged({selectionChange:!0})}),r.on("MouseUp",function(e){e.isDefaultPrevented()||("IMG"==r.selection.getNode().nodeName?n.setEditorTimeout(r,function(){r.nodeChanged()}):r.nodeChanged())}),this.nodeChanged=function(e){var t,n,o,i=r.selection;r.initialized&&i&&!r.settings.disable_nodechange&&!r.readonly&&(o=r.getBody(),t=i.getStart(!0)||o,t.ownerDocument==r.getDoc()&&r.dom.isChildOf(t,o)||(t=o),n=[],r.dom.getParent(t,function(e){if(e===o)return!0;n.push(e)}),e=e||{},e.element=t,e.parents=n,r.fire("NodeChange",e))}}}),i("tinymce.core.dom.MousePosition",[],function(){var e=function(e){var t,n,r,o;return o=e.getBoundingClientRect(),t=e.ownerDocument,n=t.documentElement,r=t.defaultView,{top:o.top+r.pageYOffset-n.clientTop,left:o.left+r.pageXOffset-n.clientLeft}},t=function(t){return t.inline?e(t.getBody()):{left:0,top:0}},n=function(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},r=function(e){var t=e.getBody(),n=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?r:o},o=function(t,n){if(n.target.ownerDocument!==t.getDoc()){var o=e(t.getContentAreaContainer()),i=r(t);return{left:n.pageX-o.left+i.left,top:n.pageY-o.top+i.top}}return{left:n.pageX,top:n.pageY}},i=function(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}};return{calc:function(e,r){return i(t(e),n(e),o(e,r))}}}),i("tinymce.core.DragDropOverrides",["global!document","tinymce.core.dom.DOMUtils","tinymce.core.dom.MousePosition","tinymce.core.dom.NodeType","tinymce.core.util.Arr","tinymce.core.util.Delay","tinymce.core.util.Fun"],function(e,t,n,r,o,i,a){var u=r.isContentEditableFalse,c=r.isContentEditableTrue,s=function(e,t){return u(t)&&t!==e},l=function(e,t,n){return t!==n&&!e.dom.isChildOf(t,n)&&!u(t)},f=function(e){var t=e.cloneNode(!0);return t.removeAttribute("data-mce-selected"),t},d=function(e,t,n,r){var o=t.cloneNode(!0);e.dom.setStyles(o,{width:n,height:r}),e.dom.setAttrib(o,"data-mce-selected",null);var i=e.dom.create("div",{"class":"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return e.dom.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:r}),e.dom.setStyles(o,{margin:0,boxSizing:"border-box"}),i.appendChild(o),i},p=function(e,t){e.parentNode!==t&&t.appendChild(e)},m=function(e,t,n,r,o,i){var a=0,u=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(a=t.pageX+n-o),t.pageY+r>i&&(u=t.pageY+r-i),e.style.width=n-a+"px",e.style.height=r-u+"px"},g=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},h=function(e){return 0===e.button},v=function(e){return e.element},y=function(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}},b=function(e,t){return function(n){if(h(n)){var r=o.find(t.dom.getParents(n.target),a.or(u,c));if(s(t.getBody(),r)){var i=t.dom.getPos(r),l=t.getBody(),f=t.getDoc().documentElement;e.element=r,e.screenX=n.screenX,e.screenY=n.screenY,e.maxX=(t.inline?l.scrollWidth:f.offsetWidth)-2,e.maxY=(t.inline?l.scrollHeight:f.offsetHeight)-2,e.relX=n.pageX-i.x,e.relY=n.pageY-i.y,e.width=r.offsetWidth,e.height=r.offsetHeight,e.ghost=d(t,r,e.width,e.height)}}}},x=function(e,t){var r=i.throttle(function(e,n){t._selectionOverrides.hideFakeCaret(),t.selection.placeCaretAt(e,n)},0);return function(o){var i=Math.max(Math.abs(o.screenX-e.screenX),Math.abs(o.screenY-e.screenY));if(v(e)&&!e.dragging&&i>10){if(t.fire("dragstart",{target:e.element}).isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var a=y(e,n.calc(t,o));p(e.ghost,t.getBody()),m(e.ghost,a,e.width,e.height,e.maxX,e.maxY),r(o.clientX,o.clientY)}}},w=function(e){var t=e.getSel().getRangeAt(0),n=t.startContainer;return 3===n.nodeType?n.parentNode:n},C=function(e,t){return function(n){if(e.dragging&&l(t,w(t.selection),e.element)){var r=f(e.element),o=t.fire("drop",{targetClone:r,clientX:n.clientX,clientY:n.clientY});o.isDefaultPrevented()||(r=o.targetClone,t.undoManager.transact(function(){g(e.element),t.insertContent(t.dom.getOuterHTML(r)),t._selectionOverrides.hideFakeCaret()}))}T(e)}},k=function(e,t){return function(){T(e),e.dragging&&t.fire("dragend")}},T=function(e){e.dragging=!1,e.element=null,g(e.ghost)},S=function(n){var r,o,i,a,u,c,s={};r=t.DOM,c=e,o=b(s,n),i=x(s,n),a=C(s,n),u=k(s,n),n.on("mousedown",o),n.on("mousemove",i),n.on("mouseup",a),r.bind(c,"mousemove",i),r.bind(c,"mouseup",u),n.on("remove",function(){r.unbind(c,"mousemove",i),r.unbind(c,"mouseup",u)})},E=function(e){e.on("drop",function(t){var n="undefined"!=typeof t.clientX?e.getDoc().elementFromPoint(t.clientX,t.clientY):null;(u(n)||u(e.dom.getContentEditableParent(n)))&&t.preventDefault()})};return{init:function(e){S(e),E(e)}}}),i("tinymce.core.caret.FakeCaret",["global!clearInterval","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretContainerRemove","tinymce.core.dom.DomQuery","tinymce.core.dom.NodeType","tinymce.core.geom.ClientRect","tinymce.core.util.Delay"],function(e,t,n,r,o,i,a){var u=o.isContentEditableFalse,c=function(e){return e&&/^(TD|TH)$/i.test(e.nodeName)};return function(o,s){var l,f,d=null,p=function(e,t){var n,r,a,u,c,s=i.collapse(e.getBoundingClientRect(),t);return"BODY"==o.tagName?(n=o.ownerDocument.documentElement,r=o.scrollLeft||n.scrollLeft,a=o.scrollTop||n.scrollTop):(c=o.getBoundingClientRect(),r=o.scrollLeft-c.left,a=o.scrollTop-c.top),s.left+=r,s.right+=r,s.top+=a,s.bottom+=a,s.width=1,u=e.offsetWidth-e.clientWidth,u>0&&(t&&(u*=-1),s.left+=u,s.right+=u),s},m=function(){var e,n,i,a,u;for(e=r("*[contentEditable=false]",o),a=0;a<e.length;a++)n=e[a],i=n.previousSibling,t.endsWithCaretContainer(i)&&(u=i.data,1==u.length?i.parentNode.removeChild(i):i.deleteData(u.length-1,1)),i=n.nextSibling,t.startsWithCaretContainer(i)&&(u=i.data,1==u.length?i.parentNode.removeChild(i):i.deleteData(0,1));return null},g=function(e,n){var i,a;return h(),c(n)?null:s(n)?(f=t.insertBlock("p",n,e),i=p(n,e),r(f).css("top",i.top),d=r('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(i).appendTo(o),e&&d.addClass("mce-visual-caret-before"),y(),a=n.ownerDocument.createRange(),a.setStart(f,0),a.setEnd(f,0),a):(f=t.insertInline(n,e),a=n.ownerDocument.createRange(),u(f.nextSibling)?(a.setStart(f,0),a.setEnd(f,0)):(a.setStart(f,1),a.setEnd(f,1)),a)},h=function(){m(),f&&(n.remove(f),f=null),d&&(d.remove(),d=null),e(l)},v=function(){return o.ownerDocument.activeElement===o},y=function(){l=a.setInterval(function(){v()?r("div.mce-visual-caret",o).toggleClass("mce-visual-caret-hidden"):r("div.mce-visual-caret",o).addClass("mce-visual-caret-hidden")},500)},b=function(){a.clearInterval(l)};return{show:g,hide:h,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},destroy:b}}}),i("tinymce.core.SelectionOverrides",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","tinymce.core.DragDropOverrides","tinymce.core.EditorView","tinymce.core.Env","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretUtils","tinymce.core.caret.CaretWalker","tinymce.core.caret.FakeCaret","tinymce.core.caret.LineUtils","tinymce.core.dom.ElementType","tinymce.core.dom.NodeType","tinymce.core.dom.RangePoint","tinymce.core.keyboard.CefUtils","tinymce.core.util.Delay","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x){var w=h.isContentEditableTrue,C=h.isContentEditableFalse,k=f.isAfterContentEditableFalse,T=f.isBeforeContentEditableFalse;return function(h){var S,E=function(e){return h.dom.isBlock(e)},_=h.getBody(),A=new p(h.getBody(),E),N="sel-"+h.dom.uniqueId(),D=function(e){return h.dom.hasClass(e,"mce-offscreen-selection")},R=function(){var e=h.dom.get(N);return e?e.getElementsByTagName("*")[0]:e},P=function(e){e&&h.selection.setRng(e)},I=function(){return h.selection.getRng()},O=function(e,t){h.selection.scrollIntoView(e,t)},B=function(e,t,n){var r;return r=h.fire("ShowCaret",{target:t,direction:e,before:n}),r.isDefaultPrevented()?null:(O(t,-1===e),A.show(n,t))},M=function(e,t){return t=f.normalizeRange(e,_,t),-1==e?l.fromRangeStart(t):l.fromRangeEnd(t)},L=function(e){e.hasAttribute("data-mce-caret")&&(s.showCaretContainerBlock(e),P(I()),O(e[0]))},F=function(){var e=function(e){for(var t=h.getBody();e&&e!=t;){if(w(e)||C(e))return e;e=e.parentNode}return null};h.on("mouseup",function(e){var t=I();t.collapsed&&u.isXYInContentArea(h,e.clientX,e.clientY)&&P(y.renderCaretAtRange(h,t))}),h.on("click",function(t){var n;(n=e(t.target))&&(C(n)&&(t.preventDefault(),h.focus()),w(n)&&h.dom.isChildOf(n,h.selection.getNode())&&q())}),h.on("blur NewBlock",function(){q()});var t=function(e){var t=new d(e);if(!e.firstChild)return!1;var n=l.before(e.firstChild),r=t.next(n);return r&&!T(r)&&!k(r)},r=function(e,t){return h.dom.getParent(e,h.dom.isBlock)===h.dom.getParent(t,h.dom.isBlock)},o=function(e,n){var o=h.dom.getParent(e,h.dom.isBlock),i=h.dom.getParent(n,h.dom.isBlock);return o&&!r(o,i)&&t(o)};(function(t){var n=!1;t.on("touchstart",function(){n=!1}),t.on("touchmove",function(){n=!0}),t.on("touchend",function(r){var o=e(r.target);C(o)&&(n||(r.preventDefault(),j(y.selectNode(t,o))))})})(h),h.on("mousedown",function(t){var r;if(!1!==u.isXYInContentArea(h,t.clientX,t.clientY))if(r=e(t.target))C(r)?(t.preventDefault(),j(y.selectNode(h,r))):(q(),w(r)&&t.shiftKey||v.isXYWithinRange(t.clientX,t.clientY,h.selection.getRng())||(g.isVoid(n.fromDom(t.target))?h.selection.select(t.target):h.selection.placeCaretAt(t.clientX,t.clientY)));else{q(),z();var i=m.closestCaret(_,t.clientX,t.clientY);i&&(o(t.target,i.node)||(t.preventDefault(),h.getBody().focus(),P(B(1,i.node,i.before))))}}),h.on("keypress",function(e){x.modifierPressed(e)||(e.keyCode,C(h.selection.getNode())&&e.preventDefault())}),h.on("getSelectionRange",function(e){var t=e.range;if(S){if(!S.parentNode)return void(S=null);t=t.cloneRange(),t.selectNode(S),e.range=t}}),h.on("setSelectionRange",function(e){var t;(t=j(e.range,e.forward))&&(e.range=t)}),h.on("AfterSetSelectionRange",function(e){var t=e.range;W(t)||z(),D(t.startContainer.parentNode)||q()}),h.on("focus",function(){b.setEditorTimeout(h,function(){h.selection.setRng(y.renderRangeCaret(h,h.selection.getRng()))},0)}),h.on("copy",function(e){var t=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!c.ie){var n=R();n&&(e.preventDefault(),t.clearData(),t.setData("text/html",n.outerHTML),t.setData("text/plain",n.outerText))}}),a.init(h)},H=function(){var e=h.contentStyles,t=".mce-content-body";e.push(A.getCss()),e.push(t+" .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}"+t+" *[contentEditable=false] {cursor: default;}"+t+" *[contentEditable=true] {cursor: text;}")},U=function(e){return s.isCaretContainer(e)||s.startsWithCaretContainer(e)||s.endsWithCaretContainer(e)},W=function(e){return U(e.startContainer)||U(e.endContainer)},j=function(t,a){var u,s,l,f,d,p,m,g,v,y,b=h.$,x=h.dom;if(!t)return null;if(t.collapsed){if(!W(t))if(!1===a){if(g=M(-1,t),C(g.getNode(!0)))return B(-1,g.getNode(!0),!1);if(C(g.getNode()))return B(-1,g.getNode(),!g.isAtEnd())}else{if(g=M(1,t),C(g.getNode()))return B(1,g.getNode(),!g.isAtEnd());if(C(g.getNode(!0)))return B(1,g.getNode(!0),!1)}return null}return f=t.startContainer,d=t.startOffset,p=t.endOffset,3==f.nodeType&&0==d&&C(f.parentNode)&&(f=f.parentNode,d=x.nodeIndex(f),f=f.parentNode),1!=f.nodeType?null:(p==d+1&&(u=f.childNodes[d]),C(u)?(v=y=u.cloneNode(!0),m=h.fire("ObjectSelected",{target:u,targetClone:v}),m.isDefaultPrevented()?null:(s=i.descendant(n.fromDom(h.getBody()),"#"+N).fold(function(){return b([])},function(e){return b([e.dom()])}),v=m.targetClone,0===s.length&&(s=b('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",N),s.appendTo(h.getBody())),t=h.dom.createRng(),v===y&&c.ie?(s.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(v),t.setStartAfter(s[0].firstChild.firstChild),t.setEndAfter(v)):(s.empty().append("\xa0").append(v).append("\xa0"),t.setStart(s[0].firstChild,1),t.setEnd(s[0].lastChild,0)),s.css({top:x.getPos(u,h.getBody()).y}),s[0].focus(),l=h.selection.getSel(),l.removeAllRanges(),l.addRange(t),e.each(o.descendants(n.fromDom(h.getBody()),"*[data-mce-selected]"),function(e){r.remove(e,"data-mce-selected")}),u.setAttribute("data-mce-selected",1),S=u,z(),t)):null)},q=function(){S&&(S.removeAttribute("data-mce-selected"),i.descendant(n.fromDom(h.getBody()),"#"+N).each(t.remove),S=null)},$=function(){A.destroy(),S=null},z=function(){A.hide()};return c.ceFalse&&(F(),H()),{showCaret:B,showBlockCaretContainer:L,hideFakeCaret:z,destroy:$}}}),i("tinymce.core.undo.Diff",[],function(){var e=0,t=1,n=2;return{KEEP:e,DELETE:n,INSERT:t,diff:function(r,o){var i=r.length+o.length+2,a=new Array(i),u=new Array(i),c=function(e,t,n){return{start:e,end:t,diag:n}},s=function(i,a,u,c,l){var d=f(i,a,u,c);if(null===d||d.start===a&&d.diag===a-c||d.end===i&&d.diag===i-u)for(var p=i,m=u;p<a||m<c;)p<a&&m<c&&r[p]===o[m]?(l.push([e,r[p]]),++p,++m):a-i>c-u?(l.push([n,r[p]]),++p):(l.push([t,o[m]]),++m);else{s(i,d.start,u,d.start-d.diag,l);for(var g=d.start;g<d.end;++g)l.push([e,r[g]]);s(d.end,a,d.end-d.diag,c,l)}},l=function(e,t,n,i){for(var a=e;a-t<i&&a<n&&r[a]===o[a-t];)++a;return c(e,a,t)},f=function(e,t,n,i){var c=t-e,s=i-n;if(0===c||0===s)return null;var f=c-s,d=s+c,p=(d%2==0?d:d+1)/2;a[1+p]=e,u[1+p]=t+1;for(var m=0;m<=p;++m){for(var g=-m;g<=m;g+=2){var h=g+p;g===-m||g!=m&&a[h-1]<a[h+1]?a[h]=a[h+1]:a[h]=a[h-1]+1;for(var v=a[h],y=v-e+n-g;v<t&&y<i&&r[v]===o[y];)a[h]=++v,++y;if(f%2!=0&&f-m<=g&&g<=f+m&&u[h-f]<=a[h])return l(u[h-f],g+e-n,t,i)}for(g=f-m;g<=f+m;g+=2){for(h=g+p-f,g===f-m||g!=f+m&&u[h+1]<=u[h-1]?u[h]=u[h+1]-1:u[h]=u[h-1],v=u[h]-1,y=v-e+n-g;v>=e&&y>=n&&r[v]===o[y];)u[h]=v--,y--;if(f%2==0&&-m<=g&&g<=m&&u[h]<=a[h+f])return l(u[h],g+e-n,t,i)}}},d=[];return s(0,r.length,0,o.length,d),d}}}),i("tinymce.core.undo.Fragments",["global!document","tinymce.core.html.Entities","tinymce.core.undo.Diff","tinymce.core.util.Arr"],function(e,t,n,r){var o=function(e){return 1===e.nodeType?e.outerHTML:3===e.nodeType?t.encodeRaw(e.data,!1):8===e.nodeType?"<!--"+e.data+"-->":""},i=function(t){var n,r,o;for(o=e.createElement("div"),n=e.createDocumentFragment(),t&&(o.innerHTML=t);r=o.firstChild;)n.appendChild(r);return n},a=function(e,t,n){var r=i(t);if(e.hasChildNodes()&&n<e.childNodes.length){var o=e.childNodes[n];o.parentNode.insertBefore(r,o)}else e.appendChild(r)},u=function(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];n.parentNode.removeChild(n)}},c=function(e,t){var o=0;r.each(e,function(e){e[0]===n.KEEP?o++:e[0]===n.INSERT?(a(t,e[1],o),o++):e[0]===n.DELETE&&u(t,o)})};return{read:function(e){return r.filter(r.map(e.childNodes,o),function(e){return e.length>0})},write:function(e,t){var i=r.map(t.childNodes,o);return c(n.diff(i,e),t),t}}}),i("tinymce.core.undo.Levels",["tinymce.core.util.Arr","tinymce.core.undo.Fragments"],function(e,t){var n=function(e){return-1!==e.indexOf("</iframe>")},r=function(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}},o=function(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}},i=function(i){var a,u,c;return a=t.read(i.getBody()),c=e.map(a,function(e){return i.serializer.trimContent(e)}),u=c.join(""),n(u)?r(c):o(u)},a=function(e,n,r){"fragmented"===n.type?t.write(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw"}),e.selection.moveToBookmark(r?n.beforeBookmark:n.bookmark)},u=function(e){return"fragmented"===e.type?e.fragments.join(""):e.content};return{createFragmentedLevel:r,createCompleteLevel:o,createFromEditor:i,applyToEditor:a,isEq:function(e,t){return!!e&&!!t&&u(e)===u(t)}}}),i("tinymce.core.UndoManager",["tinymce.core.util.VK","tinymce.core.util.Tools","tinymce.core.undo.Levels"],function(e,t,n){return function(e){var r,o,i=this,a=0,u=[],c=0,s=function(){return 0===c},l=function(e){s()&&(i.typing=e)},f=function(t){e.setDirty(t)},d=function(e){l(!1),i.add({},e)},p=function(){i.typing&&(l(!1),i.add())};return e.on("init",function(){i.add()}),e.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&(p(),i.beforeChange())}),e.on("ExecCommand",function(e){var t=e.command;"Undo"!==t&&"Redo"!==t&&"mceRepaint"!==t&&d(e)}),e.on("ObjectResizeStart Cut",function(){i.beforeChange()}),e.on("SaveContent ObjectResized blur",d),e.on("DragEnd",d),e.on("KeyUp",function(t){var r=t.keyCode;t.isDefaultPrevented()||((r>=33&&r<=36||r>=37&&r<=40||45===r||t.ctrlKey)&&(d(),e.nodeChanged()),46!==r&&8!==r||e.nodeChanged(),o&&i.typing&&!1===n.isEq(n.createFromEditor(e),u[0])&&(!1===e.isDirty()&&(f(!0),e.fire("change",{level:u[0],lastLevel:null})),e.fire("TypingUndo"),o=!1,e.nodeChanged()))}),e.on("KeyDown",function(e){var t=e.keyCode;if(!e.isDefaultPrevented()){if(t>=33&&t<=36||t>=37&&t<=40||45===t)return void(i.typing&&d(e));var n=e.ctrlKey&&!e.altKey||e.metaKey;!(t<16||t>20)||224===t||91===t||i.typing||n||(i.beforeChange(),l(!0),i.add({},e),o=!0)}}),e.on("MouseDown",function(e){i.typing&&d(e)}),e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo"),e.on("AddUndo Undo Redo ClearUndos",function(t){t.isDefaultPrevented()||e.nodeChanged()}),i={data:u,typing:!1,beforeChange:function(){s()&&(r=e.selection.getBookmark(2,!0))},add:function(o,i){var c,l,d,p=e.settings;if(d=n.createFromEditor(e),o=o||{},o=t.extend(o,d),!1===s()||e.removed)return null;if(l=u[a],e.fire("BeforeAddUndo",{level:o,lastLevel:l,originalEvent:i}).isDefaultPrevented())return null;if(l&&n.isEq(l,o))return null;if(u[a]&&(u[a].beforeBookmark=r),p.custom_undo_redo_levels&&u.length>p.custom_undo_redo_levels){for(c=0;c<u.length-1;c++)u[c]=u[c+1];u.length--,a=u.length}o.bookmark=e.selection.getBookmark(2,!0),a<u.length-1&&(u.length=a+1),u.push(o),a=u.length-1;var m={level:o,lastLevel:l,originalEvent:i};return e.fire("AddUndo",m),a>0&&(f(!0),e.fire("change",m)),o},undo:function(){var t;return i.typing&&(i.add(),i.typing=!1,l(!1)),a>0&&(t=u[--a],n.applyToEditor(e,t,!0),f(!0),e.fire("undo",{level:t})),t},redo:function(){var t;return a<u.length-1&&(t=u[++a],n.applyToEditor(e,t,!1),f(!0),e.fire("redo",{level:t})),t},clear:function(){u=[],a=0,i.typing=!1,i.data=u,e.fire("ClearUndos")},hasUndo:function(){return a>0||i.typing&&u[0]&&!n.isEq(n.createFromEditor(e),u[0])},hasRedo:function(){return a<u.length-1&&!i.typing},transact:function(e){return p(),i.beforeChange(),i.ignore(e),i.add()},ignore:function(e){try{c++,e()}finally{c--}},extra:function(t,r){var o,c;i.transact(t)&&(c=u[a].bookmark,o=u[a-1],n.applyToEditor(e,o,!0),i.transact(r)&&(u[a-1].beforeBookmark=c))}}}}),i("tinymce.core.dom.NodePath",["tinymce.core.dom.DOMUtils"],function(e){return{create:function(t,n,r){for(var o=[];n&&n!=t;n=n.parentNode)o.push(e.nodeIndex(n,r));return o},resolve:function(e,t){var n,r,o;for(r=e,n=t.length-1;n>=0;n--){if(o=r.childNodes,t[n]>o.length-1)return null;r=o[t[n]]}return r}}}),i("tinymce.core.util.Quirks",["global!document","global!window","tinymce.core.caret.CaretContainer","tinymce.core.caret.CaretPosition","tinymce.core.caret.CaretWalker","tinymce.core.dom.NodePath","tinymce.core.dom.RangeUtils","tinymce.core.dom.TreeWalker","tinymce.core.Env","tinymce.core.html.Entities","tinymce.core.html.Node","tinymce.core.util.Delay","tinymce.core.util.Tools","tinymce.core.util.VK"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p){return function(r){var o=d.each,i=p.BACKSPACE,u=p.DELETE,s=r.dom,l=r.selection,m=r.settings,g=r.parser,h=c.gecko,v=c.ie,y=c.webkit,b="data:text/mce-internal,",x=v?"Text":"URL",w=function(e,t){try{r.getDoc().execCommand(e,!1,t)}catch(e){}},C=function(e){return e.isDefaultPrevented()},k=function(e){var t,n;e.dataTransfer&&(r.selection.isCollapsed()&&"IMG"==e.target.tagName&&l.select(e.target),t=r.selection.getContent(),t.length>0&&(n=b+escape(r.id)+","+escape(t),e.dataTransfer.setData(x,n)))},T=function(e){var t;return e.dataTransfer&&(t=e.dataTransfer.getData(x))&&t.indexOf(b)>=0?(t=t.substr(b.length).split(","),{id:unescape(t[0]),html:unescape(t[1])}):null},S=function(e,t){r.queryCommandSupported("mceInsertClipboardContent")?r.execCommand("mceInsertClipboardContent",!1,{content:e,internal:t}):r.execCommand("mceInsertContent",!1,e)},E=function(){var e=function(e){var t=s.create("body"),n=e.cloneContents();return t.appendChild(n),l.serializer.serialize(t,{format:"html"})},t=function(t){var n=e(t),o=s.createRng();return o.selectNode(r.getBody()),n===e(o)};r.on("keydown",function(e){var n,o,a=e.keyCode;if(!C(e)&&(a==u||a==i)){if(n=r.selection.isCollapsed(),o=r.getBody(),n&&!s.isEmpty(o))return;if(!n&&!t(r.selection.getRng()))return;e.preventDefault(),r.setContent(""),o.firstChild&&s.isBlock(o.firstChild)?r.selection.setCursorLocation(o.firstChild,0):r.selection.setCursorLocation(o,0),r.nodeChanged()}})},_=function(){r.shortcuts.add("meta+a",null,"SelectAll")},A=function(){r.settings.content_editable||s.bind(r.getDoc(),"mousedown mouseup",function(e){var t;if(e.target==r.getDoc().documentElement)if(t=l.getRng(),r.getBody().focus(),"mousedown"==e.type){if(n.isCaretContainer(t.startContainer))return;l.placeCaretAt(e.clientX,e.clientY)}else l.setRng(t)})},N=function(){r.on("keydown",function(e){if(!C(e)&&e.keyCode===i){if(!r.getBody().getElementsByTagName("hr").length)return;if(l.isCollapsed()&&0===l.getRng(!0).startOffset){var t=l.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return s.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(s.remove(n),e.preventDefault())}}})},D=function(){t.Range.prototype.getClientRects||r.on("mousedown",function(e){if(!C(e)&&"HTML"===e.target.nodeName){var t=r.getBody();t.blur(),f.setEditorTimeout(r,function(){t.focus()})}})},R=function(){r.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&"false"!==s.getContentEditableParent(t)&&(e.preventDefault(),r.selection.select(t),r.nodeChanged()),"A"==t.nodeName&&s.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),l.select(t))})},P=function(){var e=function(){var e=s.getAttribs(l.getStart().cloneNode(!1));return function(){var t=l.getStart();t!==r.getBody()&&(s.setAttrib(t,"style",null),o(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}},t=function(){return!l.isCollapsed()&&s.getParent(l.getStart(),s.isBlock)!=s.getParent(l.getEnd(),s.isBlock)};r.on("keypress",function(n){var o;if(!C(n)&&(8==n.keyCode||46==n.keyCode)&&t())return o=e(),r.getDoc().execCommand("delete",!1,null),o(),n.preventDefault(),!1}),s.bind(r.getDoc(),"cut",function(n){var o;!C(n)&&t()&&(o=e(),f.setEditorTimeout(r,function(){o()}))})},I=function(){r.on("keydown",function(e){if(!C(e)&&e.keyCode===i&&l.isCollapsed()&&0===l.getRng(!0).startOffset){var t=l.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})},O=function(){r.on("keydown",function(e){var t,n,o,i,a;if(!C(e)&&e.keyCode==p.BACKSPACE&&(t=l.getRng(),n=t.startContainer,o=t.startOffset,i=s.getRoot(),a=n,t.collapsed&&0===o)){for(;a&&a.parentNode&&a.parentNode.firstChild==a&&a.parentNode!=i;)a=a.parentNode
;"BLOCKQUOTE"===a.tagName&&(r.formatter.toggle("blockquote",null,a),t=s.createRng(),t.setStart(n,0),t.setEnd(n,0),l.setRng(t))}})},B=function(){var e=function(){G(),w("StyleWithCSS",!1),w("enableInlineTableEditing",!1),m.object_resizing||w("enableObjectResizing",!1)};m.readonly||r.on("BeforeExecCommand MouseDown",e)},M=function(){var e=function(){o(s.select("a"),function(e){var t=e.parentNode,n=s.getRoot();if(t.lastChild===e){for(;t&&!s.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}s.add(t,"br",{"data-mce-bogus":1})}})};r.on("SetContent ExecCommand",function(t){"setcontent"!=t.type&&"mceInsertLink"!==t.command||e()})},L=function(){m.forced_root_block&&r.on("init",function(){w("DefaultParagraphSeparator",m.forced_root_block)})},F=function(){r.on("keyup focusin mouseup",function(e){65==e.keyCode&&p.metaKeyPressed(e)||("keyup"!==e.type||r.selection.isCollapsed())&&l.normalize()},!0)},H=function(){r.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},U=function(){r.inline||r.on("keydown",function(){e.activeElement==e.body&&r.getWin().focus()})},W=function(){r.inline||(r.contentStyles.push("body {min-height: 150px}"),r.on("click",function(e){var t;if("HTML"==e.target.nodeName){if(c.ie>11)return void r.getBody().focus();t=r.selection.getRng(),r.getBody().focus(),r.selection.setRng(t),r.selection.normalize(),r.nodeChanged()}}))},j=function(){c.mac&&r.on("keydown",function(e){!p.metaKeyPressed(e)||e.shiftKey||37!=e.keyCode&&39!=e.keyCode||(e.preventDefault(),r.selection.getSel().modify("move",37==e.keyCode?"backward":"forward","lineboundary"))})},q=function(){w("AutoUrlDetect",!1)},$=function(){r.on("click",function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)}),r.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},z=function(){r.on("init",function(){r.dom.bind(r.getBody(),"submit",function(e){e.preventDefault()})})},V=function(){g.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})},K=function(){r.on("dragstart",function(e){k(e)}),r.on("drop",function(e){if(!C(e)){var t=T(e);if(t&&t.id!=r.id){e.preventDefault();var n=a.getCaretRangeFromPoint(e.x,e.y,r.getDoc());l.setRng(n),S(t.html,!0)}}})},G=function(){},X=function(){var e;return!h||r.removed?0:!(e=r.selection.getSel())||!e.rangeCount||0===e.rangeCount};return O(),E(),c.windowsPhone||F(),y&&(A(),R(),L(),z(),I(),V(),c.iOS?(U(),W(),$()):_()),c.ie>=11&&(W(),I()),c.ie&&(_(),q(),K()),h&&(N(),D(),P(),B(),M(),H(),j(),I()),{refreshContentEditable:G,isHidden:X}}}),i("tinymce.core.init.InitContentBody",["ephox.sugar.api.dom.Insert","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","global!document","global!window","tinymce.core.api.Formatter","tinymce.core.caret.CaretContainerInput","tinymce.core.dom.DOMUtils","tinymce.core.dom.Selection","tinymce.core.dom.Serializer","tinymce.core.EditorUpload","tinymce.core.ErrorReporter","tinymce.core.ForceBlocks","tinymce.core.html.DomParser","tinymce.core.html.Node","tinymce.core.html.Schema","tinymce.core.keyboard.KeyboardOverrides","tinymce.core.NodeChange","tinymce.core.SelectionOverrides","tinymce.core.UndoManager","tinymce.core.util.Delay","tinymce.core.util.Quirks","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x,w,C){var k=u.DOM,T=function(r,o){var i=t.fromDom(r.getDoc().head),a=t.fromTag("style");n.set(a,"type","text/css"),e.append(a,t.fromText(o)),e.append(i,a)},S=function(e){var t=new p(e.settings,e.schema);return t.addAttributeFilter("src,href,style,tabindex",function(t,n){for(var r,o,i,a=t.length,u=e.dom;a--;)if(r=t[a],o=r.attr(n),i="data-mce-"+n,!r.attributes.map[i]){if(0===o.indexOf("data:")||0===o.indexOf("blob:"))continue;"style"===n?(o=u.serializeStyle(u.parseStyle(o),r.name),o.length||(o=null),r.attr(i,o),r.attr(n,o)):"tabindex"===n?(r.attr(i,o),r.attr(n,null)):r.attr(i,e.convertURL(o,n,r.name))}}),t.addNodeFilter("script",function(e){for(var t,n,r=e.length;r--;)t=e[r],n=t.attr("type")||"no/type",0!==n.indexOf("mce-")&&t.attr("type","mce-"+n)}),t.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,r=t.length,o=e.schema.getNonEmptyElements();r--;)n=t[r],n.isEmpty(o)&&0===n.getAll("br").length&&(n.append(new m("br",1)).shortEnded=!0)}),t},E=function(e){e.settings.auto_focus&&x.setEditorTimeout(e,function(){var t;t=!0===e.settings.auto_focus?e:e.editorManager.get(e.settings.auto_focus),t.destroyed||t.focus()},100)},_=function(e){e.bindPendingEventDelegates(),e.initialized=!0,e.fire("init"),e.focus(!0),e.nodeChanged({initial:!0}),e.execCallback("init_instance_callback",e),E(e)},A=function(e){return e.inline?k.styleSheetLoader:e.dom.styleSheetLoader};return{initContentBody:function(e,t){var n,f,p=e.settings,m=e.getElement(),x=e.getDoc();p.inline||(e.getElement().style.visibility=e.orgVisibility),t||p.content_editable||(x.open(),x.write(e.iframeHTML),x.close()),p.content_editable&&(e.on("remove",function(){var e=this.getBody();k.removeClass(e,"mce-content-body"),k.removeClass(e,"mce-edit-focus"),k.setAttrib(e,"contentEditable",null)}),k.addClass(m,"mce-content-body"),e.contentDocument=x=p.content_document||r,e.contentWindow=p.content_window||o,e.bodyElement=m,p.content_document=p.content_window=null,p.root_name=m.nodeName.toLowerCase()),n=e.getBody(),n.disabled=!0,e.readonly=p.readonly,e.readonly||(e.inline&&"static"===k.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=e.getParam("content_editable_state",!0)),n.disabled=!1,e.editorUpload=new l(e),e.schema=new g(p),e.dom=new u(x,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:!0,root_element:e.inline?e.getBody():null,collect:p.content_editable,schema:e.schema,onSetAttrib:function(t){e.fire("SetAttrib",t)}}),e.parser=S(e),e.serializer=new s(p,e),e.selection=new c(e.dom,e.getWin(),e.serializer,e),e.formatter=new i(e),e.undoManager=new b(e),e._nodeChangeDispatcher=new v(e),e._selectionOverrides=new y(e),a.setup(e),h.setup(e),d.setup(e),e.fire("PreInit"),p.browser_spellcheck||p.gecko_spellcheck||(x.body.spellcheck=!1,k.setAttrib(n,"spellcheck","false")),e.quirks=new w(e),e.fire("PostRender"),p.directionality&&(n.dir=p.directionality),p.nowrap&&(n.style.whiteSpace="nowrap"),p.protect&&e.on("BeforeSetContent",function(e){C.each(p.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),e.on("SetContent",function(){e.addVisual(e.getBody())}),p.padd_empty_editor&&e.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|<br \/>|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.on("compositionstart compositionend",function(t){e.composing="compositionstart"===t.type}),e.contentStyles.length>0&&(f="",C.each(e.contentStyles,function(e){f+=e+"\r\n"}),e.dom.addStyle(f)),A(e).loadAll(e.contentCSS,function(){_(e)},function(){_(e)}),p.content_style&&T(e,p.content_style)}}}),i("tinymce.core.PluginManager",["tinymce.core.AddOnManager"],function(e){return e.PluginManager}),i("tinymce.core.ThemeManager",["tinymce.core.AddOnManager"],function(e){return e.ThemeManager}),i("tinymce.core.init.Init",["ephox.katamari.api.Type","global!document","global!window","tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.core.init.InitContentBody","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,u,c,s){var l=r.DOM,f=function(e,t,n){var r,o,i=a.get(n);if(r=a.urls[n]||e.documentBaseUrl.replace(/\/$/,""),n=c.trim(n),i&&-1===c.inArray(t,n)){if(c.each(a.dependencies(n),function(n){f(e,t,n)}),e.plugins[n])return;o=new i(e,r,e.$),e.plugins[n]=o,o.init&&(o.init(e,r),t.push(n))}},d=function(e){return e.replace(/^\-/,"")},p=function(e){var t=[];c.each(e.settings.plugins.split(/[ ,]/),function(n){f(e,t,d(n))})},m=function(t){var n,r=t.settings.theme;e.isString(r)?(t.settings.theme=d(r),n=u.get(r),t.theme=new n(t,u.urls[r]),t.theme.init&&t.theme.init(t,u.urls[r]||t.documentBaseUrl.replace(/\/$/,""),t.$)):t.theme={}},g=function(e){var t,n,r,o,i,a=e.settings,u=e.getElement();return t=a.width||l.getStyle(u,"width")||"100%",n=a.height||l.getStyle(u,"height")||u.offsetHeight,r=a.min_height||100,o=/^[0-9\.]+(|px)$/i,o.test(""+t)&&(t=Math.max(parseInt(t,10),100)),o.test(""+n)&&(n=Math.max(parseInt(n,10),r)),i=e.theme.renderUI({targetNode:u,width:t,height:n,deltaWidth:a.delta_width,deltaHeight:a.delta_height}),a.content_editable||(n=(i.iframeHeight||n)+("number"==typeof n?i.deltaHeight||0:""))<r&&(n=r),i.height=n,i},h=function(e){var t,n=e.getElement();return t=e.settings.theme(e,n),t.editorContainer.nodeType&&(t.editorContainer.id=t.editorContainer.id||e.id+"_parent"),t.iframeContainer&&t.iframeContainer.nodeType&&(t.iframeContainer.id=t.iframeContainer.id||e.id+"_iframecontainer"),t.height=t.iframeHeight?t.iframeHeight:n.offsetHeight,t},v=function(e){return{editorContainer:e,iframeContainer:e}},y=function(e){var t=l.create("div");return l.insertAfter(t,e),v(t)},b=function(e){var t=e.getElement();return e.inline?v(t):y(t)},x=function(t){var n=t.settings,r=t.getElement();return t.orgDisplay=r.style.display,e.isString(n.theme)?g(t):e.isFunction(n.theme)?h(t):b(t)},w=function(e,r){if(t.domain!==n.location.hostname&&o.ie&&o.ie<12){var a=s.uuid("mce");e[a]=function(){i.initContentBody(e)};var u='javascript:(function(){document.open();document.domain="'+t.domain+'";var ed = window.parent.tinymce.get("'+e.id+'");document.write(ed.iframeHTML);document.close();ed.'+a+"(true);})()";return l.setAttrib(r,"src",u),!0}return!1},C=function(e,t){var n,r,i=e.settings;e.iframeHTML=i.doctype+"<html><head>",i.document_base_url!=e.documentBaseUrl&&(e.iframeHTML+='<base href="'+e.documentBaseURI.getURI()+'" />'),!o.caretAfter&&i.ie7_compat&&(e.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),e.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',n=i.body_id||"tinymce",-1!=n.indexOf("=")&&(n=e.getParam("body_id","","hash"),n=n[e.id]||n),r=i.body_class||"",-1!=r.indexOf("=")&&(r=e.getParam("body_class","","hash"),r=r[e.id]||""),i.content_security_policy&&(e.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+i.content_security_policy+'" />'),e.iframeHTML+='</head><body id="'+n+'" class="mce-content-body '+r+'" data-id="'+e.id+'"><br></body></html>';var a=l.create("iframe",{id:e.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:e.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:t.height,display:"block"}});a.onload=function(){a.onload=null,e.fire("load")};var u=w(e,a);return e.contentAreaContainer=t.iframeContainer,e.iframeElement=a,l.add(t.iframeContainer,a),u};return{init:function(e){var t,n=e.settings,r=e.getElement();if(e.rtl=n.rtl_ui||e.editorManager.i18n.rtl,e.editorManager.i18n.setCode(n.language),n.aria_label=n.aria_label||l.getAttrib(r,"aria-label",e.getLang("aria.rich_text_area")),e.fire("ScriptsLoaded"),m(e),p(e),t=x(e),e.editorContainer=t.editorContainer,n.content_css&&c.each(c.explode(n.content_css),function(t){e.contentCSS.push(e.documentBaseURI.toAbsolute(t))}),n.content_editable)return i.initContentBody(e);var o=C(e,t);t.editorContainer&&(l.get(t.editorContainer).style.display=e.orgDisplay,e.hidden=l.isHidden(t.editorContainer)),e.getElement().style.display="none",l.setAttrib(e.id,"aria-hidden",!0),o||i.initContentBody(e)}}}),i("tinymce.core.init.Render",["ephox.katamari.api.Type","global!window","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.ScriptLoader","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.init.Init","tinymce.core.PluginManager","tinymce.core.ThemeManager","tinymce.core.util.Tools"],function(e,t,n,r,o,i,a,u,c,s,l,f,d){var p=o.DOM,m=function(e){return"-"===e.charAt(0)},g=function(e,t){var n=t.settings;n.language&&"en"!==n.language&&!n.language_url&&(n.language_url=t.editorManager.baseURL+"/langs/"+n.language+".js"),n.language_url&&e.add(n.language_url)},h=function(t,n,r,o){var i=n.settings,a=i.theme;if(e.isString(a)){if(!m(a)&&!f.urls.hasOwnProperty(a)){var u=i.theme_url;u?f.load(a,n.documentBaseURI.toAbsolute(u)):f.load(a,"themes/"+a+"/theme"+r+".js")}t.loadQueue(function(){f.waitFor(a,o)})}else o()},v=function(e,t){d.isArray(e.plugins)&&(e.plugins=e.plugins.join(" ")),d.each(e.external_plugins,function(t,n){l.load(n,t),e.plugins+=" "+n}),d.each(e.plugins.split(/[ ,]/),function(e){if((e=d.trim(e))&&!l.urls[e])if(m(e)){e=e.substr(1,e.length);var n=l.dependencies(e);d.each(n,function(e){var n={prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"};e=l.createUrl(n,e),l.load(e.resource,e)})}else l.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+t+".js"})})},y=function(e,t){var n=a.ScriptLoader;h(n,e,t,function(){g(n,e),v(e.settings,t),n.loadQueue(function(){e.removed||s.init(e)},e,function(t){c.pluginLoadError(e,t[0]),e.removed||s.init(e)})})};return{render:function(e){var o=e.settings,a=e.id,c=function(){p.unbind(t,"ready",c),e.render()};if(!i.Event.domLoaded)return void p.bind(t,"ready",c);if(e.getElement()&&u.contentEditable){o.inline?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var s=e.getElement().form||p.getParent(a,"form");s&&(e.formElement=s,o.hidden_input&&!/TEXTAREA|INPUT/i.test(e.getElement().nodeName)&&(p.insertAfter(p.create("input",{type:"hidden",name:a}),a),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.fire(t.type,t)},p.bind(s,"submit reset",e.formEventDelegate),e.on("reset",function(){e.setContent(e.startContent,{format:"raw"})}),!o.submit_patch||s.submit.nodeType||s.submit.length||s._mceOldSubmit||(s._mceOldSubmit=s.submit,s.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),s._mceOldSubmit(s)})),e.windowManager=new r(e),e.notificationManager=new n(e),"xml"===o.encoding&&e.on("GetContent",function(e){e.save&&(e.content=p.encode(e.content))}),o.add_form_submit_trigger&&e.on("submit",function(){e.initialized&&e.save()}),o.add_unload_trigger&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),y(e,e.suffix)}}}}),i("tinymce.core.Mode",[],function(){var e=function(e,t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}},t=function(e){var t,n;return t=e.getBody(),n=function(t){e.dom.getParents(t.target,"a").length>0&&t.preventDefault()},e.dom.bind(t,"click",n),{unbind:function(){e.dom.unbind(t,"click",n)}}},n=function(n,r){n._clickBlocker&&(n._clickBlocker.unbind(),n._clickBlocker=null),r?(n._clickBlocker=t(n),n.selection.controlSelection.hideResizeRect(),n.readonly=!0,n.getBody().contentEditable=!1):(n.readonly=!1,n.getBody().contentEditable=!0,e(n,"StyleWithCSS",!1),e(n,"enableInlineTableEditing",!1),e(n,"enableObjectResizing",!1),n.focus(),n.nodeChanged())};return{setMode:function(e,t){var r=e.readonly?"readonly":"design";t!=r&&(e.initialized?n(e,"readonly"==t):e.on("init",function(){n(e,"readonly"==t)}),e.fire("SwitchMode",{mode:t}))}}}),i("tinymce.core.Shortcuts",["tinymce.core.util.Tools","tinymce.core.Env"],function(e,t){var n=e.each,r=e.explode,o={f9:120,f10:121,f11:122},i=e.makeMap("alt,ctrl,shift,meta,access");return function(a){var u=this,c={},s=[],l=function(e){var a,u,c={};n(r(e,"+"),function(e){e in i?c[e]=!0:/^[0-9]{2,}$/.test(e)?c.keyCode=parseInt(e,10):(c.charCode=e.charCodeAt(0),c.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}),a=[c.keyCode];for(u in i)c[u]?a.push(u):c[u]=!1;return c.id=a.join(","),c.access&&(c.alt=!0,t.mac?c.ctrl=!0:c.shift=!0),c.meta&&(t.mac?c.meta=!0:(c.ctrl=!0,c.meta=!1)),c},f=function(t,n,o,i){var u;return u=e.map(r(t,">"),l),u[u.length-1]=e.extend(u[u.length-1],{func:o,scope:i||a}),e.extend(u[0],{desc:a.translate(n),subpatterns:u.slice(1)})},d=function(e){return e.altKey||e.ctrlKey||e.metaKey},p=function(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123},m=function(e,t){return!!t&&(t.ctrl==e.ctrlKey&&t.meta==e.metaKey&&(t.alt==e.altKey&&t.shift==e.shiftKey&&(!!(e.keyCode==t.keyCode||e.charCode&&e.charCode==t.charCode)&&(e.preventDefault(),!0))))},g=function(e){return e.func?e.func.call(e.scope):null};a.on("keyup keypress keydown",function(e){!d(e)&&!p(e)||e.isDefaultPrevented()||(n(c,function(t){if(m(e,t))return s=t.subpatterns.slice(0),"keydown"==e.type&&g(t),!0}),m(e,s[0])&&(1===s.length&&"keydown"==e.type&&g(s[0]),s.shift()))}),u.add=function(t,o,i,u){var s;return s=i,"string"==typeof i?i=function(){a.execCommand(s,!1,null)}:e.isArray(s)&&(i=function(){a.execCommand(s[0],s[1],s[2])}),n(r(e.trim(t.toLowerCase())),function(e){var t=f(e,o,i,u);c[t.id]=t}),!0},u.remove=function(e){var t=f(e);return!!c[t.id]&&(delete c[t.id],!0)}}}),i("tinymce.core.ui.Sidebar",[],function(){return{add:function(e,t,n){var r=e.sidebars?e.sidebars:[];r.push({name:t,settings:n}),e.sidebars=r}}}),i("tinymce.core.util.URI",["global!document","tinymce.core.util.Tools"],function(e,t){var n=t.each,r=t.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),i={ftp:21,http:80,https:443,mailto:25},a=function(t,i){var u,c,s=this;if(t=r(t),i=s.settings=i||{},u=i.base_uri,/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(s.source=t);var l=0===t.indexOf("//");0!==t.indexOf("/")||l||(t=(u?u.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(c=i.base_uri?i.base_uri.path:new a(e.location.href).directory,""===i.base_uri.protocol?t="//mce_host"+s.toAbsPath(c,t):(t=/([^#?]*)([#?]?.*)/.exec(t),t=(u&&u.protocol||"http")+"://mce_host"+s.toAbsPath(c,t[1])+t[2])),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),n(o,function(e,n){var r=t[n];r&&(r=r.replace(/\(mce_at\)/g,"@@")),s[e]=r}),u&&(s.protocol||(s.protocol=u.protocol),s.userInfo||(s.userInfo=u.userInfo),s.port||"mce_host"!==s.host||(s.port=u.port),s.host&&"mce_host"!==s.host||(s.host=u.host),s.source=""),l&&(s.protocol="")};return a.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new a(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var r=n.getURI(),o=e.getURI();return r==o||"/"==r.charAt(r.length-1)&&r.substr(0,r.length-1)==o?r:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new a(e,{base_uri:this}),e.getURI(t&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=i[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,r,o,i=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(r=0,o=e.length;r<o;r++)if(r>=n.length||e[r]!=n[r]){i=r+1;break}if(e.length<n.length)for(r=0,o=n.length;r<o;r++)if(r>=e.length||e[r]!=n[r]){i=r+1;break}if(1===i)return t;for(r=0,o=e.length-(i-1);r<o;r++)a+="../";for(r=i-1,o=n.length;r<o;r++)a+=r!=i-1?"/"+n[r]:n[r];return a},toAbsPath:function(e,t){var r,o,i,a=0,u=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&u.push(e)}),e=u,r=t.length-1,u=[];r>=0;r--)0!==t[r].length&&"."!==t[r]&&(".."!==t[r]?a>0?a--:u.push(t[r]):a++);return r=e.length-a,i=r<=0?u.reverse().join("/"):e.slice(0,r).join("/")+"/"+u.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),o&&i.lastIndexOf("/")!==i.length-1&&(i+=o),i},getURI:function(e){var t,n=this;return n.source&&!e||(t="",e||(n.protocol?t+=n.protocol+"://":t+="//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},a.parseDataUri=function(e){var t,n;return e=decodeURIComponent(e).split(","),n=/data:([^;]+)/.exec(e[0]),n&&(t=n[1]),{type:t,data:e[1]}},a.getDocumentBaseUrl=function(e){var t;return t=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),t},a}),i("tinymce.core.Editor",["tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.EditorCommands","tinymce.core.EditorFocus","tinymce.core.EditorObservable","tinymce.core.EditorSettings","tinymce.core.Env","tinymce.core.html.Serializer","tinymce.core.init.Render","tinymce.core.Mode","tinymce.core.Shortcuts","tinymce.core.ui.Sidebar","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.Uuid"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g){var h=n.DOM,v=p.extend,y=p.each,b=p.trim,x=p.resolve,w=u.ie,C=function(n,o,i){var c,s,l=this;c=l.documentBaseUrl=i.documentBaseURL,s=i.baseURI,o=a.getEditorSettings(l,n,c,i.defaultSettings,o),l.settings=o,e.language=o.language||"en",e.languageLoad=o.language_load,e.baseURL=i.baseURL,l.id=n,l.setDirty(!1),l.plugins={},l.documentBaseURI=new m(o.document_base_url,{base_uri:s}),l.baseURI=s,l.contentCSS=[],l.contentStyles=[],l.shortcuts=new f(l),l.loadedCSS={},l.editorCommands=new r(l),l.suffix=i.suffix,l.editorManager=i,l.inline=o.inline,l.buttons={},l.menuItems={},o.cache_suffix&&(u.cacheSuffix=o.cache_suffix.replace(/^[\?\&]+/,"")),!1===o.override_viewport&&(u.overrideViewPort=!1),i.fire("SetupEditor",l),l.execCallback("setup",l),l.$=t.overrideDefaults(function(){return{context:l.inline?l.getBody():l.getDoc(),element:l.getBody()}})};return C.prototype={render:function(){s.render(this)},focus:function(e){o.focus(this,e)},execCallback:function(e){var t,n=this,r=n.settings[e];if(r)return n.callbackLookup&&(t=n.callbackLookup[e])&&(r=t.func,t=t.scope),"string"==typeof r&&(t=r.replace(/\.\w+$/,""),t=t?x(t):0,r=x(r),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:r,scope:t}),r.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){if(e&&p.is(e,"string")){var t=this.settings.language||"en",n=this.editorManager.i18n;e=n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,r){return n.data[t+"."+r]||"{#"+r+"}"})}return this.editorManager.translate(e)},getLang:function(e,t){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(t!==undefined?t:"{#"+e+"}")},getParam:function(e,t,n){var r,o=e in this.settings?this.settings[e]:t;return"hash"===n?(r={},"string"==typeof o?y(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),e.length>1?r[b(e[0])]=b(e[1]):r[b(e[0])]=b(e)}):r=o,r):o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons,t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addSidebar:function(e,t){return d.add(this,e,t)},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems,n.menuItems[e]=t},addContextToolbar:function(e,t){var n,r=this;r.contextToolbars=r.contextToolbars||[],"string"==typeof e&&(n=e,e=function(e){return r.dom.is(e,n)}),r.contextToolbars.push({id:g.uuid("mcet"),predicate:e,items:t})},addCommand:function(e,t,n){this.editorCommands.addCommand(e,t,n)},addQueryStateHandler:function(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)},addQueryValueHandler:function(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)},addShortcut:function(e,t,n,r){this.shortcuts.add(e,t,n,r)},execCommand:function(e,t,n,r){return this.editorCommands.execCommand(e,t,n,r)},queryCommandState:function(e){return this.editorCommands.queryCommandState(e)},queryCommandValue:function(e){return this.editorCommands.queryCommandValue(e)},queryCommandSupported:function(e){return this.editorCommands.queryCommandSupported(e)},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:(h.show(e.getContainer()),h.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(w&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(h.hide(e.getContainer()),h.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var t,n=this,r=n.getElement();return n.removed?"":r?(e=e||{},e.load=!0,t=n.setContent(r.value!==undefined?r.value:r.innerHTML,e),e.element=r,e.no_events||n.fire("LoadContent",e),e.element=r=null,t):void 0},save:function(e){var t,n,r=this,o=r.getElement();if(o&&r.initialized&&!r.removed)return e=e||{},e.save=!0,e.element=o,t=e.content=r.getContent(e),e.no_events||r.fire("SaveContent",e),"raw"==e.format&&r.fire("RawSaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(r.inline||(o.innerHTML=t),(n=h.getParent(r.id,"form"))&&y(n.elements,function(e){if(e.name==r.id)return e.value=t,!1})),e.element=o=null,!1!==e.set_dirty&&r.setDirty(!1),t},setContent:function(e,t){var n,r,o=this,i=o.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||o.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(r=w&&w<11?"":'<br data-mce-bogus="1">',"TABLE"==i.nodeName?e="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(i.nodeName)&&(e="<li>"+r+"</li>"),n=o.settings.forced_root_block,n&&o.schema.isValidChild(i.nodeName.toLowerCase(),n.toLowerCase())?(e=r,e=o.dom.createHTML(n,o.settings.forced_root_block_attrs,e)):w||e||(e='<br data-mce-bogus="1">'),o.dom.setHTML(i,e),o.fire("SetContent",t)):("raw"!==t.format&&(e=new c({validate:o.validate},o.schema).serialize(o.parser.parse(e,{isRootContent:!0}))),t.content=b(e),o.dom.setHTML(i,t.content),t.no_events||o.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,r=n.getBody();return n.removed?"":(e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?p.trim(n.serializer.getTrimmedContent()):"text"==e.format?r.innerText||r.textContent:n.serializer.serialize(r,e),"text"!=e.format?e.content=b(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content)},insertContent:function(e,t){t&&(e=v({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},setDirty:function(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!=t&&this.fire("dirty")},setMode:function(e){l.setMode(this,e)},getContainer:function(){var e=this;return e.container||(e.container=h.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=h.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement)&&(t.contentWindow=e.contentWindow),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){var e=this.getDoc();return this.bodyElement||(e?e.body:null)},convertURL:function(e,t,n){var r=this,o=r.settings;return o.urlconverter_callback?r.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var t,n=this,r=n.settings,o=n.dom;e=e||n.getBody(),n.hasVisual===undefined&&(n.hasVisual=r.visual),y(o.select("table,a",e),function(e){var i;switch(e.nodeName){case"TABLE":return t=r.visual_table_class||"mce-item-table",i=o.getAttrib(e,"border"),void(i&&"0"!=i||!n.hasVisual?o.removeClass(e,t):o.addClass(e,t));case"A":return void(o.getAttrib(e,"href",!1)||(i=o.getAttrib(e,"name")||e.id,t=r.visual_anchor_class||"mce-item-anchor",i&&n.hasVisual?o.addClass(e,t):o.removeClass(e,t)))}}),n.fire("VisualAid",{element:e,hasVisual:n.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&h.remove(e.getElement().nextSibling),e.inline||(w&&w<10&&e.getDoc().execCommand("SelectAll",!1,null),h.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),h.remove(e.getContainer()),e._selectionOverrides.destroy(),e.editorUpload.destroy(),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),h.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},uploadImages:function(e){return this.editorUpload.uploadImages(e)},_scanForImages:function(){return this.editorUpload.scanForImages()}},v(C.prototype,i),C}),i("tinymce.core.FocusManager",["ephox.sugar.api.node.Element","global!document","tinymce.core.dom.DOMUtils","tinymce.core.selection.SelectionBookmark","tinymce.core.util.Delay"],function(e,t,n,r,o){var i,a,u,c=n.DOM,s=function(e,t){var n=e?e.settings.custom_ui_selector:"";return null!==c.getParent(t,function(t){return l.isEditorUIElement(t)||!!n&&e.dom.is(t,n)})},l=function(e){var n=function(){try{return t.activeElement}catch(e){return t.body}},l=function(i){var u=i.editor;u.on("init",function(){u.on("keyup mouseup touchend nodechange",function(e){"nodechange"===e.type&&e.selectionChange||r.store(u)})}),u.on("focusin",function(){var t=e.focusedEditor;t!=u&&(t&&t.fire("blur",{focusedEditor:u}),e.setActive(u),e.focusedEditor=u,u.fire("focus",{blurredEditor:t}),u.focus(!0))}),u.on("focusout",function(){o.setEditorTimeout(u,function(){var t=e.focusedEditor;s(u,n())||t!=u||(u.fire("blur",{focusedEditor:null}),e.focusedEditor=null)})}),a||(a=function(n){var r,o=e.activeEditor;r=n.target,o&&r.ownerDocument===t&&(r===t.body||s(o,r)||e.focusedEditor!==o||(o.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},c.bind(t,"focusin",a))},f=function(n){e.focusedEditor==n.editor&&(e.focusedEditor=null),e.activeEditor||(c.unbind(t,"selectionchange",i),c.unbind(t,"focusin",a),c.unbind(t,"mouseup",u),i=a=u=null)};e.on("AddEditor",l),e.on("RemoveEditor",f)};return l.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},l._isUIElement=s,l}),i("tinymce.core.LegacyInput",["tinymce.core.util.Tools"],function(e){var t=e.each,n=e.explode;return{register:function(e){e.on("AddEditor",function(e){var r=e.editor;r.on("preInit",function(){var e,o,i,a=r.settings,u=function(e,n){t(n,function(t,n){t&&i.setStyle(e,n,t)}),i.rename(e,"span")},c=function(n){i=r.dom,a.convert_fonts_to_spans&&t(i.select("font,u,strike",n.node),function(t){e[t.nodeName.toLowerCase()](i,t)})};a.inline_styles&&(o=n(a.font_size_legacy_values),e={font:function(e,t){u(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:o[parseInt(t.size,10)-1]})},u:function(e,t){"html4"===r.settings.schema&&u(t,{textDecoration:"underline"})},strike:function(e,t){u(t,{textDecoration:"line-through"})}},r.on("PreProcess SetContent",c))})})}}}),i("tinymce.core.util.I18n",["tinymce.core.util.Tools"],function(e){"use strict";var t={},n="en";return{setCode:function(e){e&&(n=e,this.rtl=!!this.data[e]&&"rtl"===this.data[e]._dir)},getCode:function(){return n},rtl:!1,add:function(e,n){var r=t[e];r||(t[e]=r={});for(var o in n)r[o]=n[o];this.setCode(e)},translate:function(r){var o=t[n]||{},i=function(t){return e.is(t,"function")?Object.prototype.toString.call(t):a(t)?"":""+t},a=function(t){return""===t||null===t||e.is(t,"undefined")
},u=function(t){return t=i(t),e.hasOwn(o,t)?i(o[t]):t};if(a(r))return"";if(e.is(r,"object")&&e.hasOwn(r,"raw"))return i(r.raw);if(e.is(r,"array")){var c=r.slice(1);r=u(r[0]).replace(/\{([0-9]+)\}/g,function(t,n){return e.hasOwn(c,n)?i(c[n]):t})}return u(r).replace(/{context:\w+}$/,"")},data:t}}),i("tinymce.core.EditorManager",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!document","global!window","tinymce.core.AddOnManager","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.Editor","tinymce.core.Env","tinymce.core.ErrorReporter","tinymce.core.FocusManager","tinymce.core.LegacyInput","tinymce.core.util.I18n","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h){var v,y,b=a.DOM,x=g.explode,w=g.each,C=g.extend,k=0,T=!1,S=[],E=[],_=function(e){return"length"!==e},A=function(e){w(y.get(),function(t){"scroll"===e.type?t.fire("ScrollWindow",e):t.fire("ResizeWindow",e)})},N=function(e){e!==T&&(e?i(r).on("resize scroll",A):i(r).off("resize scroll",A),T=e)},D=function(t){var n=E;delete S[t.id];for(var r=0;r<S.length;r++)if(S[r]===t){S.splice(r,1);break}return E=e.filter(E,function(e){return t!==e}),y.activeEditor===t&&(y.activeEditor=E.length>0?E[0]:null),y.focusedEditor===t&&(y.focusedEditor=null),n.length!==E.length},R=function(e){return e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(D(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0,e=null),e};return y={defaultSettings:{},$:i,majorVersion:"4",minorVersion:"7.1",releaseDate:"2017-10-09",editors:S,i18n:d,activeEditor:null,settings:{},setup:function(){var e,t,o,i,a=this,u="";if(t=h.getDocumentBaseUrl(n.location),/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),o=r.tinymce||r.tinyMCEPreInit)e=o.base||o.baseURL,u=o.suffix;else{for(var c=n.getElementsByTagName("script"),s=0;s<c.length;s++){i=c[s].src;var f=i.substring(i.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(i)){-1!=f.indexOf(".min")&&(u=".min"),e=i.substring(0,i.lastIndexOf("/"));break}}!e&&n.currentScript&&(i=n.currentScript.src,-1!=i.indexOf(".min")&&(u=".min"),e=i.substring(0,i.lastIndexOf("/")))}a.baseURL=new h(t).toAbsolute(e),a.documentBaseURL=t,a.baseURI=new h(a.baseURL),a.suffix=u,a.focusManager=new l(a)},overrideDefaults:function(e){var t,n;t=e.base_url,t&&(this.baseURL=new h(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new h(this.baseURL)),n=e.suffix,e.suffix&&(this.suffix=n),this.defaultSettings=e;var r=e.plugin_base_urls;for(var i in r)o.PluginManager.urls[i]=r[i]},init:function(e){var t,o,a=this;o=g.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var l=function(e,t){return e.inline&&t.tagName.toLowerCase()in o},f=function(e){var t=e.id;return t||(t=e.name,t=t&&!b.get(t)?e.name:b.uniqueId(),e.setAttribute("id",t)),t},d=function(t){var n=e[t];if(n)return n.apply(a,Array.prototype.slice.call(arguments,2))},p=function(e,t){return t.constructor===RegExp?t.test(e.className):b.hasClass(e,t)},h=function(e){var t,r=[];if(c.ie&&c.ie<11)return s.initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(e.types)return w(e.types,function(e){r=r.concat(b.select(e.selector))}),r;if(e.selector)return b.select(e.selector);if(e.target)return[e.target];switch(e.mode){case"exact":t=e.elements||"",t.length>0&&w(x(t),function(e){var t;(t=b.get(e))?r.push(t):w(n.forms,function(t){w(t.elements,function(t){t.name===e&&(e="mce_editor_"+k++,b.setAttrib(t,"id",e),r.push(t))})})});break;case"textareas":case"specific_textareas":w(b.select("textarea"),function(t){e.editor_deselector&&p(t,e.editor_deselector)||e.editor_selector&&!p(t,e.editor_selector)||r.push(t)})}return r},v=function(e){t=e},y=function(){var t,n=0,o=[],c=function(e,r,i){var c=new u(e,r,a);o.push(c),c.on("init",function(){++n===t.length&&v(o)}),c.targetElm=c.targetElm||i,c.render()};if(b.unbind(r,"ready",y),d("onpageload"),t=i.unique(h(e)),e.types)return void w(e.types,function(n){g.each(t,function(t){return!b.is(t,n.selector)||(c(f(t),C({},e,n),t),!1)})});g.each(t,function(e){R(a.get(e.id))}),t=g.grep(t,function(e){return!a.get(e.id)}),0===t.length?v([]):w(t,function(t){l(e,t)?s.initError("Could not initialize inline editor on invalid inline target element",t):c(f(t),e,t)})};return a.settings=e,b.bind(r,"ready",y),new m(function(e){t?e(t):v=function(t){e(t)}})},get:function(n){return 0===arguments.length?E.slice(0):t.isString(n)?e.find(E,function(e){return e.id===n}).getOr(null):t.isNumber(n)&&E[n]?E[n]:null},add:function(e){var t=this;return S[e.id]===e?e:(null===t.get(e.id)&&(_(e.id)&&(S[e.id]=e),S.push(e),E.push(e)),N(!0),t.activeEditor=e,t.fire("AddEditor",{editor:e}),v||(v=function(){t.fire("BeforeUnload")},b.bind(r,"beforeunload",v)),e)},createEditor:function(e,t){return this.add(new u(e,t,this))},remove:function(e){var n,o,i=this;{if(e)return t.isString(e)?(e=e.selector||e,void w(b.select(e),function(e){(o=i.get(e.id))&&i.remove(o)})):(o=e,t.isNull(i.get(o.id))?null:(D(o)&&i.fire("RemoveEditor",{editor:o}),0===E.length&&b.unbind(r,"beforeunload",v),o.remove(),N(E.length>0),o));for(n=E.length-1;n>=0;n--)i.remove(E[n])}},execCommand:function(e,t,n){var r=this,o=r.get(n);switch(e){case"mceAddEditor":return r.get(n)||new u(n,r.settings,r).render(),!0;case"mceRemoveEditor":return o&&o.remove(),!0;case"mceToggleEditor":return o?(o.isHidden()?o.show():o.hide(),!0):(r.execCommand("mceAddEditor",0,n),!0)}return!!r.activeEditor&&r.activeEditor.execCommand(e,t,n)},triggerSave:function(){w(E,function(e){e.save()})},addI18n:function(e,t){d.add(e,t)},translate:function(e){return d.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},C(y,p),y.setup(),f.register(y),y}),i("tinymce.core.geom.Rect",[],function(){"use strict";var e=Math.min,t=Math.max,n=Math.round,r=function(e,t,r){var o,i,a,u,s,l;return o=t.x,i=t.y,a=e.w,u=e.h,s=t.w,l=t.h,r=(r||"").split(""),"b"===r[0]&&(i+=l),"r"===r[1]&&(o+=s),"c"===r[0]&&(i+=n(l/2)),"c"===r[1]&&(o+=n(s/2)),"b"===r[3]&&(i-=u),"r"===r[4]&&(o-=a),"c"===r[3]&&(i-=n(u/2)),"c"===r[4]&&(o-=n(a/2)),c(o,i,a,u)},o=function(e,t,n,o){var i,a;for(a=0;a<o.length;a++)if(i=r(e,t,o[a]),i.x>=n.x&&i.x+i.w<=n.w+n.x&&i.y>=n.y&&i.y+i.h<=n.h+n.y)return o[a];return null},i=function(e,t,n){return c(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},a=function(n,r){var o,i,a,u;return o=t(n.x,r.x),i=t(n.y,r.y),a=e(n.x+n.w,r.x+r.w),u=e(n.y+n.h,r.y+r.h),a-o<0||u-i<0?null:c(o,i,a-o,u-i)},u=function(e,n,r){var o,i,a,u,s,l,f,d,p,m;return s=e.x,l=e.y,f=e.x+e.w,d=e.y+e.h,p=n.x+n.w,m=n.y+n.h,o=t(0,n.x-s),i=t(0,n.y-l),a=t(0,f-p),u=t(0,d-m),s+=o,l+=i,r&&(f+=o,d+=i,s-=a,l-=u),f-=a,d-=u,c(s,l,f-s,d-l)},c=function(e,t,n,r){return{x:e,y:t,w:n,h:r}};return{inflate:i,relativePosition:r,findBestRelativePosition:o,intersect:a,clamp:u,create:c,fromClientRect:function(e){return c(e.left,e.top,e.width,e.height)}}}),i("tinymce.core.ui.Factory",[],function(){"use strict";var e={};return{add:function(t,n){e[t.toLowerCase()]=n},has:function(t){return!!e[t.toLowerCase()]},get:function(t){var n=t.toLowerCase(),r=e.hasOwnProperty(n)?e[n]:null;if(null===r)throw new Error("Could not find module for type: "+t);return r},create:function(t,n){var r;if("string"==typeof t?(n=n||{},n.type=t):(n=t,t=n.type),t=t.toLowerCase(),!(r=e[t]))throw new Error("Could not find control by type: "+t);return r=new r(n),r.type=t,r}}}),i("tinymce.core.util.Class",["tinymce.core.util.Tools"],function(e){var t,n,r=e.each,o=e.extend,i=function(){};return i.extend=t=function(e){var i,a,u,c=this,s=c.prototype,l=function(){var e,t,r,o=this;if(!n&&(o.init&&o.init.apply(o,arguments),t=o.Mixins))for(e=t.length;e--;)r=t[e],r.init&&r.init.apply(o,arguments)},f=function(){return this},d=function(e,t){return function(){var n,r=this,o=r._super;return r._super=s[e],n=t.apply(r,arguments),r._super=o,n}};n=!0,i=new c,n=!1,e.Mixins&&(r(e.Mixins,function(t){for(var n in t)"init"!==n&&(e[n]=t[n])}),s.Mixins&&(e.Mixins=s.Mixins.concat(e.Mixins))),e.Methods&&r(e.Methods.split(","),function(t){e[t]=f}),e.Properties&&r(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,r=this;return e!==t?(r[n]=e,r):r[n]}}),e.Statics&&r(e.Statics,function(e,t){l[t]=e}),e.Defaults&&s.Defaults&&(e.Defaults=o({},s.Defaults,e.Defaults));for(a in e)u=e[a],"function"==typeof u&&s[a]?i[a]=d(a,u):i[a]=u;return l.prototype=i,l.constructor=l,l.extend=t,l},i}),i("tinymce.core.util.Color",[],function(){var e=Math.min,t=Math.max,n=Math.round;return function(r){var o=this,i=0,a=0,u=0,c=function(r,o,i){var a,u,c,s,l,f;return a=0,u=0,c=0,r/=255,o/=255,i/=255,l=e(r,e(o,i)),f=t(r,t(o,i)),l==f?(c=l,{h:0,s:0,v:100*c}):(s=r==l?o-i:i==l?r-o:i-r,a=r==l?3:i==l?1:5,a=60*(a-s/(f-l)),u=(f-l)/f,c=f,{h:n(a),s:n(100*u),v:n(100*c)})},s=function(r,o,c){var s,l,f,d;if(r=(parseInt(r,10)||0)%360,o=parseInt(o,10)/100,c=parseInt(c,10)/100,o=t(0,e(o,1)),c=t(0,e(c,1)),0===o)return void(i=a=u=n(255*c));switch(s=r/60,l=c*o,f=l*(1-Math.abs(s%2-1)),d=c-l,Math.floor(s)){case 0:i=l,a=f,u=0;break;case 1:i=f,a=l,u=0;break;case 2:i=0,a=l,u=f;break;case 3:i=0,a=f,u=l;break;case 4:i=f,a=0,u=l;break;case 5:i=l,a=0,u=f;break;default:i=a=u=0}i=n(255*(i+d)),a=n(255*(a+d)),u=n(255*(u+d))},l=function(){var e=function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e};return"#"+e(i)+e(a)+e(u)},f=function(){return{r:i,g:a,b:u}},d=function(){return c(i,a,u)},p=function(e){var t;return"object"==typeof e?"r"in e?(i=e.r,a=e.g,u=e.b):"v"in e&&s(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(i=parseInt(t[1],10),a=parseInt(t[2],10),u=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(i=parseInt(t[1],16),a=parseInt(t[2],16),u=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(i=parseInt(t[1]+t[1],16),a=parseInt(t[2]+t[2],16),u=parseInt(t[3]+t[3],16)),i=i<0?0:i>255?255:i,a=a<0?0:a>255?255:a,u=u<0?0:u>255?255:u,o};r&&p(r),o.toRgb=f,o.toHsv=d,o.toHex=l,o.parse=p}}),i("tinymce.core.util.JSON",["global!window"],function(e){var t=function(e,n){var r,o,i,a;if(n=n||'"',null===e)return"null";if("string"==(i=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",n+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(r=o.indexOf(t))+1?"\\"+o.charAt(r+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e)})+n;if("object"==i){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(r=0,o="[";r<e.length;r++)o+=(r>0?",":"")+t(e[r],n);return o+"]"}o="{";for(a in e)e.hasOwnProperty(a)&&(o+="function"!=typeof e[a]?(o.length>1?","+n:n)+a+n+":"+t(e[a],n):"");return o+"}"}return""+e};return{serialize:t,parse:function(t){try{return e[String.fromCharCode(101)+"val"]("("+t+")")}catch(e){}}}}),i("tinymce.core.util.JSONP",["tinymce.core.dom.DOMUtils"],function(e){return{callbacks:{},count:0,send:function(t){var n=this,r=e.DOM,o=t.count!==undefined?t.count:n.count,i="tinymce_jsonp_"+o;n.callbacks[o]=function(e){r.remove(i),delete n.callbacks[o],t.callback(e)},r.add(r.doc.body,"script",{id:i,src:t.url,type:"text/javascript"}),n.count++}}}),i("tinymce.core.util.XHR",["ephox.sand.api.XMLHttpRequest","global!setTimeout","tinymce.core.util.Observable","tinymce.core.util.Tools"],function(e,t,n,r){var o={send:function(n){var i,a=0,u=function(){!n.async||4==i.readyState||a++>1e4?(n.success&&a<1e4&&200==i.status?n.success.call(n.success_scope,""+i.responseText,i,n):n.error&&n.error.call(n.error_scope,a>1e4?"TIMED_OUT":"GENERAL",i,n),i=null):t(u,10)};if(n.scope=n.scope||this,n.success_scope=n.success_scope||n.scope,n.error_scope=n.error_scope||n.scope,n.async=!1!==n.async,n.data=n.data||"",o.fire("beforeInitialize",{settings:n}),i=new e){if(i.overrideMimeType&&i.overrideMimeType(n.content_type),i.open(n.type||(n.data?"POST":"GET"),n.url,n.async),n.crossDomain&&(i.withCredentials=!0),n.content_type&&i.setRequestHeader("Content-Type",n.content_type),n.requestheaders&&r.each(n.requestheaders,function(e){i.setRequestHeader(e.key,e.value)}),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=o.fire("beforeSend",{xhr:i,settings:n}).xhr,i.send(n.data),!n.async)return u();t(u,10)}}};return r.extend(o,n),o}),i("tinymce.core.util.JSONRequest",["tinymce.core.util.JSON","tinymce.core.util.XHR","tinymce.core.util.Tools"],function(e,t,n){var r=n.extend,o=function(e){this.settings=r({},e),this.count=0};return o.sendRPC=function(e){return(new o).send(e)},o.prototype={send:function(n){var o=n.error,i=n.success;n=r(this.settings,n),n.success=function(t,r){t=e.parse(t),void 0===t&&(t={error:"JSON Parse error."}),t.error?o.call(n.error_scope||n.scope,t.error,r):i.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){o&&o.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},o}),i("tinymce.core.util.LocalStorage",["global!document","global!window"],function(e,t){var n,r,o,i,a,u;try{if(t.localStorage)return t.localStorage}catch(e){}a="tinymce",r=e.documentElement,(u=!!r.addBehavior)&&r.addBehavior("#default#userData");var c=function(){i=[];for(var e in o)i.push(e);n.length=i.length},s=function(){var e,t,n,i=0;if(o={},u){var s=function(e){var n,r;return-1===(r=e!==undefined?i+e:t.indexOf(",",i))||r>t.length?null:(n=t.substring(i,r),i=r+1,n)};r.load(a),t=r.getAttribute(a)||"";do{var l=s();if(null===l)break;if(null!==(e=s(parseInt(l,32)||0))){if(null===(l=s()))break;n=s(parseInt(l,32)||0),e&&(o[e]=n)}}while(null!==e);c()}},l=function(){var e,t="";if(u){for(var n in o)e=o[n],t+=(t?",":"")+n.length.toString(32)+","+n+","+e.length.toString(32)+","+e;r.setAttribute(a,t);try{r.save(a)}catch(e){}c()}};return n={key:function(e){return i[e]},getItem:function(e){return e in o?o[e]:null},setItem:function(e,t){o[e]=""+t,l()},removeItem:function(e){delete o[e],l()},clear:function(){o={},l()}},s(),n}),i("tinymce.core.api.Tinymce",["tinymce.core.AddOnManager","tinymce.core.api.Formatter","tinymce.core.api.NotificationManager","tinymce.core.api.WindowManager","tinymce.core.dom.BookmarkManager","tinymce.core.dom.ControlSelection","tinymce.core.dom.DomQuery","tinymce.core.dom.DOMUtils","tinymce.core.dom.EventUtils","tinymce.core.dom.RangeUtils","tinymce.core.dom.ScriptLoader","tinymce.core.dom.Selection","tinymce.core.dom.Serializer","tinymce.core.dom.Sizzle","tinymce.core.dom.TreeWalker","tinymce.core.Editor","tinymce.core.EditorCommands","tinymce.core.EditorManager","tinymce.core.EditorObservable","tinymce.core.Env","tinymce.core.FocusManager","tinymce.core.geom.Rect","tinymce.core.html.DomParser","tinymce.core.html.Entities","tinymce.core.html.Node","tinymce.core.html.SaxParser","tinymce.core.html.Schema","tinymce.core.html.Serializer","tinymce.core.html.Styles","tinymce.core.html.Writer","tinymce.core.Shortcuts","tinymce.core.ui.Factory","tinymce.core.UndoManager","tinymce.core.util.Class","tinymce.core.util.Color","tinymce.core.util.Delay","tinymce.core.util.EventDispatcher","tinymce.core.util.I18n","tinymce.core.util.JSON","tinymce.core.util.JSONP","tinymce.core.util.JSONRequest","tinymce.core.util.LocalStorage","tinymce.core.util.Observable","tinymce.core.util.Promise","tinymce.core.util.Tools","tinymce.core.util.URI","tinymce.core.util.VK","tinymce.core.util.XHR"],function(e,t,n,r,o,i,a,u,c,s,l,f,d,p,m,g,h,v,y,b,x,w,C,k,T,S,E,_,A,N,D,R,P,I,O,B,M,L,F,H,U,W,j,q,$,z,V,K){var G=v,X={geom:{Rect:w},util:{Promise:q,Delay:B,Tools:$,VK:V,URI:z,Class:I,EventDispatcher:M,Observable:j,I18n:L,XHR:K,JSON:F,JSONRequest:U,JSONP:H,LocalStorage:W,Color:O},dom:{EventUtils:c,Sizzle:p,DomQuery:a,TreeWalker:m,DOMUtils:u,ScriptLoader:l,RangeUtils:s,Serializer:d,ControlSelection:i,BookmarkManager:o,Selection:f,Event:c.Event},html:{Styles:A,Entities:k,Node:T,Schema:E,SaxParser:S,DomParser:C,Writer:N,Serializer:_},ui:{Factory:R},Env:b,AddOnManager:e,Formatter:t,UndoManager:P,EditorCommands:h,WindowManager:r,NotificationManager:n,EditorObservable:y,Shortcuts:D,Editor:g,FocusManager:x,EditorManager:v,DOM:u.DOM,ScriptLoader:l.ScriptLoader,PluginManager:e.PluginManager,ThemeManager:e.ThemeManager,trim:$.trim,isArray:$.isArray,is:$.is,toArray:$.toArray,makeMap:$.makeMap,each:$.each,map:$.map,grep:$.grep,inArray:$.inArray,extend:$.extend,create:$.create,walk:$.walk,createNS:$.createNS,resolve:$.resolve,explode:$.explode,_addCacheSuffix:$._addCacheSuffix,isOpera:b.opera,isWebKit:b.webkit,isIE:b.ie,isGecko:b.gecko,isMac:b.mac};return G=$.extend(G,X)}),i("tinymce.core.api.Main",["ephox.katamari.api.Fun","global!window","tinymce.core.api.Tinymce"],function(e,t,n){var r=this||t,o=function(t){"function"!=typeof r.define||r.define.amd||(r.define("ephox/tinymce",[],e.constant(t)),r.define("tinymce.core.EditorManager",[],e.constant(t))),"object"==typeof module&&(module.exports=t)},i=function(e){t.tinymce=e,t.tinyMCE=e};return function(){return i(n),o(n),n}}),r("tinymce.core.api.Main")()}();