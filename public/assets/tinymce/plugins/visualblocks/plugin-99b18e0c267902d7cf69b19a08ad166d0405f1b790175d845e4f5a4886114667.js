!function(){var n={},e=function(e){for(var i=n[e],o=i.deps,s=i.defn,l=o.length,u=new Array(l),c=0;c<l;++c)u[c]=t(o[c]);var a=s.apply(null,u);if(a===undefined)throw"module ["+e+"] returned undefined";i.instance=a},i=function(e,i,t){if("string"!=typeof e)throw"module id must be a string";if(i===undefined)throw"no dependencies for "+e;if(t===undefined)throw"no definition function for "+e;n[e]={deps:i,defn:t,instance:undefined}},t=function(i){var t=n[i];if(t===undefined)throw"module ["+i+"] was undefined";return t.instance===undefined&&e(i),t.instance},o=function(n,e){for(var i=n.length,o=new Array(i),s=0;s<i;++s)o[s]=t(n[s]);e.apply(null,o)};({}).bolt={module:{api:{define:i,require:o,demand:t}}};var s=i,l=function(n,e){s(n,[],function(){return e})};s("ephox.katamari.api.Cell",[],function(){var n=function(e){var i=e,t=function(){return i};return{get:t,set:function(n){i=n},clone:function(){return n(t())}}};return n}),l("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),s("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),s("tinymce.plugins.visualblocks.api.Events",[],function(){return{fireVisualBlocks:function(n,e){n.fire("VisualBlocks",{state:e})}}}),s("tinymce.plugins.visualblocks.api.Settings",[],function(){return{isEnabledByDefault:function(n){return n.getParam("visualblocks_default_state",!1)},getContentCss:function(n){return n.settings.visualblocks_content_css}}}),s("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),s("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),s("tinymce.plugins.visualblocks.core.LoadCss",["tinymce.core.dom.DOMUtils","tinymce.core.util.Tools"],function(n,e){var i=n.DOM.uniqueId();return{load:function(t,o){var s=e.toArray(t.getElementsByTagName("link"));if(0===e.grep(s,function(n){return n.id===i}).length){var l=n.DOM.create("link",{id:i,rel:"stylesheet",href:o});t.getElementsByTagName("head")[0].appendChild(l)}}}}),s("tinymce.plugins.visualblocks.core.VisualBlocks",["tinymce.plugins.visualblocks.api.Events","tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.LoadCss"],function(n,e,i){return{toggleVisualBlocks:function(t,o,s){var l=t.dom,u=e.getContentCss(t);i.load(t.getDoc(),u||o+"/css/visualblocks.css"),l.toggleClass(t.getBody(),"mce-visualblocks"),s.set(!s.get()),n.fireVisualBlocks(t,s.get())}}}),s("tinymce.plugins.visualblocks.api.Commands",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(n){return{register:function(e,i,t){e.addCommand("mceVisualBlocks",function(){n.toggleVisualBlocks(e,i,t)})}}}),s("tinymce.plugins.visualblocks.core.Bindings",["tinymce.plugins.visualblocks.api.Settings","tinymce.plugins.visualblocks.core.VisualBlocks"],function(n,e){return{setup:function(i,t,o){i.on("PreviewFormats AfterPreviewFormats",function(n){o.get()&&i.dom.toggleClass(i.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)}),i.on("init",function(){n.isEnabledByDefault(i)&&e.toggleVisualBlocks(i,t,o)}),i.on("remove",function(){i.dom.removeClass(i.getBody(),"mce-visualblocks")})}}}),s("tinymce.plugins.visualblocks.ui.Buttons",["tinymce.plugins.visualblocks.core.VisualBlocks"],function(){var n=function(n,e){return function(i){var t=i.control;t.active(e.get()),n.on("VisualBlocks",function(n){t.active(n.state)})}};return{register:function(e,i){e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,i)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,i),selectable:!0,context:"view",prependToContext:!0})}}}),s("tinymce.plugins.visualblocks.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualblocks.api.Commands","tinymce.plugins.visualblocks.core.Bindings","tinymce.plugins.visualblocks.ui.Buttons"],function(n,e,i,t,o){return e.add("visualblocks",function(e,s){var l=n(!1);i.register(e,s,l),o.register(e,l),t.setup(e,s,l)}),function(){}}),t("tinymce.plugins.visualblocks.Plugin")()}();