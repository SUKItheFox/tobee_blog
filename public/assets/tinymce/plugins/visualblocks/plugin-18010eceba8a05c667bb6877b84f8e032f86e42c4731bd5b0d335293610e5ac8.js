!function(){var n={},e=function(e){for(var t=n[e],i=t.deps,r=t.defn,u=i.length,s=new Array(u),c=0;c<u;++c)s[c]=o(i[c]);var l=r.apply(null,s);if(void 0===l)throw"module ["+e+"] returned undefined";t.instance=l},t=function(e,t,o){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===o)throw"no definition function for "+e;n[e]={deps:t,defn:o,instance:void 0}},o=function(t){var o=n[t];if(void 0===o)throw"module ["+t+"] was undefined";return void 0===o.instance&&e(t),o.instance},i=function(n,e){for(var t=n.length,i=new Array(t),r=0;r<t;++r)i[r]=o(n[r]);e.apply(null,i)};({}).bolt={module:{api:{define:t,require:i,demand:o}}};var r=t,u=function(n,e){r(n,[],function(){return e})};r("1",[],function(){var n=function(e){var t=e,o=function(){return t};return{get:o,set:function(n){t=n},clone:function(){return n(o())}}};return n}),u("6",tinymce.util.Tools.resolve),r("2",["6"],function(n){return n("tinymce.PluginManager")}),r("9",[],function(){return{fireVisualBlocks:function(n,e){n.fire("VisualBlocks",{state:e})}}}),r("8",[],function(){return{isEnabledByDefault:function(n){return n.getParam("visualblocks_default_state",!1)},getContentCss:function(n){return n.settings.visualblocks_content_css}}}),r("b",["6"],function(n){return n("tinymce.dom.DOMUtils")}),r("c",["6"],function(n){return n("tinymce.util.Tools")}),r("a",["b","c"],function(n,e){var t=n.DOM.uniqueId();return{load:function(o,i){var r=e.toArray(o.getElementsByTagName("link"));if(0===e.grep(r,function(n){return n.id===t}).length){var u=n.DOM.create("link",{id:t,rel:"stylesheet",href:i});o.getElementsByTagName("head")[0].appendChild(u)}}}}),r("7",["9","8","a"],function(n,e,t){return{toggleVisualBlocks:function(o,i,r){var u=o.dom,s=e.getContentCss(o);t.load(o.getDoc(),s||i+"/css/visualblocks.css"),u.toggleClass(o.getBody(),"mce-visualblocks"),r.set(!r.get()),n.fireVisualBlocks(o,r.get())}}}),r("3",["7"],function(n){return{register:function(e,t,o){e.addCommand("mceVisualBlocks",function(){n.toggleVisualBlocks(e,t,o)})}}}),r("4",["8","7"],function(n,e){return{setup:function(t,o,i){t.on("PreviewFormats AfterPreviewFormats",function(n){i.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)}),t.on("init",function(){n.isEnabledByDefault(t)&&e.toggleVisualBlocks(t,o,i)}),t.on("remove",function(){t.dom.removeClass(t.getBody(),"mce-visualblocks")})}}}),r("5",["7"],function(){var n=function(n,e){return function(t){var o=t.control;o.active(e.get()),n.on("VisualBlocks",function(n){o.active(n.state)})}};return{register:function(e,t){e.addButton("visualblocks",{title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t),selectable:!0,context:"view",prependToContext:!0})}}}),r("0",["1","2","3","4","5"],function(n,e,t,o,i){return e.add("visualblocks",function(e,r){var u=n(!1);t.register(e,r,u),i.register(e,u),o.setup(e,r,u)}),function(){}}),o("0")()}();