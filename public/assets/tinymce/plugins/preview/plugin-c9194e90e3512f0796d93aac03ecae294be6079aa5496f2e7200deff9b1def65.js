!function(){var e={},n=function(n){for(var t=e[n],r=t.deps,o=t.defn,c=r.length,u=new Array(c),l=0;l<c;++l)u[l]=i(r[l]);var a=o.apply(null,u);if(a===undefined)throw"module ["+n+"] returned undefined";t.instance=a},t=function(n,t,i){if("string"!=typeof n)throw"module id must be a string";if(t===undefined)throw"no dependencies for "+n;if(i===undefined)throw"no definition function for "+n;e[n]={deps:t,defn:i,instance:undefined}},i=function(t){var i=e[t];if(i===undefined)throw"module ["+t+"] was undefined";return i.instance===undefined&&n(t),i.instance},r=function(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;++o)r[o]=i(e[o]);n.apply(null,r)};({}).bolt={module:{api:{define:t,require:r,demand:i}}};var o=t;(function(e,n){o(e,[],function(){return n})})("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),o("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),o("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),o("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),o("tinymce.plugins.preview.api.Settings",[],function(){return{getPreviewDialogWidth:function(e){return parseInt(e.getParam("plugin_preview_width","650"),10)},getPreviewDialogHeight:function(e){return parseInt(e.getParam("plugin_preview_height","500"),10)},getContentStyle:function(e){return e.getParam("content_style","")}}}),o("tinymce.plugins.preview.ui.IframeContent",["tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings"],function(e,n){var t=function(t){var i="",r=t.dom.encode,o=n.getContentStyle(t);i+='<base href="'+r(t.documentBaseURI.getURI())+'">',o&&(i+='<style type="text/css">'+o+"</style>"),e.each(t.contentCSS,function(e){i+='<link type="text/css" rel="stylesheet" href="'+r(t.documentBaseURI.toAbsolute(e))+'">'});var c=t.settings.body_id||"tinymce";-1!==c.indexOf("=")&&(c=t.getParam("body_id","","hash"),c=c[t.id]||c);var u=t.settings.body_class||"";-1!==u.indexOf("=")&&(u=t.getParam("body_class","","hash"),u=u[t.id]||"");var l=t.settings.directionality?' dir="'+t.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+i+'</head><body id="'+r(c)+'" class="mce-content-body '+r(u)+'"'+r(l)+">"+t.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);</script> </body></html>'};return{getPreviewHtml:t,injectIframeContent:function(e,n,i){var r=t(e);if(i)n.src="data:text/html;charset=utf-8,"+encodeURIComponent(r);else{var o=n.contentWindow.document;o.open(),o.write(r),o.close()}}}}),o("tinymce.plugins.preview.ui.Dialog",["tinymce.core.Env","tinymce.core.util.Tools","tinymce.plugins.preview.api.Settings","tinymce.plugins.preview.ui.IframeContent"],function(e,n,t,i){return{open:function(n){var r=!e.ie,o='<iframe src="javascript:\'\'" frameborder="0"'+(r?' sandbox="allow-scripts"':"")+"></iframe>",c=t.getPreviewDialogWidth(n),u=t.getPreviewDialogHeight(n);n.windowManager.open({title:"Preview",width:c,height:u,html:o,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){var t=e.control.getEl("body").firstChild;i.injectIframeContent(n,t,r)}})}}}),o("tinymce.plugins.preview.api.Commands",["tinymce.plugins.preview.ui.Dialog"],function(e){return{register:function(n){n.addCommand("mcePreview",function(){e.open(n)})}}}),o("tinymce.plugins.preview.ui.Buttons",[],function(){return{register:function(e){e.addButton("preview",{title:"Preview",cmd:"mcePreview"}),e.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})}}}),o("tinymce.plugins.preview.Plugin",["tinymce.core.PluginManager","tinymce.plugins.preview.api.Commands","tinymce.plugins.preview.ui.Buttons"],function(e,n,t){return e.add("preview",function(e){n.register(e),t.register(e)}),function(){}}),i("tinymce.plugins.preview.Plugin")()}();