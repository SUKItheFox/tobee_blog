!function(){var e={},n=function(n){for(var t=e[n],o=t.deps,a=t.defn,i=o.length,u=new Array(i),s=0;s<i;++s)u[s]=r(o[s]);var c=a.apply(null,u);if(c===undefined)throw"module ["+n+"] returned undefined";t.instance=c},t=function(n,t,r){if("string"!=typeof n)throw"module id must be a string";if(t===undefined)throw"no dependencies for "+n;if(r===undefined)throw"no definition function for "+n;e[n]={deps:t,defn:r,instance:undefined}},r=function(t){var r=e[t];if(r===undefined)throw"module ["+t+"] was undefined";return r.instance===undefined&&n(t),r.instance},o=function(e,n){for(var t=e.length,o=new Array(t),a=0;a<t;++a)o[a]=r(e[a]);n.apply(null,o)};({}).bolt={module:{api:{define:t,require:o,demand:r}}};var a=t,i=function(e,n){a(e,[],function(){return n})};i("global!Array",Array),i("global!Error",Error),a("ephox.katamari.api.Fun",["global!Array","global!Error"],function(e,n){var t=function(){},r=function(e,n){return function(){return e(n.apply(null,arguments))}},o=function(e){return function(){return e}};return{noop:t,compose:r,constant:o,identity:function(e){return e},tripleEquals:function(e,n){return e===n},curry:function(n){for(var t=new e(arguments.length-1),r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){for(var r=new e(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var a=t.concat(r);return n.apply(null,a)}},not:function(e){return function(){return!e.apply(null,arguments)}},die:function(e){return function(){throw new n(e)}},apply:function(e){return e()},call:function(e){e()},never:o(!1),always:o(!0)}}),i("global!Object",Object),a("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(e,n){var t=e.never,r=e.always,o=function(){return a},a=function(){var a=function(e){return e.isNone()},i=function(e){return e()},u=function(e){return e},s=function(){},c={fold:function(e){return e()},is:t,isSome:t,isNone:r,getOr:u,getOrThunk:i,getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},or:u,orThunk:i,map:o,ap:o,each:s,bind:o,flatten:o,exists:t,forall:r,filter:o,equals:a,equals_:a,toArray:function(){return[]},toString:e.constant("none()")};return n.freeze&&n.freeze(c),c}(),i=function(e){var n=function(){return e},u=function(){return l},s=function(n){return i(n(e))},c=function(n){return n(e)},l={fold:function(n,t){return t(e)},is:function(n){return e===n},isSome:r,isNone:t,getOr:n,getOrThunk:n,getOrDie:n,or:u,orThunk:u,map:s,ap:function(n){return n.fold(o,function(n){return i(n(e))})},each:function(n){n(e)},bind:c,flatten:n,exists:c,forall:c,filter:function(n){return n(e)?l:a},equals:function(n){return n.is(e)},equals_:function(n,r){return n.fold(t,function(n){return r(e,n)})},toArray:function(){return[e]},toString:function(){return"some("+e+")"}};return l};return{some:i,none:o,from:function(e){return null===e||e===undefined?a:i(e)}}}),i("global!String",String),a("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(e,n,t,r){var o=function(){var e=n.prototype.indexOf,t=function(n,t){return e.call(n,t)},r=function(e,n){return w(e,n)};return e===undefined?r:t}(),a=function(n,t){var r=o(n,t);return-1===r?e.none():e.some(r)},i=function(e,n){return o(e,n)>-1},u=function(e,n){return b(e,n).isSome()},s=function(e,n){for(var t=[],r=0;r<e;r++)t.push(n(r));return t},c=function(e,n){for(var t=[],r=0;r<e.length;r+=n){var o=e.slice(r,r+n);t.push(o)}return t},l=function(e,t){for(var r=e.length,o=new n(r),a=0;a<r;a++){var i=e[a];o[a]=t(i,a,e)}return o},p=function(e,n){for(var t=0,r=e.length;t<r;t++){n(e[t],t,e)}},f=function(e,n){for(var t=e.length-1;t>=0;t--){n(e[t],t,e)}},d=function(e,n){for(var t=[],r=[],o=0,a=e.length;o<a;o++){var i=e[o];(n(i,o,e)?t:r).push(i)}return{pass:t,fail:r}},m=function(e,n){for(var t=[],r=0,o=e.length;r<o;r++){var a=e[r];n(a,r,e)&&t.push(a)}return t},h=function(e,n){if(0===e.length)return[];for(var t=n(e[0]),r=[],o=[],a=0,i=e.length;a<i;a++){var u=e[a],s=n(u);s!==t&&(r.push(o),o=[]),t=s,o.push(u)}return 0!==o.length&&r.push(o),r},g=function(e,n,t){return f(e,function(e){t=n(t,e)}),t},x=function(e,n,t){return p(e,function(e){t=n(t,e)}),t},v=function(n,t){for(var r=0,o=n.length;r<o;r++){var a=n[r];if(t(a,r,n))return e.some(a)}return e.none()},b=function(n,t){for(var r=0,o=n.length;r<o;r++){if(t(n[r],r,n))return e.some(r)}return e.none()},w=function(e,n){for(var t=0,r=e.length;t<r;++t)if(e[t]===n)return t;return-1},k=n.prototype.push,y=function(e){for(var r=[],o=0,a=e.length;o<a;++o){if(!n.prototype.isPrototypeOf(e[o]))throw new t("Arr.flatten item "+o+" was not an array, input: "+e);k.apply(r,e[o])}return r},C=function(e,n){var t=l(e,n);return y(t)},S=function(e,n){for(var t=0,r=e.length;t<r;++t){if(!0!==n(e[t],t,e))return!1}return!0},T=function(e,n){return e.length===n.length&&S(e,function(e,t){return e===n[t]})},R=n.prototype.slice;return{map:l,each:p,eachr:f,partition:d,filter:m,groupBy:h,indexOf:a,foldr:g,foldl:x,find:v,findIndex:b,flatten:y,bind:C,forall:S,exists:u,contains:i,equal:T,reverse:function(e){var n=R.call(e,0);return n.reverse(),n},chunk:c,difference:function(e,n){return m(e,function(e){return!i(n,e)})},mapToObject:function(e,n){for(var t={},o=0,a=e.length;o<a;o++){var i=e[o];t[r(i)]=n(i,o)}return t},pure:function(e){return[e]},sort:function(e,n){var t=R.call(e,0);return t.sort(n),t},range:s,head:function(n){return 0===n.length?e.none():e.some(n[0])},last:function(n){return 0===n.length?e.none():e.some(n[n.length-1])}}}),a("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),i("global!document",document),a("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(e,n,t,r){var o=function(e,n){var o=n||r,a=o.createElement("div");if(a.innerHTML=e,!a.hasChildNodes()||a.childNodes.length>1)throw t.error("HTML does not have a single root node",e),"HTML must have a single root node";return u(a.childNodes[0])},a=function(e,n){var t=n||r,o=t.createElement(e);return u(o)},i=function(e,n){var t=n||r,o=t.createTextNode(e);return u(o)},u=function(t){if(null===t||t===undefined)throw new n("Node cannot be null or undefined");return{dom:e.constant(t)}};return{fromHtml:o,fromTag:a,fromText:i,fromDom:u}}),a("ephox.sugar.api.view.Position",["ephox.katamari.api.Fun"],function(e){var n=function(t,r){var o=function(e,o){return n(t+e,r+o)};return{left:e.constant(t),top:e.constant(r),translate:o}};return n}),a("ephox.katamari.api.Global",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),a("ephox.katamari.api.Resolve",["ephox.katamari.api.Global"],function(e){var n=function(n,t){for(var r=t!==undefined?t:e,o=0;o<n.length&&r!==undefined&&null!==r;++o)r=r[n[o]];return r},t=function(e,t){var r=e.split(".");return n(r,t)},r=function(e,n){return e[n]!==undefined&&null!==e[n]||(e[n]={}),e[n]},o=function(n,t){for(var o=t!==undefined?t:e,a=0;a<n.length;++a)o=r(o,n[a]);return o};return{path:n,resolve:t,forge:o,namespace:function(e,n){var t=e.split(".");return o(t,n)}}}),a("ephox.sand.util.Global",["ephox.katamari.api.Resolve"],function(e){var n=function(n,t){return e.resolve(n,t)};return{getOrDie:function(e,t){var r=n(e,t);if(r===undefined)throw e+" not available on this browser";return r}}}),a("ephox.sand.api.Node",["ephox.sand.util.Global"],function(e){var n=function(){return e.getOrDie("Node")},t=function(e,n,t){return 0!=(e.compareDocumentPosition(n)&t)};return{documentPositionPreceding:function(e,r){return t(e,r,n().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(e,r){return t(e,r,n().DOCUMENT_POSITION_CONTAINED_BY)}}}),a("ephox.katamari.api.Thunk",[],function(){return{cached:function(e){var n,t=!1;return function(){return t||(t=!0,n=e.apply(null,arguments)),n}}}}),i("global!Number",Number),a("ephox.sand.detect.Version",["ephox.katamari.api.Arr","global!Number","global!String"],function(e,n,t){var r=function(e,n){for(var t=0;t<e.length;t++){var r=e[t];if(r.test(n))return r}return undefined},o=function(e,t){var o=r(e,t);if(!o)return{major:0,minor:0};var a=function(e){return n(t.replace(o,"$"+e))};return u(a(1),a(2))},a=function(e,n){var r=t(n).toLowerCase();return 0===e.length?i():o(e,r)},i=function(){return u(0,0)},u=function(e,n){return{major:e,minor:n}};return{nu:u,detect:a,unknown:i}}),a("ephox.sand.core.Browser",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,n){var t="Edge",r="Chrome",o="IE",a="Opera",i="Firefox",u="Safari",s=function(e,n){return function(){return n===e}},c=function(){return l({current:undefined,version:n.unknown()})},l=function(e){var n=e.current;return{current:n,version:e.version,isEdge:s(t,n),isChrome:s(r,n),isIE:s(o,n),isOpera:s(a,n),isFirefox:s(i,n),isSafari:s(u,n)}};return{unknown:c,nu:l,edge:e.constant(t),chrome:e.constant(r),ie:e.constant(o),opera:e.constant(a),firefox:e.constant(i),safari:e.constant(u)}}),a("ephox.sand.core.OperatingSystem",["ephox.katamari.api.Fun","ephox.sand.detect.Version"],function(e,n){var t="Windows",r="iOS",o="Android",a="Linux",i="OSX",u="Solaris",s="FreeBSD",c=function(e,n){return function(){return n===e}},l=function(){return p({current:undefined,version:n.unknown()})},p=function(e){var n=e.current;return{current:n,version:e.version,isWindows:c(t,n),isiOS:c(r,n),isAndroid:c(o,n),isOSX:c(i,n),isLinux:c(a,n),isSolaris:c(u,n),isFreeBSD:c(s,n)}};return{unknown:l,nu:p,windows:e.constant(t),ios:e.constant(r),android:e.constant(o),linux:e.constant(a),osx:e.constant(i),solaris:e.constant(u),freebsd:e.constant(s)}}),a("ephox.sand.detect.DeviceType",["ephox.katamari.api.Fun"],function(e){return function(n,t,r){var o=n.isiOS()&&!0===/ipad/i.test(r),a=n.isiOS()&&!o,i=n.isAndroid()&&3===n.version.major,u=n.isAndroid()&&4===n.version.major,s=o||i||u&&!0===/mobile/i.test(r),c=n.isiOS()||n.isAndroid(),l=c&&!s,p=t.isSafari()&&n.isiOS()&&!1===/safari/i.test(r);return{isiPad:e.constant(o),isiPhone:e.constant(a),isTablet:e.constant(s),isPhone:e.constant(l),isTouch:e.constant(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:e.constant(p)}}}),a("ephox.sand.detect.UaString",["ephox.katamari.api.Arr","ephox.sand.detect.Version","global!String"],function(e,n,t){var r=function(n,r){var o=t(r).toLowerCase();return e.find(n,function(e){return e.search(o)})};return{detectBrowser:function(e,t){return r(e,t).map(function(e){var r=n.detect(e.versionRegexes,t);return{current:e.name,version:r}})},detectOs:function(e,t){return r(e,t).map(function(e){var r=n.detect(e.versionRegexes,t);return{current:e.name,version:r}})}}}),a("ephox.katamari.str.StrAppend",[],function(){return{addToStart:function(e,n){return n+e},addToEnd:function(e,n){return e+n},removeFromStart:function(e,n){return e.substring(n)},removeFromEnd:function(e,n){return e.substring(0,e.length-n)}}}),a("ephox.katamari.str.StringParts",["ephox.katamari.api.Option","global!Error"],function(e){return{first:function(e,n){return e.substr(0,n)},last:function(e,n){return e.substr(e.length-n,e.length)},head:function(n){return""===n?e.none():e.some(n.substr(0,1))},tail:function(n){return""===n?e.none():e.some(n.substring(1))}}}),a("ephox.katamari.api.Strings",["ephox.katamari.str.StrAppend","ephox.katamari.str.StringParts","global!Error"],function(e,n){var t=function(e,n,t){return""===n||!(e.length<n.length)&&e.substr(t,t+n.length)===n},r=function(e,n){var t=function(e){var n=typeof e;return"string"===n||"number"===n};return e.replace(/\${([^{}]*)}/g,function(e,r){var o=n[r];return t(o)?o:e})},o=function(n,t){return l(n,t)?e.removeFromStart(n,t.length):n},a=function(n,t){return p(n,t)?e.removeFromEnd(n,t.length):n},i=function(n,t){return l(n,t)?n:e.addToStart(n,t)},u=function(n,t){return p(n,t)?n:e.addToEnd(n,t)},s=function(e,n){return-1!==e.indexOf(n)},c=function(e){return n.head(e).bind(function(t){return n.tail(e).map(function(e){return t.toUpperCase()+e})}).getOr(e)},l=function(e,n){return t(e,n,0)},p=function(e,n){return t(e,n,e.length-n.length)};return{supplant:r,startsWith:l,removeLeading:o,removeTrailing:a,ensureLeading:i,ensureTrailing:u,endsWith:p,contains:s,trim:function(e){return e.replace(/^\s+|\s+$/g,"")},lTrim:function(e){return e.replace(/^\s+/g,"")},rTrim:function(e){return e.replace(/\s+$/g,"")},capitalize:c}}),a("ephox.sand.info.PlatformInfo",["ephox.katamari.api.Fun","ephox.katamari.api.Strings"],function(e,n){var t=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(e){return function(t){return n.contains(t,e)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return n.contains(e,"edge/")&&n.contains(e,"chrome")&&n.contains(e,"safari")&&n.contains(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,t],search:function(e){return n.contains(e,"chrome")&&!n.contains(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return n.contains(e,"msie")||n.contains(e,"trident")}},{name:"Opera",versionRegexes:[t,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[t,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(n.contains(e,"safari")||n.contains(e,"mobile/"))&&n.contains(e,"applewebkit")}}],a=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return n.contains(e,"iphone")||n.contains(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:e.constant(o),oses:e.constant(a)}}),a("ephox.sand.core.PlatformDetection",["ephox.sand.core.Browser","ephox.sand.core.OperatingSystem","ephox.sand.detect.DeviceType","ephox.sand.detect.UaString","ephox.sand.info.PlatformInfo"],function(e,n,t,r,o){return{detect:function(a){var i=o.browsers(),u=o.oses(),s=r.detectBrowser(i,a).fold(e.unknown,e.nu),c=r.detectOs(u,a).fold(n.unknown,n.nu);return{browser:s,os:c,deviceType:t(c,s,a)}}}}),i("global!navigator",navigator),a("ephox.sand.api.PlatformDetection",["ephox.katamari.api.Thunk","ephox.sand.core.PlatformDetection","global!navigator"],function(e,n,t){return{detect:e.cached(function(){var e=t.userAgent;return n.detect(e)})}}),a("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),a("ephox.sugar.api.search.Selectors",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.node.NodeTypes","global!Error","global!document"],function(e,n,t,r,o,a){var i=0,u=1,s=2,c=3,l=function(){var e=a.createElement("span");return e.matches!==undefined?i:e.msMatchesSelector!==undefined?u:e.webkitMatchesSelector!==undefined?s:e.mozMatchesSelector!==undefined?c:-1}(),p=r.ELEMENT,f=r.DOCUMENT,d=function(e,n){var t=e.dom();if(t.nodeType!==p)return!1;if(l===i)return t.matches(n);if(l===u)return t.msMatchesSelector(n);if(l===s)return t.webkitMatchesSelector(n);if(l===c)return t.mozMatchesSelector(n);throw new o("Browser lacks native selectors")},m=function(e){return e.nodeType!==p&&e.nodeType!==f||0===e.childElementCount};return{all:function(n,r){var o=r===undefined?a:r.dom();return m(o)?[]:e.map(o.querySelectorAll(n),t.fromDom)},is:d,one:function(e,r){var o=r===undefined?a:r.dom();return m(o)?n.none():n.from(o.querySelector(e)).map(t.fromDom)}}}),a("ephox.sugar.api.dom.Compare",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sand.api.Node","ephox.sand.api.PlatformDetection","ephox.sugar.api.search.Selectors"],function(e,n,t,r,o){var a=function(e,n){return e.dom()===n.dom()},i=function(e,n){return e.dom().isEqualNode(n.dom())},u=function(t,r){return e.exists(r,n.curry(a,t))},s=function(e,n){var t=e.dom(),r=n.dom();return t!==r&&t.contains(r)},c=function(e,n){return t.documentPositionContainedBy(e.dom(),n.dom())},l=r.detect().browser,p=l.isIE()?c:s;return{eq:a,isEqualNode:i,member:u,contains:p,is:o.is}}),a("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(e){var n=function(e){return e.dom().nodeName.toLowerCase()},t=function(e){return e.dom().nodeType},r=function(e){return e.dom().nodeValue},o=function(e){return function(n){return t(n)===e}},a=function(r){return t(r)===e.COMMENT||"#comment"===n(r)},i=o(e.ELEMENT),u=o(e.TEXT),s=o(e.DOCUMENT);return{name:n,type:t,value:r,isElement:i,isText:u,isDocument:s,isComment:a}}),a("ephox.katamari.api.Type",["global!Array","global!String"],function(e,n){var t=function(t){if(null===t)return"null";var r=typeof t;return"object"===r&&e.prototype.isPrototypeOf(t)?"array":"object"===r&&n.prototype.isPrototypeOf(t)?"string":r},r=function(e){return function(n){return t(n)===e}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),a("ephox.sugar.api.node.Body",["ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","global!document"],function(e,n,t,r){var o=function(e){var n=t.isText(e)?e.dom().parentNode:e.dom();return n!==undefined&&null!==n&&n.ownerDocument.body.contains(n)},a=e.cached(function(){return i(n.fromDom(r))}),i=function(e){var t=e.dom().body;if(null===t||t===undefined)throw"Body is not available yet";return n.fromDom(t)};return{body:a,getBody:i,inBody:o}}),a("ephox.sugar.impl.ClosestOrAncestor",["ephox.katamari.api.Type","ephox.katamari.api.Option"],function(e,n){return function(t,r,o,a,i){return t(o,a)?n.some(o):e.isFunction(i)&&i(o)?n.none():r(o,a,i)}}),a("ephox.sugar.api.search.PredicateFind",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Body","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.impl.ClosestOrAncestor"],function(e,n,t,r,o,a,i,u){var s=function(e){return d(o.body(),e)},c=function(n,o,a){for(var u=n.dom(),s=e.isFunction(a)?a:t.constant(!1);u.parentNode;){u=u.parentNode;var c=i.fromDom(u);if(o(c))return r.some(c);if(s(c))break}return r.none()},l=function(e,n,t){return u(function(e){return n(e)},c,e,n,t)},p=function(e,n){var t=e.dom();return t.parentNode?f(i.fromDom(t.parentNode),function(t){return!a.eq(e,t)&&n(t)}):r.none()},f=function(e,r){return n.find(e.dom().childNodes,t.compose(r,i.fromDom)).map(i.fromDom)},d=function(e,n){var t=function(e){for(var o=0;o<e.childNodes.length;o++){if(n(i.fromDom(e.childNodes[o])))return r.some(i.fromDom(e.childNodes[o]));var a=t(e.childNodes[o]);if(a.isSome())return a}return r.none()};return t(e.dom())};return{first:s,ancestor:c,closest:l,sibling:p,child:f,descendant:d}}),a("ephox.sugar.api.dom.Dom",["ephox.katamari.api.Fun","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFind","global!document"],function(e,n,t,r,o,a){return{attached:function(r,i){var u=i||t.fromDom(a.documentElement);return o.ancestor(r,e.curry(n.eq,u)).isSome()},windowOf:function(e){var n=e.dom();return n===n.window?e:r.isDocument(e)?n.defaultView||n.parentWindow:null}}}),a("ephox.sugar.api.view.Location",["ephox.sugar.api.view.Position","ephox.sugar.api.dom.Dom","ephox.sugar.api.node.Element"],function(e,n,t){var r=function(n){var t=n.getBoundingClientRect();return e(t.left,t.top)},o=function(e,n){return e!==undefined?e:n!==undefined?n:0},a=function(e){var r=e.dom().ownerDocument,a=r.body,i=n.windowOf(t.fromDom(r)),s=r.documentElement,c=o(i.pageYOffset,s.scrollTop),l=o(i.pageXOffset,s.scrollLeft),p=o(s.clientTop,a.clientTop),f=o(s.clientLeft,a.clientLeft);return u(e).translate(l-f,c-p)},i=function(n){var t=n.dom();return e(t.offsetLeft,t.offsetTop)},u=function(o){var a=o.dom(),i=a.ownerDocument,u=i.body,s=t.fromDom(i.documentElement);return u===a?e(u.offsetLeft,u.offsetTop):n.attached(o,s)?r(a):e(0,0)};return{absolute:a,relative:i,viewport:u}}),a("ephox.snooker.api.ResizeWire",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.view.Location","ephox.sugar.api.view.Position"],function(e,n,t,r,o){return{only:function(r){var a=n.from(r.dom().documentElement).map(t.fromDom).getOr(r);return{parent:e.constant(a),view:e.constant(r),origin:e.constant(o(0,0))}},detached:function(n,t){var o=e.curry(r.absolute,t);return{parent:e.constant(t),view:e.constant(n),origin:o}},body:function(n,t){return{parent:e.constant(t),view:e.constant(n),origin:e.constant(o(0,0))}}}}),a("ephox.katamari.data.Immutable",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","global!Array","global!Error"],function(e,n,t,r){return function(){var o=arguments;return function(){for(var a=new t(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];if(o.length!==a.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+a.length+" arguments");var u={};return e.each(o,function(e,t){u[e]=n.constant(a[t])}),u}}}),a("ephox.katamari.api.Obj",["ephox.katamari.api.Option","global!Object"],function(e,n){var t=function(){var e=n.keys,t=function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};return e===undefined?t:e}(),r=function(e,n){for(var r=t(e),o=0,a=r.length;o<a;o++){var i=r[o];n(e[i],i,e)}},o=function(e,n){return a(e,function(e,t,r){return{k:t,v:n(e,t,r)}})},a=function(e,n){var t={};return r(e,function(r,o){var a=n(r,o,e);t[a.k]=a.v}),t},i=function(e,n){var t={},o={};return r(e,function(e,r){(n(e,r)?t:o)[r]=e}),{t:t,f:o}},u=function(e,n){var t=[];return r(e,function(e,r){t.push(n(e,r))}),t},s=function(n,r){for(var o=t(n),a=0,i=o.length;a<i;a++){var u=o[a],s=n[u];if(r(s,u,n))return e.some(s)}return e.none()},c=function(e){return u(e,function(e){return e})};return{bifilter:i,each:r,map:o,mapToArray:u,tupleMap:a,find:s,keys:t,values:c,size:function(e){return c(e).length}}}),a("ephox.katamari.util.BagUtils",["ephox.katamari.api.Arr","ephox.katamari.api.Type","global!Error"],function(e,n,t){var r=function(e){return e.slice(0).sort()};return{sort:r,reqMessage:function(e,n){throw new t("All required keys ("+r(e).join(", ")+") were not specified. Specified keys were: "+r(n).join(", ")+".")},unsuppMessage:function(e){throw new t("Unsupported keys for object: "+r(e).join(", "))},validateStrArr:function(r,o){if(!n.isArray(o))throw new t("The "+r+" fields must be an array. Was: "+o+".");e.each(o,function(e){if(!n.isString(e))throw new t("The value "+e+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(e,n){throw new t("All values need to be of type: "+n+". Keys ("+r(e).join(", ")+") were not.")},checkDupes:function(n){var o=r(n);e.find(o,function(e,n){return n<o.length-1&&e===o[n+1]}).each(function(e){throw new t("The field: "+e+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),a("ephox.katamari.data.MixedBag",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.katamari.util.BagUtils","global!Error","global!Object"],function(e,n,t,r,o,a,i){return function(u,s){var c=u.concat(s);if(0===c.length)throw new a("You must specify at least one required or optional field.");return o.validateStrArr("required",u),o.validateStrArr("optional",s),o.checkDupes(c),function(a){var l=t.keys(a);e.forall(u,function(n){return e.contains(l,n)})||o.reqMessage(u,l);var p=e.filter(l,function(n){return!e.contains(c,n)});p.length>0&&o.unsuppMessage(p);var f={};return e.each(u,function(e){f[e]=n.constant(a[e])}),e.each(s,function(e){f[e]=n.constant(i.prototype.hasOwnProperty.call(a,e)?r.some(a[e]):r.none())}),f}}}),a("ephox.katamari.api.Struct",["ephox.katamari.data.Immutable","ephox.katamari.data.MixedBag"],function(e,n){return{immutable:e,immutableBag:n}}),a("ephox.sugar.api.properties.Attr",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.node.Node","global!Error","global!console"],function(e,n,t,r,o,a){var i=function(n,t,r){if(!(e.isString(r)||e.isBoolean(r)||e.isNumber(r)))throw a.error("Invalid call to Attr.set. Key ",t,":: Value ",r,":: Element ",n),new o("Attribute value was not simple");n.setAttribute(t,r+"")},u=function(e,n,t){i(e.dom(),n,t)},s=function(e,n){var r=e.dom();t.each(n,function(e,n){i(r,n,e)})},c=function(e,n){var t=e.dom().getAttribute(n);return null===t?undefined:t},l=function(e,n){var t=e.dom();return!(!t||!t.hasAttribute)&&t.hasAttribute(n)},p=function(e,n){e.dom().removeAttribute(n)},f=function(e){var n=e.dom().attributes;return n===undefined||null===n||0===n.length},d=function(e,n,t){l(e,t)&&!l(n,t)&&u(n,t,c(e,t))};return{clone:function(e){return n.foldl(e.dom().attributes,function(e,n){return e[n.name]=n.value,e},{})},set:u,setAll:s,get:c,has:l,remove:p,hasNone:f,transfer:function(e,t,o){r.isElement(e)&&r.isElement(t)&&n.each(o,function(n){d(e,t,n)})}}}),a("ephox.sugar.impl.Style",[],function(){return{isSupported:function(e){return e.style!==undefined}}}),i("global!window",window),a("ephox.sugar.api.properties.Css",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.impl.Style","ephox.katamari.api.Strings","global!Error","global!console","global!window"],function(e,n,t,r,o,a,i,u,s,c,l,p,f){var d=function(n,t,r){if(!e.isString(r))throw p.error("Invalid call to CSS.set. Property ",t,":: Value ",r,":: Element ",n),new l("CSS value must be a string: "+r);s.isSupported(n)&&n.style.setProperty(t,r)},m=function(e,n){s.isSupported(e)&&e.style.removeProperty(n)},h=function(e,n,t){var r=e.dom();d(r,n,t)},g=function(e,n){var r=e.dom();t.each(n,function(e,n){d(r,n,e)})},x=function(e,n){var r=e.dom();t.each(n,function(e,n){e.fold(function(){m(r,n)},function(e){d(r,n,e)})})},v=function(e,n){var t=e.dom(),r=f.getComputedStyle(t),o=r.getPropertyValue(n),i=""!==o||a.inBody(e)?o:b(t,n);return null===i?undefined:i},b=function(e,n){return s.isSupported(e)?e.style.getPropertyValue(n):""},w=function(e,n){var t=e.dom(),o=b(t,n);return r.from(o).filter(function(e){return e.length>0})},k=function(e){var n={},t=e.dom();if(s.isSupported(t))for(var r=0;r<t.style.length;r++){var o=t.style.item(r);n[o]=t.style[o]}return n},y=function(e,n,t){var r=i.fromTag(e);return h(r,n,t),w(r,n).isSome()},C=function(e,n){var t=e.dom();m(t,n),o.has(e,"style")&&""===c.trim(o.get(e,"style"))&&o.remove(e,"style")},S=function(e,n){var t=o.get(e,"style"),r=n(e);return(t===undefined?o.remove:o.set)(e,"style",t),r},T=function(e,n,t){w(e,t).each(function(e){w(n,t).isNone()&&h(n,t,e)})};return{copy:function(e,n){var t=e.dom(),r=n.dom();s.isSupported(t)&&s.isSupported(r)&&(r.style.cssText=t.style.cssText)},set:h,preserve:S,setAll:g,setOptions:x,remove:C,get:v,getRaw:w,getAllRaw:k,isValidValue:y,reflow:function(e){return e.dom().offsetWidth},transfer:function(e,t,r){u.isElement(e)&&u.isElement(t)&&n.each(r,function(n){T(e,t,n)})}}}),a("ephox.sugar.impl.Dimension",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.sugar.api.properties.Css","ephox.sugar.impl.Style"],function(e,n,t,r){return function(o,a){var i=function(n,t){if(!e.isNumber(t)&&!t.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+t;var a=n.dom();r.isSupported(a)&&(a.style[o]=t+"px")},u=function(e){var n=a(e);if(n<=0||null===n){var r=t.get(e,o);return parseFloat(r)||0}return n},s=u,c=function(e,r){return n.foldl(r,function(n,r){var o=t.get(e,r),a=o===undefined?0:parseInt(o,10);return isNaN(a)?n:n+a},0)};return{set:i,get:u,getOuter:s,aggregate:c,max:function(e,n,t){var r=c(e,t);return n>r?n-r:0}}}}),a("ephox.sugar.api.view.Height",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,n){var t=n("height",function(e){return e.dom().offsetHeight});return{set:function(e,n){t.set(e,n)},get:function(e){return t.get(e)},getOuter:function(e){return t.getOuter(e)},setMax:function(n,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],a=t.max(n,r,o);e.set(n,"max-height",a+"px")}}}),a("ephox.sugar.api.view.Width",["ephox.sugar.api.properties.Css","ephox.sugar.impl.Dimension"],function(e,n){var t=n("width",function(e){return e.dom().offsetWidth});return{set:function(e,n){t.set(e,n)},get:function(e){return t.get(e)},getOuter:function(e){return t.getOuter(e)},setMax:function(n,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],a=t.max(n,r,o);e.set(n,"max-width",a+"px")}}}),a("ephox.snooker.resize.BarPositions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Struct","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,n,t,r,o,a){var i=t.immutable("row","y"),u=t.immutable("col","x"),s=function(e){return o.absolute(e).left()+a.getOuter(e)},c=function(e){return o.absolute(e).left()},l=function(e,n){return u(e,c(n))},p=function(e,n){return u(e,s(n))},f=function(e){return o.absolute(e).top()},d=function(e,n){return i(e,f(n))},m=function(e,n){return i(e,f(n)+r.getOuter(n))},h=function(n,t,r){if(0===r.length)return[];var o=e.map(r.slice(1),function(e,t){return e.map(function(e){return n(t,e)})}),a=r[r.length-1].map(function(e){return t(r.length-1,e)});return o.concat([a])},g=function(e){return-e},x={delta:n.identity,positions:n.curry(h,d,m),edge:f},v={delta:n.identity,edge:c,positions:n.curry(h,l,p)};return{height:x,rtl:{delta:g,edge:s,positions:n.curry(h,p,l)},ltr:v}}),a("ephox.snooker.api.ResizeDirection",["ephox.snooker.resize.BarPositions"],function(e){return{ltr:e.ltr,rtl:e.rtl}}),a("ephox.snooker.api.TableDirection",["ephox.snooker.api.ResizeDirection"],function(e){return function(n){var t=function(t){return n(t).isRtl()?e.rtl:e.ltr},r=function(e,n){return t(n).delta(e,n)},o=function(e,n){return t(n).positions(e,n)};return{delta:r,edge:function(e){return t(e).edge(e)},positions:o}}}),a("ephox.porkbun.Event",["ephox.katamari.api.Arr","ephox.katamari.api.Struct"],function(e,n){return function(t){var r=n.immutable.apply(null,t),o=[];return{bind:function(e){if(e===undefined)throw"Event bind error: undefined handler";o.push(e)},unbind:function(n){o=e.filter(o,function(e){return e!==n})},trigger:function(){var n=r.apply(null,arguments);e.each(o,function(e){e(n)})}}}}),a("ephox.porkbun.Events",["ephox.katamari.api.Obj"],function(e){return{create:function(n){return{registry:e.map(n,function(e){return{bind:e.bind,unbind:e.unbind}}),trigger:e.map(n,function(e){return e.trigger})}}}}),a("ephox.snooker.calc.ColumnContext",[],function(){var e=function(){return a(function(e){return e()})},n=function(e){return a(function(n,t){return t(e)})},t=function(e,n){return a(function(t,r,o){return o(e,n)})},r=function(e,n,t){return a(function(r,o,a,i){return i(e,n,t)})},o=function(e,n){return a(function(t,r,o,a,i){return i(e,n)})},a=function(e){return{fold:e}};return{none:e,only:n,left:t,middle:r,right:o}}),i("global!Math",Math),a("ephox.snooker.calc.Deltas",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.calc.ColumnContext","global!Math"],function(e,n,t,r){var o=function(e,n){return 0===e.length?t.none():1===e.length?t.only(0):0===n?t.left(0,1):n===e.length-1?t.right(n-1,n):n>0&&n<e.length-1?t.middle(n-1,n,n+1):t.none()};return{determine:function(t,a,i,u){var s=t.slice(0),c=o(t,a),l=function(t){return e.map(t,n.constant(0))},p=n.constant(l(s)),f=function(e){return u.singleColumnWidth(s[e],i)},d=function(e,n){if(i>=0){var t=r.max(u.minCellWidth(),s[n]-i);return l(s.slice(0,e)).concat([i,t-s[n]]).concat(l(s.slice(n+1)))}var o=r.max(u.minCellWidth(),s[e]+i),a=s[e]-o;return l(s.slice(0,e)).concat([o-s[e],a]).concat(l(s.slice(n+1)))},m=d,h=function(e,n,t){return d(n,t)},g=function(e,n){if(i>=0)return l(s.slice(0,n)).concat([i]);var t=r.max(u.minCellWidth(),s[n]+i);return l(s.slice(0,n)).concat([t-s[n]])};return c.fold(p,f,m,h,g)}}}),a("ephox.snooker.api.Structs",["ephox.katamari.api.Struct"],function(e){var n=e.immutable("width","height"),t=e.immutable("rows","columns"),r=e.immutable("row","column"),o=e.immutable("x","y"),a=e.immutable("element","rowspan","colspan"),i=e.immutable("element","rowspan","colspan","isNew");return{dimensions:n,grid:t,address:r,coords:o,
extended:e.immutable("element","rowspan","colspan","row","column"),detail:a,detailnew:i,rowdata:e.immutable("element","cells","section"),elementnew:e.immutable("element","isNew"),rowdatanew:e.immutable("element","cells","section","isNew"),rowcells:e.immutable("cells","section"),rowdetails:e.immutable("details","section"),bounds:e.immutable("startRow","startCol","finishRow","finishCol")}}),a("ephox.sugar.alien.Recurse",[],function(){return{toArray:function(e,n){var t=[],r=function(e){return t.push(e),n(e)},o=n(e);do{o=o.bind(r)}while(o.isSome());return t}}}),a("ephox.sugar.api.search.Traverse",["ephox.katamari.api.Type","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.alien.Recurse","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,n,t,r,o,a,i,u){var s=function(e){return u.fromDom(e.dom().ownerDocument)},c=function(e){var n=s(e);return u.fromDom(n.dom().documentElement)},l=function(e){var n=e.dom(),t=n.ownerDocument.defaultView;return u.fromDom(t)},p=function(e){var n=e.dom();return r.from(n.parentNode).map(u.fromDom)},f=function(e){return p(e).bind(function(t){var r=w(t);return n.findIndex(r,function(n){return i.eq(e,n)})})},d=function(n,r){for(var o=e.isFunction(r)?r:t.constant(!1),a=n.dom(),i=[];null!==a.parentNode&&a.parentNode!==undefined;){var s=a.parentNode,c=u.fromDom(s);if(i.push(c),!0===o(c))break;a=s}return i},m=function(e){var t=function(t){return n.filter(t,function(n){return!i.eq(e,n)})};return p(e).map(w).map(t).getOr([])},h=function(e){var n=e.dom();return r.from(n.offsetParent).map(u.fromDom)},g=function(e){var n=e.dom();return r.from(n.previousSibling).map(u.fromDom)},x=function(e){var n=e.dom();return r.from(n.nextSibling).map(u.fromDom)},v=function(e){return n.reverse(a.toArray(e,g))},b=function(e){return a.toArray(e,x)},w=function(e){var t=e.dom();return n.map(t.childNodes,u.fromDom)},k=function(e,n){var t=e.dom().childNodes;return r.from(t[n]).map(u.fromDom)},y=function(e){return k(e,0)},C=function(e){return k(e,e.dom().childNodes.length-1)},S=function(e){return e.dom().childNodes.length},T=o.immutable("element","offset");return{owner:s,defaultView:l,documentElement:c,parent:p,findIndex:f,parents:d,siblings:m,prevSibling:g,offsetParent:h,prevSiblings:v,nextSibling:x,nextSiblings:b,children:w,child:k,firstChild:y,lastChild:C,childNodesCount:S,leaf:function(e,n){var t=w(e);return t.length>0&&n<t.length?T(t[n],0):T(e,n)}}}),a("ephox.snooker.util.LayerSelector",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse"],function(e,n,t,r){var o=function(e,t){return a(e,t,n.constant(!0))},a=function(n,o,i){return e.bind(r.children(n),function(e){return t.is(e,o)?i(e)?[e]:[]:a(e,o,i)})};return{firstLayer:o,filterFirstLayer:a}}),a("ephox.sugar.api.search.PredicateFilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Body","ephox.sugar.api.search.Traverse"],function(e,n,t){var r=function(e){return u(n.body(),e)},o=function(n,r,o){return e.filter(t.parents(n,o),r)},a=function(n,r){return e.filter(t.siblings(n),r)},i=function(n,r){return e.filter(t.children(n),r)},u=function(n,r){var o=[];return e.each(t.children(n),function(e){r(e)&&(o=o.concat([e])),o=o.concat(u(e,r))}),o};return{all:r,ancestors:o,siblings:a,children:i,descendants:u}}),a("ephox.sugar.api.search.SelectorFilter",["ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.Selectors"],function(e,n){return{all:function(e){return n.all(e)},ancestors:function(t,r,o){return e.ancestors(t,function(e){return n.is(e,r)},o)},siblings:function(t,r){return e.siblings(t,function(e){return n.is(e,r)})},children:function(t,r){return e.children(t,function(e){return n.is(e,r)})},descendants:function(e,t){return n.all(t,e)}}}),a("ephox.sugar.api.search.SelectorFind",["ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Selectors","ephox.sugar.impl.ClosestOrAncestor"],function(e,n,t){var r=function(e){return n.one(e)},o=function(t,r,o){return e.ancestor(t,function(e){return n.is(e,r)},o)};return{first:r,ancestor:o,sibling:function(t,r){return e.sibling(t,function(e){return n.is(e,r)})},child:function(t,r){return e.child(t,function(e){return n.is(e,r)})},descendant:function(e,t){return n.one(t,e)},closest:function(e,r,a){return t(n.is,o,e,r,a)}}}),i("global!parseInt",parseInt),a("ephox.snooker.api.TableLookup",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors","ephox.sugar.api.search.Traverse","global!parseInt"],function(e,n,t,r,o,a,i,u,s,c,l,p){var f=function(r,o,a){var u=a!==undefined?a:n.constant(!1);if(u(o))return t.none();if(e.contains(r,i.name(o)))return t.some(o);var l=function(e){return c.is(e,"table")||u(e)};return s.ancestor(o,r.join(","),l)},d=function(e,n){return f(["td","th"],e,n)},m=function(e){return o.firstLayer(e,"th,td")},h=function(e,n){return f(["caption","tr","tbody","tfoot","thead"],e,n)},g=function(e,n){return l.parent(n).map(function(n){return u.children(n,e)})},x=n.curry(g,"th,td"),v=n.curry(g,"tr"),b=function(e){return s.descendant(e,"th,td")},w=function(e,n){return s.closest(e,"table",n)},k=function(e,n){return f(["tr"],e,n)},y=function(e){return o.firstLayer(e,"tr")},C=function(e,n){return p(a.get(e,n),10)};return{cell:d,firstCell:b,cells:m,neighbourCells:x,table:w,row:k,rows:y,notCell:h,neighbourRows:v,attr:C,grid:function(e,n,t){var o=C(e,n),a=C(e,t);return r.grid(o,a)}}}),a("ephox.snooker.model.DetailsList",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a){return{fromTable:function(i){var u=t.rows(i);return e.map(u,function(i){var u=i,s=a.parent(u),c=s.bind(function(e){var n=o.name(e);return"tfoot"===n||"thead"===n||"tbody"===n?n:"tbody"}),l=e.map(t.cells(i),function(e){var t=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return n.detail(e,t,o)});return n.rowdata(u,l,c)})},fromPastedRows:function(o,a){return e.map(o,function(o){var i=e.map(t.cells(o),function(e){var t=r.has(e,"rowspan")?parseInt(r.get(e,"rowspan"),10):1,o=r.has(e,"colspan")?parseInt(r.get(e,"colspan"),10):1;return n.detail(e,t,o)});return n.rowdata(o,i,a.section())})}}}),a("ephox.snooker.model.Warehouse",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.Structs","global!Math"],function(e,n,t,r,o){var a=function(e,n){return e+","+n},i=function(e,n,r){var o=e.access()[a(n,r)];return o!==undefined?t.some(o):t.none()},u=function(e,n,r){var o=s(e,function(e){return r(n,e.element())});return o.length>0?t.some(o[0]):t.none()},s=function(n,t){var r=e.bind(n.all(),function(e){return e.cells()});return e.filter(r,t)};return{generate:function(t){var i={},u=[],s=0,c=0;e.each(t,function(n,t){var l=[];e.each(n.cells(),function(e){for(var n=0;i[a(t,n)]!==undefined;)n++;for(var u=r.extended(e.element(),e.rowspan(),e.colspan(),t,n),p=0;p<e.colspan();p++)for(var f=0;f<e.rowspan();f++){var d=t+f,m=n+p,h=a(d,m);i[h]=u,s=o.max(s,d+1),c=o.max(c,m+1)}l.push(u)}),u.push(r.rowdata(n.element(),l,n.section()))});var l=r.grid(s,c);return{grid:n.constant(l),access:n.constant(i),all:n.constant(u)}},getAt:i,findItem:u,filterItems:s,justCells:function(n){var t=e.map(n.all(),function(e){return e.cells()});return e.flatten(t)}}}),a("ephox.katamari.api.Options",["ephox.katamari.api.Option"],function(e){return{cat:function(e){for(var n=[],t=function(e){n.push(e)},r=0;r<e.length;r++)e[r].each(t);return n},findMap:function(n,t){for(var r=0;r<n.length;r++){var o=t(n[r],r);if(o.isSome())return o}return e.none()},liftN:function(n,t){for(var r=[],o=0;o<n.length;o++){var a=n[o];if(!a.isSome())return e.none();r.push(a.getOrDie())}return e.some(t.apply(null,r))}}}),a("ephox.snooker.util.Util",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Options","global!Math"],function(e,n,t,r){return{repeat:function(e,n){for(var t=[],r=0;r<e;r++)t.push(n(r));return t},range:function(e,n){for(var t=[],r=e;r<n;r++)t.push(r);return t},unique:function(n,t){var r=[];return e.each(n,function(e,o){o<n.length-1&&!t(e,n[o+1])?r.push(e):o===n.length-1&&r.push(e)}),r},deduce:function(o,a){if(a<0||a>=o.length-1)return n.none();var i=o[a].fold(function(){var n=e.reverse(o.slice(0,a));return t.findMap(n,function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return n.some({value:e,delta:0})}),u=o[a+1].fold(function(){var e=o.slice(a+1);return t.findMap(e,function(e,n){return e.map(function(e){return{value:e,delta:n+1}})})},function(e){return n.some({value:e,delta:1})});return i.bind(function(e){return u.map(function(n){var t=n.delta+e.delta;return r.abs(n.value-e.value)/t})})}}}),a("ephox.snooker.lookup.Blocks",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse","ephox.snooker.util.Util"],function(e,n,t,r,o){var a=function(t){var a=t.grid(),u=o.range(0,a.columns()),s=o.range(0,a.rows());return e.map(u,function(o){return i(function(){return e.bind(s,function(e){return r.getAt(t,e,o).filter(function(e){return e.column()===o}).fold(n.constant([]),function(e){return[e]})})},function(e){return 1===e.colspan()},function(){return r.getAt(t,0,o)})})},i=function(n,r,o){var a=n();return e.find(a,r).orThunk(function(){return t.from(a[0]).orThunk(o)}).map(function(e){return e.element()})};return{columns:a,rows:function(t){var a=t.grid(),u=o.range(0,a.rows()),s=o.range(0,a.columns());return e.map(u,function(o){return i(function(){return e.bind(s,function(e){return r.getAt(t,o,e).filter(function(e){return e.row()===o}).fold(n.constant([]),function(e){return[e]})})},function(e){return 1===e.rowspan()},function(){return r.getAt(t,o,0)})})}}}),a("ephox.snooker.resize.Sizes",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Strings","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.view.Height","ephox.sugar.api.view.Width","global!Math","global!parseInt"],function(e,n,t,r,o,a,i,u,s,c,l){var p=/(\d+(\.\d+)?)(\w|%)*/,f=/(\d+(\.\d+)?)%/,d=/(\d+(\.\d+)?)px|em/,m=function(e,n){i.set(e,"width",n+"px")},h=function(e,n){i.set(e,"width",n+"%")},g=function(e,n){i.set(e,"height",n+"px")},x=function(e,n){return i.getRaw(e,n).getOrThunk(function(){return i.get(e,n)})},v=function(e){return x(e,"height")},b=function(e,n,t,o){var a=r.table(e).map(function(e){var r=t(e);return c.floor(n/100*r)}).getOr(n);return o(e,a),a},w=function(e,n,r,a){var i=l(e,10);return t.endsWith(e,"%")&&"table"!==o.name(n)?b(n,i,r,a):i},k=function(e){var n=v(e);return n?w(n,e,u.get,g):u.get(e)},y=function(e,n,t){return t(e)/C(e,n)},C=function(e,n){return a.has(e,n)?l(a.get(e,n),10):1},S=function(e){return i.getRaw(e,"width").fold(function(){return n.from(a.get(e,"width"))},function(e){return n.some(e)})},T=function(e,n){return e/n.pixelWidth()*100},R=function(e,n,t){if(f.test(n)){var r=f.exec(n);return parseFloat(r[1],10)}var o=s.get(e),a=l(o,10);return T(a,t)},A=function(e,n){return S(e).fold(function(){var t=s.get(e),r=l(t,10);return T(r,n)},function(t){return R(e,t,n)})},O=function(e,n){return e/100*n.pixelWidth()},D=function(e,n,t){if(d.test(n)){var r=d.exec(n);return l(r[1],10)}if(f.test(n)){var o=f.exec(n),a=parseFloat(o[1],10);return O(a,t)}var i=s.get(e);return l(i,10)},E=function(e,n){return S(e).fold(function(){var n=s.get(e);return l(n,10)},function(t){return D(e,t,n)})},N=function(e){return y(e,"rowspan",k)},B=function(t){return S(t).bind(function(t){if(p.test(t)){var r=p.exec(t);return n.some({width:e.constant(r[1]),unit:e.constant(r[3])})}return n.none()})},P=function(e,n,t){i.set(e,"width",n+t)};return{percentageBasedSizeRegex:e.constant(f),pixelBasedSizeRegex:e.constant(d),setPixelWidth:m,setPercentageWidth:h,setHeight:g,getPixelWidth:E,getPercentageWidth:A,getGenericWidth:B,setGenericWidth:P,getHeight:N,getRawWidth:S}}),a("ephox.snooker.util.CellUtils",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,n,t,r){var o=function(e,t){return n.has(e,t)&&r(n.get(e,t),10)>1},a=function(e){return o(e,"colspan")},i=function(e){return o(e,"rowspan")},u=function(e,n){return r(t.get(e,n),10)};return{hasColspan:a,hasRowspan:i,minWidth:e.constant(10),minHeight:e.constant(10),getInt:u}}),a("ephox.snooker.resize.ColumnSizes",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.lookup.Blocks","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.snooker.util.Util","ephox.sugar.api.properties.Css"],function(e,n,t,r,o,a,i){var u=function(e,n,t){return i.getRaw(e,n).fold(function(){return t(e)+"px"},function(e){return e})},s=function(e){return u(e,"width",r.getPixelWidth)},c=function(e){return u(e,"height",r.getHeight)},l=function(r,i,u,s,c){var l=t.columns(r),p=e.map(l,function(e){return e.map(i.edge)});return e.map(l,function(e,t){return e.filter(n.not(o.hasColspan)).fold(function(){var e=a.deduce(p,t);return s(e)},function(e){return u(e,c)})})},p=function(e){return e.map(function(e){return e+"px"}).getOr("")},f=function(e,n){return l(e,n,s,p)},d=function(e,n,t){return l(e,n,r.getPercentageWidth,function(e){return e.fold(function(){return t.minCellWidth()},function(e){return e/t.pixelWidth()*100})},t)},m=function(e,n,t){return l(e,n,r.getPixelWidth,function(e){return e.getOrThunk(t.minCellWidth)},t)},h=function(r,i,u,s){var c=t.rows(r),l=e.map(c,function(e){return e.map(i.edge)});return e.map(c,function(e,t){return e.filter(n.not(o.hasRowspan)).fold(function(){var e=a.deduce(l,t);return s(e)},function(e){return u(e)})})};return{getRawWidths:f,getPixelWidths:m,getPercentageWidths:d,getPixelHeights:function(e,n){return h(e,n,r.getHeight,function(e){return e.getOrThunk(o.minHeight)})},getRawHeights:function(e,n){return h(e,n,c,p)}}}),a("ephox.snooker.resize.Recalculations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","global!parseInt"],function(e,n,t){var r=function(e,n,t){for(var r=0,o=e;o<n;o++)r+=t[o]!==undefined?t[o]:0;return r};return{recalculateWidth:function(o,a){var i=t.justCells(o);return e.map(i,function(e){var t=r(e.column(),e.column()+e.colspan(),a);return{element:e.element,width:n.constant(t),colspan:e.colspan}})},recalculateHeight:function(o,a){var i=t.justCells(o);return e.map(i,function(e){var t=r(e.row(),e.row()+e.rowspan(),a);return{element:e.element,height:n.constant(t),rowspan:e.rowspan}})},matchRowHeight:function(t,r){return e.map(t.all(),function(e,t){return{element:e.element,height:n.constant(r[t])}})}}}),a("ephox.snooker.resize.TableSize",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Sizes","ephox.snooker.util.CellUtils","ephox.sugar.api.view.Width","global!Math"],function(e,n,t,r,o,a,i){var u=function(e,i){var u=parseFloat(e,10),s=a.get(i),c=function(e){return e/s*100},l=function(e){return[100-e]},p=function(){return o.minWidth()/s*100},f=function(e,n,t){var o=u+t;r.setPercentageWidth(e,o)};return{width:n.constant(u),pixelWidth:n.constant(s),getWidths:t.getPercentageWidths,getCellDelta:c,singleColumnWidth:l,minCellWidth:p,setElementWidth:r.setPercentageWidth,setTableWidth:f}},s=function(a){var u=parseInt(a,10),s=n.identity,c=function(e){return[i.max(min,e+step)-e]},l=function(n,t){var o=e.foldr(t,function(e,n){return e+n},0);r.setPixelWidth(n,o)};return{width:n.constant(u),pixelWidth:n.constant(u),getWidths:t.getPixelWidths,getCellDelta:s,singleColumnWidth:c,minCellWidth:o.minWidth,setElementWidth:r.setPixelWidth,setTableWidth:l}},c=function(e,n){if(r.percentageBasedSizeRegex().test(n)){var t=r.percentageBasedSizeRegex().exec(n);return u(t[1],e)}if(r.pixelBasedSizeRegex().test(n)){var o=r.pixelBasedSizeRegex().exec(n);return s(o[1])}var i=a.get(e);return s(i)};return{getTableSize:function(e){return r.getRawWidth(e).fold(function(){var n=a.get(e);return s(n)},function(n){return c(e,n)})}}}),a("ephox.snooker.resize.Adjustments",["ephox.katamari.api.Arr","ephox.snooker.calc.Deltas","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.ColumnSizes","ephox.snooker.resize.Recalculations","ephox.snooker.resize.Sizes","ephox.snooker.resize.TableSize","ephox.snooker.util.CellUtils","global!Math"],function(e,n,t,r,o,a,i,u,s,c){var l=function(e){return r.generate(e)},p=function(n){return e.foldr(n,function(e,n){return e+n},0)},f=function(e){var n=t.fromTable(e);return l(n)};return{adjustWidth:function(t,r,o,i){var s=u.getTableSize(t),c=s.getCellDelta(r),l=f(t),p=s.getWidths(l,i,s),d=n.determine(p,o,c,s),m=e.map(d,function(e,n){return e+p[n]}),h=a.recalculateWidth(l,m);e.each(h,function(e){s.setElementWidth(e.element(),e.width())}),o===l.grid().columns()-1&&s.setTableWidth(t,m,c)},adjustHeight:function(n,t,r,u){var l=f(n),d=o.getPixelHeights(l,u),m=e.map(d,function(e,n){return r===n?c.max(t+e,s.minHeight()):e}),h=a.recalculateHeight(l,m),g=a.matchRowHeight(l,m);e.each(g,function(e){i.setHeight(e.element(),e.height())}),e.each(h,function(e){i.setHeight(e.element(),e.height())});var x=p(m);i.setHeight(n,x)},adjustWidthTo:function(n,t,r){var o=u.getTableSize(n),i=l(t),s=o.getWidths(i,r,o),c=a.recalculateWidth(i,s);e.each(c,function(e){o.setElementWidth(e.element(),e.width())});var p=e.foldr(s,function(e,n){return n+e},0);c.length>0&&o.setElementWidth(n,p)}}}),a("ephox.katamari.api.Contracts",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.katamari.api.Type","ephox.katamari.util.BagUtils","global!Error"],function(e,n,t,r,o,a){var i=function(e,n){return u(e,n,{validate:r.isFunction,label:"function"})},u=function(n,r,i){if(0===r.length)throw new a("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(a){var u=t.keys(a);e.forall(r,function(n){return e.contains(u,n)})||o.reqMessage(r,u),n(r,u);var s=e.filter(r,function(e){return!i.validate(a[e],e)});return s.length>0&&o.invalidTypeMessage(s,i.label),a}},s=function(n,t){var r=e.filter(t,function(t){return!e.contains(n,t)});r.length>0&&o.unsuppMessage(r)},c=n.noop;return{exactly:n.curry(i,s),ensure:n.curry(i,c),ensureWith:n.curry(u,c)}}),a("ephox.dragster.api.DragApis",["ephox.katamari.api.Contracts"],function(e){return{mode:e.exactly(["compare","extract","mutate","sink"]),sink:e.exactly(["element","start","stop","destroy"]),api:e.exactly(["forceDrop","drop","move","delayDrop"])}}),a("ephox.katamari.api.Namespace",[],function(){return{css:function(e){var n=e.replace(/\./g,"-");return{resolve:function(e){return n+"-"+e}}}}}),a("ephox.dragster.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-dragster").resolve}}),a("ephox.katamari.api.Merger",["ephox.katamari.api.Type","global!Array","global!Error"],function(e,n,t){var r=function(e,n){return n},o=function(n,t){return e.isObject(n)&&e.isObject(t)?i(n,t):t},a=function(e){return function(){for(var r=new n(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new t("Can't merge zero objects");for(var a={},i=0;i<r.length;i++){var u=r[i];for(var s in u)u.hasOwnProperty(s)&&(a[s]=e(a[s],u[s]))}return a}},i=a(o),u=a(r);return{deepMerge:i,merge:u}}),a("ephox.sugar.api.properties.Toggler",[],function(){return function(e,n,t){var r=t||!1,o=function(){n(),r=!0},a=function(){e(),r=!1};return{on:o,off:a,toggle:function(){(r?a:o)()},isOn:function(){return r}}}}),a("ephox.sugar.api.properties.AttrList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr"],function(e,n){var t=function(e,t){var r=n.get(e,t);return r===undefined||""===r?[]:r.split(" ")};return{read:t,add:function(e,r,o){var a=t(e,r),i=a.concat([o]);n.set(e,r,i.join(" "))},remove:function(r,o,a){var i=e.filter(t(r,o),function(e){return e!==a});i.length>0?n.set(r,o,i.join(" ")):n.remove(r,o)}}}),a("ephox.sugar.impl.ClassList",["ephox.katamari.api.Arr","ephox.sugar.api.properties.AttrList"],function(e,n){var t=function(e){return e.dom().classList!==undefined},r=function(e){return n.read(e,"class")},o=function(e,t){return n.add(e,"class",t)},a=function(e,t){return n.remove(e,"class",t)};return{get:r,add:o,remove:a,toggle:function(n,t){e.contains(r(n),t)?a(n,t):o(n,t)},supports:t}}),a("ephox.sugar.api.properties.Class",["ephox.sugar.api.properties.Toggler","ephox.sugar.api.properties.Attr","ephox.sugar.impl.ClassList"],function(e,n,t){var r=function(e,n){t.supports(e)?e.dom().classList.add(n):t.add(e,n)},o=function(e){0===(t.supports(e)?e.dom().classList:t.get(e)).length&&n.remove(e,"class")},a=function(e,n){if(t.supports(e)){e.dom().classList.remove(n)}else t.remove(e,n);o(e)},i=function(e,n){return t.supports(e)?e.dom().classList.toggle(n):t.toggle(e,n)},u=function(n,r){var o=t.supports(n),a=n.dom().classList;return e(function(){o?a.remove(r):t.remove(n,r)},function(){o?a.add(r):t.add(n,r)},s(n,r))},s=function(e,n){return t.supports(e)&&e.dom().classList.contains(n)};return{add:r,remove:a,toggle:i,toggler:u,has:s}}),a("ephox.sugar.api.dom.Insert",["ephox.sugar.api.search.Traverse"],function(e){var n=function(n,t){e.parent(n).each(function(e){e.dom().insertBefore(t.dom(),n.dom())})},t=function(t,r){e.nextSibling(t).fold(function(){e.parent(t).each(function(e){o(e,r)})},function(e){n(e,r)})},r=function(n,t){e.firstChild(n).fold(function(){o(n,t)},function(e){n.dom().insertBefore(t.dom(),e.dom())})},o=function(e,n){e.dom().appendChild(n.dom())};return{before:n,after:t,prepend:r,append:o,appendAt:function(t,r,a){e.child(t,a).fold(function(){o(t,r)},function(e){n(e,r)})},wrap:function(e,t){n(e,t),o(t,e)}}}),a("ephox.sugar.api.dom.InsertAll",["ephox.katamari.api.Arr","ephox.sugar.api.dom.Insert"],function(e,n){return{before:function(t,r){e.each(r,function(e){n.before(t,e)})},after:function(t,r){e.each(r,function(e,o){var a=0===o?t:r[o-1];n.after(a,e)})},prepend:function(t,r){e.each(r.slice().reverse(),function(e){n.prepend(t,e)})},append:function(t,r){e.each(r,function(e){n.append(t,e)})}}}),a("ephox.sugar.api.dom.Remove",["ephox.katamari.api.Arr","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.search.Traverse"],function(e,n,t){var r=function(n){n.dom().textContent="",e.each(t.children(n),function(e){o(e)})},o=function(e){var n=e.dom();null!==n.parentNode&&n.parentNode.removeChild(n)};return{empty:r,remove:o,unwrap:function(e){var r=t.children(e);r.length>0&&n.before(e,r),o(e)}}}),a("ephox.dragster.detect.Blocker",["ephox.dragster.style.Styles","ephox.katamari.api.Merger","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Remove"],function(e,n,t,r,o,a){return function(i){var u=n.merge({layerClass:e.resolve("blocker")},i),s=o.fromTag("div");return r.setAll(s,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),t.add(s,e.resolve("blocker")),t.add(s,u.layerClass),{element:function(){return s},destroy:function(){a.remove(s)}}}}),a("ephox.sugar.impl.FilteredEvent",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element"],function(e,n){var t=function(n,t,r,o,a,i,u){return{target:e.constant(n),x:e.constant(t),y:e.constant(r),stop:o,prevent:a,kill:i,raw:e.constant(u)}},r=function(r,o){return function(a){if(r(a)){var i=n.fromDom(a.target),u=function(){a.stopPropagation()},s=function(){a.preventDefault()},c=e.compose(s,u),l=t(i,a.clientX,a.clientY,u,s,c,a);o(l)}}},o=function(n,t,o,i,u){var s=r(o,i);return n.dom().addEventListener(t,s,u),{unbind:e.curry(a,n,t,s,u)}},a=function(e,n,t,r){e.dom().removeEventListener(n,t,r)};return{bind:function(e,n,t,r){return o(e,n,t,r,!1)},capture:function(e,n,t,r){return o(e,n,t,r,!0)}}}),a("ephox.sugar.api.events.DomEvent",["ephox.katamari.api.Fun","ephox.sugar.impl.FilteredEvent"],function(e,n){var t=e.constant(!0);return{bind:function(e,r,o){return n.bind(e,r,t,o)},capture:function(e,r,o){return n.capture(e,r,t,o)}}}),a("ephox.dragster.api.MouseDrag",["ephox.dragster.api.DragApis","ephox.dragster.detect.Blocker","ephox.katamari.api.Option","ephox.sugar.api.view.Position","ephox.sugar.api.events.DomEvent","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove"],function(e,n,t,r,o,a,i){var u=function(e,n){return r(n.left()-e.left(),n.top()-e.top())},s=function(e){return t.some(r(e.x(),e.y()))},c=function(e,n){e.mutate(n.left(),n.top())},l=function(t,r){var u=n(r),s=o.bind(u.element(),"mousedown",t.forceDrop),c=o.bind(u.element(),"mouseup",t.drop),l=o.bind(u.element(),"mousemove",t.move),p=o.bind(u.element(),"mouseout",t.delayDrop),f=function(){u.destroy(),c.unbind(),l.unbind(),p.unbind(),s.unbind()},d=function(e){a.append(e,u.element())},m=function(){i.remove(u.element())};return e.sink({element:u.element,start:d,stop:m,destroy:f})};return e.mode({compare:u,extract:s,sink:l,mutate:c})}),a("ephox.dragster.detect.InDrag",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events"],function(e,n,t){return function(){var r=e.none(),o=function(){r=e.none()},a=function(n,t){var o=r.map(function(e){return n.compare(e,t)});return r=e.some(t),o},i=function(e,n){n.extract(e).each(function(e){a(n,e).each(function(e){u.trigger.move(e)})})},u=t.create({move:n(["info"])});return{onEvent:i,reset:o,events:u.registry}}}),a("ephox.dragster.detect.NoDrag",["ephox.katamari.api.Fun"],function(e){return function(){return{onEvent:function(){},reset:e.noop}}}),a("ephox.dragster.detect.Movement",["ephox.dragster.detect.InDrag","ephox.dragster.detect.NoDrag"],function(e,n){return function(){var t=n(),r=e(),o=t,a=function(){o.reset(),o=r},i=function(){o.reset(),o=t},u=function(e,n){o.onEvent(e,n)};return{on:a,off:i,isOn:function(){return o===r},onEvent:u,events:r.events}}}),i("global!clearTimeout",clearTimeout),i("global!setTimeout",setTimeout),a("ephox.katamari.api.Throttler",["global!clearTimeout","global!setTimeout"],function(e,n){return{adaptable:function(t,r){var o=null,a=null;return{cancel:function(){null!==o&&(e(o),o=null,a=null)},throttle:function(){a=arguments,null===o&&(o=n(function(){t.apply(null,a),o=null,a=null},r))}}},first:function(t,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var e=arguments;null===o&&(o=n(function(){t.apply(null,e),o=null,e=null},r))}}},last:function(t,r){var o=null;return{cancel:function(){null!==o&&(e(o),o=null)},throttle:function(){var a=arguments;null!==o&&e(o),o=n(function(){t.apply(null,a),o=null,a=null},r)}}}}}),a("ephox.dragster.core.Dragging",["ephox.dragster.api.DragApis","ephox.dragster.detect.Movement","ephox.katamari.api.Throttler","ephox.porkbun.Event","ephox.porkbun.Events","global!Array"],function(e,n,t,r,o,a){return{setup:function(i,u,s){var c=!1,l=o.create({start:r([]),stop:r([])}),p=n(),f=function(){b.stop(),p.isOn()&&(p.off(),l.trigger.stop())},d=t.last(f,200),m=function(e){b.start(e),p.on(),l.trigger.start()},h=function(e){d.cancel(),p.onEvent(e,u)};p.events.move.bind(function(e){u.mutate(i,e.info())});var g=function(){c=!0},x=function(){c=!1},v=function(e){return function(){var n=a.prototype.slice.call(arguments,0);if(c)return e.apply(null,n)}},b=u.sink(e.api({forceDrop:f,drop:v(f),move:v(h),delayDrop:v(d.throttle)}),s),w=function(){b.destroy()};return{element:b.element,go:m,on:g,off:x,destroy:w,events:l.registry}}}}),a("ephox.dragster.api.Dragger",["ephox.dragster.api.MouseDrag","ephox.dragster.core.Dragging","global!Array"],function(e,n){return{transform:function(t,r){var o=r!==undefined?r:{},a=o.mode!==undefined?o.mode:e;return n.setup(t,a,r)}}}),a("ephox.snooker.resize.Mutation",["ephox.porkbun.Event","ephox.porkbun.Events"],function(e,n){return function(){var t=n.create({drag:e(["xDelta","yDelta"])});return{mutate:function(e,n){t.trigger.drag(e,n)},events:t.registry}}}),a("ephox.snooker.resize.BarMutation",["ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Mutation"],function(e,n,t,r){return function(){var o=t.create({drag:n(["xDelta","yDelta","target"])}),a=e.none(),i=r();return i.events.drag.bind(function(e){a.each(function(n){o.trigger.drag(e.xDelta(),e.yDelta(),n)})}),{assign:function(n){a=e.some(n)},get:function(){return a},mutate:i.mutate,events:o.registry}}}),a("ephox.snooker.resize.Bar",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element"],function(e,n,t){return{col:function(r,o,a,i,u){var s=t.fromTag("div");return n.setAll(s,{position:"absolute",left:o-i/2+"px",top:a+"px",height:u+"px",width:i+"px"}),e.set(s,"data-column",r),s},row:function(r,o,a,i,u){var s=t.fromTag("div");return n.setAll(s,{position:"absolute",left:o+"px",top:a-u/2+"px",height:u+"px",width:i+"px"}),e.set(s,"data-row",r),s}}}),a("ephox.snooker.style.Styles",["ephox.katamari.api.Namespace"],function(e){return{resolve:e.css("ephox-snooker").resolve}}),a("ephox.snooker.resize.Bars",["ephox.katamari.api.Arr","ephox.snooker.lookup.Blocks","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.resize.Bar","ephox.snooker.style.Styles","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.view.Height","ephox.sugar.api.view.Location","ephox.sugar.api.view.Width"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d){var m=a.resolve("resizer-bar"),h=a.resolve("resizer-rows"),g=a.resolve("resizer-cols"),x=7,v=function(n){var t=l.descendants(n.parent(),"."+m);e.each(t,u.remove)},b=function(n,t,r){var o=n.origin();e.each(t,function(e){e.each(function(e){var t=r(o,e);s.add(t,m),i.append(n.parent(),t)})})},w=function(e,n,t,r){b(e,n,function(e,n){var a=o.col(n.col(),n.x()-e.left(),t.top()-e.top(),x,r);return s.add(a,g),a})},k=function(e,n,t,r){b(e,n,function(e,n){var a=o.row(n.row(),t.left()-e.left(),n.y()-e.top(),r,x);return s.add(a,h),a})},y=function(e,n,t,r,o,a){var i=f.absolute(n),u=t.length>0?o.positions(t,n):[];k(e,u,i,d.getOuter(n));var s=r.length>0?a.positions(r,n):[];w(e,s,i,p.getOuter(n))},C=function(e,o,a,i){v(e,o);var u=t.fromTable(o),s=r.generate(u),c=n.rows(s),l=n.columns(s);y(e,o,c,l,a,i)},S=function(n,t){var r=l.descendants(n.parent(),"."+m);e.each(r,t)};return{refresh:C,hide:function(e){S(e,function(e){c.set(e,"display","none")})},show:function(e){S(e,function(e){c.set(e,"display","block")})},destroy:v,isRowBar:function(e){return s.has(e,h)},isColBar:function(e){return s.has(e,g)}}}),a("ephox.sugar.api.search.SelectorExists",["ephox.sugar.api.search.SelectorFind"],function(e){return{any:function(n){return e.first(n).isSome()},ancestor:function(n,t,r){return e.ancestor(n,t,r).isSome()},sibling:function(n,t){return e.sibling(n,t).isSome()},child:function(n,t){return e.child(n,t).isSome()},descendant:function(n,t){return e.descendant(n,t).isSome()},closest:function(n,t,r){return e.closest(n,t,r).isSome()}}}),a("ephox.snooker.resize.BarManager",["ephox.dragster.api.Dragger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.BarMutation","ephox.snooker.resize.Bars","ephox.snooker.style.Styles","ephox.snooker.util.CellUtils","ephox.sugar.api.dom.Compare","ephox.sugar.api.events.DomEvent","ephox.sugar.api.node.Body","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorExists","ephox.sugar.api.search.SelectorFind","global!parseInt"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x,v){var b=u.resolve("resizer-bar-dragging");return function(u,w,k){var y=a(),C=e.transform(y,{}),S=t.none(),T=function(e,n){return t.from(d.get(e,n))};y.events.drag.bind(function(e){T(e.target(),"data-row").each(function(){var n=s.getInt(e.target(),"top");h.set(e.target(),"top",n+e.yDelta()+"px")}),T(e.target(),"data-column").each(function(){var n=s.getInt(e.target(),"left");h.set(e.target(),"left",n+e.xDelta()+"px")})});var R=function(e,n){return s.getInt(e,n)-v(d.get(e,"data-initial-"+n),10)};C.events.stop.bind(function(){y.get().each(function(e){S.each(function(n){T(e,"data-row").each(function(t){var r=R(e,"top");d.remove(e,"data-initial-top"),F.trigger.adjustHeight(n,r,v(t,10))}),T(e,"data-column").each(function(t){var r=R(e,"left");d.remove(e,"data-initial-left"),F.trigger.adjustWidth(n,r,v(t,10))}),i.refresh(u,n,k,w)})})});var A=function(e,n){F.trigger.startAdjust(),y.assign(e),d.set(e,"data-initial-"+n,v(h.get(e,n),10)),
m.add(e,b),h.set(e,"opacity","0.2"),C.go(u.parent())},O=l.bind(u.parent(),"mousedown",function(e){i.isRowBar(e.target())&&A(e.target(),"top"),i.isColBar(e.target())&&A(e.target(),"left")}),D=function(e){return c.eq(e,u.view())},E=l.bind(u.view(),"mouseover",function(e){"table"===f.name(e.target())||g.ancestor(e.target(),"table",D)?(S="table"===f.name(e.target())?t.some(e.target()):x.ancestor(e.target(),"table",D),S.each(function(e){i.refresh(u,e,k,w)})):p.inBody(e.target())&&i.destroy(u)}),N=function(){O.unbind(),E.unbind(),B.unbind(),C.destroy(),i.destroy(u)},B=l.bind(u.view(),"dragstart",function(e){e.raw().preventDefault()}),P=function(e){i.refresh(u,e,k,w)},F=o.create({adjustHeight:r(["table","delta","row"]),adjustWidth:r(["table","delta","column"]),startAdjust:r([])});return{destroy:N,refresh:P,on:C.on,off:C.off,hideBars:n.curry(i.hide,u),showBars:n.curry(i.show,u),events:F.registry}}}),a("ephox.snooker.api.TableResize",["ephox.porkbun.Event","ephox.porkbun.Events","ephox.snooker.resize.Adjustments","ephox.snooker.resize.BarManager","ephox.snooker.resize.BarPositions"],function(e,n,t,r,o){return function(a,i){var u=o.height,s=r(a,i,u),c=n.create({beforeResize:e(["table"]),afterResize:e(["table"]),startDrag:e([])});return s.events.adjustHeight.bind(function(e){c.trigger.beforeResize(e.table());var n=u.delta(e.delta(),e.table());t.adjustHeight(e.table(),n,e.row(),u),c.trigger.afterResize(e.table())}),s.events.startAdjust.bind(function(){c.trigger.startDrag()}),s.events.adjustWidth.bind(function(e){c.trigger.beforeResize(e.table());var n=i.delta(e.delta(),e.table());t.adjustWidth(e.table(),n,e.column(),i),c.trigger.afterResize(e.table())}),{on:s.on,off:s.off,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:c.registry}}}),i("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("ephox.snooker.api.CopySelected",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Struct","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.util.LayerSelector","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Selectors"],function(e,n,t,r,o,a,i,u,s,c,l,p){var f=t.immutable("minRow","minCol","maxRow","maxCol"),d=function(e,t){var r=e.grid().columns(),o=e.grid().rows(),a=o,i=r,u=0,s=0;return n.each(e.access(),function(e){if(t(e)){var n=e.row(),r=n+e.rowspan()-1,o=e.column(),c=o+e.colspan()-1;n<a?a=n:r>u&&(u=r),o<i?i=o:c>s&&(s=c)}}),f(a,i,u,s)},m=function(e,n,t){var r=e[t].element(),o=s.fromTag("td");c.append(o,s.fromTag("br")),(n?c.append:c.prepend)(r,o)},h=function(e,n,t,r){for(var a=n.grid().columns(),i=n.grid().rows(),u=0;u<i;u++)for(var s=!1,c=0;c<a;c++)if(!(u<t.minRow()||u>t.maxRow()||c<t.minCol()||c>t.maxCol())){var l=o.getAt(n,u,c).filter(r).isNone();l?m(e,s,u):s=!0}},g=function(n,t){var r=e.filter(a.firstLayer(n,"tr"),function(e){return 0===e.dom().childElementCount});e.each(r,l.remove),t.minCol()!==t.maxCol()&&t.minRow()!==t.maxRow()||e.each(a.firstLayer(n,"th,td"),function(e){i.remove(e,"rowspan"),i.remove(e,"colspan")}),i.remove(n,"width"),i.remove(n,"height"),u.remove(n,"width"),u.remove(n,"height")};return{extract:function(n,t){var i=function(e){return p.is(e.element(),t)},u=r.fromTable(n),s=o.generate(u),c=d(s,i),f="th:not("+t+"),td:not("+t+")",m=a.filterFirstLayer(n,"th,td",function(e){return p.is(e,f)});return e.each(m,l.remove),h(u,s,c,i),g(n,c),n}}}),a("ephox.sugar.api.dom.Replication",["ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a){var i=function(e,t){return n.fromDom(e.dom().cloneNode(t))},u=function(e){return i(e,!1)},s=function(e){return i(e,!0)},c=function(t,r){var o=n.fromTag(r),a=e.clone(t);return e.setAll(o,a),o};return{shallow:u,shallowAs:c,deep:s,copy:function(e,n){var t=c(e,n),o=a.children(s(e));return r.append(t,o),t},mutate:function(e,n){var i=c(e,n);t.before(e,i);var u=a.children(e);return r.append(i,u),o.remove(e),i}}}),a("ephox.sugar.impl.NodeValue",["ephox.sand.api.PlatformDetection","ephox.katamari.api.Option","global!Error"],function(e,n,t){return function(r,o){var a=function(e){if(!r(e))throw new t("Can only get "+o+" value of a "+o+" node");return c(e).getOr("")},i=function(e){try{return u(e)}catch(e){return n.none()}},u=function(e){return r(e)?n.from(e.dom().nodeValue):n.none()},s=e.detect().browser,c=s.isIE()&&10===s.version.major?i:u;return{get:a,getOption:c,set:function(e,n){if(!r(e))throw new t("Can only set raw "+o+" value of a "+o+" node");e.dom().nodeValue=n}}}}),a("ephox.sugar.api.node.Text",["ephox.sugar.api.node.Node","ephox.sugar.impl.NodeValue"],function(e,n){var t=n(e.isText,"text");return{get:function(e){return t.get(e)},getOption:function(e){return t.getOption(e)},set:function(e,n){t.set(e,n)}}}),a("ephox.sugar.api.selection.Awareness",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,n,t,r){var o=function(e){return"img"===n.name(e)?1:t.getOption(e).fold(function(){return r.children(e).length},function(e){return e.length})},a="\xa0",i=function(e){return t.getOption(e).filter(function(e){return 0!==e.trim().length||e.indexOf(a)>-1}).isSome()},u=["img","br"];return{getEnd:o,isEnd:function(e,n){return o(e)===n},isStart:function(e,n){return 0===n},isCursorPosition:function(t){return i(t)||e.contains(u,n.name(t))}}}),a("ephox.sugar.api.selection.CursorPosition",["ephox.katamari.api.Option","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness"],function(e,n,t,r){var o=function(n,r){var o=function(n){for(var a=t.children(n),i=a.length-1;i>=0;i--){var u=a[i];if(r(u))return e.some(u);var s=o(u);if(s.isSome())return s}return e.none()};return o(n)};return{first:function(e){return n.descendant(e,r.isCursorPosition)},last:function(e){return o(e,r.isCursorPosition)}}}),a("ephox.snooker.api.TableFill",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,n,t,r,o,a,i,u,s,c,l,p){var f=function(){var e=a.fromTag("td");return r.append(e,a.fromTag("br")),e},d=function(e,t,r){var a=o.copy(e,t);return n.each(r,function(e,n){null===e?u.remove(a,n):u.set(a,n,e)}),a},m=function(e){return e},h=function(e){return function(){return a.fromTag("tr",e.dom())}},g=function(n,a,i){return p.first(n).map(function(u){var s=i.join(","),l=c.ancestors(u,s,function(e){return t.eq(e,n)});return e.foldr(l,function(e,n){var t=o.shallow(n);return r.append(e,t),t},a)}).getOr(a)};return{cellOperations:function(e,n,t){var o=function(n){var o=l.owner(n.element()),u=a.fromTag(i.name(n.element()),o.dom()),c=t.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),p=c.length>0?g(n.element(),u,c):u;return r.append(p,a.fromTag("br")),s.copy(n.element(),u),s.remove(u,"height"),1!==n.colspan()&&s.remove(n.element(),"width"),e(n.element(),u),u};return{row:h(n),cell:o,replace:d,gap:f}},paste:function(e){return{row:h(e),cell:f,replace:m,gap:f}}}}),a("ephox.sugar.api.node.Elements",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","global!document"],function(e,n,t,r){return{fromHtml:function(e,o){var a=o||r,i=a.createElement("div");return i.innerHTML=e,t.children(n.fromDom(i))},fromTags:function(t,r){return e.map(t,function(e){return n.fromTag(e,r)})},fromText:function(t,r){return e.map(t,function(e){return n.fromText(e,r)})},fromDom:function(t){return e.map(t,n.fromDom)}}}),a("ephox.sugar.api.properties.Html",["ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a){var i=function(e){return e.dom().innerHTML};return{get:i,set:function(i,u){var s=a.owner(i),c=s.dom(),l=e.fromDom(c.createDocumentFragment()),p=n.fromHtml(u,c);r.append(l,p),o.empty(i),t.append(i,l)},getOuter:function(n){var r=e.fromTag("div"),o=e.fromDom(n.dom().cloneNode(!0));return t.append(r,o),i(r)}}}),a("ephox.boss.common.TagBoundaries",[],function(){return["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"]}),a("ephox.boss.api.DomUniverse",["ephox.boss.common.TagBoundaries","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.dom.Compare","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.node.Node","ephox.sugar.api.search.PredicateFilter","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.dom.Remove","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.node.Text","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d,m,h,g){return function(){var x=function(e){return i.fromDom(e.dom().cloneNode(!1))},v=function(t){return!!c.isElement(t)&&("body"===c.name(t)||n.contains(e,c.name(t)))},b=function(e){return!!c.isElement(e)&&n.contains(["br","img","hr","input"],c.name(e))},w=function(e,n){return e.dom().compareDocumentPosition(n.dom())},k=function(e,n){var t=r.clone(e);r.setAll(n,t)};return{up:t.constant({selector:m.ancestor,closest:m.closest,predicate:p.ancestor,all:g.parents}),down:t.constant({selector:d.descendants,predicate:l.descendants}),styles:t.constant({get:a.get,getRaw:a.getRaw,set:a.set,remove:a.remove}),attrs:t.constant({get:r.get,set:r.set,remove:r.remove,copyTo:k}),insert:t.constant({before:u.before,after:u.after,afterAll:s.after,append:u.append,appendAll:s.append,prepend:u.prepend,wrap:u.wrap}),remove:t.constant({unwrap:f.unwrap,remove:f.remove}),create:t.constant({nu:i.fromTag,clone:x,text:i.fromText}),query:t.constant({comparePosition:w,prevSibling:g.prevSibling,nextSibling:g.nextSibling}),property:t.constant({children:g.children,name:c.name,parent:g.parent,isText:c.isText,isComment:c.isComment,isElement:c.isElement,getText:h.get,setText:h.set,isBoundary:v,isEmptyTag:b}),eq:o.eq,is:o.is}}}),a("ephox.robin.parent.Breaker",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,n,t,r){var o=r.immutable("left","right"),a=function(t,r,o){var a=t.property().children(r);return e.findIndex(a,n.curry(t.eq,o)).map(function(e){return{before:n.constant(a.slice(0,e)),after:n.constant(a.slice(e+1))}})},i=function(e,n,t){return a(e,n,t).map(function(t){var r=e.create().clone(n);return e.insert().appendAll(r,t.after()),e.insert().after(n,r),o(n,r)})};return{breakToLeft:function(e,n,t){return a(e,n,t).map(function(r){var a=e.create().clone(n);return e.insert().appendAll(a,r.before().concat([t])),e.insert().appendAll(n,r.after()),e.insert().before(n,a),o(a,n)})},breakToRight:i,breakPath:function(e,n,o,a){var i=r.immutable("first","second","splits"),u=function(n,r,s){var c=i(n,t.none(),s);return o(n)?i(n,r,s):e.property().parent(n).bind(function(r){return a(e,r,n).map(function(e){var n=[{first:e.left,second:e.right}],a=o(r)?r:e.left();return u(a,t.some(e.right()),s.concat(n))}).getOr(c)})};return u(n,t.none(),[])}}}),a("ephox.robin.parent.Shared",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,n,t){var r=function(e,n,t,r){return r(e,n,t[0],t.slice(1))},o=function(n,t,r,o){var i=t(n,r);return e.foldr(o,function(e,r){var o=t(n,r);return a(n,e,o)},i)},a=function(e,t,r){return t.bind(function(t){return r.filter(n.curry(e.eq,t))})};return{oneAll:function(e,n,a){return a.length>0?r(e,n,a,o):t.none()}}}),a("ephox.robin.parent.Subset",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","global!Math"],function(e,n,t,r){var o=function(e,t){return n.curry(e.eq,t)},a=function(n,a,i,u){var s=n.property().children(a);if(n.eq(a,i[0]))return t.some([i[0]]);if(n.eq(a,u[0]))return t.some([u[0]]);var c=function(t){var r=e.reverse(t),i=e.findIndex(r,o(n,a)).getOr(-1),u=i<r.length-1?r[i+1]:r[i];return e.findIndex(s,o(n,u))},l=c(i),p=c(u);return l.bind(function(e){return p.map(function(n){var t=r.min(e,n),o=r.max(e,n);return s.slice(t,o+1)})})},i=function(t,r,a,i){var u=i!==undefined?i:n.constant(!1),s=[r].concat(t.up().all(r)),c=[a].concat(t.up().all(a)),l=function(n){return e.findIndex(n,u).fold(function(){return n},function(e){return n.slice(0,e+1)})},p=l(s),f=l(c),d=e.find(p,function(n){return e.exists(f,o(t,n))});return{firstpath:n.constant(p),secondpath:n.constant(f),shared:n.constant(d)}};return{subset:function(e,n,t){var r=i(e,n,t);return r.shared().bind(function(n){return a(e,n,r.firstpath(),r.secondpath())})},ancestors:i}}),a("ephox.robin.api.general.Parent",["ephox.robin.parent.Breaker","ephox.robin.parent.Shared","ephox.robin.parent.Subset"],function(e,n,t){return{sharedOne:function(e,t,r){return n.oneAll(e,t,r)},subset:function(e,n,r){return t.subset(e,n,r)},ancestors:function(e,n,r,o){return t.ancestors(e,n,r,o)},breakToLeft:function(n,t,r){return e.breakToLeft(n,t,r)},breakToRight:function(n,t,r){return e.breakToRight(n,t,r)},breakPath:function(n,t,r,o){return e.breakPath(n,t,r,o)}}}),a("ephox.robin.api.dom.DomParent",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Parent"],function(e,n){var t=e();return{sharedOne:function(e,r){return n.sharedOne(t,function(n,t){return e(t)},r)},subset:function(e,r){return n.subset(t,e,r)},ancestors:function(e,r,o){return n.ancestors(t,e,r,o)},breakToLeft:function(e,r){return n.breakToLeft(t,e,r)},breakToRight:function(e,r){return n.breakToRight(t,e,r)},breakPath:function(e,r,o){return n.breakPath(t,e,r,function(e,n,t){return o(n,t)})}}}),a("ephox.snooker.selection.CellBounds",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.model.Warehouse"],function(e,n,t){var r=function(e,n){var t=n.column(),r=n.column()+n.colspan()-1,o=n.row(),a=n.row()+n.rowspan()-1;return t<=e.finishCol()&&r>=e.startCol()&&o<=e.finishRow()&&a>=e.startRow()},o=function(e,n){return n.column()>=e.startCol()&&n.column()+n.colspan()-1<=e.finishCol()&&n.row()>=e.startRow()&&n.row()+n.rowspan()-1<=e.finishRow()};return{inSelection:r,isWithin:o,isRectangular:function(r,a){for(var i=!0,u=e.curry(o,a),s=a.startRow();s<=a.finishRow();s++)for(var c=a.startCol();c<=a.finishCol();c++)i=i&&t.getAt(r,s,c).exists(u);return i?n.some(a):n.none()}}}),a("ephox.snooker.selection.CellGroup",["ephox.snooker.api.Structs","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.sugar.api.dom.Compare","global!Math"],function(e,n,t,r,o){var a=function(n,t){return e.bounds(o.min(n.row(),t.row()),o.min(n.column(),t.column()),o.max(n.row()+n.rowspan()-1,t.row()+t.rowspan()-1),o.max(n.column()+n.colspan()-1,t.column()+t.colspan()-1))},i=function(e,t,o){var i=n.findItem(e,t,r.eq),u=n.findItem(e,o,r.eq);return i.bind(function(e){return u.map(function(n){return a(e,n)})})};return{getAnyBox:i,getBox:function(e,n,r){return i(e,n,r).bind(function(n){return t.isRectangular(e,n)})}}}),a("ephox.snooker.selection.CellFinder",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellBounds","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,n,t,r,o,a){return{moveBy:function(e,n,r,o){return t.findItem(e,n,a.eq).bind(function(n){var a=r>0?n.row()+n.rowspan()-1:n.row(),i=o>0?n.column()+n.colspan()-1:n.column();return t.getAt(e,a+r,i+o).map(function(e){return e.element()})})},intercepts:function(a,i,u){return o.getAnyBox(a,i,u).map(function(o){var i=t.filterItems(a,n.curry(r.inSelection,o));return e.map(i,function(e){return e.element()})})},parentCell:function(e,n){var r=function(e,n){return a.contains(n,e)};return t.findItem(e,n,r).bind(function(e){return e.element()})}}}),a("ephox.snooker.api.TablePositions",["ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Warehouse","ephox.snooker.selection.CellFinder","ephox.snooker.selection.CellGroup","ephox.sugar.api.dom.Compare"],function(e,n,t,r,o,a){var i=function(n,t,o){return e.table(n).bind(function(e){var a=l(e);return r.moveBy(a,n,t,o)})},u=function(e,n,t){var o=l(e);return r.intercepts(o,n,t)},s=function(e,n,t,o,i){var u=l(e),s=a.eq(e,t)?n:r.parentCell(u,n),c=a.eq(e,i)?o:r.parentCell(u,o);return r.intercepts(u,s,c)},c=function(e,n,t){var r=l(e);return o.getBox(r,n,t)},l=function(e){var r=n.fromTable(e);return t.generate(r)};return{moveBy:i,intercepts:u,nestedIntercepts:s,getBox:c}}),a("ephox.darwin.selection.CellSelection",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.robin.api.dom.DomParent","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Selectors"],function(e,n,t,r,o,a,i,u,s){var c=function(e){return u.ancestor(e,"table")},l=function(e,n,i){return a.eq(e,n)?t.some([e]):c(e,i).bind(function(t){return c(n,i).bind(function(s){return a.eq(t,s)?o.intercepts(t,e,n):a.contains(t,s)?o.nestedIntercepts(t,e,t,n,s):a.contains(s,t)?o.nestedIntercepts(s,e,t,n,s):r.ancestors(e,n).shared().bind(function(r){return u.closest(r,"table",i).bind(function(r){return o.nestedIntercepts(r,e,t,n,s)})})})})},p=function(e,n){var r=i.descendants(e,n);return r.length>0?t.some(r):t.none()},f=function(n,t){return e.find(n,function(e){return s.is(e,t)})},d=function(e,t,o){return u.descendant(e,t).bind(function(t){return u.descendant(e,o).bind(function(e){return r.sharedOne(c,[t,e]).map(function(r){return{first:n.constant(t),last:n.constant(e),table:n.constant(r)}})})})},m=function(e,t){return u.ancestor(e,"table").bind(function(r){return u.descendant(r,t).bind(function(t){return l(t,e).map(function(r){return{boxes:n.constant(r),start:n.constant(t),finish:n.constant(e)}})})})};return{identify:l,retrieve:p,shiftSelection:function(e,n,t,r,a){return f(e,a).bind(function(e){return o.moveBy(e,n,t).bind(function(e){return m(e,r)})})},getEdges:d}}),a("ephox.darwin.api.TableSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.snooker.api.TablePositions","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,n,t,r,o){return{retrieve:function(n,t){return e.retrieve(n,t)},retrieveBox:function(a,i,u){return e.getEdges(a,i,u).bind(function(e){var i=function(e){return r.eq(a,e)},u=o.ancestor(e.first(),"thead,tfoot,tbody,table",i),s=o.ancestor(e.last(),"thead,tfoot,tbody,table",i);return u.bind(function(o){return s.bind(function(a){return r.eq(o,a)?t.getBox(e.table(),e.first(),e.last()):n.none()})})})}}}),a("tinymce.plugins.table.selection.Ephemera",["ephox.katamari.api.Fun"],function(e){var n="data-mce-selected",t="td["+n+"],th["+n+"]",r="["+n+"]",o="data-mce-first-selected",a="td["+o+"],th["+o+"]",i="data-mce-last-selected",u="td["+i+"],th["+i+"]";return{selected:e.constant(n),selectedSelector:e.constant(t),attributeSelector:e.constant(r),firstSelected:e.constant(o),firstSelectedSelector:e.constant(a),lastSelected:e.constant(i),lastSelectedSelector:e.constant(u)}}),a("ephox.katamari.api.Adt",["ephox.katamari.api.Arr","ephox.katamari.api.Obj","ephox.katamari.api.Type","global!Array","global!Error","global!console"],function(e,n,t,r,o,a){return{generate:function(i){if(!t.isArray(i))throw new o("cases must be an array");if(0===i.length)throw new o("there must be at least one case");var u=[],s={};return e.each(i,function(c,l){var p=n.keys(c);if(1!==p.length)throw new o("one and only one name per case");var f=p[0],d=c[f];if(s[f]!==undefined)throw new o("duplicate key detected:"+f);if("cata"===f)throw new o("cannot have a case named cata (sorry)");if(!t.isArray(d))throw new o("case arguments must be an array");u.push(f),s[f]=function(){var t=arguments.length;if(t!==d.length)throw new o("Wrong number of arguments to case "+f+". Expected "+d.length+" ("+d+"), got "+t);for(var s=new r(t),c=0;c<s.length;c++)s[c]=arguments[c];var p=function(t){var r=n.keys(t);if(u.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+r.join(","));if(!e.forall(u,function(n){return e.contains(r,n)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+u.join(", "));return t[f].apply(null,s)};return{fold:function(){if(arguments.length!==i.length)throw new o("Wrong number of arguments to fold. Expected "+i.length+", got "+arguments.length);return arguments[l].apply(null,s)},match:p,log:function(e){a.log(e,{constructors:u,constructor:f,params:s})}}}}),s}}}),a("tinymce.plugins.table.selection.SelectionTypes",["ephox.katamari.api.Adt"],function(e){var n=e.generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]);return{cata:function(e,n,t,r){return e.fold(n,t,r)},none:n.none,multiple:n.multiple,single:n.single}}),a("tinymce.plugins.table.queries.CellOperations",["ephox.darwin.api.TableSelection","ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.properties.Attr","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,n,t,r,o,a,i){var u=function(e,n){return i.cata(n.get(),t.constant([]),t.identity,t.constant([e]))},s=function(e,t){var a=function(e){return o.has(e,"rowspan")&&parseInt(o.get(e,"rowspan"),10)>1||o.has(e,"colspan")&&parseInt(o.get(e,"colspan"),10)>1},i=u(e,t);return i.length>0&&n.forall(i,a)?r.some(i):r.none()};return{mergable:function(n,o){return i.cata(o.get(),r.none,function(o){return 0===o.length?r.none():e.retrieveBox(n,a.firstSelectedSelector(),a.lastSelectedSelector()).bind(function(e){return o.length>1?r.some({bounds:t.constant(e),cells:t.constant(o)}):r.none()})},r.none)},unmergable:s,selection:u}}),a("tinymce.plugins.table.queries.TableTargets",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","tinymce.plugins.table.queries.CellOperations"],function(e,n,t,r){var o=function(t){return{element:e.constant(t),mergable:n.none,unmergable:n.none,selection:e.constant([t])}},a=function(n,t,o){return{element:e.constant(o),mergable:e.constant(r.mergable(t,n)),unmergable:e.constant(r.unmergable(o,n)),selection:e.constant(r.selection(o,n))}},i=function(e){return o(e)},u=t.immutable("element","clipboard","generators");return{noMenu:o,forMenu:a,notCell:i,paste:u,pasteRows:function(t,o,a,i,u){return{element:e.constant(a),mergable:n.none,unmergable:n.none,selection:e.constant(r.selection(a,t)),clipboard:e.constant(i),generators:e.constant(u)}}}}),a("tinymce.plugins.table.actions.Clipboard",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopySelected","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","ephox.sugar.api.node.Elements","ephox.sugar.api.node.Node","ephox.sugar.api.properties.Html","tinymce.plugins.table.queries.TableTargets","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d){var m=function(e){return a.table(e[0]).map(i.deep).map(function(e){return[r.extract(e,f.attributeSelector())]})};return{registerEvents:function(r,i,f,h){r.on("BeforeGetContent",function(t){var r=function(n){t.preventDefault(),m(n).each(function(n){t.content=e.map(n,l.getOuter).join("")})};!0===t.selection&&d.cata(i.get(),n.noop,r,n.noop)}),r.on("BeforeSetContent",function(n){if(!0===n.selection&&!0===n.paste){t.from(r.dom.getParent(r.selection.getStart(),"th,td")).each(function(t){var i=u.fromDom(t);a.table(i).bind(function(t){var a=e.filter(s.fromHtml(n.content),function(e){return"meta"!==c.name(e)});if(1===a.length&&"table"===c.name(a[0])){n.preventDefault();var l=u.fromDom(r.getDoc()),d=o.paste(l),m=p.paste(i,a[0],d);f.pasteCells(t,m).each(function(e){r.selection.setRng(e),r.focus(),h.clear(t)})}})})}})}}}),a("ephox.snooker.operate.Render",["ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll"],function(e,n,t,r,o){var a=function(){return t.fromTag("table")},i=function(){return t.fromTag("tbody")},u=function(){return t.fromTag("tr")},s=function(){return t.fromTag("th")},c=function(){return t.fromTag("td")};return{render:function(l,p,f,d){var m=a();n.setAll(m,{"border-collapse":"collapse",width:"100%"}),e.set(m,"border","1");var h=i();r.append(m,h);for(var g=[],x=0;x<l;x++){for(var v=u(),b=0;b<p;b++){var w=x<f||b<d?s():c();b<d&&e.set(w,"scope","row"),x<f&&e.set(w,"scope","col"),r.append(w,t.fromTag("br")),n.set(w,"width",100/p+"%"),r.append(v,w)}g.push(v)}return o.append(h,g),m}}}),a("ephox.snooker.api.TableRender",["ephox.snooker.operate.Render"],function(e){return{render:e.render}}),a("tinymce.plugins.table.actions.InsertTable",["ephox.snooker.api.TableRender","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Html"],function(e,n,t){return{insert:function(r,o,a){var i,u=e.render(a,o,0,0);n.set(u,"id","__mce");var s=t.getOuter(u);return r.insertContent(s),i=r.dom.get("__mce"),r.dom.setAttrib(i,"id",null),r.$("tr",i).each(function(e,n){r.fire("newrow",{node:n}),r.$("th,td",n).each(function(e,n){r.fire("newcell",{node:n})})}),r.dom.setAttribs(i,r.settings.table_default_attributes||{}),r.dom.setStyles(i,r.settings.table_default_styles||{}),i}}}),a("ephox.snooker.api.CellMutations",["ephox.snooker.resize.Sizes"],function(e){return{halve:function(n,t){e.getGenericWidth(n).each(function(r){var o=r.width()/2;e.setGenericWidth(n,o,r.unit()),e.setGenericWidth(t,o,r.unit())})}}}),a("ephox.katamari.api.Cell",[],function(){var e=function(n){var t=n,r=function(){return t};return{get:r,set:function(e){t=e},clone:function(){return e(r())}}};return e}),a("ephox.snooker.api.Generators",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Cell","ephox.katamari.api.Contracts","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Css","global!parseInt"],function(e,n,t,r,o,a,i,u){var s=function(e){var t=a.has(e,"colspan")?u(a.get(e,"colspan"),10):1,r=a.has(e,"rowspan")?u(a.get(e,"rowspan"),10):1;return{element:n.constant(e),colspan:n.constant(t),rowspan:n.constant(r)}},c=function(e,n){f(e);var o=r(t.none()),a=n!==undefined?n:s,i=function(n){return e.cell(n)},u=function(e){var n=a(e);return i(n)},c=function(e){var n=u(e);return o.get().isNone()&&o.set(t.some(n)),l=t.some({item:e,replacement:n}),n},l=t.none();return{getOrInit:function(e,n){return l.fold(function(){return c(e)},function(t){return n(e,t.item)?t.replacement:c(e)})},cursor:o.get}},l=function(n,o){return function(a){var i=r(t.none());f(a);var u=[],s=function(n,t){return e.find(u,function(e){return t(e.item,n)})},c=function(e){var r=a.replace(e,o,{scope:n});return u.push({item:e,sub:r}),i.get().isNone()&&i.set(t.some(r)),r};return{replaceOrInit:function(e,n){return s(e,n).fold(function(){return c(e)},function(t){return n(e,t.item)?t.sub:c(e)})},cursor:i.get}}},p=function(e){f(e);var o=r(t.none());return{combine:function(r){return o.get().isNone()&&o.set(t.some(r)),function(){var t=e.cell({element:n.constant(r),colspan:n.constant(1),rowspan:n.constant(1)});return i.remove(t,"width"),i.remove(r,"width"),t}},cursor:o.get}},f=o.exactly(["cell","row","replace","gap"]);return{modification:c,transform:l,merging:p}}),a("ephox.robin.api.general.Structure",["ephox.katamari.api.Arr"],function(e){var n=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],t=function(n,t){var r=n.property().name(t);return e.contains(["ol","ul"],r)},r=function(t,r){var o=t.property().name(r);return e.contains(n,o)},o=function(n,t){var r=n.property().name(t);return e.contains(["address","pre","p","h1","h2","h3","h4","h5","h6"],r)},a=function(n,t){var r=n.property().name(t);return e.contains(["h1","h2","h3","h4","h5","h6"],r)},i=function(n,t){return e.contains(["div","li","td","th","blockquote","body","caption"],n.property().name(t))},u=function(n,t){return e.contains(["br","img","hr","input"],n.property().name(t))};return{isBlock:r,isList:t,isFormatting:o,isHeading:a,isContainer:i,isEmptyTag:u,isFrame:function(e,n){return"iframe"===e.property().name(n)},isInline:function(e,n){return!(r(e,n)||u(e,n))&&"li"!==e.property().name(n)}}}),a("ephox.robin.api.dom.DomStructure",["ephox.boss.api.DomUniverse","ephox.robin.api.general.Structure"],function(e,n){var t=e();return{isBlock:function(e){return n.isBlock(t,e)},isList:function(e){return n.isList(t,e)},isFormatting:function(e){return n.isFormatting(t,e)},isHeading:function(e){return n.isHeading(t,e)},isContainer:function(e){return n.isContainer(t,e)},isEmptyTag:function(e){return n.isEmptyTag(t,e)},isFrame:function(e){return n.isFrame(t,e)},isInline:function(e){return n.isInline(t,e)}}}),a("ephox.snooker.api.TableContent",["ephox.katamari.api.Arr","ephox.robin.api.dom.DomStructure","ephox.sugar.api.dom.Compare","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,n,t,r,o,a,i,u,s,c,l){return{merge:function(p){var f=function(e){return"br"===i.name(e)},d=function(n){return e.forall(n,function(e){return f(e)||i.isText(e)&&0===u.get(e).trim().length})},m=function(e){return"li"===i.name(e)||s.ancestor(e,n.isList).isSome()},h=function(e){return c.nextSibling(e).map(function(e){return!!n.isBlock(e)||(n.isEmptyTag(e)?"img"!==i.name(e):void 0)}).getOr(!1)},g=function(e){return l.last(e).bind(function(r){var o=h(r);return c.parent(r).map(function(i){return!0===o||m(i)||f(r)||n.isBlock(i)&&!t.eq(e,i)?[]:[a.fromTag("br")]})}).getOr([])},x=function(){var n=e.bind(p,function(e){var n=c.children(e);return d(n)?[]:n.concat(g(e))});return 0===n.length?[a.fromTag("br")]:n},v=x();o.empty(p[0]),r.append(p[0],v)}}}),a("ephox.snooker.model.GridRow",["ephox.katamari.api.Arr","ephox.snooker.api.Structs"],function(e,n){var t=function(e,n,t){var r=e.cells(),a=r.slice(0,n),i=r.slice(n),u=a.concat([t]).concat(i);return o(e,u)},r=function(e,n,t){e.cells()[n]=t},o=function(e,t){return n.rowcells(t,e.section())},a=function(t,r){var o=t.cells(),a=e.map(o,r);return n.rowcells(a,t.section())},i=function(e,n){return e.cells()[n]};return{addCell:t,setCells:o,mutateCell:r,getCell:i,getCellElement:function(e,n){return i(e,n).element()},mapCells:a,cellLength:function(e){return e.cells().length}}}),a("ephox.snooker.model.TableGrid",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.model.GridRow"],function(e,n,t){var r=function(n,r){return e.map(n,function(e){return t.getCell(e,r)})},o=function(e,n){return e[n]},a=function(n,t){if(0===n.length)return 0;var r=n[0];return e.findIndex(n,function(e){return!t(r.element(),e.element())}).fold(function(){return n.length},function(e){return e})};return{subgrid:function(e,t,i,u){var s=o(e,t).cells().slice(i),c=a(s,u),l=r(e,i).slice(t),p=a(l,u);return{colspan:n.constant(c),rowspan:n.constant(p)}}}}),a("ephox.snooker.model.Transitions",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.TableGrid","ephox.snooker.model.Warehouse"],function(e,n,t,r){return{toDetails:function(r,o){var a=e.map(r,function(n){return e.map(n.cells(),function(){return!1})}),i=function(e,n,t,r){for(var o=e;o<e+t;o++)for(var i=n;i<n+r;i++)a[o][i]=!0};return e.map(r,function(u,s){var c=e.bind(u.cells(),function(e,u){if(!1===a[s][u]){var c=t.subgrid(r,s,u,o);return i(s,u,c.rowspan(),c.colspan()),[n.detailnew(e.element(),c.rowspan(),c.colspan(),e.isNew())]}return[]});return n.rowdetails(c,u.section())})},toGrid:function(e,t,o){for(var a=[],i=0;i<e.grid().rows();i++){for(var u=[],s=0;s<e.grid().columns();s++){var c=r.getAt(e,i,s).map(function(e){return n.elementnew(e.element(),o)
}).getOrThunk(function(){return n.elementnew(t.gap(),!0)});u.push(c)}var l=n.rowcells(u,e.all()[i].section());a.push(l)}return a}}}),a("ephox.snooker.operate.Redraw",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.sugar.api.properties.Attr","ephox.sugar.api.node.Element","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.InsertAll","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a,i,u,s,c){var l=function(e,n,r,o){r===o?t.remove(e,n):t.set(e,n,r)};return{render:function(t,u){var p=[],f=[],d=function(n,u){var d=s.child(t,u).getOrThunk(function(){var e=r.fromTag(u,c.owner(t).dom());return o.append(t,e),e});i.empty(d);var m=e.map(n,function(n){n.isNew()&&p.push(n.element());var t=n.element();return i.empty(t),e.each(n.cells(),function(e){e.isNew()&&f.push(e.element()),l(e.element(),"colspan",e.colspan(),1),l(e.element(),"rowspan",e.rowspan(),1),o.append(t,e.element())}),t});a.append(d,m)},m=function(e){s.child(t,e).bind(i.remove)},h=function(e,n){e.length>0?d(e,n):m(n)},g=[],x=[],v=[];return e.each(u,function(e){switch(e.section()){case"thead":g.push(e);break;case"tbody":x.push(e);break;case"tfoot":v.push(e)}}),h(g,"thead"),h(x,"tbody"),h(v,"tfoot"),{newRows:n.constant(p),newCells:n.constant(f)}},copy:function(n){return e.map(n,function(n){var t=u.shallow(n.element());return e.each(n.cells(),function(e){var n=u.deep(e.element());l(n,"colspan",e.colspan(),1),l(n,"rowspan",e.rowspan(),1),o.append(t,n)}),t})}}}),a("ephox.snooker.model.RunOperation",["ephox.katamari.api.Arr","ephox.katamari.api.Merger","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.snooker.api.Structs","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw","ephox.snooker.resize.BarPositions","ephox.snooker.resize.Bars","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d,m){var h=function(e,n){return s.toGrid(e,n,!1)},g=function(n,t){var r=function(e){return o.findMap(e,function(e){return m.parent(e.element()).map(function(e){var n=m.parent(e).isNone();return a.elementnew(e,n)})}).getOrThunk(function(){return a.elementnew(t.row(),!0)})};return e.map(n,function(e){var n=r(e.details());return a.rowdatanew(n.element(),e.details(),e.section(),n.isNew())})},x=function(e,n){var t=s.toDetails(e,d.eq);return g(t,n)},v=function(n,t){var r=e.flatten(e.map(n.all(),function(e){return e.cells()}));return e.find(r,function(e){return d.eq(t,e.element())})},b=function(e,n,o,a,i){return function(s,m,g,v,b){var w=u.fromTable(m),k=c.generate(w);return n(k,g).map(function(n){var r=h(k,v),o=e(r,n,d.eq,i(v)),a=x(o.grid(),v);return{grid:t.constant(a),cursor:o.cursor}}).fold(function(){return r.none()},function(e){var n=l.render(m,e.grid());return o(m,e.grid(),b),a(m),f.refresh(s,m,p.height,b),r.some({cursor:e.cursor,newRows:n.newRows,newCells:n.newCells})})}},w=function(e,n){return i.cell(n.element()).bind(function(n){return v(e,n)})},k=function(e,t){return i.cell(t.element()).bind(function(r){return v(e,r).map(function(e){return n.merge(e,{generators:t.generators,clipboard:t.clipboard})})})},y=function(t,a){var u=e.map(a.selection(),function(e){return i.cell(e).bind(function(e){return v(t,e)})}),s=o.cat(u);return s.length>0?r.some(n.merge({cells:s},{generators:a.generators,clipboard:a.clipboard})):r.none()},C=function(e,n){return n.mergable()},S=function(e,n){return n.unmergable()};return{run:b,toDetailList:x,onCell:w,onCells:function(n,t){var a=e.map(t.selection(),function(e){return i.cell(e).bind(function(e){return v(n,e)})}),u=o.cat(a);return u.length>0?r.some(u):r.none()},onPaste:k,onPasteRows:y,onMergable:C,onUnmergable:S}}),a("ephox.katamari.api.Result",["ephox.katamari.api.Fun","ephox.katamari.api.Option"],function(e,n){var t=function(r){var o=function(e){return r===e},a=function(){return t(r)},i=function(){return t(r)},u=function(e){return t(e(r))},s=function(e){e(r)},c=function(e){return e(r)},l=function(e,n){return n(r)},p=function(e){return e(r)},f=function(e){return e(r)},d=function(){return n.some(r)};return{is:o,isValue:e.constant(!0),isError:e.constant(!1),getOr:e.constant(r),getOrThunk:e.constant(r),getOrDie:e.constant(r),or:a,orThunk:i,fold:l,map:u,each:s,bind:c,exists:p,forall:f,toOption:d}},r=function(t){var o=function(e){return e()},a=function(){return e.die(t)()},i=function(e){return e},u=function(e){return e()},s=function(){return r(t)},c=function(){return r(t)},l=function(e){return e(t)};return{is:e.constant(!1),isValue:e.constant(!1),isError:e.constant(!0),getOr:e.identity,getOrThunk:o,getOrDie:a,or:i,orThunk:u,fold:l,map:s,each:e.noop,bind:c,exists:e.constant(!1),forall:e.constant(!0),toOption:n.none}};return{value:t,error:r}}),a("ephox.snooker.model.Fitment",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Result","ephox.snooker.api.Structs","ephox.snooker.model.GridRow","ephox.snooker.util.Util","global!Array","global!Error","global!Math"],function(e,n,t,r,o,a,i,u,s){var c=function(e,r,a){if(e.row()>=r.length||e.column()>o.cellLength(r[0]))return t.error("invalid start address out of table bounds, row: "+e.row()+", column: "+e.column());var i=r.slice(e.row()),u=i[0].cells().slice(e.column()),s=o.cellLength(a[0]),c=a.length;return t.value({rowDelta:n.constant(i.length-c),colDelta:n.constant(u.length-s)})},l=function(e,t){var r=o.cellLength(e[0]),a=o.cellLength(t[0]);return{rowDelta:n.constant(0),colDelta:n.constant(r-a)}},p=function(n,t){return e.map(n,function(){return r.elementnew(t.cell(),!0)})},f=function(e,n,t){return e.concat(a.repeat(n,function(){return o.setCells(e[e.length-1],p(e[e.length-1].cells(),t))}))},d=function(n,t,r){return e.map(n,function(e){return o.setCells(e,e.cells().concat(p(a.range(0,t),r)))})};return{measure:c,measureWidth:l,tailor:function(e,t,r){var o=t.colDelta()<0?d:n.identity;return(t.rowDelta()<0?f:n.identity)(o(e,s.abs(t.colDelta()),r),s.abs(t.rowDelta()),r)}}}),a("ephox.snooker.operate.MergingOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,n,t,r){var o=function(n,t){return e.foldl(n,function(n,r){return e.exists(n,function(e){return t(e.element(),r.element())})?n:n.concat([r])},[])};return{merge:function(e,n,o,a){if(0===e.length)return e;for(var i=n.startRow();i<=n.finishRow();i++)for(var u=n.startCol();u<=n.finishCol();u++)r.mutateCell(e[i],u,t.elementnew(a(),!1));return e},unmerge:function(e,n,o,a){for(var i=!0,u=0;u<e.length;u++)for(var s=0;s<r.cellLength(e[0]);s++){var c=r.getCellElement(e[u],s),l=o(c,n);!0===l&&!1===i?r.mutateCell(e[u],s,t.elementnew(a(),!0)):!0===l&&(i=!1)}return e},splitRows:function(a,i,u,s){if(i>0&&i<a.length){var c=a[i-1].cells(),l=o(c,u);e.each(l,function(e){for(var o=n.none(),c=i;c<a.length;c++)for(var l=0;l<r.cellLength(a[0]);l++){var p=a[c].cells()[l],f=u(p.element(),e.element());f&&(o.isNone()&&(o=n.some(s())),o.each(function(e){r.mutateCell(a[c],l,t.elementnew(e,!0))}))}})}return a}}}),a("ephox.snooker.model.TableMerge",["ephox.katamari.api.Fun","ephox.snooker.api.Structs","ephox.snooker.model.Fitment","ephox.snooker.model.GridRow","ephox.snooker.operate.MergingOperations"],function(e,n,t,r,o){var a=function(n,t,o,a){var i=r.getCell(n[t],o),u=e.curry(a,i.element()),s=n[t];return n.length>1&&r.cellLength(s)>1&&(o>0&&u(r.getCellElement(s,o-1))||o<s.length-1&&u(r.getCellElement(s,o+1))||t>0&&u(r.getCellElement(n[t-1],o))||t<n.length-1&&u(r.getCellElement(n[t+1],o)))},i=function(e,t,i,u,s){for(var c=e.row(),l=e.column(),p=i.length,f=r.cellLength(i[0]),d=c+p,m=l+f,h=c;h<d;h++)for(var g=l;g<m;g++){a(t,h,g,s)&&o.unmerge(t,r.getCellElement(t[h],g),s,u.cell);var x=r.getCellElement(i[h-c],g-l),v=u.replace(x);r.mutateCell(t[h],g,n.elementnew(v,!0))}return t};return{merge:function(e,n,r,o,a){return t.measure(e,n,r).map(function(u){var s=t.tailor(n,u,o);return i(e,s,r,o,a)})},insert:function(e,n,r,a,i){o.splitRows(n,e,i,a.cell);var u=t.measureWidth(r,n),s=t.tailor(r,u,a),c=t.measureWidth(n,s),l=t.tailor(n,c,a);return l.slice(0,e).concat(s).concat(l.slice(e,l.length))}}}),a("ephox.snooker.operate.ModificationOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,n,t){var r=function(e,r,o,a,i){var u=e.slice(0,r),s=e.slice(r),c=t.mapCells(e[o],function(o,u){return r>0&&r<e.length&&a(t.getCellElement(e[r-1],u),t.getCellElement(e[r],u))?t.getCell(e[r],u):n.elementnew(i(o.element(),a),!0)});return u.concat([c]).concat(s)},o=function(r,o,a,i,u){return e.map(r,function(e){var r=o>0&&o<t.cellLength(e)&&i(t.getCellElement(e,o-1),t.getCellElement(e,o)),s=r?t.getCell(e,o):n.elementnew(u(t.getCellElement(e,a),i),!0);return t.addCell(e,o,s)})},a=function(r,o,a,i,u){var s=a+1;return e.map(r,function(e,r){var c=r===o,l=c?n.elementnew(u(t.getCellElement(e,a),i),!0):t.getCell(e,a);return t.addCell(e,s,l)})},i=function(e,r,o,a,i){var u=r+1,s=e.slice(0,u),c=e.slice(u),l=t.mapCells(e[r],function(e,t){return t===o?n.elementnew(i(e.element(),a),!0):e});return s.concat([l]).concat(c)},u=function(t,r,o){var a=e.map(t,function(e){var t=e.cells().slice(0,r).concat(e.cells().slice(o+1));return n.rowcells(t,e.section())});return e.filter(a,function(e){return e.cells().length>0})};return{insertRowAt:r,insertColumnAt:o,splitCellIntoColumns:a,splitCellIntoRows:i,deleteRowsAt:function(e,n,t){return e.slice(0,n).concat(e.slice(t+1))},deleteColumnsAt:u}}),a("ephox.snooker.operate.TransformOperations",["ephox.katamari.api.Arr","ephox.snooker.api.Structs","ephox.snooker.model.GridRow"],function(e,n,t){var r=function(r,o,a,i){var u=function(n){return e.exists(o,function(e){return a(n.element(),e.element())})};return e.map(r,function(e){return t.mapCells(e,function(e){return u(e)?n.elementnew(i(e.element(),a),!0):e})})},o=function(e,n,r,o){return t.getCellElement(e[n],r)!==undefined&&n>0&&o(t.getCellElement(e[n-1],r),t.getCellElement(e[n],r))},a=function(e,n,r){return n>0&&r(t.getCellElement(e,n-1),t.getCellElement(e,n))};return{replaceColumn:function(n,i,u,s){var c=e.bind(n,function(e,r){return o(n,r,i,u)||a(e,i,u)?[]:[t.getCell(e,i)]});return r(n,c,u,s)},replaceRow:function(n,t,i,u){var s=n[t],c=e.bind(s.cells(),function(e,r){return o(n,t,r,i)||a(s,r,i)?[]:[e]});return r(n,c,i,u)}}}),a("ephox.snooker.api.TableOperations",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.Generators","ephox.snooker.api.Structs","ephox.snooker.api.TableContent","ephox.snooker.api.TableLookup","ephox.snooker.model.DetailsList","ephox.snooker.model.GridRow","ephox.snooker.model.RunOperation","ephox.snooker.model.TableMerge","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.MergingOperations","ephox.snooker.operate.ModificationOperations","ephox.snooker.operate.TransformOperations","ephox.snooker.resize.Adjustments","ephox.sugar.api.dom.Remove"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x,v){var b=function(e){0===u.cells(e).length&&v.remove(e)},w=r.immutable("grid","cursor"),k=function(e,n,t){return y(e,n,t).orThunk(function(){return y(e,0,0)})},y=function(e,n,r){return t.from(e[n]).bind(function(e){return t.from(e.cells()[r]).bind(function(e){return t.from(e.element())})})},C=function(e,n,t){return w(e,y(e,n,t))},S=function(n){return e.foldl(n,function(n,t){return e.exists(n,function(e){return e.row()===t.row()})?n:n.concat([t])},[]).sort(function(e,n){return e.row()-n.row()})},T=function(n){return e.foldl(n,function(n,t){return e.exists(n,function(e){return e.column()===t.column()})?n:n.concat([t])},[]).sort(function(e,n){return e.column()-n.column()})},R=function(e,n,t,r){var o=n.row(),a=n.row(),i=h.insertRowAt(e,a,o,t,r.getOrInit);return C(i,a,n.column())},A=function(n,t,r,o){var a=t[0].row(),i=t[0].row(),u=S(t),s=e.foldl(u,function(e){return h.insertRowAt(e,i,a,r,o.getOrInit)},n);return C(s,i,t[0].column())},O=function(e,n,t,r){var o=n.row(),a=n.row()+n.rowspan(),i=h.insertRowAt(e,a,o,t,r.getOrInit);return C(i,a,n.column())},D=function(n,t,r,o){var a=S(t),i=a[a.length-1].row(),u=a[a.length-1].row()+a[a.length-1].rowspan(),s=e.foldl(a,function(e){return h.insertRowAt(e,u,i,r,o.getOrInit)},n);return C(s,u,t[0].column())},E=function(e,n,t,r){var o=n.column(),a=n.column(),i=h.insertColumnAt(e,a,o,t,r.getOrInit);return C(i,n.row(),a)},N=function(n,t,r,o){var a=T(t),i=a[0].column(),u=a[0].column(),s=e.foldl(a,function(e){return h.insertColumnAt(e,u,i,r,o.getOrInit)},n);return C(s,t[0].row(),u)},B=function(e,n,t,r){var o=n.column(),a=n.column()+n.colspan(),i=h.insertColumnAt(e,a,o,t,r.getOrInit);return C(i,n.row(),a)},P=function(n,t,r,o){var a=t[t.length-1].column(),i=t[t.length-1].column()+t[t.length-1].colspan(),u=T(t),s=e.foldl(u,function(e){return h.insertColumnAt(e,i,a,r,o.getOrInit)},n);return C(s,t[0].row(),i)},F=function(e,n,t,r){var o=g.replaceRow(e,n.row(),t,r.replaceOrInit);return C(o,n.row(),n.column())},I=function(e,n,t,r){var o=g.replaceColumn(e,n.column(),t,r.replaceOrInit);return C(o,n.row(),n.column())},W=function(e,n,t,r){var o=g.replaceRow(e,n.row(),t,r.replaceOrInit);return C(o,n.row(),n.column())},M=function(e,n,t,r){var o=g.replaceColumn(e,n.column(),t,r.replaceOrInit);return C(o,n.row(),n.column())},L=function(e,n,t,r){var o=h.splitCellIntoColumns(e,n.row(),n.column(),t,r.getOrInit);return C(o,n.row(),n.column())},q=function(e,n,t,r){var o=h.splitCellIntoRows(e,n.row(),n.column(),t,r.getOrInit);return C(o,n.row(),n.column())},z=function(e,n){var t=T(n),r=h.deleteColumnsAt(e,t[0].column(),t[t.length-1].column()),o=k(r,n[0].row(),n[0].column());return w(r,o)},_=function(e,n){var t=S(n),r=h.deleteRowsAt(e,t[0].row(),t[t.length-1].row()),o=k(r,n[0].row(),n[0].column());return w(r,o)},j=function(e,r,o){var a=r.cells();i.merge(a);var u=m.merge(e,r.bounds(),o,n.constant(a[0]));return w(u,t.from(a[0]))},H=function(n,r,o,a){var i=e.foldr(r,function(e,n){return m.unmerge(e,n,o,a.combine(n))},n);return w(i,t.from(r[0]))},U=function(e,n,r){var o=function(e,n){var t=s.fromTable(e),r=d.generate(t);return f.toGrid(r,n,!0)},i=o(n.clipboard(),n.generators()),u=a.address(n.row(),n.column());return p.merge(u,e,i,n.generators(),r).fold(function(){return w(e,t.some(n.element()))},function(e){var t=k(e,n.row(),n.column());return w(e,t)})},G=function(e,n,t){var r=s.fromPastedRows(e,t),o=d.generate(r);return f.toGrid(o,n,!0)},V=function(e,n,t){var r=e[n.cells[0].row()],o=n.cells[0].row(),a=G(n.clipboard(),n.generators(),r),i=p.insert(o,e,a,n.generators(),t),u=k(i,n.cells[0].row(),n.cells[0].column());return w(i,u)},K=function(e,n,t){var r=e[n.cells.length-1],o=n.cells[n.cells.length-1].row()+n.cells[n.cells.length-1].rowspan(),a=G(n.clipboard(),n.generators(),r),i=p.insert(o,e,a,n.generators(),t),u=k(i,n.cells[0].row(),n.cells[0].column());return w(i,u)},Y=x.adjustWidthTo;return{insertRowBefore:l.run(R,l.onCell,n.noop,n.noop,o.modification),insertRowsBefore:l.run(A,l.onCells,n.noop,n.noop,o.modification),insertRowAfter:l.run(O,l.onCell,n.noop,n.noop,o.modification),insertRowsAfter:l.run(D,l.onCells,n.noop,n.noop,o.modification),insertColumnBefore:l.run(E,l.onCell,Y,n.noop,o.modification),insertColumnsBefore:l.run(N,l.onCells,Y,n.noop,o.modification),insertColumnAfter:l.run(B,l.onCell,Y,n.noop,o.modification),insertColumnsAfter:l.run(P,l.onCells,Y,n.noop,o.modification),splitCellIntoColumns:l.run(L,l.onCell,Y,n.noop,o.modification),splitCellIntoRows:l.run(q,l.onCell,n.noop,n.noop,o.modification),eraseColumns:l.run(z,l.onCells,Y,b,o.modification),eraseRows:l.run(_,l.onCells,n.noop,b,o.modification),makeColumnHeader:l.run(I,l.onCell,n.noop,n.noop,o.transform("row","th")),unmakeColumnHeader:l.run(M,l.onCell,n.noop,n.noop,o.transform(null,"td")),makeRowHeader:l.run(F,l.onCell,n.noop,n.noop,o.transform("col","th")),unmakeRowHeader:l.run(W,l.onCell,n.noop,n.noop,o.transform(null,"td")),mergeCells:l.run(j,l.onMergable,n.noop,n.noop,o.merging),unmergeCells:l.run(H,l.onUnmergable,Y,n.noop,o.merging),pasteCells:l.run(U,l.onPaste,Y,n.noop,o.modification),pasteRowsBefore:l.run(V,l.onPasteRows,n.noop,n.noop,o.modification),pasteRowsAfter:l.run(K,l.onPasteRows,n.noop,n.noop,o.modification)}}),a("ephox.sugar.api.properties.Direction",["ephox.sugar.api.properties.Css"],function(e){var n=function(e,n){return function(r){return"rtl"===t(r)?n:e}},t=function(n){return"rtl"===e.get(n,"direction")?"rtl":"ltr"};return{onDirection:n,getDirection:t}}),a("tinymce.plugins.table.queries.Direction",["ephox.katamari.api.Fun","ephox.sugar.api.properties.Direction"],function(e,n){var t={isRtl:e.constant(!1)},r={isRtl:e.constant(!0)};return{directionAt:function(e){return"rtl"===n.getDirection(e)?r:t}}}),a("tinymce.plugins.table.actions.TableActions",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CellMutations","ephox.snooker.api.TableDirection","ephox.snooker.api.TableFill","ephox.snooker.api.TableOperations","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.plugins.table.queries.Direction"],function(e,n,t,r,o,a,i,u,s,c,l){return function(p,f){var d,m=function(e){return p.fire("newrow",{node:e.dom()}),e.dom()},h=function(e){return p.fire("newcell",{node:e.dom()}),e.dom()};!1!==p.settings.table_clone_elements&&("string"==typeof p.settings.table_clone_elements?d=p.settings.table_clone_elements.split(/[ ,]/):Array.isArray(p.settings.table_clone_elements)&&(d=p.settings.table_clone_elements));var g=t.from(d),x=function(n,t,r){return function(i,f){var d=c.descendants(i,"td[data-mce-style],th[data-mce-style]");e.each(d,function(e){s.remove(e,"data-mce-style")});var x=r(),v=u.fromDom(p.getDoc()),b=o(l.directionAt),w=a.cellOperations(t,v,g);return n(x,i,f,w,b).bind(function(n){return e.each(n.newRows(),function(e){m(e)}),e.each(n.newCells(),function(e){h(e)}),n.cursor().map(function(e){var n=p.dom.createRng();return n.setStart(e.dom(),0),n.setEnd(e.dom(),0),n})})}};return{deleteRow:x(i.eraseRows,n.noop,f),deleteColumn:x(i.eraseColumns,n.noop,f),insertRowsBefore:x(i.insertRowsBefore,n.noop,f),insertRowsAfter:x(i.insertRowsAfter,n.noop,f),insertColumnsBefore:x(i.insertColumnsBefore,r.halve,f),insertColumnsAfter:x(i.insertColumnsAfter,r.halve,f),mergeCells:x(i.mergeCells,n.noop,f),unmergeCells:x(i.unmergeCells,n.noop,f),pasteRowsBefore:x(i.pasteRowsBefore,n.noop,f),pasteRowsAfter:x(i.pasteRowsAfter,n.noop,f),pasteCells:x(i.pasteCells,n.noop,f)}}}),a("ephox.snooker.api.CopyRows",["ephox.snooker.model.DetailsList","ephox.snooker.model.RunOperation","ephox.snooker.model.Transitions","ephox.snooker.model.Warehouse","ephox.snooker.operate.Redraw"],function(e,n,t,r,o){return{copyRows:function(a,i,u){var s=e.fromTable(a),c=r.generate(s);return n.onCells(c,i).map(function(e){var r=t.toGrid(c,u,!1),a=r.slice(e[0].row(),e[e.length-1].row()+e[e.length-1].rowspan()),i=n.toDetailList(a,u);return o.copy(i)})}}}),a("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.Tools")}),a("tinymce.plugins.table.alien.Util",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,n){var t=function(e){return n.fromDom(e.getBody())};return{getBody:t,getIsRoot:function(n){return function(r){return e.eq(r,t(n))}}}}),a("tinymce.plugins.table.actions.TableCommands",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.snooker.api.CopyRows","ephox.snooker.api.TableFill","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Insert","ephox.sugar.api.dom.Remove","ephox.sugar.api.dom.Replication","ephox.sugar.api.node.Element","tinymce.core.util.Tools","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,n,t,r,o,a,i,u,s,c,l,p,f){var d=l.each,m=t.none(),h=function(){return m.fold(function(){},function(n){return e.map(n,function(e){return e.dom()})})},g=function(n){var r=e.map(n,c.fromDom);m=t.from(r)};return{registerCommands:function(l,h,g,x,v){var b=p.getIsRoot(l),w=function(){var e=c.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"));a.table(e,b).filter(n.not(b)).each(function(e){var n=c.fromText("");i.after(e,n),u.remove(e);var t=l.dom.createRng();t.setStart(n.dom(),0),t.setEnd(n.dom(),0),l.selection.setRng(t)})},k=function(){return c.fromDom(l.dom.getParent(l.selection.getStart(),"th,td"))},y=function(e){return a.table(e,b)},C=function(e){var n=k();y(n).each(function(t){var r=f.forMenu(v,t,n);e(t,r).each(function(e){l.selection.setRng(e),l.focus(),x.clear(t)})})},S=function(){var e=k();return y(e).bind(function(a){var i=c.fromDom(l.getDoc()),u=f.forMenu(v,a,e),s=o.cellOperations(n.noop,i,t.none());return r.copyRows(a,u,s)})},T=function(n){m.each(function(t){var r=e.map(t,function(e){return s.deep(e)}),a=k();y(a).bind(function(e){var t=c.fromDom(l.getDoc()),i=o.paste(t),u=f.pasteRows(v,e,a,r,i);n(e,u).each(function(n){l.selection.setRng(n),l.focus(),x.clear(e)})})})};d({mceTableSplitCells:function(){C(g.unmergeCells)},mceTableMergeCells:function(){C(g.mergeCells)},mceTableInsertRowBefore:function(){C(g.insertRowsBefore)},mceTableInsertRowAfter:function(){C(g.insertRowsAfter)},mceTableInsertColBefore:function(){C(g.insertColumnsBefore)},mceTableInsertColAfter:function(){C(g.insertColumnsAfter)},mceTableDeleteCol:function(){C(g.deleteColumn)},mceTableDeleteRow:function(){C(g.deleteRow)},mceTableCutRow:function(){m=S(),C(g.deleteRow)},mceTableCopyRow:function(){m=S()},mceTablePasteRowBefore:function(){T(g.pasteRowsBefore)},mceTablePasteRowAfter:function(){T(g.pasteRowsAfter)},mceTableDelete:w},function(e,n){l.addCommand(n,e)}),d({mceInsertTable:h.table,mceTableProps:function(){h.table(!0)},mceTableRowProps:h.row,mceTableCellProps:h.cell},function(e,n){l.addCommand(n,function(n,t){e(t)})})},getClipboardRows:h,setClipboardRows:g}}),a("tinymce.plugins.table.actions.TableWire",["ephox.snooker.api.ResizeWire","ephox.sugar.api.node.Body","ephox.sugar.api.node.Element","tinymce.plugins.table.alien.Util"],function(e,n,t,r){return{get:function(o){return o.inline?e.body(r.getBody(o),n.body()):e.only(t.fromDom(o.getDoc()))}}}),a("ephox.snooker.api.CellLocation",[],function(){var e=function(e){return o(function(n){return n(e)})},n=function(e){return o(function(n,t){return t(e)})},t=function(e,n){return o(function(t,r,o){return o(e,n)})},r=function(e){return o(function(n,t,r,o){return o(e)})},o=function(e){return{fold:e}};return{none:e,first:n,middle:t,last:r}}),a("ephox.snooker.api.CellNavigation",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.snooker.api.CellLocation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare"],function(e,n,t,r,o){var a=function(t,a){return r.table(t,a).bind(function(a){var i=r.cells(a);return e.findIndex(i,function(e){return o.eq(t,e)}).map(function(e){return{index:n.constant(e),all:n.constant(i)}})})};return{next:function(e,n){return a(e,n).fold(function(){return t.none(e)},function(n){return n.index()+1<n.all().length?t.middle(e,n.all()[n.index()+1]):t.last(e)})},prev:function(e,n){return a(e,n).fold(function(){return t.none()},function(n){return n.index()-1>=0?t.middle(e,n.all()[n.index()-1]):t.first(e)})}}}),a("tinymce.core.util.VK",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.util.VK")}),a("tinymce.plugins.table.queries.TabContext",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.CellNavigation","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.CursorPosition","tinymce.core.util.VK","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.TableTargets"],function(e,n,t,r,o,a,i,u,s,c,l,p,f){var d=function(e,n,r,o){return h(e,n,t.next(r),o)},m=function(e,n,r,o){return h(e,n,t.prev(r),o)},h=function(e,t,o,a){return o.fold(n.none,n.none,function(t,r){return c.first(r).bind(function(t){var r=e.dom.createRng();return r.setStart(t.dom(),0),r.setEnd(t.dom(),0),n.some(r)})},function(n){return r.table(n,t).bind(function(t){var r=f.noMenu(n);a.insertRowsAfter(t,r);var o=u.descendants(t,"tr");if(o.length>0){var i=o[o.length-1];return s.descendant(i,"td,th").map(function(n){var t=e.dom.createRng();return t.setStart(n.dom(),0),t.setEnd(n.dom(),0),t})}})})},g=["table","li","dl"];return{handle:function(n,t,u,s){if(n.keyCode===l.TAB){var c=p.getBody(t),f=function(n){var t=i.name(n);return o.eq(n,c)||e.contains(g,t)},h=t.selection.getRng();if(h.collapsed){var x=a.fromDom(h.startContainer);r.cell(x,f).each(function(e){n.preventDefault(),(n.shiftKey?m:d)(t,f,e,u,s).each(function(e){t.selection.setRng(e)})})}}}}}),a("ephox.darwin.api.Responses",["ephox.katamari.api.Struct"],function(e){return{response:e.immutable("selection","kill")}}),a("ephox.darwin.api.SelectionKeys",[],function(){var e=function(e){return function(n){return n===e}},n=e(38),t=e(40),r=function(e){return e>=37&&e<=40};return{ltr:{isBackward:e(37),isForward:e(39)},rtl:{isBackward:e(39),isForward:e(37)},isUp:n,isDown:t,isNavigation:r}}),a("ephox.sugar.api.selection.Situ",["ephox.katamari.api.Adt"],function(e){var n=e.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),t=function(e,n,t,r){return e.fold(n,t,r)};return{before:n.before,on:n.on,after:n.after,cata:t}}),a("ephox.sugar.selection.core.NativeRange",["ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element"],function(e,n,t,r){var o=function(e,n){var t=e.document.createRange();return a(t,n),t},a=function(e,n){e.selectNodeContents(n.dom())},i=function(e,n){return n.compareBoundaryPoints(e.END_TO_START,e)<1&&n.compareBoundaryPoints(e.START_TO_END,e)>-1},u=function(e){return e.document.createRange()},s=function(e,n){n.fold(function(n){e.setStartBefore(n.dom())},function(n,t){e.setStart(n.dom(),t)},function(n){e.setStartAfter(n.dom())})},c=function(e,n){n.fold(function(n){e.setEndBefore(n.dom())},function(n,t){e.setEnd(n.dom(),t)},function(n){e.setEndAfter(n.dom())})},l=function(e,n){m(e),e.insertNode(n.dom())},p=function(e,n,r,o){return t.eq(e,r)&&n===o},f=function(e,n,t){var r=e.document.createRange();return s(r,n),c(r,t),r},d=function(e,n,t,r,o){var a=e.document.createRange();return a.setStart(n.dom(),t),a.setEnd(r.dom(),o),a},m=function(e){e.deleteContents()},h=function(e){var n=e.cloneContents();return r.fromDom(n)},g=function(n){return{left:e.constant(n.left),top:e.constant(n.top),right:e.constant(n.right),bottom:e.constant(n.bottom),width:e.constant(n.width),height:e.constant(n.height)}},x=function(e){var t=e.getClientRects(),r=t.length>0?t[0]:e.getBoundingClientRect();return r.width>0||r.height>0?n.some(r).map(g):n.none()},v=function(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?n.some(t).map(g):n.none()},b=function(e){return e.toString()};return{create:u,replaceWith:l,selectNodeContents:o,selectNodeContentsUsing:a,isCollapsed:p,relativeToNative:f,exactToNative:d,deleteContents:m,cloneFragment:h,getFirstRect:x,getBounds:v,isWithin:i,toString:b}}),a("ephox.sugar.selection.core.SelectionDirection",["ephox.katamari.api.Adt","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Thunk","ephox.sugar.api.node.Element","ephox.sugar.selection.core.NativeRange"],function(e,n,t,r,o,a){var i=e.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),u=function(e,n,t){return n(o.fromDom(t.startContainer),t.startOffset,o.fromDom(t.endContainer),t.endOffset)},s=function(e,o){return o.match({domRange:function(e){return{ltr:n.constant(e),rtl:t.none}},relative:function(n,o){return{ltr:r.cached(function(){return a.relativeToNative(e,n,o)}),rtl:r.cached(function(){return t.some(a.relativeToNative(e,o,n))})}},exact:function(n,o,i,u){return{ltr:r.cached(function(){return a.exactToNative(e,n,o,i,u)}),rtl:r.cached(function(){return t.some(a.exactToNative(e,i,u,n,o))})}}})},c=function(e,n){var t=n.ltr();if(t.collapsed){return n.rtl().filter(function(e){return!1===e.collapsed}).map(function(e){return i.rtl(o.fromDom(e.endContainer),e.endOffset,o.fromDom(e.startContainer),e.startOffset)}).getOrThunk(function(){return u(e,i.ltr,t)})}return u(e,i.ltr,t)},l=function(e,n){var t=s(e,n);return c(e,t)},p=function(e,n){return l(e,n).match({ltr:function(n,t,r,o){var a=e.document.createRange();return a.setStart(n.dom(),t),a.setEnd(r.dom(),o),a},rtl:function(n,t,r,o){var a=e.document.createRange();return a.setStart(r.dom(),o),a.setEnd(n.dom(),t),a}})};return{ltr:i.ltr,rtl:i.rtl,diagnose:l,asLtrRange:p}}),a("ephox.darwin.selection.Util",["ephox.katamari.api.Fun","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.SelectionDirection"],function(e,n,t,r){return{convertToRange:function(t,o){var a=r.asLtrRange(t,o);return{start:e.constant(n.fromDom(a.startContainer)),soffset:e.constant(a.startOffset),finish:e.constant(n.fromDom(a.endContainer)),foffset:e.constant(a.endOffset)}},makeSitus:function(n,r,o,a){return{start:e.constant(t.on(n,r)),finish:e.constant(t.on(o,a))}}}}),a("ephox.sugar.api.selection.Selection",["ephox.katamari.api.Adt","ephox.katamari.api.Struct"],function(e,n){var t=e.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r=n.immutable("start","soffset","finish","foffset"),o=function(e){return t.exact(e.start(),e.soffset(),e.finish(),e.foffset())};return{domRange:t.domRange,relative:t.relative,exact:t.exact,exactFromRange:o,range:r}}),a("ephox.sugar.api.dom.DocumentPosition",["ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse"],function(e,n,t){var r=function(e,n,r,o){var a=t.owner(e),i=a.dom().createRange();return i.setStart(e.dom(),n),i.setEnd(r.dom(),o),i},o=function(e,t,o,a){var i=r(e,t,o,a);return n.fromDom(i.commonAncestorContainer)};return{after:function(n,t,o,a){var i=r(n,t,o,a),u=e.eq(n,o)&&t===a;return i.collapsed&&!u},commonAncestorContainer:o}}),a("ephox.sugar.api.node.Fragment",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","global!document"],function(e,n,t){return{fromElements:function(r,o){var a=o||t,i=a.createDocumentFragment();return e.each(r,function(e){i.appendChild(e.dom())}),n.fromDom(i)}}}),a("ephox.sugar.selection.alien.Geometry",["global!Math"],function(e){var n=function(n,t,r,o,a){if(0===a)return 0;if(t===o)return a-1;for(var i=o,u=1;u<a;u++){var s=n(u),c=e.abs(t-s.left);if(r>s.bottom);else{if(r<s.top||c>i)return u-1;i=c}}return 0};return{inRect:function(e,n,t){return n>=e.left&&n<=e.right&&t>=e.top&&t<=e.bottom},searchForPoint:n}}),a("ephox.sugar.selection.query.TextPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Text","ephox.sugar.selection.alien.Geometry","global!Math"],function(e,n,t,r){var o=function(e,n,o,a,i){var u=function(t){var r=e.dom().createRange();return r.setStart(n.dom(),t),r.collapse(!0),r},s=function(e){return u(e).getBoundingClientRect()},c=t.get(n).length,l=r.searchForPoint(s,o,a,i.right,c);return u(l)};return{locate:function(t,a,i,u){var s=t.dom().createRange();s.selectNode(a.dom());var c=s.getClientRects();return n.findMap(c,function(n){return r.inRect(n,i,u)?e.some(n):e.none()}).map(function(e){return o(t,a,i,u,e)})}}}),a("ephox.sugar.selection.query.ContainerPoint",["ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.sugar.api.node.Node","ephox.sugar.api.search.Traverse","ephox.sugar.selection.alien.Geometry","ephox.sugar.selection.query.TextPoint","global!Math"],function(e,n,t,r,o,a,i){var u=function(t,a,i,u){var c=t.dom().createRange(),l=r.children(a);return n.findMap(l,function(n){return c.selectNode(n.dom()),o.inRect(c.getBoundingClientRect(),i,u)?s(t,n,i,u):e.none()})},s=function(e,n,r,o){return(t.isText(n)?a.locate:u)(e,n,r,o)};return{locate:function(e,n,t,r){var o=e.dom().createRange();o.selectNode(n.dom());var a=o.getBoundingClientRect(),u=i.max(a.left,i.min(a.right,t)),c=i.max(a.top,i.min(a.bottom,r));return s(e,n,u,c)}}}),a("ephox.sugar.selection.query.EdgePoint",["ephox.katamari.api.Option","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.CursorPosition"],function(e,n,t){var r=!0,o=!1,a=function(e,n){return n-e.left<e.right-n?r:o},i=function(e,n,t){var r=e.dom().createRange();return r.selectNode(n.dom()),r.collapse(t),r},u=function(e,n,o){var u=e.dom().createRange();u.selectNode(n.dom());var s=u.getBoundingClientRect(),c=a(s,o);return(c===r?t.first:t.last)(n).map(function(n){return i(e,n,c)})},s=function(n,t,r){
var o=t.dom().getBoundingClientRect(),u=a(o,r);return e.some(i(n,t,u))};return{search:function(e,t,r){return(0===n.children(t).length?s:u)(e,t,r)}}}),a("ephox.sugar.selection.query.CaretRange",["ephox.katamari.api.Option","ephox.sugar.api.node.Element","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Selection","ephox.sugar.selection.query.ContainerPoint","ephox.sugar.selection.query.EdgePoint","global!document","global!Math"],function(e,n,t,r,o,a,i,u){var s=function(n,t,r){return e.from(n.dom().caretPositionFromPoint(t,r)).bind(function(t){if(null===t.offsetNode)return e.none();var r=n.dom().createRange();return r.setStart(t.offsetNode,t.offset),r.collapse(),e.some(r)})},c=function(n,t,r){return e.from(n.dom().caretRangeFromPoint(t,r))},l=function(e,n,t,r){var a=e.dom().createRange();a.selectNode(n.dom());var i=a.getBoundingClientRect(),s=u.max(i.left,u.min(i.right,t)),c=u.max(i.top,u.min(i.bottom,r));return o.locate(e,n,s,c)},p=function(r,o,i){return e.from(r.dom().elementFromPoint(o,i)).map(n.fromDom).bind(function(e){var n=function(){return a.search(r,e,o)};return 0===t.children(e).length?n():l(r,e,o,i).orThunk(n)})},f=i.caretPositionFromPoint?s:i.caretRangeFromPoint?c:p;return{fromPoint:function(e,t,o){var a=n.fromDom(e.document);return f(a,t,o).map(function(e){return r.range(n.fromDom(e.startContainer),e.startOffset,n.fromDom(e.endContainer),e.endOffset)})}}}),a("ephox.sugar.selection.query.Within",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.Selectors","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection"],function(e,n,t,r,o,a,i){var u=function(n,t,i,u){var s=a.create(n),c=o.is(t,u)?[t]:[],l=c.concat(r.descendants(t,u));return e.filter(l,function(e){return a.selectNodeContentsUsing(s,e),a.isWithin(i,s)})};return{find:function(e,r,o){var a=i.asLtrRange(e,r),s=n.fromDom(a.commonAncestorContainer);return t.isElement(s)?u(e,s,a,o):[]}}}),a("ephox.sugar.selection.quirks.Prefilter",["ephox.katamari.api.Arr","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,n,t,r){var o=function(t,o){var a=n.name(t);return"input"===a?r.after(t):e.contains(["br","img"],a)?0===o?r.before(t):r.after(t):r.on(t,o)};return{beforeSpecial:o,preprocess:function(e,n){var a=e.fold(r.before,o,r.after),i=n.fold(r.before,o,r.after);return t.relative(a,i)}}}),a("ephox.sugar.api.selection.WindowSelection",["ephox.katamari.api.Option","ephox.sugar.api.dom.DocumentPosition","ephox.sugar.api.node.Element","ephox.sugar.api.node.Fragment","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.selection.core.NativeRange","ephox.sugar.selection.core.SelectionDirection","ephox.sugar.selection.query.CaretRange","ephox.sugar.selection.query.Within","ephox.sugar.selection.quirks.Prefilter"],function(e,n,t,r,o,a,i,u,s,c,l){var p=function(e,n){var t=e.getSelection();t.removeAllRanges(),t.addRange(n)},f=function(e,n,t,r,o){var a=i.exactToNative(e,n,t,r,o);p(e,a)},d=function(e,n,t){return c.find(e,n,t)},m=function(e,n,t,r,o){h(e,a.on(n,t),a.on(r,o))},h=function(e,n,t){var r=l.preprocess(n,t);return u.diagnose(e,r).match({ltr:function(n,t,r,o){f(e,n,t,r,o)},rtl:function(n,t,r,o){var a=e.getSelection();a.extend?(a.collapse(n.dom(),t),a.extend(r.dom(),o)):f(e,r,o,n,t)}})},g=function(n){return e.from(n.getRangeAt(0)).map(function(e){return o.range(t.fromDom(e.startContainer),e.startOffset,t.fromDom(e.endContainer),e.endOffset)})},x=function(r){var a=t.fromDom(r.anchorNode),i=t.fromDom(r.focusNode);return n.after(a,r.anchorOffset,i,r.focusOffset)?e.some(o.range(t.fromDom(r.anchorNode),r.anchorOffset,t.fromDom(r.focusNode),r.focusOffset)):g(r)},v=function(e,n){var t=i.selectNodeContents(e,n);p(e,t)},b=function(e,n){var r=i.selectNodeContents(e,n);return o.range(t.fromDom(r.startContainer),r.startOffset,t.fromDom(r.endContainer),r.endOffset)},w=function(n){var t=n.getSelection();return t.rangeCount>0?x(t):e.none()},k=function(e){return w(e).map(function(e){return o.exact(e.start(),e.soffset(),e.finish(),e.foffset())})},y=function(e,n){var t=u.asLtrRange(e,n);return i.getFirstRect(t)},C=function(e,n){var t=u.asLtrRange(e,n);return i.getBounds(t)},S=function(e,n,t){return s.fromPoint(e,n,t)},T=function(e,n){var t=u.asLtrRange(e,n);return i.toString(t)};return{setExact:m,getExact:w,get:k,setRelative:h,setToElement:v,clear:function(e){e.getSelection().removeAllRanges()},clone:function(e,n){var t=u.asLtrRange(e,n);return i.cloneFragment(t)},replace:function(e,n,t){var o=u.asLtrRange(e,n),a=r.fromElements(t);i.replaceWith(o,a)},deleteAt:function(e,n){var t=u.asLtrRange(e,n);i.deleteContents(t)},forElement:b,getFirstRect:y,getBounds:C,getAtPoint:S,findWithin:d,getAsString:T}}),a("ephox.darwin.api.WindowBridge",["ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Obj","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ","ephox.sugar.api.selection.WindowSelection"],function(e,n,t,r,o,a){return function(i){var u=function(e){return e.dom().getBoundingClientRect()},s=function(e,o,u,s){var c=r.exact(e,o,u,s);return a.getFirstRect(i,c).map(function(e){return t.map(e,n.apply)})},c=function(){return a.get(i).map(function(n){return e.convertToRange(i,n)})},l=function(n){var t=r.relative(n.start(),n.finish());return e.convertToRange(i,t)},p=function(e,t){return a.getAtPoint(i,e,t).map(function(e){return{start:n.constant(o.on(e.start(),e.soffset())),finish:n.constant(o.on(e.finish(),e.foffset()))}})},f=function(){a.clear(i)},d=function(e){a.setToElement(i,e)};return{getRect:u,getRangedRect:s,getSelection:c,fromSitus:l,situsFromPoint:p,clearSelection:f,setSelection:function(e){a.setExact(i,e.start(),e.soffset(),e.finish(),e.foffset())},setRelativeSelection:function(e,n){a.setRelative(i,e,n)},selectContents:d,getInnerHeight:function(){return i.innerHeight},getScrollY:function(){return i.scrollY},scrollBy:function(e,n){i.scrollBy(e,n)}}}}),a("ephox.darwin.keyboard.KeySelection",["ephox.darwin.api.Responses","ephox.darwin.selection.CellSelection","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Selection","ephox.sugar.api.selection.Situ"],function(e,n,t,r,o,a,i,u){var s=function(e,n,t,r,u,s,l){return a.eq(t,u)&&r===s?o.none():i.closest(t,"td,th",n).bind(function(t){return i.closest(u,"td,th",n).bind(function(r){return c(e,n,t,r,l)})})},c=function(r,i,s,c,l){if(!a.eq(s,c)){var p=n.identify(s,c,i).getOr([]);if(p.length>0)return l(r,p,s,c),o.some(e.response(o.some(t.makeSitus(s,0,s,u.getEnd(s))),!0))}return o.none()};return{sync:s,detect:c,update:function(e,t,r,o,a){var i=function(e){return a.clear(r),a.selectRange(r,e.boxes(),e.start(),e.finish()),e.boxes()};return n.shiftSelection(o,e,t,a.firstSelectedSelector(),a.lastSelectedSelector()).map(i)}}}),a("ephox.darwin.keyboard.Carets",["ephox.katamari.api.Struct"],function(e){var n=e.immutableBag(["left","top","right","bottom"],[]),t=function(e,t){return n({left:e.left(),top:e.top()+t,right:e.right(),bottom:e.bottom()+t})},r=function(e,t){return n({left:e.left(),top:e.top()-t,right:e.right(),bottom:e.bottom()-t})},o=function(e,t){var r=e.bottom()-e.top();return n({left:e.left(),top:t-r,right:e.right(),bottom:t})},a=function(e,t){var r=e.bottom()-e.top();return n({left:e.left(),top:t,right:e.right(),bottom:t+r})},i=function(e,t,r){return n({left:e.left()+t,top:e.top()+r,right:e.right()+t,bottom:e.bottom()+r})},u=function(e){return e.top()},s=function(e){return e.bottom()},c=function(e){return"("+e.left()+", "+e.top()+") -> ("+e.right()+", "+e.bottom()+")"};return{nu:n,moveUp:r,moveDown:t,moveBottomTo:o,moveTopTo:a,getTop:u,getBottom:s,translate:i,toString:c}}),a("ephox.darwin.keyboard.Rectangles",["ephox.darwin.keyboard.Carets","ephox.katamari.api.Option","ephox.sugar.api.node.Node","ephox.sugar.api.selection.Awareness"],function(e,n,t,r){var o=function(e,t,o){return o>=0&&o<r.getEnd(t)?e.getRangedRect(t,o,t,o+1):o>0?e.getRangedRect(t,o-1,t,o):n.none()},a=function(n){return e.nu({left:n.left,top:n.top,right:n.right,bottom:n.bottom})},i=function(e,t){return n.some(e.getRect(t))};return{getBoxAt:function(e,r,u){return t.isElement(r)?i(e,r,u).map(a):t.isText(r)?o(e,r,u).map(a):n.none()},getEntireBox:function(e,o){return t.isElement(o)?i(e,o).map(a):t.isText(o)?e.getRangedRect(o,0,o,r.getEnd(o)).map(a):n.none()}}}),a("ephox.phoenix.gather.Walker",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.katamari.api.Struct"],function(e,n,t){var r=t.immutable("item","mode"),o=function(e,n,t,o){var i=o!==undefined?o:a;return e.property().parent(n).map(function(e){return r(e,i)})},a=function(e,n,t,o){var a=o!==undefined?o:i;return t.sibling(e,n).map(function(e){return r(e,a)})},i=function(e,n,t,o){var a=o!==undefined?o:i,u=e.property().children(n);return t.first(u).map(function(e){return r(e,a)})},u=[{current:o,next:a,fallback:n.none()},{current:a,next:i,fallback:n.some(o)},{current:i,next:i,fallback:n.some(a)}],s=function(n,t,r,o,a){var i=a!==undefined?a:u;return e.find(i,function(e){return e.current===r}).bind(function(e){return e.current(n,t,o,e.next).orThunk(function(){return e.fallback.bind(function(e){return s(n,t,e,o)})})})};return{backtrack:o,sidestep:a,advance:i,go:s}}),a("ephox.phoenix.gather.Walkers",["ephox.katamari.api.Option"],function(e){return{left:function(){return{sibling:function(e,n){return e.query().prevSibling(n)},first:function(n){return n.length>0?e.some(n[n.length-1]):e.none()}}},right:function(){return{sibling:function(e,n){return e.query().nextSibling(n)},first:function(n){return n.length>0?e.some(n[0]):e.none()}}}}}),a("ephox.phoenix.gather.Seeker",["ephox.katamari.api.Option","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,n,t){var r=function(t,o,a,i,u,s){return n.go(t,o,i,u).bind(function(n){return s(n.item())?e.none():a(n.item())?e.some(n.item()):r(t,n.item(),a,n.mode(),u,s)})};return{left:function(e,o,a,i){return r(e,o,a,n.sidestep,t.left(),i)},right:function(e,o,a,i){return r(e,o,a,n.sidestep,t.right(),i)}}}),a("ephox.phoenix.api.general.Gather",["ephox.katamari.api.Fun","ephox.phoenix.gather.Seeker","ephox.phoenix.gather.Walker","ephox.phoenix.gather.Walkers"],function(e,n,t,r){var o=function(e,n){return 0===e.property().children(n).length},a=function(n,t,r){return u(n,t,e.curry(o,n),r)},i=function(n,t,r){return s(n,t,e.curry(o,n),r)},u=function(e,t,r,o){return n.left(e,t,r,o)},s=function(e,t,r,o){return n.right(e,t,r,o)};return{before:a,after:i,seekLeft:u,seekRight:s,walkers:function(){return{left:r.left,right:r.right}},walk:function(e,n,r,o,a){return t.go(e,n,r,o,a)},backtrack:t.backtrack,sidestep:t.sidestep,advance:t.advance}});a("ephox.phoenix.api.dom.DomGather",["ephox.boss.api.DomUniverse","ephox.phoenix.api.general.Gather"],function(e,n){var t=e();return{gather:function(e,r,o){return n.gather(t,e,r,o)},before:function(e,r){return n.before(t,e,r)},after:function(e,r){return n.after(t,e,r)},seekLeft:function(e,r,o){return n.seekLeft(t,e,r,o)},seekRight:function(e,r,o){return n.seekRight(t,e,r,o)},walkers:function(){return n.walkers()},walk:function(e,r,o,a){return n.walk(t,e,r,o,a)}}}),a("ephox.darwin.keyboard.Retries",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.dom.DomGather","ephox.robin.api.dom.DomStructure","ephox.katamari.api.Adt","ephox.sugar.api.search.PredicateFind","global!Math"],function(e,n,t,r,o,a,i,u,s){var c=5,l=100,p=i.generate([{none:[]},{retry:["caret"]}]),f=function(e,n){return e.left()<n.left()||s.abs(n.right()-e.left())<1||e.left()>n.right()},d=function(e,r,o){return u.closest(r,a.isBlock).fold(t.constant(!1),function(t){return n.getEntireBox(e,t).exists(function(e){return f(o,e)})})},m=function(n,t,r,o,a){var i=e.moveDown(a,c);return s.abs(r.bottom()-o.bottom())<1?p.retry(i):r.top()>a.bottom()?p.retry(i):r.top()===a.bottom()?p.retry(e.moveDown(a,1)):d(n,t,a)?p.retry(e.translate(i,c,0)):p.none()},h=function(n,t,r,o,a){var i=e.moveUp(a,c);return s.abs(r.top()-o.top())<1?p.retry(i):r.bottom()<a.top()?p.retry(i):r.bottom()===a.top()?p.retry(e.moveUp(a,1)):d(n,t,a)?p.retry(e.translate(i,c,0)):p.none()},g={point:e.getTop,adjuster:h,move:e.moveUp,gather:o.before},x={point:e.getBottom,adjuster:m,move:e.moveDown,gather:o.after},v=function(e,t,o,a,i){return 0===i?r.some(a):e.situsFromPoint(a.left(),t.point(a)).bind(function(u){return u.start().fold(r.none,function(u,s){return n.getEntireBox(e,u,s).bind(function(n){return t.adjuster(e,u,n,o,a).fold(r.none,function(n){return v(e,t,o,n,i-1)})}).orThunk(function(){return r.some(a)})},r.none)})},b=function(e,n){return e.situsFromPoint(n.left(),n.bottom()+c)},w=function(e,n){return e.situsFromPoint(n.left(),n.top()-c)},k=function(e,n,t){return e.point(n)>t.getInnerHeight()?r.some(e.point(n)-t.getInnerHeight()):e.point(n)<0?r.some(-e.point(n)):r.none()},y=function(e,n,t){var r=e.move(t,c),o=v(n,e,t,r,l).getOr(r);return k(e,o,n).fold(function(){return n.situsFromPoint(o.left(),e.point(o))},function(t){return n.scrollBy(0,t),n.situsFromPoint(o.left(),e.point(o)-t)})};return{tryUp:t.curry(y,g),tryDown:t.curry(y,x),ieTryUp:w,ieTryDown:b,getJumpSize:t.constant(c)}}),a("ephox.darwin.navigation.BeforeAfter",["ephox.katamari.api.Adt","ephox.robin.api.dom.DomParent","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.selection.Awareness"],function(e,n,t,r,o){var a=e.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),i=function(e,n,t){var r=e.getRect(n),o=e.getRect(t);return o.right>r.left&&o.left<r.right},u=function(e){return r.closest(e,"tr")};return{verify:function(e,s,c,l,p,f,d){return r.closest(l,"td,th",d).bind(function(c){return r.closest(s,"td,th",d).map(function(r){return t.eq(c,r)?t.eq(l,c)&&o.getEnd(c)===p?f(r):a.none("in same cell"):n.sharedOne(u,[c,r]).fold(function(){return i(e,r,c)?a.success():f(r)},function(){return f(r)})})}).getOr(a.none("default"))},cata:function(e,n,t,r,o){return e.fold(n,t,r,o)},adt:a}}),a("ephox.phoenix.api.data.Spot",["ephox.katamari.api.Struct"],function(e){return{point:e.immutable("element","offset"),delta:e.immutable("element","deltaOffset"),range:e.immutable("element","start","finish"),points:e.immutable("begin","end"),text:e.immutable("element","text")}}),a("ephox.sugar.api.search.ElementAddress",["ephox.katamari.api.Arr","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateFind","ephox.sugar.api.search.SelectorFilter","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a,i,u,s){var c=r.immutable("ancestor","descendants","element","index"),l=r.immutable("parent","children","element","index"),p=function(e,n){return a.closest(e,function(e){return s.parent(e).exists(function(e){return o.eq(e,n)})})},f=function(e){return s.parent(e).bind(function(n){var t=s.children(n);return d(t,e).map(function(r){return l(n,t,e,r)})})},d=function(t,r){return e.findIndex(t,n.curry(o.eq,r))};return{childOf:p,indexOf:d,indexInParent:f,selectorsInParent:function(e,n){return s.parent(e).bind(function(t){var r=i.children(t,n);return d(r,e).map(function(n){return l(t,r,e,n)})})},descendantsInAncestor:function(e,n,t){return u.closest(e,n).bind(function(n){var r=i.descendants(n,t);return d(r,e).map(function(t){return c(n,r,e,t)})})}}}),a("ephox.darwin.navigation.BrTags",["ephox.darwin.navigation.BeforeAfter","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sugar.api.node.Node","ephox.sugar.api.node.Text","ephox.sugar.api.search.ElementAddress","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Awareness","ephox.sugar.api.selection.Situ"],function(e,n,t,r,o,a,i,u,s,c){var l=function(e){return"br"===o.name(e)},p=function(e,n,r){return n(e,r).bind(function(e){return o.isText(e)&&0===a.get(e).trim().length?p(e,n,r):t.some(e)})},f=function(e,n,t){return t.traverse(n).orThunk(function(){return p(n,t.gather,e)}).map(t.relative)},d=function(e,n){return u.child(e,n).filter(l).orThunk(function(){return u.child(e,n-1).filter(l)})},m=function(e,n,t,r){return d(n,t).bind(function(n){return r.traverse(n).fold(function(){return p(n,r.gather,e).map(r.relative)},function(e){return i.indexInParent(e).map(function(e){return c.on(e.parent(),e.index())})})})};return{tryBr:function(e,t,r,o){return(l(t)?f(e,t,o):m(e,t,r,o)).map(function(e){return{start:n.constant(e),finish:n.constant(e)}})},process:function(n){return e.cata(n,function(){return t.none("BR ADT: none")},function(){return t.none()},function(e){return t.some(r.point(e,0))},function(e){return t.some(r.point(e,s.getEnd(e)))})}}}),a("ephox.darwin.keyboard.TableKeys",["ephox.darwin.keyboard.Carets","ephox.darwin.keyboard.Rectangles","ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.darwin.navigation.BrTags","ephox.katamari.api.Option","ephox.phoenix.api.data.Spot","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.selection.Awareness"],function(e,n,t,r,o,a,i,u,s,c){var l=u.detect(),p=function(e,n,t){return e.getSelection().bind(function(u){return o.tryBr(n,u.finish(),u.foffset(),t).fold(function(){return a.some(i.point(u.finish(),u.foffset()))},function(a){var i=e.fromSitus(a),s=r.verify(e,u.finish(),u.foffset(),i.finish(),i.foffset(),t.failure,n);return o.process(s)})})},f=function(n,t,o,i,u,l){return 0===l?a.none():h(n,t,o,i,u).bind(function(p){var m=n.fromSitus(p),h=r.verify(n,o,i,m.finish(),m.foffset(),u.failure,t);return r.cata(h,function(){return a.none()},function(){return a.some(p)},function(r){return s.eq(o,r)&&0===i?d(n,o,i,e.moveUp,u):f(n,t,r,0,u,l-1)},function(r){return s.eq(o,r)&&i===c.getEnd(r)?d(n,o,i,e.moveDown,u):f(n,t,r,c.getEnd(r),u,l-1)})})},d=function(e,r,o,a,i){return n.getBoxAt(e,r,o).bind(function(n){return m(e,i,a(n,t.getJumpSize()))})},m=function(e,n,t){return l.browser.isChrome()||l.browser.isSafari()||l.browser.isFirefox()||l.browser.isEdge()?n.otherRetry(e,t):l.browser.isIE()?n.ieRetry(e,t):a.none()},h=function(e,t,r,o,a){return n.getBoxAt(e,r,o).bind(function(n){return m(e,a,n)})};return{handle:function(e,n,t){return p(e,n,t).bind(function(r){return f(e,n,r.element(),r.offset(),t,20).map(e.fromSitus)})}}}),a("ephox.sugar.api.search.PredicateExists",["ephox.sugar.api.search.PredicateFind"],function(e){return{any:function(n){return e.first(n).isSome()},ancestor:function(n,t,r){return e.ancestor(n,t,r).isSome()},closest:function(n,t,r){return e.closest(n,t,r).isSome()},sibling:function(n,t){return e.sibling(n,t).isSome()},child:function(n,t){return e.child(n,t).isSome()},descendant:function(n,t){return e.descendant(n,t).isSome()}}}),a("ephox.darwin.keyboard.VerticalMovement",["ephox.darwin.api.Responses","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.TableKeys","ephox.darwin.selection.Util","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.sand.api.PlatformDetection","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.PredicateExists","ephox.sugar.api.search.SelectorFind","ephox.sugar.api.search.Traverse"],function(e,n,t,r,o,a,i,u,s,c,l){var p=i.detect(),f=function(e,n){return s.ancestor(e,function(e){return l.parent(e).exists(function(e){return u.eq(e,n)})})},d=function(e,n,r,i,u){return c.closest(i,"td,th",n).bind(function(i){return c.closest(i,"table",n).bind(function(s){return f(u,s)?t.handle(e,n,r).bind(function(e){return c.closest(e.finish(),"td,th",n).map(function(n){return{start:o.constant(i),finish:o.constant(n),range:o.constant(e)}})}):a.none()})})};return{navigate:function(n,t,o,i,u){return p.browser.isIE()?a.none():d(n,t,o,i,u).map(function(n){var t=n.range();return e.response(a.some(r.makeSitus(t.start(),t.soffset(),t.finish(),t.foffset())),!0)})},select:function(e,t,r,o,a,i,u){return d(e,r,o,a,i).bind(function(e){return n.detect(t,r,e.start(),e.finish(),u)})}}}),a("ephox.darwin.mouse.MouseSelection",["ephox.darwin.selection.CellSelection","ephox.katamari.api.Option","ephox.sugar.api.dom.Compare","ephox.sugar.api.search.SelectorFind"],function(e,n,t,r){var o=function(e,n){return r.closest(e,"td,th",n)};return function(r,a,i,u){var s=n.none(),c=function(){s=n.none()};return{mousedown:function(e){u.clear(a),s=o(e.target(),i)},mouseover:function(n){s.each(function(s){u.clear(a),o(n.target(),i).each(function(n){var o=e.identify(s,n,i).getOr([]);(o.length>1||1===o.length&&!t.eq(s,n))&&(u.selectRange(a,o,s,n),r.selectContents(n))})})},mouseup:function(){s.each(c)}}}}),a("ephox.darwin.navigation.KeyDirection",["ephox.darwin.keyboard.Retries","ephox.darwin.navigation.BeforeAfter","ephox.phoenix.api.dom.DomGather","ephox.sugar.api.search.Traverse","ephox.sugar.api.selection.Situ"],function(e,n,t,r,o){return{down:{traverse:r.nextSibling,gather:t.after,relative:o.before,otherRetry:e.tryDown,ieRetry:e.ieTryDown,failure:n.adt.failedDown},up:{traverse:r.prevSibling,gather:t.before,relative:o.before,otherRetry:e.tryUp,ieRetry:e.ieTryUp,failure:n.adt.failedUp}}}),a("ephox.darwin.api.InputHandlers",["ephox.darwin.api.Responses","ephox.darwin.api.SelectionKeys","ephox.darwin.api.WindowBridge","ephox.darwin.keyboard.KeySelection","ephox.darwin.keyboard.VerticalMovement","ephox.darwin.mouse.MouseSelection","ephox.darwin.navigation.KeyDirection","ephox.darwin.selection.CellSelection","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Options","ephox.katamari.api.Struct","ephox.sugar.api.selection.Situ"],function(e,n,t,r,o,a,i,u,s,c,l,p,f){var d=p.immutable("rows","cols");return{mouse:function(e,n,r,o){var i=t(e),u=a(i,n,r,o);return{mousedown:u.mousedown,mouseover:u.mouseover,mouseup:u.mouseup}},keyboard:function(a,p,m,h){var g=t(a),x=function(){return h.clear(p),c.none()};return{keydown:function(t,a,v,b,w,k){var y=t.raw().which,C=!0===t.raw().shiftKey;return u.retrieve(p,h.selectedSelector()).fold(function(){return n.isDown(y)&&C?s.curry(o.select,g,p,m,i.down,b,a,h.selectRange):n.isUp(y)&&C?s.curry(o.select,g,p,m,i.up,b,a,h.selectRange):n.isDown(y)?s.curry(o.navigate,g,m,i.down,b,a):n.isUp(y)?s.curry(o.navigate,g,m,i.up,b,a):c.none},function(t){var o=function(o){return function(){return l.findMap(o,function(e){return r.update(e.rows(),e.cols(),p,t,h)}).fold(function(){return u.getEdges(p,h.firstSelectedSelector(),h.lastSelectedSelector()).map(function(t){var r=n.isDown(y)||k.isForward(y)?f.after:f.before;return g.setRelativeSelection(f.on(t.first(),0),r(t.table())),h.clear(p),e.response(c.none(),!0)})},function(){return c.some(e.response(c.none(),!0))})}};return n.isDown(y)&&C?o([d(1,0)]):n.isUp(y)&&C?o([d(-1,0)]):k.isBackward(y)&&C?o([d(0,-1),d(-1,0)]):k.isForward(y)&&C?o([d(0,1),d(1,0)]):n.isNavigation(y)&&!1===C?x:c.none})()},keyup:function(e,t,o,a,i){return u.retrieve(p,h.selectedSelector()).fold(function(){var u=e.raw().which;return 0==(!0===e.raw().shiftKey)?c.none():n.isNavigation(u)?r.sync(p,m,t,o,a,i,h.selectRange):c.none()},c.none)}}}}}),a("ephox.sugar.api.properties.Classes",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Class","ephox.sugar.impl.ClassList","global!Array"],function(e,n,t,r){var o=function(e){for(var n=e.dom().classList,t=new r(n.length),o=0;o<n.length;o++)t[o]=n.item(o);return t};return{add:function(t,r){e.each(r,function(e){n.add(t,e)})},remove:function(t,r){e.each(r,function(e){n.remove(t,e)})},toggle:function(t,r){e.each(r,function(e){n.toggle(t,e)})},hasAll:function(t,r){return e.forall(r,function(e){return n.has(t,e)})},hasAny:function(t,r){return e.exists(r,function(e){return n.has(t,e)})},get:function(e){return t.supports(e)?o(e):t.get(e)}}}),a("ephox.sugar.api.properties.OnNode",["ephox.sugar.api.properties.Class","ephox.sugar.api.properties.Classes"],function(e,n){return{addClass:function(n){return function(t){e.add(t,n)}},removeClass:function(n){return function(t){e.remove(t,n)}},removeClasses:function(e){return function(t){n.remove(t,e)}},hasClass:function(n){return function(t){return e.has(t,n)}}}}),a("ephox.darwin.api.SelectionAnnotation",["ephox.katamari.api.Arr","ephox.sugar.api.properties.Attr","ephox.sugar.api.properties.Class","ephox.sugar.api.properties.OnNode","ephox.sugar.api.search.SelectorFilter"],function(e,n,t,r,o){return{byClass:function(n){var a=r.addClass(n.selected()),i=r.removeClasses([n.selected(),n.lastSelected(),n.firstSelected()]),u=function(t){var r=o.descendants(t,n.selectedSelector());e.each(r,i)};return{clear:u,selectRange:function(r,o,i,s){u(r),e.each(o,a),t.add(i,n.firstSelected()),t.add(s,n.lastSelected())},selectedSelector:n.selectedSelector,firstSelectedSelector:n.firstSelectedSelector,lastSelectedSelector:n.lastSelectedSelector}},byAttr:function(t){var r=function(e){n.remove(e,t.selected()),n.remove(e,t.firstSelected()),n.remove(e,t.lastSelected())},a=function(e){n.set(e,t.selected(),"1")},i=function(n){var a=o.descendants(n,t.selectedSelector());e.each(a,r)};return{clear:i,selectRange:function(r,o,u,s){i(r),e.each(o,a),n.set(u,t.firstSelected(),"1"),n.set(s,t.lastSelected(),"1")},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}}}}),a("tinymce.plugins.table.selection.CellSelection",["ephox.darwin.api.InputHandlers","ephox.darwin.api.SelectionAnnotation","ephox.darwin.api.SelectionKeys","ephox.katamari.api.Fun","ephox.katamari.api.Option","ephox.katamari.api.Struct","ephox.snooker.api.TableLookup","ephox.sugar.api.dom.Compare","ephox.sugar.api.node.Element","ephox.sugar.api.selection.Selection","ephox.sugar.selection.core.SelectionDirection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.selection.Ephemera"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d){return function(m,h){var g=a.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),x=o.none(),v=n.byAttr(d);m.on("init",function(){var n=m.getWin(),a=p.getBody(m),d=p.getIsRoot(m),b=function(){var e=m.selection,n=s.fromDom(e.getStart()),t=s.fromDom(e.getEnd()),c=i.table(n),l=i.table(t);c.bind(function(e){return l.bind(function(n){return u.eq(e,n)?o.some(!0):o.none()})}).fold(function(){v.clear(a)},r.noop)},w=e.mouse(n,a,d,v),k=e.keyboard(n,a,d,v),y=function(e,t){t.kill()&&e.kill(),t.selection().each(function(e){var t=c.relative(e.start(),e.finish()),r=l.asLtrRange(n,t);m.selection.setRng(r)})},C=function(e){var n=T(e);if(n.raw().shiftKey&&t.isNavigation(n.raw().which)){var r=m.selection.getRng(),o=s.fromDom(r.startContainer),a=s.fromDom(r.endContainer);k.keyup(n,o,r.startOffset,a,r.endOffset).each(function(e){y(n,e)})}},S=function(e){var n=T(e);h().each(function(e){e.hideBars()});var r=m.selection.getRng(),o=s.fromDom(m.selection.getStart()),a=s.fromDom(r.startContainer),i=s.fromDom(r.endContainer),u=f.directionAt(o).isRtl()?t.rtl:t.ltr;k.keydown(n,a,r.startOffset,i,r.endOffset,u).each(function(e){y(n,e)}),h().each(function(e){e.showBars()})},T=function(e){var n=s.fromDom(e.target),t=function(){e.stopPropagation()},o=function(){e.preventDefault()},a=r.compose(o,t);return{target:r.constant(n),x:r.constant(e.x),y:r.constant(e.y),stop:t,prevent:o,kill:a,raw:r.constant(e)}},R=function(e){return 0===e.button},A=function(e){return e.buttons===undefined||0!=(1&e.buttons)},O=function(e){R(e)&&w.mousedown(T(e))},D=function(e){A(e)&&w.mouseover(T(e))},E=function(e){R&&w.mouseup(T(e))};m.on("mousedown",O),m.on("mouseover",D),m.on("mouseup",E),m.on("keyup",C),m.on("keydown",S),m.on("nodechange",b),x=o.some(g({mousedown:O,mouseover:D,mouseup:E,keyup:C,keydown:S}))});var b=function(){x.each(function(){})};return{clear:v.clear,destroy:b}}}),a("tinymce.plugins.table.selection.Selections",["ephox.darwin.api.TableSelection","tinymce.plugins.table.alien.Util","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.SelectionTypes"],function(e,n,t,r){return function(o){return{get:function(){var a=n.getBody(o);return e.retrieve(a,t.selectedSelector()).fold(function(){return o.selection.getStart()===undefined?r.none():r.single(o.selection)},function(e){return r.multiple(e)})}}}}),a("tinymce.plugins.table.ui.Buttons",["tinymce.core.util.Tools"],function(e){var n=e.each;return{addButtons:function(e,t){function r(n){return function(){e.execCommand(n)}}var o=[];n("inserttable tableprops deletetable | cell row column".split(" "),function(n){"|"==n?o.push({text:"-"}):o.push(e.menuItems[n])}),e.addButton("table",{type:"menubutton",title:"Table",menu:o}),e.addButton("tableprops",{title:"Table properties",onclick:t.tableProps,icon:"table"}),e.addButton("tabledelete",{title:"Delete table",onclick:r("mceTableDelete")}),e.addButton("tablecellprops",{title:"Cell properties",onclick:r("mceTableCellProps")}),e.addButton("tablemergecells",{title:"Merge cells",onclick:r("mceTableMergeCells")}),e.addButton("tablesplitcells",{title:"Split cell",onclick:r("mceTableSplitCells")}),e.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:r("mceTableInsertRowBefore")}),e.addButton("tableinsertrowafter",{title:"Insert row after",onclick:r("mceTableInsertRowAfter")}),e.addButton("tabledeleterow",{title:"Delete row",onclick:r("mceTableDeleteRow")}),e.addButton("tablerowprops",{title:"Row properties",onclick:r("mceTableRowProps")}),e.addButton("tablecutrow",{title:"Cut row",onclick:r("mceTableCutRow")}),e.addButton("tablecopyrow",{title:"Copy row",onclick:r("mceTableCopyRow")}),e.addButton("tablepasterowbefore",{title:"Paste row before",onclick:r("mceTablePasteRowBefore")}),e.addButton("tablepasterowafter",{title:"Paste row after",onclick:r("mceTablePasteRowAfter")}),e.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:r("mceTableInsertColBefore")}),e.addButton("tableinsertcolafter",{title:"Insert column after",onclick:r("mceTableInsertColAfter")}),e.addButton("tabledeletecol",{title:"Delete column",onclick:r("mceTableDeleteCol")})},addToolbars:function(e){var n=function(n){return e.dom.is(n,"table")&&e.getBody().contains(n)},t=e.settings.table_toolbar;""!==t&&!1!==t&&(t||(t="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"),e.addContextToolbar(n,t))}}}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.plugins.table.ui.Dialogs",["tinymce.core.util.Tools","tinymce.core.Env","tinymce.plugins.table.actions.InsertTable"],function(e,n,t){var r=e.each;return function(o){function a(){var e=o.settings.color_picker_callback;if(e)return function(){var n=this;e.call(o,function(e){n.value(e).fire("change")},n.value())}}function i(e){return{title:"Advanced",type:"form",defaults:{onchange:function(){f(e,this.parents().reverse()[0],"style"==this.name())}},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border color",type:"colorbox",name:"borderColor",onaction:a()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:a()}]}]}}function u(e){return e?e.replace(/px$/,""):""}function s(e){return/^[0-9]+$/.test(e)&&(e+="px"),e}function c(e){r("left center right".split(" "),function(n){o.formatter.remove("align"+n,{},e)})}function l(e){r("top middle bottom".split(" "),function(n){o.formatter.remove("valign"+n,{},e)})}function p(n,t,r){function o(n,r){return r=r||[],e.each(n,function(e){var n={text:e.text||e.title};e.menu?n.menu=o(e.menu):(n.value=e.value,t&&t(n)),r.push(n)}),r}return o(n,r||[])}function f(e,n,t){var r=n.toJSON(),o=e.parseStyle(r.style);t?(n.find("#borderColor").value(o["border-color"]||"")[0].fire("change"),n.find("#backgroundColor").value(o["background-color"]||"")[0].fire("change")):(o["border-color"]=r.borderColor,o["background-color"]=r.backgroundColor),n.find("#style").value(e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}function d(e,n,t){var r=e.parseStyle(e.getAttrib(t,"style"));r["border-color"]&&(n.borderColor=r["border-color"]),r["background-color"]&&(n.backgroundColor=r["background-color"]),n.style=e.serializeStyle(r)}function m(e,n,t){var o=e.parseStyle(e.getAttrib(n,"style"));r(t,function(e){o[e.name]=e.value}),e.setAttrib(n,"style",e.serializeStyle(e.parseStyle(e.serializeStyle(o))))}var h=this;h.tableProps=function(){h.table(!0)},h.table=function(a){function l(){function r(e,n,t){if("TD"===e.tagName||"TH"===e.tagName)y.setStyle(e,n,t);else if(e.children)for(var o=0;o<e.children.length;o++)r(e.children[o],n,t)}var a;f(y,this),
C=e.extend(C,this.toJSON()),!1===C["class"]&&delete C["class"],o.undoManager.transact(function(){if(g||(g=t.insert(o,C.cols||1,C.rows||1)),o.dom.setAttribs(g,{style:C.style,"class":C["class"]}),o.settings.table_style_by_css){if(k=[],k.push({name:"border-width",value:s(C.border)}),k.push({name:"border-spacing",value:s(C.cellspacing)}),m(y,g,k),y.setAttribs(g,{"data-mce-border-color":C.borderColor,"data-mce-cell-padding":C.cellpadding,"data-mce-border":C.border}),g.children)for(var e=0;e<g.children.length;e++)r(g.children[e],{"border-width":s(C.border),"border-color":C.borderColor,padding:s(C.cellpadding)})}else o.dom.setAttribs(g,{border:C.border,cellpadding:C.cellpadding,cellspacing:C.cellspacing});y.getAttrib(g,"width")&&!o.settings.table_style_by_css?y.setAttrib(g,"width",u(C.width)):y.setStyle(g,"width",s(C.width)),y.setStyle(g,"height",s(C.height)),a=y.select("caption",g)[0],a&&!C.caption&&y.remove(a),!a&&C.caption&&(a=y.create("caption"),a.innerHTML=n.ie?"\xa0":'<br data-mce-bogus="1"/>',g.insertBefore(a,g.firstChild)),c(g),C.align&&o.formatter.apply("align"+C.align,{},g),o.focus(),o.addVisual()})}function h(e,n){function t(e,t){for(var r=0;r<t.length;r++){var o=y.getStyle(t[r],n);if(void 0===e&&(e=o),e!=o)return""}return e}var r,a=o.dom.select("td,th",e);return r=t(r,a)}var g,x,v,b,w,k,y=o.dom,C={};!0===a?(g=y.getParent(o.selection.getStart(),"table"))&&(C={width:u(y.getStyle(g,"width")||y.getAttrib(g,"width")),height:u(y.getStyle(g,"height")||y.getAttrib(g,"height")),cellspacing:u(y.getStyle(g,"border-spacing")||y.getAttrib(g,"cellspacing")),cellpadding:y.getAttrib(g,"data-mce-cell-padding")||y.getAttrib(g,"cellpadding")||h(g,"padding"),border:y.getAttrib(g,"data-mce-border")||y.getAttrib(g,"border")||h(g,"border"),borderColor:y.getAttrib(g,"data-mce-border-color"),caption:!!y.select("caption",g)[0],"class":y.getAttrib(g,"class")},r("left center right".split(" "),function(e){o.formatter.matchNode(g,"align"+e)&&(C.align=e)})):(x={label:"Cols",name:"cols"},v={label:"Rows",name:"rows"}),o.settings.table_class_list&&(C["class"]&&(C["class"]=C["class"].replace(/\s*mce\-item\-table\s*/g,"")),b={name:"class",type:"listbox",label:"Class",values:p(o.settings.table_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"table",classes:[e.value]})})})}),w={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:!1!==o.settings.table_appearance_options?[x,v,{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[x,v,{label:"Width",name:"width"},{label:"Height",name:"height"}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},b]},!1!==o.settings.table_advtab?(d(y,C,g),o.windowManager.open({title:"Table properties",data:C,bodyType:"tabpanel",body:[{title:"General",type:"form",items:w},i(y)],onsubmit:l})):o.windowManager.open({title:"Table properties",data:C,body:w,onsubmit:l})},h.cell=function(){function n(e,n,t){(1===v.length||t)&&x.setAttrib(e,n,t)}function t(e,n,t){(1===v.length||t)&&x.setStyle(e,n,t)}function a(){f(x,this),h=e.extend(h,this.toJSON()),o.undoManager.transact(function(){r(v,function(e){n(e,"scope",h.scope),n(e,"style",h.style),n(e,"class",h["class"]),t(e,"width",s(h.width)),t(e,"height",s(h.height)),h.type&&e.nodeName.toLowerCase()!==h.type&&(e=x.rename(e,h.type)),1===v.length&&(c(e),l(e)),h.align&&o.formatter.apply("align"+h.align,{},e),h.valign&&o.formatter.apply("valign"+h.valign,{},e)}),o.focus()})}var m,h,g,x=o.dom,v=[];if(v=o.dom.select("td[data-mce-selected],th[data-mce-selected]"),m=o.dom.getParent(o.selection.getStart(),"td,th"),!v.length&&m&&v.push(m),m=m||v[0]){v.length>1?h={width:"",height:"",scope:"","class":"",align:"",style:"",type:m.nodeName.toLowerCase()}:(h={width:u(x.getStyle(m,"width")||x.getAttrib(m,"width")),height:u(x.getStyle(m,"height")||x.getAttrib(m,"height")),scope:x.getAttrib(m,"scope"),"class":x.getAttrib(m,"class")},h.type=m.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(m,"align"+e)&&(h.align=e)}),r("top middle bottom".split(" "),function(e){o.formatter.matchNode(m,"valign"+e)&&(h.valign=e)}),d(x,h,m)),o.settings.table_cell_class_list&&(g={name:"class",type:"listbox",label:"Class",values:p(o.settings.table_cell_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"td",classes:[e.value]})})})});var b={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width"},{label:"Height",name:"height"},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},g]};!1!==o.settings.table_cell_advtab?o.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:h,body:[{title:"General",type:"form",items:b},i(x)],onsubmit:a}):o.windowManager.open({title:"Cell properties",data:h,body:b,onsubmit:a})}},h.row=function(){function n(e,n,t){(1===w.length||t)&&b.setAttrib(e,n,t)}function t(e,n,t){(1===w.length||t)&&b.setStyle(e,n,t)}function a(){var a,i,u;f(b,this),x=e.extend(x,this.toJSON()),o.undoManager.transact(function(){var e=x.type;r(w,function(r){n(r,"scope",x.scope),n(r,"style",x.style),n(r,"class",x["class"]),t(r,"height",s(x.height)),e!==r.parentNode.nodeName.toLowerCase()&&(a=b.getParent(r,"table"),i=r.parentNode,u=b.select(e,a)[0],u||(u=b.create(e),a.firstChild?"CAPTION"===a.firstChild.nodeName?b.insertAfter(u,a.firstChild):a.insertBefore(u,a.firstChild):a.appendChild(u)),u.appendChild(r),i.hasChildNodes()||b.remove(i)),1===w.length&&c(r),x.align&&o.formatter.apply("align"+x.align,{},r)}),o.focus()})}var l,m,h,g,x,v,b=o.dom,w=[];l=o.dom.getParent(o.selection.getStart(),"table"),m=o.dom.getParent(o.selection.getStart(),"td,th"),r(l.rows,function(e){r(e.cells,function(n){if(b.getAttrib(n,"data-mce-selected")||n==m)return w.push(e),!1})}),(h=w[0])&&(w.length>1?x={height:"",scope:"","class":"",align:"",type:h.parentNode.nodeName.toLowerCase()}:(x={height:u(b.getStyle(h,"height")||b.getAttrib(h,"height")),scope:b.getAttrib(h,"scope"),"class":b.getAttrib(h,"class")},x.type=h.parentNode.nodeName.toLowerCase(),r("left center right".split(" "),function(e){o.formatter.matchNode(h,"align"+e)&&(x.align=e)}),d(b,x,h)),o.settings.table_row_class_list&&(g={name:"class",type:"listbox",label:"Class",values:p(o.settings.table_row_class_list,function(e){e.value&&(e.textStyle=function(){return o.formatter.getCssText({block:"tr",classes:[e.value]})})})}),v={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},g]},!1!==o.settings.table_row_advtab?o.windowManager.open({title:"Row properties",data:x,bodyType:"tabpanel",body:[{title:"General",type:"form",items:v},i(b)],onsubmit:a}):o.windowManager.open({title:"Row properties",data:x,body:v,onsubmit:a}))}}}),a("tinymce.plugins.table.ui.MenuItems",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.TableLookup","ephox.sugar.api.node.Element","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.queries.TableTargets"],function(e,n,t,r,o,a){return{addMenuItems:function(i,u,s){function c(e){return function(){i.execCommand(e)}}var l=n.none(),p=[],f=[],d=[],m=[],h=function(e){e.disabled(!0)},g=function(e){e.disabled(!1)},x=function(){var e=this;p.push(e),l.fold(function(){h(e)},function(){g(e)})},v=function(){var e=this;f.push(e),l.fold(function(){h(e)},function(){g(e)})},b=function(){var e=this;d.push(e),l.fold(function(){h(e)},function(n){e.disabled(n.mergable().isNone())})},w=function(){var e=this;m.push(e),l.fold(function(){h(e)},function(n){e.disabled(n.unmergable().isNone())})},k=function(){l.fold(function(){e.each(p,h),e.each(f,h),e.each(d,h),e.each(m,h)},function(n){e.each(p,g),e.each(f,g),e.each(d,function(e){e.disabled(n.mergable().isNone())}),e.each(m,function(e){e.disabled(n.unmergable().isNone())})})};i.on("init",function(){i.on("nodechange",function(){var e=n.from(i.dom.getParent(i.selection.getStart(),"th,td"));l=e.bind(function(e){var n=r.fromDom(e);return t.table(n).map(function(e){return a.forMenu(s,e,n)})}),k()})});var y=function(){var e="";e='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var n=0;n<10;n++){e+="<tr>";for(var t=0;t<10;t++)e+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*n+t)+'" href="#" data-mce-x="'+t+'" data-mce-y="'+n+'"></a></td>';e+="</tr>"}return e+="</table>",e+='<div class="mce-text-center" role="presentation">1 x 1</div>'},C=function(e,n,t,r){var o,a,i,u,s,c=r.getEl().getElementsByTagName("table")[0],l=r.isRtl()||"tl-tr"==r.parent().rel;for(c.nextSibling.innerHTML=n+1+" x "+(t+1),l&&(n=9-n),a=0;a<10;a++)for(o=0;o<10;o++)u=c.rows[a].childNodes[o].firstChild,s=(l?o>=n:o<=n)&&a<=t,e.dom.toggleClass(u,"mce-active",s),s&&(i=u);return i.parentNode},S=!1===i.settings.table_grid?{text:"Table",icon:"table",context:"table",onclick:u.table}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),u.table())},onshow:function(){C(i,0,0,this.menu.items()[0])},onhide:function(){var e=this.menu.items()[0].getEl().getElementsByTagName("a");i.dom.removeClass(e,"mce-active"),i.dom.addClass(e[0],"mce-active")},menu:[{type:"container",html:y(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var n,t,r=e.target;"A"==r.tagName.toUpperCase()&&(n=parseInt(r.getAttribute("data-mce-x"),10),t=parseInt(r.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"==this.parent().rel)&&(n=9-n),n===this.lastX&&t===this.lastY||(C(i,n,t,e.control),this.lastX=n,this.lastY=t))},onclick:function(e){var n=this;"A"==e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),n.parent().cancel(),i.undoManager.transact(function(){o.insert(i,n.lastX+1,n.lastY+1)}),i.addVisual())}}]},T={text:"Table properties",context:"table",onPostRender:x,onclick:u.tableProps},R={text:"Delete table",context:"table",onPostRender:x,cmd:"mceTableDelete"},A={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:c("mceTableInsertRowBefore"),onPostRender:v},{text:"Insert row after",onclick:c("mceTableInsertRowAfter"),onPostRender:v},{text:"Delete row",onclick:c("mceTableDeleteRow"),onPostRender:v},{text:"Row properties",onclick:c("mceTableRowProps"),onPostRender:v},{text:"-"},{text:"Cut row",onclick:c("mceTableCutRow"),onPostRender:v},{text:"Copy row",onclick:c("mceTableCopyRow"),onPostRender:v},{text:"Paste row before",onclick:c("mceTablePasteRowBefore"),onPostRender:v},{text:"Paste row after",onclick:c("mceTablePasteRowAfter"),onPostRender:v}]},O={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:c("mceTableInsertColBefore"),onPostRender:v},{text:"Insert column after",onclick:c("mceTableInsertColAfter"),onPostRender:v},{text:"Delete column",onclick:c("mceTableDeleteCol"),onPostRender:v}]},D={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:c("mceTableCellProps"),onPostRender:v},{text:"Merge cells",onclick:c("mceTableMergeCells"),onPostRender:b},{text:"Split cell",onclick:c("mceTableSplitCells"),onPostRender:w}]};i.addMenuItem("inserttable",S),i.addMenuItem("tableprops",T),i.addMenuItem("deletetable",R),i.addMenuItem("row",A),i.addMenuItem("column",O),i.addMenuItem("cell",D)}}}),a("tinymce.plugins.table.Plugin",["ephox.katamari.api.Arr","ephox.katamari.api.Option","ephox.snooker.api.ResizeWire","ephox.snooker.api.TableDirection","ephox.snooker.api.TableResize","ephox.sugar.api.node.Element","ephox.sugar.api.properties.Attr","ephox.sugar.api.search.SelectorFilter","tinymce.core.PluginManager","tinymce.plugins.table.actions.Clipboard","tinymce.plugins.table.actions.InsertTable","tinymce.plugins.table.actions.TableActions","tinymce.plugins.table.actions.TableCommands","tinymce.plugins.table.actions.TableWire","tinymce.plugins.table.queries.Direction","tinymce.plugins.table.queries.TabContext","tinymce.plugins.table.selection.CellSelection","tinymce.plugins.table.selection.Ephemera","tinymce.plugins.table.selection.Selections","tinymce.plugins.table.ui.Buttons","tinymce.plugins.table.ui.Dialogs","tinymce.plugins.table.ui.MenuItems"],function(e,n,t,r,o,a,i,u,s,c,l,p,f,d,m,h,g,x,v,b,w,k){function y(s){var y=this,C=function(){return D},S=function(){return E.getOr(t.only(a.fromDom(s.getBody())))},T=g(s,C),R=new w(s),A=p(s,S),O=v(s);f.registerCommands(s,R,A,T,O),c.registerEvents(s,O,A,T),k.addMenuItems(s,R,O),b.addButtons(s,R),b.addToolbars(s);var D=n.none(),E=n.none(),N=n.none();s.on("init",function(){var t=r(m.directionAt),a=d.get(s);if(E=n.some(a),s.settings.object_resizing&&!1!==s.settings.table_resize_bars&&(!0===s.settings.object_resizing||"table"===s.settings.object_resizing)){var c=o(a,t);c.on(),c.events.startDrag.bind(function(){N=n.some(s.selection.getRng())}),c.events.afterResize.bind(function(n){var t=n.table(),r=u.descendants(t,"td[data-mce-style],th[data-mce-style]");e.each(r,function(e){i.remove(e,"data-mce-style")}),s.focus(),N.each(function(e){s.selection.setRng(e)}),s.undoManager.add()}),D=n.some(c)}}),s.on("PreInit",function(){s.serializer.addTempAttr(x.firstSelected()),s.serializer.addTempAttr(x.lastSelected())}),!1!==s.settings.table_tab_navigation&&s.on("keydown",function(e){h.handle(e,s,A,S)}),s.on("remove",function(){D.each(function(e){e.destroy()}),T.destroy()}),y.insertTable=function(e,n){l.insert(s,e,n)},y.setClipboardRows=f.setClipboardRows,y.getClipboardRows=f.getClipboardRows}return s.add("table",y),function(){}}),r("tinymce.plugins.table.Plugin")()}();