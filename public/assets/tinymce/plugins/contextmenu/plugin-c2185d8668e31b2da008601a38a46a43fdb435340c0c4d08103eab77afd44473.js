!function(){var n={},t=function(t){for(var e=n[t],o=e.deps,u=e.defn,i=o.length,c=new Array(i),l=0;l<i;++l)c[l]=r(o[l]);var a=u.apply(null,c);if(a===undefined)throw"module ["+t+"] returned undefined";e.instance=a},e=function(t,e,r){if("string"!=typeof t)throw"module id must be a string";if(e===undefined)throw"no dependencies for "+t;if(r===undefined)throw"no definition function for "+t;n[t]={deps:e,defn:r,instance:undefined}},r=function(e){var r=n[e];if(r===undefined)throw"module ["+e+"] was undefined";return r.instance===undefined&&t(e),r.instance},o=function(n,t){for(var e=n.length,o=new Array(e),u=0;u<e;++u)o[u]=r(n[u]);t.apply(null,o)};({}).bolt={module:{api:{define:e,require:o,demand:r}}};var u=e,i=function(n,t){u(n,[],function(){return t})};u("ephox.katamari.api.Cell",[],function(){var n=function(t){var e=t,r=function(){return e};return{get:r,set:function(n){e=n},clone:function(){return n(r())}}};return n}),i("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),u("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),u("tinymce.plugins.contextmenu.api.Api",[],function(){return{get:function(n){return{isContextMenuVisible:function(){return n.get()}}}}}),u("tinymce.core.dom.DOMUtils",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.dom.DOMUtils")}),u("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.Env")}),u("tinymce.plugins.contextmenu.api.Settings",[],function(){return{shouldNeverUseNative:function(n){return n.settings.contextmenu_never_use_native},getContextMenu:function(n){return n.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")}}}),i("global!Array",Array),i("global!Error",Error),u("ephox.katamari.api.Fun",["global!Array","global!Error"],function(n,t){var e=function(){},r=function(n,t){return function(){return n(t.apply(null,arguments))}},o=function(n){return function(){return n}};return{noop:e,compose:r,constant:o,identity:function(n){return n},tripleEquals:function(n,t){return n===t},curry:function(t){for(var e=new n(arguments.length-1),r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){for(var r=new n(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var u=e.concat(r);return t.apply(null,u)}},not:function(n){return function(){return!n.apply(null,arguments)}},die:function(n){return function(){throw new t(n)}},apply:function(n){return n()},call:function(n){n()},never:o(!1),always:o(!0)}}),i("global!Object",Object),u("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(n,t){var e=n.never,r=n.always,o=function(){return u},u=function(){var u=function(n){return n.isNone()},i=function(n){return n()},c=function(n){return n},l=function(){},a={fold:function(n){return n()},is:e,isSome:e,isNone:r,getOr:c,getOrThunk:i,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:c,orThunk:i,map:o,ap:o,each:l,bind:o,flatten:o,exists:e,forall:r,filter:o,equals:u,equals_:u,toArray:function(){return[]},toString:n.constant("none()")};return t.freeze&&t.freeze(a),a}(),i=function(n){var t=function(){return n},c=function(){return f},l=function(t){return i(t(n))},a=function(t){return t(n)},f={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:r,isNone:e,getOr:t,getOrThunk:t,getOrDie:t,or:c,orThunk:c,map:l,ap:function(t){return t.fold(o,function(t){return i(t(n))})},each:function(t){t(n)},bind:a,flatten:t,exists:a,forall:a,filter:function(t){return t(n)?f:u},equals:function(t){return t.is(n)},equals_:function(t,r){return t.fold(e,function(t){return r(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return f};return{some:i,none:o,from:function(n){return null===n||n===undefined?u:i(n)}}}),i("global!String",String),u("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(n,t,e,r){var o=function(){var n=t.prototype.indexOf,e=function(t,e){return n.call(t,e)},r=function(n,t){return b(n,t)};return n===undefined?r:e}(),u=function(t,e){var r=o(t,e);return-1===r?n.none():n.some(r)},i=function(n,t){return o(n,t)>-1},c=function(n,t){return x(n,t).isSome()},l=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},a=function(n,t){for(var e=[],r=0;r<n.length;r+=t){var o=n.slice(r,r+t);e.push(o)}return e},f=function(n,e){for(var r=n.length,o=new t(r),u=0;u<r;u++){var i=n[u];o[u]=e(i,u,n)}return o},s=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e,n)}},g=function(n,t){for(var e=n.length-1;e>=0;e--){t(n[e],e,n)}},m=function(n,t){for(var e=[],r=[],o=0,u=n.length;o<u;o++){var i=n[o];(t(i,o,n)?e:r).push(i)}return{pass:e,fail:r}},p=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var u=n[r];t(u,r,n)&&e.push(u)}return e},h=function(n,t){if(0===n.length)return[];for(var e=t(n[0]),r=[],o=[],u=0,i=n.length;u<i;u++){var c=n[u],l=t(c);l!==e&&(r.push(o),o=[]),e=l,o.push(c)}return 0!==o.length&&r.push(o),r},v=function(n,t,e){return g(n,function(n){e=t(e,n)}),e},d=function(n,t,e){return s(n,function(n){e=t(e,n)}),e},y=function(t,e){for(var r=0,o=t.length;r<o;r++){var u=t[r];if(e(u,r,t))return n.some(u)}return n.none()},x=function(t,e){for(var r=0,o=t.length;r<o;r++){if(e(t[r],r,t))return n.some(r)}return n.none()},b=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},w=t.prototype.push,O=function(n){for(var r=[],o=0,u=n.length;o<u;++o){if(!t.prototype.isPrototypeOf(n[o]))throw new e("Arr.flatten item "+o+" was not an array, input: "+n);w.apply(r,n[o])}return r},T=function(n,t){var e=f(n,t);return O(e)},k=function(n,t){for(var e=0,r=n.length;e<r;++e){if(!0!==t(n[e],e,n))return!1}return!0},A=function(n,t){return n.length===t.length&&k(n,function(n,e){return n===t[e]})},M=t.prototype.slice;return{map:f,each:s,eachr:g,partition:m,filter:p,groupBy:h,indexOf:u,foldr:v,foldl:d,find:y,findIndex:x,flatten:O,bind:T,forall:k,exists:c,contains:i,equal:A,reverse:function(n){var t=M.call(n,0);return t.reverse(),t},chunk:a,difference:function(n,t){return p(n,function(n){return!i(t,n)})},mapToObject:function(n,t){for(var e={},o=0,u=n.length;o<u;o++){var i=n[o];e[r(i)]=t(i,o)}return e},pure:function(n){return[n]},sort:function(n,t){var e=M.call(n,0);return e.sort(t),e},range:l,head:function(t){return 0===t.length?n.none():n.some(t[0])},last:function(t){return 0===t.length?n.none():n.some(t[t.length-1])}}}),u("tinymce.plugins.contextmenu.core.RangePoint",["ephox.katamari.api.Arr"],function(n){var t=function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom};return{isXYWithinRange:function(e,r,o){return!o.collapsed&&n.foldl(o.getClientRects(),function(n,o){return n||t(o,e,r)},!1)}}}),u("tinymce.core.ui.Factory",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.ui.Factory")}),u("tinymce.core.util.Tools",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Tools")}),u("tinymce.plugins.contextmenu.ui.ContextMenu",["tinymce.core.ui.Factory","tinymce.core.util.Tools","tinymce.plugins.contextmenu.api.Settings"],function(n,t,e){var r=function(r,o){var u,i,c=[];i=e.getContextMenu(r),t.each(i.split(/[ ,]/),function(n){var t=r.menuItems[n];"|"===n&&(t={text:n}),t&&(t.shortcut="",c.push(t))});for(var l=0;l<c.length;l++)"|"===c[l].text&&(0!==l&&l!==c.length-1||c.splice(l,1));return u=n.create("menu",{items:c,context:"contextmenu",classes:"contextmenu"}).renderTo(),u.on("hide",function(n){n.control===this&&o.set(!1)}),r.on("remove",function(){u.remove(),u=null}),u};return{show:function(n,t,e,o,u){null===u.get()?u.set(r(n,o)):u.get().show(),u.get().moveTo(t,e),o.set(!0)}}}),u("tinymce.plugins.contextmenu.core.Bind",["tinymce.core.dom.DOMUtils","tinymce.core.Env","tinymce.plugins.contextmenu.api.Settings","tinymce.plugins.contextmenu.core.RangePoint","tinymce.plugins.contextmenu.ui.ContextMenu"],function(n,t,e,r,o){var u=function(n,t){return t.ctrlKey&&!e.shouldNeverUseNative(n)},i=function(){return t.mac&&t.webkit},c=function(n){return n&&"IMG"===n.nodeName},l=function(n,t){return c(n.target)&&!1===r.isXYWithinRange(n.clientX,n.clientY,t)};return{setup:function(t,e,r){t.on("mousedown",function(n){i()&&2===n.button&&!u(t,n)&&t.selection.isCollapsed()&&t.once("contextmenu",function(n){c(n.target)||t.selection.placeCaretAt(n.clientX,n.clientY)})}),t.on("contextmenu",function(i){var c=i.pageX,a=i.pageY;if(!t.inline){var f=n.DOM.getPos(t.getContentAreaContainer());c=f.x+i.clientX,a=f.y+i.clientY}u(t,i)||(l(i,t.selection.getRng())&&t.selection.select(i.target),i.preventDefault(),o.show(t,c,a,e,r))})}}}),u("tinymce.plugins.contextmenu.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.contextmenu.api.Api","tinymce.plugins.contextmenu.core.Bind"],function(n,t,e,r){return t.add("contextmenu",function(t){var o=n(null),u=n(!1);return r.setup(t,u,o),e.get(u)}),function(){}}),r("tinymce.plugins.contextmenu.Plugin")()}();