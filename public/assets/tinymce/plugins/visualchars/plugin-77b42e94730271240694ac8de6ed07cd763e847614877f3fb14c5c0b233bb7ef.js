!function(){var n={},e=function(e){for(var r=n[e],o=r.deps,i=r.defn,u=o.length,a=new Array(u),c=0;c<u;++c)a[c]=t(o[c]);var l=i.apply(null,a);if(l===undefined)throw"module ["+e+"] returned undefined";r.instance=l},r=function(e,r,t){if("string"!=typeof e)throw"module id must be a string";if(r===undefined)throw"no dependencies for "+e;if(t===undefined)throw"no definition function for "+e;n[e]={deps:r,defn:t,instance:undefined}},t=function(r){var t=n[r];if(t===undefined)throw"module ["+r+"] was undefined";return t.instance===undefined&&e(r),t.instance},o=function(n,e){for(var r=n.length,o=new Array(r),i=0;i<r;++i)o[i]=t(n[i]);e.apply(null,o)};({}).bolt={module:{api:{define:r,require:o,demand:t}}};var i=r,u=function(n,e){i(n,[],function(){return e})};i("ephox.katamari.api.Cell",[],function(){var n=function(e){var r=e,t=function(){return r};return{get:t,set:function(n){r=n},clone:function(){return n(t())}}};return n}),u("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),i("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.PluginManager")}),i("tinymce.plugins.visualchars.api.Api",[],function(){return{get:function(n){return{isEnabled:function(){return n.get()}}}}}),i("tinymce.plugins.visualchars.api.Events",[],function(){return{fireVisualChars:function(n,e){return n.fire("VisualChars",{state:e})}}}),i("tinymce.plugins.visualchars.core.Data",[],function(){var n={"\xa0":"nbsp","\xad":"shy"},e=function(n,e){var r,t="";for(r in n)t+=r;return new RegExp("["+t+"]",e?"g":"")},r=function(n){var e,r="";for(e in n)r&&(r+=","),r+="span.mce-"+n[e];return r};return{charMap:n,regExp:e(n),regExpGlobal:e(n,!0),selector:r(n),charMapToRegExp:e,charMapToSelector:r}}),u("global!Array",Array),u("global!Error",Error),i("ephox.katamari.api.Fun",["global!Array","global!Error"],function(n,e){var r=function(){},t=function(n,e){return function(){return n(e.apply(null,arguments))}},o=function(n){return function(){return n}};return{noop:r,compose:t,constant:o,identity:function(n){return n},tripleEquals:function(n,e){return n===e},curry:function(e){for(var r=new n(arguments.length-1),t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=new n(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];var i=r.concat(t);return e.apply(null,i)}},not:function(n){return function(){return!n.apply(null,arguments)}},die:function(n){return function(){throw new e(n)}},apply:function(n){return n()},call:function(n){n()},never:o(!1),always:o(!0)}}),u("global!Object",Object),i("ephox.katamari.api.Option",["ephox.katamari.api.Fun","global!Object"],function(n,e){var r=n.never,t=n.always,o=function(){return i},i=function(){var i=function(n){return n.isNone()},u=function(n){return n()},a=function(n){return n},c=function(){},l={fold:function(n){return n()},is:r,isSome:r,isNone:t,getOr:a,getOrThunk:u,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:a,orThunk:u,map:o,ap:o,each:c,bind:o,flatten:o,exists:r,forall:t,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:n.constant("none()")};return e.freeze&&e.freeze(l),l}(),u=function(n){var e=function(){return n},a=function(){return s},c=function(e){return u(e(n))},l=function(e){return e(n)},s={fold:function(e,r){return r(n)},is:function(e){return n===e},isSome:t,isNone:r,getOr:e,getOrThunk:e,getOrDie:e,or:a,orThunk:a,map:c,ap:function(e){return e.fold(o,function(e){return u(e(n))})},each:function(e){e(n)},bind:l,flatten:e,exists:l,forall:l,filter:function(e){return e(n)?s:i},equals:function(e){return e.is(n)},equals_:function(e,t){return e.fold(r,function(e){return t(n,e)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return s};return{some:u,none:o,from:function(n){return null===n||n===undefined?i:u(n)}}}),u("global!String",String),i("ephox.katamari.api.Arr",["ephox.katamari.api.Option","global!Array","global!Error","global!String"],function(n,e,r,t){var o=function(){var n=e.prototype.indexOf,r=function(e,r){return n.call(e,r)},t=function(n,e){return E(n,e)};return n===undefined?t:r}(),i=function(e,r){var t=o(e,r);return-1===t?n.none():n.some(t)},u=function(n,e){return o(n,e)>-1},a=function(n,e){return T(n,e).isSome()},c=function(n,e){for(var r=[],t=0;t<n;t++)r.push(e(t));return r},l=function(n,e){for(var r=[],t=0;t<n.length;t+=e){var o=n.slice(t,t+e);r.push(o)}return r},s=function(n,r){for(var t=n.length,o=new e(t),i=0;i<t;i++){var u=n[i];o[i]=r(u,i,n)}return o},f=function(n,e){for(var r=0,t=n.length;r<t;r++){e(n[r],r,n)}},p=function(n,e){for(var r=n.length-1;r>=0;r--){e(n[r],r,n)}},d=function(n,e){for(var r=[],t=[],o=0,i=n.length;o<i;o++){var u=n[o];(e(u,o,n)?r:t).push(u)}return{pass:r,fail:t}},h=function(n,e){for(var r=[],t=0,o=n.length;t<o;t++){var i=n[t];e(i,t,n)&&r.push(i)}return r},g=function(n,e){if(0===n.length)return[];for(var r=e(n[0]),t=[],o=[],i=0,u=n.length;i<u;i++){var a=n[i],c=e(a);c!==r&&(t.push(o),o=[]),r=c,o.push(a)}return 0!==o.length&&t.push(o),t},m=function(n,e,r){return p(n,function(n){r=e(r,n)}),r},v=function(n,e,r){return f(n,function(n){r=e(r,n)}),r},y=function(e,r){for(var t=0,o=e.length;t<o;t++){var i=e[t];if(r(i,t,e))return n.some(i)}return n.none()},T=function(e,r){for(var t=0,o=e.length;t<o;t++){if(r(e[t],t,e))return n.some(t)}return n.none()},E=function(n,e){for(var r=0,t=n.length;r<t;++r)if(n[r]===e)return r;return-1},b=e.prototype.push,N=function(n){for(var t=[],o=0,i=n.length;o<i;++o){if(!e.prototype.isPrototypeOf(n[o]))throw new r("Arr.flatten item "+o+" was not an array, input: "+n);b.apply(t,n[o])}return t},x=function(n,e){var r=s(n,e);return N(r)},C=function(n,e){for(var r=0,t=n.length;r<t;++r){if(!0!==e(n[r],r,n))return!1}return!0},w=function(n,e){return n.length===e.length&&C(n,function(n,r){return n===e[r]})},O=e.prototype.slice;return{map:s,each:f,eachr:p,partition:d,filter:h,groupBy:g,indexOf:i,foldr:m,foldl:v,find:y,findIndex:T,flatten:N,bind:x,forall:C,exists:a,contains:u,equal:w,reverse:function(n){var e=O.call(n,0);return e.reverse(),e},chunk:l,difference:function(n,e){return h(n,function(n){return!u(e,n)})},mapToObject:function(n,e){for(var r={},o=0,i=n.length;o<i;o++){var u=n[o];r[t(u)]=e(u,o)}return r},pure:function(n){return[n]},sort:function(n,e){var r=O.call(n,0);return r.sort(e),r},range:c,head:function(e){return 0===e.length?n.none():n.some(e[0])},last:function(e){return 0===e.length?n.none():n.some(e[e.length-1])}}}),i("global!console",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),u("global!document",document),i("ephox.sugar.api.node.Element",["ephox.katamari.api.Fun","global!Error","global!console","global!document"],function(n,e,r,t){var o=function(n,e){var o=e||t,i=o.createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1)throw r.error("HTML does not have a single root node",n),"HTML must have a single root node";return a(i.childNodes[0])},i=function(n,e){var r=e||t,o=r.createElement(n);return a(o)},u=function(n,e){var r=e||t,o=r.createTextNode(n);return a(o)},a=function(r){if(null===r||r===undefined)throw new e("Node cannot be null or undefined");return{dom:n.constant(r)}};return{fromHtml:o,fromTag:i,fromText:u,fromDom:a}}),i("ephox.sugar.api.node.NodeTypes",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("ephox.sugar.api.node.Node",["ephox.sugar.api.node.NodeTypes"],function(n){var e=function(n){return n.dom().nodeName.toLowerCase()},r=function(n){return n.dom().nodeType},t=function(n){return n.dom().nodeValue},o=function(n){return function(e){return r(e)===n}},i=function(t){return r(t)===n.COMMENT||"#comment"===e(t)},u=o(n.ELEMENT),a=o(n.TEXT),c=o(n.DOCUMENT);return{name:e,type:r,value:t,isElement:u,isText:a,isDocument:c,isComment:i}}),i("tinymce.plugins.visualchars.core.Html",["tinymce.plugins.visualchars.core.Data"],function(n){return{wrapCharWithSpan:function(e){return'<span data-mce-bogus="1" class="mce-'+n.charMap[e]+'">'+e+"</span>"}}}),i("tinymce.plugins.visualchars.core.Nodes",["ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node","tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Html"],function(n,e,r,t,o){var i=function(n){return r.isText(n)&&r.value(n)!==undefined&&t.regExp.test(r.value(n))},u=function(r,t){var o=[],i=r.dom(),a=n.map(i.childNodes,e.fromDom);return n.each(a,function(n){t(n)&&(o=o.concat([n])),o=o.concat(u(n,t))}),o};return{isMatch:i,filterDescendants:u,findParentElm:function(n,e){for(;n.parentNode;){if(n.parentNode===e)return n;n=n.parentNode}},replaceWithSpans:function(n){return n.replace(t.regExpGlobal,o.wrapCharWithSpan)}}}),i("tinymce.plugins.visualchars.core.VisualChars",["tinymce.plugins.visualchars.core.Data","tinymce.plugins.visualchars.core.Nodes","ephox.katamari.api.Arr","ephox.sugar.api.node.Element","ephox.sugar.api.node.Node"],function(n,e,r,t,o){var i=function(n,i){var u,a,c=e.filterDescendants(t.fromDom(i),e.isMatch);r.each(c,function(r){var t=e.replaceWithSpans(o.value(r));for(a=n.dom.create("div",null,t);u=a.lastChild;)n.dom.insertAfter(u,r.dom());n.dom.remove(r.dom())})},u=function(e,t){var o=e.dom.select(n.selector,t);r.each(o,function(n){e.dom.remove(n,1)})};return{show:i,hide:u,toggle:function(n){var r=n.getBody(),t=n.selection.getBookmark(),o=e.findParentElm(n.selection.getNode(),r);o=o!==undefined?o:r,u(n,o),i(n,o),n.selection.moveToBookmark(t)}}}),i("tinymce.plugins.visualchars.core.Actions",["tinymce.plugins.visualchars.api.Events","tinymce.plugins.visualchars.core.VisualChars"],function(n,e){return{toggleVisualChars:function(r,t){var o,i=r.getBody(),u=r.selection;t.set(!t.get()),n.fireVisualChars(r,t.get()),o=u.getBookmark(),!0===t.get()?e.show(r,i):e.hide(r,i),u.moveToBookmark(o)}}}),i("tinymce.plugins.visualchars.api.Commands",["tinymce.plugins.visualchars.core.Actions"],function(n){return{register:function(e,r){e.addCommand("mceVisualChars",function(){n.toggleVisualChars(e,r)})}}}),i("tinymce.core.util.Delay",["global!tinymce.util.Tools.resolve"],function(n){return n("tinymce.util.Delay")}),i("tinymce.plugins.visualchars.core.Keyboard",["tinymce.core.util.Delay","tinymce.plugins.visualchars.core.VisualChars"],function(n,e){return{setup:function(r,t){var o=n.debounce(function(){e.toggle(r)},300);!1!==r.settings.forced_root_block&&r.on("keydown",function(n){!0===t.get()&&(13===n.keyCode?e.toggle(r):o())})}}}),i("tinymce.plugins.visualchars.ui.Buttons",[],function(){var n=function(n){return function(e){var r=e.control;n.on("VisualChars",function(n){r.active(n.state)})}};return{register:function(e){e.addButton("visualchars",{title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n(e)}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:n(e),selectable:!0,context:"view",prependToContext:!0})}}}),i("tinymce.plugins.visualchars.Plugin",["ephox.katamari.api.Cell","tinymce.core.PluginManager","tinymce.plugins.visualchars.api.Api","tinymce.plugins.visualchars.api.Commands","tinymce.plugins.visualchars.core.Keyboard","tinymce.plugins.visualchars.ui.Buttons"],function(n,e,r,t,o,i){return e.add("visualchars",function(e){var u=n(!1);return t.register(e,u),i.register(e),o.setup(e,u),r.get(u)}),function(){}}),t("tinymce.plugins.visualchars.Plugin")()}();