!function(){var n={},e=function(e){for(var t=n[e],o=t.deps,i=t.defn,a=o.length,d=new Array(a),u=0;u<a;++u)d[u]=r(o[u]);var c=i.apply(null,d);if(void 0===c)throw"module ["+e+"] returned undefined";t.instance=c},t=function(e,t,r){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===r)throw"no definition function for "+e;n[e]={deps:t,defn:r,instance:void 0}},r=function(t){var r=n[t];if(void 0===r)throw"module ["+t+"] was undefined";return void 0===r.instance&&e(t),r.instance},o=function(n,e){for(var t=n.length,o=new Array(t),i=0;i<t;++i)o[i]=r(n[i]);e.apply(null,o)};({}).bolt={module:{api:{define:t,require:o,demand:r}}};var i=t;(function(n,e){i(n,[],function(){return e})})("5",tinymce.util.Tools.resolve),i("1",["5"],function(n){return n("tinymce.PluginManager")}),i("7",[],function(){return{isValidId:function(n){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(n)},getId:function(n){var e=n.selection.getNode();return"A"===e.tagName&&""===n.dom.getAttrib(e,"href")?e.id||e.name:""},insert:function(n,e){var t=n.selection.getNode();"A"===t.tagName&&""===n.dom.getAttrib(t,"href")?(t.removeAttribute("name"),t.id=e):(n.focus(),n.selection.collapse(!0),n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:e})))}}}),i("6",["7"],function(n){var e=function(e,t){return n.isValidId(t)?(n.insert(e,t),!1):(e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)};return{open:function(t){var r=n.getId(t);t.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:r},onsubmit:function(n){var r=n.data.id;e(t,r)&&n.preventDefault()}})}}}),i("2",["6"],function(n){return{register:function(e){e.addCommand("mceAnchor",function(){n.open(e)})}}}),i("3",[],function(){var n=function(n){return!n.attr("href")&&(n.attr("id")||n.attr("name"))&&!n.firstChild},e=function(e){return function(t){for(var r=0;r<t.length;r++)n(t[r])&&t[r].attr("contenteditable",e)}};return{setup:function(n){n.on("PreInit",function(){n.parser.addNodeFilter("a",e("false")),n.serializer.addNodeFilter("a",e(null))})}}}),i("4",[],function(){return{register:function(n){n.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),n.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})}}}),i("0",["1","2","3","4"],function(n,e,t,r){return n.add("anchor",function(n){t.setup(n),e.register(n),r.register(n)}),function(){}}),r("0")()}();