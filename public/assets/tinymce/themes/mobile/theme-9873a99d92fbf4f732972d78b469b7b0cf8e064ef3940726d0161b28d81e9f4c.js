!function(){var n={},t=function(t){for(var e=n[t],o=e.deps,i=e.defn,u=o.length,a=new Array(u),c=0;c<u;++c)a[c]=r(o[c]);var s=i.apply(null,a);if(void 0===s)throw"module ["+t+"] returned undefined";e.instance=s},e=function(t,e,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;n[t]={deps:e,defn:r,instance:void 0}},r=function(e){var r=n[e];if(void 0===r)throw"module ["+e+"] was undefined";return void 0===r.instance&&t(e),r.instance},o=function(n,t){for(var e=n.length,o=new Array(e),i=0;i<e;++i)o[i]=r(n[i]);t.apply(null,o)};({}).bolt={module:{api:{define:e,require:o,demand:r}}};var i=e,u=function(n,t){i(n,[],function(){return t})};u("t",Array),u("u",Error),i("6",["t","u"],function(n,t){var e=function(){},r=function(n,t){return function(){return n(t.apply(null,arguments))}},o=function(n){return function(){return n}},i=function(n){return n},u=function(n,t){return n===t},a=function(t){for(var e=new n(arguments.length-1),r=1;r<arguments.length;r++)e[r-1]=arguments[r];return function(){for(var r=new n(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];var i=e.concat(r);return t.apply(null,i)}};return{noop:e,compose:r,constant:o,identity:i,tripleEquals:u,curry:a,not:function(n){return function(){return!n.apply(null,arguments)}},die:function(n){return function(){throw new t(n)}},apply:function(n){return n()},call:function(n){n()},never:o(!1),always:o(!0)}}),u("2m",Object),i("y",["6","2m"],function(n,t){var e=n.never,r=n.always,o=function(){return i},i=function(){var i=function(n){return n.isNone()},u=function(n){return n()},a=function(n){return n},c=function(){},s={fold:function(n){return n()},is:e,isSome:e,isNone:r,getOr:a,getOrThunk:u,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},or:a,orThunk:u,map:o,ap:o,each:c,bind:o,flatten:o,exists:e,forall:r,filter:o,equals:i,equals_:i,toArray:function(){return[]},toString:n.constant("none()")};return t.freeze&&t.freeze(s),s}(),u=function(n){var t=function(){return n},a=function(){return f},c=function(t){return u(t(n))},s=function(t){return t(n)},f={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:r,isNone:e,getOr:t,getOrThunk:t,getOrDie:t,or:a,orThunk:a,map:c,ap:function(t){return t.fold(o,function(t){return u(t(n))})},each:function(t){t(n)},bind:s,flatten:t,exists:s,forall:s,filter:function(t){return t(n)?f:i},equals:function(t){return t.is(n)},equals_:function(t,r){return t.fold(e,function(t){return r(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return f};return{some:u,none:o,from:function(n){return null===n||void 0===n?i:u(n)}}}),u("2l",String),i("x",["y","t","u","2l"],function(n,t,e,r){var o=function(){var n=t.prototype.indexOf,e=function(t,e){return n.call(t,e)},r=function(n,t){return w(n,t)};return void 0===n?r:e}(),i=function(t,e){var r=o(t,e);return-1===r?n.none():n.some(r)},u=function(n,t){return o(n,t)>-1},a=function(n,t){return b(n,t).isSome()},c=function(n,t){for(var e=[],r=0;r<n;r++)e.push(t(r));return e},s=function(n,t){for(var e=[],r=0;r<n.length;r+=t){var o=n.slice(r,r+t);e.push(o)}return e},f=function(n,e){for(var r=n.length,o=new t(r),i=0;i<r;i++){var u=n[i];o[i]=e(u,i,n)}return o},l=function(n,t){for(var e=0,r=n.length;e<r;e++){t(n[e],e,n)}},d=function(n,t){for(var e=n.length-1;e>=0;e--){t(n[e],e,n)}},m=function(n,t){for(var e=[],r=[],o=0,i=n.length;o<i;o++){var u=n[o];(t(u,o,n)?e:r).push(u)}return{pass:e,fail:r}},p=function(n,t){for(var e=[],r=0,o=n.length;r<o;r++){var i=n[r];t(i,r,n)&&e.push(i)}return e},g=function(n,t){if(0===n.length)return[];for(var e=t(n[0]),r=[],o=[],i=0,u=n.length;i<u;i++){var a=n[i],c=t(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r},v=function(n,t,e){return d(n,function(n){e=t(e,n)}),e},h=function(n,t,e){return l(n,function(n){e=t(e,n)}),e},y=function(t,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r,t))return n.some(i)}return n.none()},b=function(t,e){for(var r=0,o=t.length;r<o;r++){if(e(t[r],r,t))return n.some(r)}return n.none()},w=function(n,t){for(var e=0,r=n.length;e<r;++e)if(n[e]===t)return e;return-1},x=t.prototype.push,O=function(n){for(var r=[],o=0,i=n.length;o<i;++o){if(!t.prototype.isPrototypeOf(n[o]))throw new e("Arr.flatten item "+o+" was not an array, input: "+n);x.apply(r,n[o])}return r},S=function(n,t){var e=f(n,t);return O(e)},T=function(n,t){for(var e=0,r=n.length;e<r;++e){if(!0!==t(n[e],e,n))return!1}return!0},k=function(n,t){return n.length===t.length&&T(n,function(n,e){return n===t[e]})},C=t.prototype.slice;return{map:f,each:l,eachr:d,partition:m,filter:p,groupBy:g,indexOf:i,foldr:v,foldl:h,find:y,findIndex:b,flatten:O,bind:S,forall:T,exists:a,contains:u,equal:k,reverse:function(n){var t=C.call(n,0);return t.reverse(),t},chunk:s,difference:function(n,t){return p(n,function(n){return!u(t,n)})},mapToObject:function(n,t){for(var e={},o=0,i=n.length;o<i;o++){var u=n[o];e[r(u)]=t(u,o)}return e},pure:function(n){return[n]},sort:function(n,t){var e=C.call(n,0);return e.sort(t),e},range:c,head:function(t){return 0===t.length?n.none():n.some(t[0])},last:function(t){return 0===t.length?n.none():n.some(t[t.length-1])}}}),i("8n",[],function(){return"undefined"!=typeof window?window:Function("return this;")()}),i("6i",["8n"],function(n){var t=function(t,e){for(var r=void 0!==e?e:n,o=0;o<t.length&&void 0!==r&&null!==r;++o)r=r[t[o]];return r},e=function(n,e){var r=n.split(".");return t(r,e)},r=function(n,t){return void 0!==n[t]&&null!==n[t]||(n[t]={}),n[t]},o=function(t,e){for(var o=void 0!==e?e:n,i=0;i<t.length;++i)o=r(o,t[i]);return o};return{path:t,resolve:e,forge:o,namespace:function(n,t){var e=n.split(".");return o(e,t)}}}),i("4l",["6i"],function(n){var t=function(t,e){return n.resolve(t,e)};return{getOrDie:function(n,e){var r=t(n,e);if(void 0===r)throw n+" not available on this browser";return r}}}),i("2p",["4l"],function(n){var t=function(){return n.getOrDie("Node")},e=function(n,t,e){return 0!=(n.compareDocumentPosition(t)&e)};return{documentPositionPreceding:function(n,r){return e(n,r,t().DOCUMENT_POSITION_PRECEDING)},documentPositionContainedBy:function(n,r){return e(n,r,t().DOCUMENT_POSITION_CONTAINED_BY)}}}),i("16",[],function(){return{cached:function(n){var t,e=!1;return function(){return e||(e=!0,t=n.apply(null,arguments)),t}}}}),u("6j",Number),i("43",["x","6j","2l"],function(n,t,e){var r=function(n,t){for(var e=0;e<n.length;e++){var r=n[e];if(r.test(t))return r}},o=function(n,e){var o=r(n,e);if(!o)return{major:0,minor:0};var i=function(n){return t(e.replace(o,"$"+n))};return a(i(1),i(2))},i=function(n,t){var r=e(t).toLowerCase();return 0===n.length?u():o(n,r)},u=function(){return a(0,0)},a=function(n,t){return{major:n,minor:t}};return{nu:a,detect:i,unknown:u}}),i("2g",["6","43"],function(n,t){var e="Edge",r="Chrome",o="IE",i="Opera",u="Firefox",a="Safari",c=function(n,t){return function(){return t===n}},s=function(){return f({current:void 0,version:t.unknown()})},f=function(n){var t=n.current;return{current:t,version:n.version,isEdge:c(e,t),isChrome:c(r,t),isIE:c(o,t),isOpera:c(i,t),isFirefox:c(u,t),isSafari:c(a,t)}};return{unknown:s,nu:f,edge:n.constant(e),chrome:n.constant(r),ie:n.constant(o),opera:n.constant(i),firefox:n.constant(u),safari:n.constant(a)}}),i("2h",["6","43"],function(n,t){var e="Windows",r="iOS",o="Android",i="Linux",u="OSX",a="Solaris",c="FreeBSD",s=function(n,t){return function(){return t===n}},f=function(){return l({current:void 0,version:t.unknown()})},l=function(n){var t=n.current;return{current:t,version:n.version,isWindows:s(e,t),isiOS:s(r,t),isAndroid:s(o,t),isOSX:s(u,t),isLinux:s(i,t),isSolaris:s(a,t),isFreeBSD:s(c,t)}};return{unknown:f,nu:l,windows:n.constant(e),ios:n.constant(r),android:n.constant(o),linux:n.constant(i),osx:n.constant(u),solaris:n.constant(a),freebsd:n.constant(c)}}),i("2i",["6"],function(n){return function(t,e,r){var o=t.isiOS()&&!0===/ipad/i.test(r),i=t.isiOS()&&!o,u=t.isAndroid()&&3===t.version.major,a=t.isAndroid()&&4===t.version.major,c=o||u||a&&!0===/mobile/i.test(r),s=t.isiOS()||t.isAndroid(),f=s&&!c,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(r);return{isiPad:n.constant(o),isiPhone:n.constant(i),isTablet:n.constant(c),isPhone:n.constant(f),isTouch:n.constant(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:n.constant(l)}}}),i("2j",["x","43","2l"],function(n,t,e){var r=function(t,r){var o=e(r).toLowerCase();return n.find(t,function(n){return n.search(o)})};return{detectBrowser:function(n,e){return r(n,e).map(function(n){var r=t.detect(n.versionRegexes,e);return{current:n.name,version:r}})},detectOs:function(n,e){return r(n,e).map(function(n){var r=t.detect(n.versionRegexes,e);return{current:n.name,version:r}})}}}),i("44",[],function(){return{addToStart:function(n,t){return t+n},addToEnd:function(n,t){return n+t},removeFromStart:function(n,t){return n.substring(t)},removeFromEnd:function(n,t){return n.substring(0,n.length-t)}}}),i("45",["y","u"],function(n){return{first:function(n,t){return n.substr(0,t)},last:function(n,t){return n.substr(n.length-t,n.length)},head:function(t){return""===t?n.none():n.some(t.substr(0,1))},tail:function(t){return""===t?n.none():n.some(t.substring(1))}}}),i("36",["44","45","u"],function(n,t){var e=function(n,t,e){return""===t||!(n.length<t.length)&&n.substr(e,e+t.length)===t},r=function(n,t){var e=function(n){var t=typeof n;return"string"===t||"number"===t};return n.replace(/\${([^{}]*)}/g,function(n,r){var o=t[r];return e(o)?o:n})},o=function(t,e){return f(t,e)?n.removeFromStart(t,e.length):t},i=function(t,e){return l(t,e)?n.removeFromEnd(t,e.length):t},u=function(t,e){return f(t,e)?t:n.addToStart(t,e)},a=function(t,e){return l(t,e)?t:n.addToEnd(t,e)},c=function(n,t){return-1!==n.indexOf(t)},s=function(n){return t.head(n).bind(function(e){return t.tail(n).map(function(n){return e.toUpperCase()+n})}).getOr(n)},f=function(n,t){return e(n,t,0)},l=function(n,t){return e(n,t,n.length-t.length)};return{supplant:r,startsWith:f,removeLeading:o,removeTrailing:i,ensureLeading:u,ensureTrailing:a,endsWith:l,contains:c,trim:function(n){return n.replace(/^\s+|\s+$/g,"")},lTrim:function(n){return n.replace(/^\s+/g,"")},rTrim:function(n){return n.replace(/\s+$/g,"")},capitalize:s}}),i("2k",["6","36"],function(n,t){var e=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,r=function(n){return function(e){return t.contains(e,n)}},o=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return t.contains(n,"edge/")&&t.contains(n,"chrome")&&t.contains(n,"safari")&&t.contains(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e],search:function(n){return t.contains(n,"chrome")&&!t.contains(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return t.contains(n,"msie")||t.contains(n,"trident")}},{name:"Opera",versionRegexes:[e,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:r("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:r("firefox")},{name:"Safari",versionRegexes:[e,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(t.contains(n,"safari")||t.contains(n,"mobile/"))&&t.contains(n,"applewebkit")}}],i=[{name:"Windows",search:r("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return t.contains(n,"iphone")||t.contains(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:r("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:r("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:r("linux"),versionRegexes:[]},{name:"Solaris",search:r("sunos"),versionRegexes:[]},{name:"FreeBSD",search:r("freebsd"),versionRegexes:[]}];return{browsers:n.constant(o),oses:n.constant(i)}}),i("17",["2g","2h","2i","2j","2k"],function(n,t,e,r,o){return{detect:function(i){var u=o.browsers(),a=o.oses(),c=r.detectBrowser(u,i).fold(n.unknown,n.nu),s=r.detectOs(a,i).fold(t.unknown,t.nu);return{browser:c,os:s,deviceType:e(s,c,i)}}}}),u("18",navigator),i("7",["16","17","18"],function(n,t,e){return{detect:n.cached(function(){var n=e.userAgent;return t.detect(n)})}}),i("15",[],function(){return"undefined"==typeof console&&(console={log:function(){}}),console}),u("1a",document),i("a",["6","u","15","1a"],function(n,t,e,r){var o=function(n,t){var o=t||r,i=o.createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1)throw e.error("HTML does not have a single root node",n),"HTML must have a single root node";return a(i.childNodes[0])},i=function(n,t){var e=t||r,o=e.createElement(n);return a(o)},u=function(n,t){var e=t||r,o=e.createTextNode(n);return a(o)},a=function(e){if(null===e||void 0===e)throw new t("Node cannot be null or undefined");return{dom:n.constant(e)}};return{fromHtml:o,fromTag:i,fromText:u,fromDom:a}}),i("1c",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}}),i("2q",["x","y","a","1c","u","1a"],function(n,t,e,r,o,i){var u=0,a=1,c=2,s=3,f=function(){var n=i.createElement("span");return void 0!==n.matches?u:void 0!==n.msMatchesSelector?a:void 0!==n.webkitMatchesSelector?c:void 0!==n.mozMatchesSelector?s:-1}(),l=r.ELEMENT,d=r.DOCUMENT,m=function(n,t){var e=n.dom();if(e.nodeType!==l)return!1;if(f===u)return e.matches(t);if(f===a)return e.msMatchesSelector(t);if(f===c)return e.webkitMatchesSelector(t);if(f===s)return e.mozMatchesSelector(t);throw new o("Browser lacks native selectors")},p=function(n){return n.nodeType!==l&&n.nodeType!==d||0===n.childElementCount};return{all:function(t,r){var o=void 0===r?i:r.dom();return p(o)?[]:n.map(o.querySelectorAll(t),e.fromDom)},is:m,one:function(n,r){var o=void 0===r?i:r.dom();return p(o)?t.none():t.from(o.querySelector(n)).map(e.fromDom)}}}),i("19",["x","6","2p","7","2q"],function(n,t,e,r,o){var i=function(n,t){return n.dom()===t.dom()},u=function(n,t){return n.dom().isEqualNode(t.dom())},a=function(e,r){return n.exists(r,t.curry(i,e))},c=function(n,t){var e=n.dom(),r=t.dom();return e!==r&&e.contains(r)},s=function(n,t){return e.documentPositionContainedBy(n.dom(),t.dom())},f=r.detect().browser,l=f.isIE()?s:c;return{eq:i,isEqualNode:u,member:a,contains:l,is:o.is}}),i("42",["19"],function(n){return{isSource:function(t,e){return n.eq(t.element(),e.event().target())}}}),i("2f",["6"],function(n){return{contextmenu:n.constant("contextmenu"),touchstart:n.constant("touchstart"),touchmove:n.constant("touchmove"),touchend:n.constant("touchend"),gesturestart:n.constant("gesturestart"),mousedown:n.constant("mousedown"),mousemove:n.constant("mousemove"),mouseout:n.constant("mouseout"),mouseup:n.constant("mouseup"),mouseover:n.constant("mouseover"),focusin:n.constant("focusin"),keydown:n.constant("keydown"),input:n.constant("input"),change:n.constant("change"),focus:n.constant("focus"),click:n.constant("click"),transitionend:n.constant("transitionend"),selectstart:n.constant("selectstart")}}),i("s",["2f","6","7"],function(n,t,e){var r={tap:t.constant("alloy.tap")};return{focus:t.constant("alloy.focus"),postBlur:t.constant("alloy.blur.post"),receive:t.constant("alloy.receive"),execute:t.constant("alloy.execute"),focusItem:t.constant("alloy.focus.item"),tap:r.tap,tapOrClick:e.detect().deviceType.isTouch()?r.tap:n.click,longpress:t.constant("alloy.longpress"),sandboxClose:t.constant("alloy.sandbox.close"),systemInit:t.constant("alloy.system.init"),windowScroll:t.constant("alloy.system.scroll"),attachedToDom:t.constant("alloy.system.attached"),detachedFromDom:t.constant("alloy.system.detached"),changeTab:t.constant("alloy.change.tab"),dismissTab:t.constant("alloy.dismiss.tab")}}),i("1h",["t","2l"],function(n,t){var e=function(e){if(null===e)return"null";var r=typeof e;return"object"===r&&n.prototype.isPrototypeOf(e)?"array":"object"===r&&t.prototype.isPrototypeOf(e)?"string":r},r=function(n){return function(t){return e(t)===n}};return{isString:r("string"),isObject:r("object"),isArray:r("array"),isNull:r("null"),isBoolean:r("boolean"),isUndefined:r("undefined"),isFunction:r("function"),isNumber:r("number")}}),i("v",["1h","t","u"],function(n,t,e){var r=function(n,t){return t},o=function(t,e){return n.isObject(t)&&n.isObject(e)?u(t,e):e},i=function(n){return function(){for(var r=new t(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];if(0===r.length)throw new e("Can't merge zero objects");for(var i={},u=0;u<r.length;u++){var a=r[u];for(var c in a)a.hasOwnProperty(c)&&(i[c]=n(i[c],a[c]))}return i}},u=i(o),a=i(r);return{deepMerge:u,merge:a}}),i("w",["y","2m"],function(n,t){var e=function(){var n=t.keys,e=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};return void 0===n?e:n}(),r=function(n,t){for(var r=e(n),o=0,i=r.length;o<i;o++){var u=r[o];t(n[u],u,n)}},o=function(n,t){return i(n,function(n,e,r){return{k:e,v:t(n,e,r)}})},i=function(n,t){var e={};return r(n,function(r,o){var i=t(r,o,n);e[i.k]=i.v}),e},u=function(n,t){var e={},o={};return r(n,function(n,r){(t(n,r)?e:o)[r]=n}),{t:e,f:o}},a=function(n,t){var e=[];return r(n,function(n,r){e.push(t(n,r))}),e},c=function(t,r){for(var o=e(t),i=0,u=o.length;i<u;i++){var a=o[i],c=t[a];if(r(c,a,t))return n.some(c)}return n.none()},s=function(n){return a(n,function(n){return n})};return{bifilter:u,each:r,map:o,mapToArray:a,tupleMap:i,find:c,keys:e,values:s,size:function(n){return s(n).length}}}),i("2",["s","6","v","w"],function(n,t,e,r){var o=function(n,t){c(n,n.element(),t,{})},i=function(n,t,e){c(n,n.element(),t,e)},u=function(t){o(t,n.execute())},a=function(n,t,e){c(n,t,e,{})},c=function(n,o,i,u){var a=e.deepMerge({target:o},u);n.getSystem().triggerEvent(i,o,r.map(a,t.constant))};return{emit:o,emitWith:i,emitExecute:u,dispatch:a,dispatchWith:c,dispatchEvent:function(n,t,e,r){n.getSystem().triggerEvent(e,t,r.event())},dispatchFocus:function(n,t){n.getSystem().triggerFocus(t,n.element())}}}),i("6k",["x","w","1h","t","u","15"],function(n,t,e,r,o,i){return{generate:function(u){if(!e.isArray(u))throw new o("cases must be an array");if(0===u.length)throw new o("there must be at least one case");var a=[],c={};return n.each(u,function(s,f){var l=t.keys(s);if(1!==l.length)throw new o("one and only one name per case");var d=l[0],m=s[d];if(void 0!==c[d])throw new o("duplicate key detected:"+d);if("cata"===d)throw new o("cannot have a case named cata (sorry)");if(!e.isArray(m))throw new o("case arguments must be an array");a.push(d),c[d]=function(){var e=arguments.length;if(e!==m.length)throw new o("Wrong number of arguments to case "+d+". Expected "+m.length+" ("+m+"), got "+e);for(var c=new r(e),s=0;s<c.length;s++)c[s]=arguments[s];var l=function(e){var r=t.keys(e);if(a.length!==r.length)throw new o("Wrong number of arguments to match. Expected: "+a.join(",")+"\nActual: "+r.join(","));if(!n.forall(a,function(t){return n.contains(r,t)}))throw new o("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+a.join(", "));return e[d].apply(null,c)};return{fold:function(){if(arguments.length!==u.length)throw new o("Wrong number of arguments to fold. Expected "+u.length+", got "+arguments.length);return arguments[f].apply(null,c)},match:l,log:function(n){i.log(n,{constructors:a,constructor:d,params:c})}}}}),c}}}),i("4b",["6k","6"],function(n,t){var e=n.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),r=function(n){return e.defaultedThunk(t.constant(n))},o=function(n){return e.asDefaultedOptionThunk(t.constant(n))},i=function(n){return e.mergeWithThunk(t.constant(n))};return{strict:e.strict,asOption:e.asOption,defaulted:r,defaultedThunk:e.defaultedThunk,asDefaultedOption:o,asDefaultedOptionThunk:e.asDefaultedOptionThunk,mergeWith:i,mergeWithThunk:e.mergeWithThunk}}),i("47",["6","y"],function(n,t){var e=function(r){var o=function(n){return r===n},i=function(){return e(r)},u=function(){return e(r)},a=function(n){return e(n(r))},c=function(n){n(r)},s=function(n){return n(r)},f=function(n,t){return t(r)},l=function(n){return n(r)},d=function(n){return n(r)},m=function(){return t.some(r)};return{is:o,isValue:n.constant(!0),isError:n.constant(!1),getOr:n.constant(r),getOrThunk:n.constant(r),getOrDie:n.constant(r),or:i,orThunk:u,fold:f,map:a,each:c,bind:s,exists:l,forall:d,toOption:m}},r=function(e){var o=function(n){return n()},i=function(){return n.die(e)()},u=function(n){return n},a=function(n){return n()},c=function(){return r(e)},s=function(){return r(e)},f=function(n){return n(e)};return{is:n.constant(!1),isValue:n.constant(!1),isError:n.constant(!0),getOr:n.identity,getOrThunk:o,getOrDie:i,or:u,orThunk:a,fold:f,map:c,each:n.noop,bind:s,exists:n.constant(!1),forall:n.constant(!0),toOption:t.none}};return{value:e,error:r}}),i("48",["6k","x"],function(n,t){var e=n.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);return{partition:function(n){var e=[],r=[];return t.each(n,function(n){n.fold(function(n){e.push(n)},function(n){r.push(n)})}),{errors:e,values:r}},compare:function(n,t){return n.fold(function(n){return t.fold(function(t){return e.bothErrors(n,t)},function(t){return e.firstError(n,t)})},function(n){return t.fold(function(t){return e.secondError(n,t)},function(t){return e.bothValues(n,t)})})}}}),i("29",["x","6","v","47","48"],function(n,t,e,r,o){var i=function(n,t){return r.value(e.deepMerge.apply(void 0,[t].concat(n)))},u=function(e){return t.compose(r.error,n.flatten)(e)};return{consolidateObj:function(n,t){var e=o.partition(n);return e.errors.length>0?u(e.errors):i(e.values,t)},consolidateArr:function(n){var t=o.partition(n);return t.errors.length>0?u(t.errors):r.value(t.values)}}}),i("2a",["x","w"],function(n,t){var e=function(t,e){var r={};return n.each(e,function(n){void 0!==t[n]&&t.hasOwnProperty(n)&&(r[n]=t[n])}),r},r=function(t,e){var r={};return n.each(t,function(n){var t=n[e];r[t]=n}),r};return{narrow:e,exclude:function(e,r){var o={};return t.each(e,function(t,e){n.contains(r,e)||(o[e]=t)}),o},indexOnKey:r}}),i("2b",["y"],function(n){var t=function(t){return function(e){return e.hasOwnProperty(t)?n.from(e[t]):n.none()}};return{readOpt:t,readOr:function(n,e){return function(r){return t(n)(r).getOr(e)}},readOptFrom:function(n,e){return t(e)(n)},hasKey:function(n,t){return n.hasOwnProperty(t)&&void 0!==n[t]&&null!==n[t]}}}),i("2c",["x"],function(n){return{wrap:function(n,t){var e={};return e[n]=t,e},wrapAll:function(t){var e={};return n.each(t,function(n){e[n.key]=n.value}),e}}}),i("13",["29","2a","2b","2c"],function(n,t,e,r){var o=function(n,e){return t.narrow(n,e)},i=function(n,e){return t.exclude(n,e)},u=function(n){return e.readOpt(n)},a=function(n,t){return e.readOr(n,t)},c=function(n,t){return e.readOptFrom(n,t)},s=function(n,t){return r.wrap(n,t)},f=function(n){return r.wrapAll(n)},l=function(n,e){return t.indexOnKey(n,e)},d=function(t,e){return n.consolidateObj(t,e)};return{narrow:o,exclude:i,readOpt:u,readOr:a,readOptFrom:c,wrap:s,wrapAll:f,indexOnKey:l,hasKey:function(n,t){return e.hasKey(n,t)},consolidate:d}}),i("6n",["4l"],function(n){var t=function(){return n.getOrDie("JSON")};return{parse:function(n){return t().parse(n)},stringify:function(n,e,r){return t().stringify(n,e,r)}}}),i("4e",["x","w","1h","6n"],function(n,t,e,r){return{formatObj:function(n){return e.isObject(n)&&t.keys(n).length>100?" removed due to size":r.stringify(n,null,2)},formatErrors:function(t){var e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t;return n.map(e,function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()})}}}),i("6l",["4e","47"],function(n,t){var e=function(n,e){return t.error([{path:n,getErrorInfo:e}])};return{missingStrict:function(t,r,o){return e(t,function(){return'Could not find valid *strict* value for "'+r+'" in '+n.formatObj(o)})},missingKey:function(n,t){return e(n,function(){return'Choice schema did not contain choice key: "'+t+'"'})},missingBranch:function(t,r,o){return e(t,function(){return'The chosen schema: "'+o+'" did not exist in branches: '+n.formatObj(r)})},unsupportedFields:function(n,t){return e(n,function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"})},custom:function(n,t){return e(n,function(){return t})},toString:function(n){return"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo()}}}),i("6m",["6k"],function(n){return{typeAdt:n.generate([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]}]),fieldAdt:n.generate([{field:["name","presence","type"]},{state:["name"]}])}}),i("4c",["4b","13","29","2b","2c","6l","6m","6k","x","6","v","w","y","47","1h"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p){var g=a.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),v=function(n,t){return g.state(n,s.constant(t))},h=function(n){return g.state(n,s.identity)},y=function(n,t,e){return r.readOptFrom(t,e).fold(function(){return i.missingStrict(n,e,t)},m.value)},b=function(n,t,e){var o=r.readOptFrom(n,t).fold(function(){return e(n)},s.identity);return m.value(o)},w=function(n,t){return m.value(r.readOptFrom(n,t))},x=function(n,t,e){var o=r.readOptFrom(n,t).map(function(t){return!0===t?e(n):t});return m.value(o)},O=function(n,t,e,r){return e.fold(function(e,i,u,a){var c=function(t){return a.extract(n.concat([e]),r,t).map(function(n){return o.wrap(i,r(n))})},l=function(t){return t.fold(function(){var n=o.wrap(i,r(d.none()));return m.value(n)},function(t){return a.extract(n.concat([e]),r,t).map(function(n){return o.wrap(i,r(d.some(n)))})})};return function(){return u.fold(function(){return y(n,t,e).bind(c)},function(n){return b(t,e,n).bind(c)},function(){return w(t,e).bind(l)},function(n){return x(t,e,n).bind(l)},function(n){var r=n(t);return b(t,e,s.constant({})).map(function(n){return f.deepMerge(r,n)}).bind(c)})}()},function(n,e){var i=e(t);return m.value(o.wrap(n,r(i)))})},S=function(n,t,r,o){var i=c.map(r,function(e){return O(n,t,e,o)});return e.consolidateObj(i,{})},T=function(n){return{extract:function(t,e,r){return n(r).fold(function(n){return i.custom(t,n)},m.value)},toString:function(){return"val"},toDsl:function(){return u.typeAdt.itemOf(n)}}},k=function(n){var e=l.keys(n);return c.filter(e,function(e){return t.hasKey(n,e)})},C=function(n){var e=E(n),r=c.foldr(n,function(n,e){return e.fold(function(e){return f.deepMerge(n,t.wrap(e,!0))},s.constant(n))},{});return{extract:function(n,o,u){var a=p.isBoolean(u)?[]:k(u),s=c.filter(a,function(n){return!t.hasKey(r,n)});return 0===s.length?e.extract(n,o,u):i.unsupportedFields(n,s)},toString:e.toString,toDsl:e.toDsl}},E=function(n){return{extract:function(t,e,r){return S(t,r,n,e)},toString:function(){return"obj{\n"+c.map(n,function(n){return n.fold(function(n,t,e,r){return n+" -> "+r.toString()},function(n){return"state("+n+")"})}).join("\n")+"}"},toDsl:function(){return u.typeAdt.objOf(c.map(n,function(n){return n.fold(function(n,t,e,r){return u.fieldAdt.field(n,e,r)},function(n){return u.fieldAdt.state(n)})}))}}},D=function(n){return{extract:function(t,r,o){var i=c.map(o,function(e,o){return n.extract(t.concat(["["+o+"]"]),r,e)});return e.consolidateArr(i)},toString:function(){return"array("+n.toString()+")"},toDsl:function(){return u.typeAdt.arrOf(n)}}},A=function(t,e){var r=function(n,e){return D(T(t)).extract(n,s.identity,e)};return{extract:function(t,o,i){var u=l.keys(i);return r(t,u).bind(function(r){var u=c.map(r,function(t){return g.field(t,t,n.strict(),e)});return E(u).extract(t,o,i)})},toString:function(){return"setOf("+e.toString()+")"},toDsl:function(){return u.typeAdt.setOf(t,e)}}},R=T(m.value),F=s.compose(D,E);return{anyValue:s.constant(R),value:T,obj:E,objOnly:C,arr:D,setOf:A,arrOfObj:F,state:g.state,field:g.field,output:v,snapshot:h}}),i("28",["4b","4c","47","1h"],function(n,t,e,r){var o=function(e){return t.field(e,e,n.strict(),t.anyValue())},i=function(e,r){return t.field(e,e,n.strict(),r)},u=function(o){return t.field(o,o,n.strict(),t.value(function(n){return r.isFunction(n)?e.value(n):e.error("Not a function")}))},a=function(r,o){return t.field(r,r,n.asOption(),t.value(function(){return e.error("The field: "+r+" is forbidden. "+o)}))},c=function(n,t){return i(n,t)};return{strict:o,strictOf:i,strictObjOf:function(e,r){return t.field(e,e,n.strict(),t.obj(r))},strictArrayOf:c,strictArrayOfObj:function(e,r){return t.field(e,e,n.strict(),t.arrOfObj(r))},strictFunction:u,forbid:a,option:function(e){return t.field(e,e,n.asOption(),t.anyValue())},optionOf:function(e,r){return t.field(e,e,n.asOption(),r)},optionObjOf:function(e,r){return t.field(e,e,n.asOption(),t.obj(r))},optionObjOfOnly:function(e,r){return t.field(e,e,n.asOption(),t.objOnly(r))},defaulted:function(e,r){return t.field(e,e,n.defaulted(r),t.anyValue())},defaultedOf:function(e,r,o){return t.field(e,e,n.defaulted(r),o)},defaultedObjOf:function(e,r,o){return t.field(e,e,n.defaulted(r),t.obj(o))},field:function(n,e,r,o){return t.field(n,e,r,o)},state:function(n,e){return t.state(n,e)}}}),i("4d",["13","6l","4c","6m","w"],function(n,t,e,r,o){var i=function(r,o,i,u,a){return n.readOptFrom(u,a).fold(function(){return t.missingBranch(r,u,a)},function(n){return e.obj(n).extract(r.concat(["branch: "+a]),o,i)})};return{choose:function(e,u){return{extract:function(r,o,a){return n.readOptFrom(a,e).fold(function(){return t.missingKey(r,e)},function(n){return i(r,o,a,u,n)})},toString:function(){return"chooseOn("+e+"). Possible values: "+o.keys(u)},toDsl:function(){return r.typeAdt.choiceOf(e,u)}}}}}),i("2d",["4d","4c","4e","6","47","u"],function(n,t,e,r,o,i){var u=t.value(o.value),a=function(n){return t.arrOfObj(n)},c=function(){return t.arr(u)},s=t.arr,f=t.obj,l=t.objOnly,d=t.setOf,m=function(n){return t.value(n)},p=function(n,t,e,r){return t.extract([n],e,r).fold(function(n){return o.error({input:r,errors:n})},o.value)},g=function(n,t,e){return p(n,t,r.constant,e)},v=function(n,t,e){return p(n,t,r.identity,e)},h=function(n){return n.fold(function(n){throw new i(w(n))},r.identity)},y=function(n,t,e){return h(v(n,t,e))},b=function(n,t,e){return h(g(n,t,e))},w=function(n){return"Errors: \n"+e.formatErrors(n.errors)+"\n\nInput object: "+e.formatObj(n.input)},x=function(t,e){return n.choose(t,e)};return{anyValue:r.constant(u),arrOfObj:a,arrOf:s,arrOfVal:c,valueOf:m,setOf:d,objOf:f,objOfOnly:l,asStruct:g,asRaw:v,asStructOrDie:b,asRawOrDie:y,getOrDie:h,formatError:w,choose:x}}),i("46",["28","13","2d","1h","x","6n","6","t","u"],function(n,t,e,r,o,i,u,a,c){var s=function(r){if(!t.hasKey(r,"can")&&!t.hasKey(r,"abort")&&!t.hasKey(r,"run"))throw new c("EventHandler defined by: "+i.stringify(r,null,2)+" does not have can, abort, or run!");return e.asRawOrDie("Extracting event.handler",e.objOfOnly([n.defaulted("can",u.constant(!0)),n.defaulted("abort",u.constant(!1)),n.defaulted("run",u.noop)]),r)},f=function(n,t){return function(){var e=a.prototype.slice.call(arguments,0);return o.foldl(n,function(n,r){return n&&t(r).apply(void 0,e)},!0)}},l=function(n,t){return function(){var e=a.prototype.slice.call(arguments,0);return o.foldl(n,function(n,r){return n||t(r).apply(void 0,e)},!1)}};return{read:function(n){return r.isFunction(n)?{can:u.constant(!0),abort:u.constant(!1),run:n}:n},fuse:function(n){var t=f(n,function(n){return n.can}),e=l(n,function(n){return n.abort});return s({can:t,abort:e,run:function(){var t=a.prototype.slice.call(arguments,0);o.each(n,function(n){n.run.apply(void 0,t)})}})},nu:s}}),i("3c",["42","2","s","46","13"],function(n,t,e,r,o){var i=o.wrapAll,u=function(n,t){return{key:n,value:r.nu({abort:t})}},a=function(n,t){return{key:n,value:r.nu({can:t})}},c=function(n){return{key:n,value:r.nu({run:function(n,t){t.event().prevent()}})}},s=function(n,t){return{key:n,value:r.nu({run:t})}},f=function(n,t,e){return{key:n,value:r.nu({run:function(n){t.apply(void 0,[n].concat(e))}})}},l=function(n){return function(t){return s(n,t)}},d=function(t){return function(e){return{key:t,value:r.nu({run:function(t,r){n.isSource(t,r)&&e(t,r)}})}}},m=function(n,e){return s(n,function(r,o){r.getSystem().getByUid(e).each(function(e){t.dispatchEvent(e,e.element(),n,o)})})},p=function(n,t,e){var r=t.partUids()[e];return m(n,r)},g=function(n,t){return s(n,function(n,e){n.getSystem().getByDom(e.event().target()).each(function(r){t(n,r,e)})})},v=function(n){return s(n,function(n,t){t.cut()})},h=function(n){return s(n,function(n,t){
t.stop()})};return{derive:i,run:s,preventDefault:c,runActionExtra:f,runOnAttached:d(e.attachedToDom()),runOnDetached:d(e.detachedFromDom()),runOnInit:d(e.systemInit()),runOnExecute:l(e.execute()),redirectToUid:m,redirectToPart:p,runWithTarget:g,abort:u,can:a,cutter:v,stopper:h}}),i("49",["y"],function(n){return{markAsBehaviourApi:function(n){return n},markAsExtraApi:function(n){return n},markAsSketchApi:function(n){return n},getAnnotation:n.none}}),i("4j",["x","6","t","u"],function(n,t,e,r){return function(){var o=arguments;return function(){for(var i=new e(arguments.length),u=0;u<i.length;u++)i[u]=arguments[u];if(o.length!==i.length)throw new r('Wrong number of arguments to struct. Expected "['+o.length+']", got '+i.length+" arguments");var a={};return n.each(o,function(n,e){a[n]=t.constant(i[e])}),a}}}),i("6p",["x","1h","u"],function(n,t,e){var r=function(n){return n.slice(0).sort()};return{sort:r,reqMessage:function(n,t){throw new e("All required keys ("+r(n).join(", ")+") were not specified. Specified keys were: "+r(t).join(", ")+".")},unsuppMessage:function(n){throw new e("Unsupported keys for object: "+r(n).join(", "))},validateStrArr:function(r,o){if(!t.isArray(o))throw new e("The "+r+" fields must be an array. Was: "+o+".");n.each(o,function(n){if(!t.isString(n))throw new e("The value "+n+" in the "+r+" fields was not a string.")})},invalidTypeMessage:function(n,t){throw new e("All values need to be of type: "+t+". Keys ("+r(n).join(", ")+") were not.")},checkDupes:function(t){var o=r(t);n.find(o,function(n,t){return t<o.length-1&&n===o[t+1]}).each(function(n){throw new e("The field: "+n+" occurs more than once in the combined fields: ["+o.join(", ")+"].")})}}}),i("4k",["x","6","w","y","6p","u","2m"],function(n,t,e,r,o,i,u){return function(a,c){var s=a.concat(c);if(0===s.length)throw new i("You must specify at least one required or optional field.");return o.validateStrArr("required",a),o.validateStrArr("optional",c),o.checkDupes(s),function(i){var f=e.keys(i);n.forall(a,function(t){return n.contains(f,t)})||o.reqMessage(a,f);var l=n.filter(f,function(t){return!n.contains(s,t)});l.length>0&&o.unsuppMessage(l);var d={};return n.each(a,function(n){d[n]=t.constant(i[n])}),n.each(c,function(n){d[n]=t.constant(u.prototype.hasOwnProperty.call(i,n)?r.some(i[n]):r.none())}),d}}}),i("2n",["4j","4k"],function(n,t){return{immutable:n,immutableBag:t}}),i("6o",["6n","2n","2l"],function(n,t,e){var r=t.immutableBag(["tag"],["classes","attributes","styles","value","innerHtml","domChildren","defChildren"]),o=function(t){var e=i(t);return n.stringify(e,null,2)},i=function(n){return{tag:n.tag(),classes:n.classes().getOr([]),attributes:n.attributes().getOr({}),styles:n.styles().getOr({}),value:n.value().getOr("<none>"),innerHtml:n.innerHtml().getOr("<none>"),defChildren:n.defChildren().getOr("<none>"),domChildren:n.domChildren().fold(function(){return"<none>"},function(n){return 0===n.length?"0 children, but still specified":e(n.length)})}};return{nu:r,defToStr:o,defToRaw:i}}),i("4a",["6o","13","x","w","v","6n","2n"],function(n,t,e,r,o,i,u){var a=["classes","attributes","styles","value","innerHtml","defChildren","domChildren"],c=u.immutableBag([],a),s=function(n){var t={},o=r.keys(n);return e.each(o,function(e){n[e].each(function(n){t[e]=n})}),c(t)},f=function(n){var t=l(n);return i.stringify(t,null,2)},l=function(n){return{classes:n.classes().getOr("<none>"),attributes:n.attributes().getOr("<none>"),styles:n.styles().getOr("<none>"),value:n.value().getOr("<none>"),innerHtml:n.innerHtml().getOr("<none>"),defChildren:n.defChildren().getOr("<none>"),domChildren:n.domChildren().fold(function(){return"<none>"},function(n){return 0===n.length?"0 children, but still specified":String(n.length)})}},d=function(n,e,r){return e.fold(function(){return r.fold(function(){return{}},function(e){return t.wrap(n,e)})},function(e){return r.fold(function(){return t.wrap(n,e)},function(e){return t.wrap(n,e)})})};return{nu:c,derive:s,merge:function(e,r){var i=o.deepMerge({tag:e.tag(),classes:r.classes().getOr([]).concat(e.classes().getOr([])),attributes:o.merge(e.attributes().getOr({}),r.attributes().getOr({})),styles:o.merge(e.styles().getOr({}),r.styles().getOr({}))},r.innerHtml().or(e.innerHtml()).map(function(n){return t.wrap("innerHtml",n)}).getOr({}),d("domChildren",r.domChildren(),e.domChildren()),d("defChildren",r.defChildren(),e.defChildren()),r.value().or(e.value()).map(function(n){return t.wrap("value",n)}).getOr({}));return n.nu(i)},modToStr:f,modToRaw:l}}),i("26",["3c","49","4a","28","13","2d","6","v","w","y","16","t","15","u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var p=function(t,e,r){return n.runOnExecute(function(n){r(n,t,e)})},g=function(t,e,r){return n.runOnInit(function(n){r(n,t,e)})},v=function(n,t,e,o,u,a){var c=i.objOfOnly(n),s=r.optionObjOf(t,[r.optionObjOfOnly("config",n)]);return w(c,s,t,e,o,u,a)},h=function(n,t,e,o,i,u){var a=n,c=r.optionObjOf(t,[r.optionOf("config",n)]);return w(a,c,t,e,o,i,u)},y=function(n,e,r){var o=function(t){var o=arguments;return t.config({name:u.constant(n)}).fold(function(){throw new m("We could not find any behaviour configuration for: "+n+". Using API: "+r)},function(n){var r=l.prototype.slice.call(o,1);return e.apply(void 0,[t,n.config,n.state].concat(r))})};return t.markAsBehaviourApi(o,r,e)},b=function(n){return{key:n,value:void 0}},w=function(n,r,l,d,m,p,g){var v=function(n){return o.hasKey(n,l)?n[l]():s.none()},h=c.map(m,function(n,t){return y(l,n,t)}),w=c.map(p,function(n,e){return t.markAsExtraApi(n,e)}),x=a.deepMerge(w,h,{revoke:u.curry(b,l),config:function(t){var e=i.asStructOrDie(l+"-config",n,t);return{key:l,value:{config:e,me:x,configAsRaw:f.cached(function(){return i.asRawOrDie(l+"-config",n,t)}),initialConfig:t,state:g}}},schema:function(){return r},exhibit:function(n,t){return v(n).bind(function(n){return o.readOptFrom(d,"exhibit").map(function(e){return e(t,n.config,n.state)})}).getOr(e.nu({}))},name:function(){return l},handlers:function(n){return v(n).bind(function(n){return o.readOptFrom(d,"events").map(function(t){return t(n.config,n.state)})}).getOr({})}});return x};return{executeEvent:p,loadEvent:g,create:v,createModes:h}}),i("6q",["x","6","w","1h","6p","u"],function(n,t,e,r,o,i){var u=function(n,t){return a(n,t,{validate:r.isFunction,label:"function"})},a=function(t,r,u){if(0===r.length)throw new i("You must specify at least one required field.");return o.validateStrArr("required",r),o.checkDupes(r),function(i){var a=e.keys(i);n.forall(r,function(t){return n.contains(a,t)})||o.reqMessage(r,a),t(r,a);var c=n.filter(r,function(n){return!u.validate(i[n],n)});return c.length>0&&o.invalidTypeMessage(c,u.label),i}},c=function(t,e){var r=n.filter(e,function(e){return!n.contains(t,e)});r.length>0&&o.unsuppMessage(r)},s=t.noop;return{exactly:t.curry(u,c),ensure:t.curry(u,s),ensureWith:t.curry(a,s)}}),i("4f",["6q"],function(n){return n.ensure(["readState"])}),u("1v",Math),i("27",["4f","1v"],function(n){return{init:function(){return n({readState:function(){return"No State required"}})}}}),i("p",["26","27","28","13","2d","6"],function(n,t,e,r,o,i){var u=function(n){return r.wrapAll(n)},a=o.objOfOnly([e.strict("fields"),e.strict("name"),e.defaulted("active",{}),e.defaulted("apis",{}),e.defaulted("extra",{}),e.defaulted("state",t)]),c=function(t){var e=o.asRawOrDie("Creating behaviour: "+t.name,a,t);return n.create(e.fields,e.name,e.active,e.apis,e.extra,e.state)},s=o.objOfOnly([e.strict("branchKey"),e.strict("branches"),e.strict("name"),e.defaulted("active",{}),e.defaulted("apis",{}),e.defaulted("extra",{}),e.defaulted("state",t)]),f=function(t){var e=o.asRawOrDie("Creating behaviour: "+t.name,s,t);return n.createModes(o.choose(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)};return{derive:u,revoke:i.constant(void 0),noActive:i.constant({}),noApis:i.constant({}),noExtra:i.constant({}),noState:i.constant(t),create:c,createModes:f}}),i("4g",[],function(){return function(n,t,e){var r=e||!1,o=function(){t(),r=!0},i=function(){n(),r=!1};return{on:o,off:i,toggle:function(){(r?i:o)()},isOn:function(){return r}}}}),i("b",["1c"],function(n){var t=function(n){return n.dom().nodeName.toLowerCase()},e=function(n){return n.dom().nodeType},r=function(n){return n.dom().nodeValue},o=function(n){return function(t){return e(t)===n}},i=function(r){return e(r)===n.COMMENT||"#comment"===t(r)},u=o(n.ELEMENT),a=o(n.TEXT),c=o(n.DOCUMENT);return{name:t,type:e,value:r,isElement:u,isText:a,isDocument:c,isComment:i}}),i("4h",["1h","x","w","b","u","15"],function(n,t,e,r,o,i){var u=function(t,e,r){if(!(n.isString(r)||n.isBoolean(r)||n.isNumber(r)))throw i.error("Invalid call to Attr.set. Key ",e,":: Value ",r,":: Element ",t),new o("Attribute value was not simple");t.setAttribute(e,r+"")},a=function(n,t,e){u(n.dom(),t,e)},c=function(n,t){var r=n.dom();e.each(t,function(n,t){u(r,t,n)})},s=function(n,t){var e=n.dom().getAttribute(t);return null===e?void 0:e},f=function(n,t){var e=n.dom();return!(!e||!e.hasAttribute)&&e.hasAttribute(t)},l=function(n,t){n.dom().removeAttribute(t)},d=function(n){var t=n.dom().attributes;return void 0===t||null===t||0===t.length},m=function(n,t,e){f(n,e)&&!f(t,e)&&a(t,e,s(n,e))};return{clone:function(n){return t.foldl(n.dom().attributes,function(n,t){return n[t.name]=t.value,n},{})},set:a,setAll:c,get:s,has:f,remove:l,hasNone:d,transfer:function(n,e,o){r.isElement(n)&&r.isElement(e)&&t.each(o,function(t){m(n,e,t)})}}}),i("6r",["x","4h"],function(n,t){var e=function(n,e){var r=t.get(n,e);return void 0===r||""===r?[]:r.split(" ")};return{read:e,add:function(n,r,o){var i=e(n,r),u=i.concat([o]);t.set(n,r,u.join(" "))},remove:function(r,o,i){var u=n.filter(e(r,o),function(n){return n!==i});u.length>0?t.set(r,o,u.join(" ")):t.remove(r,o)}}}),i("4i",["x","6r"],function(n,t){var e=function(n){return void 0!==n.dom().classList},r=function(n){return t.read(n,"class")},o=function(n,e){return t.add(n,"class",e)},i=function(n,e){return t.remove(n,"class",e)};return{get:r,add:o,remove:i,toggle:function(t,e){n.contains(r(t),e)?i(t,e):o(t,e)},supports:e}}),i("2e",["4g","4h","4i"],function(n,t,e){var r=function(n,t){e.supports(n)?n.dom().classList.add(t):e.add(n,t)},o=function(n){0===(e.supports(n)?n.dom().classList:e.get(n)).length&&t.remove(n,"class")},i=function(n,t){if(e.supports(n)){n.dom().classList.remove(t)}else e.remove(n,t);o(n)},u=function(n,t){return e.supports(n)?n.dom().classList.toggle(t):e.toggle(n,t)},a=function(t,r){var o=e.supports(t),i=t.dom().classList;return n(function(){o?i.remove(r):e.remove(t,r)},function(){o?i.add(r):e.add(t,r)},c(t,r))},c=function(n,t){return e.supports(n)&&n.dom().classList.contains(t)};return{add:r,remove:i,toggle:u,toggler:a,has:c}}),i("q",["2e"],function(n){var t=function(t,e,r){n.remove(t,r),n.add(t,e)},e=function(n,e){t(n.element(),e.alpha(),e.omega())},r=function(n,e){t(n.element(),e.omega(),e.alpha())},o=function(t,e){n.remove(t.element(),e.alpha()),n.remove(t.element(),e.omega())};return{toAlpha:e,toOmega:r,isAlpha:function(t,e){return n.has(t.element(),e.alpha())},isOmega:function(t,e){return n.has(t.element(),e.omega())},clear:o}}),i("r",["28"],function(n){return[n.strict("alpha"),n.strict("omega")]}),i("1",["p","q","r"],function(n,t,e){return n.create({fields:e,name:"swapping",apis:t})}),i("2o",[],function(){return{toArray:function(n,t){var e=[],r=function(n){return e.push(n),t(n)},o=t(n);do{o=o.bind(r)}while(o.isSome());return e}}}),i("z",["1h","x","6","y","2n","2o","19","a"],function(n,t,e,r,o,i,u,a){var c=function(n){return a.fromDom(n.dom().ownerDocument)},s=function(n){var t=c(n);return a.fromDom(t.dom().documentElement)},f=function(n){var t=n.dom(),e=t.ownerDocument.defaultView;return a.fromDom(e)},l=function(n){var t=n.dom();return r.from(t.parentNode).map(a.fromDom)},d=function(n){return l(n).bind(function(e){var r=w(e);return t.findIndex(r,function(t){return u.eq(n,t)})})},m=function(t,r){for(var o=n.isFunction(r)?r:e.constant(!1),i=t.dom(),u=[];null!==i.parentNode&&void 0!==i.parentNode;){var c=i.parentNode,s=a.fromDom(c);if(u.push(s),!0===o(s))break;i=c}return u},p=function(n){var e=function(e){return t.filter(e,function(t){return!u.eq(n,t)})};return l(n).map(w).map(e).getOr([])},g=function(n){var t=n.dom();return r.from(t.offsetParent).map(a.fromDom)},v=function(n){var t=n.dom();return r.from(t.previousSibling).map(a.fromDom)},h=function(n){var t=n.dom();return r.from(t.nextSibling).map(a.fromDom)},y=function(n){return t.reverse(i.toArray(n,v))},b=function(n){return i.toArray(n,h)},w=function(n){var e=n.dom();return t.map(e.childNodes,a.fromDom)},x=function(n,t){var e=n.dom().childNodes;return r.from(e[t]).map(a.fromDom)},O=function(n){return x(n,0)},S=function(n){return x(n,n.dom().childNodes.length-1)},T=function(n){return n.dom().childNodes.length},k=o.immutable("element","offset");return{owner:c,defaultView:f,documentElement:s,parent:l,findIndex:d,parents:m,siblings:p,prevSibling:v,offsetParent:g,prevSiblings:y,nextSibling:h,nextSiblings:b,children:w,child:x,firstChild:O,lastChild:S,childNodesCount:T,leaf:function(n,t){var e=w(n);return e.length>0&&t<e.length?k(e[t],0):k(n,t)}}}),i("9",["z"],function(n){var t=function(t,e){n.parent(t).each(function(n){n.dom().insertBefore(e.dom(),t.dom())})},e=function(e,r){n.nextSibling(e).fold(function(){n.parent(e).each(function(n){o(n,r)})},function(n){t(n,r)})},r=function(t,e){n.firstChild(t).fold(function(){o(t,e)},function(n){t.dom().insertBefore(e.dom(),n.dom())})},o=function(n,t){n.dom().appendChild(t.dom())};return{before:t,after:e,prepend:r,append:o,appendAt:function(e,r,i){n.child(e,i).fold(function(){o(e,r)},function(n){t(n,r)})},wrap:function(n,e){t(n,e),o(e,n)}}}),i("2r",["x","9"],function(n,t){return{before:function(e,r){n.each(r,function(n){t.before(e,n)})},after:function(e,r){n.each(r,function(n,o){var i=0===o?e:r[o-1];t.after(i,n)})},prepend:function(e,r){n.each(r.slice().reverse(),function(n){t.prepend(e,n)})},append:function(e,r){n.each(r,function(n){t.append(e,n)})}}}),i("10",["x","2r","z"],function(n,t,e){var r=function(t){t.dom().textContent="",n.each(e.children(t),function(n){o(n)})},o=function(n){var t=n.dom();null!==t.parentNode&&t.parentNode.removeChild(t)};return{empty:r,remove:o,unwrap:function(n){var r=e.children(n);r.length>0&&t.before(n,r),o(n)}}}),i("11",["16","a","b","1a"],function(n,t,e,r){var o=function(n){var t=e.isText(n)?n.dom().parentNode:n.dom();return void 0!==t&&null!==t&&t.ownerDocument.body.contains(t)},i=n.cached(function(){return u(t.fromDom(r))}),u=function(n){var e=n.dom().body;if(null===e||void 0===e)throw"Body is not available yet";return t.fromDom(e)};return{body:i,getBody:u,inBody:o}}),i("3",["2","s","x","y","9","10","11","z"],function(n,t,e,r,o,i,u,a){var c=function(r){n.emit(r,t.detachedFromDom());var o=r.components();e.each(o,c)},s=function(r){var o=r.components();e.each(o,s),n.emit(r,t.attachedToDom())},f=function(n,t){l(n,t,o.append)},l=function(n,t,e){n.getSystem().addToWorld(t),e(n.element(),t.element()),u.inBody(n.element())&&s(t),n.syncComponents()},d=function(n){c(n),i.remove(n.element()),n.getSystem().removeFromWorld(n)};return{attach:f,attachWith:l,detach:function(n){var t=a.parent(n.element()).bind(function(t){return n.getSystem().getByDom(t).fold(r.none,r.some)});d(n),t.each(function(n){n.syncComponents()})},detachChildren:function(n){var t=n.components();e.each(t,d),i.empty(n.element()),n.syncComponents()},attachSystem:function(n,t){o.append(n,t.element());var r=a.children(t.element());e.each(r,function(n){t.getByDom(n).each(s)})},detachSystem:function(n){var t=a.children(n.element());e.each(t,function(t){n.getByDom(t).each(c)}),i.remove(n.element())}}}),i("6s",["x","a","z","1a"],function(n,t,e,r){return{fromHtml:function(n,o){var i=o||r,u=i.createElement("div");return u.innerHTML=n,e.children(t.fromDom(u))},fromTags:function(e,r){return n.map(e,function(n){return t.fromTag(n,r)})},fromText:function(e,r){return n.map(e,function(n){return t.fromText(n,r)})},fromDom:function(e){return n.map(e,t.fromDom)}}}),i("4m",["a","6s","9","2r","10","z"],function(n,t,e,r,o,i){var u=function(n){return n.dom().innerHTML};return{get:u,set:function(u,a){var c=i.owner(u),s=c.dom(),f=n.fromDom(s.createDocumentFragment()),l=t.fromHtml(a,s);r.append(f,l),o.empty(u),e.append(u,f)},getOuter:function(t){var r=n.fromTag("div"),o=n.fromDom(t.dom().cloneNode(!0));return e.append(r,o),u(r)}}}),i("4n",["4h","a","9","2r","10","z"],function(n,t,e,r,o,i){var u=function(n,e){return t.fromDom(n.dom().cloneNode(e))},a=function(n){return u(n,!1)},c=function(n){return u(n,!0)},s=function(e,r){var o=t.fromTag(r),i=n.clone(e);return n.setAll(o,i),o};return{shallow:a,shallowAs:s,deep:c,copy:function(n,t){var e=s(n,t),o=i.children(c(n));return r.append(e,o),e},mutate:function(n,t){var u=s(n,t);e.before(n,u);var a=i.children(n);return r.append(u,a),o.remove(n),u}}}),i("2s",["4m","4n"],function(n,t){return{getHtml:function(e){var r=t.shallow(e);return n.getOuter(r)}}}),i("12",["2s"],function(n){return{element:function(t){return n.getHtml(t)}}}),i("14",["y"],function(n){return{cat:function(n){for(var t=[],e=function(n){t.push(n)},r=0;r<n.length;r++)n[r].each(e);return t},findMap:function(t,e){for(var r=0;r<t.length;r++){var o=e(t[r],r);if(o.isSome())return o}return n.none()},liftN:function(t,e){for(var r=[],o=0;o<t.length;o++){var i=t[o];if(!i.isSome())return n.none();r.push(i.getOrDie())}return n.some(e.apply(null,r))}}}),i("4",["s","12","13","x","6","w","14","15","u"],function(n,t,e,r,o,i,u,a,c){var s="unknown",f=!0,l="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__",d=[],m=["alloy/data/Fields","alloy/debugging/Debugging"],p=function(){if(!1===f)return s;var n=new c;if(void 0!==n.stack){var t=n.stack.split("\n");return r.find(t,function(n){return n.indexOf("alloy")>0&&!r.exists(m,function(t){return n.indexOf(t)>-1})}).getOr(s)}return s},g=function(){},v={logEventCut:o.noop,logEventStopped:o.noop,logNoParent:o.noop,logEventNoHandlers:o.noop,logEventResponse:o.noop,write:o.noop},h=function(e,o,i){var u=f&&("*"===d||r.contains(d,e))?function(){var i=[];return{logEventCut:function(n,t,e){i.push({outcome:"cut",target:t,purpose:e})},logEventStopped:function(n,t,e){i.push({outcome:"stopped",target:t,purpose:e})},logNoParent:function(n,t,e){i.push({outcome:"no-parent",target:t,purpose:e})},logEventNoHandlers:function(n,t){i.push({outcome:"no-handlers-left",target:t})},logEventResponse:function(n,t,e){i.push({outcome:"response",purpose:e,target:t})},write:function(){r.contains(["mousemove","mouseover","mouseout",n.systemInit()],e)||a.log(e,{event:e,target:o.dom(),sequence:r.map(i,function(n){return r.contains(["cut","stopped","response"],n.outcome)?"{"+n.purpose+"} "+n.outcome+" at ("+t.element(n.target)+")":n.outcome})})}}}():v,c=i(u);return u.write(),c},y=function(n){var e=function(n){var o=n.spec();return{"(original.spec)":o,"(dom.ref)":n.element().dom(),"(element)":t.element(n.element()),"(initComponents)":r.map(void 0!==o.components?o.components:[],e),"(components)":r.map(n.components(),e),"(bound.events)":i.mapToArray(n.events(),function(n,t){return[t]}).join(", "),"(behaviours)":void 0!==o.behaviours?i.map(o.behaviours,function(t,e){return void 0===t?"--revoked--":{config:t.configAsRaw(),"original-config":t.initialConfig,state:n.readState(e)}}):"none"}};return e(n)},b=function(){return void 0!==window[l]?window[l]:(window[l]={systems:{},lookup:function(n){var r=window[l].systems,o=i.keys(r);return u.findMap(o,function(o){return r[o].getByUid(n).toOption().map(function(n){return e.wrap(t.element(n.element()),y(n))})})}},window[l])},w=function(n,t){b().systems[n]=t};return{logHandler:g,noLogger:o.constant(v),getTrace:p,monitorEvent:h,isDebugging:o.constant(f),registerInspector:w}}),i("5",[],function(){var n=function(t){var e=t,r=function(){return e};return{get:r,set:function(n){e=n},clone:function(){return n(r())}}};return n}),i("4o",["1h","y"],function(n,t){return function(e,r,o,i,u){return e(o,i)?t.some(o):n.isFunction(u)&&u(o)?t.none():r(o,i,u)}}),i("2t",["1h","x","6","y","11","19","a","4o"],function(n,t,e,r,o,i,u,a){var c=function(n){return m(o.body(),n)},s=function(t,o,i){for(var a=t.dom(),c=n.isFunction(i)?i:e.constant(!1);a.parentNode;){a=a.parentNode;var s=u.fromDom(a);if(o(s))return r.some(s);if(c(s))break}return r.none()},f=function(n,t,e){return a(function(n){return t(n)},s,n,t,e)},l=function(n,t){var e=n.dom();return e.parentNode?d(u.fromDom(e.parentNode),function(e){return!i.eq(n,e)&&t(e)}):r.none()},d=function(n,r){return t.find(n.dom().childNodes,e.compose(r,u.fromDom)).map(u.fromDom)},m=function(n,t){var e=function(n){for(var o=0;o<n.childNodes.length;o++){if(t(u.fromDom(n.childNodes[o])))return r.some(u.fromDom(n.childNodes[o]));var i=e(n.childNodes[o]);if(i.isSome())return i}return r.none()};return e(n.dom())};return{first:c,ancestor:s,closest:f,sibling:l,child:d,descendant:m}}),i("1b",["2t"],function(n){return{any:function(t){return n.first(t).isSome()},ancestor:function(t,e,r){return n.ancestor(t,e,r).isSome()},closest:function(t,e,r){return n.closest(t,e,r).isSome()},sibling:function(t,e){return n.sibling(t,e).isSome()},child:function(t,e){return n.child(t,e).isSome()},descendant:function(t,e){return n.descendant(t,e).isSome()}}}),i("8",["6","y","19","a","1b","z","1a"],function(n,t,e,r,o,i,u){var a=function(n){n.dom().focus()},c=function(n){n.dom().blur()},s=function(n){var t=i.owner(n).dom();return n.dom()===t.activeElement},f=function(n){var e=void 0!==n?n.dom():u;return t.from(e.activeElement).map(r.fromDom)},l=function(t){var r=i.owner(t);f(r).filter(function(r){return o.closest(r,n.curry(e.eq,t))}).fold(function(){a(t)},n.noop)};return{hasFocus:s,focus:a,blur:c,active:f,search:function(n){return f(i.owner(n)).filter(function(t){return n.dom().contains(t.dom())})},focusInside:l}}),u("1d",tinymce.util.Tools.resolve),i("c",["1d"],function(n){return n("tinymce.dom.DOMUtils")}),i("d",["1d"],function(n){return n("tinymce.ThemeManager")}),i("e",["1a"],function(n){return{openLink:function(t){var e=n.createElement("a");e.target="_blank",e.href=t.href,e.rel="noreferrer noopener";var r=n.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.body.appendChild(e),e.dispatchEvent(r),n.body.removeChild(e)}}}),i("f",["6"],function(n){return{formatChanged:n.constant("formatChanged"),orientationChanged:n.constant("orientationChanged"),dropupDismissed:n.constant("dropupDismissed")}}),i("2u",["3c","s","12","2d","x","w"],function(n,t,e,r,o,i){var u=function(n,t){return t.universal()?n:o.filter(n,function(n){return o.contains(t.channels(),n)})};return{events:function(a){return n.derive([n.run(t.receive(),function(n,t){var c=a.channels(),s=i.keys(c),f=u(s,t);o.each(f,function(o){var i=c[o](),u=i.schema(),a=r.asStructOrDie("channel["+o+"] data\nReceiver: "+e.element(n.element()),u,t.data());i.onReceive()(n,a)})})])}}}),i("6t",["28","2d","6"],function(n,t,e){var r=[n.strict("menu"),n.strict("selectedMenu")],o=[n.strict("item"),n.strict("selectedItem")],i=t.objOfOnly(o.concat(r)),u=t.objOfOnly(o);return{menuFields:e.constant(r),itemFields:e.constant(o),schema:e.constant(i),itemSchema:e.constant(u)}}),i("4p",["4","6t","4b","28","2d","x","6","y","47","15"],function(n,t,e,r,o,i,u,a,c){var s=r.strictObjOf("initSize",[r.strict("numColumns"),r.strict("numRows")]),f=function(){return r.strictOf("markers",t.itemSchema())},l=function(){return r.strictOf("markers",t.schema())},d=function(){return r.strictObjOf("markers",[r.strict("backgroundMenu")].concat(t.menuFields()).concat(t.itemFields()))},m=function(n){return r.strictObjOf("markers",i.map(n,r.strict))},p=function(t,e,i){var u=n.getTrace();return r.field(e,e,i,o.valueOf(function(r){return c.value(function(){return n.logHandler(t,e,u),r.apply(void 0,arguments)})}))},g=function(n){return p("onHandler",n,e.defaulted(u.noop))},v=function(n){return p("onKeyboardHandler",n,e.defaulted(a.none))},h=function(n){return p("onHandler",n,e.strict())},y=function(n){return p("onKeyboardHandler",n,e.strict())},b=function(n,t){return r.state(n,u.constant(t))},w=function(n){return r.state(n,u.identity)};return{initSize:u.constant(s),itemMarkers:f,menuMarkers:l,tieredMenuMarkers:d,markers:m,onHandler:g,onKeyboardHandler:v,onStrictHandler:h,onStrictKeyboardHandler:y,output:b,snapshot:w}}),i("2v",["4p","28","2d","47"],function(n,t,e,r){return[t.strictOf("channels",e.setOf(r.value,e.objOfOnly([n.onStrictHandler("onReceive"),t.defaulted("schema",e.anyValue())])))]}),i("1e",["p","2u","2v"],function(n,t,e){return n.create({fields:e,name:"receiving",active:t})}),i("2x",["2e"],function(n){var t=function(n,t){var e=i(n,t),r=t.aria();r.update()(n,r,e)},e=function(e,r){n.toggle(e.element(),r.toggleClass()),t(e,r)},r=function(e,r){n.add(e.element(),r.toggleClass()),t(e,r)},o=function(e,r){n.remove(e.element(),r.toggleClass()),t(e,r)},i=function(t,e){return n.has(t.element(),e.toggleClass())};return{onLoad:function(n,t,e){(t.selected()?r:o)(n,t,e)},toggle:e,isOn:i,on:r,off:o}}),i("2w",["3c","26","2x","4a","x"],function(n,t,e,r,o){return{exhibit:function(){return r.nu({})},events:function(r,i){var u=t.executeEvent(r,i,e.toggle),a=t.loadEvent(r,i,e.onLoad);return n.derive(o.flatten([r.toggleOnExecute()?[u]:[],[a]]))}}}),i("4q",["13","x","y","b","4h"],function(n,t,e,r,o){var i=function(n,t,e){o.set(n.element(),"aria-pressed",e),t.syncWithExpanded()&&c(n,t,e)},u=function(n,t,e){o.set(n.element(),"aria-selected",e)},a=function(n,t,e){o.set(n.element(),"aria-checked",e)},c=function(n,t,e){o.set(n.element(),"aria-expanded",e)},s={button:["aria-pressed"],"input:checkbox":["aria-checked"]},f={button:["aria-pressed"],listbox:["aria-pressed","aria-expanded"],menuitemcheckbox:["aria-checked"]},l=function(t){var e=t.element(),i=r.name(e),u="input"===i&&o.has(e,"type")?":"+o.get(e,"type"):"";return n.readOptFrom(s,i+u)},d=function(t){var r=t.element();if(o.has(r,"role")){var i=o.get(r,"role");return n.readOptFrom(f,i)}return e.none()};return{updatePressed:i,updateSelected:u,updateChecked:a,updateExpanded:c,updateAuto:function(n,e,r){var i=d(n).orThunk(function(){return l(n)}).getOr([]);t.each(i,function(t){o.set(n.element(),t,r)})}}}),i("2y",["4q","4p","28","2d","6"],function(n,t,e,r,o){return[e.defaulted("selected",!1),e.strict("toggleClass"),e.defaulted("toggleOnExecute",!0),e.defaultedOf("aria",{mode:"none"},r.choose("mode",{pressed:[e.defaulted("syncWithExpanded",!1),t.output("update",n.updatePressed)],checked:[t.output("update",n.updateChecked)],expanded:[t.output("update",n.updateExpanded)],selected:[t.output("update",n.updateSelected)],none:[t.output("update",o.noop)]}))]}),i("1f",["p","2w","2x","2y"],function(n,t,e,r){return n.create({fields:r,name:"toggling",active:t,apis:e})}),i("4r",["6"],function(n){return{prefix:n.constant("alloy-id-"),idAttr:n.constant("data-alloy-id")}}),u("4s",Date),i("3e",["4s","1v","2l"],function(n,t,e){var r=0;return{generate:function(o){var i=new n,u=i.getTime(),a=t.floor(1e9*t.random());return r++,o+"_"+a+r+e(u)}}}),i("4t",["2t","2q","4o"],function(n,t,e){var r=function(n){return t.one(n)},o=function(e,r,o){return n.ancestor(e,function(n){return t.is(n,r)},o)};return{first:r,ancestor:o,sibling:function(e,r){return n.sibling(e,function(n){return t.is(n,r)})},child:function(e,r){return n.child(e,function(n){return t.is(n,r)})},descendant:function(n,e){return t.one(e,n)},closest:function(n,r,i){return e(t.is,o,n,r,i)}}}),i("2z",["4r","3e","6","y","4h","b","4t"],function(n,t,e,r,o,i,u){var a=n.prefix(),c=n.idAttr(),s=function(n,e){var r=t.generate(a+n);return o.set(e,c,r),r},f=function(n,t){o.set(n,c,t)},l=function(n){var t=i.isElement(n)?o.get(n,c):null;return r.from(t)},d=function(n,t){return u.descendant(n,t)},m=function(n){return t.generate(n)};return{revoke:function(n){o.remove(n,c)},write:s,writeOnly:f,read:l,find:d,generate:m,attribute:e.constant(c)}}),i("1g",["2z","13","v","y"],function(n,t,e,r){return{record:function(o){var i=t.hasKey(o,"uid")?o.uid:n.generate("memento");return{get:function(n){return n.getSystem().getByUid(i).getOrDie()},getOpt:function(n){return n.getSystem().getByUid(i).fold(r.none,r.some)},asSpec:function(){return e.deepMerge(o,{uid:i})}}}}}),u("1i",setTimeout),u("1j",window),i("1k",["1e","13","f"],function(n,t,e){return{format:function(r,o){return n.config({channels:t.wrap(e.formatChanged(),{onReceive:function(n,t){t.command===r&&o(n,t.state)}})})},orientation:function(r){return n.config({channels:t.wrap(e.orientationChanged(),{onReceive:r})})},receive:function(n,t){return{key:n,value:{onReceive:t}}}}}),i("h",["6"],function(n){var t="tinymce-mobile";return{resolve:function(n){return t+"-"+n},prefix:n.constant(t)}}),i("30",["3c","2f","4a","6"],function(n,t,e,r){var o=function(){return e.nu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})};return{events:function(){return n.derive([n.abort(t.selectstart(),r.constant(!0))])},exhibit:o}}),i("1l",["p","30"],function(n,t){return n.create({fields:[],name:"unselecting",active:t})}),i("4v",["8"],function(n){return{focus:function(t,e){e.ignore()||(n.focus(t.element()),e.onFocus()(t))},blur:function(t,e){e.ignore()||n.blur(t.element())},isFocused:function(t){return n.hasFocus(t.element())}}}),i("4u",["3c","s","4v","4a"],function(n,t,e,r){return{exhibit:function(n,t){return t.ignore()?r.nu({}):r.nu({attributes:{tabindex:"-1"}})},events:function(r){return n.derive([n.run(t.focus(),function(n,t){e.focus(n,r),t.stop()})])}}}),i("4w",["4p","28"],function(n,t){return[n.onHandler("onFocus"),t.defaulted("ignore",!1)]}),i("31",["p","4u","4v","4w"],function(n,t,e,r){return n.create({fields:r,name:"focusing",active:t,apis:e})}),i("88",["6"],function(n){return{BACKSPACE:n.constant([8]),TAB:n.constant([9]),ENTER:n.constant([13]),SHIFT:n.constant([16]),CTRL:n.constant([17]),ALT:n.constant([18]),CAPSLOCK:n.constant([20]),ESCAPE:n.constant([27]),SPACE:n.constant([32]),PAGEUP:n.constant([33]),PAGEDOWN:n.constant([34]),END:n.constant([35]),HOME:n.constant([36]),LEFT:n.constant([37]),UP:n.constant([38]),RIGHT:n.constant([39]),DOWN:n.constant([40]),INSERT:n.constant([45]),DEL:n.constant([46]),META:n.constant([91,93,224]),F10:n.constant([121])}}),i("91",[],function(){return{cycleBy:function(n,t,e,r){var o=n+t;return o>r?e:o<e?r:o},cap:function(n,t,e){return n<=t?t:n>=e?e:n}}}),i("7l",["x","11","z"],function(n,t,e){var r=function(n){return a(t.body(),n)},o=function(t,r,o){return n.filter(e.parents(t,o),r)},i=function(t,r){return n.filter(e.siblings(t),r)},u=function(t,r){return n.filter(e.children(t),r)},a=function(t,r){var o=[];return n.each(e.children(t),function(n){r(n)&&(o=o.concat([n])),o=o.concat(a(n,r))}),o};return{all:r,ancestors:o,siblings:i,children:u,descendants:a}}),i("5l",["7l","2q"],function(n,t){return{all:function(n){return t.all(n)},ancestors:function(e,r,o){return n.ancestors(e,function(n){return t.is(n,r)},o)},siblings:function(e,r){return n.siblings(e,function(n){return t.is(n,r)})},children:function(e,r){return n.children(e,function(n){return t.is(n,r)})},descendants:function(n,e){return t.all(e,n)}}}),i("7j",["91","x","y","47","2e","5l","4t","u"],function(n,t,e,r,o,i,u,a){var c=function(n,e){var r=i.descendants(n.element(),"."+e.highlightClass());t.each(r,function(t){o.remove(t,e.highlightClass()),n.getSystem().getByDom(t).each(function(t){e.onDehighlight()(n,t)})})},s=function(n,t,e,r){var i=p(n,t,e,r);o.remove(r.element(),t.highlightClass()),i&&t.onDehighlight()(n,r)},f=function(n,t,e,r){var i=p(n,t,e,r);c(n,t,e),o.add(r.element(),t.highlightClass()),i||t.onHighlight()(n,r)},l=function(n,t,e){h(n,t,e).each(function(r){f(n,t,e,r)})},d=function(n,t,e){y(n,t,e).each(function(r){f(n,t,e,r)})},m=function(n,t,e,r){v(n,t,e,r).fold(function(n){throw new a(n)},function(r){f(n,t,e,r)})},p=function(n,t,e,r){return o.has(r.element(),t.highlightClass())},g=function(n,t){return u.descendant(n.element(),"."+t.highlightClass()).bind(n.getSystem().getByDom)},v=function(n,t,o,u){var a=i.descendants(n.element(),"."+t.itemClass());return e.from(a[u]).fold(function(){return r.error("No element found with index "+u)},n.getSystem().getByDom)},h=function(n,t){return u.descendant(n.element(),"."+t.itemClass()).bind(n.getSystem().getByDom)},y=function(n,t){var r=i.descendants(n.element(),"."+t.itemClass());return(r.length>0?e.some(r[r.length-1]):e.none()).bind(n.getSystem().getByDom)},b=function(e,r,u,a){var c=i.descendants(e.element(),"."+r.itemClass());return t.findIndex(c,function(n){return o.has(n,r.highlightClass())}).bind(function(t){var r=n.cycleBy(t,a,0,c.length-1);return e.getSystem().getByDom(c[r])})};return{dehighlightAll:c,dehighlight:s,highlight:f,highlightFirst:l,highlightLast:d,highlightAt:m,isHighlighted:p,getHighlighted:g,getFirst:h,getLast:y,
getPrevious:function(n,t,e){return b(n,t,e,-1)},getNext:function(n,t,e){return b(n,t,e,1)}}}),i("7k",["4p","28"],function(n,t){return[t.strict("highlightClass"),t.strict("itemClass"),n.onHandler("onHighlight"),n.onHandler("onDehighlight")]}),i("5j",["p","7j","7k","t"],function(n,t,e){return n.create({fields:e,name:"highlighting",apis:t})}),i("94",["5j","6","8"],function(n,t,e){return{dom:function(){return{get:function(n){return e.search(n.element())},set:function(n,t){n.getSystem().triggerFocus(t,n.element())}}},highlights:function(){return{get:function(t){return n.getHighlighted(t).map(function(n){return n.element()})},set:function(e,r){e.getSystem().getByDom(r).fold(t.noop,function(t){n.highlight(e,t)})}}}}}),i("8q",["x","6"],function(n,t){var e=function(t){return function(e){return n.contains(t,e.raw().which)}},r=function(t){return function(e){return n.forall(t,function(n){return n(e)})}},o=function(n){return function(t){return t.raw().which===n}},i=function(n){return!0===n.raw().shiftKey};return{inSet:e,and:r,is:o,isShift:i,isNotShift:t.not(i)}}),i("8r",["8q","x"],function(n,t){return{basic:function(t,e){return{matches:n.is(t),classification:e}},rule:function(n,t){return{matches:n,classification:t}},choose:function(n,e){return t.find(n,function(n){return n.matches(e)}).map(function(n){return n.classification})}}}),i("8o",["3c","2f","s","94","4p","8r","28","v"],function(n,t,e,r,o,i,u,a){return{typical:function(c,s,f,l,d,m){var p=function(){return c.concat([u.defaulted("focusManager",r.dom()),o.output("handler",h),o.output("state",s)])},g=function(n,t,e,r){var o=f(n,t,e,r);return i.choose(o,t.event()).bind(function(o){return o(n,t,e,r)})},v=function(r,o){var i=l(r,o),u=n.derive(m.map(function(t){return n.run(e.focus(),function(n,e){t(n,r,o,e),e.stop()})}).toArray().concat([n.run(t.keydown(),function(n,t){g(n,t,r,o).each(function(){t.stop()})})]));return a.deepMerge(i,u)},h={schema:p,processKey:g,toEvents:v,toApis:d};return h}}}),i("8p",["x","1v"],function(n){var t=function(t,e,r){var o=n.reverse(t.slice(0,e)),i=n.reverse(t.slice(e+1));return n.find(o.concat(i),r)},e=function(t,e,r){var o=n.reverse(t.slice(0,e));return n.find(o,r)};return{cyclePrev:t,cycleNext:function(t,e,r){var o=t.slice(0,e),i=t.slice(e+1);return n.find(i.concat(o),r)},tryPrev:e,tryNext:function(t,e,r){var o=t.slice(e+1);return n.find(o,r)}}}),i("56",[],function(){return{isSupported:function(n){return void 0!==n.style}}}),i("38",["1h","x","w","y","4h","11","a","b","56","36","u","15","1j"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(t,e,r){if(!n.isString(r))throw l.error("Invalid call to CSS.set. Property ",e,":: Value ",r,":: Element ",t),new f("CSS value must be a string: "+r);c.isSupported(t)&&t.style.setProperty(e,r)},p=function(n,t){c.isSupported(n)&&n.style.removeProperty(t)},g=function(n,t,e){var r=n.dom();m(r,t,e)},v=function(n,t){var r=n.dom();e.each(t,function(n,t){m(r,t,n)})},h=function(n,t){var r=n.dom();e.each(t,function(n,t){n.fold(function(){p(r,t)},function(n){m(r,t,n)})})},y=function(n,t){var e=n.dom(),r=d.getComputedStyle(e),o=r.getPropertyValue(t),u=""!==o||i.inBody(n)?o:b(e,t);return null===u?void 0:u},b=function(n,t){return c.isSupported(n)?n.style.getPropertyValue(t):""},w=function(n,t){var e=n.dom(),o=b(e,t);return r.from(o).filter(function(n){return n.length>0})},x=function(n,t,e){var r=u.fromTag(n);return g(r,t,e),w(r,t).isSome()},O=function(n,t){var e=n.dom();p(e,t),o.has(n,"style")&&""===s.trim(o.get(n,"style"))&&o.remove(n,"style")},S=function(n,t){var e=o.get(n,"style"),r=t(n);return(void 0===e?o.remove:o.set)(n,"style",e),r},T=function(n,t,e){w(n,e).each(function(n){w(t,e).isNone()&&g(t,e,n)})};return{copy:function(n,t){var e=n.dom(),r=t.dom();c.isSupported(e)&&c.isSupported(r)&&(r.style.cssText=e.style.cssText)},set:g,preserve:S,setAll:v,setOptions:h,remove:O,get:y,getRaw:w,isValidValue:x,reflow:function(n){return n.dom().offsetWidth},transfer:function(n,e,r){a.isElement(n)&&a.isElement(e)&&t.each(r,function(t){T(n,e,t)})}}}),i("78",["1h","x","38","56"],function(n,t,e,r){return function(o,i){var u=function(t,e){if(!n.isNumber(e)&&!e.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+e;var i=t.dom();r.isSupported(i)&&(i.style[o]=e+"px")},a=function(n){var t=i(n);if(t<=0||null===t){var r=e.get(n,o);return parseFloat(r)||0}return t},c=a,s=function(n,r){return t.foldl(r,function(t,r){var o=e.get(n,r),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i},0)};return{set:u,get:a,getOuter:c,aggregate:s,max:function(n,t,e){var r=s(n,e);return t>r?t-r:0}}}}),i("87",["38","78"],function(n,t){var e=t("height",function(n){return n.dom().offsetHeight});return{set:function(n,t){e.set(n,t)},get:function(n){return e.get(n)},getOuter:function(n){return e.getOuter(n)},setMax:function(t,r){var o=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=e.max(t,r,o);n.set(t,"max-height",i+"px")}}}),i("6u",["88","27","4p","8o","12","8p","8q","8r","28","x","6","y","19","8","5l","4t","87"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v){var h=[c.defaulted("selector",'[data-alloy-tabstop="true"]'),c.option("onEscape"),c.option("onEnter"),c.defaulted("firstTabstop",0),c.defaulted("useTabstopAt",f.constant(!0)),c.option("visibilitySelector")],y=function(n,t){var e=p.descendants(n.element(),t.selector()),r=s.filter(e,function(n){return b(t,n)});l.from(r[t.firstTabstop()]).each(function(t){var e=n.element();n.getSystem().triggerFocus(t,e)})},b=function(n,t){var e=n.visibilitySelector().bind(function(n){return g.closest(t,n)}).getOr(t);return v.get(e)>0},w=function(n,t){return m.search(n.element()).bind(function(n){return g.closest(n,t.selector())})},x=function(n,t,e,r,o){return o(t,e,function(n){return b(r,n)&&r.useTabstopAt(n)}).fold(function(){return l.some(!0)},function(t){var e=n.getSystem(),r=n.element();return e.triggerFocus(t,r),l.some(!0)})},O=function(n,t,e,r){var o=p.descendants(n.element(),e.selector());return w(n,e).bind(function(t){return s.findIndex(o,f.curry(d.eq,t)).bind(function(t){return x(n,o,t,e,r)})})},S=function(n,t,e){return O(n,t,e,i.cyclePrev)},T=function(n,t,e){return O(n,t,e,i.cycleNext)},k=function(n,t,e){return e.onEnter().bind(function(e){return e(n,t)})},C=function(n,t,e){return e.onEscape().bind(function(e){return e(n,t)})},E=f.constant([a.rule(u.and([u.isShift,u.inSet(n.TAB())]),S),a.rule(u.inSet(n.TAB()),T),a.rule(u.inSet(n.ESCAPE()),C),a.rule(u.and([u.isNotShift,u.inSet(n.ENTER())]),k)]),D=f.constant({}),A=f.constant({});return r.typical(h,t.init,E,D,A,l.some(y))}),i("8s",["4h","b"],function(n,t){return{inside:function(e){return"input"===t.name(e)&&"radio"!==n.get(e,"type")||"textarea"===t.name(e)}}}),i("8t",["8s","88","2","s","8q","y"],function(n,t,e,r,o,i){var u=function(n,t,o){return e.dispatch(n,o,r.execute()),i.some(!0)};return{defaultExecute:function(e,r,a){return n.inside(a)&&o.inSet(t.SPACE())(r.event())?i.none():u(e,r,a)}}}),i("6v",["8s","88","27","8o","8t","12","8q","8r","28","6","y"],function(n,t,e,r,o,i,u,a,c,s,f){var l=[c.defaulted("execute",o.defaultExecute),c.defaulted("useSpace",!1),c.defaulted("useEnter",!0),c.defaulted("useDown",!1)],d=function(n,t,e){return e.execute()(n,t,n.element())},m=function(e,r,o){var i=o.useSpace()&&!n.inside(e.element())?t.SPACE():[],c=o.useEnter()?t.ENTER():[],s=o.useDown()?t.DOWN():[],f=i.concat(c).concat(s);return[a.rule(u.inSet(f),d)]},p=s.constant({}),g=s.constant({});return r.typical(l,e.init,m,p,g,f.none())}),i("4y",["4f","5","6","y"],function(n,t,e,r){return{flatgrid:function(){var o=t(r.none()),i=function(n,t){o.set(r.some({numRows:e.constant(n),numColumns:e.constant(t)}))},u=function(){return o.get().map(function(n){return n.numRows()})},a=function(){return o.get().map(function(n){return n.numColumns()})};return n({readState:e.constant({}),setGridSize:i,getNumRows:u,getNumColumns:a})},init:function(n){return n.state()(n)}}}),i("9w",["38"],function(n){var t=function(n,t){return function(r){return"rtl"===e(r)?t:n}},e=function(t){return"rtl"===n.get(t,"direction")?"rtl":"ltr"};return{onDirection:t,getDirection:e}}),i("8u",["9w"],function(n){var t=function(n){return function(t,e,r,o){var u=n(t.element());return i(u,t,e,r,o)}},e=function(e,r){var o=n.onDirection(e,r);return t(o)},r=function(e,r){var o=n.onDirection(r,e);return t(o)},o=function(n){return function(t,e,r,o){return i(n,t,e,r,o)}},i=function(n,t,e,r,o){return r.focusManager().get(t).bind(function(e){return n(t.element(),e,r,o)}).map(function(n){return r.focusManager().set(t,n),!0})};return{east:r,west:e,north:o,south:o,move:o}}),i("9x",["x","2n"],function(n,t){var e=t.immutableBag(["index","candidates"],[]);return{locate:function(t,r){return n.findIndex(t,r).map(function(n){return e({index:n,candidates:t})})}}}),i("9y",["6","4g","38"],function(n,t,e){var r=function(r,o,i,u){var a=e.get(r,o);void 0===a&&(a="");var c=a===i?u:i,s=n.curry(e.set,r,o,a),f=n.curry(e.set,r,o,c);return t(s,f,!1)},o=function(n){return n.offsetWidth<=0&&n.offsetHeight<=0};return{toggler:function(n){return r(n,"visibility","hidden","visible")},displayToggler:function(n,t){return r(n,"display","none",t)},isVisible:function(n){var t=n.dom();return!o(t)}}}),i("8v",["9x","x","6","19","5l","9y"],function(n,t,e,r,o,i){var u=function(n,t,e){var r=i.isVisible;return a(n,t,e,r)},a=function(u,a,c){var s=e.curry(r.eq,a),f=o.descendants(u,c),l=t.filter(f,i.isVisible);return n.locate(l,s)};return{locateVisible:u,locateIn:a,findIndex:function(n,e){return t.findIndex(n,function(n){return r.eq(e,n)})}}}),i("8w",["91","6","y","1v"],function(n,t,e,r){var o=function(n,t,o,i){return i(r.floor(t/o),t%o).bind(function(t){var r=t.row()*o+t.column();return r>=0&&r<n.length?e.some(n[r]):e.none()})},i=function(r,i,u,a,c){return o(r,i,a,function(o,i){var s=o===u-1,f=s?r.length-o*a:a,l=n.cycleBy(i,c,0,f-1);return e.some({row:t.constant(o),column:t.constant(l)})})},u=function(r,i,u,a,c){return o(r,i,a,function(o,i){var s=n.cycleBy(o,c,0,u-1),f=s===u-1,l=f?r.length-s*a:a,d=n.cap(i,0,l-1);return e.some({row:t.constant(s),column:t.constant(d)})})},a=function(n,t,e,r){return i(n,t,e,r,1)},c=function(n,t,e,r){return i(n,t,e,r,-1)},s=function(n,t,e,r){return u(n,t,e,r,-1)};return{cycleDown:function(n,t,e,r){return u(n,t,e,r,1)},cycleUp:s,cycleLeft:c,cycleRight:a}}),i("6w",["88","4y","4p","8o","8t","8u","8v","8q","8r","8w","28","5","6","y","8","4t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g){var v=[f.strict("selector"),f.defaulted("execute",o.defaultExecute),e.onKeyboardHandler("onEscape"),f.defaulted("captureTab",!1),e.initSize()],h=function(n,t){g.descendant(n.element(),t.selector()).each(function(t){n.getSystem().triggerFocus(t,n.element())})},y=function(n,t,e){return p.search(n.element(),e.selector()).bind(function(r){return e.execute()(n,t,r)})},b=function(n){return function(t,e,r,o){return u.locateVisible(t,e,r.selector()).bind(function(t){return n(t.candidates(),t.index(),o.getNumRows().getOr(r.initSize().numRows()),o.getNumColumns().getOr(r.initSize().numColumns()))})}},w=function(n,t,e){return e.captureTab()?m.some(!0):m.none()},x=function(n,t,e){return e.onEscape()(n,t)},O=b(s.cycleLeft),S=b(s.cycleRight),T=b(s.cycleUp),k=b(s.cycleDown),C=d.constant([c.rule(a.inSet(n.LEFT()),i.west(O,S)),c.rule(a.inSet(n.RIGHT()),i.east(O,S)),c.rule(a.inSet(n.UP()),i.north(T)),c.rule(a.inSet(n.DOWN()),i.south(k)),c.rule(a.and([a.isShift,a.inSet(n.TAB())]),w),c.rule(a.and([a.isNotShift,a.inSet(n.TAB())]),w),c.rule(a.inSet(n.ESCAPE()),x),c.rule(a.inSet(n.SPACE().concat(n.ENTER())),y)]),E=d.constant({}),D={};return r.typical(v,t.flatgrid,C,E,D,m.some(h))}),i("8x",["91","8v","6","y"],function(n,t,e,r){return{horizontal:function(o,i,u,a){return t.locateVisible(o,u,i,e.constant(!0)).bind(function(t){var e=t.index(),o=t.candidates(),i=n.cycleBy(e,a,0,o.length-1);return r.from(o[i])})}}}),i("6x",["8s","88","27","8o","8t","8u","8x","8q","8r","28","6","y","8","4t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var p=[s.strict("selector"),s.defaulted("getInitial",l.none),s.defaulted("execute",o.defaultExecute),s.defaulted("executeOnMove",!1)],g=function(n,t,e){return d.search(n.element()).bind(function(r){return e.execute()(n,t,r)})},v=function(n,t){t.getInitial()(n).or(m.descendant(n.element(),t.selector())).each(function(t){n.getSystem().triggerFocus(t,n.element())})},h=function(n,t,e){return u.horizontal(n,e.selector(),t,-1)},y=function(n,t,e){return u.horizontal(n,e.selector(),t,1)},b=function(n){return function(t,e,r){return n(t,e,r).bind(function(){return r.executeOnMove()?g(t,e,r):l.some(!0)})}},w=function(){return[c.rule(a.inSet(t.LEFT().concat(t.UP())),b(i.west(h,y))),c.rule(a.inSet(t.RIGHT().concat(t.DOWN())),b(i.east(h,y))),c.rule(a.inSet(t.ENTER()),g),c.rule(a.inSet(t.SPACE()),g)]},x=f.constant({}),O=f.constant({});return r.typical(p,e.init,w,x,O,l.some(v))}),i("8y",["91","y","2n","1v"],function(n,t,e){var r=e.immutableBag(["rowIndex","columnIndex","cell"],[]),o=function(n,e,o){return t.from(n[e]).bind(function(n){return t.from(n[o]).map(function(n){return r({rowIndex:e,columnIndex:o,cell:n})})})},i=function(t,e,r,i){var u=t[e],a=u.length,c=n.cycleBy(r,i,0,a-1);return o(t,e,c)},u=function(t,e,r,i){var u=n.cycleBy(r,i,0,t.length-1),a=t[u].length,c=n.cap(e,0,a-1);return o(t,u,c)},a=function(t,e,r,i){var u=t[e],a=u.length,c=n.cap(r+i,0,a-1);return o(t,e,c)},c=function(t,e,r,i){var u=n.cap(r+i,0,t.length-1),a=t[u].length,c=n.cap(e,0,a-1);return o(t,u,c)};return{cycleRight:function(n,t,e){return i(n,t,e,1)},cycleLeft:function(n,t,e){return i(n,t,e,-1)},cycleUp:function(n,t,e){return u(n,e,t,-1)},cycleDown:function(n,t,e){return u(n,e,t,1)},moveLeft:function(n,t,e){return a(n,t,e,-1)},moveRight:function(n,t,e){return a(n,t,e,1)},moveUp:function(n,t,e){return c(n,e,t,-1)},moveDown:function(n,t,e){return c(n,e,t,1)}}}),i("6y",["88","27","8o","8t","8u","8v","8q","8r","8y","28","x","6","y","8","5l","4t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g){var v=[s.strictObjOf("selectors",[s.strict("row"),s.strict("cell")]),s.defaulted("cycles",!0),s.defaulted("previousSelector",d.none),s.defaulted("execute",r.defaultExecute)],h=function(n,t){t.previousSelector()(n).orThunk(function(){var e=t.selectors();return g.descendant(n.element(),e.cell())}).each(function(t){n.getSystem().triggerFocus(t,n.element())})},y=function(n,t,e){return m.search(n.element()).bind(function(r){return e.execute()(n,t,r)})},b=function(n,t){return f.map(n,function(n){return p.descendants(n,t.selectors().cell())})},w=function(n,t){return function(e,r,o){var u=o.cycles()?n:t;return g.closest(r,o.selectors().row()).bind(function(n){var t=p.descendants(n,o.selectors().cell());return i.findIndex(t,r).bind(function(t){var r=p.descendants(e,o.selectors().row());return i.findIndex(r,n).bind(function(n){var e=b(r,o);return u(e,n,t).map(function(n){return n.cell()})})})})}},x=w(c.cycleLeft,c.moveLeft),O=w(c.cycleRight,c.moveRight),S=w(c.cycleUp,c.moveUp),T=w(c.cycleDown,c.moveDown),k=l.constant([a.rule(u.inSet(n.LEFT()),o.west(x,O)),a.rule(u.inSet(n.RIGHT()),o.east(x,O)),a.rule(u.inSet(n.UP()),o.north(S)),a.rule(u.inSet(n.DOWN()),o.south(T)),a.rule(u.inSet(n.SPACE().concat(n.ENTER())),y)]),C=l.constant({}),E=l.constant({});return e.typical(v,t.init,k,C,E,d.some(h))}),i("6z",["88","27","8o","8t","8u","8x","8q","8r","28","6","y","8","4t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=[c.strict("selector"),c.defaulted("execute",r.defaultExecute),c.defaulted("moveOnTab",!1)],p=function(n,t,e){return e.focusManager().get(n).bind(function(r){return e.execute()(n,t,r)})},g=function(n,t){d.descendant(n.element(),t.selector()).each(function(e){t.focusManager().set(n,e)})},v=function(n,t,e){return i.horizontal(n,e.selector(),t,-1)},h=function(n,t,e){return i.horizontal(n,e.selector(),t,1)},y=function(n,t,e){return e.moveOnTab()?o.move(v)(n,t,e):f.none()},b=function(n,t,e){return e.moveOnTab()?o.move(h)(n,t,e):f.none()},w=s.constant([a.rule(u.inSet(n.UP()),o.move(v)),a.rule(u.inSet(n.DOWN()),o.move(h)),a.rule(u.and([u.isShift,u.inSet(n.TAB())]),y),a.rule(u.and([u.isNotShift,u.inSet(n.TAB())]),b),a.rule(u.inSet(n.ENTER()),p),a.rule(u.inSet(n.SPACE()),p)]),x=s.constant({}),O=s.constant({});return e.typical(m,t.init,w,x,O,f.some(g))}),i("70",["88","27","4p","8o","8q","8r","28","6","y"],function(n,t,e,r,o,i,u,a,c){var s=[e.onKeyboardHandler("onSpace"),e.onKeyboardHandler("onEnter"),e.onKeyboardHandler("onShiftEnter"),e.onKeyboardHandler("onLeft"),e.onKeyboardHandler("onRight"),e.onKeyboardHandler("onTab"),e.onKeyboardHandler("onShiftTab"),e.onKeyboardHandler("onUp"),e.onKeyboardHandler("onDown"),e.onKeyboardHandler("onEscape"),u.option("focusIn")],f=function(t,e,r){return[i.rule(o.inSet(n.SPACE()),r.onSpace()),i.rule(o.and([o.isNotShift,o.inSet(n.ENTER())]),r.onEnter()),i.rule(o.and([o.isShift,o.inSet(n.ENTER())]),r.onShiftEnter()),i.rule(o.and([o.isShift,o.inSet(n.TAB())]),r.onShiftTab()),i.rule(o.and([o.isNotShift,o.inSet(n.TAB())]),r.onTab()),i.rule(o.inSet(n.UP()),r.onUp()),i.rule(o.inSet(n.DOWN()),r.onDown()),i.rule(o.inSet(n.LEFT()),r.onLeft()),i.rule(o.inSet(n.RIGHT()),r.onRight()),i.rule(o.inSet(n.SPACE()),r.onSpace()),i.rule(o.inSet(n.ESCAPE()),r.onEscape())]},l=function(n,t){return t.focusIn().bind(function(e){return e(n,t)})},d=a.constant({}),m=a.constant({});return r.typical(s,t.init,f,d,m,c.some(l))}),i("4x",["6u","6v","6w","6x","6y","6z","70"],function(n,t,e,r,o,i,u){return{cyclic:n.schema(),flow:r.schema(),flatgrid:e.schema(),matrix:o.schema(),execution:t.schema(),menu:i.schema(),special:u.schema()}}),i("32",["p","4x","4y","13","15"],function(n,t,e,r,o){return n.createModes({branchKey:"mode",branches:t,name:"keying",active:{events:function(n,t){return n.handler().toEvents(n,t)}},apis:{focusIn:function(n){n.getSystem().triggerFocus(n.element(),n.element())},setGridSize:function(n,t,e,i,u){r.hasKey(e,"setGridSize")?e.setGridSize(i,u):o.error("Layout does not support setGridSize")}},state:e})}),i("4z",["49","13","x","6","3e","t"],function(n,t,e,r,o,i){var u=o.generate("alloy-premade"),a=o.generate("api"),c=function(n){return t.wrap(u,n)},s=function(n){return t.readOptFrom(n,u)},f=function(t){return n.markAsSketchApi(function(n){var e=i.prototype.slice.call(arguments,0),r=n.config(a);return t.apply(void 0,[r].concat(e))},t)};return{apiConfig:r.constant(a),makeApi:f,premade:c,getPremade:s}}),i("52",["4b","28","2d","6k","6","3e","y"],function(n,t,e,r,o,i,u){var a=r.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),c=t.defaulted("factory",{sketch:o.identity}),s=t.defaulted("schema",[]),f=t.strict("name"),l=t.field("pname","pname",n.defaultedThunk(function(n){return"<alloy."+i.generate(n.name)+">"}),e.anyValue()),d=t.defaulted("defaults",o.constant({})),m=t.defaulted("overrides",o.constant({})),p=e.objOf([c,s,f,l,d,m]),g=e.objOf([c,s,f,d,m]),v=e.objOf([c,s,f,l,d,m]),h=e.objOf([c,s,f,t.strict("unit"),l,d,m]),y=function(n){return n.fold(u.some,u.none,u.some,u.some)},b=function(n){var t=function(n){return n.name()};return n.fold(t,t,t,t)},w=function(n){return n.fold(o.identity,o.identity,o.identity,o.identity)},x=function(n,t){return function(r){var o=e.asStructOrDie("Converting part type",t,r);return n(o)}};return{required:x(a.required,p),external:x(a.external,g),optional:x(a.optional,v),group:x(a.group,h),asNamedPart:y,name:b,asCommon:w,original:o.constant("entirety")}}),i("72",["13","x","w","v","6n","6","6k","u"],function(n,t,e,r,o,i,u,a){var c="placeholder",s=u.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),f=function(n){return t.contains([c],n)},l=function(t,r,u,c){return t.exists(function(n){return n!==u.owner})?s.single(!0,i.constant(u)):n.readOptFrom(c,u.name).fold(function(){throw new a("Unknown placeholder component: "+u.name+"\nKnown: ["+e.keys(c)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+o.stringify(u,null,2))},function(n){return n.replace()})},d=function(n,t,e,r){return e.uiType===c?l(n,t,e,r):s.single(!1,i.constant(e))},m=function(e,o,i,u){return d(e,o,i,u).fold(function(a,c){var s=c(o,i.config,i.validated),f=n.readOptFrom(s,"components").getOr([]),l=t.bind(f,function(n){return m(e,o,n,u)});return[r.deepMerge(s,{components:l})]},function(n,t){return t(o,i.config,i.validated)})},p=function(n,e,r,o){return t.bind(r,function(t){return m(n,e,t,o)})},g=function(n,t){var e=!1,r=function(){return e},o=function(){if(!0===e)throw new a("Trying to use the same placeholder more than once: "+n);return e=!0,t},u=function(){return t.fold(function(n){return n},function(n){return n})};return{name:i.constant(n),required:u,used:r,replace:o}},v=function(n,t,r,i){var u=e.map(i,function(n,t){return g(t,n)}),c=p(n,t,r,u);return e.each(u,function(e){if(!1===e.used()&&e.required())throw new a("Placeholder: "+e.name()+" was not found in components list\nNamespace: "+n.getOr("none")+"\nComponents: "+o.stringify(t.components(),null,2))}),c},h=function(n,t){return t.fold(function(t,e){return[e(n)]},function(t,e){return e(n)})};return{single:s.single,multiple:s.multiple,isSubstitute:f,placeholder:i.constant(c),substituteAll:p,substitutePlaces:v,singleReplace:h}}),i("71",["52","72","13","x","6","v"],function(n,t,e,r,o,i){var u=function(n,t,r,o){var u=r;return i.deepMerge(t.defaults()(n,r,o),r,{uid:n.partUids()[t.name()]},t.overrides()(n,r,o),{"debug.sketcher":e.wrap("part-"+t.name(),u)})};return{subs:function(e,a,c){var s={},f={};return r.each(c,function(e){e.fold(function(n){s[n.pname()]=t.single(!0,function(t,e,r){return n.factory().sketch(u(t,n,e,r))})},function(t){var e=a.parts()[t.name()]();f[t.name()]=o.constant(u(a,t,e[n.original()]()))},function(n){s[n.pname()]=t.single(!1,function(t,e,r){return n.factory().sketch(u(t,n,e,r))})},function(n){s[n.pname()]=t.multiple(!0,function(t){var e=t[n.name()]();return r.map(e,function(e){return n.factory().sketch(i.deepMerge(n.defaults()(t,e),e,n.overrides()(t,e)))})})})}),{internals:o.constant(s),externals:o.constant(f)}}}}),i("51",["4p","71","52","72","4b","28","13","2d","x","6","v","w","y"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(n,t){var r={};return c.each(t,function(t){e.asNamedPart(t).each(function(t){var e=p(n,t.pname());r[t.name()]=function(r){var o=a.asRawOrDie("Part: "+t.name()+" in "+n,a.objOf(t.schema()),r);return f.deepMerge(e,{config:r,validated:o})}})}),r},p=function(n,t){return{uiType:r.placeholder(),owner:n,name:t}},g=function(n,t,e){return{uiType:r.placeholder(),owner:n,name:t,config:e,validated:{}}},v=function(t){return c.bind(t,function(t){return t.fold(d.none,d.some,d.none,d.none).map(function(t){return i.strictObjOf(t.name(),t.schema().concat([n.snapshot(e.original())]))}).toArray()})},h=function(n){return c.map(n,e.name)},y=function(n,e,r){return t.subs(n,e,r)},b=function(n,t,e){return r.substitutePlaces(d.some(n),t,t.components(),e)},w=function(n,t,e){var r=t.partUids()[e];return n.getSystem().getByUid(r).toOption()},x=function(n,t,e){return w(n,t,e).getOrDie("Could not find part: "+e)},O=function(n,t,e){var r={},o=t.partUids(),i=n.getSystem();return c.each(e,function(n){r[n]=i.getByUid(o[n])}),l.map(r,s.constant)},S=function(n,t){var e=n.getSystem();return l.map(t.partUids(),function(n){return s.constant(e.getByUid(n))})},T=function(n,t,e){var r={},o=t.partUids(),i=n.getSystem();return c.each(e,function(n){r[n]=i.getByUid(o[n]).getOrDie()}),l.map(r,s.constant)},k=function(n,t){var e=h(t);return u.wrapAll(c.map(e,function(t){return{key:t,value:n+"-"+t}}))};return{generate:m,generateOne:g,schemas:v,names:h,substitutes:y,components:b,defaultUids:k,defaultUidsSchema:function(n){return i.field("partUids","partUids",o.mergeWithThunk(function(t){return k(t.uid,n)}),a.anyValue())},getAllParts:S,getPart:w,getPartOrDie:x,getParts:O,getPartsOrDie:T}}),i("73",["4p","72","28","13","2d","x","6","v","w","6n","u"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(o,u,a){var l=void 0!==a?a:"Unknown owner",d=function(){return[n.output("partUids",{})]},m=void 0!==u?u:d();return 0===o.length&&0===m.length?d():[e.strictObjOf("parts",i.flatten([i.map(o,e.strict),i.map(m,function(n){return e.defaulted(n,t.single(!1,function(){throw new f("The optional part: "+n+" was not specified in the config, but it was used in components")}))})])),e.state("partUids",function(n){if(!r.hasKey(n,"parts"))throw new f("Part uid definition for owner: "+l+' requires "parts"\nExpected parts: '+o.join(", ")+"\nSpec: "+s.stringify(n,null,2));return c.map(n.parts,function(t,e){return r.readOptFrom(t,"uid").getOrThunk(function(){return n.uid+"-"+e})})})]},d=function(t,r,o){return(r.length>0?[e.strictObjOf("parts",r)]:[]).concat([e.strict("uid"),e.defaulted("dom",{}),e.defaulted("components",[]),n.snapshot("originalSpec"),e.defaulted("debug.sketcher",{})]).concat(o)},m=function(n,t,e,r){var i=d(n,r,e);return o.asRawOrDie(n+" [SpecSchema]",o.objOfOnly(i.concat(t)),e)},p=function(n,t,e,r,i){var u=d(n,r,i,e);return o.asStructOrDie(n+" [SpecSchema]",o.objOfOnly(u.concat(t)),e)},g=function(n,t,e){return n(a.deepMerge(t,e))};return{asRawOrDie:m,asStructOrDie:p,addBehaviours:function(n,t){return a.deepMerge(n,t)},getPartsSchema:l,extend:g}}),i("50",["51","2z","73","13","v"],function(n,t,e,r,o){var i=function(n,t,i,u){var c=a(u),s=e.asStructOrDie(n,t,c,[],[]);return o.deepMerge(i(s,c),{"debug.sketcher":r.wrap(n,u)})},u=function(t,i,u,c,s){var f=a(s),l=n.schemas(u),d=n.defaultUidsSchema(u),m=e.asStructOrDie(t,i,f,l,[d]),p=n.substitutes(t,m,u),g=n.components(t,m,p.internals());return o.deepMerge(c(m,g,f,p.externals()),{"debug.sketcher":r.wrap(t,s)})},a=function(n){return o.deepMerge({uid:t.generate("uid")},n)};return{supplyUid:a,single:i,composite:u}}),i("33",["4z","50","49","51","52","28","2d","6","v","w"],function(n,t,e,r,o,i,u,a,c,s){var f=u.objOfOnly([i.strict("name"),i.strict("factory"),i.strict("configFields"),i.defaulted("apis",{}),i.defaulted("extraApis",{})]),l=u.objOfOnly([i.strict("name"),i.strict("factory"),i.strict("configFields"),i.strict("partFields"),i.defaulted("apis",{}),i.defaulted("extraApis",{})]);return{single:function(r){var o=u.asRawOrDie("Sketcher for "+r.name,f,r),i=function(n){return t.single(o.name,o.configFields,o.factory,n)},l=s.map(o.apis,n.makeApi),d=s.map(o.extraApis,function(n,t){return e.markAsExtraApi(n,t)});return c.deepMerge({name:a.constant(o.name),partFields:a.constant([]),configFields:a.constant(o.configFields),sketch:i},l,d)},composite:function(o){var i=u.asRawOrDie("Sketcher for "+o.name,l,o),f=function(n){return t.composite(i.name,i.configFields,i.partFields,i.factory,n)},d=r.generate(i.name,i.partFields),m=s.map(i.apis,n.makeApi),p=s.map(i.extraApis,function(n,t){return e.markAsExtraApi(n,t)});return c.deepMerge({name:a.constant(i.name),partFields:a.constant(i.partFields),configFields:a.constant(i.configFields),sketch:f,parts:a.constant(d)},m,p)}}}),i("34",["3c","2","2f","s","x","7"],function(n,t,e,r,o,i){return{events:function(u){var a=function(t){return n.run(r.execute(),function(n,e){t(n),e.stop()})},c=function(n,e){e.stop(),t.emitExecute(n)},s=function(n,t){t.cut()},f=i.detect().deviceType.isTouch()?[n.run(r.tap(),c)]:[n.run(e.click(),c),n.run(e.mousedown(),s)];return n.derive(o.flatten([u.map(a).toArray(),f]))}}}),i("1m",["p","31","32","33","34","28","v"],function(n,t,e,r,o,i,u){var a=function(r){var i=o.events(r.action());return{uid:r.uid(),dom:r.dom(),components:r.components(),events:i,behaviours:u.deepMerge(n.derive([t.config({}),e.config({mode:"execution",useSpace:!0,useEnter:!0})]),r.buttonBehaviours()),domModification:{attributes:{type:"button",role:r.role().getOr("button")}},eventOrder:r.eventOrder()}};return r.single({name:"Button",factory:a,configFields:[i.defaulted("uid",void 0),i.strict("dom"),i.defaulted("components",[]),i.defaulted("buttonBehaviours",{}),i.option("action"),i.option("role"),i.defaulted("eventOrder",{})]})}),i("35",["13","x","v","a","b","4m","z","t"],function(n,t,e,r,o,i,u,a){var c=function(r){var o=void 0!==r.dom().attributes?r.dom().attributes:[];return t.foldl(o,function(t,r){return"class"===r.name?t:e.deepMerge(t,n.wrap(r.name,r.value))},{})},s=function(n){return a.prototype.slice.call(n.dom().classList,0)},f=function(n){var t=r.fromHtml(n),a=u.children(t),f=c(t),l=s(t),d=0===a.length?{}:{innerHtml:i.get(t)};return e.deepMerge({tag:o.name(t),classes:l,attributes:f},d)};return{fromHtml:f,sketch:function(n,t,r){return n.sketch(e.deepMerge({dom:f(t)},r))}}}),i("1n",["35","36","h"],function(n,t,e){var r=function(r){var o=t.supplant(r,{prefix:e.prefix()});return n.fromHtml(o)};return{dom:r,spec:function(n){return{dom:r(n)}}}}),i("k",["p","1f","1l","1m","v","1k","h","1n"],function(n,t,e,r,o,i,u,a){var c=function(n,t){return d(t,function(){n.execCommand(t)},{})},s=function(e){return n.derive([t.config({toggleClass:u.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),i.format(e,function(n,e){(e?t.on:t.off)(n)})])},f=function(n,t){var e=s(t);return d(t,function(){n.execCommand(t)},e)},l=function(n,t,e,r){var o=s(e);return d(t,r,o)},d=function(t,i,u){return r.sketch({dom:a.dom('<span class="${prefix}-toolbar-button ${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:i,buttonBehaviours:o.deepMerge(n.derive([e.config({})]),u)})};return{forToolbar:d,forToolbarCommand:c,forToolbarStateAction:l,forToolbarStateCommand:f}}),i("8z",["1v"],function(n){var t=function(t,e,r,o){return t<e?t:t>r?r:t===e?e-1:n.max(e,t-o)},e=function(t,e,r,o){return t>r?t:t<e?e:t===r?r+1:n.min(r,t+o)},r=function(t,e,r){return n.max(e,n.min(r,t))},o=function(t,e,o,i,u,a){return a.fold(function(){var t=e-o,a=n.round(t/u)*u;return r(o+a,o-1,i+1)},function(t){var r=(e-t)%u,o=n.round(r/u),a=n.floor((e-t)/u),c=n.floor((i-t)/u),s=n.min(c,a+o),f=t+s*u;return n.max(t,f)})};return{reduceBy:t,increaseBy:e,findValueOfX:function(t,e,i,u,a,c,s){var f=i-e;if(u<t.left)return e-1;if(u>t.right)return i+1;var l=n.min(t.right,n.max(u,t.left))-t.left,d=r(l/t.width*f+e,e-1,i+1),m=n.round(d);return c&&d>=e&&d<=i?o(t,d,e,i,a,s):m}}}),i("74",["2","8z","6","y","7","1v"],function(n,t,e,r,o){var i="slider.change.value",u=o.detect().deviceType.isTouch(),a=function(n){var t=n.event().raw();return u&&void 0!==t.touches&&1===t.touches.length?r.some(t.touches[0]):u&&void 0!==t.touches?r.none():u||void 0===t.clientX?r.none():r.some(t)},c=function(n){return a(n).map(function(n){return n.clientX})},s=function(t,e){n.emitWith(t,i,{value:e})},f=function(n,t){s(n,t.min(),r.none())},l=function(n,t){s(n,t.max(),r.none())},d=function(n,t){s(n,t.max()+1,r.none())},m=function(n,t){s(n,t.min()-1,r.none())},p=function(n,e,r,o){var i=t.findValueOfX(e,r.min(),r.max(),o,r.stepSize(),r.snapToGrid(),r.snapStart());s(n,i)};return{setXFromEvent:function(n,t,e,r){return c(r).map(function(r){return p(n,e,t,r),r})},setToLedge:m,setToRedge:d,moveLeftFromRedge:l,moveRightFromLedge:f,moveLeft:function(n,e){var o=t.reduceBy(e.value().get(),e.min(),e.max(),e.stepSize());s(n,o,r.none())},moveRight:function(n,e){var o=t.increaseBy(e.value().get(),e.min(),e.max(),e.stepSize());s(n,o,r.none())},changeEvent:e.constant(i)}}),i("53",["p","31","32","3c","2f","52","74","28","5","6","y","7"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=l.detect(),m=d.deviceType.isTouch(),p=function(n,t){return i.optional({name:n+"-edge",overrides:function(n){var e=r.derive([r.runActionExtra(o.touchstart(),t,[n])]),i=r.derive([r.runActionExtra(o.mousedown(),t,[n]),r.runActionExtra(o.mousemove(),function(n,e){e.mouseIsDown().get()&&t(n,e)},[n])]);return{events:m?e:i}}})};return[p("left",u.setToLedge),p("right",u.setToRedge),i.required({name:"thumb",defaults:s.constant({dom:{styles:{position:"absolute"}}}),overrides:function(n){return{events:r.derive([r.redirectToPart(o.touchstart(),n,"spectrum"),r.redirectToPart(o.touchmove(),n,"spectrum"),r.redirectToPart(o.touchend(),n,"spectrum")])}}}),i.required({schema:[a.state("mouseIsDown",function(){return c(!1)})],name:"spectrum",overrides:function(i){var a=function(n,t){var e=n.element().dom().getBoundingClientRect();u.setXFromEvent(n,i,e,t)},c=r.derive([r.run(o.touchstart(),a),r.run(o.touchmove(),a)]),s=r.derive([r.run(o.mousedown(),a),r.run(o.mousemove(),function(n,t){i.mouseIsDown().get()&&a(n,t)})]);return{behaviours:n.derive(m?[]:[e.config({mode:"special",onLeft:function(n){return u.moveLeft(n,i),f.some(!0)},onRight:function(n){return u.moveRight(n,i),f.some(!0)}}),t.config({})]),events:m?c:s}}})]}),i("54",["28","5","6","7"],function(n,t,e,r){var o=r.detect().deviceType.isTouch();return[n.strict("min"),n.strict("max"),n.defaulted("stepSize",1),n.defaulted("onChange",e.noop),n.defaulted("onInit",e.noop),n.defaulted("onDragStart",e.noop),n.defaulted("onDragEnd",e.noop),n.defaulted("snapToGrid",!1),n.option("snapStart"),n.strict("getInitialValue"),n.defaulted("sliderBehaviours",{}),n.state("value",function(n){return t(n.min)})].concat(o?[]:[n.state("mouseIsDown",function(){
return t(!1)})])}),i("5b",[],function(){return{onLoad:function(n,t,e){t.store().manager().onLoad(n,t,e)},onUnload:function(n,t,e){t.store().manager().onUnload(n,t,e)},setValue:function(n,t,e,r){t.store().manager().setValue(n,t,e,r)},getValue:function(n,t,e){return t.store().manager().getValue(n,t,e)}}}),i("5a",["3c","26","5b"],function(n,t,e){return{events:function(r,o){var i=r.resetOnDom()?[n.runOnAttached(function(n){e.onLoad(n,r,o)}),n.runOnDetached(function(n){e.onUnload(n,r,o)})]:[t.loadEvent(r,o,e.onLoad)];return n.derive(i)}}}),i("5d",["4f","5"],function(n,t){var e=function(){var e=t(null),r=function(){return{mode:"memory",value:e.get()}},o=function(){return null===e.get()},i=function(){e.set(null)};return n({set:e.set,get:e.get,isNotSet:o,clear:i,readState:r})},r=function(){return n({readState:function(){}})};return{memory:e,dataset:function(){var e=t({});return n({readState:function(){return{mode:"dataset",dataset:e.get()}},set:e.set,get:e.get})},manual:r,init:function(n){return n.store().manager().state(n)}}}),i("75",["5d","4p","28","13","6"],function(n,t,e,r){var o=function(n,t,e,r){t.store().getDataKey(),e.set({}),t.store().setData()(n,r),t.onSetValue()(n,r)},i=function(n,t,e){var o=t.store().getDataKey()(n),i=e.get();return r.readOptFrom(i,o).fold(function(){return t.store().getFallbackEntry()(o)},function(n){return n})},u=function(n,t,e){t.store().initialValue().each(function(r){o(n,t,e,r)})},a=function(n,t,e){e.set({})};return[e.option("initialValue"),e.strict("getFallbackEntry"),e.strict("getDataKey"),e.strict("setData"),t.output("manager",{setValue:o,getValue:i,onLoad:u,onUnload:a,state:n.dataset})]}),i("76",["27","4p","28","6"],function(n,t,e,r){var o=function(n,t){return t.store().getValue()(n)},i=function(n,t,e,r){t.store().setValue()(n,r),t.onSetValue()(n,r)},u=function(n,t){t.store().initialValue().each(function(e){t.store().setValue()(n,e)})};return[e.strict("getValue"),e.defaulted("setValue",r.noop),e.option("initialValue"),t.output("manager",{setValue:i,getValue:o,onLoad:u,onUnload:r.noop,state:n.init})]}),i("77",["5d","4p","28"],function(n,t,e){var r=function(n,t,e,r){e.set(r),t.onSetValue()(n,r)},o=function(n,t,e){return e.get()},i=function(n,t,e){t.store().initialValue().each(function(n){e.isNotSet()&&e.set(n)})},u=function(n,t,e){e.clear()};return[e.option("initialValue"),t.output("manager",{setValue:r,getValue:o,onLoad:i,onUnload:u,state:n.memory})]}),i("5c",["75","76","77","4p","28","2d"],function(n,t,e,r,o,i){return[o.defaultedOf("store",{mode:"memory"},i.choose("mode",{memory:e,manual:t,dataset:n})),r.onHandler("onSetValue"),o.defaulted("resetOnDom",!1)]}),i("3f",["p","5a","5b","5c","5d"],function(n,t,e,r,o){var i=n.create({fields:r,name:"representing",active:t,apis:e,extra:{setValueFrom:function(n,t){var e=i.getValue(t);i.setValue(n,e)}},state:o});return i}),i("5m",["38","78"],function(n,t){var e=t("width",function(n){return n.dom().offsetWidth});return{set:function(n,t){e.set(n,t)},get:function(n){return e.get(n)},getOuter:function(n){return e.getOuter(n)},setMax:function(t,r){var o=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=e.max(t,r,o);n.set(t,"max-width",i+"px")}}}),i("55",["p","32","3f","3c","2f","51","74","x","6","v","y","7","38","5m"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m){var p=l.detect().deviceType.isTouch();return{sketch:function(l,g){var v=l.max()-l.min(),h=function(n){var t=n.element().dom().getBoundingClientRect();return(t.left+t.right)/2},y=function(n){return i.getPartOrDie(n,l,"thumb")},b=function(n,t,e){var r=e.value().get();return r<e.min()?i.getPart(n,e,"left-edge").fold(function(){return 0},function(n){return h(n)-t.left}):r>e.max()?i.getPart(n,e,"right-edge").fold(function(){return t.width},function(n){return h(n)-t.left}):(e.value().get()-e.min())/v*t.width},w=function(n){var t=i.getPartOrDie(n,l,"spectrum"),e=t.element().dom().getBoundingClientRect(),r=n.element().dom().getBoundingClientRect(),o=b(n,e,l);return e.left-r.left+o},x=function(n){var t=w(n),e=y(n),r=m.get(e.element())/2;d.set(e.element(),"left",t-r+"px")},O=function(n,t){var e=l.value().get(),r=y(n);return e!==t||d.getRaw(r.element(),"left").isNone()?(l.value().set(t),x(n),l.onChange()(n,r,t),f.some(!0)):f.none()},S=function(n){O(n,l.min(),f.none())},T=function(n){O(n,l.max(),f.none())},k=p?[r.run(o.touchstart(),function(n){l.onDragStart()(n,y(n))}),r.run(o.touchend(),function(n){l.onDragEnd()(n,y(n))})]:[r.run(o.mousedown(),function(n,t){t.stop(),l.onDragStart()(n,y(n)),l.mouseIsDown().set(!0)}),r.run(o.mouseup(),function(n){l.onDragEnd()(n,y(n)),l.mouseIsDown().set(!1)})];return{uid:l.uid(),dom:l.dom(),components:g,behaviours:s.deepMerge(n.derive(a.flatten([p?[]:[t.config({mode:"special",focusIn:function(n){return i.getPart(n,l,"spectrum").map(t.focusIn).map(c.constant(!0))}})],[e.config({store:{mode:"manual",getValue:function(){return l.value().get()}}})]])),l.sliderBehaviours()),events:r.derive([r.run(u.changeEvent(),function(n,t){O(n,t.event().value())}),r.runOnAttached(function(n){l.value().set(l.getInitialValue()());var t=y(n);x(n),l.onInit()(n,t,l.value().get())})].concat(k)),apis:{resetToMin:S,resetToMax:T,refresh:x},domModification:{styles:{position:"relative"}}}}}}),i("37",["33","53","54","55","1v"],function(n,t,e,r){return n.composite({name:"Slider",configFields:e,partFields:t,factory:r.sketch,apis:{resetToMin:function(n,t){n.resetToMin(t)},resetToMax:function(n,t){n.resetToMax(t)},refresh:function(n,t){n.refresh(t)}}})}),i("39",["k"],function(n){return{button:function(t,e,r){return n.forToolbar(e,function(){var n=r();t.setContextToolbar([{label:e+" group",items:n}])},{})}}}),i("1o",["p","1e","1f","37","38","1k","h","39","1n"],function(n,t,e,r,o,i,u,a,c){var s=function(t){var a=function(n){return n<0?"black":n>360?"white":"hsl("+n+", 100%, 50%)"},s=function(n,t,e){var r=a(e);o.set(t.element(),"background-color",r)},f=function(n,e,r){var i=a(r);o.set(e.element(),"background-color",i),t.onChange(n,e,i)};return r.sketch({dom:c.dom('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[r.parts()["left-edge"](c.spec('<div class="${prefix}-hue-slider-black"></div>')),r.parts().spectrum({dom:c.dom('<div class="${prefix}-slider-gradient-container"></div>'),components:[c.spec('<div class="${prefix}-slider-gradient"></div>')],behaviours:n.derive([e.config({toggleClass:u.resolve("thumb-active")})])}),r.parts()["right-edge"](c.spec('<div class="${prefix}-hue-slider-white"></div>')),r.parts().thumb({dom:c.dom('<div class="${prefix}-slider-thumb"></div>'),behaviours:n.derive([e.config({toggleClass:u.resolve("thumb-active")})])})],onChange:f,onDragStart:function(n,t){e.on(t)},onDragEnd:function(n,t){e.off(t)},onInit:s,stepSize:10,min:0,max:360,getInitialValue:t.getInitialValue,sliderBehaviours:n.derive([i.orientation(r.refresh)])})},f=function(n){return[s(n)]};return{makeItems:f,sketch:function(n,t){var e={onChange:function(n,e,r){t.undoManager.transact(function(){t.formatter.apply("forecolor",{value:r}),t.nodeChanged()})},getInitialValue:function(){return-1}};return a.button(n,"color",function(){return f(e)})}}}),i("3a",["p","1e","1f","37","28","2d","1k","h","1n"],function(n,t,e,r,o,i,u,a,c){var s=i.objOfOnly([o.strict("getInitialValue"),o.strict("onChange"),o.strict("category"),o.strict("sizes")]);return{sketch:function(t){var o=i.asRawOrDie("SizeSlider",s,t),f=function(n){return n>=0&&n<o.sizes.length},l=function(n,t,e){f(e)&&o.onChange(e)};return r.sketch({dom:{tag:"div",classes:[a.resolve("slider-"+o.category+"-size-container"),a.resolve("slider"),a.resolve("slider-size-container")]},onChange:l,onDragStart:function(n,t){e.on(t)},onDragEnd:function(n,t){e.off(t)},min:0,max:o.sizes.length-1,stepSize:1,getInitialValue:o.getInitialValue,snapToGrid:!0,sliderBehaviours:n.derive([u.orientation(r.refresh)]),components:[r.parts().spectrum({dom:c.dom('<div class="${prefix}-slider-size-container"></div>'),components:[c.spec('<div class="${prefix}-slider-size-line"></div>')]}),r.parts().thumb({dom:c.dom('<div class="${prefix}-slider-thumb"></div>'),behaviours:n.derive([e.config({toggleClass:a.resolve("thumb-active")})])})]})}}}),i("57",["1h","6","y","a"],function(n,t,e,r){var o=function(o,i,u){for(var a=o.dom(),c=n.isFunction(u)?u:t.constant(!1);a.parentNode;){a=a.parentNode;var s=r.fromDom(a),f=i(s);if(f.isSome())return f;if(c(s))break}return e.none()};return{ancestor:o,closest:function(n,t,r){return t(n).orThunk(function(){return r(n)?e.none():o(n,t,r)})}}}),i("3b",["x","6","y","19","a","b","38","57","z"],function(n,t,e,r,o,i,u,a,c){var s=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],f="medium",l=2,d=function(n){return e.from(s[n])},m=function(t){return n.findIndex(s,function(n){return n===t})},p=function(n,t){return(i.isElement(t)?e.some(t):c.parent(t)).map(function(t){return a.closest(t,function(n){return u.getRaw(n,"font-size")},n).getOrThunk(function(){return u.get(t,"font-size")})}).getOr("")},g=function(t){var e=t.selection.getStart(),i=o.fromDom(e),u=o.fromDom(t.getBody()),a=function(n){return r.eq(u,n)},c=p(a,i);return n.find(s,function(n){return c===n}).getOr(f)},v=function(n,t){g(n)!==t&&n.execCommand("fontSize",!1,t)},h=function(n){var t=g(n);return m(t).getOr(l)},y=function(n,t){d(t).each(function(t){v(n,t)})};return{candidates:t.constant(s),get:h,apply:y}}),i("1p",["3a","39","3b","1n"],function(n,t,e,r){var o=e.candidates(),i=function(t){return n.sketch({onChange:t.onChange,sizes:o,category:"font",getInitialValue:t.getInitialValue})},u=function(n){return[r.spec('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),i(n),r.spec('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')]};return{makeItems:u,sketch:function(n,r){var o={onChange:function(n){e.apply(r,n)},getInitialValue:function(){return e.get(r)}};return t.button(n,"font-size",function(){return u(o)})}}}),i("79",[],function(){function n(n,t){return function(){n.apply(t,arguments)}}function t(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(t,n(r,this),n(o,this))}function e(n){var t=this;return null===this._state?void this._deferreds.push(n):void c(function(){var e=t._state?n.onFulfilled:n.onRejected;if(null===e)return void(t._state?n.resolve:n.reject)(t._value);var r;try{r=e(t._value)}catch(t){return void n.reject(t)}n.resolve(r)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void a(n(e,t),n(r,this),n(o,this))}this._state=!0,this._value=t,i.call(this)}catch(n){o.call(this,n)}}function o(n){this._state=!1,this._value=n,i.call(this)}function i(){for(var n=0,t=this._deferreds.length;n<t;n++)e.call(this,this._deferreds[n]);this._deferreds=null}function u(n,t,e,r){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.resolve=e,this.reject=r}function a(n,t,e){var r=!1;try{n(function(n){r||(r=!0,t(n))},function(n){r||(r=!0,e(n))})}catch(n){if(r)return;r=!0,e(n)}}if(window.Promise)return window.Promise;var c=t.immediateFn||"function"==typeof setImmediate&&setImmediate||function(n){setTimeout(n,1)},s=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)};return t.prototype["catch"]=function(n){return this.then(null,n)},t.prototype.then=function(n,r){var o=this;return new t(function(t,i){e.call(o,new u(n,r,t,i))})},t.all=function(){var n=Array.prototype.slice.call(1===arguments.length&&s(arguments[0])?arguments[0]:arguments);return new t(function(t,e){function r(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,function(n){r(i,n)},e)}n[i]=u,0==--o&&t(n)}catch(n){e(n)}}if(0===n.length)return t([]);for(var o=n.length,i=0;i<n.length;i++)r(i,n[i])})},t.resolve=function(n){return n&&"object"==typeof n&&n.constructor===t?n:new t(function(t){t(n)})},t.reject=function(n){return new t(function(t,e){e(n)})},t.race=function(n){return new t(function(t,e){for(var r=0,o=n.length;r<o;r++)n[r].then(t,e)})},t});i("7a",[],function(){function n(n,t){return o(document.createElement("canvas"),n,t)}function t(t){var r,o;return r=n(t.width,t.height),o=e(r),o.drawImage(t,0,0),r}function e(n){return n.getContext("2d")}function r(n){var t=null;try{t=n.getContext("webgl")||n.getContext("experimental-webgl")}catch(n){}return t||(t=null),t}function o(n,t,e){return n.width=t,n.height=e,n}return{create:n,clone:t,resize:o,get2dContext:e,get3dContext:r}}),i("7b",[],function(){function n(n){var t=document.createElement("a");return t.href=n,t.pathname}function t(t){var e,r,o,i;return 0===t.indexOf("data:")?(t=t.split(","),i=/data:([^;]+)/.exec(t[0]),i?i[1]:""):(o={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"},e=n(t).split("."),r=e[e.length-1],r&&(r=r.toLowerCase()),o[r])}return{guessMimeType:t}}),i("7c",[],function(){function n(n){return n.naturalWidth||n.width}function t(n){return n.naturalHeight||n.height}return{getWidth:n,getHeight:t}}),i("58",["79","7a","7b","7c"],function(n,t,e,r){function o(t){return new n(function(n){function e(){t.removeEventListener("load",e),n(t)}t.complete?n(t):t.addEventListener("load",e)})}function i(n){return o(n).then(function(n){var e,o;return o=t.create(r.getWidth(n),r.getHeight(n)),e=t.get2dContext(o),e.drawImage(n,0,0),o})}function u(n){return o(n).then(function(n){var t=n.src;return 0===t.indexOf("blob:")?c(t):0===t.indexOf("data:")?f(t):i(n).then(function(n){return f(n.toDataURL(e.guessMimeType(t)))})})}function a(t){return new n(function(n){function e(){r.removeEventListener("load",e),n(r)}var r=new Image;r.addEventListener("load",e),r.src=URL.createObjectURL(t),r.complete&&e()})}function c(t){return new n(function(n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onload=function(){200==this.status&&n(this.response)},e.send()})}function s(n){var t,e,r,o,i,u;if(n=n.split(","),o=/data:([^;]+)/.exec(n[0]),o&&(i=o[1]),t=atob(n[1]),window.WebKitBlobBuilder){for(u=new WebKitBlobBuilder,e=new ArrayBuffer(t.length),r=0;r<e.length;r++)e[r]=t.charCodeAt(r);return u.append(e),u.getBlob(i)}for(e=new Uint8Array(t.length),r=0;r<e.length;r++)e[r]=t.charCodeAt(r);return new Blob([e],{type:i})}function f(t){return new n(function(n){n(s(t))})}function l(n){return 0===n.indexOf("blob:")?c(n):0===n.indexOf("data:")?f(n):null}function d(t,e,r){return e=e||"image/png",HTMLCanvasElement.prototype.toBlob?new n(function(n){t.toBlob(function(t){n(t)},e,r)}):f(t.toDataURL(e,r))}function m(t){return new n(function(n){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(t)})}function p(n){return m(n).then(function(n){return n.split(",")[1]})}function g(n){URL.revokeObjectURL(n.src)}return{blobToImage:a,imageToBlob:u,blobToDataUri:m,blobToBase64:p,imageToCanvas:i,canvasToBlob:d,revokeImageUrl:g,uriToBlob:l,dataUriToBlobSync:s}}),i("59",["79","58","7b","7a"],function(n,t,e,r){function o(n,e){function o(){return e}function i(r,o){return t.canvasToBlob(n,r||e,o)}function u(t,r){return n.toDataURL(t||e,r)}function a(n,t){return u(n,t).split(",")[1]}function c(){return r.clone(n)}return{getType:o,toBlob:i,toDataURL:u,toBase64:a,toCanvas:c}}function i(n){return t.blobToImage(n).then(function(n){var e=t.imageToCanvas(n);return t.revokeImageUrl(n),e}).then(function(t){return o(t,n.type)})}function u(t,e){return new n(function(n){n(o(t,e))})}function a(n){var r=e.guessMimeType(n.src);return t.imageToCanvas(n).then(function(n){return o(n,r)})}return{fromBlob:i,fromCanvas:u,fromImage:a}}),i("3d",["58","59"],function(n,t){return{blobToImage:function(t){return n.blobToImage(t)},imageToBlob:function(t){return n.imageToBlob(t)},blobToDataUri:function(t){return n.blobToDataUri(t)},blobToBase64:function(t){return n.blobToBase64(t)},blobToImageResult:function(n){return t.fromBlob(n)},dataUriToImageResult:function(e){return n.uriToBlob(e).then(t.fromBlob)},imageToImageResult:function(n){return t.fromImage(n)},imageResultToBlob:function(n,t,e){return n.toBlob(t,e)},imageResultToBlobSync:function(t,e,r){return n.dataUriToBlobSync(t.toDataURL(e,r))}}}),i("1q",["1g","3c","2f","1m","3d","3e","y","1n"],function(n,t,e,r,o,i,u,a){var c=function(n,t){o.blobToBase64(t).then(function(e){n.undoManager.transact(function(){var r=n.editorUpload.blobCache,o=r.create(i.generate("mceu"),t,e);r.add(o);var u=n.dom.createHTML("img",{src:o.blobUri()});n.insertContent(u)})})},s=function(n){var t=n.event(),e=t.raw().target.files||t.raw().dataTransfer.files;return u.from(e[0])};return{sketch:function(o){var i={tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},u=n.record({dom:i,events:t.derive([t.cutter(e.click()),t.run(e.change(),function(n,t){s(t).each(function(n){c(o,n)})})])});return r.sketch({dom:a.dom('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[u.asSpec()],action:function(n){u.get(n).element().dom().click()}})}}}),i("5e",[],function(){return{get:function(n){return n.dom().textContent},set:function(n,t){n.dom().textContent=t}}}),i("3g",["6","y","a","4h","5e","4t"],function(n,t,e,r,o,i){var u=function(n){return n.length>0},a=function(n){return void 0===n||null===n?"":n},c=function(n){return{url:"",text:n.selection.getContent({format:"text"}),title:"",target:"",link:t.none()}},s=function(n){var e=o.get(n),i=r.get(n,"href"),u=r.get(n,"title"),c=r.get(n,"target");return{url:a(i),text:e!==i?a(e):"",title:a(u),target:a(c),link:t.some(n)}},f=function(n){return v(n).fold(function(){return c(n)},function(n){return s(n)})},l=function(n){return r.get(n,"href")===o.get(n)},d=function(n,e,r){return r.text.filter(u).fold(function(){return l(n)?t.some(e):t.none()},t.some)},m=function(t,e){e.link.bind(n.identity).each(function(){t.execCommand("unlink")})},p=function(n,t){var e={};return e.href=n,t.title.filter(u).each(function(n){e.title=n}),t.target.filter(u).each(function(n){e.target=n}),e},g=function(t,e){e.url.filter(u).fold(function(){m(t,e)},function(i){var a=p(i,e);e.link.bind(n.identity).fold(function(){var n=e.text.filter(u).getOr(i);t.insertContent(t.dom.createHTML("a",a,t.dom.encode(n)))},function(n){var t=d(n,i,e);r.setAll(n,a),t.each(function(t){o.set(n,t)})})})},v=function(n){var t=e.fromDom(n.selection.getStart());return i.closest(t,"a")};return{getInfo:f,applyInfo:g,query:v}}),i("3t",["p","3c","28","6"],function(n,t,e,r){var o=function(o,i){var u=t.derive(i);return n.create({fields:[e.strict("enabled")],name:o,active:{events:r.constant(u)}})};return{events:o,config:function(t,e){return{key:t,value:{config:{},me:o(t,e),configAsRaw:r.constant({}),initialConfig:{},state:n.noState()}}}}}),i("7d",[],function(){return{getCurrent:function(n,t){return t.find()(n)}}}),i("7e",["28"],function(n){return[n.strict("find")]}),i("5f",["p","7d","7e"],function(n,t,e){return n.create({fields:e,name:"composing",apis:t})}),i("3u",["33","28","v"],function(n,t,e){var r=function(n){return{uid:n.uid(),dom:e.deepMerge({tag:"div",attributes:{role:"presentation"}},n.dom()),components:n.components(),behaviours:n.containerBehaviours(),events:n.events(),domModification:n.domModification(),eventOrder:n.eventOrder()}};return n.single({name:"Container",factory:r,configFields:[t.defaulted("components",[]),t.defaulted("containerBehaviours",{}),t.defaulted("events",{}),t.defaulted("domModification",{}),t.defaulted("eventOrder",{})]})}),i("5g",["p","5f","3f","3c","33","28","y"],function(n,t,e,r,o,i,u){var a=function(o){return{uid:o.uid(),dom:o.dom(),behaviours:n.derive([e.config({store:{mode:"memory",initialValue:o.getInitialValue()()}}),t.config({find:u.some})]),events:r.derive([r.runOnAttached(function(n){e.setValue(n,o.getInitialValue()())})])}};return o.single({name:"DataField",factory:a,configFields:[i.strict("uid"),i.strict("dom"),i.strict("getInitialValue")]})}),i("84",["4a","13"],function(n,t){return{exhibit:function(e,r){return n.nu({attributes:t.wrapAll([{key:r.tabAttr(),value:"true"}])})}}}),i("85",["28"],function(n){return[n.defaulted("tabAttr","data-alloy-tabstop")]}),i("64",["p","84","85"],function(n,t,e){return n.create({fields:e,name:"tabstopping",active:t})}),i("90",["u"],function(n){var t=function(n){return n.dom().value};return{set:function(t,e){if(void 0===e)throw new n("Value.set was undefined");t.dom().value=e},get:t}}),i("7f",["p","31","3f","64","4p","28","13","6","v","90"],function(n,t,e,r,o,i,u,a,c,s){var f=[i.option("data"),i.defaulted("inputAttributes",{}),i.defaulted("inputStyles",{}),i.defaulted("type","input"),i.defaulted("tag","input"),o.onHandler("onSetValue"),i.defaulted("styles",{}),i.option("placeholder"),i.defaulted("eventOrder",{}),i.defaulted("hasTabstop",!0),i.defaulted("inputBehaviours",{}),i.defaulted("selectOnFocus",!0)],l=function(o){return c.deepMerge(n.derive([e.config({store:{mode:"manual",initialValue:o.data().getOr(void 0),getValue:function(n){return s.get(n.element())},setValue:function(n,t){s.get(n.element())!==t&&s.set(n.element(),t)}},onSetValue:o.onSetValue()}),t.config({onFocus:!1===o.selectOnFocus()?a.noop:function(n){var t=n.element(),e=s.get(t);t.dom().setSelectionRange(0,e.length)}}),o.hasTabstop()?r.config({}):r.revoke()]),o.inputBehaviours())},d=function(n){return{tag:n.tag(),attributes:c.deepMerge(u.wrapAll([{key:"type",value:n.type()}].concat(n.placeholder().map(function(n){return{key:"placeholder",value:n}}).toArray())),n.inputAttributes()),styles:n.inputStyles()}};return{schema:a.constant(f),behaviours:l,dom:d}}),i("5h",["33","7f"],function(n,t){var e=function(n){return{uid:n.uid(),dom:t.dom(n),components:[],behaviours:t.behaviours(n),eventOrder:n.eventOrder()}};return n.single({name:"Input",configFields:t.schema(),factory:e})}),i("3h",["3t","p","5f","3f","1f","1g","3c","2","2f","1m","3u","5g","5h","y","h","1n"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g){return{field:function(l,v){var h=i.record(d.sketch({placeholder:v,onSetValue:function(n){a.emit(n,c.input())},inputBehaviours:t.derive([e.config({find:m.some})]),selectOnFocus:!1})),y=i.record(s.sketch({dom:g.dom('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(n){var t=h.get(n);r.setValue(t,"")}}));return{name:l,spec:f.sketch({dom:g.dom('<div class="${prefix}-input-container"></div>'),components:[h.asSpec(),y.asSpec()],containerBehaviours:t.derive([o.config({toggleClass:p.resolve("input-container-empty")}),e.config({find:function(n){return m.some(h.get(n))}}),n.config("input-clearing",[u.run(c.input(),function(n){var t=h.get(n);(r.getValue(t).length>0?o.off:o.on)(n)})])])})}},hidden:function(n){return{name:n,spec:l.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return m.none()}})}}}}),i("7h",["x","4h","2e","b"],function(n,t,e,r){var o=["input","button","textarea"],i=function(n,t,e){t.disabled()&&m(n,t,e)},u=function(t){return n.contains(o,r.name(t.element()))},a=function(n){return t.has(n.element(),"disabled")},c=function(n){t.set(n.element(),"disabled","disabled")},s=function(n){t.remove(n.element(),"disabled")},f=function(n){return"true"===t.get(n.element(),"aria-disabled")},l=function(n){t.set(n.element(),"aria-disabled","true")},d=function(n){t.set(n.element(),"aria-disabled","false")},m=function(n,t){t.disableClass().each(function(t){e.add(n.element(),t)}),(u(n)?c:l)(n)};return{enable:function(n,t){t.disableClass().each(function(t){e.remove(n.element(),t)}),(u(n)?s:d)(n)},disable:m,isDisabled:function(n){return u(n)?a(n):f(n)},onLoad:i}}),i("7g",["3c","s","26","7h","4a","x"],function(n,t,e,r,o,i){return{exhibit:function(n,t){return o.nu({classes:t.disabled()?t.disableClass().map(i.pure).getOr([]):[]})},events:function(o,i){return n.derive([n.abort(t.execute(),function(n){return r.isDisabled(n,o,i)}),e.loadEvent(o,i,r.onLoad)])}}}),i("7i",["28"],function(n){return[n.defaulted("disabled",!1),n.option("disableClass")]}),i("5i",["p","7g","7h","7i"],function(n,t,e,r){return n.create({fields:r,name:"disabling",active:t,apis:e})}),i("5k",["p","5f","3f","50","51","52","28","x","v","w"],function(n,t,e,r,o,i,u,a,c,s){var f="form",l=[u.defaulted("formBehaviours",{})],d=function(n){return"<alloy.field."+n+">"},m=function(r,i,u){return c.deepMerge({"debug.sketcher":{Form:u},uid:r.uid(),dom:r.dom(),components:i,behaviours:c.deepMerge(n.derive([e.config({store:{mode:"manual",getValue:function(n){var i=o.getAllParts(n,r);return s.map(i,function(n){return n().bind(t.getCurrent).map(e.getValue)})},setValue:function(n,i){s.each(i,function(i,u){o.getPart(n,r,u).each(function(n){t.getCurrent(n).each(function(n){e.setValue(n,i)})})})}}})]),r.formBehaviours())})};return{sketch:function(n){var t=function(){var n=[];return{field:function(t,e){return n.push(t),o.generateOne(f,d(t),e)},record:function(){return n}}}(),e=n(t),u=t.record(),c=a.map(u,function(n){return i.required({name:n,pname:d(n)})});return r.composite(f,l,c,m,e)}}}),i("1y",["y","5"],function(n,t){var e=function(e){var r=t(n.none()),o=function(){r.get().each(e)},i=function(){o(),r.set(n.none())},u=function(t){o(),r.set(n.some(t))};return{clear:i,isSet:function(){return r.get().isSome()},set:u}};return{destroyable:function(){return e(function(n){n.destroy()})},unbindable:function(){return e(function(n){n.unbind()})},api:function(){var e=t(n.none()),r=function(){e.get().each(function(n){n.destroy()})},o=function(){r(),e.set(n.none())},i=function(t){r(),e.set(n.some(t))},u=function(n){e.get().each(n)};return{clear:o,isSet:function(){return e.get().isSome()},set:i,run:u}},value:function(){var e=t(n.none()),r=function(){e.set(n.none())},o=function(t){e.set(n.some(t))},i=function(n){e.get().each(n)};return{clear:r,set:o,isSet:function(){return e.get().isSome()},on:i}}}}),i("5n",[],function(){var n=1,t=-1,e=0;return{init:function(n){return{xValue:n,points:[]}},move:function(e,r){if(r===e.xValue)return e;var o=r-e.xValue>0?n:t,i={direction:o,xValue:r};return{xValue:r,points:function(){return 0===e.points.length?[]:e.points[e.points.length-1].direction===o?e.points.slice(0,e.points.length-1):e.points}().concat([i])}},complete:function(r){if(0===r.points.length)return e;var o=r.points[0].direction,i=r.points[r.points.length-1].direction;return o===t&&i===t?t:o===n&&i==n?n:e}}}),i("3i",["3t","p","5i","5j","32","1e","3f","1g","3c","2","2f","1m","3u","5k","28","2d","x","5","y","1y","38","5l","4t","5m","1k","5n","h","1n"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w,x,O,S,T,k,C,E){return{sketch:function(i){var D="navigateEvent",A="form-events",R=g.objOf([p.strict("fields"),p.defaulted("maxFieldIndex",i.fields.length-1),p.strict("onExecute"),p.strict("getInitialValue"),p.state("state",function(){return{dialogSwipeState:b.value(),currentScreen:h(0)}})]),F=g.asRawOrDie("SerialisedDialog",R,i),B=function(n,r,o){return l.sketch({dom:E.dom('<span class="${prefix}-icon-'+r+' ${prefix}-icon"></span>'),action:function(t){s.emitWith(t,D,{direction:n})},buttonBehaviours:t.derive([e.config({disableClass:C.resolve("toolbar-navigation-disabled"),disabled:!o})])})},M=function(n,t){O.descendant(n.element(),"."+C.resolve("serialised-dialog-chain")).each(function(n){w.set(n,"left",-F.state.currentScreen.get()*t.width+"px")})},I=function(n,t){var e=x.descendants(n.element(),"."+C.resolve("serialised-dialog-screen"));O.descendant(n.element(),"."+C.resolve("serialised-dialog-chain")).each(function(n){F.state.currentScreen.get()+t>=0&&F.state.currentScreen.get()+t<e.length&&(w.getRaw(n,"left").each(function(r){var o=parseInt(r,10),i=S.get(e[0]);w.set(n,"left",o-t*i+"px")}),F.state.currentScreen.set(F.state.currentScreen.get()+t))})},N=function(n){var t=x.descendants(n.element(),"input");y.from(t[F.state.currentScreen.get()]).each(function(t){n.getSystem().getByDom(t).each(function(t){s.dispatchFocus(n,t.element())})});var e=P.get(n);r.highlightAt(e,F.state.currentScreen.get())},j=function(){F.state.currentScreen.set(0),F.state.dialogSwipeState.clear()},H=a.record(m.sketch(function(e){return{dom:E.dom('<div class="${prefix}-serialised-dialog"></div>'),components:[d.sketch({dom:E.dom('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:v.map(F.fields,function(n,t){return t<=F.maxFieldIndex?d.sketch({dom:E.dom('<div class="${prefix}-serialised-dialog-screen"></div>'),components:v.flatten([[B(-1,"previous",t>0)],[e.field(n.name,n.spec)],[B(1,"next",t<F.maxFieldIndex)]])}):e.field(n.name,n.spec)})})],formBehaviours:t.derive([T.orientation(function(n,t){M(n,t)}),o.config({mode:"special",focusIn:function(n){N(n)},onTab:function(n){return I(n,1),y.some(!0)},onShiftTab:function(n){return I(n,-1),y.some(!0)}}),n.config(A,[c.runOnAttached(function(n){j();var t=P.get(n);r.highlightFirst(t),F.getInitialValue(n).each(function(t){u.setValue(n,t)})}),c.runOnExecute(F.onExecute),c.run(f.transitionend(),function(n,t){"left"===t.event().raw().propertyName&&N(n)}),c.run(D,function(n,t){var e=t.event().direction();I(n,e)})])])}})),P=a.record({dom:E.dom('<div class="${prefix}-dot-container"></div>'),behaviours:t.derive([r.config({highlightClass:C.resolve("dot-active"),itemClass:C.resolve("dot-item")})]),components:v.bind(F.fields,function(n,t){return t<=F.maxFieldIndex?[E.spec('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:E.dom('<div class="${prefix}-serializer-wrapper"></div>'),components:[H.asSpec(),P.asSpec()],behaviours:t.derive([o.config({mode:"special",focusIn:function(n){var t=H.get(n);o.focusIn(t)}}),n.config("serializer-wrapper-events",[c.run(f.touchstart(),function(n,t){F.state.dialogSwipeState.set(k.init(t.event().raw().touches[0].clientX))}),c.run(f.touchmove(),function(n,t){F.state.dialogSwipeState.on(function(n){t.event().prevent(),F.state.dialogSwipeState.set(k.move(n,t.event().raw().touches[0].clientX))})}),c.run(f.touchend(),function(n){F.state.dialogSwipeState.on(function(t){var e=H.get(n),r=-1*k.complete(t);I(e,r)})})])])}}}}),i("3j",["6","7"],function(n,t){var e=t.detect(),r=function(n,t){var e=t.selection.getRng();n(),t.selection.setRng(e)};return{forAndroid:function(t,o){(e.os.isAndroid()?r:n.apply)(o,t)}}}),i("1r",["3f","y","16","3g","k","3h","3i","3j"],function(n,t,e,r,o,i,u,a){var c=e.cached(function(e,o){return[{label:"the link group",items:[u.sketch({fields:[i.field("url","Type or paste URL"),i.field("text","Link text"),i.field("title","Link title"),i.field("target","Link target"),i.hidden("link")],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return t.some(r.getInfo(o))},onExecute:function(t){var i=n.getValue(t);r.applyInfo(o,i),e.restoreToolbar(),o.focus()}})]}]});return{sketch:function(n,t){return o.forToolbarStateAction(t,"link","link",function(){var e=c(n,t);n.setContextToolbar(e),a.forAndroid(t,function(){n.focusToolbar()}),r.query(t).each(function(n){t.selection.select(n.dom())})})}}}),i("3k",[],function(){return[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}]}),i("7n",["13","6","y","4h","2e"],function(n,t,e,r,o){var i=function(e,r,o,i){return n.readOptFrom(r.routes(),i.start()).map(t.apply).bind(function(e){return n.readOptFrom(e,i.destination()).map(t.apply)})},u=function(n,t,e){return f(n,t,e).bind(function(r){return a(n,t,e,r)})},a=function(n,e,r,o){return i(n,e,r,o).bind(function(n){return n.transition().map(function(e){return{transition:t.constant(e),route:t.constant(n)}})})},c=function(n,t,e){u(n,t,e).each(function(e){var i=e.transition();o.remove(n.element(),i.transitionClass()),r.remove(n.element(),t.destinationAttr())})},s=function(n,e,o,i){
return{start:t.constant(r.get(n.element(),e.stateAttr())),destination:t.constant(i)}},f=function(n,o){var i=n.element();return r.has(i,o.destinationAttr())?e.some({start:t.constant(r.get(n.element(),o.stateAttr())),destination:t.constant(r.get(n.element(),o.destinationAttr()))}):e.none()},l=function(n,t,e,o){c(n,t,e),r.has(n.element(),t.stateAttr())&&r.get(n.element(),t.stateAttr())!==o&&t.onFinish()(n,o),r.set(n.element(),t.stateAttr(),o)},d=function(n,t){r.has(n.element(),t.destinationAttr())&&(r.set(n.element(),t.stateAttr(),r.get(n.element(),t.destinationAttr())),r.remove(n.element(),t.destinationAttr()))};return{findRoute:i,disableTransition:c,getCurrentRoute:f,jumpTo:l,progressTo:function(n,t,e,i){d(n,t,e,i);var u=s(n,t,e,i);a(n,t,e,u).fold(function(){l(n,t,e,i)},function(u){c(n,t,e);var a=u.transition();o.add(n.element(),a.transitionClass()),r.set(n.element(),t.destinationAttr(),i)})},getState:function(n,t){var o=n.element();return r.has(o,t.stateAttr())?e.some(r.get(o,t.stateAttr())):e.none()}}}),i("7m",["3c","2f","7n"],function(n,t,e){return{events:function(r,o){return n.derive([n.run(t.transitionend(),function(n,t){var i=t.event().raw();e.getCurrentRoute(n,r,o).each(function(t){e.findRoute(n,r,o,t).each(function(u){u.transition().each(function(u){i.propertyName===u.property()&&(e.jumpTo(n,r,o,t.destination()),r.onTransition()(n,t))})})})}),n.runOnAttached(function(n){e.jumpTo(n,r,o,r.initialState())})])}}}),i("7o",["4p","28","2d","47"],function(n,t,e,r){return[t.defaulted("destinationAttr","data-transitioning-destination"),t.defaulted("stateAttr","data-transitioning-state"),t.strict("initialState"),n.onHandler("onTransition"),n.onHandler("onFinish"),t.strictOf("routes",e.setOf(r.value,e.setOf(r.value,e.objOfOnly([t.optionObjOfOnly("transition",[t.strict("property"),t.strict("transitionClass")])]))))]}),i("5o",["p","7m","7n","7o","13","w"],function(n,t,e,r,o,i){var u=function(n){var t={};return i.each(n,function(n,e){var r=e.split("<->");t[r[0]]=o.wrap(r[1],n),t[r[1]]=o.wrap(r[0],n)}),t},a=function(n,t,e){return o.wrapAll([{key:n,value:o.wrap(t,e)},{key:t,value:o.wrap(n,e)}])},c=function(n,t,e,r){return o.wrapAll([{key:n,value:o.wrapAll([{key:t,value:r},{key:e,value:r}])},{key:t,value:o.wrapAll([{key:n,value:r},{key:e,value:r}])},{key:e,value:o.wrapAll([{key:n,value:r},{key:t,value:r}])}])};return n.create({fields:r,name:"transitioning",active:t,apis:e,extra:{createRoutes:u,createBistate:a,createTristate:c}})}),i("7q",["27","4b","28","2d","x","6","w","6n","u"],function(n,t,e,r,o,i,u,a,c){return{generateFrom:function(s,f){var l=o.map(f,function(o){return e.field(o.name(),o.name(),t.asOption(),r.objOf([e.strict("config"),e.defaulted("state",n)]))}),d=r.asStruct("component.behaviours",r.objOf(l),s.behaviours).fold(function(n){throw new c(r.formatError(n)+"\nComplete spec:\n"+a.stringify(s,null,2))},i.identity);return{list:f,data:u.map(d,function(n){var t=n();return i.constant(t.map(function(n){return{config:n.config(),state:n.state().init(n.config())}}))})}},getBehaviours:function(n){return n.list},getData:function(n){return n.data}}}),i("7p",["7q","13","x","w","u"],function(n,t,e,r){var o=function(n){var o=t.readOptFrom(n,"behaviours").getOr({}),i=e.filter(r.keys(o),function(n){return void 0!==o[n]});return e.map(i,function(t){return n.behaviours[t].me})},i=function(t,e){return n.generateFrom(t,e)};return{generate:function(n){var t=o(n);return i(n,t)},generateFrom:i}}),i("5q",["6q"],function(n){return n.exactly(["getSystem","config","spec","connect","disconnect","element","syncComponents","readState","components","events"])}),i("6a",["6q"],function(n){return n.exactly(["debugInfo","triggerFocus","triggerEvent","triggerEscape","addToWorld","removeFromWorld","addToGui","removeFromGui","build","getByUid","getByDom","broadcast","broadcastOn"])}),i("5r",["6a","12","6","u"],function(n,t,e,r){return function(o){var i=function(n){return function(){throw new r("The component must be in a context to send: "+n+"\n"+t.element(o().element())+" is not in context.")}};return n({debugInfo:e.constant("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),build:i("build"),addToWorld:i("addToWorld"),removeFromWorld:i("removeFromWorld"),addToGui:i("addToGui"),removeFromGui:i("removeFromGui"),getByUid:i("getByUid"),getByDom:i("getByDom"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn")})}}),i("92",["13","w"],function(n,t){return{byInnerKey:function(e,r){var o={};return t.each(e,function(e,i){t.each(e,function(t,e){var u=n.readOr(e,[])(o);o[e]=u.concat([r(i,t)])})}),o}}}),i("7r",["92","4a","13","x","w","v","6n","6","47"],function(n,t,e,r,o,i,u,a,c){var s=function(n,t){return{name:a.constant(n),modification:t}},f=function(n,t){var o=r.bind(n,function(n){return n.modification().getOr([])});return c.value(e.wrap(t,o))},l=function(n,t){return n.length>1?c.error('Multiple behaviours have tried to change DOM "'+t+'". The guilty behaviours are: '+u.stringify(r.map(n,function(n){return n.name()}))+". At this stage, this is not supported. Future releases might provide strategies for resolving this."):0===n.length?c.value({}):c.value(n[0].modification().fold(function(){return{}},function(n){return e.wrap(t,n)}))},d=function(n,t,e,o){return c.error("Mulitple behaviours have tried to change the _"+t+'_ "'+n+'". The guilty behaviours are: '+u.stringify(r.bind(o,function(n){return void 0!==n.modification().getOr({})[t]?[n.name()]:[]}),null,2)+". This is not currently supported.")},m=function(n,t){return r.foldl(n,function(r,i){var u=i.modification().getOr({});return r.bind(function(r){var i=o.mapToArray(u,function(o,i){return void 0!==r[i]?d(t,i,u,n):c.value(e.wrap(i,o))});return e.consolidate(i,r)})},c.value({})).map(function(n){return e.wrap(t,n)})},p={classes:f,attributes:m,styles:m,domChildren:l,defChildren:l,innerHtml:l,value:l};return{combine:function(u,a,f,l){var d=i.deepMerge({},a);r.each(f,function(n){d[n.name()]=n.exhibit(u,l)});var m=n.byInnerKey(d,s),g=o.map(m,function(n){return r.bind(n,function(n){return n.modification().fold(function(){return[]},function(){return[n]})})}),v=o.mapToArray(g,function(n,t){return e.readOptFrom(p,t).fold(function(){return c.error("Unknown field type: "+t)},function(e){return e(n,t)})});return e.consolidate(v,{}).map(t.nu)}}}),i("93",["6n","47","u"],function(n,t,e){return{sortKeys:function(r,o,i,u){var a=i.slice(0);try{var c=a.sort(function(t,i){var a=t[o](),c=i[o](),s=u.indexOf(a),f=u.indexOf(c);if(-1===s)throw new e("The ordering for "+r+" does not have an entry for "+a+".\nOrder specified: "+n.stringify(u,null,2));if(-1===f)throw new e("The ordering for "+r+" does not have an entry for "+c+".\nOrder specified: "+n.stringify(u,null,2));return s<f?-1:f<s?1:0});return t.value(c)}catch(n){return t.error([n])}}}}),i("6b",["6"],function(n){return{nu:function(t,e){return{handler:t,purpose:n.constant(e)}},curryArgs:function(t,e){return{handler:n.curry.apply(void 0,[t.handler].concat(e)),purpose:t.purpose}},getHandler:function(n){return n.handler}}}),i("7s",["92","93","46","6b","13","x","6","v","w","47","6n","t","u"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=function(n,t){return{name:u.constant(n),handler:u.constant(t)}},m=function(n,t){var e={};return i.each(n,function(n){e[n.name()]=n.handlers(t)}),e},p=function(t,e,r){var o=a.deepMerge(r,m(e,t));return n.byInnerKey(o,d)},g=function(n){var t=e.read(n);return function(n,e){var r=l.prototype.slice.call(arguments,0);t.abort.apply(void 0,r)?e.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},v=function(n,t){return new s.error(["The event ("+n+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+f.stringify(i.map(t,function(n){return n.name()}),null,2)])},h=function(n,r,o){var u=r[o];return u?t.sortKeys("Event: "+o,"name",n,u).map(function(n){var t=i.map(n,function(n){return n.handler()});return e.fuse(t)}):v(o,n)},y=function(n,t){var e=c.mapToArray(n,function(n,e){return(1===n.length?s.value(n[0].handler()):h(n,t,e)).map(function(u){var a=g(u),c=n.length>1?i.filter(t,function(t){return i.contains(n,function(n){return n.name()===t})}).join(" > "):n[0].name();return o.wrap(e,r.nu(a,c))})});return o.consolidate(e,{})};return{combine:function(n,t,e,r){var o=p(n,e,r);return y(o,t)}}}),i("7t",["4p","6o","4a","4r","4b","28","13","2d","x","6","v","u"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(n){return u.wrap(r.idAttr(),n.uid())};return{toInfo:function(t){return a.asStruct("custom.definition",a.objOfOnly([i.field("dom","dom",o.strict(),a.objOfOnly([i.strict("tag"),i.defaulted("styles",{}),i.defaulted("classes",[]),i.defaulted("attributes",{}),i.option("value"),i.option("innerHtml")])),i.strict("components"),i.strict("uid"),i.defaulted("events",{}),i.defaulted("apis",s.constant({})),i.field("eventOrder","eventOrder",o.mergeWith({"alloy.execute":["disabling","alloy.base.behaviour","toggling"],"alloy.focus":["alloy.base.behaviour","keying","focusing"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"]}),a.anyValue()),i.option("domModification"),n.snapshot("originalSpec"),i.defaulted("debug.sketcher","unknown")]),t)},toDefinition:function(n){var e={tag:n.dom().tag(),classes:n.dom().classes(),attributes:f.deepMerge(l(n),n.dom().attributes()),styles:n.dom().styles(),domChildren:c.map(n.components(),function(n){return n.element()})};return t.nu(f.deepMerge(e,n.dom().innerHtml().map(function(n){return u.wrap("innerHtml",n)}).getOr({}),n.dom().value().map(function(n){return u.wrap("value",n)}).getOr({})))},toModification:function(n){return n.domModification().fold(function(){return e.nu({})},e.nu)},toApis:function(n){return n.apis()},toEvents:function(n){return n.events()}}}),i("86",["x","2e","4i","t"],function(n,t,e,r){var o=function(n){for(var t=n.dom().classList,e=new r(t.length),o=0;o<t.length;o++)e[o]=t.item(o);return e};return{add:function(e,r){n.each(r,function(n){t.add(e,n)})},remove:function(e,r){n.each(r,function(n){t.remove(e,n)})},toggle:function(e,r){n.each(r,function(n){t.toggle(e,n)})},hasAll:function(e,r){return n.forall(r,function(n){return t.has(e,n)})},hasAny:function(e,r){return n.exists(r,function(n){return t.has(e,n)})},get:function(n){return e.supports(n)?o(n):e.get(n)}}}),i("7u",["6o","x","4h","86","38","a","4m","2r","90","u"],function(n,t,e,r,o,i,u,a,c,s){var f=function(e){if(e.domChildren().isSome()&&e.defChildren().isSome())throw new s("Cannot specify children and child specs! Must be one or the other.\nDef: "+n.defToStr(e));return e.domChildren().fold(function(){var n=e.defChildren().getOr([]);return t.map(n,d)},function(n){return n})},l=function(n){var t=i.fromTag(n.tag());e.setAll(t,n.attributes().getOr({})),r.add(t,n.classes().getOr([])),o.setAll(t,n.styles().getOr({})),u.set(t,n.innerHtml().getOr(""));var s=f(n);return a.append(t,s),n.value().each(function(n){c.set(t,n)}),t},d=function(t){var e=n.nu(t);return l(e)};return{renderToDom:l}}),i("5p",["7p","5q","5r","4z","7q","7r","7s","7t","4a","7u","2d","x","5","6","v","1h","6n","z","u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y){return{build:function(b){var w=function(){return V},x=d(e(w)),O=f.getOrDie(a.toInfo(p.deepMerge(b,{behaviours:void 0}))),S=n.generate(b),T=o.getBehaviours(S),k=o.getData(S),C=a.toDefinition(O),E={"alloy.base.modification":a.toModification(O)},D=i.combine(k,E,T,C).getOrDie(),A=c.merge(C,D),R=s.renderToDom(A),F={"alloy.base.behaviour":a.toEvents(O)},B=u.combine(k,O.eventOrder(),T,F).getOrDie(),M=d(O.components()),I=function(n){x.set(n)},N=function(){x.set(e(w))},j=function(){var n=h.children(R),t=l.bind(n,function(n){return x.get().getByDom(n).fold(function(){return[]},function(n){return[n]})});M.set(t)},H=function(n){if(n===r.apiConfig())return O.apis();var t=k;return(g.isFunction(t[n.name()])?t[n.name()]:function(){throw new y("Could not find "+n.name()+" in "+v.stringify(b,null,2))})()},P=function(n){return k[n]().map(function(n){return n.state.readState()}).getOr("not enabled")},V=t({getSystem:x.get,config:H,spec:m.constant(b),readState:P,connect:I,disconnect:N,element:m.constant(R),syncComponents:j,components:M.get,events:m.constant(B)});return V}}}),i("5s",["3c","s","12","19","15"],function(n,t,e,r,o){var i=function(n,t,e){return r.eq(t,n.element())&&!r.eq(t,e)};return{events:n.derive([n.can(t.focus(),function(n,r){var u=r.event().originator(),a=r.event().target();return!i(n,u,a)||(o.warn(t.focus()+" did not get interpreted by the desired target. \nOriginator: "+e.element(u)+"\nTarget: "+e.element(a)+"\nCheck the "+t.focus()+" event handlers"),!1)})])}}),i("5t",[],function(){return{make:function(n){return n}}}),i("3p",["5p","5q","5r","4z","5s","2z","5t","28","13","2d","x","5","6","v","y","47","a","u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v){var h=function(n){var t=c.readOr("components",[])(n);return f.map(t,x)},y=function(t){var e=u.make(t),r=h(e),i=m.deepMerge(o,e,c.wrap("components",r));return g.value(n.build(i))},b=function(n){var t=v.fromText(n);return w({element:t})},w=function(n){var o=s.asStructOrDie("external.component",s.objOfOnly([a.strict("element"),a.option("uid")]),n),u=l(e()),c=function(n){u.set(n)},f=function(){u.set(e(function(){return m}))};o.uid().each(function(n){i.writeOnly(o.element(),n)});var m=t({getSystem:u.get,config:p.none,connect:c,disconnect:f,element:d.constant(o.element()),spec:d.constant(n),readState:d.constant("No state"),syncComponents:d.noop,components:d.constant([]),events:d.constant({})});return r.premade(m)},x=function(n){return r.getPremade(n).fold(function(){var t=m.deepMerge({uid:i.generate("")},n);return y(t).getOrDie()},function(n){return n})};return{build:x,premade:r.premade,external:w,text:b}}),i("98",["31","2","6","8"],function(n,t,e,r){var o="alloy.item-hover",i="alloy.item-focus",u=function(e){(r.search(e.element()).isNone()||n.isFocused(e))&&(n.isFocused(e)||n.focus(e),t.emitWith(e,o,{item:e}))},a=function(n){t.emitWith(n,i,{item:n})};return{hover:e.constant(o),focus:e.constant(i),onHover:u,onFocus:a}}),i("95",["p","31","32","3f","1f","3c","2","2f","s","4p","98","28","v"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){var m=function(s){return{dom:d.deepMerge(s.dom(),{attributes:{role:s.toggling().isSome()?"menuitemcheckbox":"menuitem"}}),behaviours:d.deepMerge(n.derive([s.toggling().fold(o.revoke,function(n){return o.config(d.deepMerge({aria:{mode:"checked"}},n))}),t.config({ignore:s.ignoreFocus(),onFocus:function(n){f.onFocus(n)}}),e.config({mode:"execution"}),r.config({store:{mode:"memory",initialValue:s.data()}})]),s.itemBehaviours()),events:i.derive([i.runWithTarget(c.tapOrClick(),u.emitExecute),i.cutter(a.mousedown()),i.run(a.mouseover(),f.onHover),i.run(c.focusItem(),t.focus)]),components:s.components(),domModification:s.domModification()}};return[l.strict("data"),l.strict("components"),l.strict("dom"),l.option("toggling"),l.defaulted("itemBehaviours",{}),l.defaulted("ignoreFocus",!1),l.defaulted("domModification",{}),s.output("builder",m)]}),i("96",["3c","s","4p","28"],function(n,t,e,r){var o=function(e){return{dom:e.dom(),components:e.components(),events:n.derive([n.stopper(t.focusItem())])}};return[r.strict("dom"),r.strict("components"),e.output("builder",o)]}),i("9z",["p","3f","52","6"],function(n,t,e,r){var o=[e.required({name:"widget",overrides:function(e){return{behaviours:n.derive([t.config({store:{mode:"manual",getValue:function(){return e.data()},setValue:function(){}}})])}}})];return{owner:r.constant("item-widget"),parts:r.constant(o)}}),i("97",["8s","p","31","32","3f","3c","2f","s","4p","9z","98","51","28","v","y"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p){var g=function(c){var d=l.substitutes(s.owner(),c,s.parts()),g=l.components(s.owner(),c,d.internals()),v=function(n){return l.getPart(n,c,"widget").map(function(n){return r.focusIn(n),n})},h=function(t,e){return n.inside(e.event().target())?p.none():function(){return c.autofocus()?(e.setSource(t.element()),p.none()):p.none()}()};return m.deepMerge({dom:c.dom(),components:g,domModification:c.domModification(),events:i.derive([i.runOnExecute(function(n,t){v(n).each(function(){t.stop()})}),i.run(u.mouseover(),f.onHover),i.run(a.focusItem(),function(n){c.autofocus()?v(n):e.focus(n)})]),behaviours:t.derive([o.config({store:{mode:"memory",initialValue:c.data()}}),e.config({onFocus:function(n){f.onFocus(n)}}),r.config({mode:"special",onLeft:h,onRight:h,onEscape:function(n,t){return e.isFocused(n)||c.autofocus()?c.autofocus()?(t.setSource(n.element()),p.none()):p.none():(e.focus(n),p.some(!0))}})])})};return[d.strict("uid"),d.strict("data"),d.strict("components"),d.strict("dom"),d.defaulted("autofocus",!1),d.defaulted("domModification",{}),l.defaultUidsSchema(s.parts()),c.output("builder",g)]}),i("7v",["94","4p","95","96","97","52","2z","28","2d","6","v"],function(n,t,e,r,o,i,u,a,c,s,f){var l=c.choose("type",{widget:o,item:e,separator:r}),d=function(n,t){return{mode:"flatgrid",selector:"."+n.markers().item(),initSize:{numColumns:t.initSize().numColumns(),numRows:t.initSize().numRows()},focusManager:n.focusManager()}},m=function(n,t){return{mode:"menu",selector:"."+n.markers().item(),moveOnTab:t.moveOnTab(),focusManager:n.focusManager()}},p=[i.group({factory:{sketch:function(n){var t=c.asStructOrDie("menu.spec item",l,n);return t.builder()(t)}},name:"items",unit:"item",defaults:function(n,t){var e=u.generate("");return f.deepMerge({uid:e},t)},overrides:function(n,t){return{type:t.type,ignoreFocus:n.fakeFocus(),domModification:{classes:[n.markers().item()]}}}})],g=[a.strict("value"),a.strict("items"),a.strict("dom"),a.strict("components"),a.defaulted("eventOrder",{}),a.defaulted("menuBehaviours",{}),a.defaultedOf("movement",{mode:"menu",moveOnTab:!0},c.choose("mode",{grid:[t.initSize(),t.output("config",d)],menu:[a.defaulted("moveOnTab",!0),t.output("config",m)]})),t.itemMarkers(),a.defaulted("fakeFocus",!1),a.defaulted("focusManager",n.dom()),t.onHandler("onHighlight")];return{name:s.constant("Menu"),schema:s.constant(g),parts:s.constant(p)}}),i("99",["6"],function(n){return{focus:n.constant("alloy.menu-focus")}}),i("7w",["p","5f","5j","32","3f","3c","2","98","99","6","v","u"],function(n,t,e,r,o,i,u,a,c,s,f){return{make:function(l,d){return f.deepMerge({dom:f.deepMerge(l.dom(),{attributes:{role:"menu"}}),uid:l.uid(),behaviours:f.deepMerge(n.derive([e.config({highlightClass:l.markers().selectedItem(),itemClass:l.markers().item(),onHighlight:l.onHighlight()}),o.config({store:{mode:"memory",initialValue:l.value()}}),t.config({find:s.identity}),r.config(l.movement().config()(l,l.movement()))]),l.menuBehaviours()),events:i.derive([i.run(a.focus(),function(n,t){var r=t.event();n.getSystem().getByDom(r.target()).each(function(r){e.highlight(n,r),t.stop(),u.emitWith(n,c.focus(),{menu:n,item:r})})}),i.run(a.hover(),function(n,t){var r=t.event().item();e.highlight(n,r)})]),components:d,eventOrder:l.eventOrder()})}}}),i("5u",["33","7v","7w"],function(n,t,e){return n.composite({name:"Menu",configFields:t.schema(),partFields:t.parts(),factory:e.make})}),i("5w",["y","19","8","2t","z"],function(n,t,e,r,o){return{preserve:function(i,u){var a=o.owner(u),c=e.active(a).bind(function(e){var o=function(n){return t.eq(e,n)};return o(u)?n.some(u):r.descendant(u,o)}),s=i(u);return c.each(function(n){e.active(a).filter(function(e){return t.eq(e,n)}).orThunk(function(){e.focus(n)})}),s}}}),i("3o",["5w","3","x","19","9"],function(n,t,e,r,o){var i=function(r,o,i,u){t.detachChildren(r),n.preserve(function(){var n=e.map(u,r.getSystem().build);e.each(n,function(n){t.attach(r,n)})},r.element())},u=function(n,e,r,o){var i=n.getSystem().build(o);t.attachWith(n,i,r)},a=function(n,t,e,r){u(n,t,o.append,r)},c=function(n,t,e,r){u(n,t,o.prepend,r)},s=function(n,o,i,u){var a=f(n,o);e.find(a,function(n){return r.eq(u.element(),n.element())}).each(t.detach)},f=function(n){return n.components()};return{append:a,prepend:c,remove:s,set:i,contents:f}}),i("1x",["p","3o"],function(n,t){return n.create({fields:[],name:"replacing",apis:t})}),i("a0",["13","x","w","y"],function(n,t,e,r){var o=function(n){return e.tupleMap(n,function(n,t){return{k:n,v:t}})},i=function(t,e,o,u){return n.readOptFrom(o,u).bind(function(u){return n.readOptFrom(t,u).bind(function(n){var u=i(t,e,o,n);return r.some([n].concat(u))})}).getOr([])};return{generate:function(r,u){var a={};e.each(r,function(n,e){t.each(n,function(n){a[n]=e})});var c=u,s=o(u),f=e.map(s,function(n,t){return[t].concat(i(a,c,s,t))});return e.map(a,function(t){return n.readOptFrom(f,t).getOr([t])})}}}),i("9a",["a0","13","x","w","6","y","5"],function(n,t,e,r,o,i,u){return function(){var a=u({}),c=u({}),s=u({}),f=u(i.none()),l=u(o.constant([])),d=function(){a.set({}),c.set({}),s.set({}),f.set(i.none())},m=function(){return f.get().isNone()},p=function(t,e,r,o){f.set(i.some(t)),a.set(r),c.set(e),l.set(o);var u=o(e),d=n.generate(u,r);s.set(d)},g=function(n){return t.readOptFrom(a.get(),n).map(function(e){var r=t.readOptFrom(s.get(),n).getOr([]);return[e].concat(r)})},v=function(n){return t.readOptFrom(s.get(),n).bind(function(n){return n.length>1?i.some(n.slice(1)):i.none()})},h=function(n){return t.readOptFrom(s.get(),n)},y=function(n){return t.readOptFrom(c.get(),n)};return{setContents:p,expand:g,refresh:h,collapse:v,lookupMenu:y,otherMenus:function(n){var t=l.get()(c.get());return e.difference(r.keys(t),n)},getPrimary:function(){return f.get().bind(y)},getMenus:function(){return c.get()},clear:d,isClear:m}}}),i("7x",["8s","p","5f","5j","32","1x","3f","3p","3c","2","s","94","5u","9a","98","99","13","x","6","v","w","y","14","11","2e","86","4t"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w,x,O,S,T,k,C){return{make:function(y,E){var D=function(n,t){return w.map(t,function(t,e){var r=d.sketch(b.deepMerge(t,{value:e,items:t.items,markers:v.narrow(E.markers,["item","selectedItem"]),fakeFocus:y.fakeFocus(),onHighlight:y.onHighlight(),focusManager:y.fakeFocus()?l.highlights():l.dom()}));return n.getSystem().build(r)})},A=m(),R=function(n){var t=D(n,y.data().menus());return A.setContents(y.data().primary(),t,y.data().expansions(),function(t){return B(n,t)}),A.getPrimary()},F=function(n){return u.getValue(n).value},B=function(){return w.map(y.data().menus(),function(n){return h.bind(n.items,function(n){return"separator"===n.type?[]:[n.data.value]})})},M=function(n,t){r.highlight(n,t),r.getHighlighted(t).orThunk(function(){return r.getFirst(t)}).each(function(t){s.dispatch(n,t.element(),f.focusItem())})},I=function(n,t){return O.cat(h.map(t,n.lookupMenu))},N=function(n,t,e){return x.from(e[0]).bind(t.lookupMenu).map(function(r){var o=I(t,e.slice(1));h.each(o,function(n){T.add(n.element(),y.markers().backgroundMenu())}),S.inBody(r.element())||i.append(n,a.premade(r)),k.remove(r.element(),[y.markers().backgroundMenu()]),M(n,r);var u=I(t,t.otherMenus(e));return h.each(u,function(t){k.remove(t.element(),[y.markers().backgroundMenu()]),y.stayInDom()||i.remove(n,t)}),r})},j=function(n,t){var e=F(t);return A.expand(e).bind(function(e){return x.from(e[0]).bind(A.lookupMenu).each(function(e){S.inBody(e.element())||i.append(n,a.premade(e)),y.onOpenSubmenu()(n,t,e),r.highlightFirst(e)}),N(n,A,e)})},H=function(n,t){var e=F(t);return A.collapse(e).bind(function(e){return N(n,A,e).map(function(e){return y.onCollapseMenu()(n,t,e),e})})},P=function(n,t){var e=F(t);return A.refresh(e).bind(function(t){return N(n,A,t)})},V=function(t,e){return n.inside(e.element())?x.none():j(t,e)},z=function(t,e){return n.inside(e.element())?x.none():H(t,e)},L=function(n,t){return H(n,t).orThunk(function(){return y.onEscape()(n,t)})},q=function(n){return function(t,e){return C.closest(e.getSource(),"."+y.markers().item()).bind(function(e){return t.getSystem().getByDom(e).bind(function(e){return n(t,e)})})}},U=c.derive([c.run(g.focus(),function(n,t){var e=t.event().menu();r.highlight(n,e)}),c.runOnExecute(function(n,t){var e=t.event().target();return n.getSystem().getByDom(e).bind(function(t){return 0===F(t).indexOf("collapse-item")?H(n,t):j(n,t).orThunk(function(){return y.onExecute()(n,t)})})}),c.runOnAttached(function(n){R(n).each(function(t){i.append(n,a.premade(t)),y.openImmediately()&&(M(n,t),y.onOpenMenu()(n,t))})})].concat(y.navigateOnHover()?[c.run(p.hover(),function(n,t){var e=t.event().item();P(n,e),j(n,e),y.onHover()(n,e)})]:[])),W=function(n){r.getHighlighted(n).each(function(t){r.getHighlighted(t).each(function(t){H(n,t)})})};return{uid:y.uid(),dom:y.dom(),behaviours:b.deepMerge(t.derive([o.config({mode:"special",onRight:q(V),onLeft:q(z),onEscape:q(L),focusIn:function(n){A.getPrimary().each(function(t){s.dispatch(n,t.element(),f.focusItem())})}}),r.config({highlightClass:y.markers().selectedMenu(),itemClass:y.markers().menu()}),e.config({find:function(n){return r.getHighlighted(n)}}),i.config({})]),y.tmenuBehaviours()),eventOrder:y.eventOrder(),apis:{collapseMenu:W},events:U}},collapseItem:y.constant("collapse-item")}}),i("5v",["33","4p","7x","28","13","3e"],function(n,t,e,r,o,i){var u=function(n,t,e){return{primary:n,menus:t,expansions:e}},a=function(n,t){return{primary:n,menus:o.wrap(n,t),expansions:{}}},c=function(n){return{value:i.generate(e.collapseItem()),text:n}};return n.single({name:"TieredMenu",configFields:[t.onStrictKeyboardHandler("onExecute"),t.onStrictKeyboardHandler("onEscape"),t.onStrictHandler("onOpenMenu"),t.onStrictHandler("onOpenSubmenu"),t.onHandler("onCollapseMenu"),r.defaulted("openImmediately",!0),r.strictObjOf("data",[r.strict("primary"),r.strict("menus"),r.strict("expansions")]),r.defaulted("fakeFocus",!1),t.onHandler("onHighlight"),t.onHandler("onHover"),t.tieredMenuMarkers(),r.strict("dom"),r.defaulted("navigateOnHover",!0),r.defaulted("stayInDom",!1),r.defaulted("tmenuBehaviours",{}),r.defaulted("eventOrder",{})],apis:{collapseMenu:function(n,t){n.collapseMenu(t)}},factory:e.make,extraApis:{tieredData:u,singleData:a,collapseItem:c}})}),i("3y",["6","2e","h"],function(n,t,e){var r=e.resolve("scrollable");return{register:function(n){t.add(n,r)},deregister:function(n){t.remove(n,r)},scrollable:n.constant(r)}}),i("3l",["3t","p","3f","1f","5o","3p","1g","3c","1m","5u","5v","13","x","v","w","38","4t","5m","1k","h","3y"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w){var x=function(n){return l.readOptFrom(n,"format").getOr(n.title)},O=function(n,t){var e=T("Styles",[].concat(d.map(n.items,function(t){return S(x(t),t.title,t.isSelected(),t.getPreview(),l.hasKey(n.expansions,x(t)))})),t,!1),r=p.map(n.menus,function(e,r){var o=d.map(e,function(t){return S(x(t),t.title,void 0!==t.isSelected&&t.isSelected(),void 0!==t.getPreview?t.getPreview():"",l.hasKey(n.expansions,x(t)))});return T(r,o,t,!0)}),o=m.deepMerge(r,l.wrap("styles",e));return{tmenu:f.tieredData("styles",o,n.expansions)}},S=function(n,e,o,i,u){return{data:{value:n,text:e},type:"item",dom:{tag:"div",classes:u?[b.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:b.resolve("format-matches"),selected:o},itemBehaviours:t.derive(u?[]:[y.format(n,function(n,t){(t?r.on:r.off)(n)})]),components:[{dom:{tag:"div",attributes:{style:i},innerHtml:e}}]}},T=function(e,r,u,l){return{value:e,dom:{tag:"div"},components:[c.sketch({dom:{tag:"div",classes:[b.resolve("styles-collapser")]},components:l?[{dom:{tag:"span",classes:[b.resolve("styles-collapse-icon")]}},i.text(e)]:[i.text(e)],action:function(n){if(l){var t=u().get(n);f.collapseMenu(t)}}}),{dom:{tag:"div",classes:[b.resolve("styles-menu-items-container")]},components:[s.parts().items({})],behaviours:t.derive([n.config("adhoc-scrollable-menu",[a.runOnAttached(function(n){g.set(n.element(),"overflow-y","auto"),g.set(n.element(),"-webkit-overflow-scrolling","touch"),w.register(n.element())}),a.runOnDetached(function(n){g.remove(n.element(),"overflow-y"),g.remove(n.element(),"-webkit-overflow-scrolling"),w.deregister(n.element())})])])}],items:r,menuBehaviours:t.derive([o.config({initialState:"after",routes:o.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}};return{sketch:function(n){var t=O(n.formats,function(){return r}),r=u.record(f.sketch({dom:{tag:"div",classes:[b.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,r){var o=e.getValue(r);n.handle(r,o.value)},onEscape:function(){},onOpenMenu:function(n,t){var e=h.get(n.element());h.set(t.element(),e),o.jumpTo(t,"current")},onOpenSubmenu:function(n,t,e){var r=h.get(n.element()),i=v.ancestor(t.element(),'[role="menu"]').getOrDie("hacky"),u=n.getSystem().getByDom(i).getOrDie();h.set(e.element(),r),o.progressTo(u,"before"),o.jumpTo(e,"after"),o.progressTo(e,"current")},onCollapseMenu:function(n,t,e){var r=v.ancestor(t.element(),'[role="menu"]').getOrDie("hacky"),i=n.getSystem().getByDom(r).getOrDie();o.progressTo(i,"after"),o.progressTo(e,"current")},navigateOnHover:!1,openImmediately:!0,data:t.tmenu,markers:{backgroundMenu:b.resolve("styles-background-menu"),menu:b.resolve("styles-menu"),selectedMenu:b.resolve("styles-selected-menu"),item:b.resolve("styles-item"),selectedItem:b.resolve("styles-selected-item")}}));return r.asSpec()}}}),i("3m",["13","x","v"],function(n,t,e){var r=function(t){var r=e.deepMerge(n.exclude(t,["items"]),{menu:!0}),o=i(t.items,t.title);return{item:r,menus:e.deepMerge(o.menus,n.wrap(t.title,o.items)),expansions:e.deepMerge(o.expansions,n.wrap(t.title,t.title))}},o=function(t){return n.hasKey(t,"items")?r(t):{item:t,menus:{},expansions:{}}},i=function(n){return t.foldr(n,function(n,t){var r=o(t);return{menus:e.deepMerge(n.menus,r.menus),items:[r.item].concat(n.items),expansions:e.deepMerge(n.expansions,r.expansions)}},{menus:{},expansions:{},items:[]})};return{expand:i}}),i("1s",["1f","13","x","6","3e","v","3k","3l","3m"],function(n,t,e,r,o,i,u,a,c){var s=function(n,r){var o=function(r){return e.bind(r,function(e){if(void 0!==e.items){return o(e.items).length>0?[e]:[]}return!t.hasKey(e,"format")||n.formatter.canApply(e.format)?[e]:[]})},i=o(r);return c.expand(i)};return{register:function(n,a){var c=function(t){return function(){return n.formatter.match(t)}},s=function(t){return function(){return n.formatter.getCssText(t)}},f=function(n){return i.deepMerge(n,{isSelected:c(n.format),getPreview:s(n.format)})},l=function(n){return i.deepMerge(n,{isSelected:r.constant(!1),getPreview:r.constant("")})},d=function(t){var e=o.generate(t.title),r=i.deepMerge(t,{format:e,isSelected:c(e),getPreview:s(e)});return n.formatter.register(e,r),r},m=t.readOptFrom(a,"style_formats").getOr(u),p=function(n){return e.map(n,function(n){if(t.hasKey(n,"items")){var e=p(n.items);return i.deepMerge(l(n),{items:e})}return t.hasKey(n,"format")?f(n):d(n)})};return p(m)},ui:function(t,e,r){var o=s(t,e);return a.sketch({formats:o,handle:function(e,o){t.undoManager.transact(function(){n.isOn(e)?t.formatter.remove(o):t.formatter.apply(o)}),r()}})}}}),i("g",["p","1e","1f","1g","13","x","6","y","1h","1i","1j","1k","f","h","k","1o","1p","1q","1r","1s"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b){var w=["undo","bold","italic","link","image","bullist","styleselect"],x=function(n){var t=n.replace(/\|/g," ").trim();return t.length>0?t.split(/\s+/):[]},O=function(n){return i.bind(n,function(n){return c.isArray(n)?O(n):x(n)})},S=function(n){var t=void 0!==n.toolbar?n.toolbar:w;return c.isArray(t)?O(t):x(t)};return{identify:S,setup:function(r,i){var u=function(n){return function(){return p.forToolbarCommand(i,n)}},c=function(n){return function(){return p.forToolbarStateCommand(i,n)}},s=function(n,t,e){return function(){return p.forToolbarStateAction(i,n,t,e)}},f=u("undo"),w=u("redo"),x=c("bold"),O=c("italic"),S=c("underline"),T=u("removeformat"),k=function(){return y.sketch(r,i)},C=s("unlink","link",function(){i.execCommand("unlink",null,!1)}),E=function(){return h.sketch(i)},D=s("unordered-list","ul",function(){i.execCommand("InsertUnorderedList",null,!1)}),A=s("ordered-list","ol",function(){i.execCommand("InsertOrderedList",null,!1)}),R=function(){return v.sketch(r,i)},F=function(){return g.sketch(r,i)},B=b.register(i,i.settings),M=function(){return b.ui(i,B,function(){i.fire("scrollIntoView")})},I=function(){return p.forToolbar("style-formats",function(n){i.fire("toReading"),r.dropup().appear(M,e.on,n)},n.derive([e.config({toggleClass:m.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),t.config({channels:o.wrapAll([l.receive(d.orientationChanged(),e.off),l.receive(d.dropupDismissed(),e.off)])})]))},N=function(n,t){return{isSupported:function(){return n.forall(function(n){return o.hasKey(i.buttons,n)})},sketch:t}}
;return{undo:N(a.none(),f),redo:N(a.none(),w),bold:N(a.none(),x),italic:N(a.none(),O),underline:N(a.none(),S),removeformat:N(a.none(),T),link:N(a.none(),k),unlink:N(a.none(),C),image:N(a.none(),E),bullist:N(a.some("bullist"),D),numlist:N(a.some("numlist"),A),fontsizeselect:N(a.none(),R),forecolor:N(a.none(),F),styleselect:N(a.none(),I)}},detect:function(n,t){var e=S(n),r={};return i.bind(e,function(n){var e=!o.hasKey(r,n)&&o.hasKey(t,n)&&t[n].isSupported()?[t[n].sketch()]:[];return r[n]=!0,e})}}}),i("3n",["6","a"],function(n,t){var e=function(t,e,r,o,i,u,a){return{target:n.constant(t),x:n.constant(e),y:n.constant(r),stop:o,prevent:i,kill:u,raw:n.constant(a)}},r=function(r,o){return function(i){if(r(i)){var u=t.fromDom(i.target),a=function(){i.stopPropagation()},c=function(){i.preventDefault()},s=n.compose(c,a),f=e(u,i.clientX,i.clientY,a,c,s,i);o(f)}}},o=function(t,e,o,u,a){var c=r(o,u);return t.dom().addEventListener(e,c,a),{unbind:n.curry(i,t,e,c,a)}},i=function(n,t,e,r){n.dom().removeEventListener(t,e,r)};return{bind:function(n,t,e,r){return o(n,t,e,r,!1)},capture:function(n,t,e,r){return o(n,t,e,r,!0)}}}),i("1t",["6","3n"],function(n,t){var e=n.constant(!0);return{bind:function(n,r,o){return t.bind(n,r,e,o)},capture:function(n,r,o){return t.capture(n,r,e,o)}}}),u("1u",clearInterval),u("1w",setInterval),i("i",["6","y","7","1t","a","1u","1v","1w"],function(n,t,e,r,o,i,u,a){var c=50,s=1e3/c,f=function(t){var e=t.matchMedia("(orientation: portrait)").matches;return{isPortrait:n.constant(e)}},l=function(n){var t=e.detect().os.isiOS(),r=f(n).isPortrait();return t&&!r?n.screen.height:n.screen.width};return{get:f,onChange:function(n,e){var u=o.fromDom(n),l=null,d=function(){i(l);var t=f(n);e.onChange(t),p(function(){e.onReady(t)})},m=r.bind(u,"orientationchange",d),p=function(e){i(l);var r=n.innerHeight,o=0;l=a(function(){r!==n.innerHeight?(i(l),e(t.some(n.innerHeight))):o>s&&(i(l),e(t.none())),o++},c)};return{onAdjustment:p,destroy:function(){m.unbind()}}},getActualWidth:l}}),u("83",clearTimeout),i("9b",["83","1i"],function(n,t){return function(e,r){var o=null,i=function(){var n=arguments;o=t(function(){e.apply(null,n),o=null},r)};return{cancel:function(){null!==o&&(n(o),o=null)},schedule:i}}}),i("89",["9b","2f","s","13","5","6","y","19","1v"],function(n,t,e,r,o,i,u,a,c){var s=5,f=function(n){return void 0===n.raw().touches||1!==n.raw().touches.length?u.none():u.some(n.raw().touches[0])},l=function(n,t){var e=c.abs(n.clientX-t.x()),r=c.abs(n.clientY-t.y());return e>s||r>s};return{monitor:function(c){var s=o(u.none()),d=n(function(n){s.set(u.none()),c.triggerEvent(e.longpress(),n)},400),m=function(n){return f(n).each(function(t){d.cancel();var e={x:i.constant(t.clientX),y:i.constant(t.clientY),target:n.target};d.schedule(e),s.set(u.some(e))}),u.none()},p=function(n){return d.cancel(),f(n).each(function(n){s.get().each(function(t){l(n,t)&&s.set(u.none())})}),u.none()},g=function(n){d.cancel();var t=function(t){return a.eq(t.target(),n.target())};return s.get().filter(t).map(function(){return c.triggerEvent(e.tap(),n)})},v=r.wrapAll([{key:t.touchstart(),value:m},{key:t.touchmove(),value:p},{key:t.touchend(),value:g}]);return{fireIfReady:function(n,t){return r.readOptFrom(v,t).bind(function(t){return t(n)})}}}}}),i("7y",["89","1t"],function(n,t){return{monitor:function(e){var r=n.monitor({triggerEvent:function(n,t){e.onTapContent(t)}}),o=function(){return t.bind(e.body(),"touchend",function(n){r.fireIfReady(n,"touchend")})},i=function(){return t.bind(e.body(),"touchmove",function(n){r.fireIfReady(n,"touchmove")})};return{fireTouchstart:function(n){r.fireIfReady(n,"touchstart")},onTouchend:o,onTouchmove:i}}}}),i("5x",["1f","x","6","7","19","8","1t","a","b","z","7y"],function(n,t,e,r,o,i,u,a,c,s,f){var l=r.detect().os.version.major>=6;return{initEvents:function(r,d,m){var p=f.monitor(r),g=s.owner(d),v=function(n){return!o.eq(n.start(),n.finish())||n.soffset()!==n.foffset()},h=function(){return i.active(g).filter(function(n){return"input"===c.name(n)}).exists(function(n){return n.dom().selectionStart!==n.dom().selectionEnd})},y=function(){var t=r.doc().dom().hasFocus()&&r.getSelection().exists(v);m.getByDom(d).each(!0===(t||h())?n.on:n.off)},b=[u.bind(r.body(),"touchstart",function(n){r.onTouchContent(),p.fireTouchstart(n)}),p.onTouchmove(),p.onTouchend(),u.bind(d,"touchstart",function(){r.onTouchToolstrip()}),r.onToReading(function(){i.blur(r.body())}),r.onToEditing(e.noop),r.onScrollToCursor(function(n){n.preventDefault(),r.getCursorBox().each(function(n){var t=r.win(),e=n.top()>t.innerHeight||n.bottom()>t.innerHeight,o=e?n.bottom()-t.innerHeight+50:0;0!==o&&t.scrollTo(t.pageXOffset,t.pageYOffset+o)})})].concat(!0===l?[]:[u.bind(a.fromDom(r.win()),"blur",function(){m.getByDom(d).each(n.off)}),u.bind(g,"select",y),u.bind(r.doc(),"selectionchange",y)]);return{destroy:function(){t.each(b,function(n){n.unbind()})}}}}}),i("7z",["x","6","8","a","b","1i"],function(n,t,e,r,o,i){var u=function(){return function(n){i(function(){n()},0)}};return{resume:function(i){i.focus();var a=r.fromDom(i.document.body);(e.active().exists(function(t){return n.contains(["input","textarea"],o.name(t))})?u(a):t.apply)(function(){e.active().each(e.blur),e.focus(a)})}}}),u("9c",isNaN),u("8e",parseInt),i("80",["4h","9c","8e"],function(n,t,e){return{safeParse:function(r,o){var i=e(n.get(r,o),10);return t(i)?0:i}}}),i("a7",["7","y","u"],function(n,t,e){return function(r,o){var i=function(n){if(!r(n))throw new e("Can only get "+o+" value of a "+o+" node");return s(n).getOr("")},u=function(n){try{return a(n)}catch(n){return t.none()}},a=function(n){return r(n)?t.from(n.dom().nodeValue):t.none()},c=n.detect().browser,s=c.isIE()&&10===c.version.major?u:a;return{get:i,getOption:s,set:function(n,t){if(!r(n))throw new e("Can only set raw "+o+" value of a "+o+" node");n.dom().nodeValue=t}}}}),i("a1",["b","a7"],function(n,t){var e=t(n.isText,"text");return{get:function(n){return e.get(n)},getOption:function(n){return e.getOption(n)},set:function(n,t){e.set(n,t)}}}),i("9d",["x","b","a1","z"],function(n,t,e,r){var o=function(n){return"img"===t.name(n)?1:e.getOption(n).fold(function(){return r.children(n).length},function(n){return n.length})},i="\xa0",u=function(n){return e.getOption(n).filter(function(n){return 0!==n.trim().length||n.indexOf(i)>-1}).isSome()},a=["img","br"];return{getEnd:o,isEnd:function(n,t){return o(n)===t},isStart:function(n,t){return 0===t},isCursorPosition:function(e){return u(e)||n.contains(a,t.name(e))}}}),i("9e",["6k","2n"],function(n,t){var e=n.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),r=t.immutable("start","soffset","finish","foffset"),o=function(n){return e.exact(n.start(),n.soffset(),n.finish(),n.foffset())};return{domRange:e.domRange,relative:e.relative,exact:e.exact,exactFromRange:o,range:r}}),i("9f",["19","a","z"],function(n,t,e){var r=function(n,t,r,o){var i=e.owner(n),u=i.dom().createRange();return u.setStart(n.dom(),t),u.setEnd(r.dom(),o),u},o=function(n,e,o,i){var u=r(n,e,o,i);return t.fromDom(u.commonAncestorContainer)};return{after:function(t,e,o,i){var u=r(t,e,o,i),a=n.eq(t,o)&&e===i;return u.collapsed&&!a},commonAncestorContainer:o}}),i("9g",["x","a","1a"],function(n,t,e){return{fromElements:function(r,o){var i=o||e,u=i.createDocumentFragment();return n.each(r,function(n){u.appendChild(n.dom())}),t.fromDom(u)}}}),i("9h",["6k"],function(n){var t=n.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),e=function(n,t,e,r){return n.fold(t,e,r)};return{before:t.before,on:t.on,after:t.after,cata:e}}),i("9i",["6","y","19","a"],function(n,t,e,r){var o=function(n,t){var e=n.document.createRange();return i(e,t),e},i=function(n,t){n.selectNodeContents(t.dom())},u=function(n,t){return t.compareBoundaryPoints(n.END_TO_START,n)<1&&t.compareBoundaryPoints(n.START_TO_END,n)>-1},a=function(n){return n.document.createRange()},c=function(n,t){t.fold(function(t){n.setStartBefore(t.dom())},function(t,e){n.setStart(t.dom(),e)},function(t){n.setStartAfter(t.dom())})},s=function(n,t){t.fold(function(t){n.setEndBefore(t.dom())},function(t,e){n.setEnd(t.dom(),e)},function(t){n.setEndAfter(t.dom())})},f=function(n,t){p(n),n.insertNode(t.dom())},l=function(n,t,r,o){return e.eq(n,r)&&t===o},d=function(n,t,e){var r=n.document.createRange();return c(r,t),s(r,e),r},m=function(n,t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},p=function(n){n.deleteContents()},g=function(n){var t=n.cloneContents();return r.fromDom(t)},v=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}};return{create:a,replaceWith:f,selectNodeContents:o,selectNodeContentsUsing:i,isCollapsed:l,relativeToNative:d,exactToNative:m,deleteContents:p,cloneFragment:g,getFirstRect:function(n){var e=n.getClientRects(),r=e.length>0?e[0]:n.getBoundingClientRect();return r.width>0||r.height>0?t.some(r).map(v):t.none()},getBounds:function(n){var e=n.getBoundingClientRect();return e.width>0||e.height>0?t.some(e).map(v):t.none()},isWithin:u,toString:function(n){return n.toString()}}}),i("9j",["6k","6","y","16","a","9i"],function(n,t,e,r,o,i){var u=n.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),a=function(n,t,e){return t(o.fromDom(e.startContainer),e.startOffset,o.fromDom(e.endContainer),e.endOffset)},c=function(n,o){return o.match({domRange:function(n){return{ltr:t.constant(n),rtl:e.none}},relative:function(t,o){return{ltr:r.cached(function(){return i.relativeToNative(n,t,o)}),rtl:r.cached(function(){return e.some(i.relativeToNative(n,o,t))})}},exact:function(t,o,u,a){return{ltr:r.cached(function(){return i.exactToNative(n,t,o,u,a)}),rtl:r.cached(function(){return e.some(i.exactToNative(n,u,a,t,o))})}}})},s=function(n,t){var e=t.ltr();if(e.collapsed){return t.rtl().filter(function(n){return!1===n.collapsed}).map(function(n){return u.rtl(o.fromDom(n.endContainer),n.endOffset,o.fromDom(n.startContainer),n.startOffset)}).getOrThunk(function(){return a(n,u.ltr,e)})}return a(n,u.ltr,e)},f=function(n,t){var e=c(n,t);return s(n,e)},l=function(n,t){return f(n,t).match({ltr:function(t,e,r,o){var i=n.document.createRange();return i.setStart(t.dom(),e),i.setEnd(r.dom(),o),i},rtl:function(t,e,r,o){var i=n.document.createRange();return i.setStart(r.dom(),o),i.setEnd(t.dom(),e),i}})};return{ltr:u.ltr,rtl:u.rtl,diagnose:f,asLtrRange:l}}),i("a8",["1v"],function(n){var t=function(t,e,r,o,i){if(0===i)return 0;if(e===o)return i-1;for(var u=o,a=1;a<i;a++){var c=t(a),s=n.abs(e-c.left);if(r>c.bottom);else{if(r<c.top||s>u)return a-1;u=s}}return 0};return{inRect:function(n,t,e){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},searchForPoint:t}}),i("a9",["y","14","a1","a8","1v"],function(n,t,e,r){var o=function(n,t,o,i,u){var a=function(e){var r=n.dom().createRange();return r.setStart(t.dom(),e),r.collapse(!0),r},c=function(n){return a(n).getBoundingClientRect()},s=e.get(t).length,f=r.searchForPoint(c,o,i,u.right,s);return a(f)};return{locate:function(e,i,u,a){var c=e.dom().createRange();c.selectNode(i.dom());var s=c.getClientRects();return t.findMap(s,function(t){return r.inRect(t,u,a)?n.some(t):n.none()}).map(function(n){return o(e,i,u,a,n)})}}}),i("a2",["y","14","b","z","a8","a9","1v"],function(n,t,e,r,o,i,u){var a=function(e,i,u,a){var s=e.dom().createRange(),f=r.children(i);return t.findMap(f,function(t){return s.selectNode(t.dom()),o.inRect(s.getBoundingClientRect(),u,a)?c(e,t,u,a):n.none()})},c=function(n,t,r,o){return(e.isText(t)?i.locate:a)(n,t,r,o)};return{locate:function(n,t,e,r){var o=n.dom().createRange();o.selectNode(t.dom());var i=o.getBoundingClientRect(),a=u.max(i.left,u.min(i.right,e)),s=u.max(i.top,u.min(i.bottom,r));return c(n,t,a,s)}}}),i("aa",["y","2t","z","9d"],function(n,t,e,r){var o=function(t,r){var o=function(t){for(var i=e.children(t),u=i.length-1;u>=0;u--){var a=i[u];if(r(a))return n.some(a);var c=o(a);if(c.isSome())return c}return n.none()};return o(t)};return{first:function(n){return t.descendant(n,r.isCursorPosition)},last:function(n){return o(n,r.isCursorPosition)}}}),i("a3",["y","z","aa"],function(n,t,e){var r=!0,o=!1,i=function(n,t){return t-n.left<n.right-t?r:o},u=function(n,t,e){var r=n.dom().createRange();return r.selectNode(t.dom()),r.collapse(e),r},a=function(n,t,o){var a=n.dom().createRange();a.selectNode(t.dom());var c=a.getBoundingClientRect(),s=i(c,o);return(s===r?e.first:e.last)(t).map(function(t){return u(n,t,s)})},c=function(t,e,r){var o=e.dom().getBoundingClientRect(),a=i(o,r);return n.some(u(t,e,a))};return{search:function(n,e,r){return(0===t.children(e).length?c:a)(n,e,r)}}}),i("9k",["y","a","z","9e","a2","a3","1a","1v"],function(n,t,e,r,o,i,u,a){var c=function(t,e,r){return n.from(t.dom().caretPositionFromPoint(e,r)).bind(function(e){if(null===e.offsetNode)return n.none();var r=t.dom().createRange();return r.setStart(e.offsetNode,e.offset),r.collapse(),n.some(r)})},s=function(t,e,r){return n.from(t.dom().caretRangeFromPoint(e,r))},f=function(n,t,e,r){var i=n.dom().createRange();i.selectNode(t.dom());var u=i.getBoundingClientRect(),c=a.max(u.left,a.min(u.right,e)),s=a.max(u.top,a.min(u.bottom,r));return o.locate(n,t,c,s)},l=function(r,o,u){return n.from(r.dom().elementFromPoint(o,u)).map(t.fromDom).bind(function(n){var t=function(){return i.search(r,n,o)};return 0===e.children(n).length?t():f(r,n,o,u).orThunk(t)})},d=u.caretPositionFromPoint?c:u.caretRangeFromPoint?s:l;return{fromPoint:function(n,e,o){var i=t.fromDom(n.document);return d(i,e,o).map(function(n){return r.range(t.fromDom(n.startContainer),n.startOffset,t.fromDom(n.endContainer),n.endOffset)})}}}),i("9l",["x","a","b","5l","2q","9i","9j"],function(n,t,e,r,o,i,u){var a=function(t,e,u,a){var c=i.create(t),s=o.is(e,a)?[e]:[],f=s.concat(r.descendants(e,a));return n.filter(f,function(n){return i.selectNodeContentsUsing(c,n),i.isWithin(u,c)})};return{find:function(n,r,o){var i=u.asLtrRange(n,r),c=t.fromDom(i.commonAncestorContainer);return e.isElement(c)?a(n,c,i,o):[]}}}),i("9m",["x","b","9e","9h"],function(n,t,e,r){var o=function(e,o){var i=t.name(e);return"input"===i?r.after(e):n.contains(["br","img"],i)?0===o?r.before(e):r.after(e):r.on(e,o)};return{beforeSpecial:o,preprocess:function(n,t){var i=n.fold(r.before,o,r.after),u=t.fold(r.before,o,r.after);return e.relative(i,u)}}}),i("82",["y","9f","a","9g","9e","9h","9i","9j","9k","9l","9m"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(n,t){var e=n.getSelection();e.removeAllRanges(),e.addRange(t)},d=function(n,t,e,r,o){var i=u.exactToNative(n,t,e,r,o);l(n,i)},m=function(n,t,e){return s.find(n,t,e)},p=function(n,t,e,r,o){g(n,i.on(t,e),i.on(r,o))},g=function(n,t,e){var r=f.preprocess(t,e);return a.diagnose(n,r).match({ltr:function(t,e,r,o){d(n,t,e,r,o)},rtl:function(t,e,r,o){var i=n.getSelection();i.extend?(i.collapse(t.dom(),e),i.extend(r.dom(),o)):d(n,r,o,t,e)}})},v=function(t){return n.from(t.getRangeAt(0)).map(function(n){return o.range(e.fromDom(n.startContainer),n.startOffset,e.fromDom(n.endContainer),n.endOffset)})},h=function(r){var i=e.fromDom(r.anchorNode),u=e.fromDom(r.focusNode);return t.after(i,r.anchorOffset,u,r.focusOffset)?n.some(o.range(e.fromDom(r.anchorNode),r.anchorOffset,e.fromDom(r.focusNode),r.focusOffset)):v(r)},y=function(n,t){var e=u.selectNodeContents(n,t);l(n,e)},b=function(n,t){var r=u.selectNodeContents(n,t);return o.range(e.fromDom(r.startContainer),r.startOffset,e.fromDom(r.endContainer),r.endOffset)},w=function(t){var e=t.getSelection();return e.rangeCount>0?h(e):n.none()},x=function(n){return w(n).map(function(n){return o.exact(n.start(),n.soffset(),n.finish(),n.foffset())})},O=function(n,t){var e=a.asLtrRange(n,t);return u.getFirstRect(e)},S=function(n,t){var e=a.asLtrRange(n,t);return u.getBounds(e)},T=function(n,t,e){return c.fromPoint(n,t,e)},k=function(n,t){var e=a.asLtrRange(n,t);return u.toString(e)};return{setExact:p,getExact:w,get:x,setRelative:g,setToElement:y,clear:function(n){n.getSelection().removeAllRanges()},clone:function(n,t){var e=a.asLtrRange(n,t);return u.cloneFragment(e)},replace:function(n,t,e){var o=a.asLtrRange(n,t),i=r.fromElements(e);u.replaceWith(o,i)},deleteAt:function(n,t){var e=a.asLtrRange(n,t);u.deleteContents(e)},forElement:b,getFirstRect:O,getBounds:S,getAtPoint:T,findWithin:m,getAsString:k}}),i("81",["x","6","a","z","9d","9e","82"],function(n,t,e,r,o,i,u){var a=2,c=function(n){return{left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:t.constant(a),height:n.height}},s=function(n){return{left:t.constant(n.left),top:t.constant(n.top),right:t.constant(n.right),bottom:t.constant(n.bottom),width:t.constant(n.width),height:t.constant(n.height)}},f=function(t){if(t.collapsed){var a=e.fromDom(t.startContainer);return r.parent(a).bind(function(e){var r=i.exact(a,t.startOffset,e,o.getEnd(e));return u.getFirstRect(t.startContainer.ownerDocument.defaultView,r).map(c).map(n.pure)}).getOr([])}return n.map(t.getClientRects(),s)};return{getRectangles:function(n){var t=n.getSelection();return void 0!==t&&t.rangeCount>0?f(t.getRangeAt(0)):[]}}}),i("5y",["6","y","1t","a","4h","1v","7z","h","80","81"],function(n,t,e,r,o,i,u,a,c,s){var f=50,l="data-"+a.resolve("last-outer-height"),d=function(n,t){o.set(n,l,t)},m=function(n){return c.safeParse(n,l)},p=function(t){return{top:n.constant(t.top()),bottom:n.constant(t.top()+t.height())}},g=function(n){var e=s.getRectangles(n);return e.length>0?t.some(e[0]).map(p):t.none()},v=function(n,e){var r=m(e),o=n.innerHeight;return r>o?t.some(r-o):t.none()},h=function(n,t,e){return t.top()>n.innerHeight||t.bottom()>n.innerHeight?i.min(e,t.bottom()-n.innerHeight+f):0};return{setup:function(n,t){var o=r.fromDom(t.document.body),i=function(){u.resume(t)},a=e.bind(r.fromDom(n),"resize",function(){v(n,o).each(function(n){g(t).each(function(e){var r=h(t,e,n);0!==r&&t.scrollTo(t.pageXOffset,t.pageYOffset+r)})}),d(o,n.innerHeight)});return d(o,n.innerHeight),{toEditing:i,destroy:function(){a.unbind()}}}}}),i("5z",["6","y","19","1t","a","82"],function(n,t,e,r,o,i){var u=function(n){return t.some(o.fromDom(n.dom().contentWindow.document.body))},a=function(n){return t.some(o.fromDom(n.dom().contentWindow.document))},c=function(n){return t.from(n.dom().contentWindow)},s=function(n){return c(n).bind(i.getExact)},f=function(n){return n.getFrame()},l=function(n,t){return function(e){return e[n].getOrThunk(function(){var n=f(e);return function(){return t(n)}})()}},d=function(n,t,e,o){return n[e].getOrThunk(function(){return function(n){return r.bind(t,o,n)}})},m=function(t){return{left:n.constant(t.left),top:n.constant(t.top),right:n.constant(t.right),bottom:n.constant(t.bottom),width:n.constant(t.width),height:n.constant(t.height)}},p=function(r){var l=f(r),p=function(n){var r=function(n){return e.eq(n.start(),n.finish())&&n.soffset()===n.foffset()},o=function(n){var e=n.start().dom().getBoundingClientRect();return e.width>0||e.height>0?t.some(e).map(m):t.none()};return i.getExact(n).filter(r).bind(o)};return u(l).bind(function(t){return a(l).bind(function(e){return c(l).map(function(u){var a=o.fromDom(e.dom().documentElement),c=r.getCursorBox.getOrThunk(function(){return function(){return i.get(u).bind(function(n){return i.getFirstRect(u,n).orThunk(function(){return p(u)})})}}),f=r.setSelection.getOrThunk(function(){return function(n,t,e,r){i.setExact(u,n,t,e,r)}}),m=r.clearSelection.getOrThunk(function(){return function(){i.clear(u)}});return{body:n.constant(t),doc:n.constant(e),win:n.constant(u),html:n.constant(a),getSelection:n.curry(s,l),setSelection:f,clearSelection:m,frame:n.constant(l),onKeyup:d(r,e,"onKeyup","keyup"),onNodeChanged:d(r,e,"onNodeChanged","selectionchange"),onDomChanged:r.onDomChanged,onScrollToCursor:r.onScrollToCursor,onScrollToElement:r.onScrollToElement,onToReading:r.onToReading,onToEditing:r.onToEditing,onToolbarScrollStart:r.onToolbarScrollStart,onTouchContent:r.onTouchContent,onTapContent:r.onTapContent,onTouchToolstrip:r.onTouchToolstrip,getCursorBox:c}})})})};return{getBody:l("getBody",u),getDoc:l("getDoc",a),getWin:l("getWin",c),getSelection:l("getSelection",s),getFrame:f,getActiveApi:p}}),i("60",["x","7","4h","38","5l"],function(n,t,e,r,o){var i="data-ephox-mobile-fullscreen-style",u="position:absolute!important;",a="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",c="background-color:rgb(255,255,255)!important;",s=t.detect().os.isAndroid(),f=function(n){var t=r.get(n,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":c};return{clobberStyles:function(t,r){var c=function(n){return o.siblings(n,"*")},l=function(n){return function(t){var r=e.get(t,"style"),o=void 0===r?"no-styles":r.trim();o!==n&&(e.set(t,i,o),e.set(t,"style",n))}},d=o.ancestors(t,"*"),m=n.bind(d,c),p=f(r);n.each(m,l("display:none!important;")),n.each(d,l(u+a+p)),l((!0===s?"":u)+a+p)(t)},restoreStyles:function(){var t=o.all("["+i+"]");n.each(t,function(n){var t=e.get(n,i);"no-styles"!==t?e.set(n,"style",t):e.remove(n,"style"),e.remove(n,i)})}}}),i("61",["9","a","4h","4t"],function(n,t,e,r){return{tag:function(){var o=r.first("head").getOrDie(),i=function(){var r=t.fromTag("meta");return e.set(r,"name","viewport"),n.append(o,r),r},u=r.first('meta[name="viewport"]').getOrThunk(i),a=e.get(u,"content");return{maximize:function(){e.set(u,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){void 0!==a&&null!==a&&a.length>0?e.set(u,"content",a):e.remove(u,"content")}}}}}),i("3q",["1y","2e","5x","5y","5z","60","h","61"],function(n,t,e,r,o,i,u,a){return{create:function(c,s){var f=a.tag(),l=n.api(),d=n.api();return{enter:function(){s.hide(),t.add(c.container,u.resolve("fullscreen-maximized")),t.add(c.container,u.resolve("android-maximized")),f.maximize(),t.add(c.body,u.resolve("android-scroll-reload")),l.set(r.setup(c.win,o.getWin(c.editor).getOrDie("no"))),o.getActiveApi(c.editor).each(function(n){i.clobberStyles(c.container,n.body()),d.set(e.initEvents(n,c.toolstrip,c.alloy))})},exit:function(){f.restore(),s.show(),t.remove(c.container,u.resolve("fullscreen-maximized")),t.remove(c.container,u.resolve("android-maximized")),i.restoreStyles(),t.remove(c.body,u.resolve("android-scroll-reload")),d.clear(),l.clear()}}}}}),i("3r",["28","2d","6","a","z","1j"],function(n,t,e,r,o){return t.objOf([n.strictObjOf("editor",[n.strict("getFrame"),n.option("getBody"),n.option("getDoc"),n.option("getWin"),n.option("getSelection"),n.option("setSelection"),n.option("clearSelection"),n.option("cursorSaver"),n.option("onKeyup"),n.option("onNodeChanged"),n.option("getCursorBox"),n.strict("onDomChanged"),n.defaulted("onTouchContent",e.noop),n.defaulted("onTapContent",e.noop),n.defaulted("onTouchToolstrip",e.noop),n.defaulted("onScrollToCursor",e.constant({unbind:e.noop})),n.defaulted("onScrollToElement",e.constant({unbind:e.noop})),n.defaulted("onToEditing",e.constant({unbind:e.noop})),n.defaulted("onToReading",e.constant({unbind:e.noop})),n.defaulted("onToolbarScrollStart",e.identity)]),n.strict("socket"),n.strict("toolstrip"),n.strict("dropup"),n.strict("toolbar"),n.strict("container"),n.strict("alloy"),n.state("win",function(n){return o.owner(n.socket).dom().defaultView}),n.state("body",function(n){return r.fromDom(n.socket.dom().ownerDocument.body)}),n.defaulted("translate",e.identity),n.defaulted("setReadOnly",e.noop)])}),i("62",["83","1i"],function(n,t){return{adaptable:function(e,r){var o=null,i=null;return{cancel:function(){null!==o&&(n(o),o=null,i=null)},throttle:function(){i=arguments,null===o&&(o=t(function(){e.apply(null,i),o=null,i=null},r))}}},first:function(e,r){var o=null;return{cancel:function(){null!==o&&(n(o),o=null)},throttle:function(){var n=arguments;null===o&&(o=t(function(){e.apply(null,n),o=null,n=null},r))}}},last:function(e,r){var o=null,i=function(){null!==o&&(n(o),o=null)},u=function(){var i=arguments;null!==o&&n(o),o=t(function(){e.apply(null,i),o=null,i=null},r)};return{cancel:i,throttle:u}}}}),i("3s",["p","1f","1g","1m","3u","62","1i","h","1n"],function(n,t,e,r,o,i,u,a,c){return{sketch:function(u){var s=e.record(o.sketch({dom:c.dom('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:n.derive([t.config({toggleClass:a.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),f=i.first(u,200);return o.sketch({dom:c.dom('<div class="${prefix}-disabled-mask"></div>'),components:[o.sketch({dom:c.dom('<div class="${prefix}-content-container"></div>'),components:[r.sketch({dom:c.dom('<div class="${prefix}-content-tap-section"></div>'),components:[s.asSpec()],action:function(){f.throttle()},buttonBehaviours:n.derive([t.config({toggleClass:a.resolve("mask-tap-icon-selected")})])})]})]})}}}),i("1z",["3p","2d","6","9","38","3q","3r","3s"],function(n,t,e,r,o,i,u,a){return{produce:function(c){var s=t.asRawOrDie("Getting AndroidWebapp schema",u,c);o.set(s.toolstrip,"width","100%");var f=function(){s.setReadOnly(!0),m.enter()},l=n.build(a.sketch(f,s.translate));s.alloy.add(l);var d={show:function(){s.alloy.add(l)},hide:function(){s.alloy.remove(l)}};r.append(s.container,l.element());var m=i.create(s,d);return{setReadOnly:s.setReadOnly,refreshStructure:e.noop,enter:m.enter,exit:m.exit,destroy:e.noop}}}}),i("63",["p","1x","4p","52","28","6"],function(n,t,e,r,o,i){var u=[o.defaulted("shell",!0),o.defaulted("toolbarBehaviours",{})],a=function(){return{behaviours:n.derive([t.config({})])}},c=[r.optional({name:"groups",overrides:a})];return{name:i.constant("Toolbar"),schema:i.constant(u),parts:i.constant(c)}}),i("3v",["p","1x","33","51","63","v","y","15","u"],function(n,t,e,r,o,i,u,a,c){var s=function(e,o){var s=function(n,e){f(n).fold(function(){throw a.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new c("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(n){t.set(n,e)})},f=function(n){return e.shell()?u.some(n):r.getPart(n,e,"groups")},l=e.shell()?{behaviours:[t.config({})],components:[]}:{behaviours:[],components:o};return{uid:e.uid(),dom:e.dom(),components:l.components,behaviours:i.deepMerge(n.derive(l.behaviours),e.toolbarBehaviours()),apis:{setGroups:s},domModification:{attributes:{role:"group"}}}};return e.composite({name:"Toolbar",configFields:o.schema(),partFields:o.parts(),factory:s,apis:{setGroups:function(n,t,e){n.setGroups(t,e)}}})}),i("65",["4p","52","28","6"],function(n,t,e,r){var o=[e.strict("items"),n.markers(["itemClass"]),e.defaulted("hasTabstop",!0),e.defaulted("tgroupBehaviours",{})],i=[t.group({name:"items",unit:"item",overrides:function(n){return{domModification:{classes:[n.markers().itemClass()]}}}})];return{name:r.constant("ToolbarGroup"),schema:r.constant(o),parts:r.constant(i)}}),i("3w",["p","32","64","33","65","v","u"],function(n,t,e,r,o,i){var u=function(r,o,u){return i.deepMerge({dom:{attributes:{role:"toolbar"}}},{uid:r.uid(),dom:r.dom(),components:o,behaviours:i.deepMerge(n.derive([t.config({mode:"flow",selector:"."+r.markers().itemClass()}),r.hasTabstop()?e.config({}):e.revoke()]),r.tgroupBehaviours()),"debug.sketcher":u["debug.sketcher"]})};return r.composite({name:"ToolbarGroup",configFields:o.schema(),partFields:o.parts(),factory:u})}),i("3x",["6","1t","4h","4t","h"],function(n,t,e,r,o){var i="data-"+o.resolve("horizontal-scroll"),u=function(n){n.dom().scrollTop=1;var t=0!==n.dom().scrollTop;return n.dom().scrollTop=0,t},a=function(n){n.dom().scrollLeft=1;var t=0!==n.dom().scrollLeft;return n.dom().scrollLeft=0,t},c=function(n){return n.dom().scrollTop>0||u(n)},s=function(n){return n.dom().scrollLeft>0||a(n)},f=function(n){e.set(n,i,"true")},l=function(n){return"true"===e.get(n,i)?s:c};return{exclusive:function(e,o){return t.bind(e,"touchmove",function(t){r.closest(t.target(),o).filter(l).fold(function(){t.raw().preventDefault()},n.noop)})},markAsHorizontal:f}}),i("20",["3t","p","32","1f","3p","3c","3u","3v","3w","x","5","6","38","3x","h","3y","1n"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v){return function(){var h=function(e){var r=!0===e.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:v.dom('<div aria-label="'+e.label+'" class="${prefix}-toolbar-group '+r+'"></div>'),tgroupBehaviours:t.derive([n.config("adhoc-scrollable-toolbar",!0===e.scrollable?[i.runOnInit(function(n){d.set(n.element(),"overflow-x","auto"),m.markAsHorizontal(n.element()),g.register(n.element())})]:[])]),components:[u.sketch({components:[c.parts().items({})]})],markers:{itemClass:p.resolve("toolbar-group-item")},items:e.items}},y=o.build(a.sketch({dom:v.dom('<div class="${prefix}-toolbar"></div>'),components:[a.parts().groups({})],toolbarBehaviours:t.derive([r.config({toggleClass:p.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),e.config({mode:"cyclic"})]),shell:!0})),b=o.build(u.sketch({dom:{classes:[p.resolve("toolstrip")]},components:[o.premade(y)],containerBehaviours:t.derive([r.config({toggleClass:p.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),w=function(){a.setGroups(y,x.get()),r.off(y)},x=f([]),O=function(n){x.set(n),w()},S=function(n){return s.map(n,l.compose(c.sketch,h))},T=function(){a.refresh(y)},k=function(n){r.on(y),a.setGroups(y,n)},C=function(){r.isOn(y)&&w()},E=function(){e.focusIn(y)};return{wrapper:l.constant(b),toolbar:l.constant(y),createGroups:S,setGroups:O,setContextToolbar:k,restoreToolbar:C,refresh:T,focus:E}}}),i("21",["p","1x","1","3p","1m","3u","6","2e","h","1n"],function(n,t,e,r,o,i,u,a,c,s){var f=function(n,e){t.append(n,r.premade(e))},l=function(n,e){t.remove(n,e)};return{makeEditSwitch:function(n){return r.build(o.sketch({dom:s.dom('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){n.run(function(n){n.setReadOnly(!1)})}}))},makeSocket:function(){return r.build(i.sketch({dom:s.dom('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:n.derive([t.config({})])}))},updateMode:function(n,t,r,o){(!0===r?e.toAlpha:e.toOmega)(o),(r?f:l)(n,t)}}}),i("67",["2e","86","38"],function(n,t,e){var r=function(n,t){return t.getAnimationRoot().fold(function(){return n.element()},function(t){return t(n)})},o=function(n){return n.dimension().property()},i=function(n,t){return n.dimension().getDimension()(t)},u=function(n,e){var o=r(n,e);t.remove(o,[e.shrinkingClass(),e.growingClass()])},a=function(t,r){n.remove(t.element(),r.openClass()),n.add(t.element(),r.closedClass()),e.set(t.element(),o(r),"0px"),e.reflow(t.element())},c=function(n,t){s(n,t);var e=i(t,n.element());return a(n,t),e},s=function(t,r){n.remove(t.element(),r.closedClass()),n.add(t.element(),r.openClass()),e.remove(t.element(),o(r))},f=function(n,t,r){r.setCollapsed(),e.set(n.element(),o(t),i(t,n.element())),e.reflow(n.element()),u(n,t),a(n,t),t.onStartShrink()(n),t.onShrunk()(n)},l=function(t,u,c){c.setCollapsed(),e.set(t.element(),o(u),i(u,t.element())),e.reflow(t.element());var s=r(t,u);n.add(s,u.shrinkingClass()),a(t,u),u.onStartShrink()(t)},d=function(t,i,u){var a=c(t,i),f=r(t,i);n.add(f,i.growingClass()),s(t,i),e.set(t.element(),o(i),a),u.setExpanded(),i.onStartGrow()(t)},m=function(n,t,e){e.isExpanded()||d(n,t,e)},p=function(n,t,e){e.isExpanded()&&l(n,t,e)},g=function(n,t,e){e.isExpanded()&&f(n,t,e)},v=function(n,t,e){return e.isExpanded()},h=function(n,t,e){return e.isCollapsed()},y=function(t,e){var o=r(t,e);return!0===n.has(o,e.growingClass())},b=function(t,e){var o=r(t,e);return!0===n.has(o,e.shrinkingClass())};return{grow:m,shrink:p,immediateShrink:g,hasGrown:v,hasShrunk:h,isGrowing:y,isShrinking:b,isTransitioning:function(n,t,e){return!0===y(n,t,e)||!0===b(n,t,e)},toggleGrow:function(n,t,e){(e.isExpanded()?l:d)(n,t,e)},disableTransitions:u}}),i("66",["3c","2f","67","4a","13","38"],function(n,t,e,r,o,i){return{exhibit:function(n,t){return t.expanded()?r.nu({classes:[t.openClass()],styles:{}}):r.nu({classes:[t.closedClass()],styles:o.wrap(t.dimension().property(),"0px")})},events:function(r,o){return n.derive([n.run(t.transitionend(),function(n,t){t.event().raw().propertyName===r.dimension().property()&&(e.disableTransitions(n,r,o),o.isExpanded()&&i.remove(n.element(),r.dimension().property()),(o.isExpanded()?r.onGrown():r.onShrunk())(n,t))})])}}}),i("68",["4p","28","2d","87","5m"],function(n,t,e,r,o){return[t.strict("closedClass"),t.strict("openClass"),t.strict("shrinkingClass"),t.strict("growingClass"),t.option("getAnimationRoot"),n.onHandler("onShrunk"),n.onHandler("onStartShrink"),n.onHandler("onGrown"),n.onHandler("onStartGrow"),t.defaulted("expanded",!1),t.strictOf("dimension",e.choose("property",{
width:[n.output("property","width"),n.output("getDimension",function(n){return o.get(n)+"px"})],height:[n.output("property","height"),n.output("getDimension",function(n){return r.get(n)+"px"})]}))]}),i("69",["4f","5","6"],function(n,t,e){return{init:function(r){var o=t(r.expanded()),i=function(){return"expanded: "+o.get()};return n({isExpanded:function(){return!0===o.get()},isCollapsed:function(){return!1===o.get()},setCollapsed:e.curry(o.set,!1),setExpanded:e.curry(o.set,!0),readState:i})}}}),i("3z",["p","66","67","68","69"],function(n,t,e,r,o){return n.create({fields:r,name:"sliding",active:t,apis:e,state:o})}),i("22",["p","1x","3z","3p","3u","6","1j","1k","h"],function(n,t,e,r,o,i,u,a,c){return{build:function(s,f){var l=r.build(o.sketch({dom:{tag:"div",classes:c.resolve("dropup")},components:[],containerBehaviours:n.derive([t.config({}),e.config({closedClass:c.resolve("dropup-closed"),openClass:c.resolve("dropup-open"),shrinkingClass:c.resolve("dropup-shrinking"),growingClass:c.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(n){s(),f(),t.set(n,[])},onGrown:function(){s(),f()}}),a.orientation(function(){m(i.noop)})])})),d=function(n,r,o){!0===e.hasShrunk(l)&&!1===e.isTransitioning(l)&&u.requestAnimationFrame(function(){r(o),t.set(l,[n()]),e.grow(l)})},m=function(n){u.requestAnimationFrame(function(){n(),e.shrink(l)})};return{appear:d,disappear:m,component:i.constant(l),element:l.element}}}}),i("6c",["88","s","89","28","2d","x","7","1t","b","z","1i"],function(n,t,e,r,o,i,u,a,c,s,f){var l=function(t){return t.raw().which===n.BACKSPACE()[0]&&!i.contains(["input","textarea"],c.name(t.target()))},d=u.detect().browser.isFirefox(),m=o.objOfOnly([r.strictFunction("triggerEvent"),r.strictFunction("broadcastEvent"),r.defaulted("stopBackspace",!0)]),p=function(n,t){return d?a.capture(n,"focus",t):a.bind(n,"focusin",t)},g=function(n,t){return d?a.capture(n,"blur",t):a.bind(n,"focusout",t)};return{setup:function(n,r){var c=o.asRawOrDie("Getting GUI events settings",m,r),d=u.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],v=e.monitor(c),h=i.map(d.concat(["selectstart","input","contextmenu","change","transitionend","dragstart","dragover","drop"]),function(t){return a.bind(n,t,function(n){v.fireIfReady(n,t).each(function(t){t&&n.kill()}),c.triggerEvent(t,n)&&n.kill()})}),y=a.bind(n,"keydown",function(n){c.triggerEvent("keydown",n)?n.kill():!0===c.stopBackspace&&l(n)&&n.prevent()}),b=p(n,function(n){c.triggerEvent("focusin",n)&&n.kill()}),w=g(n,function(n){c.triggerEvent("focusout",n)&&n.kill(),f(function(){c.triggerEvent(t.postBlur(),n)},0)}),x=s.defaultView(n),O=a.bind(x,"scroll",function(n){c.broadcastEvent(t.windowScroll(),n)&&n.kill()});return{unbind:function(){i.each(h,function(n){n.unbind()}),y.unbind(),b.unbind(),w.unbind(),O.unbind()}}}}}),i("8a",["13","5"],function(n,t){return{derive:function(e,r){var o=n.readOptFrom(e,"target").map(function(n){return n()}).getOr(r);return t(o)}}}),i("8b",["5","6","u"],function(n,t,e){var r=function(e,r){var o=n(!1),i=n(!1);return{stop:function(){o.set(!0)},cut:function(){i.set(!0)},isStopped:o.get,isCut:i.get,event:t.constant(e),setSource:r.set,getSource:r.get}};return{fromSource:r,fromExternal:function(r){var o=n(!1);return{stop:function(){o.set(!0)},cut:t.noop,isStopped:o.get,isCut:t.constant(!1),event:t.constant(r),setTarget:t.die(new e("Cannot set target of a broadcasted event")),getTarget:t.die(new e("Cannot get target of a broadcasted event"))}},fromTarget:function(t,e){var o=n(e);return r(t,o)}}}),i("6d",["6b","8a","8b","6k","x","z","u"],function(n,t,e,r,o,i){var u=r.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),a=function(t,r,o,a,c,s){var f=t(r,a),l=e.fromSource(o,c);return f.fold(function(){return s.logEventNoHandlers(r,a),u.complete()},function(t){var e=t.descHandler();return n.getHandler(e)(l),l.isStopped()?(s.logEventStopped(r,t.element(),e.purpose()),u.stopped()):l.isCut()?(s.logEventCut(r,t.element(),e.purpose()),u.complete()):i.parent(t.element()).fold(function(){return s.logNoParent(r,t.element(),e.purpose()),u.complete()},function(n){return s.logEventResponse(r,t.element(),e.purpose()),u.resume(n)})})},c=function(n,t,e,r,o,i){return a(n,t,e,r,o,i).fold(function(){return!0},function(r){return c(n,t,e,r,o,i)},function(){return!1})},s=function(n,e,r,o,i){var u=t.derive(r,o);return a(n,e,r,o,u,i)},f=function(t,r){var i=e.fromExternal(r);return o.each(t,function(t){var e=t.descHandler();n.getHandler(e)(i)}),i.isStopped()},l=function(n,t,e,r){var o=e.target();return d(n,t,e,o,r)},d=function(n,e,r,o,i){var u=t.derive(r,o);return c(n,e,r,o,u,i)};return{triggerHandler:s,triggerUntilStopped:l,triggerOnUntilStopped:d,broadcast:f}}),i("9n",["2t"],function(n){return{closest:function(t,e,r){return n.closest(t,function(n){return e(n).isSome()},r).bind(e)}}}),i("8c",["9n","6b","2z","13","6","w","y","2n","15"],function(n,t,e,r,o,i,u,a){var c=a.immutable("element","descHandler"),s=function(n,t){return{id:o.constant(n),descHandler:o.constant(t)}};return function(){var o={},a=function(n,e,r){i.each(r,function(r,i){var u=void 0!==o[i]?o[i]:{};u[e]=t.curryArgs(r,n),o[i]=u})},f=function(n,t){return e.read(t).fold(function(){return u.none()},function(e){var o=r.readOpt(e);return n.bind(o).map(function(n){return c(t,n)})})},l=function(n){return r.readOptFrom(o,n).map(function(n){return i.mapToArray(n,function(n,t){return s(t,n)})}).getOr([])},d=function(t,e,i){var u=r.readOpt(e),a=u(o);return n.closest(i,function(n){return f(a,n)},t)};return{registerId:a,unregisterId:function(n){i.each(o,function(t){t.hasOwnProperty(n)&&delete t[n]})},filterByType:l,find:d}}}),i("6e",["8c","12","2z","13","11","u"],function(n,t,e,r,o,i){return function(){var u=n(),a={},c=function(n){var t=n.element();return e.read(t).fold(function(){return e.write("uid-",n.element())},function(n){return n})},s=function(n,e){var r=a[e];if(r!==n)throw new i('The tagId "'+e+'" is already used by: '+t.element(r.element())+"\nCannot use it for: "+t.element(n.element())+"\nThe conflicting element is"+(o.inBody(r.element())?" ":" not ")+"already in the DOM");l(n)},f=function(n){var t=c(n);r.hasKey(a,t)&&s(n,t);var e=[n];u.registerId(e,t,n.events()),a[t]=n},l=function(n){e.read(n.element()).each(function(n){a[n]=void 0,u.unregisterId(n)})},d=function(n){return u.filterByType(n)};return{find:function(n,t,e){return u.find(n,t,e)},filter:d,register:f,unregister:l,getById:function(n){return r.readOpt(n)(a)}}}}),i("40",["3p","s","3","6a","3u","4","6b","6c","6d","12","6e","2z","x","6","47","19","8","9","10","b","2e","z","u"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w,x,O){var S=function(){var t=n.build(o.sketch({dom:{tag:"div"}}));return T(t)},T=function(o){var s=function(n){return x.parent(o.element()).fold(function(){return!0},function(t){return g.eq(n,t)})},h=f(),w=function(n,t){return h.find(s,n,t)},S=a.setup(o.element(),{triggerEvent:function(n,t){return i.monitorEvent(n,t.target(),function(e){return c.triggerUntilStopped(w,n,t,e)})},broadcastEvent:function(n,t){var e=h.filter(n);return c.broadcast(e,t)}}),T=r({debugInfo:m.constant("real"),triggerEvent:function(n,t,e){i.monitorEvent(n,t,function(r){c.triggerOnUntilStopped(w,n,e,t,r)})},triggerFocus:function(n,e){l.read(n).fold(function(){v.focus(n)},function(){i.monitorEvent(t.focus(),n,function(r){c.triggerHandler(w,t.focus(),{originator:m.constant(e),target:m.constant(n)},n,r)})})},triggerEscape:function(n,t){T.triggerEvent("keydown",n.element(),t.event())},getByUid:function(n){return M(n)},getByDom:function(n){return I(n)},build:n.build,addToGui:function(n){E(n)},removeFromGui:function(n){D(n)},addToWorld:function(n){k(n)},removeFromWorld:function(n){C(n)},broadcast:function(n){F(n)},broadcastOn:function(n,t){B(n,t)}}),k=function(n){n.connect(T),b.isText(n.element())||(h.register(n),d.each(n.components(),k),T.triggerEvent(t.systemInit(),n.element(),{target:m.constant(n.element())}))},C=function(n){b.isText(n.element())||(d.each(n.components(),C),h.unregister(n)),n.disconnect()},E=function(n){e.attach(o,n)},D=function(n){e.detach(n)},A=function(){S.unbind(),y.remove(o.element())},R=function(n){var e=h.filter(t.receive());d.each(e,function(t){var e=t.descHandler();u.getHandler(e)(n)})},F=function(n){R({universal:m.constant(!0),data:m.constant(n)})},B=function(n,t){R({universal:m.constant(!1),channels:m.constant(n),data:m.constant(t)})},M=function(n){return h.getById(n).fold(function(){return p.error(new O('Could not find component with uid: "'+n+'" in system.'))},p.value)},I=function(n){return l.read(n).bind(M)};return k(o),{root:m.constant(o),element:o.element,destroy:A,add:E,remove:D,getByUid:M,getByDom:I,addToWorld:k,removeFromWorld:C,broadcast:F,broadcastOn:B}};return{create:S,takeover:T}}),i("23",["p","1","3p","40","3u","6","h"],function(n,t,e,r,o,i,u){var a=i.constant(u.resolve("readonly-mode")),c=i.constant(u.resolve("edit-mode"));return function(i){var s=e.build(o.sketch({dom:{classes:[u.resolve("outer-container")].concat(i.classes)},containerBehaviours:n.derive([t.config({alpha:a(),omega:c()})])}));return r.takeover(s)}}),i("j",["1x","1","6","1y","1z","h","20","21","22","23"],function(n,t,e,r,o,i,u,a,c,s){return function(t){var f=s({classes:[i.resolve("android-container")]}),l=u(),d=r.api(),m=a.makeEditSwitch(d),p=a.makeSocket(),g=c.build(e.noop,t);f.add(l.wrapper()),f.add(p),f.add(g.component());var v=function(n){var t=l.createGroups(n);l.setGroups(t)},h=function(n){var t=l.createGroups(n);l.setContextToolbar(t)},y=function(){l.focus()},b=function(){l.restoreToolbar()},w=function(n){d.set(o.produce(n))},x=function(){d.run(function(t){t.exit(),n.remove(p,m)})},O=function(n){a.updateMode(p,m,n,f.root())};return{system:e.constant(f),element:f.element,init:w,exit:x,setToolbarGroups:v,setContextToolbar:h,focusToolbar:y,restoreToolbar:b,updateMode:O,socket:e.constant(p),dropup:e.constant(g)}}}),i("9o",["6"],function(n){var t=function(e,r){var o=function(n,o){return t(e+n,r+o)};return{left:n.constant(e),top:n.constant(r),translate:o}};return t}),i("9p",["6","19","a","b","2t","1a"],function(n,t,e,r,o,i){return{attached:function(r,u){var a=u||e.fromDom(i.documentElement);return o.ancestor(r,n.curry(t.eq,a)).isSome()},windowOf:function(n){var t=n.dom();return t===t.window?n:r.isDocument(n)?t.defaultView||t.parentWindow:null}}}),i("8d",["9o","9p","a"],function(n,t,e){var r=function(t){var e=t.getBoundingClientRect();return n(e.left,e.top)},o=function(n,t){return void 0!==n?n:void 0!==t?t:0},i=function(n){var r=n.dom().ownerDocument,i=r.body,u=t.windowOf(e.fromDom(r)),c=r.documentElement,s=o(u.pageYOffset,c.scrollTop),f=o(u.pageXOffset,c.scrollLeft),l=o(c.clientTop,i.clientTop),d=o(c.clientLeft,i.clientLeft);return a(n).translate(f-d,s-l)},u=function(t){var e=t.dom();return n(e.offsetLeft,e.offsetTop)},a=function(o){var i=o.dom(),u=i.ownerDocument,a=u.body,c=e.fromDom(u.documentElement);return a===i?n(a.offsetLeft,a.offsetTop):t.attached(o,c)?r(i):n(0,0)};return{absolute:i,relative:u,viewport:a}}),i("6f",["89","x","62","19","1t","87","8d","7y"],function(n,t,e,r,o,i,u,a){return{initEvents:function(n,c,s,f){var l=function(){c.run(function(n){n.highlightSelection()})},d=function(){c.run(function(n){n.refreshSelection()})},m=function(n,t){var e=n-f.dom().scrollTop;c.run(function(n){n.scrollIntoView(e,e+t)})},p=function(n){var t=u.absolute(n).top(),e=i.get(n);m(c,f,t,e)},g=function(){n.getCursorBox().each(function(n){m(n.top(),n.height())})},v=function(){c.run(function(n){n.clearSelection()})},h=function(){v(),T.throttle()},y=function(){g(n,c,f),c.run(function(n){n.syncHeight()})},b=function(){var t=i.get(s);c.run(function(n){n.setViewportOffset(t)}),d(c),y(n,c,f)},w=function(){c.run(function(n){n.toEditing()})},x=function(){c.run(function(n){n.toReading()})},O=function(n){c.run(function(t){t.onToolbarTouch(n)})},S=a.monitor(n),T=e.last(y,300),k=[n.onKeyup(h),n.onNodeChanged(d),n.onDomChanged(T.throttle),n.onDomChanged(d),n.onScrollToCursor(function(n){n.preventDefault(),T.throttle()}),n.onScrollToElement(function(n){p(n.element())}),n.onToEditing(w),n.onToReading(x),o.bind(n.doc(),"touchend",function(t){r.eq(n.html(),t.target())||r.eq(n.body(),t.target())}),o.bind(s,"transitionend",function(n){"height"===n.raw().propertyName&&b()}),o.capture(s,"touchstart",function(t){l(),O(t),n.onTouchToolstrip()}),o.bind(n.body(),"touchstart",function(t){v(),n.onTouchContent(),S.fireTouchstart(t)}),S.onTouchmove(),S.onTouchend(),o.bind(n.body(),"click",function(n){n.kill()}),o.bind(s,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){t.each(k,function(n){n.unbind()})}}}}}),i("9q",["8","1i"],function(n,t){return{refreshInput:function(e){var r=e.dom().selectionStart,o=e.dom().selectionEnd,i=e.dom().selectionDirection;t(function(){e.dom().setSelectionRange(r,o,i),n.focus(e)},50)},refresh:function(n){var t=n.getSelection();if(t.rangeCount>0){var e=t.getRangeAt(0),r=n.document.createRange();r.setStart(e.startContainer,e.startOffset),r.setEnd(e.endContainer,e.endOffset),t.removeAllRanges(),t.addRange(r)}}}}),i("8m",["19","8","a","9q"],function(n,t,e,r){return{resume:function(o,i){t.active().each(function(e){n.eq(e,i)||t.blur(e)}),o.focus(),t.focus(e.fromDom(o.document.body)),r.refresh(o)}}}),i("8f",["x","9","2r","10","1t","a","2e","86","38","z","8m","h","81"],function(n,t,e,r,o,i,u,a,c,s,f,l,d){return function(m,p){var g=m.document,v=i.fromTag("div");u.add(v,l.resolve("unfocused-selections")),t.append(i.fromDom(g.documentElement),v);var h=o.bind(v,"touchstart",function(n){n.prevent(),f.resume(m,p),w()}),y=function(n){var t=i.fromTag("span");return a.add(t,[l.resolve("layer-editor"),l.resolve("unfocused-selection")]),c.setAll(t,{left:n.left()+"px",top:n.top()+"px",width:n.width()+"px",height:n.height()+"px"}),t},b=function(){w();var t=d.getRectangles(m),r=n.map(t,y);e.append(v,r)},w=function(){r.empty(v)},x=function(){h.unbind(),r.remove(v)};return{update:b,isActive:function(){return s.children(v).length>0},destroy:x,clear:w}}}),i("9u",["x","y","1i"],function(n,t,e){var r=function(o){var i=t.none(),u=[],a=function(n){return r(function(t){c(function(e){t(n(e))})})},c=function(n){f()?d(n):u.push(n)},s=function(n){i=t.some(n),l(u),u=[]},f=function(){return i.isSome()},l=function(t){n.each(t,d)},d=function(n){i.each(function(t){e(function(){n(t)},0)})};return o(s),{get:c,map:a,isReady:f}};return{nu:r,pure:function(n){return r(function(t){t(n)})}}}),i("a4",["t","1i"],function(n,t){return{bounce:function(e){return function(){var r=n.prototype.slice.call(arguments),o=this;t(function(){e.apply(o,r)},0)}}}}),i("9r",["9u","a4"],function(n,t){var e=function(r){var o=function(n){r(t.bounce(n))};return{map:function(n){return e(function(t){o(function(e){var r=n(e);t(r)})})},bind:function(n){return e(function(t){o(function(e){n(e).get(t)})})},anonBind:function(n){return e(function(t){o(function(){n.get(t)})})},toLazy:function(){return n.nu(o)},get:o}};return{nu:e,pure:function(n){return e(function(t){t(n)})}}}),i("9s",["y","1u","1v","1w"],function(n,t,e,r){var o=function(t,r,o){return e.abs(t-r)<=o?n.none():t<r?n.some(t+o):n.some(t-o)};return{create:function(){var n=null;return{animate:function(i,u,a,c,s,f){var l=!1,d=function(n){l=!0,s(n)};t(n);var m=function(e){t(n),d(e)};n=r(function(){var r=i();o(r,u,a).fold(function(){t(n),d(u)},function(o){if(c(o,m),!l){var a=i();(a!==o||e.abs(a-u)>e.abs(r-u))&&(t(n),d(u))}})},f)}}},adjust:o}}),i("a5",["y","14"],function(n,t){return{findDevice:function(e,r){var o=[{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}];return t.findMap(o,function(t){return e<=t.width&&r<=t.height?n.some(t.keyboard):n.none()}).getOr({portrait:r/5,landscape:e/4})}}}),i("9t",["38","z","87","a5","i"],function(n,t,e,r,o){var i=function(n){return r.findDevice(n.screen.width,n.screen.height)},u=function(n){var t=o.get(n).isPortrait(),e=i(n),r=t?e.portrait:e.landscape;return(t?n.screen.height:n.screen.width)-n.innerHeight>r?0:r},a=function(n,r){var o=t.owner(n).dom().defaultView;return e.get(n)+e.get(r)-u(o)};return{getGreenzone:a,updatePadding:function(t,r,o){var i=a(r,o),u=e.get(r)+e.get(o)-i;n.set(t,"padding-bottom",u+"px")}}}),i("8k",["6k","x","6","4h","38","5l","z","87","9t","h","3y","80"],function(n,t,e,r,o,i,u,a,c,s,f,l){var d=n.generate([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),m="data-"+s.resolve("position-y-fixed"),p="data-"+s.resolve("y-property"),g="data-"+s.resolve("scrolling"),v="data-"+s.resolve("last-window-height"),h=function(n){return l.safeParse(n,m)},y=function(n){return r.get(n,p)},b=function(n){return l.safeParse(n,v)},w=function(n,t){var e=y(n);return d.fixed(n,e,t)},x=function(n,t){return d.scroller(n,t)},O=function(n){var t=h(n);return("true"===r.get(n,g)?x:w)(n,t)},S=function(n){var e=i.descendants(n,"["+m+"]");return t.map(e,O)},T=function(n){var t=r.get(n,"style");return o.setAll(n,{position:"absolute",top:"0px"}),r.set(n,m,"0px"),r.set(n,p,"top"),{restore:function(){r.set(n,"style",t||""),r.remove(n,m),r.remove(n,p)}}},k=function(n,t,e){var i=r.get(e,"style");return f.register(e),o.setAll(e,{position:"absolute",height:t+"px",width:"100%",top:n+"px"}),r.set(e,m,n+"px"),r.set(e,g,"true"),r.set(e,p,"top"),{restore:function(){f.deregister(e),r.set(e,"style",i||""),r.remove(e,m),r.remove(e,g),r.remove(e,p)}}},C=function(n){var t=r.get(n,"style");return o.setAll(n,{position:"absolute",bottom:"0px"}),r.set(n,m,"0px"),r.set(n,p,"bottom"),{restore:function(){r.set(n,"style",t||""),r.remove(n,m),r.remove(n,p)}}},E=function(n,t,e){var o=u.owner(n).dom().defaultView,i=o.innerHeight;return r.set(n,v,i+"px"),i-t-e};return{findFixtures:S,takeover:function(n,t,i,s){var f=u.owner(n).dom().defaultView,l=T(i),d=a.get(i),p=a.get(s),g=E(n,d,p),v=k(d,g,n),h=C(s,d,g),y=!0,w=function(){y=!1,l.restore(),v.restore(),h.restore()},x=function(){return f.innerHeight>b(n)},O=function(){if(y){var e=a.get(i),u=a.get(s),f=E(n,e,u);r.set(n,m,e+"px"),o.set(n,"height",f+"px"),o.set(s,"bottom",-(e+f+u)+"px"),c.updatePadding(t,n,s)}},S=function(t){var e=t+"px";r.set(n,m,e),O()};return c.updatePadding(t,n,s),{setViewportOffset:S,isExpanding:x,isShrinking:e.not(x),refresh:O,restore:w}},getYFixedData:h}}),i("8g",["6","9r","4h","86","38","z","1v","9s","8k","h","80"],function(n,t,e,r,o,i,u,a,c,s,f){var l=a.create(),d=15,m=10,p=10,g="data-"+s.resolve("last-scroll-top"),v=function(n){var t=o.getRaw(n,"top").getOr(0);return parseInt(t,10)},h=function(n){return parseInt(n.dom().scrollTop,10)},y=function(e,r,i){return t.nu(function(t){var u=n.curry(h,e),a=function(n){e.dom().scrollTop=n,o.set(e,"top",v(e)+d+"px")},c=function(){e.dom().scrollTop=r,o.set(e,"top",i+"px"),t(r)};l.animate(u,r,d,a,c,p)})},b=function(r,o){return t.nu(function(t){var i=n.curry(h,r);e.set(r,g,i());var a=function(n,t){f.safeParse(r,g)!==r.dom().scrollTop?t(r.dom().scrollTop):(r.dom().scrollTop=n,e.set(r,g,n))},c=function(){r.dom().scrollTop=o,e.set(r,g,o),t(o)},s=u.abs(o-i()),d=u.ceil(s/m);l.animate(i,o,d,a,c,p)})},w=function(e,r){return t.nu(function(t){var i=n.curry(v,e),a=function(n){o.set(e,"top",n+"px")},c=function(){a(r),t(r)},s=u.abs(r-i()),f=u.ceil(s/m);l.animate(i,r,f,a,c,p)})},x=function(n,t){var e=t+c.getYFixedData(n)+"px";o.set(n,"top",e)};return{moveScrollAndTop:y,moveOnlyScroll:b,moveOnlyTop:w,moveWindowScroll:function(n,e,r){var o=i.owner(n).dom().defaultView;return t.nu(function(t){x(n,r),x(e,r),o.scrollTo(0,r),t(r)})}}}),i("8h",["5","9u"],function(n,t){return function(e){var r=n(t.pure({}));return{start:function(n){var o=t.nu(function(t){return e(n).get(t)});r.set(o)},idle:function(n){r.get().get(function(){n()})}}}}),i("8i",["6","8e","8g","9t","9q"],function(n,t,e,r,o){return{scrollIntoView:function(t,i,u,a,c){var s=r.getGreenzone(i,u),f=n.curry(o.refresh,t);a>s||c>s?e.moveOnlyScroll(i,i.dom().scrollTop-s+c).get(f):a<0&&e.moveOnlyScroll(i,i.dom().scrollTop+a).get(f)}}}),i("a6",["x"],function(n){return{par:function(t,e){return e(function(e){var r=[],o=0,i=function(n){return function(i){r[n]=i,++o>=t.length&&e(r)}};0===t.length?e([]):n.each(t,function(n,t){n.get(i(t))})})}}}),i("9v",["x","9r","a6"],function(n,t,e){var r=function(n){return e.par(n,t.nu)};return{par:r,mapM:function(t,e){var o=n.map(t,e);return r(o)},compose:function(n,t){return function(e){return t(e).bind(n)}}}}),i("8j",["x","9r","9v","38","8g","8k"],function(n,t,e,r,o,i){var u=function(n,e,o,i){var u=o+i;return r.set(n,e,u+"px"),t.pure(i)},a=function(n,t,e){var i=t+e,u=r.getRaw(n,"top").getOr(e),a=i-parseInt(u,10),c=n.dom().scrollTop+a;return o.moveScrollAndTop(n,c,i)},c=function(n,t){return n.fold(function(n,e,r){return u(n,e,t,r)},function(n,e){return a(n,t,e)})};return{updatePositions:function(t,r){var o=i.findFixtures(t),u=n.map(o,function(n){return c(n,r)});return e.par(u)}}}),i("8l",["8","9","10","a","38"],function(n,t,e,r,o){return{input:function(i,u){var a=r.fromTag("input");o.setAll(a,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),t.append(i,a),n.focus(a),u(a),e.remove(a)}}}),i("6g",["6","y","62","8","1t","11","a","38","1u","83","15","1v","8e","1w","1i","8f","8g","8h","8i","8j","8k","i","8l","81"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w,x,O,S){var T=5,k=function(r,i,a,c,s,f){var l=h(function(n){return v.moveWindowScroll(r,i,n)}),d=function(){var e=S.getRectangles(f);return t.from(e[0]).bind(function(e){var r=e.top()-i.dom().scrollTop;return r>c.innerHeight+T||r<-T?t.some({top:n.constant(r),bottom:n.constant(r+e.height())}):t.none()})},m=e.last(function(){l.idle(function(){b.updatePositions(a,c.pageYOffset).get(function(){d().each(function(n){i.dom().scrollTop=i.dom().scrollTop+n.top()}),l.start(0),s.refresh()})})},1e3),p=o.bind(u.fromDom(c),"scroll",function(){c.pageYOffset<0||m.throttle()});return b.updatePositions(a,c.pageYOffset).get(n.identity),{unbind:p.unbind}};return{setup:function(t){var e=t.cWin(),c=t.ceBody(),s=t.socket(),f=t.toolstrip(),l=t.toolbar(),d=t.contentElement(),m=t.keyboardType(),p=t.outerWindow(),h=t.dropup(),b=w.takeover(s,c,f,h),S=m(t.outerBody(),e,i.body(),d,f,l),T=function(){S.toEditing(),I()},C=function(){S.toReading()},E=function(n){S.onToolbarTouch(n)},D=x.onChange(p,{onChange:n.noop,onReady:b.refresh});D.onAdjustment(function(){b.refresh()});var A=o.bind(u.fromDom(p),"resize",function(){b.isExpanding()&&b.refresh()}),R=k(f,s,t.outerBody(),p,b,e),F=g(e,d),B=function(){F.isActive()&&F.update()},M=function(){F.update()},I=function(){F.clear()},N=function(n,t){y.scrollIntoView(e,s,h,n,t)},j=function(){a.set(d,"height",d.dom().contentWindow.document.body.scrollHeight+"px")},H=function(t){b.setViewportOffset(t),v.moveOnlyTop(s,t).get(n.identity)},P=function(){b.restore(),D.destroy(),R.unbind(),A.unbind(),S.destroy(),F.destroy(),O.input(i.body(),r.blur)};return{toEditing:T,toReading:C,onToolbarTouch:E,refreshSelection:B,clearSelection:I,highlightSelection:M,scrollIntoView:N,updateToolbarPadding:n.noop,setViewportOffset:H,syncHeight:j,refreshStructure:b.refresh,destroy:P}}}}),i("6h",["x","6","8","1t","11","b","8m","8l"],function(n,t,e,r,o,i,u,a){return{stubborn:function(t,o,c,s){var f=function(){u.resume(o,s)},l=function(){a.input(t,e.blur)},d=r.bind(c,"keydown",function(t){n.contains(["input","textarea"],i.name(t.target()))||f()});return{toReading:l,toEditing:f,onToolbarTouch:function(){},destroy:function(){d.unbind()}}},timid:function(n,r,o,i){var a=function(){e.blur(i)},c=function(){a()};return{toReading:function(){a()},toEditing:function(){u.resume(r,i)},onToolbarTouch:c,destroy:t.noop}}}}),i("41",["6","1y","2n","8","a","2e","38","1a","6f","6g","5z","3x","6h","60","h","3y","61"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v){return{create:function(h,y){var b=v.tag(),w=t.value(),x=t.value(),O=t.api(),S=t.api(),T=function(){y.hide();var t=o.fromDom(a);f.getActiveApi(h.editor).each(function(o){w.set({socketHeight:u.getRaw(h.socket,"height"),iframeHeight:u.getRaw(o.frame(),"height"),outerScroll:a.body.scrollTop}),x.set({exclusives:l.exclusive(t,"."+g.scrollable())}),i.add(h.container,p.resolve("fullscreen-maximized")),m.clobberStyles(h.container,o.body()),b.maximize(),u.set(h.socket,"overflow","scroll"),u.set(h.socket,"-webkit-overflow-scrolling","touch"),r.focus(o.body());var f=e.immutableBag(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);O.set(s.setup(f({cWin:o.win(),ceBody:o.body(),socket:h.socket,toolstrip:h.toolstrip,toolbar:h.toolbar,dropup:h.dropup.element(),contentElement:o.frame(),cursor:n.noop,outerBody:h.body,outerWindow:h.win,keyboardType:d.stubborn,isScrolling:function(){return x.get().exists(function(n){return n.socket.isScrolling()})}}))),O.run(function(n){n.syncHeight()}),S.set(c.initEvents(o,O,h.toolstrip,h.socket,h.dropup))})},k=function(){b.restore(),S.clear(),O.clear(),y.show(),w.on(function(n){n.socketHeight.each(function(n){u.set(h.socket,"height",n)}),n.iframeHeight.each(function(n){u.set(h.editor.getFrame(),"height",n)}),a.body.scrollTop=n.scrollTop}),w.clear(),x.on(function(n){n.exclusives.unbind()}),x.clear(),i.remove(h.container,p.resolve("fullscreen-maximized")),m.restoreStyles(),g.deregister(h.toolbar),u.remove(h.socket,"overflow"),u.remove(h.socket,"-webkit-overflow-scrolling"),r.blur(h.editor.getFrame()),f.getActiveApi(h.editor).each(function(n){n.clearSelection()})};return{enter:T,refreshStructure:function(){O.run(function(n){n.refreshStructure()})},exit:k}}}}),i("24",["3p","2d","6","38","3r","41","3s"],function(n,t,e,r,o,i,u){return{produce:function(a){var c=t.asRawOrDie("Getting IosWebapp schema",o,a);r.set(c.toolstrip,"width","100%"),r.set(c.container,"position","relative");var s=function(){c.setReadOnly(!0),d.enter()},f=n.build(u.sketch(s,c.translate));c.alloy.add(f);var l={show:function(){c.alloy.add(f)},hide:function(){c.alloy.remove(f)}},d=i.create(c,l);return{setReadOnly:c.setReadOnly,refreshStructure:d.refreshStructure,enter:d.enter,exit:d.exit,destroy:e.noop}}}}),i("l",["1x","6","1y","24","h","20","21","22","23"],function(n,t,e,r,o,i,u,a,c){return function(s){var f=c({classes:[o.resolve("ios-container")]}),l=i(),d=e.api(),m=u.makeEditSwitch(d),p=u.makeSocket(),g=a.build(function(){d.run(function(n){n.refreshStructure()})},s);f.add(l.wrapper()),f.add(p),f.add(g.component());var v=function(n){var t=l.createGroups(n);l.setGroups(t)},h=function(n){var t=l.createGroups(n);l.setContextToolbar(t)},y=function(){l.focus()},b=function(){l.restoreToolbar()},w=function(n){d.set(r.produce(n))},x=function(){d.run(function(t){n.remove(p,m),t.exit()})},O=function(n){u.updateMode(p,m,n,f.root())};return{system:t.constant(f),element:f.element,init:w,exit:x,setToolbarGroups:v,setContextToolbar:h,focusToolbar:y,restoreToolbar:b,updateMode:O,socket:t.constant(p),dropup:t.constant(g)}}}),i("25",["1d"],function(n){return n("tinymce.EditorManager")}),i("m",["13","25"],function(n,t){return{derive:function(e){var r=n.readOptFrom(e.settings,"skin_url").fold(function(){return t.baseURL+"/skins/lightgray"},function(n){return n});return{content:r+"/content.mobile.min.css",ui:r+"/skin.mobile.min.css"}}}}),i("n",["x","6","w","f"],function(n,t,e,r){var o=["x-small","small","medium","large","x-large"],i=function(n,t,e){n.system().broadcastOn([r.formatChanged()],{command:t,state:e})};return{init:function(t,r){var o=e.keys(r.formatter.get());n.each(o,function(n){r.formatter.formatChanged(n,function(e){i(t,n,e)})}),n.each(["ul","ol"],function(n){r.selection.selectorChanged(n,function(e){i(t,n,e)})})},fontSizes:t.constant(o)}}),i("o",[],function(){return{fireSkinLoaded:function(n){var t=function(){n._skinLoaded=!0,n.fire("SkinLoaded")};return function(){n.initialized?t():n.on("init",t)}}}}),i("0",["1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o"],function(n,t,e,r,o,i,u,a,c,s,f,l,d,m,p,g,v,h,y,b,w,x,O,S){var T=i.constant("toReading"),k=i.constant("toEditing");return d.add("mobile",function(d){var C=function(C){var E=x.derive(d);d.contentCSS.push(E.content),l.DOM.styleSheetLoader.load(E.ui,S.fireSkinLoaded(d));var D=function(){d.fire("scrollIntoView")},A=s.fromTag("div"),R=u.detect().os.isAndroid()?y(D):w(D),F=s.fromDom(C.targetNode);c.after(F,A),e.attachSystem(A,R.system());var B=function(n){return a.search(n).bind(function(n){return R.system().getByDom(n).toOption()})},M=C.targetNode.ownerDocument.defaultView,I=h.onChange(M,{onChange:function(){R.system().broadcastOn([p.orientationChanged()],{width:h.getActualWidth(M)})},onReady:i.noop}),N=function(n,t,e){!1===e&&d.selection.collapse(),R.setToolbarGroups(e?n.get():t.get()),d.setMode(!0===e?"readonly":"design"),d.fire(!0===e?T():k()),R.updateMode(e)},j=function(n,t){return d.on(n,t),{unbind:function(){d.off(n)}}};return d.on("init",function(){R.init({editor:{getFrame:function(){return s.fromDom(d.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:i.noop}},onToReading:function(n){return j(T(),n)},onToEditing:function(n){return j(k(),n)},onScrollToCursor:function(n){return d.on("scrollIntoView",function(t){n(t)}),{unbind:function(){d.off("scrollIntoView"),I.destroy()}}},onTouchToolstrip:function(){e()},onTouchContent:function(){var n=s.fromDom(d.editorContainer.querySelector("."+v.resolve("toolbar")));B(n).each(t.emitExecute),R.restoreToolbar(),e()},onTapContent:function(t){var e=t.target();if("img"===f.name(e))d.selection.select(e.dom()),t.kill();else if("a"===f.name(e)){var r=R.system().getByDom(s.fromDom(d.editorContainer));r.each(function(t){n.isAlpha(t)&&m.openLink(e.dom())})}}},container:s.fromDom(d.editorContainer),socket:s.fromDom(d.contentAreaContainer),toolstrip:s.fromDom(d.editorContainer.querySelector("."+v.resolve("toolstrip"))),toolbar:s.fromDom(d.editorContainer.querySelector("."+v.resolve("toolbar"))),dropup:R.dropup(),alloy:R.system(),translate:i.noop,setReadOnly:function(n){N(S,x,n)}});var e=function(){R.dropup().disappear(function(){R.system().broadcastOn([p.dropupDismissed()],{})})};r.registerInspector("remove this",R.system());var u={label:"The first group",scrollable:!1,items:[b.forToolbar("back",function(){d.selection.collapse(),R.exit()},{})]},a={label:"Back to read only",scrollable:!1,items:[b.forToolbar("readonly-back",function(){N(S,x,!0)},{})]},c={label:"The read only mode group",scrollable:!0,items:[]},l=g.setup(R,d),h=g.detect(d.settings,l),y={label:"the action group",scrollable:!0,items:h},w={label:"The extra group",scrollable:!1,items:[]},x=o([a,y,w]),S=o([u,c,w]);O.init(R,d)}),{iframeContainer:R.socket().element().dom(),editorContainer:R.element().dom()}};return{getNotificationManagerImpl:function(){return{open:i.identity,close:i.noop,reposition:i.noop,getArgs:i.identity}},renderUI:C}}),function(){}}),r("0")()}();