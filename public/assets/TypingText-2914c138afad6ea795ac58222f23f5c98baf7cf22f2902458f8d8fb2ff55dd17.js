TypingText=function(t,i,r,e){if("undefined"==typeof document.getElementById||"undefined"==typeof t.innerHTML)return void(this.running=!0);this.element=t,this.finishedCallback=e||function(){},this.interval=void 0===i?100:i,this.origText=this.element.innerHTML,this.unparsedOrigText=this.origText,this.cursor=r||"",this.currentText="",this.currentChar=0,this.element.typingText=this,""==this.element.id&&(this.element.id="typingtext"+TypingText.currentIndex++),TypingText.all.push(this),this.running=!1,this.inTag=!1,this.tagBuffer="",this.inHTMLEntity=!1,this.HTMLEntityBuffer=""},TypingText.all=new Array,TypingText.currentIndex=0,TypingText.runAll=function(){for(var t=0;t<TypingText.all.length;t++)TypingText.all[t].run()},TypingText.prototype.run=function(){if(!this.running){if("undefined"==typeof this.origText)return void setTimeout("document.getElementById('"+this.element.id+"').typingText.run()",this.interval);if(""==this.currentText&&(this.element.innerHTML=""),this.currentChar<this.origText.length){if("<"==this.origText.charAt(this.currentChar)&&!this.inTag)return this.tagBuffer="<",this.inTag=!0,this.currentChar++,void this.run();if(">"==this.origText.charAt(this.currentChar)&&this.inTag)return this.tagBuffer+=">",this.inTag=!1,this.currentText+=this.tagBuffer,this.currentChar++,void this.run();if(this.inTag)return this.tagBuffer+=this.origText.charAt(this.currentChar),this.currentChar++,void this.run();if("&"==this.origText.charAt(this.currentChar)&&!this.inHTMLEntity)return this.HTMLEntityBuffer="&",this.inHTMLEntity=!0,this.currentChar++,void this.run();if(";"==this.origText.charAt(this.currentChar)&&this.inHTMLEntity)return this.HTMLEntityBuffer+=";",this.inHTMLEntity=!1,this.currentText+=this.HTMLEntityBuffer,this.currentChar++,void this.run();if(this.inHTMLEntity)return this.HTMLEntityBuffer+=this.origText.charAt(this.currentChar),this.currentChar++,void this.run();this.currentText+=this.origText.charAt(this.currentChar),this.element.innerHTML=this.currentText,this.element.innerHTML+=this.currentChar<this.origText.length-1?"function"==typeof this.cursor?this.cursor(this.currentText):this.cursor:"",this.currentChar++,setTimeout("document.getElementById('"+this.element.id+"').typingText.run()",this.interval)}else this.currentText="",this.currentChar=0,this.running=!1,this.finishedCallback()}};